(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const u of r.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function i(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(s){if(s.ep)return;s.ep=!0;const r=i(s);fetch(s.href,r)}})();function Tu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var vp={exports:{}},Ja={},Cp={exports:{}},rt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sv;function OR(){if(Sv)return rt;Sv=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),u=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),S=Symbol.iterator;function y(N){return N===null||typeof N!="object"?null:(N=S&&N[S]||N["@@iterator"],typeof N=="function"?N:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,M={};function x(N,Z,Pe){this.props=N,this.context=Z,this.refs=M,this.updater=Pe||E}x.prototype.isReactComponent={},x.prototype.setState=function(N,Z){if(typeof N!="object"&&typeof N!="function"&&N!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,N,Z,"setState")},x.prototype.forceUpdate=function(N){this.updater.enqueueForceUpdate(this,N,"forceUpdate")};function _(){}_.prototype=x.prototype;function k(N,Z,Pe){this.props=N,this.context=Z,this.refs=M,this.updater=Pe||E}var I=k.prototype=new _;I.constructor=k,b(I,x.prototype),I.isPureReactComponent=!0;var H=Array.isArray,A=Object.prototype.hasOwnProperty,z={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function te(N,Z,Pe){var re,fe={},we=null,$e=null;if(Z!=null)for(re in Z.ref!==void 0&&($e=Z.ref),Z.key!==void 0&&(we=""+Z.key),Z)A.call(Z,re)&&!j.hasOwnProperty(re)&&(fe[re]=Z[re]);var Ze=arguments.length-2;if(Ze===1)fe.children=Pe;else if(1<Ze){for(var xe=Array(Ze),qe=0;qe<Ze;qe++)xe[qe]=arguments[qe+2];fe.children=xe}if(N&&N.defaultProps)for(re in Ze=N.defaultProps,Ze)fe[re]===void 0&&(fe[re]=Ze[re]);return{$$typeof:e,type:N,key:we,ref:$e,props:fe,_owner:z.current}}function le(N,Z){return{$$typeof:e,type:N.type,key:Z,ref:N.ref,props:N.props,_owner:N._owner}}function ve(N){return typeof N=="object"&&N!==null&&N.$$typeof===e}function ue(N){var Z={"=":"=0",":":"=2"};return"$"+N.replace(/[=:]/g,function(Pe){return Z[Pe]})}var Re=/\/+/g;function Be(N,Z){return typeof N=="object"&&N!==null&&N.key!=null?ue(""+N.key):Z.toString(36)}function Oe(N,Z,Pe,re,fe){var we=typeof N;(we==="undefined"||we==="boolean")&&(N=null);var $e=!1;if(N===null)$e=!0;else switch(we){case"string":case"number":$e=!0;break;case"object":switch(N.$$typeof){case e:case t:$e=!0}}if($e)return $e=N,fe=fe($e),N=re===""?"."+Be($e,0):re,H(fe)?(Pe="",N!=null&&(Pe=N.replace(Re,"$&/")+"/"),Oe(fe,Z,Pe,"",function(qe){return qe})):fe!=null&&(ve(fe)&&(fe=le(fe,Pe+(!fe.key||$e&&$e.key===fe.key?"":(""+fe.key).replace(Re,"$&/")+"/")+N)),Z.push(fe)),1;if($e=0,re=re===""?".":re+":",H(N))for(var Ze=0;Ze<N.length;Ze++){we=N[Ze];var xe=re+Be(we,Ze);$e+=Oe(we,Z,Pe,xe,fe)}else if(xe=y(N),typeof xe=="function")for(N=xe.call(N),Ze=0;!(we=N.next()).done;)we=we.value,xe=re+Be(we,Ze++),$e+=Oe(we,Z,Pe,xe,fe);else if(we==="object")throw Z=String(N),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(N).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return $e}function He(N,Z,Pe){if(N==null)return N;var re=[],fe=0;return Oe(N,re,"","",function(we){return Z.call(Pe,we,fe++)}),re}function be(N){if(N._status===-1){var Z=N._result;Z=Z(),Z.then(function(Pe){(N._status===0||N._status===-1)&&(N._status=1,N._result=Pe)},function(Pe){(N._status===0||N._status===-1)&&(N._status=2,N._result=Pe)}),N._status===-1&&(N._status=0,N._result=Z)}if(N._status===1)return N._result.default;throw N._result}var Te={current:null},U={transition:null},Se={ReactCurrentDispatcher:Te,ReactCurrentBatchConfig:U,ReactCurrentOwner:z};function J(){throw Error("act(...) is not supported in production builds of React.")}return rt.Children={map:He,forEach:function(N,Z,Pe){He(N,function(){Z.apply(this,arguments)},Pe)},count:function(N){var Z=0;return He(N,function(){Z++}),Z},toArray:function(N){return He(N,function(Z){return Z})||[]},only:function(N){if(!ve(N))throw Error("React.Children.only expected to receive a single React element child.");return N}},rt.Component=x,rt.Fragment=i,rt.Profiler=s,rt.PureComponent=k,rt.StrictMode=n,rt.Suspense=p,rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Se,rt.act=J,rt.cloneElement=function(N,Z,Pe){if(N==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+N+".");var re=b({},N.props),fe=N.key,we=N.ref,$e=N._owner;if(Z!=null){if(Z.ref!==void 0&&(we=Z.ref,$e=z.current),Z.key!==void 0&&(fe=""+Z.key),N.type&&N.type.defaultProps)var Ze=N.type.defaultProps;for(xe in Z)A.call(Z,xe)&&!j.hasOwnProperty(xe)&&(re[xe]=Z[xe]===void 0&&Ze!==void 0?Ze[xe]:Z[xe])}var xe=arguments.length-2;if(xe===1)re.children=Pe;else if(1<xe){Ze=Array(xe);for(var qe=0;qe<xe;qe++)Ze[qe]=arguments[qe+2];re.children=Ze}return{$$typeof:e,type:N.type,key:fe,ref:we,props:re,_owner:$e}},rt.createContext=function(N){return N={$$typeof:u,_currentValue:N,_currentValue2:N,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},N.Provider={$$typeof:r,_context:N},N.Consumer=N},rt.createElement=te,rt.createFactory=function(N){var Z=te.bind(null,N);return Z.type=N,Z},rt.createRef=function(){return{current:null}},rt.forwardRef=function(N){return{$$typeof:c,render:N}},rt.isValidElement=ve,rt.lazy=function(N){return{$$typeof:v,_payload:{_status:-1,_result:N},_init:be}},rt.memo=function(N,Z){return{$$typeof:g,type:N,compare:Z===void 0?null:Z}},rt.startTransition=function(N){var Z=U.transition;U.transition={};try{N()}finally{U.transition=Z}},rt.unstable_act=J,rt.useCallback=function(N,Z){return Te.current.useCallback(N,Z)},rt.useContext=function(N){return Te.current.useContext(N)},rt.useDebugValue=function(){},rt.useDeferredValue=function(N){return Te.current.useDeferredValue(N)},rt.useEffect=function(N,Z){return Te.current.useEffect(N,Z)},rt.useId=function(){return Te.current.useId()},rt.useImperativeHandle=function(N,Z,Pe){return Te.current.useImperativeHandle(N,Z,Pe)},rt.useInsertionEffect=function(N,Z){return Te.current.useInsertionEffect(N,Z)},rt.useLayoutEffect=function(N,Z){return Te.current.useLayoutEffect(N,Z)},rt.useMemo=function(N,Z){return Te.current.useMemo(N,Z)},rt.useReducer=function(N,Z,Pe){return Te.current.useReducer(N,Z,Pe)},rt.useRef=function(N){return Te.current.useRef(N)},rt.useState=function(N){return Te.current.useState(N)},rt.useSyncExternalStore=function(N,Z,Pe){return Te.current.useSyncExternalStore(N,Z,Pe)},rt.useTransition=function(){return Te.current.useTransition()},rt.version="18.3.1",rt}var yv;function If(){return yv||(yv=1,Cp.exports=OR()),Cp.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv;function NR(){if(Rv)return Ja;Rv=1;var e=If(),t=Symbol.for("react.element"),i=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function u(c,p,g){var v,S={},y=null,E=null;g!==void 0&&(y=""+g),p.key!==void 0&&(y=""+p.key),p.ref!==void 0&&(E=p.ref);for(v in p)n.call(p,v)&&!r.hasOwnProperty(v)&&(S[v]=p[v]);if(c&&c.defaultProps)for(v in p=c.defaultProps,p)S[v]===void 0&&(S[v]=p[v]);return{$$typeof:t,type:c,key:y,ref:E,props:S,_owner:s.current}}return Ja.Fragment=i,Ja.jsx=u,Ja.jsxs=u,Ja}var Pv;function GR(){return Pv||(Pv=1,vp.exports=NR()),vp.exports}var de=GR(),R=If();const ae=Tu(R);var qc={},wp={exports:{}},qi={},Sp={exports:{}},yp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv;function HR(){return Fv||(Fv=1,function(e){function t(U,Se){var J=U.length;U.push(Se);e:for(;0<J;){var N=J-1>>>1,Z=U[N];if(0<s(Z,Se))U[N]=Se,U[J]=Z,J=N;else break e}}function i(U){return U.length===0?null:U[0]}function n(U){if(U.length===0)return null;var Se=U[0],J=U.pop();if(J!==Se){U[0]=J;e:for(var N=0,Z=U.length,Pe=Z>>>1;N<Pe;){var re=2*(N+1)-1,fe=U[re],we=re+1,$e=U[we];if(0>s(fe,J))we<Z&&0>s($e,fe)?(U[N]=$e,U[we]=J,N=we):(U[N]=fe,U[re]=J,N=re);else if(we<Z&&0>s($e,J))U[N]=$e,U[we]=J,N=we;else break e}}return Se}function s(U,Se){var J=U.sortIndex-Se.sortIndex;return J!==0?J:U.id-Se.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var u=Date,c=u.now();e.unstable_now=function(){return u.now()-c}}var p=[],g=[],v=1,S=null,y=3,E=!1,b=!1,M=!1,x=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(U){for(var Se=i(g);Se!==null;){if(Se.callback===null)n(g);else if(Se.startTime<=U)n(g),Se.sortIndex=Se.expirationTime,t(p,Se);else break;Se=i(g)}}function H(U){if(M=!1,I(U),!b)if(i(p)!==null)b=!0,be(A);else{var Se=i(g);Se!==null&&Te(H,Se.startTime-U)}}function A(U,Se){b=!1,M&&(M=!1,_(te),te=-1),E=!0;var J=y;try{for(I(Se),S=i(p);S!==null&&(!(S.expirationTime>Se)||U&&!ue());){var N=S.callback;if(typeof N=="function"){S.callback=null,y=S.priorityLevel;var Z=N(S.expirationTime<=Se);Se=e.unstable_now(),typeof Z=="function"?S.callback=Z:S===i(p)&&n(p),I(Se)}else n(p);S=i(p)}if(S!==null)var Pe=!0;else{var re=i(g);re!==null&&Te(H,re.startTime-Se),Pe=!1}return Pe}finally{S=null,y=J,E=!1}}var z=!1,j=null,te=-1,le=5,ve=-1;function ue(){return!(e.unstable_now()-ve<le)}function Re(){if(j!==null){var U=e.unstable_now();ve=U;var Se=!0;try{Se=j(!0,U)}finally{Se?Be():(z=!1,j=null)}}else z=!1}var Be;if(typeof k=="function")Be=function(){k(Re)};else if(typeof MessageChannel<"u"){var Oe=new MessageChannel,He=Oe.port2;Oe.port1.onmessage=Re,Be=function(){He.postMessage(null)}}else Be=function(){x(Re,0)};function be(U){j=U,z||(z=!0,Be())}function Te(U,Se){te=x(function(){U(e.unstable_now())},Se)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){b||E||(b=!0,be(A))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):le=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return y},e.unstable_getFirstCallbackNode=function(){return i(p)},e.unstable_next=function(U){switch(y){case 1:case 2:case 3:var Se=3;break;default:Se=y}var J=y;y=Se;try{return U()}finally{y=J}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,Se){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var J=y;y=U;try{return Se()}finally{y=J}},e.unstable_scheduleCallback=function(U,Se,J){var N=e.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?N+J:N):J=N,U){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=J+Z,U={id:v++,callback:Se,priorityLevel:U,startTime:J,expirationTime:Z,sortIndex:-1},J>N?(U.sortIndex=J,t(g,U),i(p)===null&&U===i(g)&&(M?(_(te),te=-1):M=!0,Te(H,J-N))):(U.sortIndex=Z,t(p,U),b||E||(b=!0,be(A))),U},e.unstable_shouldYield=ue,e.unstable_wrapCallback=function(U){var Se=y;return function(){var J=y;y=Se;try{return U.apply(this,arguments)}finally{y=J}}}}(yp)),yp}var Ev;function BR(){return Ev||(Ev=1,Sp.exports=HR()),Sp.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bv;function VR(){if(bv)return qi;bv=1;var e=If(),t=BR();function i(o){for(var a="https://reactjs.org/docs/error-decoder.html?invariant="+o,h=1;h<arguments.length;h++)a+="&args[]="+encodeURIComponent(arguments[h]);return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var n=new Set,s={};function r(o,a){u(o,a),u(o+"Capture",a)}function u(o,a){for(s[o]=a,o=0;o<a.length;o++)n.add(a[o])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,g=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,v={},S={};function y(o){return p.call(S,o)?!0:p.call(v,o)?!1:g.test(o)?S[o]=!0:(v[o]=!0,!1)}function E(o,a,h,m){if(h!==null&&h.type===0)return!1;switch(typeof a){case"function":case"symbol":return!0;case"boolean":return m?!1:h!==null?!h.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function b(o,a,h,m){if(a===null||typeof a>"u"||E(o,a,h,m))return!0;if(m)return!1;if(h!==null)switch(h.type){case 3:return!a;case 4:return a===!1;case 5:return isNaN(a);case 6:return isNaN(a)||1>a}return!1}function M(o,a,h,m,w,P,D){this.acceptsBooleans=a===2||a===3||a===4,this.attributeName=m,this.attributeNamespace=w,this.mustUseProperty=h,this.propertyName=o,this.type=a,this.sanitizeURL=P,this.removeEmptyString=D}var x={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){x[o]=new M(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var a=o[0];x[a]=new M(a,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){x[o]=new M(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){x[o]=new M(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){x[o]=new M(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){x[o]=new M(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){x[o]=new M(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){x[o]=new M(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){x[o]=new M(o,5,!1,o.toLowerCase(),null,!1,!1)});var _=/[\-:]([a-z])/g;function k(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var a=o.replace(_,k);x[a]=new M(a,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var a=o.replace(_,k);x[a]=new M(a,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var a=o.replace(_,k);x[a]=new M(a,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){x[o]=new M(o,1,!1,o.toLowerCase(),null,!1,!1)}),x.xlinkHref=new M("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){x[o]=new M(o,1,!1,o.toLowerCase(),null,!0,!0)});function I(o,a,h,m){var w=x.hasOwnProperty(a)?x[a]:null;(w!==null?w.type!==0:m||!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(b(a,h,w,m)&&(h=null),m||w===null?y(a)&&(h===null?o.removeAttribute(a):o.setAttribute(a,""+h)):w.mustUseProperty?o[w.propertyName]=h===null?w.type===3?!1:"":h:(a=w.attributeName,m=w.attributeNamespace,h===null?o.removeAttribute(a):(w=w.type,h=w===3||w===4&&h===!0?"":""+h,m?o.setAttributeNS(m,a,h):o.setAttribute(a,h))))}var H=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,A=Symbol.for("react.element"),z=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),le=Symbol.for("react.profiler"),ve=Symbol.for("react.provider"),ue=Symbol.for("react.context"),Re=Symbol.for("react.forward_ref"),Be=Symbol.for("react.suspense"),Oe=Symbol.for("react.suspense_list"),He=Symbol.for("react.memo"),be=Symbol.for("react.lazy"),Te=Symbol.for("react.offscreen"),U=Symbol.iterator;function Se(o){return o===null||typeof o!="object"?null:(o=U&&o[U]||o["@@iterator"],typeof o=="function"?o:null)}var J=Object.assign,N;function Z(o){if(N===void 0)try{throw Error()}catch(h){var a=h.stack.trim().match(/\n( *(at )?)/);N=a&&a[1]||""}return`
`+N+o}var Pe=!1;function re(o,a){if(!o||Pe)return"";Pe=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(a)if(a=function(){throw Error()},Object.defineProperty(a.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(a,[])}catch(ee){var m=ee}Reflect.construct(o,[],a)}else{try{a.call()}catch(ee){m=ee}o.call(a.prototype)}else{try{throw Error()}catch(ee){m=ee}o()}}catch(ee){if(ee&&m&&typeof ee.stack=="string"){for(var w=ee.stack.split(`
`),P=m.stack.split(`
`),D=w.length-1,O=P.length-1;1<=D&&0<=O&&w[D]!==P[O];)O--;for(;1<=D&&0<=O;D--,O--)if(w[D]!==P[O]){if(D!==1||O!==1)do if(D--,O--,0>O||w[D]!==P[O]){var B=`
`+w[D].replace(" at new "," at ");return o.displayName&&B.includes("<anonymous>")&&(B=B.replace("<anonymous>",o.displayName)),B}while(1<=D&&0<=O);break}}}finally{Pe=!1,Error.prepareStackTrace=h}return(o=o?o.displayName||o.name:"")?Z(o):""}function fe(o){switch(o.tag){case 5:return Z(o.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return o=re(o.type,!1),o;case 11:return o=re(o.type.render,!1),o;case 1:return o=re(o.type,!0),o;default:return""}}function we(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case j:return"Fragment";case z:return"Portal";case le:return"Profiler";case te:return"StrictMode";case Be:return"Suspense";case Oe:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case ue:return(o.displayName||"Context")+".Consumer";case ve:return(o._context.displayName||"Context")+".Provider";case Re:var a=o.render;return o=o.displayName,o||(o=a.displayName||a.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case He:return a=o.displayName||null,a!==null?a:we(o.type)||"Memo";case be:a=o._payload,o=o._init;try{return we(o(a))}catch{}}return null}function $e(o){var a=o.type;switch(o.tag){case 24:return"Cache";case 9:return(a.displayName||"Context")+".Consumer";case 10:return(a._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=a.render,o=o.displayName||o.name||"",a.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return a;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return we(a);case 8:return a===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof a=="function")return a.displayName||a.name||null;if(typeof a=="string")return a}return null}function Ze(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function xe(o){var a=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function qe(o){var a=xe(o)?"checked":"value",h=Object.getOwnPropertyDescriptor(o.constructor.prototype,a),m=""+o[a];if(!o.hasOwnProperty(a)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var w=h.get,P=h.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return w.call(this)},set:function(D){m=""+D,P.call(this,D)}}),Object.defineProperty(o,a,{enumerable:h.enumerable}),{getValue:function(){return m},setValue:function(D){m=""+D},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}function wt(o){o._valueTracker||(o._valueTracker=qe(o))}function it(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var h=a.getValue(),m="";return o&&(m=xe(o)?o.checked?"true":"false":o.value),o=m,o!==h?(a.setValue(o),!0):!1}function st(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function yt(o,a){var h=a.checked;return J({},a,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:h??o._wrapperState.initialChecked})}function Ve(o,a){var h=a.defaultValue==null?"":a.defaultValue,m=a.checked!=null?a.checked:a.defaultChecked;h=Ze(a.value!=null?a.value:h),o._wrapperState={initialChecked:m,initialValue:h,controlled:a.type==="checkbox"||a.type==="radio"?a.checked!=null:a.value!=null}}function Qt(o,a){a=a.checked,a!=null&&I(o,"checked",a,!1)}function ui(o,a){Qt(o,a);var h=Ze(a.value),m=a.type;if(h!=null)m==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+h):o.value!==""+h&&(o.value=""+h);else if(m==="submit"||m==="reset"){o.removeAttribute("value");return}a.hasOwnProperty("value")?Ji(o,a.type,h):a.hasOwnProperty("defaultValue")&&Ji(o,a.type,Ze(a.defaultValue)),a.checked==null&&a.defaultChecked!=null&&(o.defaultChecked=!!a.defaultChecked)}function On(o,a,h){if(a.hasOwnProperty("value")||a.hasOwnProperty("defaultValue")){var m=a.type;if(!(m!=="submit"&&m!=="reset"||a.value!==void 0&&a.value!==null))return;a=""+o._wrapperState.initialValue,h||a===o.value||(o.value=a),o.defaultValue=a}h=o.name,h!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,h!==""&&(o.name=h)}function Ji(o,a,h){(a!=="number"||st(o.ownerDocument)!==o)&&(h==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+h&&(o.defaultValue=""+h))}var Kt=Array.isArray;function kt(o,a,h,m){if(o=o.options,a){a={};for(var w=0;w<h.length;w++)a["$"+h[w]]=!0;for(h=0;h<o.length;h++)w=a.hasOwnProperty("$"+o[h].value),o[h].selected!==w&&(o[h].selected=w),w&&m&&(o[h].defaultSelected=!0)}else{for(h=""+Ze(h),a=null,w=0;w<o.length;w++){if(o[w].value===h){o[w].selected=!0,m&&(o[w].defaultSelected=!0);return}a!==null||o[w].disabled||(a=o[w])}a!==null&&(a.selected=!0)}}function fi(o,a){if(a.dangerouslySetInnerHTML!=null)throw Error(i(91));return J({},a,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function Gi(o,a){var h=a.value;if(h==null){if(h=a.children,a=a.defaultValue,h!=null){if(a!=null)throw Error(i(92));if(Kt(h)){if(1<h.length)throw Error(i(93));h=h[0]}a=h}a==null&&(a=""),h=a}o._wrapperState={initialValue:Ze(h)}}function rs(o,a){var h=Ze(a.value),m=Ze(a.defaultValue);h!=null&&(h=""+h,h!==o.value&&(o.value=h),a.defaultValue==null&&o.defaultValue!==h&&(o.defaultValue=h)),m!=null&&(o.defaultValue=""+m)}function gi(o){var a=o.textContent;a===o._wrapperState.initialValue&&a!==""&&a!==null&&(o.value=a)}function ot(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ot(o,a){return o==null||o==="http://www.w3.org/1999/xhtml"?ot(a):o==="http://www.w3.org/2000/svg"&&a==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var en,ll=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(a,h,m,w){MSApp.execUnsafeLocalFunction(function(){return o(a,h,m,w)})}:o}(function(o,a){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=a;else{for(en=en||document.createElement("div"),en.innerHTML="<svg>"+a.valueOf().toString()+"</svg>",a=en.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;a.firstChild;)o.appendChild(a.firstChild)}});function ci(o,a){if(a){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=a;return}}o.textContent=a}var Nn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},al=["Webkit","ms","Moz","O"];Object.keys(Nn).forEach(function(o){al.forEach(function(a){a=a+o.charAt(0).toUpperCase()+o.substring(1),Nn[a]=Nn[o]})});function Co(o,a,h){return a==null||typeof a=="boolean"||a===""?"":h||typeof a!="number"||a===0||Nn.hasOwnProperty(o)&&Nn[o]?(""+a).trim():a+"px"}function wo(o,a){o=o.style;for(var h in a)if(a.hasOwnProperty(h)){var m=h.indexOf("--")===0,w=Co(h,a[h],m);h==="float"&&(h="cssFloat"),m?o.setProperty(h,w):o[h]=w}}var hr=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ls(o,a){if(a){if(hr[o]&&(a.children!=null||a.dangerouslySetInnerHTML!=null))throw Error(i(137,o));if(a.dangerouslySetInnerHTML!=null){if(a.children!=null)throw Error(i(60));if(typeof a.dangerouslySetInnerHTML!="object"||!("__html"in a.dangerouslySetInnerHTML))throw Error(i(61))}if(a.style!=null&&typeof a.style!="object")throw Error(i(62))}}function mn(o,a){if(o.indexOf("-")===-1)return typeof a.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var As=null;function pr(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Is=null,Gn=null,vn=null;function ks(o){if(o=Ys(o)){if(typeof Is!="function")throw Error(i(280));var a=o.stateNode;a&&(a=Al(a),Is(o.stateNode,o.type,a))}}function Os(o){Gn?vn?vn.push(o):vn=[o]:Gn=o}function ul(){if(Gn){var o=Gn,a=vn;if(vn=Gn=null,ks(o),a)for(o=0;o<a.length;o++)ks(a[o])}}function cl(o,a){return o(a)}function V(){}var $=!1;function ne(o,a,h){if($)return o(a,h);$=!0;try{return cl(o,a,h)}finally{$=!1,(Gn!==null||vn!==null)&&(V(),ul())}}function he(o,a){var h=o.stateNode;if(h===null)return null;var m=Al(h);if(m===null)return null;h=m[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(o=o.type,m=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!m;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(i(231,a,typeof h));return h}var Me=!1;if(c)try{var Ie={};Object.defineProperty(Ie,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Ie,Ie),window.removeEventListener("test",Ie,Ie)}catch{Me=!1}function Ye(o,a,h,m,w,P,D,O,B){var ee=Array.prototype.slice.call(arguments,3);try{a.apply(h,ee)}catch(me){this.onError(me)}}var Ee=!1,oe=null,Fe=!1,Ke=null,tt={onError:function(o){Ee=!0,oe=o}};function Rt(o,a,h,m,w,P,D,O,B){Ee=!1,oe=null,Ye.apply(tt,arguments)}function Nt(o,a,h,m,w,P,D,O,B){if(Rt.apply(this,arguments),Ee){if(Ee){var ee=oe;Ee=!1,oe=null}else throw Error(i(198));Fe||(Fe=!0,Ke=ee)}}function pt(o){var a=o,h=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do a=o,a.flags&4098&&(h=a.return),o=a.return;while(o)}return a.tag===3?h:null}function ct(o){if(o.tag===13){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function Tt(o){if(pt(o)!==o)throw Error(i(188))}function as(o){var a=o.alternate;if(!a){if(a=pt(o),a===null)throw Error(i(188));return a!==o?null:o}for(var h=o,m=a;;){var w=h.return;if(w===null)break;var P=w.alternate;if(P===null){if(m=w.return,m!==null){h=m;continue}break}if(w.child===P.child){for(P=w.child;P;){if(P===h)return Tt(w),o;if(P===m)return Tt(w),a;P=P.sibling}throw Error(i(188))}if(h.return!==m.return)h=w,m=P;else{for(var D=!1,O=w.child;O;){if(O===h){D=!0,h=w,m=P;break}if(O===m){D=!0,m=w,h=P;break}O=O.sibling}if(!D){for(O=P.child;O;){if(O===h){D=!0,h=P,m=w;break}if(O===m){D=!0,m=P,h=w;break}O=O.sibling}if(!D)throw Error(i(189))}}if(h.alternate!==m)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?o:a}function us(o){return o=as(o),o!==null?Hi(o):null}function Hi(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var a=Hi(o);if(a!==null)return a;o=o.sibling}return null}var bi=t.unstable_scheduleCallback,Ns=t.unstable_cancelCallback,Gs=t.unstable_shouldYield,Bi=t.unstable_requestPaint,Ft=t.unstable_now,So=t.unstable_getCurrentPriorityLevel,gt=t.unstable_ImmediatePriority,Zt=t.unstable_UserBlockingPriority,Hn=t.unstable_NormalPriority,Bn=t.unstable_LowPriority,Pt=t.unstable_IdlePriority,Vi=null,mi=null;function Hs(o){if(mi&&typeof mi.onCommitFiberRoot=="function")try{mi.onCommitFiberRoot(Vi,o,void 0,(o.current.flags&128)===128)}catch{}}var et=Math.clz32?Math.clz32:yo,_t=Math.log,dl=Math.LN2;function yo(o){return o>>>=0,o===0?32:31-(_t(o)/dl|0)|0}var Vn=64,Ro=4194304;function Je(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Dt(o,a){var h=o.pendingLanes;if(h===0)return 0;var m=0,w=o.suspendedLanes,P=o.pingedLanes,D=h&268435455;if(D!==0){var O=D&~w;O!==0?m=Je(O):(P&=D,P!==0&&(m=Je(P)))}else D=h&~w,D!==0?m=Je(D):P!==0&&(m=Je(P));if(m===0)return 0;if(a!==0&&a!==m&&!(a&w)&&(w=m&-m,P=a&-a,w>=P||w===16&&(P&4194240)!==0))return a;if(m&4&&(m|=h&16),a=o.entangledLanes,a!==0)for(o=o.entanglements,a&=m;0<a;)h=31-et(a),w=1<<h,m|=o[h],a&=~w;return m}function ga(o,a){switch(o){case 1:case 2:case 4:return a+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function hl(o,a){for(var h=o.suspendedLanes,m=o.pingedLanes,w=o.expirationTimes,P=o.pendingLanes;0<P;){var D=31-et(P),O=1<<D,B=w[D];B===-1?(!(O&h)||O&m)&&(w[D]=ga(O,a)):B<=a&&(o.expiredLanes|=O),P&=~O}}function vi(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function Wu(){var o=Vn;return Vn<<=1,!(Vn&4194240)&&(Vn=64),o}function Po(o){for(var a=[],h=0;31>h;h++)a.push(o);return a}function tn(o,a,h){o.pendingLanes|=a,a!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,a=31-et(a),o[a]=h}function zt(o,a){var h=o.pendingLanes&~a;o.pendingLanes=a,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=a,o.mutableReadLanes&=a,o.entangledLanes&=a,a=o.entanglements;var m=o.eventTimes;for(o=o.expirationTimes;0<h;){var w=31-et(h),P=1<<w;a[w]=0,m[w]=-1,o[w]=-1,h&=~P}}function Wn(o,a){var h=o.entangledLanes|=a;for(o=o.entanglements;h;){var m=31-et(h),w=1<<m;w&a|o[m]&a&&(o[m]|=a),h&=~w}}var dt=0;function Fo(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var pl,Bs,fl,gl,fr,gr=!1,Eo=[],nn=null,zn=null,Cn=null,mr=new Map,Qe=new Map,ei=[],Et="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ma(o,a){switch(o){case"focusin":case"focusout":nn=null;break;case"dragenter":case"dragleave":zn=null;break;case"mouseover":case"mouseout":Cn=null;break;case"pointerover":case"pointerout":mr.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qe.delete(a.pointerId)}}function Vs(o,a,h,m,w,P){return o===null||o.nativeEvent!==P?(o={blockedOn:a,domEventName:h,eventSystemFlags:m,nativeEvent:P,targetContainers:[w]},a!==null&&(a=Ys(a),a!==null&&Bs(a)),o):(o.eventSystemFlags|=m,a=o.targetContainers,w!==null&&a.indexOf(w)===-1&&a.push(w),o)}function va(o,a,h,m,w){switch(a){case"focusin":return nn=Vs(nn,o,a,h,m,w),!0;case"dragenter":return zn=Vs(zn,o,a,h,m,w),!0;case"mouseover":return Cn=Vs(Cn,o,a,h,m,w),!0;case"pointerover":var P=w.pointerId;return mr.set(P,Vs(mr.get(P)||null,o,a,h,m,w)),!0;case"gotpointercapture":return P=w.pointerId,Qe.set(P,Vs(Qe.get(P)||null,o,a,h,m,w)),!0}return!1}function ml(o){var a=qs(o.target);if(a!==null){var h=pt(a);if(h!==null){if(a=h.tag,a===13){if(a=ct(h),a!==null){o.blockedOn=a,fr(o.priority,function(){fl(h)});return}}else if(a===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function wn(o){if(o.blockedOn!==null)return!1;for(var a=o.targetContainers;0<a.length;){var h=wl(o.domEventName,o.eventSystemFlags,a[0],o.nativeEvent);if(h===null){h=o.nativeEvent;var m=new h.constructor(h.type,h);As=m,h.target.dispatchEvent(m),As=null}else return a=Ys(h),a!==null&&Bs(a),o.blockedOn=h,!1;a.shift()}return!0}function vl(o,a,h){wn(o)&&h.delete(a)}function vr(){gr=!1,nn!==null&&wn(nn)&&(nn=null),zn!==null&&wn(zn)&&(zn=null),Cn!==null&&wn(Cn)&&(Cn=null),mr.forEach(vl),Qe.forEach(vl)}function Gt(o,a){o.blockedOn===a&&(o.blockedOn=null,gr||(gr=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,vr)))}function sn(o){function a(w){return Gt(w,o)}if(0<Eo.length){Gt(Eo[0],o);for(var h=1;h<Eo.length;h++){var m=Eo[h];m.blockedOn===o&&(m.blockedOn=null)}}for(nn!==null&&Gt(nn,o),zn!==null&&Gt(zn,o),Cn!==null&&Gt(Cn,o),mr.forEach(a),Qe.forEach(a),h=0;h<ei.length;h++)m=ei[h],m.blockedOn===o&&(m.blockedOn=null);for(;0<ei.length&&(h=ei[0],h.blockedOn===null);)ml(h),h.blockedOn===null&&ei.shift()}var Ws=H.ReactCurrentBatchConfig,Cr=!0;function Xd(o,a,h,m){var w=dt,P=Ws.transition;Ws.transition=null;try{dt=1,wr(o,a,h,m)}finally{dt=w,Ws.transition=P}}function zu(o,a,h,m){var w=dt,P=Ws.transition;Ws.transition=null;try{dt=4,wr(o,a,h,m)}finally{dt=w,Ws.transition=P}}function wr(o,a,h,m){if(Cr){var w=wl(o,a,h,m);if(w===null)l(o,a,m,Cl,h),ma(o,m);else if(va(w,o,a,h,m))m.stopPropagation();else if(ma(o,m),a&4&&-1<Et.indexOf(o)){for(;w!==null;){var P=Ys(w);if(P!==null&&pl(P),P=wl(o,a,h,m),P===null&&l(o,a,m,Cl,h),P===w)break;w=P}w!==null&&m.stopPropagation()}else l(o,a,m,null,h)}}var Cl=null;function wl(o,a,h,m){if(Cl=null,o=pr(m),o=qs(o),o!==null)if(a=pt(o),a===null)o=null;else if(h=a.tag,h===13){if(o=ct(a),o!==null)return o;o=null}else if(h===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null);return Cl=o,null}function lt(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(So()){case gt:return 1;case Zt:return 4;case Hn:case Bn:return 16;case Pt:return 536870912;default:return 16}default:return 16}}var cs=null,xi=null,ds=null;function Ca(){if(ds)return ds;var o,a=xi,h=a.length,m,w="value"in cs?cs.value:cs.textContent,P=w.length;for(o=0;o<h&&a[o]===w[o];o++);var D=h-o;for(m=1;m<=D&&a[h-m]===w[P-m];m++);return ds=w.slice(o,1<m?1-m:void 0)}function Sl(o){var a=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&a===13&&(o=13)):o=a,o===10&&(o=13),32<=o||o===13?o:0}function bo(){return!0}function Uu(){return!1}function Ci(o){function a(h,m,w,P,D){this._reactName=h,this._targetInst=w,this.type=m,this.nativeEvent=P,this.target=D,this.currentTarget=null;for(var O in o)o.hasOwnProperty(O)&&(h=o[O],this[O]=h?h(P):P[O]);return this.isDefaultPrevented=(P.defaultPrevented!=null?P.defaultPrevented:P.returnValue===!1)?bo:Uu,this.isPropagationStopped=Uu,this}return J(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=bo)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=bo)},persist:function(){},isPersistent:bo}),a}var xo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wa=Ci(xo),zs=J({},xo,{view:0,detail:0}),Jd=Ci(zs),Wi,Sa,Do,on=J({},zs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:js,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Do&&(Do&&o.type==="mousemove"?(Wi=o.screenX-Do.screenX,Sa=o.screenY-Do.screenY):Sa=Wi=0,Do=o),Wi)},movementY:function(o){return"movementY"in o?o.movementY:Sa}}),ya=Ci(on),ju=J({},on,{dataTransfer:0}),Ra=Ci(ju),eh=J({},zs,{relatedTarget:0}),yl=Ci(eh),$u=J({},xo,{animationName:0,elapsedTime:0,pseudoElement:0}),th=Ci($u),ih=J({},xo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),Pa=Ci(ih),nh=J({},xo,{data:0}),Fa=Ci(nh),Ku={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Rl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Us={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sh(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):(o=Us[o])?!!a[o]:!1}function js(){return sh}var zi=J({},zs,{key:function(o){if(o.key){var a=Ku[o.key]||o.key;if(a!=="Unidentified")return a}return o.type==="keypress"?(o=Sl(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Rl[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:js,charCode:function(o){return o.type==="keypress"?Sl(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Sl(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Zu=Ci(zi),qu=J({},on,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yu=Ci(qu),Ea=J({},zs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:js}),ba=Ci(Ea),oh=J({},xo,{propertyName:0,elapsedTime:0,pseudoElement:0}),rh=Ci(oh),Qu=J({},on,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),lh=Ci(Qu),rn=[9,13,27,32],hs=c&&"CompositionEvent"in window,Sr=null;c&&"documentMode"in document&&(Sr=document.documentMode);var Un=c&&"TextEvent"in window&&!Sr,Xu=c&&(!hs||Sr&&8<Sr&&11>=Sr),$s=" ",Ju=!1;function Mo(o,a){switch(o){case"keyup":return rn.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xa(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var jn=!1;function ah(o,a){switch(o){case"compositionend":return xa(a);case"keypress":return a.which!==32?null:(Ju=!0,$s);case"textInput":return o=a.data,o===$s&&Ju?null:o;default:return null}}function ps(o,a){if(jn)return o==="compositionend"||!hs&&Mo(o,a)?(o=Ca(),ds=xi=cs=null,jn=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return Xu&&a.locale!=="ko"?null:a.data;default:return null}}var Pl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ec(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a==="input"?!!Pl[o.type]:a==="textarea"}function Fl(o,a,h,m){Os(m),a=f(a,"onChange"),0<a.length&&(h=new wa("onChange","change",null,h,m),o.push({event:h,listeners:a}))}var yr=null,Di=null;function uh(o){Oa(o,0)}function $n(o){var a=Qs(o);if(it(a))return o}function ch(o,a){if(o==="change")return a}var Sn=!1;if(c){var To;if(c){var El="oninput"in document;if(!El){var bl=document.createElement("div");bl.setAttribute("oninput","return;"),El=typeof bl.oninput=="function"}To=El}else To=!1;Sn=To&&(!document.documentMode||9<document.documentMode)}function Rr(){yr&&(yr.detachEvent("onpropertychange",xl),Di=yr=null)}function xl(o){if(o.propertyName==="value"&&$n(Di)){var a=[];Fl(a,Di,o,pr(o)),ne(uh,a)}}function Dl(o,a,h){o==="focusin"?(Rr(),yr=a,Di=h,yr.attachEvent("onpropertychange",xl)):o==="focusout"&&Rr()}function _o(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return $n(Di)}function Ml(o,a){if(o==="click")return $n(a)}function Da(o,a){if(o==="input"||o==="change")return $n(a)}function tc(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var ln=typeof Object.is=="function"?Object.is:tc;function fs(o,a){if(ln(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var h=Object.keys(o),m=Object.keys(a);if(h.length!==m.length)return!1;for(m=0;m<h.length;m++){var w=h[m];if(!p.call(a,w)||!ln(o[w],a[w]))return!1}return!0}function ic(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Ma(o,a){var h=ic(o);o=0;for(var m;h;){if(h.nodeType===3){if(m=o+h.textContent.length,o<=a&&m>=a)return{node:h,offset:a-o};o=m}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=ic(h)}}function nc(o,a){return o&&a?o===a?!0:o&&o.nodeType===3?!1:a&&a.nodeType===3?nc(o,a.parentNode):"contains"in o?o.contains(a):o.compareDocumentPosition?!!(o.compareDocumentPosition(a)&16):!1:!1}function Ta(){for(var o=window,a=st();a instanceof o.HTMLIFrameElement;){try{var h=typeof a.contentWindow.location.href=="string"}catch{h=!1}if(h)o=a.contentWindow;else break;a=st(o.document)}return a}function _a(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&(a==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||a==="textarea"||o.contentEditable==="true")}function yn(o){var a=Ta(),h=o.focusedElem,m=o.selectionRange;if(a!==h&&h&&h.ownerDocument&&nc(h.ownerDocument.documentElement,h)){if(m!==null&&_a(h)){if(a=m.start,o=m.end,o===void 0&&(o=a),"selectionStart"in h)h.selectionStart=a,h.selectionEnd=Math.min(o,h.value.length);else if(o=(a=h.ownerDocument||document)&&a.defaultView||window,o.getSelection){o=o.getSelection();var w=h.textContent.length,P=Math.min(m.start,w);m=m.end===void 0?P:Math.min(m.end,w),!o.extend&&P>m&&(w=m,m=P,P=w),w=Ma(h,P);var D=Ma(h,m);w&&D&&(o.rangeCount!==1||o.anchorNode!==w.node||o.anchorOffset!==w.offset||o.focusNode!==D.node||o.focusOffset!==D.offset)&&(a=a.createRange(),a.setStart(w.node,w.offset),o.removeAllRanges(),P>m?(o.addRange(a),o.extend(D.node,D.offset)):(a.setEnd(D.node,D.offset),o.addRange(a)))}}for(a=[],o=h;o=o.parentNode;)o.nodeType===1&&a.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof h.focus=="function"&&h.focus(),h=0;h<a.length;h++)o=a[h],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Tl=c&&"documentMode"in document&&11>=document.documentMode,Lo=null,Ao=null,Pr=null,_l=!1;function sc(o,a,h){var m=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;_l||Lo==null||Lo!==st(m)||(m=Lo,"selectionStart"in m&&_a(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Pr&&fs(Pr,m)||(Pr=m,m=f(Ao,"onSelect"),0<m.length&&(a=new wa("onSelect","select",null,a,h),o.push({event:a,listeners:m}),a.target=Lo)))}function gs(o,a){var h={};return h[o.toLowerCase()]=a.toLowerCase(),h["Webkit"+o]="webkit"+a,h["Moz"+o]="moz"+a,h}var Io={animationend:gs("Animation","AnimationEnd"),animationiteration:gs("Animation","AnimationIteration"),animationstart:gs("Animation","AnimationStart"),transitionend:gs("Transition","TransitionEnd")},ms={},La={};c&&(La=document.createElement("div").style,"AnimationEvent"in window||(delete Io.animationend.animation,delete Io.animationiteration.animation,delete Io.animationstart.animation),"TransitionEvent"in window||delete Io.transitionend.transition);function Fr(o){if(ms[o])return ms[o];if(!Io[o])return o;var a=Io[o],h;for(h in a)if(a.hasOwnProperty(h)&&h in La)return ms[o]=a[h];return o}var oc=Fr("animationend"),Rn=Fr("animationiteration"),Aa=Fr("animationstart"),Ia=Fr("transitionend"),ko=new Map,rc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function an(o,a){ko.set(o,a),r(a,[o])}for(var Ks=0;Ks<rc.length;Ks++){var Ll=rc[Ks],lc=Ll.toLowerCase(),dh=Ll[0].toUpperCase()+Ll.slice(1);an(lc,"on"+dh)}an(oc,"onAnimationEnd"),an(Rn,"onAnimationIteration"),an(Aa,"onAnimationStart"),an("dblclick","onDoubleClick"),an("focusin","onFocus"),an("focusout","onBlur"),an(Ia,"onTransitionEnd"),u("onMouseEnter",["mouseout","mouseover"]),u("onMouseLeave",["mouseout","mouseover"]),u("onPointerEnter",["pointerout","pointerover"]),u("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ac=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oo));function ka(o,a,h){var m=o.type||"unknown-event";o.currentTarget=h,Nt(m,a,void 0,o),o.currentTarget=null}function Oa(o,a){a=(a&4)!==0;for(var h=0;h<o.length;h++){var m=o[h],w=m.event;m=m.listeners;e:{var P=void 0;if(a)for(var D=m.length-1;0<=D;D--){var O=m[D],B=O.instance,ee=O.currentTarget;if(O=O.listener,B!==P&&w.isPropagationStopped())break e;ka(w,O,ee),P=B}else for(D=0;D<m.length;D++){if(O=m[D],B=O.instance,ee=O.currentTarget,O=O.listener,B!==P&&w.isPropagationStopped())break e;ka(w,O,ee),P=B}}}if(Fe)throw o=Ke,Fe=!1,Ke=null,o}function bt(o,a){var h=a[Bo];h===void 0&&(h=a[Bo]=new Set);var m=o+"__bubble";h.has(m)||(uc(a,o,2,!1),h.add(m))}function Na(o,a,h){var m=0;a&&(m|=4),uc(h,o,m,a)}var Er="_reactListening"+Math.random().toString(36).slice(2);function No(o){if(!o[Er]){o[Er]=!0,n.forEach(function(h){h!=="selectionchange"&&(ac.has(h)||Na(h,!1,o),Na(h,!0,o))});var a=o.nodeType===9?o:o.ownerDocument;a===null||a[Er]||(a[Er]=!0,Na("selectionchange",!1,a))}}function uc(o,a,h,m){switch(lt(a)){case 1:var w=Xd;break;case 4:w=zu;break;default:w=wr}h=w.bind(null,a,h,o),w=void 0,!Me||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(w=!0),m?w!==void 0?o.addEventListener(a,h,{capture:!0,passive:w}):o.addEventListener(a,h,!0):w!==void 0?o.addEventListener(a,h,{passive:w}):o.addEventListener(a,h,!1)}function l(o,a,h,m,w){var P=m;if(!(a&1)&&!(a&2)&&m!==null)e:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var O=m.stateNode.containerInfo;if(O===w||O.nodeType===8&&O.parentNode===w)break;if(D===4)for(D=m.return;D!==null;){var B=D.tag;if((B===3||B===4)&&(B=D.stateNode.containerInfo,B===w||B.nodeType===8&&B.parentNode===w))return;D=D.return}for(;O!==null;){if(D=qs(O),D===null)return;if(B=D.tag,B===5||B===6){m=P=D;continue e}O=O.parentNode}}m=m.return}ne(function(){var ee=P,me=pr(h),Ce=[];e:{var pe=ko.get(o);if(pe!==void 0){var _e=wa,Ae=o;switch(o){case"keypress":if(Sl(h)===0)break e;case"keydown":case"keyup":_e=Zu;break;case"focusin":Ae="focus",_e=yl;break;case"focusout":Ae="blur",_e=yl;break;case"beforeblur":case"afterblur":_e=yl;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=ya;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Ra;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=ba;break;case oc:case Rn:case Aa:_e=th;break;case Ia:_e=rh;break;case"scroll":_e=Jd;break;case"wheel":_e=lh;break;case"copy":case"cut":case"paste":_e=Pa;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=Yu}var ke=(a&4)!==0,qt=!ke&&o==="scroll",q=ke?pe!==null?pe+"Capture":null:pe;ke=[];for(var W=ee,Y;W!==null;){Y=W;var ye=Y.stateNode;if(Y.tag===5&&ye!==null&&(Y=ye,q!==null&&(ye=he(W,q),ye!=null&&ke.push(d(W,ye,Y)))),qt)break;W=W.return}0<ke.length&&(pe=new _e(pe,Ae,null,h,me),Ce.push({event:pe,listeners:ke}))}}if(!(a&7)){e:{if(pe=o==="mouseover"||o==="pointerover",_e=o==="mouseout"||o==="pointerout",pe&&h!==As&&(Ae=h.relatedTarget||h.fromElement)&&(qs(Ae)||Ae[St]))break e;if((_e||pe)&&(pe=me.window===me?me:(pe=me.ownerDocument)?pe.defaultView||pe.parentWindow:window,_e?(Ae=h.relatedTarget||h.toElement,_e=ee,Ae=Ae?qs(Ae):null,Ae!==null&&(qt=pt(Ae),Ae!==qt||Ae.tag!==5&&Ae.tag!==6)&&(Ae=null)):(_e=null,Ae=ee),_e!==Ae)){if(ke=ya,ye="onMouseLeave",q="onMouseEnter",W="mouse",(o==="pointerout"||o==="pointerover")&&(ke=Yu,ye="onPointerLeave",q="onPointerEnter",W="pointer"),qt=_e==null?pe:Qs(_e),Y=Ae==null?pe:Qs(Ae),pe=new ke(ye,W+"leave",_e,h,me),pe.target=qt,pe.relatedTarget=Y,ye=null,qs(me)===ee&&(ke=new ke(q,W+"enter",Ae,h,me),ke.target=Y,ke.relatedTarget=qt,ye=ke),qt=ye,_e&&Ae)t:{for(ke=_e,q=Ae,W=0,Y=ke;Y;Y=C(Y))W++;for(Y=0,ye=q;ye;ye=C(ye))Y++;for(;0<W-Y;)ke=C(ke),W--;for(;0<Y-W;)q=C(q),Y--;for(;W--;){if(ke===q||q!==null&&ke===q.alternate)break t;ke=C(ke),q=C(q)}ke=null}else ke=null;_e!==null&&F(Ce,pe,_e,ke,!1),Ae!==null&&qt!==null&&F(Ce,qt,Ae,ke,!0)}}e:{if(pe=ee?Qs(ee):window,_e=pe.nodeName&&pe.nodeName.toLowerCase(),_e==="select"||_e==="input"&&pe.type==="file")var Ne=ch;else if(ec(pe))if(Sn)Ne=Da;else{Ne=_o;var ze=Dl}else(_e=pe.nodeName)&&_e.toLowerCase()==="input"&&(pe.type==="checkbox"||pe.type==="radio")&&(Ne=Ml);if(Ne&&(Ne=Ne(o,ee))){Fl(Ce,Ne,h,me);break e}ze&&ze(o,pe,ee),o==="focusout"&&(ze=pe._wrapperState)&&ze.controlled&&pe.type==="number"&&Ji(pe,"number",pe.value)}switch(ze=ee?Qs(ee):window,o){case"focusin":(ec(ze)||ze.contentEditable==="true")&&(Lo=ze,Ao=ee,Pr=null);break;case"focusout":Pr=Ao=Lo=null;break;case"mousedown":_l=!0;break;case"contextmenu":case"mouseup":case"dragend":_l=!1,sc(Ce,h,me);break;case"selectionchange":if(Tl)break;case"keydown":case"keyup":sc(Ce,h,me)}var Ue;if(hs)e:{switch(o){case"compositionstart":var Xe="onCompositionStart";break e;case"compositionend":Xe="onCompositionEnd";break e;case"compositionupdate":Xe="onCompositionUpdate";break e}Xe=void 0}else jn?Mo(o,h)&&(Xe="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(Xe="onCompositionStart");Xe&&(Xu&&h.locale!=="ko"&&(jn||Xe!=="onCompositionStart"?Xe==="onCompositionEnd"&&jn&&(Ue=Ca()):(cs=me,xi="value"in cs?cs.value:cs.textContent,jn=!0)),ze=f(ee,Xe),0<ze.length&&(Xe=new Fa(Xe,o,null,h,me),Ce.push({event:Xe,listeners:ze}),Ue?Xe.data=Ue:(Ue=xa(h),Ue!==null&&(Xe.data=Ue)))),(Ue=Un?ah(o,h):ps(o,h))&&(ee=f(ee,"onBeforeInput"),0<ee.length&&(me=new Fa("onBeforeInput","beforeinput",null,h,me),Ce.push({event:me,listeners:ee}),me.data=Ue))}Oa(Ce,a)})}function d(o,a,h){return{instance:o,listener:a,currentTarget:h}}function f(o,a){for(var h=a+"Capture",m=[];o!==null;){var w=o,P=w.stateNode;w.tag===5&&P!==null&&(w=P,P=he(o,h),P!=null&&m.unshift(d(o,P,w)),P=he(o,a),P!=null&&m.push(d(o,P,w))),o=o.return}return m}function C(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function F(o,a,h,m,w){for(var P=a._reactName,D=[];h!==null&&h!==m;){var O=h,B=O.alternate,ee=O.stateNode;if(B!==null&&B===m)break;O.tag===5&&ee!==null&&(O=ee,w?(B=he(h,P),B!=null&&D.unshift(d(h,B,O))):w||(B=he(h,P),B!=null&&D.push(d(h,B,O)))),h=h.return}D.length!==0&&o.push({event:a,listeners:D})}var T=/\r\n?/g,G=/\u0000|\uFFFD/g;function K(o){return(typeof o=="string"?o:""+o).replace(T,`
`).replace(G,"")}function X(o,a,h){if(a=K(a),K(o)!==a&&h)throw Error(i(425))}function ce(){}var De=null,We=null;function nt(o,a){return o==="textarea"||o==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var ti=typeof setTimeout=="function"?setTimeout:void 0,Xt=typeof clearTimeout=="function"?clearTimeout:void 0,Mi=typeof Promise=="function"?Promise:void 0,wi=typeof queueMicrotask=="function"?queueMicrotask:typeof Mi<"u"?function(o){return Mi.resolve(null).then(o).catch(Go)}:ti;function Go(o){setTimeout(function(){throw o})}function Ga(o,a){var h=a,m=0;do{var w=h.nextSibling;if(o.removeChild(h),w&&w.nodeType===8)if(h=w.data,h==="/$"){if(m===0){o.removeChild(w),sn(a);return}m--}else h!=="$"&&h!=="$?"&&h!=="$!"||m++;h=w}while(h);sn(a)}function vs(o){for(;o!=null;o=o.nextSibling){var a=o.nodeType;if(a===1||a===3)break;if(a===8){if(a=o.data,a==="$"||a==="$!"||a==="$?")break;if(a==="/$")return null}}return o}function cc(o){o=o.previousSibling;for(var a=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"){if(a===0)return o;a--}else h==="/$"&&a++}o=o.previousSibling}return null}var Zs=Math.random().toString(36).slice(2),Pn="__reactFiber$"+Zs,Ho="__reactProps$"+Zs,St="__reactContainer$"+Zs,Bo="__reactEvents$"+Zs,hh="__reactListeners$"+Zs,ph="__reactHandles$"+Zs;function qs(o){var a=o[Pn];if(a)return a;for(var h=o.parentNode;h;){if(a=h[St]||h[Pn]){if(h=a.alternate,a.child!==null||h!==null&&h.child!==null)for(o=cc(o);o!==null;){if(h=o[Pn])return h;o=cc(o)}return a}o=h,h=o.parentNode}return null}function Ys(o){return o=o[Pn]||o[St],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function Qs(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(i(33))}function Al(o){return o[Ho]||null}var fh=[],Il=-1;function Vo(o){return{current:o}}function Lt(o){0>Il||(o.current=fh[Il],fh[Il]=null,Il--)}function Mt(o,a){Il++,fh[Il]=o.current,o.current=a}var Wo={},Si=Vo(Wo),Ui=Vo(!1),br=Wo;function kl(o,a){var h=o.type.contextTypes;if(!h)return Wo;var m=o.stateNode;if(m&&m.__reactInternalMemoizedUnmaskedChildContext===a)return m.__reactInternalMemoizedMaskedChildContext;var w={},P;for(P in h)w[P]=a[P];return m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=a,o.__reactInternalMemoizedMaskedChildContext=w),w}function ji(o){return o=o.childContextTypes,o!=null}function dc(){Lt(Ui),Lt(Si)}function Wg(o,a,h){if(Si.current!==Wo)throw Error(i(168));Mt(Si,a),Mt(Ui,h)}function zg(o,a,h){var m=o.stateNode;if(a=a.childContextTypes,typeof m.getChildContext!="function")return h;m=m.getChildContext();for(var w in m)if(!(w in a))throw Error(i(108,$e(o)||"Unknown",w));return J({},h,m)}function hc(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||Wo,br=Si.current,Mt(Si,o),Mt(Ui,Ui.current),!0}function Ug(o,a,h){var m=o.stateNode;if(!m)throw Error(i(169));h?(o=zg(o,a,br),m.__reactInternalMemoizedMergedChildContext=o,Lt(Ui),Lt(Si),Mt(Si,o)):Lt(Ui),Mt(Ui,h)}var Xs=null,pc=!1,gh=!1;function jg(o){Xs===null?Xs=[o]:Xs.push(o)}function tR(o){pc=!0,jg(o)}function zo(){if(!gh&&Xs!==null){gh=!0;var o=0,a=dt;try{var h=Xs;for(dt=1;o<h.length;o++){var m=h[o];do m=m(!0);while(m!==null)}Xs=null,pc=!1}catch(w){throw Xs!==null&&(Xs=Xs.slice(o+1)),bi(gt,zo),w}finally{dt=a,gh=!1}}return null}var Ol=[],Nl=0,fc=null,gc=0,Fn=[],En=0,xr=null,Js=1,eo="";function Dr(o,a){Ol[Nl++]=gc,Ol[Nl++]=fc,fc=o,gc=a}function $g(o,a,h){Fn[En++]=Js,Fn[En++]=eo,Fn[En++]=xr,xr=o;var m=Js;o=eo;var w=32-et(m)-1;m&=~(1<<w),h+=1;var P=32-et(a)+w;if(30<P){var D=w-w%5;P=(m&(1<<D)-1).toString(32),m>>=D,w-=D,Js=1<<32-et(a)+w|h<<w|m,eo=P+o}else Js=1<<P|h<<w|m,eo=o}function mh(o){o.return!==null&&(Dr(o,1),$g(o,1,0))}function vh(o){for(;o===fc;)fc=Ol[--Nl],Ol[Nl]=null,gc=Ol[--Nl],Ol[Nl]=null;for(;o===xr;)xr=Fn[--En],Fn[En]=null,eo=Fn[--En],Fn[En]=null,Js=Fn[--En],Fn[En]=null}var un=null,cn=null,It=!1,Kn=null;function Kg(o,a){var h=Mn(5,null,null,0);h.elementType="DELETED",h.stateNode=a,h.return=o,a=o.deletions,a===null?(o.deletions=[h],o.flags|=16):a.push(h)}function Zg(o,a){switch(o.tag){case 5:var h=o.type;return a=a.nodeType!==1||h.toLowerCase()!==a.nodeName.toLowerCase()?null:a,a!==null?(o.stateNode=a,un=o,cn=vs(a.firstChild),!0):!1;case 6:return a=o.pendingProps===""||a.nodeType!==3?null:a,a!==null?(o.stateNode=a,un=o,cn=null,!0):!1;case 13:return a=a.nodeType!==8?null:a,a!==null?(h=xr!==null?{id:Js,overflow:eo}:null,o.memoizedState={dehydrated:a,treeContext:h,retryLane:1073741824},h=Mn(18,null,null,0),h.stateNode=a,h.return=o,o.child=h,un=o,cn=null,!0):!1;default:return!1}}function Ch(o){return(o.mode&1)!==0&&(o.flags&128)===0}function wh(o){if(It){var a=cn;if(a){var h=a;if(!Zg(o,a)){if(Ch(o))throw Error(i(418));a=vs(h.nextSibling);var m=un;a&&Zg(o,a)?Kg(m,h):(o.flags=o.flags&-4097|2,It=!1,un=o)}}else{if(Ch(o))throw Error(i(418));o.flags=o.flags&-4097|2,It=!1,un=o}}}function qg(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;un=o}function mc(o){if(o!==un)return!1;if(!It)return qg(o),It=!0,!1;var a;if((a=o.tag!==3)&&!(a=o.tag!==5)&&(a=o.type,a=a!=="head"&&a!=="body"&&!nt(o.type,o.memoizedProps)),a&&(a=cn)){if(Ch(o))throw Yg(),Error(i(418));for(;a;)Kg(o,a),a=vs(a.nextSibling)}if(qg(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));e:{for(o=o.nextSibling,a=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"){if(a===0){cn=vs(o.nextSibling);break e}a--}else h!=="$"&&h!=="$!"&&h!=="$?"||a++}o=o.nextSibling}cn=null}}else cn=un?vs(o.stateNode.nextSibling):null;return!0}function Yg(){for(var o=cn;o;)o=vs(o.nextSibling)}function Gl(){cn=un=null,It=!1}function Sh(o){Kn===null?Kn=[o]:Kn.push(o)}var iR=H.ReactCurrentBatchConfig;function Ha(o,a,h){if(o=h.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(h._owner){if(h=h._owner,h){if(h.tag!==1)throw Error(i(309));var m=h.stateNode}if(!m)throw Error(i(147,o));var w=m,P=""+o;return a!==null&&a.ref!==null&&typeof a.ref=="function"&&a.ref._stringRef===P?a.ref:(a=function(D){var O=w.refs;D===null?delete O[P]:O[P]=D},a._stringRef=P,a)}if(typeof o!="string")throw Error(i(284));if(!h._owner)throw Error(i(290,o))}return o}function vc(o,a){throw o=Object.prototype.toString.call(a),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o))}function Qg(o){var a=o._init;return a(o._payload)}function Xg(o){function a(q,W){if(o){var Y=q.deletions;Y===null?(q.deletions=[W],q.flags|=16):Y.push(W)}}function h(q,W){if(!o)return null;for(;W!==null;)a(q,W),W=W.sibling;return null}function m(q,W){for(q=new Map;W!==null;)W.key!==null?q.set(W.key,W):q.set(W.index,W),W=W.sibling;return q}function w(q,W){return q=Qo(q,W),q.index=0,q.sibling=null,q}function P(q,W,Y){return q.index=Y,o?(Y=q.alternate,Y!==null?(Y=Y.index,Y<W?(q.flags|=2,W):Y):(q.flags|=2,W)):(q.flags|=1048576,W)}function D(q){return o&&q.alternate===null&&(q.flags|=2),q}function O(q,W,Y,ye){return W===null||W.tag!==6?(W=dp(Y,q.mode,ye),W.return=q,W):(W=w(W,Y),W.return=q,W)}function B(q,W,Y,ye){var Ne=Y.type;return Ne===j?me(q,W,Y.props.children,ye,Y.key):W!==null&&(W.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===be&&Qg(Ne)===W.type)?(ye=w(W,Y.props),ye.ref=Ha(q,W,Y),ye.return=q,ye):(ye=Vc(Y.type,Y.key,Y.props,null,q.mode,ye),ye.ref=Ha(q,W,Y),ye.return=q,ye)}function ee(q,W,Y,ye){return W===null||W.tag!==4||W.stateNode.containerInfo!==Y.containerInfo||W.stateNode.implementation!==Y.implementation?(W=hp(Y,q.mode,ye),W.return=q,W):(W=w(W,Y.children||[]),W.return=q,W)}function me(q,W,Y,ye,Ne){return W===null||W.tag!==7?(W=Or(Y,q.mode,ye,Ne),W.return=q,W):(W=w(W,Y),W.return=q,W)}function Ce(q,W,Y){if(typeof W=="string"&&W!==""||typeof W=="number")return W=dp(""+W,q.mode,Y),W.return=q,W;if(typeof W=="object"&&W!==null){switch(W.$$typeof){case A:return Y=Vc(W.type,W.key,W.props,null,q.mode,Y),Y.ref=Ha(q,null,W),Y.return=q,Y;case z:return W=hp(W,q.mode,Y),W.return=q,W;case be:var ye=W._init;return Ce(q,ye(W._payload),Y)}if(Kt(W)||Se(W))return W=Or(W,q.mode,Y,null),W.return=q,W;vc(q,W)}return null}function pe(q,W,Y,ye){var Ne=W!==null?W.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number")return Ne!==null?null:O(q,W,""+Y,ye);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:return Y.key===Ne?B(q,W,Y,ye):null;case z:return Y.key===Ne?ee(q,W,Y,ye):null;case be:return Ne=Y._init,pe(q,W,Ne(Y._payload),ye)}if(Kt(Y)||Se(Y))return Ne!==null?null:me(q,W,Y,ye,null);vc(q,Y)}return null}function _e(q,W,Y,ye,Ne){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return q=q.get(Y)||null,O(W,q,""+ye,Ne);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case A:return q=q.get(ye.key===null?Y:ye.key)||null,B(W,q,ye,Ne);case z:return q=q.get(ye.key===null?Y:ye.key)||null,ee(W,q,ye,Ne);case be:var ze=ye._init;return _e(q,W,Y,ze(ye._payload),Ne)}if(Kt(ye)||Se(ye))return q=q.get(Y)||null,me(W,q,ye,Ne,null);vc(W,ye)}return null}function Ae(q,W,Y,ye){for(var Ne=null,ze=null,Ue=W,Xe=W=0,ri=null;Ue!==null&&Xe<Y.length;Xe++){Ue.index>Xe?(ri=Ue,Ue=null):ri=Ue.sibling;var mt=pe(q,Ue,Y[Xe],ye);if(mt===null){Ue===null&&(Ue=ri);break}o&&Ue&&mt.alternate===null&&a(q,Ue),W=P(mt,W,Xe),ze===null?Ne=mt:ze.sibling=mt,ze=mt,Ue=ri}if(Xe===Y.length)return h(q,Ue),It&&Dr(q,Xe),Ne;if(Ue===null){for(;Xe<Y.length;Xe++)Ue=Ce(q,Y[Xe],ye),Ue!==null&&(W=P(Ue,W,Xe),ze===null?Ne=Ue:ze.sibling=Ue,ze=Ue);return It&&Dr(q,Xe),Ne}for(Ue=m(q,Ue);Xe<Y.length;Xe++)ri=_e(Ue,q,Xe,Y[Xe],ye),ri!==null&&(o&&ri.alternate!==null&&Ue.delete(ri.key===null?Xe:ri.key),W=P(ri,W,Xe),ze===null?Ne=ri:ze.sibling=ri,ze=ri);return o&&Ue.forEach(function(Xo){return a(q,Xo)}),It&&Dr(q,Xe),Ne}function ke(q,W,Y,ye){var Ne=Se(Y);if(typeof Ne!="function")throw Error(i(150));if(Y=Ne.call(Y),Y==null)throw Error(i(151));for(var ze=Ne=null,Ue=W,Xe=W=0,ri=null,mt=Y.next();Ue!==null&&!mt.done;Xe++,mt=Y.next()){Ue.index>Xe?(ri=Ue,Ue=null):ri=Ue.sibling;var Xo=pe(q,Ue,mt.value,ye);if(Xo===null){Ue===null&&(Ue=ri);break}o&&Ue&&Xo.alternate===null&&a(q,Ue),W=P(Xo,W,Xe),ze===null?Ne=Xo:ze.sibling=Xo,ze=Xo,Ue=ri}if(mt.done)return h(q,Ue),It&&Dr(q,Xe),Ne;if(Ue===null){for(;!mt.done;Xe++,mt=Y.next())mt=Ce(q,mt.value,ye),mt!==null&&(W=P(mt,W,Xe),ze===null?Ne=mt:ze.sibling=mt,ze=mt);return It&&Dr(q,Xe),Ne}for(Ue=m(q,Ue);!mt.done;Xe++,mt=Y.next())mt=_e(Ue,q,Xe,mt.value,ye),mt!==null&&(o&&mt.alternate!==null&&Ue.delete(mt.key===null?Xe:mt.key),W=P(mt,W,Xe),ze===null?Ne=mt:ze.sibling=mt,ze=mt);return o&&Ue.forEach(function(kR){return a(q,kR)}),It&&Dr(q,Xe),Ne}function qt(q,W,Y,ye){if(typeof Y=="object"&&Y!==null&&Y.type===j&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case A:e:{for(var Ne=Y.key,ze=W;ze!==null;){if(ze.key===Ne){if(Ne=Y.type,Ne===j){if(ze.tag===7){h(q,ze.sibling),W=w(ze,Y.props.children),W.return=q,q=W;break e}}else if(ze.elementType===Ne||typeof Ne=="object"&&Ne!==null&&Ne.$$typeof===be&&Qg(Ne)===ze.type){h(q,ze.sibling),W=w(ze,Y.props),W.ref=Ha(q,ze,Y),W.return=q,q=W;break e}h(q,ze);break}else a(q,ze);ze=ze.sibling}Y.type===j?(W=Or(Y.props.children,q.mode,ye,Y.key),W.return=q,q=W):(ye=Vc(Y.type,Y.key,Y.props,null,q.mode,ye),ye.ref=Ha(q,W,Y),ye.return=q,q=ye)}return D(q);case z:e:{for(ze=Y.key;W!==null;){if(W.key===ze)if(W.tag===4&&W.stateNode.containerInfo===Y.containerInfo&&W.stateNode.implementation===Y.implementation){h(q,W.sibling),W=w(W,Y.children||[]),W.return=q,q=W;break e}else{h(q,W);break}else a(q,W);W=W.sibling}W=hp(Y,q.mode,ye),W.return=q,q=W}return D(q);case be:return ze=Y._init,qt(q,W,ze(Y._payload),ye)}if(Kt(Y))return Ae(q,W,Y,ye);if(Se(Y))return ke(q,W,Y,ye);vc(q,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"?(Y=""+Y,W!==null&&W.tag===6?(h(q,W.sibling),W=w(W,Y),W.return=q,q=W):(h(q,W),W=dp(Y,q.mode,ye),W.return=q,q=W),D(q)):h(q,W)}return qt}var Hl=Xg(!0),Jg=Xg(!1),Cc=Vo(null),wc=null,Bl=null,yh=null;function Rh(){yh=Bl=wc=null}function Ph(o){var a=Cc.current;Lt(Cc),o._currentValue=a}function Fh(o,a,h){for(;o!==null;){var m=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,m!==null&&(m.childLanes|=a)):m!==null&&(m.childLanes&a)!==a&&(m.childLanes|=a),o===h)break;o=o.return}}function Vl(o,a){wc=o,yh=Bl=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&a&&($i=!0),o.firstContext=null)}function bn(o){var a=o._currentValue;if(yh!==o)if(o={context:o,memoizedValue:a,next:null},Bl===null){if(wc===null)throw Error(i(308));Bl=o,wc.dependencies={lanes:0,firstContext:o}}else Bl=Bl.next=o;return a}var Mr=null;function Eh(o){Mr===null?Mr=[o]:Mr.push(o)}function em(o,a,h,m){var w=a.interleaved;return w===null?(h.next=h,Eh(a)):(h.next=w.next,w.next=h),a.interleaved=h,to(o,m)}function to(o,a){o.lanes|=a;var h=o.alternate;for(h!==null&&(h.lanes|=a),h=o,o=o.return;o!==null;)o.childLanes|=a,h=o.alternate,h!==null&&(h.childLanes|=a),h=o,o=o.return;return h.tag===3?h.stateNode:null}var Uo=!1;function bh(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tm(o,a){o=o.updateQueue,a.updateQueue===o&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function io(o,a){return{eventTime:o,lane:a,tag:0,payload:null,callback:null,next:null}}function jo(o,a,h){var m=o.updateQueue;if(m===null)return null;if(m=m.shared,ft&2){var w=m.pending;return w===null?a.next=a:(a.next=w.next,w.next=a),m.pending=a,to(o,h)}return w=m.interleaved,w===null?(a.next=a,Eh(m)):(a.next=w.next,w.next=a),m.interleaved=a,to(o,h)}function Sc(o,a,h){if(a=a.updateQueue,a!==null&&(a=a.shared,(h&4194240)!==0)){var m=a.lanes;m&=o.pendingLanes,h|=m,a.lanes=h,Wn(o,h)}}function im(o,a){var h=o.updateQueue,m=o.alternate;if(m!==null&&(m=m.updateQueue,h===m)){var w=null,P=null;if(h=h.firstBaseUpdate,h!==null){do{var D={eventTime:h.eventTime,lane:h.lane,tag:h.tag,payload:h.payload,callback:h.callback,next:null};P===null?w=P=D:P=P.next=D,h=h.next}while(h!==null);P===null?w=P=a:P=P.next=a}else w=P=a;h={baseState:m.baseState,firstBaseUpdate:w,lastBaseUpdate:P,shared:m.shared,effects:m.effects},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=a:o.next=a,h.lastBaseUpdate=a}function yc(o,a,h,m){var w=o.updateQueue;Uo=!1;var P=w.firstBaseUpdate,D=w.lastBaseUpdate,O=w.shared.pending;if(O!==null){w.shared.pending=null;var B=O,ee=B.next;B.next=null,D===null?P=ee:D.next=ee,D=B;var me=o.alternate;me!==null&&(me=me.updateQueue,O=me.lastBaseUpdate,O!==D&&(O===null?me.firstBaseUpdate=ee:O.next=ee,me.lastBaseUpdate=B))}if(P!==null){var Ce=w.baseState;D=0,me=ee=B=null,O=P;do{var pe=O.lane,_e=O.eventTime;if((m&pe)===pe){me!==null&&(me=me.next={eventTime:_e,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var Ae=o,ke=O;switch(pe=a,_e=h,ke.tag){case 1:if(Ae=ke.payload,typeof Ae=="function"){Ce=Ae.call(_e,Ce,pe);break e}Ce=Ae;break e;case 3:Ae.flags=Ae.flags&-65537|128;case 0:if(Ae=ke.payload,pe=typeof Ae=="function"?Ae.call(_e,Ce,pe):Ae,pe==null)break e;Ce=J({},Ce,pe);break e;case 2:Uo=!0}}O.callback!==null&&O.lane!==0&&(o.flags|=64,pe=w.effects,pe===null?w.effects=[O]:pe.push(O))}else _e={eventTime:_e,lane:pe,tag:O.tag,payload:O.payload,callback:O.callback,next:null},me===null?(ee=me=_e,B=Ce):me=me.next=_e,D|=pe;if(O=O.next,O===null){if(O=w.shared.pending,O===null)break;pe=O,O=pe.next,pe.next=null,w.lastBaseUpdate=pe,w.shared.pending=null}}while(!0);if(me===null&&(B=Ce),w.baseState=B,w.firstBaseUpdate=ee,w.lastBaseUpdate=me,a=w.shared.interleaved,a!==null){w=a;do D|=w.lane,w=w.next;while(w!==a)}else P===null&&(w.shared.lanes=0);Lr|=D,o.lanes=D,o.memoizedState=Ce}}function nm(o,a,h){if(o=a.effects,a.effects=null,o!==null)for(a=0;a<o.length;a++){var m=o[a],w=m.callback;if(w!==null){if(m.callback=null,m=h,typeof w!="function")throw Error(i(191,w));w.call(m)}}}var Ba={},Cs=Vo(Ba),Va=Vo(Ba),Wa=Vo(Ba);function Tr(o){if(o===Ba)throw Error(i(174));return o}function xh(o,a){switch(Mt(Wa,a),Mt(Va,o),Mt(Cs,Ba),o=a.nodeType,o){case 9:case 11:a=(a=a.documentElement)?a.namespaceURI:Ot(null,"");break;default:o=o===8?a.parentNode:a,a=o.namespaceURI||null,o=o.tagName,a=Ot(a,o)}Lt(Cs),Mt(Cs,a)}function Wl(){Lt(Cs),Lt(Va),Lt(Wa)}function sm(o){Tr(Wa.current);var a=Tr(Cs.current),h=Ot(a,o.type);a!==h&&(Mt(Va,o),Mt(Cs,h))}function Dh(o){Va.current===o&&(Lt(Cs),Lt(Va))}var Ht=Vo(0);function Rc(o){for(var a=o;a!==null;){if(a.tag===13){var h=a.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||h.data==="$?"||h.data==="$!"))return a}else if(a.tag===19&&a.memoizedProps.revealOrder!==void 0){if(a.flags&128)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Mh=[];function Th(){for(var o=0;o<Mh.length;o++)Mh[o]._workInProgressVersionPrimary=null;Mh.length=0}var Pc=H.ReactCurrentDispatcher,_h=H.ReactCurrentBatchConfig,_r=0,Bt=null,ii=null,si=null,Fc=!1,za=!1,Ua=0,nR=0;function yi(){throw Error(i(321))}function Lh(o,a){if(a===null)return!1;for(var h=0;h<a.length&&h<o.length;h++)if(!ln(o[h],a[h]))return!1;return!0}function Ah(o,a,h,m,w,P){if(_r=P,Bt=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,Pc.current=o===null||o.memoizedState===null?lR:aR,o=h(m,w),za){P=0;do{if(za=!1,Ua=0,25<=P)throw Error(i(301));P+=1,si=ii=null,a.updateQueue=null,Pc.current=uR,o=h(m,w)}while(za)}if(Pc.current=xc,a=ii!==null&&ii.next!==null,_r=0,si=ii=Bt=null,Fc=!1,a)throw Error(i(300));return o}function Ih(){var o=Ua!==0;return Ua=0,o}function ws(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return si===null?Bt.memoizedState=si=o:si=si.next=o,si}function xn(){if(ii===null){var o=Bt.alternate;o=o!==null?o.memoizedState:null}else o=ii.next;var a=si===null?Bt.memoizedState:si.next;if(a!==null)si=a,ii=o;else{if(o===null)throw Error(i(310));ii=o,o={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},si===null?Bt.memoizedState=si=o:si=si.next=o}return si}function ja(o,a){return typeof a=="function"?a(o):a}function kh(o){var a=xn(),h=a.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var m=ii,w=m.baseQueue,P=h.pending;if(P!==null){if(w!==null){var D=w.next;w.next=P.next,P.next=D}m.baseQueue=w=P,h.pending=null}if(w!==null){P=w.next,m=m.baseState;var O=D=null,B=null,ee=P;do{var me=ee.lane;if((_r&me)===me)B!==null&&(B=B.next={lane:0,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null}),m=ee.hasEagerState?ee.eagerState:o(m,ee.action);else{var Ce={lane:me,action:ee.action,hasEagerState:ee.hasEagerState,eagerState:ee.eagerState,next:null};B===null?(O=B=Ce,D=m):B=B.next=Ce,Bt.lanes|=me,Lr|=me}ee=ee.next}while(ee!==null&&ee!==P);B===null?D=m:B.next=O,ln(m,a.memoizedState)||($i=!0),a.memoizedState=m,a.baseState=D,a.baseQueue=B,h.lastRenderedState=m}if(o=h.interleaved,o!==null){w=o;do P=w.lane,Bt.lanes|=P,Lr|=P,w=w.next;while(w!==o)}else w===null&&(h.lanes=0);return[a.memoizedState,h.dispatch]}function Oh(o){var a=xn(),h=a.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var m=h.dispatch,w=h.pending,P=a.memoizedState;if(w!==null){h.pending=null;var D=w=w.next;do P=o(P,D.action),D=D.next;while(D!==w);ln(P,a.memoizedState)||($i=!0),a.memoizedState=P,a.baseQueue===null&&(a.baseState=P),h.lastRenderedState=P}return[P,m]}function om(){}function rm(o,a){var h=Bt,m=xn(),w=a(),P=!ln(m.memoizedState,w);if(P&&(m.memoizedState=w,$i=!0),m=m.queue,Nh(um.bind(null,h,m,o),[o]),m.getSnapshot!==a||P||si!==null&&si.memoizedState.tag&1){if(h.flags|=2048,$a(9,am.bind(null,h,m,w,a),void 0,null),oi===null)throw Error(i(349));_r&30||lm(h,a,w)}return w}function lm(o,a,h){o.flags|=16384,o={getSnapshot:a,value:h},a=Bt.updateQueue,a===null?(a={lastEffect:null,stores:null},Bt.updateQueue=a,a.stores=[o]):(h=a.stores,h===null?a.stores=[o]:h.push(o))}function am(o,a,h,m){a.value=h,a.getSnapshot=m,cm(a)&&dm(o)}function um(o,a,h){return h(function(){cm(a)&&dm(o)})}function cm(o){var a=o.getSnapshot;o=o.value;try{var h=a();return!ln(o,h)}catch{return!0}}function dm(o){var a=to(o,1);a!==null&&Qn(a,o,1,-1)}function hm(o){var a=ws();return typeof o=="function"&&(o=o()),a.memoizedState=a.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ja,lastRenderedState:o},a.queue=o,o=o.dispatch=rR.bind(null,Bt,o),[a.memoizedState,o]}function $a(o,a,h,m){return o={tag:o,create:a,destroy:h,deps:m,next:null},a=Bt.updateQueue,a===null?(a={lastEffect:null,stores:null},Bt.updateQueue=a,a.lastEffect=o.next=o):(h=a.lastEffect,h===null?a.lastEffect=o.next=o:(m=h.next,h.next=o,o.next=m,a.lastEffect=o)),o}function pm(){return xn().memoizedState}function Ec(o,a,h,m){var w=ws();Bt.flags|=o,w.memoizedState=$a(1|a,h,void 0,m===void 0?null:m)}function bc(o,a,h,m){var w=xn();m=m===void 0?null:m;var P=void 0;if(ii!==null){var D=ii.memoizedState;if(P=D.destroy,m!==null&&Lh(m,D.deps)){w.memoizedState=$a(a,h,P,m);return}}Bt.flags|=o,w.memoizedState=$a(1|a,h,P,m)}function fm(o,a){return Ec(8390656,8,o,a)}function Nh(o,a){return bc(2048,8,o,a)}function gm(o,a){return bc(4,2,o,a)}function mm(o,a){return bc(4,4,o,a)}function vm(o,a){if(typeof a=="function")return o=o(),a(o),function(){a(null)};if(a!=null)return o=o(),a.current=o,function(){a.current=null}}function Cm(o,a,h){return h=h!=null?h.concat([o]):null,bc(4,4,vm.bind(null,a,o),h)}function Gh(){}function wm(o,a){var h=xn();a=a===void 0?null:a;var m=h.memoizedState;return m!==null&&a!==null&&Lh(a,m[1])?m[0]:(h.memoizedState=[o,a],o)}function Sm(o,a){var h=xn();a=a===void 0?null:a;var m=h.memoizedState;return m!==null&&a!==null&&Lh(a,m[1])?m[0]:(o=o(),h.memoizedState=[o,a],o)}function ym(o,a,h){return _r&21?(ln(h,a)||(h=Wu(),Bt.lanes|=h,Lr|=h,o.baseState=!0),a):(o.baseState&&(o.baseState=!1,$i=!0),o.memoizedState=h)}function sR(o,a){var h=dt;dt=h!==0&&4>h?h:4,o(!0);var m=_h.transition;_h.transition={};try{o(!1),a()}finally{dt=h,_h.transition=m}}function Rm(){return xn().memoizedState}function oR(o,a,h){var m=qo(o);if(h={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null},Pm(o))Fm(a,h);else if(h=em(o,a,h,m),h!==null){var w=_i();Qn(h,o,m,w),Em(h,a,m)}}function rR(o,a,h){var m=qo(o),w={lane:m,action:h,hasEagerState:!1,eagerState:null,next:null};if(Pm(o))Fm(a,w);else{var P=o.alternate;if(o.lanes===0&&(P===null||P.lanes===0)&&(P=a.lastRenderedReducer,P!==null))try{var D=a.lastRenderedState,O=P(D,h);if(w.hasEagerState=!0,w.eagerState=O,ln(O,D)){var B=a.interleaved;B===null?(w.next=w,Eh(a)):(w.next=B.next,B.next=w),a.interleaved=w;return}}catch{}finally{}h=em(o,a,w,m),h!==null&&(w=_i(),Qn(h,o,m,w),Em(h,a,m))}}function Pm(o){var a=o.alternate;return o===Bt||a!==null&&a===Bt}function Fm(o,a){za=Fc=!0;var h=o.pending;h===null?a.next=a:(a.next=h.next,h.next=a),o.pending=a}function Em(o,a,h){if(h&4194240){var m=a.lanes;m&=o.pendingLanes,h|=m,a.lanes=h,Wn(o,h)}}var xc={readContext:bn,useCallback:yi,useContext:yi,useEffect:yi,useImperativeHandle:yi,useInsertionEffect:yi,useLayoutEffect:yi,useMemo:yi,useReducer:yi,useRef:yi,useState:yi,useDebugValue:yi,useDeferredValue:yi,useTransition:yi,useMutableSource:yi,useSyncExternalStore:yi,useId:yi,unstable_isNewReconciler:!1},lR={readContext:bn,useCallback:function(o,a){return ws().memoizedState=[o,a===void 0?null:a],o},useContext:bn,useEffect:fm,useImperativeHandle:function(o,a,h){return h=h!=null?h.concat([o]):null,Ec(4194308,4,vm.bind(null,a,o),h)},useLayoutEffect:function(o,a){return Ec(4194308,4,o,a)},useInsertionEffect:function(o,a){return Ec(4,2,o,a)},useMemo:function(o,a){var h=ws();return a=a===void 0?null:a,o=o(),h.memoizedState=[o,a],o},useReducer:function(o,a,h){var m=ws();return a=h!==void 0?h(a):a,m.memoizedState=m.baseState=a,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:a},m.queue=o,o=o.dispatch=oR.bind(null,Bt,o),[m.memoizedState,o]},useRef:function(o){var a=ws();return o={current:o},a.memoizedState=o},useState:hm,useDebugValue:Gh,useDeferredValue:function(o){return ws().memoizedState=o},useTransition:function(){var o=hm(!1),a=o[0];return o=sR.bind(null,o[1]),ws().memoizedState=o,[a,o]},useMutableSource:function(){},useSyncExternalStore:function(o,a,h){var m=Bt,w=ws();if(It){if(h===void 0)throw Error(i(407));h=h()}else{if(h=a(),oi===null)throw Error(i(349));_r&30||lm(m,a,h)}w.memoizedState=h;var P={value:h,getSnapshot:a};return w.queue=P,fm(um.bind(null,m,P,o),[o]),m.flags|=2048,$a(9,am.bind(null,m,P,h,a),void 0,null),h},useId:function(){var o=ws(),a=oi.identifierPrefix;if(It){var h=eo,m=Js;h=(m&~(1<<32-et(m)-1)).toString(32)+h,a=":"+a+"R"+h,h=Ua++,0<h&&(a+="H"+h.toString(32)),a+=":"}else h=nR++,a=":"+a+"r"+h.toString(32)+":";return o.memoizedState=a},unstable_isNewReconciler:!1},aR={readContext:bn,useCallback:wm,useContext:bn,useEffect:Nh,useImperativeHandle:Cm,useInsertionEffect:gm,useLayoutEffect:mm,useMemo:Sm,useReducer:kh,useRef:pm,useState:function(){return kh(ja)},useDebugValue:Gh,useDeferredValue:function(o){var a=xn();return ym(a,ii.memoizedState,o)},useTransition:function(){var o=kh(ja)[0],a=xn().memoizedState;return[o,a]},useMutableSource:om,useSyncExternalStore:rm,useId:Rm,unstable_isNewReconciler:!1},uR={readContext:bn,useCallback:wm,useContext:bn,useEffect:Nh,useImperativeHandle:Cm,useInsertionEffect:gm,useLayoutEffect:mm,useMemo:Sm,useReducer:Oh,useRef:pm,useState:function(){return Oh(ja)},useDebugValue:Gh,useDeferredValue:function(o){var a=xn();return ii===null?a.memoizedState=o:ym(a,ii.memoizedState,o)},useTransition:function(){var o=Oh(ja)[0],a=xn().memoizedState;return[o,a]},useMutableSource:om,useSyncExternalStore:rm,useId:Rm,unstable_isNewReconciler:!1};function Zn(o,a){if(o&&o.defaultProps){a=J({},a),o=o.defaultProps;for(var h in o)a[h]===void 0&&(a[h]=o[h]);return a}return a}function Hh(o,a,h,m){a=o.memoizedState,h=h(m,a),h=h==null?a:J({},a,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Dc={isMounted:function(o){return(o=o._reactInternals)?pt(o)===o:!1},enqueueSetState:function(o,a,h){o=o._reactInternals;var m=_i(),w=qo(o),P=io(m,w);P.payload=a,h!=null&&(P.callback=h),a=jo(o,P,w),a!==null&&(Qn(a,o,w,m),Sc(a,o,w))},enqueueReplaceState:function(o,a,h){o=o._reactInternals;var m=_i(),w=qo(o),P=io(m,w);P.tag=1,P.payload=a,h!=null&&(P.callback=h),a=jo(o,P,w),a!==null&&(Qn(a,o,w,m),Sc(a,o,w))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var h=_i(),m=qo(o),w=io(h,m);w.tag=2,a!=null&&(w.callback=a),a=jo(o,w,m),a!==null&&(Qn(a,o,m,h),Sc(a,o,m))}};function bm(o,a,h,m,w,P,D){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(m,P,D):a.prototype&&a.prototype.isPureReactComponent?!fs(h,m)||!fs(w,P):!0}function xm(o,a,h){var m=!1,w=Wo,P=a.contextType;return typeof P=="object"&&P!==null?P=bn(P):(w=ji(a)?br:Si.current,m=a.contextTypes,P=(m=m!=null)?kl(o,w):Wo),a=new a(h,P),o.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=Dc,o.stateNode=a,a._reactInternals=o,m&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=w,o.__reactInternalMemoizedMaskedChildContext=P),a}function Dm(o,a,h,m){o=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(h,m),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(h,m),a.state!==o&&Dc.enqueueReplaceState(a,a.state,null)}function Bh(o,a,h,m){var w=o.stateNode;w.props=h,w.state=o.memoizedState,w.refs={},bh(o);var P=a.contextType;typeof P=="object"&&P!==null?w.context=bn(P):(P=ji(a)?br:Si.current,w.context=kl(o,P)),w.state=o.memoizedState,P=a.getDerivedStateFromProps,typeof P=="function"&&(Hh(o,a,P,h),w.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(a=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),a!==w.state&&Dc.enqueueReplaceState(w,w.state,null),yc(o,h,w,m),w.state=o.memoizedState),typeof w.componentDidMount=="function"&&(o.flags|=4194308)}function zl(o,a){try{var h="",m=a;do h+=fe(m),m=m.return;while(m);var w=h}catch(P){w=`
Error generating stack: `+P.message+`
`+P.stack}return{value:o,source:a,stack:w,digest:null}}function Vh(o,a,h){return{value:o,source:null,stack:h??null,digest:a??null}}function Wh(o,a){try{console.error(a.value)}catch(h){setTimeout(function(){throw h})}}var cR=typeof WeakMap=="function"?WeakMap:Map;function Mm(o,a,h){h=io(-1,h),h.tag=3,h.payload={element:null};var m=a.value;return h.callback=function(){kc||(kc=!0,np=m),Wh(o,a)},h}function Tm(o,a,h){h=io(-1,h),h.tag=3;var m=o.type.getDerivedStateFromError;if(typeof m=="function"){var w=a.value;h.payload=function(){return m(w)},h.callback=function(){Wh(o,a)}}var P=o.stateNode;return P!==null&&typeof P.componentDidCatch=="function"&&(h.callback=function(){Wh(o,a),typeof m!="function"&&(Ko===null?Ko=new Set([this]):Ko.add(this));var D=a.stack;this.componentDidCatch(a.value,{componentStack:D!==null?D:""})}),h}function _m(o,a,h){var m=o.pingCache;if(m===null){m=o.pingCache=new cR;var w=new Set;m.set(a,w)}else w=m.get(a),w===void 0&&(w=new Set,m.set(a,w));w.has(h)||(w.add(h),o=FR.bind(null,o,a,h),a.then(o,o))}function Lm(o){do{var a;if((a=o.tag===13)&&(a=o.memoizedState,a=a!==null?a.dehydrated!==null:!0),a)return o;o=o.return}while(o!==null);return null}function Am(o,a,h,m,w){return o.mode&1?(o.flags|=65536,o.lanes=w,o):(o===a?o.flags|=65536:(o.flags|=128,h.flags|=131072,h.flags&=-52805,h.tag===1&&(h.alternate===null?h.tag=17:(a=io(-1,1),a.tag=2,jo(h,a,1))),h.lanes|=1),o)}var dR=H.ReactCurrentOwner,$i=!1;function Ti(o,a,h,m){a.child=o===null?Jg(a,null,h,m):Hl(a,o.child,h,m)}function Im(o,a,h,m,w){h=h.render;var P=a.ref;return Vl(a,w),m=Ah(o,a,h,m,P,w),h=Ih(),o!==null&&!$i?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~w,no(o,a,w)):(It&&h&&mh(a),a.flags|=1,Ti(o,a,m,w),a.child)}function km(o,a,h,m,w){if(o===null){var P=h.type;return typeof P=="function"&&!cp(P)&&P.defaultProps===void 0&&h.compare===null&&h.defaultProps===void 0?(a.tag=15,a.type=P,Om(o,a,P,m,w)):(o=Vc(h.type,null,m,a,a.mode,w),o.ref=a.ref,o.return=a,a.child=o)}if(P=o.child,!(o.lanes&w)){var D=P.memoizedProps;if(h=h.compare,h=h!==null?h:fs,h(D,m)&&o.ref===a.ref)return no(o,a,w)}return a.flags|=1,o=Qo(P,m),o.ref=a.ref,o.return=a,a.child=o}function Om(o,a,h,m,w){if(o!==null){var P=o.memoizedProps;if(fs(P,m)&&o.ref===a.ref)if($i=!1,a.pendingProps=m=P,(o.lanes&w)!==0)o.flags&131072&&($i=!0);else return a.lanes=o.lanes,no(o,a,w)}return zh(o,a,h,m,w)}function Nm(o,a,h){var m=a.pendingProps,w=m.children,P=o!==null?o.memoizedState:null;if(m.mode==="hidden")if(!(a.mode&1))a.memoizedState={baseLanes:0,cachePool:null,transitions:null},Mt(jl,dn),dn|=h;else{if(!(h&1073741824))return o=P!==null?P.baseLanes|h:h,a.lanes=a.childLanes=1073741824,a.memoizedState={baseLanes:o,cachePool:null,transitions:null},a.updateQueue=null,Mt(jl,dn),dn|=o,null;a.memoizedState={baseLanes:0,cachePool:null,transitions:null},m=P!==null?P.baseLanes:h,Mt(jl,dn),dn|=m}else P!==null?(m=P.baseLanes|h,a.memoizedState=null):m=h,Mt(jl,dn),dn|=m;return Ti(o,a,w,h),a.child}function Gm(o,a){var h=a.ref;(o===null&&h!==null||o!==null&&o.ref!==h)&&(a.flags|=512,a.flags|=2097152)}function zh(o,a,h,m,w){var P=ji(h)?br:Si.current;return P=kl(a,P),Vl(a,w),h=Ah(o,a,h,m,P,w),m=Ih(),o!==null&&!$i?(a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~w,no(o,a,w)):(It&&m&&mh(a),a.flags|=1,Ti(o,a,h,w),a.child)}function Hm(o,a,h,m,w){if(ji(h)){var P=!0;hc(a)}else P=!1;if(Vl(a,w),a.stateNode===null)Tc(o,a),xm(a,h,m),Bh(a,h,m,w),m=!0;else if(o===null){var D=a.stateNode,O=a.memoizedProps;D.props=O;var B=D.context,ee=h.contextType;typeof ee=="object"&&ee!==null?ee=bn(ee):(ee=ji(h)?br:Si.current,ee=kl(a,ee));var me=h.getDerivedStateFromProps,Ce=typeof me=="function"||typeof D.getSnapshotBeforeUpdate=="function";Ce||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(O!==m||B!==ee)&&Dm(a,D,m,ee),Uo=!1;var pe=a.memoizedState;D.state=pe,yc(a,m,D,w),B=a.memoizedState,O!==m||pe!==B||Ui.current||Uo?(typeof me=="function"&&(Hh(a,h,me,m),B=a.memoizedState),(O=Uo||bm(a,h,O,m,pe,B,ee))?(Ce||typeof D.UNSAFE_componentWillMount!="function"&&typeof D.componentWillMount!="function"||(typeof D.componentWillMount=="function"&&D.componentWillMount(),typeof D.UNSAFE_componentWillMount=="function"&&D.UNSAFE_componentWillMount()),typeof D.componentDidMount=="function"&&(a.flags|=4194308)):(typeof D.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=m,a.memoizedState=B),D.props=m,D.state=B,D.context=ee,m=O):(typeof D.componentDidMount=="function"&&(a.flags|=4194308),m=!1)}else{D=a.stateNode,tm(o,a),O=a.memoizedProps,ee=a.type===a.elementType?O:Zn(a.type,O),D.props=ee,Ce=a.pendingProps,pe=D.context,B=h.contextType,typeof B=="object"&&B!==null?B=bn(B):(B=ji(h)?br:Si.current,B=kl(a,B));var _e=h.getDerivedStateFromProps;(me=typeof _e=="function"||typeof D.getSnapshotBeforeUpdate=="function")||typeof D.UNSAFE_componentWillReceiveProps!="function"&&typeof D.componentWillReceiveProps!="function"||(O!==Ce||pe!==B)&&Dm(a,D,m,B),Uo=!1,pe=a.memoizedState,D.state=pe,yc(a,m,D,w);var Ae=a.memoizedState;O!==Ce||pe!==Ae||Ui.current||Uo?(typeof _e=="function"&&(Hh(a,h,_e,m),Ae=a.memoizedState),(ee=Uo||bm(a,h,ee,m,pe,Ae,B)||!1)?(me||typeof D.UNSAFE_componentWillUpdate!="function"&&typeof D.componentWillUpdate!="function"||(typeof D.componentWillUpdate=="function"&&D.componentWillUpdate(m,Ae,B),typeof D.UNSAFE_componentWillUpdate=="function"&&D.UNSAFE_componentWillUpdate(m,Ae,B)),typeof D.componentDidUpdate=="function"&&(a.flags|=4),typeof D.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof D.componentDidUpdate!="function"||O===o.memoizedProps&&pe===o.memoizedState||(a.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&pe===o.memoizedState||(a.flags|=1024),a.memoizedProps=m,a.memoizedState=Ae),D.props=m,D.state=Ae,D.context=B,m=ee):(typeof D.componentDidUpdate!="function"||O===o.memoizedProps&&pe===o.memoizedState||(a.flags|=4),typeof D.getSnapshotBeforeUpdate!="function"||O===o.memoizedProps&&pe===o.memoizedState||(a.flags|=1024),m=!1)}return Uh(o,a,h,m,P,w)}function Uh(o,a,h,m,w,P){Gm(o,a);var D=(a.flags&128)!==0;if(!m&&!D)return w&&Ug(a,h,!1),no(o,a,P);m=a.stateNode,dR.current=a;var O=D&&typeof h.getDerivedStateFromError!="function"?null:m.render();return a.flags|=1,o!==null&&D?(a.child=Hl(a,o.child,null,P),a.child=Hl(a,null,O,P)):Ti(o,a,O,P),a.memoizedState=m.state,w&&Ug(a,h,!0),a.child}function Bm(o){var a=o.stateNode;a.pendingContext?Wg(o,a.pendingContext,a.pendingContext!==a.context):a.context&&Wg(o,a.context,!1),xh(o,a.containerInfo)}function Vm(o,a,h,m,w){return Gl(),Sh(w),a.flags|=256,Ti(o,a,h,m),a.child}var jh={dehydrated:null,treeContext:null,retryLane:0};function $h(o){return{baseLanes:o,cachePool:null,transitions:null}}function Wm(o,a,h){var m=a.pendingProps,w=Ht.current,P=!1,D=(a.flags&128)!==0,O;if((O=D)||(O=o!==null&&o.memoizedState===null?!1:(w&2)!==0),O?(P=!0,a.flags&=-129):(o===null||o.memoizedState!==null)&&(w|=1),Mt(Ht,w&1),o===null)return wh(a),o=a.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(a.mode&1?o.data==="$!"?a.lanes=8:a.lanes=1073741824:a.lanes=1,null):(D=m.children,o=m.fallback,P?(m=a.mode,P=a.child,D={mode:"hidden",children:D},!(m&1)&&P!==null?(P.childLanes=0,P.pendingProps=D):P=Wc(D,m,0,null),o=Or(o,m,h,null),P.return=a,o.return=a,P.sibling=o,a.child=P,a.child.memoizedState=$h(h),a.memoizedState=jh,o):Kh(a,D));if(w=o.memoizedState,w!==null&&(O=w.dehydrated,O!==null))return hR(o,a,D,m,O,w,h);if(P){P=m.fallback,D=a.mode,w=o.child,O=w.sibling;var B={mode:"hidden",children:m.children};return!(D&1)&&a.child!==w?(m=a.child,m.childLanes=0,m.pendingProps=B,a.deletions=null):(m=Qo(w,B),m.subtreeFlags=w.subtreeFlags&14680064),O!==null?P=Qo(O,P):(P=Or(P,D,h,null),P.flags|=2),P.return=a,m.return=a,m.sibling=P,a.child=m,m=P,P=a.child,D=o.child.memoizedState,D=D===null?$h(h):{baseLanes:D.baseLanes|h,cachePool:null,transitions:D.transitions},P.memoizedState=D,P.childLanes=o.childLanes&~h,a.memoizedState=jh,m}return P=o.child,o=P.sibling,m=Qo(P,{mode:"visible",children:m.children}),!(a.mode&1)&&(m.lanes=h),m.return=a,m.sibling=null,o!==null&&(h=a.deletions,h===null?(a.deletions=[o],a.flags|=16):h.push(o)),a.child=m,a.memoizedState=null,m}function Kh(o,a){return a=Wc({mode:"visible",children:a},o.mode,0,null),a.return=o,o.child=a}function Mc(o,a,h,m){return m!==null&&Sh(m),Hl(a,o.child,null,h),o=Kh(a,a.pendingProps.children),o.flags|=2,a.memoizedState=null,o}function hR(o,a,h,m,w,P,D){if(h)return a.flags&256?(a.flags&=-257,m=Vh(Error(i(422))),Mc(o,a,D,m)):a.memoizedState!==null?(a.child=o.child,a.flags|=128,null):(P=m.fallback,w=a.mode,m=Wc({mode:"visible",children:m.children},w,0,null),P=Or(P,w,D,null),P.flags|=2,m.return=a,P.return=a,m.sibling=P,a.child=m,a.mode&1&&Hl(a,o.child,null,D),a.child.memoizedState=$h(D),a.memoizedState=jh,P);if(!(a.mode&1))return Mc(o,a,D,null);if(w.data==="$!"){if(m=w.nextSibling&&w.nextSibling.dataset,m)var O=m.dgst;return m=O,P=Error(i(419)),m=Vh(P,m,void 0),Mc(o,a,D,m)}if(O=(D&o.childLanes)!==0,$i||O){if(m=oi,m!==null){switch(D&-D){case 4:w=2;break;case 16:w=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:w=32;break;case 536870912:w=268435456;break;default:w=0}w=w&(m.suspendedLanes|D)?0:w,w!==0&&w!==P.retryLane&&(P.retryLane=w,to(o,w),Qn(m,o,w,-1))}return up(),m=Vh(Error(i(421))),Mc(o,a,D,m)}return w.data==="$?"?(a.flags|=128,a.child=o.child,a=ER.bind(null,o),w._reactRetry=a,null):(o=P.treeContext,cn=vs(w.nextSibling),un=a,It=!0,Kn=null,o!==null&&(Fn[En++]=Js,Fn[En++]=eo,Fn[En++]=xr,Js=o.id,eo=o.overflow,xr=a),a=Kh(a,m.children),a.flags|=4096,a)}function zm(o,a,h){o.lanes|=a;var m=o.alternate;m!==null&&(m.lanes|=a),Fh(o.return,a,h)}function Zh(o,a,h,m,w){var P=o.memoizedState;P===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:m,tail:h,tailMode:w}:(P.isBackwards=a,P.rendering=null,P.renderingStartTime=0,P.last=m,P.tail=h,P.tailMode=w)}function Um(o,a,h){var m=a.pendingProps,w=m.revealOrder,P=m.tail;if(Ti(o,a,m.children,h),m=Ht.current,m&2)m=m&1|2,a.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=a.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&zm(o,h,a);else if(o.tag===19)zm(o,h,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}m&=1}if(Mt(Ht,m),!(a.mode&1))a.memoizedState=null;else switch(w){case"forwards":for(h=a.child,w=null;h!==null;)o=h.alternate,o!==null&&Rc(o)===null&&(w=h),h=h.sibling;h=w,h===null?(w=a.child,a.child=null):(w=h.sibling,h.sibling=null),Zh(a,!1,w,h,P);break;case"backwards":for(h=null,w=a.child,a.child=null;w!==null;){if(o=w.alternate,o!==null&&Rc(o)===null){a.child=w;break}o=w.sibling,w.sibling=h,h=w,w=o}Zh(a,!0,h,null,P);break;case"together":Zh(a,!1,null,null,void 0);break;default:a.memoizedState=null}return a.child}function Tc(o,a){!(a.mode&1)&&o!==null&&(o.alternate=null,a.alternate=null,a.flags|=2)}function no(o,a,h){if(o!==null&&(a.dependencies=o.dependencies),Lr|=a.lanes,!(h&a.childLanes))return null;if(o!==null&&a.child!==o.child)throw Error(i(153));if(a.child!==null){for(o=a.child,h=Qo(o,o.pendingProps),a.child=h,h.return=a;o.sibling!==null;)o=o.sibling,h=h.sibling=Qo(o,o.pendingProps),h.return=a;h.sibling=null}return a.child}function pR(o,a,h){switch(a.tag){case 3:Bm(a),Gl();break;case 5:sm(a);break;case 1:ji(a.type)&&hc(a);break;case 4:xh(a,a.stateNode.containerInfo);break;case 10:var m=a.type._context,w=a.memoizedProps.value;Mt(Cc,m._currentValue),m._currentValue=w;break;case 13:if(m=a.memoizedState,m!==null)return m.dehydrated!==null?(Mt(Ht,Ht.current&1),a.flags|=128,null):h&a.child.childLanes?Wm(o,a,h):(Mt(Ht,Ht.current&1),o=no(o,a,h),o!==null?o.sibling:null);Mt(Ht,Ht.current&1);break;case 19:if(m=(h&a.childLanes)!==0,o.flags&128){if(m)return Um(o,a,h);a.flags|=128}if(w=a.memoizedState,w!==null&&(w.rendering=null,w.tail=null,w.lastEffect=null),Mt(Ht,Ht.current),m)break;return null;case 22:case 23:return a.lanes=0,Nm(o,a,h)}return no(o,a,h)}var jm,qh,$m,Km;jm=function(o,a){for(var h=a.child;h!==null;){if(h.tag===5||h.tag===6)o.appendChild(h.stateNode);else if(h.tag!==4&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===a)break;for(;h.sibling===null;){if(h.return===null||h.return===a)return;h=h.return}h.sibling.return=h.return,h=h.sibling}},qh=function(){},$m=function(o,a,h,m){var w=o.memoizedProps;if(w!==m){o=a.stateNode,Tr(Cs.current);var P=null;switch(h){case"input":w=yt(o,w),m=yt(o,m),P=[];break;case"select":w=J({},w,{value:void 0}),m=J({},m,{value:void 0}),P=[];break;case"textarea":w=fi(o,w),m=fi(o,m),P=[];break;default:typeof w.onClick!="function"&&typeof m.onClick=="function"&&(o.onclick=ce)}ls(h,m);var D;h=null;for(ee in w)if(!m.hasOwnProperty(ee)&&w.hasOwnProperty(ee)&&w[ee]!=null)if(ee==="style"){var O=w[ee];for(D in O)O.hasOwnProperty(D)&&(h||(h={}),h[D]="")}else ee!=="dangerouslySetInnerHTML"&&ee!=="children"&&ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&ee!=="autoFocus"&&(s.hasOwnProperty(ee)?P||(P=[]):(P=P||[]).push(ee,null));for(ee in m){var B=m[ee];if(O=w!=null?w[ee]:void 0,m.hasOwnProperty(ee)&&B!==O&&(B!=null||O!=null))if(ee==="style")if(O){for(D in O)!O.hasOwnProperty(D)||B&&B.hasOwnProperty(D)||(h||(h={}),h[D]="");for(D in B)B.hasOwnProperty(D)&&O[D]!==B[D]&&(h||(h={}),h[D]=B[D])}else h||(P||(P=[]),P.push(ee,h)),h=B;else ee==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,O=O?O.__html:void 0,B!=null&&O!==B&&(P=P||[]).push(ee,B)):ee==="children"?typeof B!="string"&&typeof B!="number"||(P=P||[]).push(ee,""+B):ee!=="suppressContentEditableWarning"&&ee!=="suppressHydrationWarning"&&(s.hasOwnProperty(ee)?(B!=null&&ee==="onScroll"&&bt("scroll",o),P||O===B||(P=[])):(P=P||[]).push(ee,B))}h&&(P=P||[]).push("style",h);var ee=P;(a.updateQueue=ee)&&(a.flags|=4)}},Km=function(o,a,h,m){h!==m&&(a.flags|=4)};function Ka(o,a){if(!It)switch(o.tailMode){case"hidden":a=o.tail;for(var h=null;a!==null;)a.alternate!==null&&(h=a),a=a.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?a||o.tail===null?o.tail=null:o.tail.sibling=null:m.sibling=null}}function Ri(o){var a=o.alternate!==null&&o.alternate.child===o.child,h=0,m=0;if(a)for(var w=o.child;w!==null;)h|=w.lanes|w.childLanes,m|=w.subtreeFlags&14680064,m|=w.flags&14680064,w.return=o,w=w.sibling;else for(w=o.child;w!==null;)h|=w.lanes|w.childLanes,m|=w.subtreeFlags,m|=w.flags,w.return=o,w=w.sibling;return o.subtreeFlags|=m,o.childLanes=h,a}function fR(o,a,h){var m=a.pendingProps;switch(vh(a),a.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ri(a),null;case 1:return ji(a.type)&&dc(),Ri(a),null;case 3:return m=a.stateNode,Wl(),Lt(Ui),Lt(Si),Th(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(mc(a)?a.flags|=4:o===null||o.memoizedState.isDehydrated&&!(a.flags&256)||(a.flags|=1024,Kn!==null&&(rp(Kn),Kn=null))),qh(o,a),Ri(a),null;case 5:Dh(a);var w=Tr(Wa.current);if(h=a.type,o!==null&&a.stateNode!=null)$m(o,a,h,m,w),o.ref!==a.ref&&(a.flags|=512,a.flags|=2097152);else{if(!m){if(a.stateNode===null)throw Error(i(166));return Ri(a),null}if(o=Tr(Cs.current),mc(a)){m=a.stateNode,h=a.type;var P=a.memoizedProps;switch(m[Pn]=a,m[Ho]=P,o=(a.mode&1)!==0,h){case"dialog":bt("cancel",m),bt("close",m);break;case"iframe":case"object":case"embed":bt("load",m);break;case"video":case"audio":for(w=0;w<Oo.length;w++)bt(Oo[w],m);break;case"source":bt("error",m);break;case"img":case"image":case"link":bt("error",m),bt("load",m);break;case"details":bt("toggle",m);break;case"input":Ve(m,P),bt("invalid",m);break;case"select":m._wrapperState={wasMultiple:!!P.multiple},bt("invalid",m);break;case"textarea":Gi(m,P),bt("invalid",m)}ls(h,P),w=null;for(var D in P)if(P.hasOwnProperty(D)){var O=P[D];D==="children"?typeof O=="string"?m.textContent!==O&&(P.suppressHydrationWarning!==!0&&X(m.textContent,O,o),w=["children",O]):typeof O=="number"&&m.textContent!==""+O&&(P.suppressHydrationWarning!==!0&&X(m.textContent,O,o),w=["children",""+O]):s.hasOwnProperty(D)&&O!=null&&D==="onScroll"&&bt("scroll",m)}switch(h){case"input":wt(m),On(m,P,!0);break;case"textarea":wt(m),gi(m);break;case"select":case"option":break;default:typeof P.onClick=="function"&&(m.onclick=ce)}m=w,a.updateQueue=m,m!==null&&(a.flags|=4)}else{D=w.nodeType===9?w:w.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=ot(h)),o==="http://www.w3.org/1999/xhtml"?h==="script"?(o=D.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof m.is=="string"?o=D.createElement(h,{is:m.is}):(o=D.createElement(h),h==="select"&&(D=o,m.multiple?D.multiple=!0:m.size&&(D.size=m.size))):o=D.createElementNS(o,h),o[Pn]=a,o[Ho]=m,jm(o,a,!1,!1),a.stateNode=o;e:{switch(D=mn(h,m),h){case"dialog":bt("cancel",o),bt("close",o),w=m;break;case"iframe":case"object":case"embed":bt("load",o),w=m;break;case"video":case"audio":for(w=0;w<Oo.length;w++)bt(Oo[w],o);w=m;break;case"source":bt("error",o),w=m;break;case"img":case"image":case"link":bt("error",o),bt("load",o),w=m;break;case"details":bt("toggle",o),w=m;break;case"input":Ve(o,m),w=yt(o,m),bt("invalid",o);break;case"option":w=m;break;case"select":o._wrapperState={wasMultiple:!!m.multiple},w=J({},m,{value:void 0}),bt("invalid",o);break;case"textarea":Gi(o,m),w=fi(o,m),bt("invalid",o);break;default:w=m}ls(h,w),O=w;for(P in O)if(O.hasOwnProperty(P)){var B=O[P];P==="style"?wo(o,B):P==="dangerouslySetInnerHTML"?(B=B?B.__html:void 0,B!=null&&ll(o,B)):P==="children"?typeof B=="string"?(h!=="textarea"||B!=="")&&ci(o,B):typeof B=="number"&&ci(o,""+B):P!=="suppressContentEditableWarning"&&P!=="suppressHydrationWarning"&&P!=="autoFocus"&&(s.hasOwnProperty(P)?B!=null&&P==="onScroll"&&bt("scroll",o):B!=null&&I(o,P,B,D))}switch(h){case"input":wt(o),On(o,m,!1);break;case"textarea":wt(o),gi(o);break;case"option":m.value!=null&&o.setAttribute("value",""+Ze(m.value));break;case"select":o.multiple=!!m.multiple,P=m.value,P!=null?kt(o,!!m.multiple,P,!1):m.defaultValue!=null&&kt(o,!!m.multiple,m.defaultValue,!0);break;default:typeof w.onClick=="function"&&(o.onclick=ce)}switch(h){case"button":case"input":case"select":case"textarea":m=!!m.autoFocus;break e;case"img":m=!0;break e;default:m=!1}}m&&(a.flags|=4)}a.ref!==null&&(a.flags|=512,a.flags|=2097152)}return Ri(a),null;case 6:if(o&&a.stateNode!=null)Km(o,a,o.memoizedProps,m);else{if(typeof m!="string"&&a.stateNode===null)throw Error(i(166));if(h=Tr(Wa.current),Tr(Cs.current),mc(a)){if(m=a.stateNode,h=a.memoizedProps,m[Pn]=a,(P=m.nodeValue!==h)&&(o=un,o!==null))switch(o.tag){case 3:X(m.nodeValue,h,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&X(m.nodeValue,h,(o.mode&1)!==0)}P&&(a.flags|=4)}else m=(h.nodeType===9?h:h.ownerDocument).createTextNode(m),m[Pn]=a,a.stateNode=m}return Ri(a),null;case 13:if(Lt(Ht),m=a.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(It&&cn!==null&&a.mode&1&&!(a.flags&128))Yg(),Gl(),a.flags|=98560,P=!1;else if(P=mc(a),m!==null&&m.dehydrated!==null){if(o===null){if(!P)throw Error(i(318));if(P=a.memoizedState,P=P!==null?P.dehydrated:null,!P)throw Error(i(317));P[Pn]=a}else Gl(),!(a.flags&128)&&(a.memoizedState=null),a.flags|=4;Ri(a),P=!1}else Kn!==null&&(rp(Kn),Kn=null),P=!0;if(!P)return a.flags&65536?a:null}return a.flags&128?(a.lanes=h,a):(m=m!==null,m!==(o!==null&&o.memoizedState!==null)&&m&&(a.child.flags|=8192,a.mode&1&&(o===null||Ht.current&1?ni===0&&(ni=3):up())),a.updateQueue!==null&&(a.flags|=4),Ri(a),null);case 4:return Wl(),qh(o,a),o===null&&No(a.stateNode.containerInfo),Ri(a),null;case 10:return Ph(a.type._context),Ri(a),null;case 17:return ji(a.type)&&dc(),Ri(a),null;case 19:if(Lt(Ht),P=a.memoizedState,P===null)return Ri(a),null;if(m=(a.flags&128)!==0,D=P.rendering,D===null)if(m)Ka(P,!1);else{if(ni!==0||o!==null&&o.flags&128)for(o=a.child;o!==null;){if(D=Rc(o),D!==null){for(a.flags|=128,Ka(P,!1),m=D.updateQueue,m!==null&&(a.updateQueue=m,a.flags|=4),a.subtreeFlags=0,m=h,h=a.child;h!==null;)P=h,o=m,P.flags&=14680066,D=P.alternate,D===null?(P.childLanes=0,P.lanes=o,P.child=null,P.subtreeFlags=0,P.memoizedProps=null,P.memoizedState=null,P.updateQueue=null,P.dependencies=null,P.stateNode=null):(P.childLanes=D.childLanes,P.lanes=D.lanes,P.child=D.child,P.subtreeFlags=0,P.deletions=null,P.memoizedProps=D.memoizedProps,P.memoizedState=D.memoizedState,P.updateQueue=D.updateQueue,P.type=D.type,o=D.dependencies,P.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),h=h.sibling;return Mt(Ht,Ht.current&1|2),a.child}o=o.sibling}P.tail!==null&&Ft()>$l&&(a.flags|=128,m=!0,Ka(P,!1),a.lanes=4194304)}else{if(!m)if(o=Rc(D),o!==null){if(a.flags|=128,m=!0,h=o.updateQueue,h!==null&&(a.updateQueue=h,a.flags|=4),Ka(P,!0),P.tail===null&&P.tailMode==="hidden"&&!D.alternate&&!It)return Ri(a),null}else 2*Ft()-P.renderingStartTime>$l&&h!==1073741824&&(a.flags|=128,m=!0,Ka(P,!1),a.lanes=4194304);P.isBackwards?(D.sibling=a.child,a.child=D):(h=P.last,h!==null?h.sibling=D:a.child=D,P.last=D)}return P.tail!==null?(a=P.tail,P.rendering=a,P.tail=a.sibling,P.renderingStartTime=Ft(),a.sibling=null,h=Ht.current,Mt(Ht,m?h&1|2:h&1),a):(Ri(a),null);case 22:case 23:return ap(),m=a.memoizedState!==null,o!==null&&o.memoizedState!==null!==m&&(a.flags|=8192),m&&a.mode&1?dn&1073741824&&(Ri(a),a.subtreeFlags&6&&(a.flags|=8192)):Ri(a),null;case 24:return null;case 25:return null}throw Error(i(156,a.tag))}function gR(o,a){switch(vh(a),a.tag){case 1:return ji(a.type)&&dc(),o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 3:return Wl(),Lt(Ui),Lt(Si),Th(),o=a.flags,o&65536&&!(o&128)?(a.flags=o&-65537|128,a):null;case 5:return Dh(a),null;case 13:if(Lt(Ht),o=a.memoizedState,o!==null&&o.dehydrated!==null){if(a.alternate===null)throw Error(i(340));Gl()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 19:return Lt(Ht),null;case 4:return Wl(),null;case 10:return Ph(a.type._context),null;case 22:case 23:return ap(),null;case 24:return null;default:return null}}var _c=!1,Pi=!1,mR=typeof WeakSet=="function"?WeakSet:Set,Le=null;function Ul(o,a){var h=o.ref;if(h!==null)if(typeof h=="function")try{h(null)}catch(m){Ut(o,a,m)}else h.current=null}function Yh(o,a,h){try{h()}catch(m){Ut(o,a,m)}}var Zm=!1;function vR(o,a){if(De=Cr,o=Ta(),_a(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&m.rangeCount!==0){h=m.anchorNode;var w=m.anchorOffset,P=m.focusNode;m=m.focusOffset;try{h.nodeType,P.nodeType}catch{h=null;break e}var D=0,O=-1,B=-1,ee=0,me=0,Ce=o,pe=null;t:for(;;){for(var _e;Ce!==h||w!==0&&Ce.nodeType!==3||(O=D+w),Ce!==P||m!==0&&Ce.nodeType!==3||(B=D+m),Ce.nodeType===3&&(D+=Ce.nodeValue.length),(_e=Ce.firstChild)!==null;)pe=Ce,Ce=_e;for(;;){if(Ce===o)break t;if(pe===h&&++ee===w&&(O=D),pe===P&&++me===m&&(B=D),(_e=Ce.nextSibling)!==null)break;Ce=pe,pe=Ce.parentNode}Ce=_e}h=O===-1||B===-1?null:{start:O,end:B}}else h=null}h=h||{start:0,end:0}}else h=null;for(We={focusedElem:o,selectionRange:h},Cr=!1,Le=a;Le!==null;)if(a=Le,o=a.child,(a.subtreeFlags&1028)!==0&&o!==null)o.return=a,Le=o;else for(;Le!==null;){a=Le;try{var Ae=a.alternate;if(a.flags&1024)switch(a.tag){case 0:case 11:case 15:break;case 1:if(Ae!==null){var ke=Ae.memoizedProps,qt=Ae.memoizedState,q=a.stateNode,W=q.getSnapshotBeforeUpdate(a.elementType===a.type?ke:Zn(a.type,ke),qt);q.__reactInternalSnapshotBeforeUpdate=W}break;case 3:var Y=a.stateNode.containerInfo;Y.nodeType===1?Y.textContent="":Y.nodeType===9&&Y.documentElement&&Y.removeChild(Y.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(ye){Ut(a,a.return,ye)}if(o=a.sibling,o!==null){o.return=a.return,Le=o;break}Le=a.return}return Ae=Zm,Zm=!1,Ae}function Za(o,a,h){var m=a.updateQueue;if(m=m!==null?m.lastEffect:null,m!==null){var w=m=m.next;do{if((w.tag&o)===o){var P=w.destroy;w.destroy=void 0,P!==void 0&&Yh(a,h,P)}w=w.next}while(w!==m)}}function Lc(o,a){if(a=a.updateQueue,a=a!==null?a.lastEffect:null,a!==null){var h=a=a.next;do{if((h.tag&o)===o){var m=h.create;h.destroy=m()}h=h.next}while(h!==a)}}function Qh(o){var a=o.ref;if(a!==null){var h=o.stateNode;switch(o.tag){case 5:o=h;break;default:o=h}typeof a=="function"?a(o):a.current=o}}function qm(o){var a=o.alternate;a!==null&&(o.alternate=null,qm(a)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(a=o.stateNode,a!==null&&(delete a[Pn],delete a[Ho],delete a[Bo],delete a[hh],delete a[ph])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function Ym(o){return o.tag===5||o.tag===3||o.tag===4}function Qm(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Ym(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Xh(o,a,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,a?h.nodeType===8?h.parentNode.insertBefore(o,a):h.insertBefore(o,a):(h.nodeType===8?(a=h.parentNode,a.insertBefore(o,h)):(a=h,a.appendChild(o)),h=h._reactRootContainer,h!=null||a.onclick!==null||(a.onclick=ce));else if(m!==4&&(o=o.child,o!==null))for(Xh(o,a,h),o=o.sibling;o!==null;)Xh(o,a,h),o=o.sibling}function Jh(o,a,h){var m=o.tag;if(m===5||m===6)o=o.stateNode,a?h.insertBefore(o,a):h.appendChild(o);else if(m!==4&&(o=o.child,o!==null))for(Jh(o,a,h),o=o.sibling;o!==null;)Jh(o,a,h),o=o.sibling}var di=null,qn=!1;function $o(o,a,h){for(h=h.child;h!==null;)Xm(o,a,h),h=h.sibling}function Xm(o,a,h){if(mi&&typeof mi.onCommitFiberUnmount=="function")try{mi.onCommitFiberUnmount(Vi,h)}catch{}switch(h.tag){case 5:Pi||Ul(h,a);case 6:var m=di,w=qn;di=null,$o(o,a,h),di=m,qn=w,di!==null&&(qn?(o=di,h=h.stateNode,o.nodeType===8?o.parentNode.removeChild(h):o.removeChild(h)):di.removeChild(h.stateNode));break;case 18:di!==null&&(qn?(o=di,h=h.stateNode,o.nodeType===8?Ga(o.parentNode,h):o.nodeType===1&&Ga(o,h),sn(o)):Ga(di,h.stateNode));break;case 4:m=di,w=qn,di=h.stateNode.containerInfo,qn=!0,$o(o,a,h),di=m,qn=w;break;case 0:case 11:case 14:case 15:if(!Pi&&(m=h.updateQueue,m!==null&&(m=m.lastEffect,m!==null))){w=m=m.next;do{var P=w,D=P.destroy;P=P.tag,D!==void 0&&(P&2||P&4)&&Yh(h,a,D),w=w.next}while(w!==m)}$o(o,a,h);break;case 1:if(!Pi&&(Ul(h,a),m=h.stateNode,typeof m.componentWillUnmount=="function"))try{m.props=h.memoizedProps,m.state=h.memoizedState,m.componentWillUnmount()}catch(O){Ut(h,a,O)}$o(o,a,h);break;case 21:$o(o,a,h);break;case 22:h.mode&1?(Pi=(m=Pi)||h.memoizedState!==null,$o(o,a,h),Pi=m):$o(o,a,h);break;default:$o(o,a,h)}}function Jm(o){var a=o.updateQueue;if(a!==null){o.updateQueue=null;var h=o.stateNode;h===null&&(h=o.stateNode=new mR),a.forEach(function(m){var w=bR.bind(null,o,m);h.has(m)||(h.add(m),m.then(w,w))})}}function Yn(o,a){var h=a.deletions;if(h!==null)for(var m=0;m<h.length;m++){var w=h[m];try{var P=o,D=a,O=D;e:for(;O!==null;){switch(O.tag){case 5:di=O.stateNode,qn=!1;break e;case 3:di=O.stateNode.containerInfo,qn=!0;break e;case 4:di=O.stateNode.containerInfo,qn=!0;break e}O=O.return}if(di===null)throw Error(i(160));Xm(P,D,w),di=null,qn=!1;var B=w.alternate;B!==null&&(B.return=null),w.return=null}catch(ee){Ut(w,a,ee)}}if(a.subtreeFlags&12854)for(a=a.child;a!==null;)ev(a,o),a=a.sibling}function ev(o,a){var h=o.alternate,m=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Yn(a,o),Ss(o),m&4){try{Za(3,o,o.return),Lc(3,o)}catch(ke){Ut(o,o.return,ke)}try{Za(5,o,o.return)}catch(ke){Ut(o,o.return,ke)}}break;case 1:Yn(a,o),Ss(o),m&512&&h!==null&&Ul(h,h.return);break;case 5:if(Yn(a,o),Ss(o),m&512&&h!==null&&Ul(h,h.return),o.flags&32){var w=o.stateNode;try{ci(w,"")}catch(ke){Ut(o,o.return,ke)}}if(m&4&&(w=o.stateNode,w!=null)){var P=o.memoizedProps,D=h!==null?h.memoizedProps:P,O=o.type,B=o.updateQueue;if(o.updateQueue=null,B!==null)try{O==="input"&&P.type==="radio"&&P.name!=null&&Qt(w,P),mn(O,D);var ee=mn(O,P);for(D=0;D<B.length;D+=2){var me=B[D],Ce=B[D+1];me==="style"?wo(w,Ce):me==="dangerouslySetInnerHTML"?ll(w,Ce):me==="children"?ci(w,Ce):I(w,me,Ce,ee)}switch(O){case"input":ui(w,P);break;case"textarea":rs(w,P);break;case"select":var pe=w._wrapperState.wasMultiple;w._wrapperState.wasMultiple=!!P.multiple;var _e=P.value;_e!=null?kt(w,!!P.multiple,_e,!1):pe!==!!P.multiple&&(P.defaultValue!=null?kt(w,!!P.multiple,P.defaultValue,!0):kt(w,!!P.multiple,P.multiple?[]:"",!1))}w[Ho]=P}catch(ke){Ut(o,o.return,ke)}}break;case 6:if(Yn(a,o),Ss(o),m&4){if(o.stateNode===null)throw Error(i(162));w=o.stateNode,P=o.memoizedProps;try{w.nodeValue=P}catch(ke){Ut(o,o.return,ke)}}break;case 3:if(Yn(a,o),Ss(o),m&4&&h!==null&&h.memoizedState.isDehydrated)try{sn(a.containerInfo)}catch(ke){Ut(o,o.return,ke)}break;case 4:Yn(a,o),Ss(o);break;case 13:Yn(a,o),Ss(o),w=o.child,w.flags&8192&&(P=w.memoizedState!==null,w.stateNode.isHidden=P,!P||w.alternate!==null&&w.alternate.memoizedState!==null||(ip=Ft())),m&4&&Jm(o);break;case 22:if(me=h!==null&&h.memoizedState!==null,o.mode&1?(Pi=(ee=Pi)||me,Yn(a,o),Pi=ee):Yn(a,o),Ss(o),m&8192){if(ee=o.memoizedState!==null,(o.stateNode.isHidden=ee)&&!me&&o.mode&1)for(Le=o,me=o.child;me!==null;){for(Ce=Le=me;Le!==null;){switch(pe=Le,_e=pe.child,pe.tag){case 0:case 11:case 14:case 15:Za(4,pe,pe.return);break;case 1:Ul(pe,pe.return);var Ae=pe.stateNode;if(typeof Ae.componentWillUnmount=="function"){m=pe,h=pe.return;try{a=m,Ae.props=a.memoizedProps,Ae.state=a.memoizedState,Ae.componentWillUnmount()}catch(ke){Ut(m,h,ke)}}break;case 5:Ul(pe,pe.return);break;case 22:if(pe.memoizedState!==null){nv(Ce);continue}}_e!==null?(_e.return=pe,Le=_e):nv(Ce)}me=me.sibling}e:for(me=null,Ce=o;;){if(Ce.tag===5){if(me===null){me=Ce;try{w=Ce.stateNode,ee?(P=w.style,typeof P.setProperty=="function"?P.setProperty("display","none","important"):P.display="none"):(O=Ce.stateNode,B=Ce.memoizedProps.style,D=B!=null&&B.hasOwnProperty("display")?B.display:null,O.style.display=Co("display",D))}catch(ke){Ut(o,o.return,ke)}}}else if(Ce.tag===6){if(me===null)try{Ce.stateNode.nodeValue=ee?"":Ce.memoizedProps}catch(ke){Ut(o,o.return,ke)}}else if((Ce.tag!==22&&Ce.tag!==23||Ce.memoizedState===null||Ce===o)&&Ce.child!==null){Ce.child.return=Ce,Ce=Ce.child;continue}if(Ce===o)break e;for(;Ce.sibling===null;){if(Ce.return===null||Ce.return===o)break e;me===Ce&&(me=null),Ce=Ce.return}me===Ce&&(me=null),Ce.sibling.return=Ce.return,Ce=Ce.sibling}}break;case 19:Yn(a,o),Ss(o),m&4&&Jm(o);break;case 21:break;default:Yn(a,o),Ss(o)}}function Ss(o){var a=o.flags;if(a&2){try{e:{for(var h=o.return;h!==null;){if(Ym(h)){var m=h;break e}h=h.return}throw Error(i(160))}switch(m.tag){case 5:var w=m.stateNode;m.flags&32&&(ci(w,""),m.flags&=-33);var P=Qm(o);Jh(o,P,w);break;case 3:case 4:var D=m.stateNode.containerInfo,O=Qm(o);Xh(o,O,D);break;default:throw Error(i(161))}}catch(B){Ut(o,o.return,B)}o.flags&=-3}a&4096&&(o.flags&=-4097)}function CR(o,a,h){Le=o,tv(o)}function tv(o,a,h){for(var m=(o.mode&1)!==0;Le!==null;){var w=Le,P=w.child;if(w.tag===22&&m){var D=w.memoizedState!==null||_c;if(!D){var O=w.alternate,B=O!==null&&O.memoizedState!==null||Pi;O=_c;var ee=Pi;if(_c=D,(Pi=B)&&!ee)for(Le=w;Le!==null;)D=Le,B=D.child,D.tag===22&&D.memoizedState!==null?sv(w):B!==null?(B.return=D,Le=B):sv(w);for(;P!==null;)Le=P,tv(P),P=P.sibling;Le=w,_c=O,Pi=ee}iv(o)}else w.subtreeFlags&8772&&P!==null?(P.return=w,Le=P):iv(o)}}function iv(o){for(;Le!==null;){var a=Le;if(a.flags&8772){var h=a.alternate;try{if(a.flags&8772)switch(a.tag){case 0:case 11:case 15:Pi||Lc(5,a);break;case 1:var m=a.stateNode;if(a.flags&4&&!Pi)if(h===null)m.componentDidMount();else{var w=a.elementType===a.type?h.memoizedProps:Zn(a.type,h.memoizedProps);m.componentDidUpdate(w,h.memoizedState,m.__reactInternalSnapshotBeforeUpdate)}var P=a.updateQueue;P!==null&&nm(a,P,m);break;case 3:var D=a.updateQueue;if(D!==null){if(h=null,a.child!==null)switch(a.child.tag){case 5:h=a.child.stateNode;break;case 1:h=a.child.stateNode}nm(a,D,h)}break;case 5:var O=a.stateNode;if(h===null&&a.flags&4){h=O;var B=a.memoizedProps;switch(a.type){case"button":case"input":case"select":case"textarea":B.autoFocus&&h.focus();break;case"img":B.src&&(h.src=B.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(a.memoizedState===null){var ee=a.alternate;if(ee!==null){var me=ee.memoizedState;if(me!==null){var Ce=me.dehydrated;Ce!==null&&sn(Ce)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Pi||a.flags&512&&Qh(a)}catch(pe){Ut(a,a.return,pe)}}if(a===o){Le=null;break}if(h=a.sibling,h!==null){h.return=a.return,Le=h;break}Le=a.return}}function nv(o){for(;Le!==null;){var a=Le;if(a===o){Le=null;break}var h=a.sibling;if(h!==null){h.return=a.return,Le=h;break}Le=a.return}}function sv(o){for(;Le!==null;){var a=Le;try{switch(a.tag){case 0:case 11:case 15:var h=a.return;try{Lc(4,a)}catch(B){Ut(a,h,B)}break;case 1:var m=a.stateNode;if(typeof m.componentDidMount=="function"){var w=a.return;try{m.componentDidMount()}catch(B){Ut(a,w,B)}}var P=a.return;try{Qh(a)}catch(B){Ut(a,P,B)}break;case 5:var D=a.return;try{Qh(a)}catch(B){Ut(a,D,B)}}}catch(B){Ut(a,a.return,B)}if(a===o){Le=null;break}var O=a.sibling;if(O!==null){O.return=a.return,Le=O;break}Le=a.return}}var wR=Math.ceil,Ac=H.ReactCurrentDispatcher,ep=H.ReactCurrentOwner,Dn=H.ReactCurrentBatchConfig,ft=0,oi=null,Jt=null,hi=0,dn=0,jl=Vo(0),ni=0,qa=null,Lr=0,Ic=0,tp=0,Ya=null,Ki=null,ip=0,$l=1/0,so=null,kc=!1,np=null,Ko=null,Oc=!1,Zo=null,Nc=0,Qa=0,sp=null,Gc=-1,Hc=0;function _i(){return ft&6?Ft():Gc!==-1?Gc:Gc=Ft()}function qo(o){return o.mode&1?ft&2&&hi!==0?hi&-hi:iR.transition!==null?(Hc===0&&(Hc=Wu()),Hc):(o=dt,o!==0||(o=window.event,o=o===void 0?16:lt(o.type)),o):1}function Qn(o,a,h,m){if(50<Qa)throw Qa=0,sp=null,Error(i(185));tn(o,h,m),(!(ft&2)||o!==oi)&&(o===oi&&(!(ft&2)&&(Ic|=h),ni===4&&Yo(o,hi)),Zi(o,m),h===1&&ft===0&&!(a.mode&1)&&($l=Ft()+500,pc&&zo()))}function Zi(o,a){var h=o.callbackNode;hl(o,a);var m=Dt(o,o===oi?hi:0);if(m===0)h!==null&&Ns(h),o.callbackNode=null,o.callbackPriority=0;else if(a=m&-m,o.callbackPriority!==a){if(h!=null&&Ns(h),a===1)o.tag===0?tR(rv.bind(null,o)):jg(rv.bind(null,o)),wi(function(){!(ft&6)&&zo()}),h=null;else{switch(Fo(m)){case 1:h=gt;break;case 4:h=Zt;break;case 16:h=Hn;break;case 536870912:h=Pt;break;default:h=Hn}h=fv(h,ov.bind(null,o))}o.callbackPriority=a,o.callbackNode=h}}function ov(o,a){if(Gc=-1,Hc=0,ft&6)throw Error(i(327));var h=o.callbackNode;if(Kl()&&o.callbackNode!==h)return null;var m=Dt(o,o===oi?hi:0);if(m===0)return null;if(m&30||m&o.expiredLanes||a)a=Bc(o,m);else{a=m;var w=ft;ft|=2;var P=av();(oi!==o||hi!==a)&&(so=null,$l=Ft()+500,Ir(o,a));do try{RR();break}catch(O){lv(o,O)}while(!0);Rh(),Ac.current=P,ft=w,Jt!==null?a=0:(oi=null,hi=0,a=ni)}if(a!==0){if(a===2&&(w=vi(o),w!==0&&(m=w,a=op(o,w))),a===1)throw h=qa,Ir(o,0),Yo(o,m),Zi(o,Ft()),h;if(a===6)Yo(o,m);else{if(w=o.current.alternate,!(m&30)&&!SR(w)&&(a=Bc(o,m),a===2&&(P=vi(o),P!==0&&(m=P,a=op(o,P))),a===1))throw h=qa,Ir(o,0),Yo(o,m),Zi(o,Ft()),h;switch(o.finishedWork=w,o.finishedLanes=m,a){case 0:case 1:throw Error(i(345));case 2:kr(o,Ki,so);break;case 3:if(Yo(o,m),(m&130023424)===m&&(a=ip+500-Ft(),10<a)){if(Dt(o,0)!==0)break;if(w=o.suspendedLanes,(w&m)!==m){_i(),o.pingedLanes|=o.suspendedLanes&w;break}o.timeoutHandle=ti(kr.bind(null,o,Ki,so),a);break}kr(o,Ki,so);break;case 4:if(Yo(o,m),(m&4194240)===m)break;for(a=o.eventTimes,w=-1;0<m;){var D=31-et(m);P=1<<D,D=a[D],D>w&&(w=D),m&=~P}if(m=w,m=Ft()-m,m=(120>m?120:480>m?480:1080>m?1080:1920>m?1920:3e3>m?3e3:4320>m?4320:1960*wR(m/1960))-m,10<m){o.timeoutHandle=ti(kr.bind(null,o,Ki,so),m);break}kr(o,Ki,so);break;case 5:kr(o,Ki,so);break;default:throw Error(i(329))}}}return Zi(o,Ft()),o.callbackNode===h?ov.bind(null,o):null}function op(o,a){var h=Ya;return o.current.memoizedState.isDehydrated&&(Ir(o,a).flags|=256),o=Bc(o,a),o!==2&&(a=Ki,Ki=h,a!==null&&rp(a)),o}function rp(o){Ki===null?Ki=o:Ki.push.apply(Ki,o)}function SR(o){for(var a=o;;){if(a.flags&16384){var h=a.updateQueue;if(h!==null&&(h=h.stores,h!==null))for(var m=0;m<h.length;m++){var w=h[m],P=w.getSnapshot;w=w.value;try{if(!ln(P(),w))return!1}catch{return!1}}}if(h=a.child,a.subtreeFlags&16384&&h!==null)h.return=a,a=h;else{if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Yo(o,a){for(a&=~tp,a&=~Ic,o.suspendedLanes|=a,o.pingedLanes&=~a,o=o.expirationTimes;0<a;){var h=31-et(a),m=1<<h;o[h]=-1,a&=~m}}function rv(o){if(ft&6)throw Error(i(327));Kl();var a=Dt(o,0);if(!(a&1))return Zi(o,Ft()),null;var h=Bc(o,a);if(o.tag!==0&&h===2){var m=vi(o);m!==0&&(a=m,h=op(o,m))}if(h===1)throw h=qa,Ir(o,0),Yo(o,a),Zi(o,Ft()),h;if(h===6)throw Error(i(345));return o.finishedWork=o.current.alternate,o.finishedLanes=a,kr(o,Ki,so),Zi(o,Ft()),null}function lp(o,a){var h=ft;ft|=1;try{return o(a)}finally{ft=h,ft===0&&($l=Ft()+500,pc&&zo())}}function Ar(o){Zo!==null&&Zo.tag===0&&!(ft&6)&&Kl();var a=ft;ft|=1;var h=Dn.transition,m=dt;try{if(Dn.transition=null,dt=1,o)return o()}finally{dt=m,Dn.transition=h,ft=a,!(ft&6)&&zo()}}function ap(){dn=jl.current,Lt(jl)}function Ir(o,a){o.finishedWork=null,o.finishedLanes=0;var h=o.timeoutHandle;if(h!==-1&&(o.timeoutHandle=-1,Xt(h)),Jt!==null)for(h=Jt.return;h!==null;){var m=h;switch(vh(m),m.tag){case 1:m=m.type.childContextTypes,m!=null&&dc();break;case 3:Wl(),Lt(Ui),Lt(Si),Th();break;case 5:Dh(m);break;case 4:Wl();break;case 13:Lt(Ht);break;case 19:Lt(Ht);break;case 10:Ph(m.type._context);break;case 22:case 23:ap()}h=h.return}if(oi=o,Jt=o=Qo(o.current,null),hi=dn=a,ni=0,qa=null,tp=Ic=Lr=0,Ki=Ya=null,Mr!==null){for(a=0;a<Mr.length;a++)if(h=Mr[a],m=h.interleaved,m!==null){h.interleaved=null;var w=m.next,P=h.pending;if(P!==null){var D=P.next;P.next=w,m.next=D}h.pending=m}Mr=null}return o}function lv(o,a){do{var h=Jt;try{if(Rh(),Pc.current=xc,Fc){for(var m=Bt.memoizedState;m!==null;){var w=m.queue;w!==null&&(w.pending=null),m=m.next}Fc=!1}if(_r=0,si=ii=Bt=null,za=!1,Ua=0,ep.current=null,h===null||h.return===null){ni=1,qa=a,Jt=null;break}e:{var P=o,D=h.return,O=h,B=a;if(a=hi,O.flags|=32768,B!==null&&typeof B=="object"&&typeof B.then=="function"){var ee=B,me=O,Ce=me.tag;if(!(me.mode&1)&&(Ce===0||Ce===11||Ce===15)){var pe=me.alternate;pe?(me.updateQueue=pe.updateQueue,me.memoizedState=pe.memoizedState,me.lanes=pe.lanes):(me.updateQueue=null,me.memoizedState=null)}var _e=Lm(D);if(_e!==null){_e.flags&=-257,Am(_e,D,O,P,a),_e.mode&1&&_m(P,ee,a),a=_e,B=ee;var Ae=a.updateQueue;if(Ae===null){var ke=new Set;ke.add(B),a.updateQueue=ke}else Ae.add(B);break e}else{if(!(a&1)){_m(P,ee,a),up();break e}B=Error(i(426))}}else if(It&&O.mode&1){var qt=Lm(D);if(qt!==null){!(qt.flags&65536)&&(qt.flags|=256),Am(qt,D,O,P,a),Sh(zl(B,O));break e}}P=B=zl(B,O),ni!==4&&(ni=2),Ya===null?Ya=[P]:Ya.push(P),P=D;do{switch(P.tag){case 3:P.flags|=65536,a&=-a,P.lanes|=a;var q=Mm(P,B,a);im(P,q);break e;case 1:O=B;var W=P.type,Y=P.stateNode;if(!(P.flags&128)&&(typeof W.getDerivedStateFromError=="function"||Y!==null&&typeof Y.componentDidCatch=="function"&&(Ko===null||!Ko.has(Y)))){P.flags|=65536,a&=-a,P.lanes|=a;var ye=Tm(P,O,a);im(P,ye);break e}}P=P.return}while(P!==null)}cv(h)}catch(Ne){a=Ne,Jt===h&&h!==null&&(Jt=h=h.return);continue}break}while(!0)}function av(){var o=Ac.current;return Ac.current=xc,o===null?xc:o}function up(){(ni===0||ni===3||ni===2)&&(ni=4),oi===null||!(Lr&268435455)&&!(Ic&268435455)||Yo(oi,hi)}function Bc(o,a){var h=ft;ft|=2;var m=av();(oi!==o||hi!==a)&&(so=null,Ir(o,a));do try{yR();break}catch(w){lv(o,w)}while(!0);if(Rh(),ft=h,Ac.current=m,Jt!==null)throw Error(i(261));return oi=null,hi=0,ni}function yR(){for(;Jt!==null;)uv(Jt)}function RR(){for(;Jt!==null&&!Gs();)uv(Jt)}function uv(o){var a=pv(o.alternate,o,dn);o.memoizedProps=o.pendingProps,a===null?cv(o):Jt=a,ep.current=null}function cv(o){var a=o;do{var h=a.alternate;if(o=a.return,a.flags&32768){if(h=gR(h,a),h!==null){h.flags&=32767,Jt=h;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{ni=6,Jt=null;return}}else if(h=fR(h,a,dn),h!==null){Jt=h;return}if(a=a.sibling,a!==null){Jt=a;return}Jt=a=o}while(a!==null);ni===0&&(ni=5)}function kr(o,a,h){var m=dt,w=Dn.transition;try{Dn.transition=null,dt=1,PR(o,a,h,m)}finally{Dn.transition=w,dt=m}return null}function PR(o,a,h,m){do Kl();while(Zo!==null);if(ft&6)throw Error(i(327));h=o.finishedWork;var w=o.finishedLanes;if(h===null)return null;if(o.finishedWork=null,o.finishedLanes=0,h===o.current)throw Error(i(177));o.callbackNode=null,o.callbackPriority=0;var P=h.lanes|h.childLanes;if(zt(o,P),o===oi&&(Jt=oi=null,hi=0),!(h.subtreeFlags&2064)&&!(h.flags&2064)||Oc||(Oc=!0,fv(Hn,function(){return Kl(),null})),P=(h.flags&15990)!==0,h.subtreeFlags&15990||P){P=Dn.transition,Dn.transition=null;var D=dt;dt=1;var O=ft;ft|=4,ep.current=null,vR(o,h),ev(h,o),yn(We),Cr=!!De,We=De=null,o.current=h,CR(h),Bi(),ft=O,dt=D,Dn.transition=P}else o.current=h;if(Oc&&(Oc=!1,Zo=o,Nc=w),P=o.pendingLanes,P===0&&(Ko=null),Hs(h.stateNode),Zi(o,Ft()),a!==null)for(m=o.onRecoverableError,h=0;h<a.length;h++)w=a[h],m(w.value,{componentStack:w.stack,digest:w.digest});if(kc)throw kc=!1,o=np,np=null,o;return Nc&1&&o.tag!==0&&Kl(),P=o.pendingLanes,P&1?o===sp?Qa++:(Qa=0,sp=o):Qa=0,zo(),null}function Kl(){if(Zo!==null){var o=Fo(Nc),a=Dn.transition,h=dt;try{if(Dn.transition=null,dt=16>o?16:o,Zo===null)var m=!1;else{if(o=Zo,Zo=null,Nc=0,ft&6)throw Error(i(331));var w=ft;for(ft|=4,Le=o.current;Le!==null;){var P=Le,D=P.child;if(Le.flags&16){var O=P.deletions;if(O!==null){for(var B=0;B<O.length;B++){var ee=O[B];for(Le=ee;Le!==null;){var me=Le;switch(me.tag){case 0:case 11:case 15:Za(8,me,P)}var Ce=me.child;if(Ce!==null)Ce.return=me,Le=Ce;else for(;Le!==null;){me=Le;var pe=me.sibling,_e=me.return;if(qm(me),me===ee){Le=null;break}if(pe!==null){pe.return=_e,Le=pe;break}Le=_e}}}var Ae=P.alternate;if(Ae!==null){var ke=Ae.child;if(ke!==null){Ae.child=null;do{var qt=ke.sibling;ke.sibling=null,ke=qt}while(ke!==null)}}Le=P}}if(P.subtreeFlags&2064&&D!==null)D.return=P,Le=D;else e:for(;Le!==null;){if(P=Le,P.flags&2048)switch(P.tag){case 0:case 11:case 15:Za(9,P,P.return)}var q=P.sibling;if(q!==null){q.return=P.return,Le=q;break e}Le=P.return}}var W=o.current;for(Le=W;Le!==null;){D=Le;var Y=D.child;if(D.subtreeFlags&2064&&Y!==null)Y.return=D,Le=Y;else e:for(D=W;Le!==null;){if(O=Le,O.flags&2048)try{switch(O.tag){case 0:case 11:case 15:Lc(9,O)}}catch(Ne){Ut(O,O.return,Ne)}if(O===D){Le=null;break e}var ye=O.sibling;if(ye!==null){ye.return=O.return,Le=ye;break e}Le=O.return}}if(ft=w,zo(),mi&&typeof mi.onPostCommitFiberRoot=="function")try{mi.onPostCommitFiberRoot(Vi,o)}catch{}m=!0}return m}finally{dt=h,Dn.transition=a}}return!1}function dv(o,a,h){a=zl(h,a),a=Mm(o,a,1),o=jo(o,a,1),a=_i(),o!==null&&(tn(o,1,a),Zi(o,a))}function Ut(o,a,h){if(o.tag===3)dv(o,o,h);else for(;a!==null;){if(a.tag===3){dv(a,o,h);break}else if(a.tag===1){var m=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Ko===null||!Ko.has(m))){o=zl(h,o),o=Tm(a,o,1),a=jo(a,o,1),o=_i(),a!==null&&(tn(a,1,o),Zi(a,o));break}}a=a.return}}function FR(o,a,h){var m=o.pingCache;m!==null&&m.delete(a),a=_i(),o.pingedLanes|=o.suspendedLanes&h,oi===o&&(hi&h)===h&&(ni===4||ni===3&&(hi&130023424)===hi&&500>Ft()-ip?Ir(o,0):tp|=h),Zi(o,a)}function hv(o,a){a===0&&(o.mode&1?(a=Ro,Ro<<=1,!(Ro&130023424)&&(Ro=4194304)):a=1);var h=_i();o=to(o,a),o!==null&&(tn(o,a,h),Zi(o,h))}function ER(o){var a=o.memoizedState,h=0;a!==null&&(h=a.retryLane),hv(o,h)}function bR(o,a){var h=0;switch(o.tag){case 13:var m=o.stateNode,w=o.memoizedState;w!==null&&(h=w.retryLane);break;case 19:m=o.stateNode;break;default:throw Error(i(314))}m!==null&&m.delete(a),hv(o,h)}var pv;pv=function(o,a,h){if(o!==null)if(o.memoizedProps!==a.pendingProps||Ui.current)$i=!0;else{if(!(o.lanes&h)&&!(a.flags&128))return $i=!1,pR(o,a,h);$i=!!(o.flags&131072)}else $i=!1,It&&a.flags&1048576&&$g(a,gc,a.index);switch(a.lanes=0,a.tag){case 2:var m=a.type;Tc(o,a),o=a.pendingProps;var w=kl(a,Si.current);Vl(a,h),w=Ah(null,a,m,o,w,h);var P=Ih();return a.flags|=1,typeof w=="object"&&w!==null&&typeof w.render=="function"&&w.$$typeof===void 0?(a.tag=1,a.memoizedState=null,a.updateQueue=null,ji(m)?(P=!0,hc(a)):P=!1,a.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,bh(a),w.updater=Dc,a.stateNode=w,w._reactInternals=a,Bh(a,m,o,h),a=Uh(null,a,m,!0,P,h)):(a.tag=0,It&&P&&mh(a),Ti(null,a,w,h),a=a.child),a;case 16:m=a.elementType;e:{switch(Tc(o,a),o=a.pendingProps,w=m._init,m=w(m._payload),a.type=m,w=a.tag=DR(m),o=Zn(m,o),w){case 0:a=zh(null,a,m,o,h);break e;case 1:a=Hm(null,a,m,o,h);break e;case 11:a=Im(null,a,m,o,h);break e;case 14:a=km(null,a,m,Zn(m.type,o),h);break e}throw Error(i(306,m,""))}return a;case 0:return m=a.type,w=a.pendingProps,w=a.elementType===m?w:Zn(m,w),zh(o,a,m,w,h);case 1:return m=a.type,w=a.pendingProps,w=a.elementType===m?w:Zn(m,w),Hm(o,a,m,w,h);case 3:e:{if(Bm(a),o===null)throw Error(i(387));m=a.pendingProps,P=a.memoizedState,w=P.element,tm(o,a),yc(a,m,null,h);var D=a.memoizedState;if(m=D.element,P.isDehydrated)if(P={element:m,isDehydrated:!1,cache:D.cache,pendingSuspenseBoundaries:D.pendingSuspenseBoundaries,transitions:D.transitions},a.updateQueue.baseState=P,a.memoizedState=P,a.flags&256){w=zl(Error(i(423)),a),a=Vm(o,a,m,h,w);break e}else if(m!==w){w=zl(Error(i(424)),a),a=Vm(o,a,m,h,w);break e}else for(cn=vs(a.stateNode.containerInfo.firstChild),un=a,It=!0,Kn=null,h=Jg(a,null,m,h),a.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(Gl(),m===w){a=no(o,a,h);break e}Ti(o,a,m,h)}a=a.child}return a;case 5:return sm(a),o===null&&wh(a),m=a.type,w=a.pendingProps,P=o!==null?o.memoizedProps:null,D=w.children,nt(m,w)?D=null:P!==null&&nt(m,P)&&(a.flags|=32),Gm(o,a),Ti(o,a,D,h),a.child;case 6:return o===null&&wh(a),null;case 13:return Wm(o,a,h);case 4:return xh(a,a.stateNode.containerInfo),m=a.pendingProps,o===null?a.child=Hl(a,null,m,h):Ti(o,a,m,h),a.child;case 11:return m=a.type,w=a.pendingProps,w=a.elementType===m?w:Zn(m,w),Im(o,a,m,w,h);case 7:return Ti(o,a,a.pendingProps,h),a.child;case 8:return Ti(o,a,a.pendingProps.children,h),a.child;case 12:return Ti(o,a,a.pendingProps.children,h),a.child;case 10:e:{if(m=a.type._context,w=a.pendingProps,P=a.memoizedProps,D=w.value,Mt(Cc,m._currentValue),m._currentValue=D,P!==null)if(ln(P.value,D)){if(P.children===w.children&&!Ui.current){a=no(o,a,h);break e}}else for(P=a.child,P!==null&&(P.return=a);P!==null;){var O=P.dependencies;if(O!==null){D=P.child;for(var B=O.firstContext;B!==null;){if(B.context===m){if(P.tag===1){B=io(-1,h&-h),B.tag=2;var ee=P.updateQueue;if(ee!==null){ee=ee.shared;var me=ee.pending;me===null?B.next=B:(B.next=me.next,me.next=B),ee.pending=B}}P.lanes|=h,B=P.alternate,B!==null&&(B.lanes|=h),Fh(P.return,h,a),O.lanes|=h;break}B=B.next}}else if(P.tag===10)D=P.type===a.type?null:P.child;else if(P.tag===18){if(D=P.return,D===null)throw Error(i(341));D.lanes|=h,O=D.alternate,O!==null&&(O.lanes|=h),Fh(D,h,a),D=P.sibling}else D=P.child;if(D!==null)D.return=P;else for(D=P;D!==null;){if(D===a){D=null;break}if(P=D.sibling,P!==null){P.return=D.return,D=P;break}D=D.return}P=D}Ti(o,a,w.children,h),a=a.child}return a;case 9:return w=a.type,m=a.pendingProps.children,Vl(a,h),w=bn(w),m=m(w),a.flags|=1,Ti(o,a,m,h),a.child;case 14:return m=a.type,w=Zn(m,a.pendingProps),w=Zn(m.type,w),km(o,a,m,w,h);case 15:return Om(o,a,a.type,a.pendingProps,h);case 17:return m=a.type,w=a.pendingProps,w=a.elementType===m?w:Zn(m,w),Tc(o,a),a.tag=1,ji(m)?(o=!0,hc(a)):o=!1,Vl(a,h),xm(a,m,w),Bh(a,m,w,h),Uh(null,a,m,!0,o,h);case 19:return Um(o,a,h);case 22:return Nm(o,a,h)}throw Error(i(156,a.tag))};function fv(o,a){return bi(o,a)}function xR(o,a,h,m){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Mn(o,a,h,m){return new xR(o,a,h,m)}function cp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function DR(o){if(typeof o=="function")return cp(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Re)return 11;if(o===He)return 14}return 2}function Qo(o,a){var h=o.alternate;return h===null?(h=Mn(o.tag,a,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=a,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&14680064,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,a=o.dependencies,h.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h}function Vc(o,a,h,m,w,P){var D=2;if(m=o,typeof o=="function")cp(o)&&(D=1);else if(typeof o=="string")D=5;else e:switch(o){case j:return Or(h.children,w,P,a);case te:D=8,w|=8;break;case le:return o=Mn(12,h,a,w|2),o.elementType=le,o.lanes=P,o;case Be:return o=Mn(13,h,a,w),o.elementType=Be,o.lanes=P,o;case Oe:return o=Mn(19,h,a,w),o.elementType=Oe,o.lanes=P,o;case Te:return Wc(h,w,P,a);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case ve:D=10;break e;case ue:D=9;break e;case Re:D=11;break e;case He:D=14;break e;case be:D=16,m=null;break e}throw Error(i(130,o==null?o:typeof o,""))}return a=Mn(D,h,a,w),a.elementType=o,a.type=m,a.lanes=P,a}function Or(o,a,h,m){return o=Mn(7,o,m,a),o.lanes=h,o}function Wc(o,a,h,m){return o=Mn(22,o,m,a),o.elementType=Te,o.lanes=h,o.stateNode={isHidden:!1},o}function dp(o,a,h){return o=Mn(6,o,null,a),o.lanes=h,o}function hp(o,a,h){return a=Mn(4,o.children!==null?o.children:[],o.key,a),a.lanes=h,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}function MR(o,a,h,m,w){this.tag=a,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Po(0),this.expirationTimes=Po(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Po(0),this.identifierPrefix=m,this.onRecoverableError=w,this.mutableSourceEagerHydrationData=null}function pp(o,a,h,m,w,P,D,O,B){return o=new MR(o,a,h,O,B),a===1?(a=1,P===!0&&(a|=8)):a=0,P=Mn(3,null,null,a),o.current=P,P.stateNode=o,P.memoizedState={element:m,isDehydrated:h,cache:null,transitions:null,pendingSuspenseBoundaries:null},bh(P),o}function TR(o,a,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:z,key:m==null?null:""+m,children:o,containerInfo:a,implementation:h}}function gv(o){if(!o)return Wo;o=o._reactInternals;e:{if(pt(o)!==o||o.tag!==1)throw Error(i(170));var a=o;do{switch(a.tag){case 3:a=a.stateNode.context;break e;case 1:if(ji(a.type)){a=a.stateNode.__reactInternalMemoizedMergedChildContext;break e}}a=a.return}while(a!==null);throw Error(i(171))}if(o.tag===1){var h=o.type;if(ji(h))return zg(o,h,a)}return a}function mv(o,a,h,m,w,P,D,O,B){return o=pp(h,m,!0,o,w,P,D,O,B),o.context=gv(null),h=o.current,m=_i(),w=qo(h),P=io(m,w),P.callback=a??null,jo(h,P,w),o.current.lanes=w,tn(o,w,m),Zi(o,m),o}function zc(o,a,h,m){var w=a.current,P=_i(),D=qo(w);return h=gv(h),a.context===null?a.context=h:a.pendingContext=h,a=io(P,D),a.payload={element:o},m=m===void 0?null:m,m!==null&&(a.callback=m),o=jo(w,a,D),o!==null&&(Qn(o,w,D,P),Sc(o,w,D)),D}function Uc(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function vv(o,a){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<a?h:a}}function fp(o,a){vv(o,a),(o=o.alternate)&&vv(o,a)}function _R(){return null}var Cv=typeof reportError=="function"?reportError:function(o){console.error(o)};function gp(o){this._internalRoot=o}jc.prototype.render=gp.prototype.render=function(o){var a=this._internalRoot;if(a===null)throw Error(i(409));zc(o,a,null,null)},jc.prototype.unmount=gp.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var a=o.containerInfo;Ar(function(){zc(null,o,null,null)}),a[St]=null}};function jc(o){this._internalRoot=o}jc.prototype.unstable_scheduleHydration=function(o){if(o){var a=gl();o={blockedOn:null,target:o,priority:a};for(var h=0;h<ei.length&&a!==0&&a<ei[h].priority;h++);ei.splice(h,0,o),h===0&&ml(o)}};function mp(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function $c(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function wv(){}function LR(o,a,h,m,w){if(w){if(typeof m=="function"){var P=m;m=function(){var ee=Uc(D);P.call(ee)}}var D=mv(a,m,o,0,null,!1,!1,"",wv);return o._reactRootContainer=D,o[St]=D.current,No(o.nodeType===8?o.parentNode:o),Ar(),D}for(;w=o.lastChild;)o.removeChild(w);if(typeof m=="function"){var O=m;m=function(){var ee=Uc(B);O.call(ee)}}var B=pp(o,0,!1,null,null,!1,!1,"",wv);return o._reactRootContainer=B,o[St]=B.current,No(o.nodeType===8?o.parentNode:o),Ar(function(){zc(a,B,h,m)}),B}function Kc(o,a,h,m,w){var P=h._reactRootContainer;if(P){var D=P;if(typeof w=="function"){var O=w;w=function(){var B=Uc(D);O.call(B)}}zc(a,D,o,w)}else D=LR(h,a,o,w,m);return Uc(D)}pl=function(o){switch(o.tag){case 3:var a=o.stateNode;if(a.current.memoizedState.isDehydrated){var h=Je(a.pendingLanes);h!==0&&(Wn(a,h|1),Zi(a,Ft()),!(ft&6)&&($l=Ft()+500,zo()))}break;case 13:Ar(function(){var m=to(o,1);if(m!==null){var w=_i();Qn(m,o,1,w)}}),fp(o,1)}},Bs=function(o){if(o.tag===13){var a=to(o,134217728);if(a!==null){var h=_i();Qn(a,o,134217728,h)}fp(o,134217728)}},fl=function(o){if(o.tag===13){var a=qo(o),h=to(o,a);if(h!==null){var m=_i();Qn(h,o,a,m)}fp(o,a)}},gl=function(){return dt},fr=function(o,a){var h=dt;try{return dt=o,a()}finally{dt=h}},Is=function(o,a,h){switch(a){case"input":if(ui(o,h),a=h.name,h.type==="radio"&&a!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll("input[name="+JSON.stringify(""+a)+'][type="radio"]'),a=0;a<h.length;a++){var m=h[a];if(m!==o&&m.form===o.form){var w=Al(m);if(!w)throw Error(i(90));it(m),ui(m,w)}}}break;case"textarea":rs(o,h);break;case"select":a=h.value,a!=null&&kt(o,!!h.multiple,a,!1)}},cl=lp,V=Ar;var AR={usingClientEntryPoint:!1,Events:[Ys,Qs,Al,Os,ul,lp]},Xa={findFiberByHostInstance:qs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},IR={bundleType:Xa.bundleType,version:Xa.version,rendererPackageName:Xa.rendererPackageName,rendererConfig:Xa.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:H.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=us(o),o===null?null:o.stateNode},findFiberByHostInstance:Xa.findFiberByHostInstance||_R,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Zc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Zc.isDisabled&&Zc.supportsFiber)try{Vi=Zc.inject(IR),mi=Zc}catch{}}return qi.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=AR,qi.createPortal=function(o,a){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mp(a))throw Error(i(200));return TR(o,a,null,h)},qi.createRoot=function(o,a){if(!mp(o))throw Error(i(299));var h=!1,m="",w=Cv;return a!=null&&(a.unstable_strictMode===!0&&(h=!0),a.identifierPrefix!==void 0&&(m=a.identifierPrefix),a.onRecoverableError!==void 0&&(w=a.onRecoverableError)),a=pp(o,1,!1,null,null,h,!1,m,w),o[St]=a.current,No(o.nodeType===8?o.parentNode:o),new gp(a)},qi.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var a=o._reactInternals;if(a===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=us(a),o=o===null?null:o.stateNode,o},qi.flushSync=function(o){return Ar(o)},qi.hydrate=function(o,a,h){if(!$c(a))throw Error(i(200));return Kc(null,o,a,!0,h)},qi.hydrateRoot=function(o,a,h){if(!mp(o))throw Error(i(405));var m=h!=null&&h.hydratedSources||null,w=!1,P="",D=Cv;if(h!=null&&(h.unstable_strictMode===!0&&(w=!0),h.identifierPrefix!==void 0&&(P=h.identifierPrefix),h.onRecoverableError!==void 0&&(D=h.onRecoverableError)),a=mv(a,null,o,1,h??null,w,!1,P,D),o[St]=a.current,No(o),m)for(o=0;o<m.length;o++)h=m[o],w=h._getVersion,w=w(h._source),a.mutableSourceEagerHydrationData==null?a.mutableSourceEagerHydrationData=[h,w]:a.mutableSourceEagerHydrationData.push(h,w);return new jc(a)},qi.render=function(o,a,h){if(!$c(a))throw Error(i(200));return Kc(null,o,a,!1,h)},qi.unmountComponentAtNode=function(o){if(!$c(o))throw Error(i(40));return o._reactRootContainer?(Ar(function(){Kc(null,null,o,!1,function(){o._reactRootContainer=null,o[St]=null})}),!0):!1},qi.unstable_batchedUpdates=lp,qi.unstable_renderSubtreeIntoContainer=function(o,a,h,m){if(!$c(h))throw Error(i(200));if(o==null||o._reactInternals===void 0)throw Error(i(38));return Kc(o,a,h,!1,m)},qi.version="18.3.1-next-f1338f8080-20240426",qi}var xv;function QC(){if(xv)return wp.exports;xv=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),wp.exports=VR(),wp.exports}var Dv;function WR(){if(Dv)return qc;Dv=1;var e=QC();return qc.createRoot=e.createRoot,qc.hydrateRoot=e.hydrateRoot,qc}var zR=WR(),eu={},Mv;function UR(){if(Mv)return eu;Mv=1,Object.defineProperty(eu,"__esModule",{value:!0}),eu.parse=u,eu.serialize=g;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,n=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,r=(()=>{const y=function(){};return y.prototype=Object.create(null),y})();function u(y,E){const b=new r,M=y.length;if(M<2)return b;const x=(E==null?void 0:E.decode)||v;let _=0;do{const k=y.indexOf("=",_);if(k===-1)break;const I=y.indexOf(";",_),H=I===-1?M:I;if(k>H){_=y.lastIndexOf(";",k-1)+1;continue}const A=c(y,_,k),z=p(y,k,A),j=y.slice(A,z);if(b[j]===void 0){let te=c(y,k+1,H),le=p(y,H,te);const ve=x(y.slice(te,le));b[j]=ve}_=H+1}while(_<M);return b}function c(y,E,b){do{const M=y.charCodeAt(E);if(M!==32&&M!==9)return E}while(++E<b);return b}function p(y,E,b){for(;E>b;){const M=y.charCodeAt(--E);if(M!==32&&M!==9)return E+1}return b}function g(y,E,b){const M=(b==null?void 0:b.encode)||encodeURIComponent;if(!e.test(y))throw new TypeError(`argument name is invalid: ${y}`);const x=M(E);if(!t.test(x))throw new TypeError(`argument val is invalid: ${E}`);let _=y+"="+x;if(!b)return _;if(b.maxAge!==void 0){if(!Number.isInteger(b.maxAge))throw new TypeError(`option maxAge is invalid: ${b.maxAge}`);_+="; Max-Age="+b.maxAge}if(b.domain){if(!i.test(b.domain))throw new TypeError(`option domain is invalid: ${b.domain}`);_+="; Domain="+b.domain}if(b.path){if(!n.test(b.path))throw new TypeError(`option path is invalid: ${b.path}`);_+="; Path="+b.path}if(b.expires){if(!S(b.expires)||!Number.isFinite(b.expires.valueOf()))throw new TypeError(`option expires is invalid: ${b.expires}`);_+="; Expires="+b.expires.toUTCString()}if(b.httpOnly&&(_+="; HttpOnly"),b.secure&&(_+="; Secure"),b.partitioned&&(_+="; Partitioned"),b.priority)switch(typeof b.priority=="string"?b.priority.toLowerCase():void 0){case"low":_+="; Priority=Low";break;case"medium":_+="; Priority=Medium";break;case"high":_+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${b.priority}`)}if(b.sameSite)switch(typeof b.sameSite=="string"?b.sameSite.toLowerCase():b.sameSite){case!0:case"strict":_+="; SameSite=Strict";break;case"lax":_+="; SameSite=Lax";break;case"none":_+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${b.sameSite}`)}return _}function v(y){if(y.indexOf("%")===-1)return y;try{return decodeURIComponent(y)}catch{return y}}function S(y){return s.call(y)==="[object Date]"}return eu}UR();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Tv="popstate";function jR(e={}){function t(s,r){let{pathname:u="/",search:c="",hash:p=""}=go(s.location.hash.substring(1));return!u.startsWith("/")&&!u.startsWith(".")&&(u="/"+u),Su("",{pathname:u,search:c,hash:p},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function i(s,r){let u=s.document.querySelector("base"),c="";if(u&&u.getAttribute("href")){let p=s.location.href,g=p.indexOf("#");c=g===-1?p:p.slice(0,g)}return c+"#"+(typeof r=="string"?r:lr(r))}function n(s,r){li(s.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(r)})`)}return KR(t,i,n,e)}function ht(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function li(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function $R(){return Math.random().toString(36).substring(2,10)}function _v(e,t){return{usr:e.state,key:e.key,idx:t}}function Su(e,t,i=null,n){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?go(t):t,state:i,key:t&&t.key||n||$R()}}function lr({pathname:e="/",search:t="",hash:i=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function go(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let n=e.indexOf("?");n>=0&&(t.search=e.substring(n),e=e.substring(0,n)),e&&(t.pathname=e)}return t}function KR(e,t,i,n={}){let{window:s=document.defaultView,v5Compat:r=!1}=n,u=s.history,c="POP",p=null,g=v();g==null&&(g=0,u.replaceState({...u.state,idx:g},""));function v(){return(u.state||{idx:null}).idx}function S(){c="POP";let x=v(),_=x==null?null:x-g;g=x,p&&p({action:c,location:M.location,delta:_})}function y(x,_){c="PUSH";let k=Su(M.location,x,_);i&&i(k,x),g=v()+1;let I=_v(k,g),H=M.createHref(k);try{u.pushState(I,"",H)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;s.location.assign(H)}r&&p&&p({action:c,location:M.location,delta:1})}function E(x,_){c="REPLACE";let k=Su(M.location,x,_);i&&i(k,x),g=v();let I=_v(k,g),H=M.createHref(k);u.replaceState(I,"",H),r&&p&&p({action:c,location:M.location,delta:0})}function b(x){let _=s.location.origin!=="null"?s.location.origin:s.location.href,k=typeof x=="string"?x:lr(x);return k=k.replace(/ $/,"%20"),ht(_,`No window.location.(origin|href) available to create URL for href: ${k}`),new URL(k,_)}let M={get action(){return c},get location(){return e(s,u)},listen(x){if(p)throw new Error("A history only accepts one active listener");return s.addEventListener(Tv,S),p=x,()=>{s.removeEventListener(Tv,S),p=null}},createHref(x){return t(s,x)},createURL:b,encodeLocation(x){let _=b(x);return{pathname:_.pathname,search:_.search,hash:_.hash}},push:y,replace:E,go(x){return u.go(x)}};return M}var ZR=new Set(["lazy","caseSensitive","path","id","index","children"]);function qR(e){return e.index===!0}function md(e,t,i=[],n={}){return e.map((s,r)=>{let u=[...i,String(r)],c=typeof s.id=="string"?s.id:u.join("-");if(ht(s.index!==!0||!s.children,"Cannot specify children on an index route"),ht(!n[c],`Found a route id collision on id "${c}".  Route id's must be globally unique within Data Router usages`),qR(s)){let p={...s,...t(s),id:c};return n[c]=p,p}else{let p={...s,...t(s),id:c,children:void 0};return n[c]=p,s.children&&(p.children=md(s.children,t,u,n)),p}})}function or(e,t,i="/"){return ld(e,t,i,!1)}function ld(e,t,i,n){let s=typeof t=="string"?go(t):t,r=ss(s.pathname||"/",i);if(r==null)return null;let u=XC(e);QR(u);let c=null;for(let p=0;c==null&&p<u.length;++p){let g=aP(r);c=rP(u[p],g,n)}return c}function YR(e,t){let{route:i,pathname:n,params:s}=e;return{id:i.id,pathname:n,params:s,data:t[i.id],handle:i.handle}}function XC(e,t=[],i=[],n=""){let s=(r,u,c)=>{let p={relativePath:c===void 0?r.path||"":c,caseSensitive:r.caseSensitive===!0,childrenIndex:u,route:r};p.relativePath.startsWith("/")&&(ht(p.relativePath.startsWith(n),`Absolute route path "${p.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(n.length));let g=Fs([n,p.relativePath]),v=i.concat(p);r.children&&r.children.length>0&&(ht(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),XC(r.children,t,v,g)),!(r.path==null&&!r.index)&&t.push({path:g,score:sP(g,r.index),routesMeta:v})};return e.forEach((r,u)=>{var c;if(r.path===""||!((c=r.path)!=null&&c.includes("?")))s(r,u);else for(let p of JC(r.path))s(r,u,p)}),t}function JC(e){let t=e.split("/");if(t.length===0)return[];let[i,...n]=t,s=i.endsWith("?"),r=i.replace(/\?$/,"");if(n.length===0)return s?[r,""]:[r];let u=JC(n.join("/")),c=[];return c.push(...u.map(p=>p===""?r:[r,p].join("/"))),s&&c.push(...u),c.map(p=>e.startsWith("/")&&p===""?"/":p)}function QR(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:oP(t.routesMeta.map(n=>n.childrenIndex),i.routesMeta.map(n=>n.childrenIndex)))}var XR=/^:[\w-]+$/,JR=3,eP=2,tP=1,iP=10,nP=-2,Lv=e=>e==="*";function sP(e,t){let i=e.split("/"),n=i.length;return i.some(Lv)&&(n+=nP),t&&(n+=eP),i.filter(s=>!Lv(s)).reduce((s,r)=>s+(XR.test(r)?JR:r===""?tP:iP),n)}function oP(e,t){return e.length===t.length&&e.slice(0,-1).every((n,s)=>n===t[s])?e[e.length-1]-t[t.length-1]:0}function rP(e,t,i=!1){let{routesMeta:n}=e,s={},r="/",u=[];for(let c=0;c<n.length;++c){let p=n[c],g=c===n.length-1,v=r==="/"?t:t.slice(r.length)||"/",S=vd({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},v),y=p.route;if(!S&&g&&i&&!n[n.length-1].route.index&&(S=vd({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!S)return null;Object.assign(s,S.params),u.push({params:s,pathname:Fs([r,S.pathname]),pathnameBase:dP(Fs([r,S.pathnameBase])),route:y}),S.pathnameBase!=="/"&&(r=Fs([r,S.pathnameBase]))}return u}function vd(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,n]=lP(e.path,e.caseSensitive,e.end),s=t.match(i);if(!s)return null;let r=s[0],u=r.replace(/(.)\/+$/,"$1"),c=s.slice(1);return{params:n.reduce((g,{paramName:v,isOptional:S},y)=>{if(v==="*"){let b=c[y]||"";u=r.slice(0,r.length-b.length).replace(/(.)\/+$/,"$1")}const E=c[y];return S&&!E?g[v]=void 0:g[v]=(E||"").replace(/%2F/g,"/"),g},{}),pathname:r,pathnameBase:u,pattern:e}}function lP(e,t=!1,i=!0){li(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let n=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(u,c,p)=>(n.push({paramName:c,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(n.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),n]}function aP(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return li(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function ss(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,n=e.charAt(i);return n&&n!=="/"?null:e.slice(i)||"/"}function uP(e,t="/"){let{pathname:i,search:n="",hash:s=""}=typeof e=="string"?go(e):e;return{pathname:i?i.startsWith("/")?i:cP(i,t):t,search:hP(n),hash:pP(s)}}function cP(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?i.length>1&&i.pop():s!=="."&&i.push(s)}),i.length>1?i.join("/"):"/"}function Rp(e,t,i,n){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function ew(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function kf(e){let t=ew(e);return t.map((i,n)=>n===t.length-1?i.pathname:i.pathnameBase)}function Of(e,t,i,n=!1){let s;typeof e=="string"?s=go(e):(s={...e},ht(!s.pathname||!s.pathname.includes("?"),Rp("?","pathname","search",s)),ht(!s.pathname||!s.pathname.includes("#"),Rp("#","pathname","hash",s)),ht(!s.search||!s.search.includes("#"),Rp("#","search","hash",s)));let r=e===""||s.pathname==="",u=r?"/":s.pathname,c;if(u==null)c=i;else{let S=t.length-1;if(!n&&u.startsWith("..")){let y=u.split("/");for(;y[0]==="..";)y.shift(),S-=1;s.pathname=y.join("/")}c=S>=0?t[S]:"/"}let p=uP(s,c),g=u&&u!=="/"&&u.endsWith("/"),v=(r||u===".")&&i.endsWith("/");return!p.pathname.endsWith("/")&&(g||v)&&(p.pathname+="/"),p}var Fs=e=>e.join("/").replace(/\/\/+/g,"/"),dP=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),hP=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,pP=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Cd=class{constructor(e,t,i,n=!1){this.status=e,this.statusText=t||"",this.internal=n,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function Od(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var tw=["POST","PUT","PATCH","DELETE"],fP=new Set(tw),gP=["GET",...tw],mP=new Set(gP),vP=new Set([301,302,303,307,308]),CP=new Set([307,308]),Pp={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},wP={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},tu={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},Nf=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,SP=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),iw="remix-router-transitions",nw=Symbol("ResetLoaderData");function yP(e){const t=e.window?e.window:typeof window<"u"?window:void 0,i=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";ht(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let n=e.mapRouteProperties||SP,s={},r=md(e.routes,n,void 0,s),u,c=e.basename||"/",p=e.dataStrategy||bP,g=e.patchRoutesOnNavigation,v={...e.future},S=null,y=new Set,E=null,b=null,M=null,x=e.hydrationData!=null,_=or(r,e.history.location,c),k=null;if(_==null&&!g){let V=_n(404,{pathname:e.history.location.pathname}),{matches:$,route:ne}=zv(r);_=$,k={[ne.id]:V}}_&&!e.hydrationData&&ks(_,r,e.history.location.pathname).active&&(_=null);let I;if(_)if(_.some(V=>V.route.lazy))I=!1;else if(!_.some(V=>V.route.loader))I=!0;else{let V=e.hydrationData?e.hydrationData.loaderData:null,$=e.hydrationData?e.hydrationData.errors:null;if($){let ne=_.findIndex(he=>$[he.route.id]!==void 0);I=_.slice(0,ne+1).every(he=>!nf(he.route,V,$))}else I=_.every(ne=>!nf(ne.route,V,$))}else{I=!1,_=[];let V=ks(null,r,e.history.location.pathname);V.active&&V.matches&&(_=V.matches)}let H,A={historyAction:e.history.action,location:e.history.location,matches:_,initialized:I,navigation:Pp,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||k,fetchers:new Map,blockers:new Map},z="POP",j=!1,te,le=!1,ve=new Map,ue=null,Re=!1,Be=!1,Oe=new Set,He=new Map,be=0,Te=-1,U=new Map,Se=new Set,J=new Map,N=new Map,Z=new Set,Pe=new Map,re,fe=null;function we(){if(S=e.history.listen(({action:V,location:$,delta:ne})=>{if(re){re(),re=void 0;return}li(Pe.size===0||ne!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let he=mn({currentLocation:A.location,nextLocation:$,historyAction:V});if(he&&ne!=null){let Me=new Promise(Ie=>{re=Ie});e.history.go(ne*-1),ls(he,{state:"blocked",location:$,proceed(){ls(he,{state:"proceeding",proceed:void 0,reset:void 0,location:$}),Me.then(()=>e.history.go(ne))},reset(){let Ie=new Map(A.blockers);Ie.set(he,tu),xe({blockers:Ie})}});return}return st(V,$)}),i){NP(t,ve);let V=()=>GP(t,ve);t.addEventListener("pagehide",V),ue=()=>t.removeEventListener("pagehide",V)}return A.initialized||st("POP",A.location,{initialHydration:!0}),H}function $e(){S&&S(),ue&&ue(),y.clear(),te&&te.abort(),A.fetchers.forEach((V,$)=>en($)),A.blockers.forEach((V,$)=>hr($))}function Ze(V){return y.add(V),()=>y.delete(V)}function xe(V,$={}){A={...A,...V};let ne=[],he=[];A.fetchers.forEach((Me,Ie)=>{Me.state==="idle"&&(Z.has(Ie)?ne.push(Ie):he.push(Ie))}),Z.forEach(Me=>{!A.fetchers.has(Me)&&!He.has(Me)&&ne.push(Me)}),[...y].forEach(Me=>Me(A,{deletedFetchers:ne,viewTransitionOpts:$.viewTransitionOpts,flushSync:$.flushSync===!0})),ne.forEach(Me=>en(Me)),he.forEach(Me=>A.fetchers.delete(Me))}function qe(V,$,{flushSync:ne}={}){var Fe,Ke;let he=A.actionData!=null&&A.navigation.formMethod!=null&&Xn(A.navigation.formMethod)&&A.navigation.state==="loading"&&((Fe=V.state)==null?void 0:Fe._isRedirect)!==!0,Me;$.actionData?Object.keys($.actionData).length>0?Me=$.actionData:Me=null:he?Me=A.actionData:Me=null;let Ie=$.loaderData?Vv(A.loaderData,$.loaderData,$.matches||[],$.errors):A.loaderData,Ye=A.blockers;Ye.size>0&&(Ye=new Map(Ye),Ye.forEach((tt,Rt)=>Ye.set(Rt,tu)));let Ee=j===!0||A.navigation.formMethod!=null&&Xn(A.navigation.formMethod)&&((Ke=V.state)==null?void 0:Ke._isRedirect)!==!0;u&&(r=u,u=void 0),Re||z==="POP"||(z==="PUSH"?e.history.push(V,V.state):z==="REPLACE"&&e.history.replace(V,V.state));let oe;if(z==="POP"){let tt=ve.get(A.location.pathname);tt&&tt.has(V.pathname)?oe={currentLocation:A.location,nextLocation:V}:ve.has(V.pathname)&&(oe={currentLocation:V,nextLocation:A.location})}else if(le){let tt=ve.get(A.location.pathname);tt?tt.add(V.pathname):(tt=new Set([V.pathname]),ve.set(A.location.pathname,tt)),oe={currentLocation:A.location,nextLocation:V}}xe({...$,actionData:Me,loaderData:Ie,historyAction:z,location:V,initialized:!0,navigation:Pp,revalidation:"idle",restoreScrollPosition:vn(V,$.matches||A.matches),preventScrollReset:Ee,blockers:Ye},{viewTransitionOpts:oe,flushSync:ne===!0}),z="POP",j=!1,le=!1,Re=!1,Be=!1,fe==null||fe.resolve(),fe=null}async function wt(V,$){if(typeof V=="number"){e.history.go(V);return}let ne=tf(A.location,A.matches,c,V,$==null?void 0:$.fromRouteId,$==null?void 0:$.relative),{path:he,submission:Me,error:Ie}=Av(!1,ne,$),Ye=A.location,Ee=Su(A.location,he,$&&$.state);Ee={...Ee,...e.history.encodeLocation(Ee)};let oe=$&&$.replace!=null?$.replace:void 0,Fe="PUSH";oe===!0?Fe="REPLACE":oe===!1||Me!=null&&Xn(Me.formMethod)&&Me.formAction===A.location.pathname+A.location.search&&(Fe="REPLACE");let Ke=$&&"preventScrollReset"in $?$.preventScrollReset===!0:void 0,tt=($&&$.flushSync)===!0,Rt=mn({currentLocation:Ye,nextLocation:Ee,historyAction:Fe});if(Rt){ls(Rt,{state:"blocked",location:Ee,proceed(){ls(Rt,{state:"proceeding",proceed:void 0,reset:void 0,location:Ee}),wt(V,$)},reset(){let Nt=new Map(A.blockers);Nt.set(Rt,tu),xe({blockers:Nt})}});return}await st(Fe,Ee,{submission:Me,pendingError:Ie,preventScrollReset:Ke,replace:$&&$.replace,enableViewTransition:$&&$.viewTransition,flushSync:tt})}function it(){fe||(fe=HP()),rs(),xe({revalidation:"loading"});let V=fe.promise;return A.navigation.state==="submitting"?V:A.navigation.state==="idle"?(st(A.historyAction,A.location,{startUninterruptedRevalidation:!0}),V):(st(z||A.historyAction,A.navigation.location,{overrideNavigation:A.navigation,enableViewTransition:le===!0}),V)}async function st(V,$,ne){te&&te.abort(),te=null,z=V,Re=(ne&&ne.startUninterruptedRevalidation)===!0,Gn(A.location,A.matches),j=(ne&&ne.preventScrollReset)===!0,le=(ne&&ne.enableViewTransition)===!0;let he=u||r,Me=ne&&ne.overrideNavigation,Ie=or(he,$,c),Ye=(ne&&ne.flushSync)===!0,Ee=ks(Ie,he,$.pathname);if(Ee.active&&Ee.matches&&(Ie=Ee.matches),!Ie){let{error:pt,notFoundMatches:ct,route:Tt}=As($.pathname);qe($,{matches:ct,loaderData:{},errors:{[Tt.id]:pt}},{flushSync:Ye});return}if(A.initialized&&!Be&&LP(A.location,$)&&!(ne&&ne.submission&&Xn(ne.submission.formMethod))){qe($,{matches:Ie},{flushSync:Ye});return}te=new AbortController;let oe=Zl(e.history,$,te.signal,ne&&ne.submission),Fe;if(ne&&ne.pendingError)Fe=[Br(Ie).route.id,{type:"error",error:ne.pendingError}];else if(ne&&ne.submission&&Xn(ne.submission.formMethod)){let pt=await yt(oe,$,ne.submission,Ie,Ee.active,{replace:ne.replace,flushSync:Ye});if(pt.shortCircuited)return;if(pt.pendingActionResult){let[ct,Tt]=pt.pendingActionResult;if(hn(Tt)&&Od(Tt.error)&&Tt.error.status===404){te=null,qe($,{matches:pt.matches,loaderData:{},errors:{[ct]:Tt.error}});return}}Ie=pt.matches||Ie,Fe=pt.pendingActionResult,Me=Fp($,ne.submission),Ye=!1,Ee.active=!1,oe=Zl(e.history,oe.url,oe.signal)}let{shortCircuited:Ke,matches:tt,loaderData:Rt,errors:Nt}=await Ve(oe,$,Ie,Ee.active,Me,ne&&ne.submission,ne&&ne.fetcherSubmission,ne&&ne.replace,ne&&ne.initialHydration===!0,Ye,Fe);Ke||(te=null,qe($,{matches:tt||Ie,...Wv(Fe),loaderData:Rt,errors:Nt}))}async function yt(V,$,ne,he,Me,Ie={}){rs();let Ye=kP($,ne);if(xe({navigation:Ye},{flushSync:Ie.flushSync===!0}),Me){let Fe=await Os(he,$.pathname,V.signal);if(Fe.type==="aborted")return{shortCircuited:!0};if(Fe.type==="error"){let Ke=Br(Fe.partialMatches).route.id;return{matches:Fe.partialMatches,pendingActionResult:[Ke,{type:"error",error:Fe.error}]}}else if(Fe.matches)he=Fe.matches;else{let{notFoundMatches:Ke,error:tt,route:Rt}=As($.pathname);return{matches:Ke,pendingActionResult:[Rt.id,{type:"error",error:tt}]}}}let Ee,oe=cu(he,$);if(!oe.route.action&&!oe.route.lazy)Ee={type:"error",error:_n(405,{method:V.method,pathname:$.pathname,routeId:oe.route.id})};else if(Ee=(await fi("action",A,V,[oe],he,null))[oe.route.id],V.signal.aborted)return{shortCircuited:!0};if(Ur(Ee)){let Fe;return Ie&&Ie.replace!=null?Fe=Ie.replace:Fe=Gv(Ee.response.headers.get("Location"),new URL(V.url),c)===A.location.pathname+A.location.search,await kt(V,Ee,!0,{submission:ne,replace:Fe}),{shortCircuited:!0}}if(hn(Ee)){let Fe=Br(he,oe.route.id);return(Ie&&Ie.replace)!==!0&&(z="PUSH"),{matches:he,pendingActionResult:[Fe.route.id,Ee]}}return{matches:he,pendingActionResult:[oe.route.id,Ee]}}async function Ve(V,$,ne,he,Me,Ie,Ye,Ee,oe,Fe,Ke){let tt=Me||Fp($,Ie),Rt=Ie||Ye||jv(tt),Nt=!Re&&!oe;if(he){if(Nt){let Zt=Qt(Ke);xe({navigation:tt,...Zt!==void 0?{actionData:Zt}:{}},{flushSync:Fe})}let gt=await Os(ne,$.pathname,V.signal);if(gt.type==="aborted")return{shortCircuited:!0};if(gt.type==="error"){let Zt=Br(gt.partialMatches).route.id;return{matches:gt.partialMatches,loaderData:{},errors:{[Zt]:gt.error}}}else if(gt.matches)ne=gt.matches;else{let{error:Zt,notFoundMatches:Hn,route:Bn}=As($.pathname);return{matches:Hn,loaderData:{},errors:{[Bn.id]:Zt}}}}let pt=u||r,[ct,Tt]=kv(e.history,A,ne,Rt,$,oe===!0,Be,Oe,Z,J,Se,pt,c,Ke);if(Te=++be,ct.length===0&&Tt.length===0){let gt=al();return qe($,{matches:ne,loaderData:{},errors:Ke&&hn(Ke[1])?{[Ke[0]]:Ke[1].error}:null,...Wv(Ke),...gt?{fetchers:new Map(A.fetchers)}:{}},{flushSync:Fe}),{shortCircuited:!0}}if(Nt){let gt={};if(!he){gt.navigation=tt;let Zt=Qt(Ke);Zt!==void 0&&(gt.actionData=Zt)}Tt.length>0&&(gt.fetchers=ui(Tt)),xe(gt,{flushSync:Fe})}Tt.forEach(gt=>{ci(gt.key),gt.controller&&He.set(gt.key,gt.controller)});let as=()=>Tt.forEach(gt=>ci(gt.key));te&&te.signal.addEventListener("abort",as);let{loaderResults:us,fetcherResults:Hi}=await Gi(A,ne,ct,Tt,V);if(V.signal.aborted)return{shortCircuited:!0};te&&te.signal.removeEventListener("abort",as),Tt.forEach(gt=>He.delete(gt.key));let bi=Yc(us);if(bi)return await kt(V,bi.result,!0,{replace:Ee}),{shortCircuited:!0};if(bi=Yc(Hi),bi)return Se.add(bi.key),await kt(V,bi.result,!0,{replace:Ee}),{shortCircuited:!0};let{loaderData:Ns,errors:Gs}=Bv(A,ne,us,Ke,Tt,Hi);oe&&A.errors&&(Gs={...A.errors,...Gs});let Bi=al(),Ft=Co(Te),So=Bi||Ft||Tt.length>0;return{matches:ne,loaderData:Ns,errors:Gs,...So?{fetchers:new Map(A.fetchers)}:{}}}function Qt(V){if(V&&!hn(V[1]))return{[V[0]]:V[1].data};if(A.actionData)return Object.keys(A.actionData).length===0?null:A.actionData}function ui(V){return V.forEach($=>{let ne=A.fetchers.get($.key),he=iu(void 0,ne?ne.data:void 0);A.fetchers.set($.key,he)}),new Map(A.fetchers)}async function On(V,$,ne,he){ci(V);let Me=(he&&he.flushSync)===!0,Ie=u||r,Ye=tf(A.location,A.matches,c,ne,$,he==null?void 0:he.relative),Ee=or(Ie,Ye,c),oe=ks(Ee,Ie,Ye);if(oe.active&&oe.matches&&(Ee=oe.matches),!Ee){ot(V,$,_n(404,{pathname:Ye}),{flushSync:Me});return}let{path:Fe,submission:Ke,error:tt}=Av(!0,Ye,he);if(tt){ot(V,$,tt,{flushSync:Me});return}let Rt=cu(Ee,Fe),Nt=(he&&he.preventScrollReset)===!0;if(Ke&&Xn(Ke.formMethod)){await Ji(V,$,Fe,Rt,Ee,oe.active,Me,Nt,Ke);return}J.set(V,{routeId:$,path:Fe}),await Kt(V,$,Fe,Rt,Ee,oe.active,Me,Nt,Ke)}async function Ji(V,$,ne,he,Me,Ie,Ye,Ee,oe){rs(),J.delete(V);function Fe(Pt){if(!Pt.route.action&&!Pt.route.lazy){let Vi=_n(405,{method:oe.formMethod,pathname:ne,routeId:$});return ot(V,$,Vi,{flushSync:Ye}),!0}return!1}if(!Ie&&Fe(he))return;let Ke=A.fetchers.get(V);gi(V,OP(oe,Ke),{flushSync:Ye});let tt=new AbortController,Rt=Zl(e.history,ne,tt.signal,oe);if(Ie){let Pt=await Os(Me,ne,Rt.signal);if(Pt.type==="aborted")return;if(Pt.type==="error"){ot(V,$,Pt.error,{flushSync:Ye});return}else if(Pt.matches){if(Me=Pt.matches,he=cu(Me,ne),Fe(he))return}else{ot(V,$,_n(404,{pathname:ne}),{flushSync:Ye});return}}He.set(V,tt);let Nt=be,ct=(await fi("action",A,Rt,[he],Me,V))[he.route.id];if(Rt.signal.aborted){He.get(V)===tt&&He.delete(V);return}if(Z.has(V)){if(Ur(ct)||hn(ct)){gi(V,tr(void 0));return}}else{if(Ur(ct))if(He.delete(V),Te>Nt){gi(V,tr(void 0));return}else return Se.add(V),gi(V,iu(oe)),kt(Rt,ct,!1,{fetcherSubmission:oe,preventScrollReset:Ee});if(hn(ct)){ot(V,$,ct.error);return}}let Tt=A.navigation.location||A.location,as=Zl(e.history,Tt,tt.signal),us=u||r,Hi=A.navigation.state!=="idle"?or(us,A.navigation.location,c):A.matches;ht(Hi,"Didn't find any matches after fetcher action");let bi=++be;U.set(V,bi);let Ns=iu(oe,ct.data);A.fetchers.set(V,Ns);let[Gs,Bi]=kv(e.history,A,Hi,oe,Tt,!1,Be,Oe,Z,J,Se,us,c,[he.route.id,ct]);Bi.filter(Pt=>Pt.key!==V).forEach(Pt=>{let Vi=Pt.key,mi=A.fetchers.get(Vi),Hs=iu(void 0,mi?mi.data:void 0);A.fetchers.set(Vi,Hs),ci(Vi),Pt.controller&&He.set(Vi,Pt.controller)}),xe({fetchers:new Map(A.fetchers)});let Ft=()=>Bi.forEach(Pt=>ci(Pt.key));tt.signal.addEventListener("abort",Ft);let{loaderResults:So,fetcherResults:gt}=await Gi(A,Hi,Gs,Bi,as);if(tt.signal.aborted)return;tt.signal.removeEventListener("abort",Ft),U.delete(V),He.delete(V),Bi.forEach(Pt=>He.delete(Pt.key));let Zt=Yc(So);if(Zt)return kt(as,Zt.result,!1,{preventScrollReset:Ee});if(Zt=Yc(gt),Zt)return Se.add(Zt.key),kt(as,Zt.result,!1,{preventScrollReset:Ee});let{loaderData:Hn,errors:Bn}=Bv(A,Hi,So,void 0,Bi,gt);if(A.fetchers.has(V)){let Pt=tr(ct.data);A.fetchers.set(V,Pt)}Co(bi),A.navigation.state==="loading"&&bi>Te?(ht(z,"Expected pending action"),te&&te.abort(),qe(A.navigation.location,{matches:Hi,loaderData:Hn,errors:Bn,fetchers:new Map(A.fetchers)})):(xe({errors:Bn,loaderData:Vv(A.loaderData,Hn,Hi,Bn),fetchers:new Map(A.fetchers)}),Be=!1)}async function Kt(V,$,ne,he,Me,Ie,Ye,Ee,oe){let Fe=A.fetchers.get(V);gi(V,iu(oe,Fe?Fe.data:void 0),{flushSync:Ye});let Ke=new AbortController,tt=Zl(e.history,ne,Ke.signal);if(Ie){let ct=await Os(Me,ne,tt.signal);if(ct.type==="aborted")return;if(ct.type==="error"){ot(V,$,ct.error,{flushSync:Ye});return}else if(ct.matches)Me=ct.matches,he=cu(Me,ne);else{ot(V,$,_n(404,{pathname:ne}),{flushSync:Ye});return}}He.set(V,Ke);let Rt=be,pt=(await fi("loader",A,tt,[he],Me,V))[he.route.id];if(He.get(V)===Ke&&He.delete(V),!tt.signal.aborted){if(Z.has(V)){gi(V,tr(void 0));return}if(Ur(pt))if(Te>Rt){gi(V,tr(void 0));return}else{Se.add(V),await kt(tt,pt,!1,{preventScrollReset:Ee});return}if(hn(pt)){ot(V,$,pt.error);return}gi(V,tr(pt.data))}}async function kt(V,$,ne,{submission:he,fetcherSubmission:Me,preventScrollReset:Ie,replace:Ye}={}){$.response.headers.has("X-Remix-Revalidate")&&(Be=!0);let Ee=$.response.headers.get("Location");ht(Ee,"Expected a Location header on the redirect Response"),Ee=Gv(Ee,new URL(V.url),c);let oe=Su(A.location,Ee,{_isRedirect:!0});if(i){let pt=!1;if($.response.headers.has("X-Remix-Reload-Document"))pt=!0;else if(Nf.test(Ee)){const ct=e.history.createURL(Ee);pt=ct.origin!==t.location.origin||ss(ct.pathname,c)==null}if(pt){Ye?t.location.replace(Ee):t.location.assign(Ee);return}}te=null;let Fe=Ye===!0||$.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:Ke,formAction:tt,formEncType:Rt}=A.navigation;!he&&!Me&&Ke&&tt&&Rt&&(he=jv(A.navigation));let Nt=he||Me;if(CP.has($.response.status)&&Nt&&Xn(Nt.formMethod))await st(Fe,oe,{submission:{...Nt,formAction:Ee},preventScrollReset:Ie||j,enableViewTransition:ne?le:void 0});else{let pt=Fp(oe,he);await st(Fe,oe,{overrideNavigation:pt,fetcherSubmission:Me,preventScrollReset:Ie||j,enableViewTransition:ne?le:void 0})}}async function fi(V,$,ne,he,Me,Ie){let Ye,Ee={};try{Ye=await xP(p,V,$,ne,he,Me,Ie,s,n)}catch(oe){return he.forEach(Fe=>{Ee[Fe.route.id]={type:"error",error:oe}}),Ee}for(let[oe,Fe]of Object.entries(Ye))if(AP(Fe)){let Ke=Fe.result;Ee[oe]={type:"redirect",response:TP(Ke,ne,oe,Me,c)}}else Ee[oe]=await MP(Fe);return Ee}async function Gi(V,$,ne,he,Me){let Ie=fi("loader",V,Me,ne,$,null),Ye=Promise.all(he.map(async Fe=>{if(Fe.matches&&Fe.match&&Fe.controller){let tt=(await fi("loader",V,Zl(e.history,Fe.path,Fe.controller.signal),[Fe.match],Fe.matches,Fe.key))[Fe.match.route.id];return{[Fe.key]:tt}}else return Promise.resolve({[Fe.key]:{type:"error",error:_n(404,{pathname:Fe.path})}})})),Ee=await Ie,oe=(await Ye).reduce((Fe,Ke)=>Object.assign(Fe,Ke),{});return{loaderResults:Ee,fetcherResults:oe}}function rs(){Be=!0,J.forEach((V,$)=>{He.has($)&&Oe.add($),ci($)})}function gi(V,$,ne={}){A.fetchers.set(V,$),xe({fetchers:new Map(A.fetchers)},{flushSync:(ne&&ne.flushSync)===!0})}function ot(V,$,ne,he={}){let Me=Br(A.matches,$);en(V),xe({errors:{[Me.route.id]:ne},fetchers:new Map(A.fetchers)},{flushSync:(he&&he.flushSync)===!0})}function Ot(V){return N.set(V,(N.get(V)||0)+1),Z.has(V)&&Z.delete(V),A.fetchers.get(V)||wP}function en(V){let $=A.fetchers.get(V);He.has(V)&&!($&&$.state==="loading"&&U.has(V))&&ci(V),J.delete(V),U.delete(V),Se.delete(V),Z.delete(V),Oe.delete(V),A.fetchers.delete(V)}function ll(V){let $=(N.get(V)||0)-1;$<=0?(N.delete(V),Z.add(V)):N.set(V,$),xe({fetchers:new Map(A.fetchers)})}function ci(V){let $=He.get(V);$&&($.abort(),He.delete(V))}function Nn(V){for(let $ of V){let ne=Ot($),he=tr(ne.data);A.fetchers.set($,he)}}function al(){let V=[],$=!1;for(let ne of Se){let he=A.fetchers.get(ne);ht(he,`Expected fetcher: ${ne}`),he.state==="loading"&&(Se.delete(ne),V.push(ne),$=!0)}return Nn(V),$}function Co(V){let $=[];for(let[ne,he]of U)if(he<V){let Me=A.fetchers.get(ne);ht(Me,`Expected fetcher: ${ne}`),Me.state==="loading"&&(ci(ne),U.delete(ne),$.push(ne))}return Nn($),$.length>0}function wo(V,$){let ne=A.blockers.get(V)||tu;return Pe.get(V)!==$&&Pe.set(V,$),ne}function hr(V){A.blockers.delete(V),Pe.delete(V)}function ls(V,$){let ne=A.blockers.get(V)||tu;ht(ne.state==="unblocked"&&$.state==="blocked"||ne.state==="blocked"&&$.state==="blocked"||ne.state==="blocked"&&$.state==="proceeding"||ne.state==="blocked"&&$.state==="unblocked"||ne.state==="proceeding"&&$.state==="unblocked",`Invalid blocker state transition: ${ne.state} -> ${$.state}`);let he=new Map(A.blockers);he.set(V,$),xe({blockers:he})}function mn({currentLocation:V,nextLocation:$,historyAction:ne}){if(Pe.size===0)return;Pe.size>1&&li(!1,"A router only supports one blocker at a time");let he=Array.from(Pe.entries()),[Me,Ie]=he[he.length-1],Ye=A.blockers.get(Me);if(!(Ye&&Ye.state==="proceeding")&&Ie({currentLocation:V,nextLocation:$,historyAction:ne}))return Me}function As(V){let $=_n(404,{pathname:V}),ne=u||r,{matches:he,route:Me}=zv(ne);return{notFoundMatches:he,route:Me,error:$}}function pr(V,$,ne){if(E=V,M=$,b=ne||null,!x&&A.navigation===Pp){x=!0;let he=vn(A.location,A.matches);he!=null&&xe({restoreScrollPosition:he})}return()=>{E=null,M=null,b=null}}function Is(V,$){return b&&b(V,$.map(he=>YR(he,A.loaderData)))||V.key}function Gn(V,$){if(E&&M){let ne=Is(V,$);E[ne]=M()}}function vn(V,$){if(E){let ne=Is(V,$),he=E[ne];if(typeof he=="number")return he}return null}function ks(V,$,ne){if(g)if(V){if(Object.keys(V[0].params).length>0)return{active:!0,matches:ld($,ne,c,!0)}}else return{active:!0,matches:ld($,ne,c,!0)||[]};return{active:!1,matches:null}}async function Os(V,$,ne){if(!g)return{type:"success",matches:V};let he=V;for(;;){let Me=u==null,Ie=u||r,Ye=s;try{await g({path:$,matches:he,patch:(Fe,Ke)=>{ne.aborted||Nv(Fe,Ke,Ie,Ye,n)}})}catch(Fe){return{type:"error",error:Fe,partialMatches:he}}finally{Me&&!ne.aborted&&(r=[...r])}if(ne.aborted)return{type:"aborted"};let Ee=or(Ie,$,c);if(Ee)return{type:"success",matches:Ee};let oe=ld(Ie,$,c,!0);if(!oe||he.length===oe.length&&he.every((Fe,Ke)=>Fe.route.id===oe[Ke].route.id))return{type:"success",matches:null};he=oe}}function ul(V){s={},u=md(V,n,void 0,s)}function cl(V,$){let ne=u==null;Nv(V,$,u||r,s,n),ne&&(r=[...r],xe({}))}return H={get basename(){return c},get future(){return v},get state(){return A},get routes(){return r},get window(){return t},initialize:we,subscribe:Ze,enableScrollRestoration:pr,navigate:wt,fetch:On,revalidate:it,createHref:V=>e.history.createHref(V),encodeLocation:V=>e.history.encodeLocation(V),getFetcher:Ot,deleteFetcher:ll,dispose:$e,getBlocker:wo,deleteBlocker:hr,patchRoutes:cl,_internalFetchControllers:He,_internalSetRoutes:ul},H}function RP(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function tf(e,t,i,n,s,r){let u,c;if(s){u=[];for(let g of t)if(u.push(g),g.route.id===s){c=g;break}}else u=t,c=t[t.length-1];let p=Of(n||".",kf(u),ss(e.pathname,i)||e.pathname,r==="path");if(n==null&&(p.search=e.search,p.hash=e.hash),(n==null||n===""||n===".")&&c){let g=Gf(p.search);if(c.route.index&&!g)p.search=p.search?p.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&g){let v=new URLSearchParams(p.search),S=v.getAll("index");v.delete("index"),S.filter(E=>E).forEach(E=>v.append("index",E));let y=v.toString();p.search=y?`?${y}`:""}}return i!=="/"&&(p.pathname=p.pathname==="/"?i:Fs([i,p.pathname])),lr(p)}function Av(e,t,i){if(!i||!RP(i))return{path:t};if(i.formMethod&&!IP(i.formMethod))return{path:t,error:_n(405,{method:i.formMethod})};let n=()=>({path:t,error:_n(400,{type:"invalid-body"})}),r=(i.formMethod||"get").toUpperCase(),u=ow(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!Xn(r))return n();let S=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((y,[E,b])=>`${y}${E}=${b}
`,""):String(i.body);return{path:t,submission:{formMethod:r,formAction:u,formEncType:i.formEncType,formData:void 0,json:void 0,text:S}}}else if(i.formEncType==="application/json"){if(!Xn(r))return n();try{let S=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:r,formAction:u,formEncType:i.formEncType,formData:void 0,json:S,text:void 0}}}catch{return n()}}}ht(typeof FormData=="function","FormData is not available in this environment");let c,p;if(i.formData)c=sf(i.formData),p=i.formData;else if(i.body instanceof FormData)c=sf(i.body),p=i.body;else if(i.body instanceof URLSearchParams)c=i.body,p=Hv(c);else if(i.body==null)c=new URLSearchParams,p=new FormData;else try{c=new URLSearchParams(i.body),p=Hv(c)}catch{return n()}let g={formMethod:r,formAction:u,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:p,json:void 0,text:void 0};if(Xn(g.formMethod))return{path:t,submission:g};let v=go(t);return e&&v.search&&Gf(v.search)&&c.append("index",""),v.search=`?${c}`,{path:lr(v),submission:g}}function Iv(e,t,i=!1){let n=e.findIndex(s=>s.route.id===t);return n>=0?e.slice(0,i?n+1:n):e}function kv(e,t,i,n,s,r,u,c,p,g,v,S,y,E){let b=E?hn(E[1])?E[1].error:E[1].data:void 0,M=e.createURL(t.location),x=e.createURL(s),_=i;r&&t.errors?_=Iv(i,Object.keys(t.errors)[0],!0):E&&hn(E[1])&&(_=Iv(i,E[0]));let k=E?E[1].statusCode:void 0,I=k&&k>=400,H=_.filter((z,j)=>{let{route:te}=z;if(te.lazy)return!0;if(te.loader==null)return!1;if(r)return nf(te,t.loaderData,t.errors);if(PP(t.loaderData,t.matches[j],z))return!0;let le=t.matches[j],ve=z;return Ov(z,{currentUrl:M,currentParams:le.params,nextUrl:x,nextParams:ve.params,...n,actionResult:b,actionStatus:k,defaultShouldRevalidate:I?!1:u||M.pathname+M.search===x.pathname+x.search||M.search!==x.search||FP(le,ve)})}),A=[];return g.forEach((z,j)=>{if(r||!i.some(Re=>Re.route.id===z.routeId)||p.has(j))return;let te=or(S,z.path,y);if(!te){A.push({key:j,routeId:z.routeId,path:z.path,matches:null,match:null,controller:null});return}let le=t.fetchers.get(j),ve=cu(te,z.path),ue=!1;v.has(j)?ue=!1:c.has(j)?(c.delete(j),ue=!0):le&&le.state!=="idle"&&le.data===void 0?ue=u:ue=Ov(ve,{currentUrl:M,currentParams:t.matches[t.matches.length-1].params,nextUrl:x,nextParams:i[i.length-1].params,...n,actionResult:b,actionStatus:k,defaultShouldRevalidate:I?!1:u}),ue&&A.push({key:j,routeId:z.routeId,path:z.path,matches:te,match:ve,controller:new AbortController})}),[H,A]}function nf(e,t,i){if(e.lazy)return!0;if(!e.loader)return!1;let n=t!=null&&t[e.id]!==void 0,s=i!=null&&i[e.id]!==void 0;return!n&&s?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!n&&!s}function PP(e,t,i){let n=!t||i.route.id!==t.route.id,s=!e.hasOwnProperty(i.route.id);return n||s}function FP(e,t){let i=e.route.path;return e.pathname!==t.pathname||i!=null&&i.endsWith("*")&&e.params["*"]!==t.params["*"]}function Ov(e,t){if(e.route.shouldRevalidate){let i=e.route.shouldRevalidate(t);if(typeof i=="boolean")return i}return t.defaultShouldRevalidate}function Nv(e,t,i,n,s){let r;if(e){let p=n[e];ht(p,`No route found to patch children into: routeId = ${e}`),p.children||(p.children=[]),r=p.children}else r=i;let u=t.filter(p=>!r.some(g=>sw(p,g))),c=md(u,s,[e||"_","patch",String((r==null?void 0:r.length)||"0")],n);r.push(...c)}function sw(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((i,n)=>{var s;return(s=t.children)==null?void 0:s.some(r=>sw(i,r))}):!1}async function EP(e,t,i){if(!e.lazy)return;let n=await e.lazy();if(!e.lazy)return;let s=i[e.id];ht(s,"No route found in manifest");let r={};for(let u in n){let p=s[u]!==void 0&&u!=="hasErrorBoundary";li(!p,`Route "${s.id}" has a static property "${u}" defined but its lazy function is also returning a value for this property. The lazy route property "${u}" will be ignored.`),!p&&!ZR.has(u)&&(r[u]=n[u])}Object.assign(s,r),Object.assign(s,{...t(s),lazy:void 0})}async function bP({matches:e}){let t=e.filter(n=>n.shouldLoad);return(await Promise.all(t.map(n=>n.resolve()))).reduce((n,s,r)=>Object.assign(n,{[t[r].route.id]:s}),{})}async function xP(e,t,i,n,s,r,u,c,p,g){let v=r.map(E=>E.route.lazy?EP(E.route,p,c):void 0),S=r.map((E,b)=>{let M=v[b],x=s.some(k=>k.route.id===E.route.id);return{...E,shouldLoad:x,resolve:async k=>(k&&n.method==="GET"&&(E.route.lazy||E.route.loader)&&(x=!0),x?DP(t,n,E,M,k,g):Promise.resolve({type:"data",result:void 0}))}}),y=await e({matches:S,request:n,params:r[0].params,fetcherKey:u,context:g});try{await Promise.all(v)}catch{}return y}async function DP(e,t,i,n,s,r){let u,c,p=g=>{let v,S=new Promise((b,M)=>v=M);c=()=>v(),t.signal.addEventListener("abort",c);let y=b=>typeof g!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${e}" [routeId: ${i.route.id}]`)):g({request:t,params:i.params,context:r},...b!==void 0?[b]:[]),E=(async()=>{try{return{type:"data",result:await(s?s(M=>y(M)):y())}}catch(b){return{type:"error",result:b}}})();return Promise.race([E,S])};try{let g=i.route[e];if(n)if(g){let v,[S]=await Promise.all([p(g).catch(y=>{v=y}),n]);if(v!==void 0)throw v;u=S}else if(await n,g=i.route[e],g)u=await p(g);else if(e==="action"){let v=new URL(t.url),S=v.pathname+v.search;throw _n(405,{method:t.method,pathname:S,routeId:i.route.id})}else return{type:"data",result:void 0};else if(g)u=await p(g);else{let v=new URL(t.url),S=v.pathname+v.search;throw _n(404,{pathname:S})}}catch(g){return{type:"error",result:g}}finally{c&&t.signal.removeEventListener("abort",c)}return u}async function MP(e){var n,s,r,u;let{result:t,type:i}=e;if(rw(t)){let c;try{let p=t.headers.get("Content-Type");p&&/\bapplication\/json\b/.test(p)?t.body==null?c=null:c=await t.json():c=await t.text()}catch(p){return{type:"error",error:p}}return i==="error"?{type:"error",error:new Cd(t.status,t.statusText,c),statusCode:t.status,headers:t.headers}:{type:"data",data:c,statusCode:t.status,headers:t.headers}}if(i==="error"){if(Uv(t)){if(t.data instanceof Error)return{type:"error",error:t.data,statusCode:(n=t.init)==null?void 0:n.status};t=new Cd(((s=t.init)==null?void 0:s.status)||500,void 0,t.data)}return{type:"error",error:t,statusCode:Od(t)?t.status:void 0}}return Uv(t)?{type:"data",data:t.data,statusCode:(r=t.init)==null?void 0:r.status,headers:(u=t.init)!=null&&u.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function TP(e,t,i,n,s){let r=e.headers.get("Location");if(ht(r,"Redirects returned/thrown from loaders/actions must have a Location header"),!Nf.test(r)){let u=n.slice(0,n.findIndex(c=>c.route.id===i)+1);r=tf(new URL(t.url),u,s,r),e.headers.set("Location",r)}return e}function Gv(e,t,i){if(Nf.test(e)){let n=e,s=n.startsWith("//")?new URL(t.protocol+n):new URL(n),r=ss(s.pathname,i)!=null;if(s.origin===t.origin&&r)return s.pathname+s.search+s.hash}return e}function Zl(e,t,i,n){let s=e.createURL(ow(t)).toString(),r={signal:i};if(n&&Xn(n.formMethod)){let{formMethod:u,formEncType:c}=n;r.method=u.toUpperCase(),c==="application/json"?(r.headers=new Headers({"Content-Type":c}),r.body=JSON.stringify(n.json)):c==="text/plain"?r.body=n.text:c==="application/x-www-form-urlencoded"&&n.formData?r.body=sf(n.formData):r.body=n.formData}return new Request(s,r)}function sf(e){let t=new URLSearchParams;for(let[i,n]of e.entries())t.append(i,typeof n=="string"?n:n.name);return t}function Hv(e){let t=new FormData;for(let[i,n]of e.entries())t.append(i,n);return t}function _P(e,t,i,n=!1,s=!1){let r={},u=null,c,p=!1,g={},v=i&&hn(i[1])?i[1].error:void 0;return e.forEach(S=>{if(!(S.route.id in t))return;let y=S.route.id,E=t[y];if(ht(!Ur(E),"Cannot handle redirect results in processLoaderData"),hn(E)){let b=E.error;if(v!==void 0&&(b=v,v=void 0),u=u||{},s)u[y]=b;else{let M=Br(e,y);u[M.route.id]==null&&(u[M.route.id]=b)}n||(r[y]=nw),p||(p=!0,c=Od(E.error)?E.error.status:500),E.headers&&(g[y]=E.headers)}else r[y]=E.data,E.statusCode&&E.statusCode!==200&&!p&&(c=E.statusCode),E.headers&&(g[y]=E.headers)}),v!==void 0&&i&&(u={[i[0]]:v},r[i[0]]=void 0),{loaderData:r,errors:u,statusCode:c||200,loaderHeaders:g}}function Bv(e,t,i,n,s,r){let{loaderData:u,errors:c}=_P(t,i,n);return s.forEach(p=>{let{key:g,match:v,controller:S}=p,y=r[g];if(ht(y,"Did not find corresponding fetcher result"),!(S&&S.signal.aborted))if(hn(y)){let E=Br(e.matches,v==null?void 0:v.route.id);c&&c[E.route.id]||(c={...c,[E.route.id]:y.error}),e.fetchers.delete(g)}else if(Ur(y))ht(!1,"Unhandled fetcher revalidation redirect");else{let E=tr(y.data);e.fetchers.set(g,E)}}),{loaderData:u,errors:c}}function Vv(e,t,i,n){let s=Object.entries(t).filter(([,r])=>r!==nw).reduce((r,[u,c])=>(r[u]=c,r),{});for(let r of i){let u=r.route.id;if(!t.hasOwnProperty(u)&&e.hasOwnProperty(u)&&r.route.loader&&(s[u]=e[u]),n&&n.hasOwnProperty(u))break}return s}function Wv(e){return e?hn(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Br(e,t){return(t?e.slice(0,e.findIndex(n=>n.route.id===t)+1):[...e]).reverse().find(n=>n.route.hasErrorBoundary===!0)||e[0]}function zv(e){let t=e.length===1?e[0]:e.find(i=>i.index||!i.path||i.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function _n(e,{pathname:t,routeId:i,method:n,type:s,message:r}={}){let u="Unknown Server Error",c="Unknown @remix-run/router error";return e===400?(u="Bad Request",n&&t&&i?c=`You made a ${n} request to "${t}" but did not provide a \`loader\` for route "${i}", so there is no way to handle the request.`:s==="invalid-body"&&(c="Unable to encode submission body")):e===403?(u="Forbidden",c=`Route "${i}" does not match URL "${t}"`):e===404?(u="Not Found",c=`No route matches URL "${t}"`):e===405&&(u="Method Not Allowed",n&&t&&i?c=`You made a ${n.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${i}", so there is no way to handle the request.`:n&&(c=`Invalid request method "${n.toUpperCase()}"`)),new Cd(e||500,u,new Error(c),!0)}function Yc(e){let t=Object.entries(e);for(let i=t.length-1;i>=0;i--){let[n,s]=t[i];if(Ur(s))return{key:n,result:s}}}function ow(e){let t=typeof e=="string"?go(e):e;return lr({...t,hash:""})}function LP(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function AP(e){return rw(e.result)&&vP.has(e.result.status)}function hn(e){return e.type==="error"}function Ur(e){return(e&&e.type)==="redirect"}function Uv(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function rw(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function IP(e){return mP.has(e.toUpperCase())}function Xn(e){return fP.has(e.toUpperCase())}function Gf(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function cu(e,t){let i=typeof t=="string"?go(t).search:t.search;if(e[e.length-1].route.index&&Gf(i||""))return e[e.length-1];let n=ew(e);return n[n.length-1]}function jv(e){let{formMethod:t,formAction:i,formEncType:n,text:s,formData:r,json:u}=e;if(!(!t||!i||!n)){if(s!=null)return{formMethod:t,formAction:i,formEncType:n,formData:void 0,json:void 0,text:s};if(r!=null)return{formMethod:t,formAction:i,formEncType:n,formData:r,json:void 0,text:void 0};if(u!==void 0)return{formMethod:t,formAction:i,formEncType:n,formData:void 0,json:u,text:void 0}}}function Fp(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function kP(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function iu(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function OP(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function tr(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function NP(e,t){try{let i=e.sessionStorage.getItem(iw);if(i){let n=JSON.parse(i);for(let[s,r]of Object.entries(n||{}))r&&Array.isArray(r)&&t.set(s,new Set(r||[]))}}catch{}}function GP(e,t){if(t.size>0){let i={};for(let[n,s]of t)i[n]=[...s];try{e.sessionStorage.setItem(iw,JSON.stringify(i))}catch(n){li(!1,`Failed to save applied view transitions in sessionStorage (${n}).`)}}}function HP(){let e,t,i=new Promise((n,s)=>{e=async r=>{n(r);try{await i}catch{}},t=async r=>{s(r);try{await i}catch{}}});return{promise:i,resolve:e,reject:t}}var tl=R.createContext(null);tl.displayName="DataRouter";var _u=R.createContext(null);_u.displayName="DataRouterState";var Hf=R.createContext({isTransitioning:!1});Hf.displayName="ViewTransition";var lw=R.createContext(new Map);lw.displayName="Fetchers";var BP=R.createContext(null);BP.displayName="Await";var Ds=R.createContext(null);Ds.displayName="Navigation";var Nd=R.createContext(null);Nd.displayName="Location";var Ms=R.createContext({outlet:null,matches:[],isDataRoute:!1});Ms.displayName="Route";var Bf=R.createContext(null);Bf.displayName="RouteError";function VP(e,{relative:t}={}){ht(Lu(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:n}=R.useContext(Ds),{hash:s,pathname:r,search:u}=Au(e,{relative:t}),c=r;return i!=="/"&&(c=r==="/"?i:Fs([i,r])),n.createHref({pathname:c,search:u,hash:s})}function Lu(){return R.useContext(Nd)!=null}function il(){return ht(Lu(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Nd).location}var aw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function uw(e){R.useContext(Ds).static||R.useLayoutEffect(e)}function WP(){let{isDataRoute:e}=R.useContext(Ms);return e?nF():zP()}function zP(){ht(Lu(),"useNavigate() may be used only in the context of a <Router> component.");let e=R.useContext(tl),{basename:t,navigator:i}=R.useContext(Ds),{matches:n}=R.useContext(Ms),{pathname:s}=il(),r=JSON.stringify(kf(n)),u=R.useRef(!1);return uw(()=>{u.current=!0}),R.useCallback((p,g={})=>{if(li(u.current,aw),!u.current)return;if(typeof p=="number"){i.go(p);return}let v=Of(p,JSON.parse(r),s,g.relative==="path");e==null&&t!=="/"&&(v.pathname=v.pathname==="/"?t:Fs([t,v.pathname])),(g.replace?i.replace:i.push)(v,g.state,g)},[t,i,r,s,e])}var UP=R.createContext(null);function jP(e){let t=R.useContext(Ms).outlet;return t&&R.createElement(UP.Provider,{value:e},t)}function Au(e,{relative:t}={}){let{matches:i}=R.useContext(Ms),{pathname:n}=il(),s=JSON.stringify(kf(i));return R.useMemo(()=>Of(e,JSON.parse(s),n,t==="path"),[e,s,n,t])}function $P(e,t,i,n){ht(Lu(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:s}=R.useContext(Ds),{matches:r}=R.useContext(Ms),u=r[r.length-1],c=u?u.params:{},p=u?u.pathname:"/",g=u?u.pathnameBase:"/",v=u&&u.route;{let _=v&&v.path||"";cw(p,!v||_.endsWith("*")||_.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${_}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${_}"> to <Route path="${_==="/"?"*":`${_}/*`}">.`)}let S=il(),y;y=S;let E=y.pathname||"/",b=E;if(g!=="/"){let _=g.replace(/^\//,"").split("/");b="/"+E.replace(/^\//,"").split("/").slice(_.length).join("/")}let M=or(e,{pathname:b});return li(v||M!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),li(M==null||M[M.length-1].route.element!==void 0||M[M.length-1].route.Component!==void 0||M[M.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),QP(M&&M.map(_=>Object.assign({},_,{params:Object.assign({},c,_.params),pathname:Fs([g,s.encodeLocation?s.encodeLocation(_.pathname).pathname:_.pathname]),pathnameBase:_.pathnameBase==="/"?g:Fs([g,s.encodeLocation?s.encodeLocation(_.pathnameBase).pathname:_.pathnameBase])})),r,i,n)}function KP(){let e=iF(),t=Od(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,n="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:n},r={padding:"2px 4px",backgroundColor:n},u=null;return console.error("Error handled by React Router default ErrorBoundary:",e),u=R.createElement(R.Fragment,null,R.createElement("p",null,"💿 Hey developer 👋"),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:r},"ErrorBoundary")," or"," ",R.createElement("code",{style:r},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},t),i?R.createElement("pre",{style:s},i):null,u)}var ZP=R.createElement(KP,null),qP=class extends R.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?R.createElement(Ms.Provider,{value:this.props.routeContext},R.createElement(Bf.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function YP({routeContext:e,match:t,children:i}){let n=R.useContext(tl);return n&&n.static&&n.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=t.route.id),R.createElement(Ms.Provider,{value:e},i)}function QP(e,t=[],i=null,n=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let s=e,r=i==null?void 0:i.errors;if(r!=null){let p=s.findIndex(g=>g.route.id&&(r==null?void 0:r[g.route.id])!==void 0);ht(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),s=s.slice(0,Math.min(s.length,p+1))}let u=!1,c=-1;if(i)for(let p=0;p<s.length;p++){let g=s[p];if((g.route.HydrateFallback||g.route.hydrateFallbackElement)&&(c=p),g.route.id){let{loaderData:v,errors:S}=i,y=g.route.loader&&!v.hasOwnProperty(g.route.id)&&(!S||S[g.route.id]===void 0);if(g.route.lazy||y){u=!0,c>=0?s=s.slice(0,c+1):s=[s[0]];break}}}return s.reduceRight((p,g,v)=>{let S,y=!1,E=null,b=null;i&&(S=r&&g.route.id?r[g.route.id]:void 0,E=g.route.errorElement||ZP,u&&(c<0&&v===0?(cw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),y=!0,b=null):c===v&&(y=!0,b=g.route.hydrateFallbackElement||null)));let M=t.concat(s.slice(0,v+1)),x=()=>{let _;return S?_=E:y?_=b:g.route.Component?_=R.createElement(g.route.Component,null):g.route.element?_=g.route.element:_=p,R.createElement(YP,{match:g,routeContext:{outlet:p,matches:M,isDataRoute:i!=null},children:_})};return i&&(g.route.ErrorBoundary||g.route.errorElement||v===0)?R.createElement(qP,{location:i.location,revalidation:i.revalidation,component:E,error:S,children:x(),routeContext:{outlet:null,matches:M,isDataRoute:!0}}):x()},null)}function Vf(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function XP(e){let t=R.useContext(tl);return ht(t,Vf(e)),t}function JP(e){let t=R.useContext(_u);return ht(t,Vf(e)),t}function eF(e){let t=R.useContext(Ms);return ht(t,Vf(e)),t}function Wf(e){let t=eF(e),i=t.matches[t.matches.length-1];return ht(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function tF(){return Wf("useRouteId")}function iF(){var n;let e=R.useContext(Bf),t=JP("useRouteError"),i=Wf("useRouteError");return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function nF(){let{router:e}=XP("useNavigate"),t=Wf("useNavigate"),i=R.useRef(!1);return uw(()=>{i.current=!0}),R.useCallback(async(s,r={})=>{li(i.current,aw),i.current&&(typeof s=="number"?e.navigate(s):await e.navigate(s,{fromRouteId:t,...r}))},[e,t])}var $v={};function cw(e,t,i){!t&&!$v[e]&&($v[e]=!0,li(!1,i))}var Kv={};function Zv(e,t){!e&&!Kv[t]&&(Kv[t]=!0,console.warn(t))}function sF(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&li(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:R.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&li(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:R.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&li(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:R.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var oF=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function rF({router:e,flushSync:t}){let[i,n]=R.useState(e.state),[s,r]=R.useState(),[u,c]=R.useState({isTransitioning:!1}),[p,g]=R.useState(),[v,S]=R.useState(),[y,E]=R.useState(),b=R.useRef(new Map),M=R.useCallback((I,{deletedFetchers:H,flushSync:A,viewTransitionOpts:z})=>{I.fetchers.forEach((te,le)=>{te.data!==void 0&&b.current.set(le,te.data)}),H.forEach(te=>b.current.delete(te)),Zv(A===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let j=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(Zv(z==null||j,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!z||!j){t&&A?t(()=>n(I)):R.startTransition(()=>n(I));return}if(t&&A){t(()=>{v&&(p&&p.resolve(),v.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:z.currentLocation,nextLocation:z.nextLocation})});let te=e.window.document.startViewTransition(()=>{t(()=>n(I))});te.finished.finally(()=>{t(()=>{g(void 0),S(void 0),r(void 0),c({isTransitioning:!1})})}),t(()=>S(te));return}v?(p&&p.resolve(),v.skipTransition(),E({state:I,currentLocation:z.currentLocation,nextLocation:z.nextLocation})):(r(I),c({isTransitioning:!0,flushSync:!1,currentLocation:z.currentLocation,nextLocation:z.nextLocation}))},[e.window,t,v,p]);R.useLayoutEffect(()=>e.subscribe(M),[e,M]),R.useEffect(()=>{u.isTransitioning&&!u.flushSync&&g(new oF)},[u]),R.useEffect(()=>{if(p&&s&&e.window){let I=s,H=p.promise,A=e.window.document.startViewTransition(async()=>{R.startTransition(()=>n(I)),await H});A.finished.finally(()=>{g(void 0),S(void 0),r(void 0),c({isTransitioning:!1})}),S(A)}},[s,p,e.window]),R.useEffect(()=>{p&&s&&i.location.key===s.location.key&&p.resolve()},[p,v,i.location,s]),R.useEffect(()=>{!u.isTransitioning&&y&&(r(y.state),c({isTransitioning:!0,flushSync:!1,currentLocation:y.currentLocation,nextLocation:y.nextLocation}),E(void 0))},[u.isTransitioning,y]);let x=R.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:I=>e.navigate(I),push:(I,H,A)=>e.navigate(I,{state:H,preventScrollReset:A==null?void 0:A.preventScrollReset}),replace:(I,H,A)=>e.navigate(I,{replace:!0,state:H,preventScrollReset:A==null?void 0:A.preventScrollReset})}),[e]),_=e.basename||"/",k=R.useMemo(()=>({router:e,navigator:x,static:!1,basename:_}),[e,x,_]);return R.createElement(R.Fragment,null,R.createElement(tl.Provider,{value:k},R.createElement(_u.Provider,{value:i},R.createElement(lw.Provider,{value:b.current},R.createElement(Hf.Provider,{value:u},R.createElement(cF,{basename:_,location:i.location,navigationType:i.historyAction,navigator:x},R.createElement(lF,{routes:e.routes,future:e.future,state:i})))))),null)}var lF=R.memo(aF);function aF({routes:e,future:t,state:i}){return $P(e,void 0,i,t)}function uF(e){return jP(e.context)}function cF({basename:e="/",children:t=null,location:i,navigationType:n="POP",navigator:s,static:r=!1}){ht(!Lu(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let u=e.replace(/^\/*/,"/"),c=R.useMemo(()=>({basename:u,navigator:s,static:r,future:{}}),[u,s,r]);typeof i=="string"&&(i=go(i));let{pathname:p="/",search:g="",hash:v="",state:S=null,key:y="default"}=i,E=R.useMemo(()=>{let b=ss(p,u);return b==null?null:{location:{pathname:b,search:g,hash:v,state:S,key:y},navigationType:n}},[u,p,g,v,S,y,n]);return li(E!=null,`<Router basename="${u}"> is not able to match the URL "${p}${g}${v}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:R.createElement(Ds.Provider,{value:c},R.createElement(Nd.Provider,{children:t,value:E}))}var ad="get",ud="application/x-www-form-urlencoded";function Gd(e){return e!=null&&typeof e.tagName=="string"}function dF(e){return Gd(e)&&e.tagName.toLowerCase()==="button"}function hF(e){return Gd(e)&&e.tagName.toLowerCase()==="form"}function pF(e){return Gd(e)&&e.tagName.toLowerCase()==="input"}function fF(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function gF(e,t){return e.button===0&&(!t||t==="_self")&&!fF(e)}var Qc=null;function mF(){if(Qc===null)try{new FormData(document.createElement("form"),0),Qc=!1}catch{Qc=!0}return Qc}var vF=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Ep(e){return e!=null&&!vF.has(e)?(li(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${ud}"`),null):e}function CF(e,t){let i,n,s,r,u;if(hF(e)){let c=e.getAttribute("action");n=c?ss(c,t):null,i=e.getAttribute("method")||ad,s=Ep(e.getAttribute("enctype"))||ud,r=new FormData(e)}else if(dF(e)||pF(e)&&(e.type==="submit"||e.type==="image")){let c=e.form;if(c==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||c.getAttribute("action");if(n=p?ss(p,t):null,i=e.getAttribute("formmethod")||c.getAttribute("method")||ad,s=Ep(e.getAttribute("formenctype"))||Ep(c.getAttribute("enctype"))||ud,r=new FormData(c,e),!mF()){let{name:g,type:v,value:S}=e;if(v==="image"){let y=g?`${g}.`:"";r.append(`${y}x`,"0"),r.append(`${y}y`,"0")}else g&&r.append(g,S)}}else{if(Gd(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=ad,n=null,s=ud,u=e}return r&&s==="text/plain"&&(u=r,r=void 0),{action:n,method:i.toLowerCase(),encType:s,formData:r,body:u}}function zf(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function wF(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function SF(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function yF(e,t,i){let n=await Promise.all(e.map(async s=>{let r=t.routes[s.route.id];if(r){let u=await wF(r,i);return u.links?u.links():[]}return[]}));return EF(n.flat(1).filter(SF).filter(s=>s.rel==="stylesheet"||s.rel==="preload").map(s=>s.rel==="stylesheet"?{...s,rel:"prefetch",as:"style"}:{...s,rel:"prefetch"}))}function qv(e,t,i,n,s,r){let u=(p,g)=>i[g]?p.route.id!==i[g].route.id:!0,c=(p,g)=>{var v;return i[g].pathname!==p.pathname||((v=i[g].route.path)==null?void 0:v.endsWith("*"))&&i[g].params["*"]!==p.params["*"]};return r==="assets"?t.filter((p,g)=>u(p,g)||c(p,g)):r==="data"?t.filter((p,g)=>{var S;let v=n.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(u(p,g)||c(p,g))return!0;if(p.route.shouldRevalidate){let y=p.route.shouldRevalidate({currentUrl:new URL(s.pathname+s.search+s.hash,window.origin),currentParams:((S=i[0])==null?void 0:S.params)||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof y=="boolean")return y}return!0}):[]}function RF(e,t){return PF(e.map(i=>{let n=t.routes[i.route.id];if(!n)return[];let s=[n.module];return n.imports&&(s=s.concat(n.imports)),s}).flat(1))}function PF(e){return[...new Set(e)]}function FF(e){let t={},i=Object.keys(e).sort();for(let n of i)t[n]=e[n];return t}function EF(e,t){let i=new Set;return new Set(t),e.reduce((n,s)=>{let r=JSON.stringify(FF(s));return i.has(r)||(i.add(r),n.push({key:r,link:s})),n},[])}function bF(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function xF(){let e=R.useContext(tl);return zf(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function DF(){let e=R.useContext(_u);return zf(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Uf=R.createContext(void 0);Uf.displayName="FrameworkContext";function dw(){let e=R.useContext(Uf);return zf(e,"You must render this element inside a <HydratedRouter> element"),e}function MF(e,t){let i=R.useContext(Uf),[n,s]=R.useState(!1),[r,u]=R.useState(!1),{onFocus:c,onBlur:p,onMouseEnter:g,onMouseLeave:v,onTouchStart:S}=t,y=R.useRef(null);R.useEffect(()=>{if(e==="render"&&u(!0),e==="viewport"){let M=_=>{_.forEach(k=>{u(k.isIntersecting)})},x=new IntersectionObserver(M,{threshold:.5});return y.current&&x.observe(y.current),()=>{x.disconnect()}}},[e]),R.useEffect(()=>{if(n){let M=setTimeout(()=>{u(!0)},100);return()=>{clearTimeout(M)}}},[n]);let E=()=>{s(!0)},b=()=>{s(!1),u(!1)};return i?e!=="intent"?[r,y,{}]:[r,y,{onFocus:nu(c,E),onBlur:nu(p,b),onMouseEnter:nu(g,E),onMouseLeave:nu(v,b),onTouchStart:nu(S,E)}]:[!1,y,{}]}function nu(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function TF({page:e,...t}){let{router:i}=xF(),n=R.useMemo(()=>or(i.routes,e,i.basename),[i.routes,e,i.basename]);return n?R.createElement(LF,{page:e,matches:n,...t}):null}function _F(e){let{manifest:t,routeModules:i}=dw(),[n,s]=R.useState([]);return R.useEffect(()=>{let r=!1;return yF(e,t,i).then(u=>{r||s(u)}),()=>{r=!0}},[e,t,i]),n}function LF({page:e,matches:t,...i}){let n=il(),{manifest:s,routeModules:r}=dw(),{loaderData:u,matches:c}=DF(),p=R.useMemo(()=>qv(e,t,c,s,n,"data"),[e,t,c,s,n]),g=R.useMemo(()=>qv(e,t,c,s,n,"assets"),[e,t,c,s,n]),v=R.useMemo(()=>{if(e===n.pathname+n.search+n.hash)return[];let E=new Set,b=!1;if(t.forEach(x=>{var k;let _=s.routes[x.route.id];!_||!_.hasLoader||(!p.some(I=>I.route.id===x.route.id)&&x.route.id in u&&((k=r[x.route.id])!=null&&k.shouldRevalidate)||_.hasClientLoader?b=!0:E.add(x.route.id))}),E.size===0)return[];let M=bF(e);return b&&E.size>0&&M.searchParams.set("_routes",t.filter(x=>E.has(x.route.id)).map(x=>x.route.id).join(",")),[M.pathname+M.search]},[u,n,s,p,t,e,r]),S=R.useMemo(()=>RF(g,s),[g,s]),y=_F(g);return R.createElement(R.Fragment,null,v.map(E=>R.createElement("link",{key:E,rel:"prefetch",as:"fetch",href:E,...i})),S.map(E=>R.createElement("link",{key:E,rel:"modulepreload",href:E,...i})),y.map(({key:E,link:b})=>R.createElement("link",{key:E,...b})))}function AF(...e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var hw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{hw&&(window.__reactRouterVersion="7.1.3")}catch{}function IF(e,t){return yP({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:jR({window:t==null?void 0:t.window}),hydrationData:kF(),routes:e,mapRouteProperties:sF,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function kF(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:OF(e.errors)}),e}function OF(e){if(!e)return null;let t=Object.entries(e),i={};for(let[n,s]of t)if(s&&s.__type==="RouteErrorResponse")i[n]=new Cd(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let r=window[s.__subType];if(typeof r=="function")try{let u=new r(s.message);u.stack="",i[n]=u}catch{}}if(i[n]==null){let r=new Error(s.message);r.stack="",i[n]=r}}else i[n]=s;return i}var pw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,wd=R.forwardRef(function({onClick:t,discover:i="render",prefetch:n="none",relative:s,reloadDocument:r,replace:u,state:c,target:p,to:g,preventScrollReset:v,viewTransition:S,...y},E){let{basename:b}=R.useContext(Ds),M=typeof g=="string"&&pw.test(g),x,_=!1;if(typeof g=="string"&&M&&(x=g,hw))try{let le=new URL(window.location.href),ve=g.startsWith("//")?new URL(le.protocol+g):new URL(g),ue=ss(ve.pathname,b);ve.origin===le.origin&&ue!=null?g=ue+ve.search+ve.hash:_=!0}catch{li(!1,`<Link to="${g}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let k=VP(g,{relative:s}),[I,H,A]=MF(n,y),z=BF(g,{replace:u,state:c,target:p,preventScrollReset:v,relative:s,viewTransition:S});function j(le){t&&t(le),le.defaultPrevented||z(le)}let te=R.createElement("a",{...y,...A,href:x||k,onClick:_||r?t:j,ref:AF(E,H),target:p,"data-discover":!M&&i==="render"?"true":void 0});return I&&!M?R.createElement(R.Fragment,null,te,R.createElement(TF,{page:k})):te});wd.displayName="Link";var NF=R.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:n="",end:s=!1,style:r,to:u,viewTransition:c,children:p,...g},v){let S=Au(u,{relative:g.relative}),y=il(),E=R.useContext(_u),{navigator:b,basename:M}=R.useContext(Ds),x=E!=null&&jF(S)&&c===!0,_=b.encodeLocation?b.encodeLocation(S).pathname:S.pathname,k=y.pathname,I=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;i||(k=k.toLowerCase(),I=I?I.toLowerCase():null,_=_.toLowerCase()),I&&M&&(I=ss(I,M)||I);const H=_!=="/"&&_.endsWith("/")?_.length-1:_.length;let A=k===_||!s&&k.startsWith(_)&&k.charAt(H)==="/",z=I!=null&&(I===_||!s&&I.startsWith(_)&&I.charAt(_.length)==="/"),j={isActive:A,isPending:z,isTransitioning:x},te=A?t:void 0,le;typeof n=="function"?le=n(j):le=[n,A?"active":null,z?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let ve=typeof r=="function"?r(j):r;return R.createElement(wd,{...g,"aria-current":te,className:le,ref:v,style:ve,to:u,viewTransition:c},typeof p=="function"?p(j):p)});NF.displayName="NavLink";var GF=R.forwardRef(({discover:e="render",fetcherKey:t,navigate:i,reloadDocument:n,replace:s,state:r,method:u=ad,action:c,onSubmit:p,relative:g,preventScrollReset:v,viewTransition:S,...y},E)=>{let b=zF(),M=UF(c,{relative:g}),x=u.toLowerCase()==="get"?"get":"post",_=typeof c=="string"&&pw.test(c),k=I=>{if(p&&p(I),I.defaultPrevented)return;I.preventDefault();let H=I.nativeEvent.submitter,A=(H==null?void 0:H.getAttribute("formmethod"))||u;b(H||I.currentTarget,{fetcherKey:t,method:A,navigate:i,replace:s,state:r,relative:g,preventScrollReset:v,viewTransition:S})};return R.createElement("form",{ref:E,method:x,action:M,onSubmit:n?p:k,...y,"data-discover":!_&&e==="render"?"true":void 0})});GF.displayName="Form";function HF(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function fw(e){let t=R.useContext(tl);return ht(t,HF(e)),t}function BF(e,{target:t,replace:i,state:n,preventScrollReset:s,relative:r,viewTransition:u}={}){let c=WP(),p=il(),g=Au(e,{relative:r});return R.useCallback(v=>{if(gF(v,t)){v.preventDefault();let S=i!==void 0?i:lr(p)===lr(g);c(e,{replace:S,state:n,preventScrollReset:s,relative:r,viewTransition:u})}},[p,c,g,i,n,t,e,s,r,u])}var VF=0,WF=()=>`__${String(++VF)}__`;function zF(){let{router:e}=fw("useSubmit"),{basename:t}=R.useContext(Ds),i=tF();return R.useCallback(async(n,s={})=>{let{action:r,method:u,encType:c,formData:p,body:g}=CF(n,t);if(s.navigate===!1){let v=s.fetcherKey||WF();await e.fetch(v,i,s.action||r,{preventScrollReset:s.preventScrollReset,formData:p,body:g,formMethod:s.method||u,formEncType:s.encType||c,flushSync:s.flushSync})}else await e.navigate(s.action||r,{preventScrollReset:s.preventScrollReset,formData:p,body:g,formMethod:s.method||u,formEncType:s.encType||c,replace:s.replace,state:s.state,fromRouteId:i,flushSync:s.flushSync,viewTransition:s.viewTransition})},[e,t,i])}function UF(e,{relative:t}={}){let{basename:i}=R.useContext(Ds),n=R.useContext(Ms);ht(n,"useFormAction must be used inside a RouteContext");let[s]=n.matches.slice(-1),r={...Au(e||".",{relative:t})},u=il();if(e==null){r.search=u.search;let c=new URLSearchParams(r.search),p=c.getAll("index");if(p.some(v=>v==="")){c.delete("index"),p.filter(S=>S).forEach(S=>c.append("index",S));let v=c.toString();r.search=v?`?${v}`:""}}return(!e||e===".")&&s.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(r.pathname=r.pathname==="/"?i:Fs([i,r.pathname])),lr(r)}function jF(e,t={}){let i=R.useContext(Hf);ht(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=fw("useViewTransitionState"),s=Au(e,{relative:t.relative});if(!i.isTransitioning)return!1;let r=ss(i.currentLocation.pathname,n)||i.currentLocation.pathname,u=ss(i.nextLocation.pathname,n)||i.nextLocation.pathname;return vd(s.pathname,u)!=null||vd(s.pathname,r)!=null}new TextEncoder;var Iu=QC();const jr=Tu(Iu);/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $F(e){return R.createElement(rF,{flushSync:Iu.flushSync,...e})}var bp={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var Yv;function KF(){return Yv||(Yv=1,function(e){(function(){var t={}.hasOwnProperty;function i(){for(var r="",u=0;u<arguments.length;u++){var c=arguments[u];c&&(r=s(r,n(c)))}return r}function n(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return i.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var u="";for(var c in r)t.call(r,c)&&r[c]&&(u=s(u,c));return u}function s(r,u){return u?r?r+" "+u:r+u:r}e.exports?(i.default=i,e.exports=i):window.classNames=i})()}(bp)),bp.exports}var ZF=KF();const ai=Tu(ZF);function of(){return of=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)({}).hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},of.apply(null,arguments)}function gw(e,t){if(e==null)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;i[n]=e[n]}return i}function Qv(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function qF(e){var t=YF(e,"string");return typeof t=="symbol"?t:String(t)}function YF(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var n=i.call(e,t);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function QF(e,t,i){var n=R.useRef(e!==void 0),s=R.useState(t),r=s[0],u=s[1],c=e!==void 0,p=n.current;return n.current=c,!c&&p&&r!==t&&u(t),[c?e:r,R.useCallback(function(g){for(var v=arguments.length,S=new Array(v>1?v-1:0),y=1;y<v;y++)S[y-1]=arguments[y];i&&i.apply(void 0,[g].concat(S)),u(g)},[i])]}function mw(e,t){return Object.keys(t).reduce(function(i,n){var s,r=i,u=r[Qv(n)],c=r[n],p=gw(r,[Qv(n),n].map(qF)),g=t[n],v=QF(c,u,e[g]),S=v[0],y=v[1];return of({},p,(s={},s[n]=S,s[g]=y,s))},e)}function rf(e,t){return rf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,n){return i.__proto__=n,i},rf(e,t)}function XF(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,rf(e,t)}const JF=["xxl","xl","lg","md","sm","xs"],eE="xs",tE=R.createContext({prefixes:{},breakpoints:JF,minBreakpoint:eE});function Xi(e,t){const{prefixes:i}=R.useContext(tE);return e||i[t]||t}function jf(e){return e&&e.ownerDocument||document}function iE(e){var t=jf(e);return t&&t.defaultView||window}function nE(e,t){return iE(e).getComputedStyle(e,t)}var sE=/([A-Z])/g;function oE(e){return e.replace(sE,"-$1").toLowerCase()}var rE=/^ms-/;function Xc(e){return oE(e).replace(rE,"-ms-")}var lE=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function aE(e){return!!(e&&lE.test(e))}function ao(e,t){var i="",n="";if(typeof t=="string")return e.style.getPropertyValue(Xc(t))||nE(e).getPropertyValue(Xc(t));Object.keys(t).forEach(function(s){var r=t[s];!r&&r!==0?e.style.removeProperty(Xc(s)):aE(s)?n+=s+"("+r+") ":i+=Xc(s)+": "+r+";"}),n&&(i+="transform: "+n+";"),e.style.cssText+=";"+i}var xp={exports:{}},Dp,Xv;function uE(){if(Xv)return Dp;Xv=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Dp=e,Dp}var Mp,Jv;function cE(){if(Jv)return Mp;Jv=1;var e=uE();function t(){}function i(){}return i.resetWarningCache=t,Mp=function(){function n(u,c,p,g,v,S){if(S!==e){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}n.isRequired=n;function s(){return n}var r={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:i,resetWarningCache:t};return r.PropTypes=r,r},Mp}var eC;function dE(){return eC||(eC=1,xp.exports=cE()()),xp.exports}var hE=dE();const Tp=Tu(hE),tC={disabled:!1},vw=ae.createContext(null);var pE=function(t){return t.scrollTop},du="unmounted",nr="exited",es="entering",ro="entered",yu="exiting",mo=function(e){XF(t,e);function t(n,s){var r;r=e.call(this,n,s)||this;var u=s,c=u&&!u.isMounting?n.enter:n.appear,p;return r.appearStatus=null,n.in?c?(p=nr,r.appearStatus=es):p=ro:n.unmountOnExit||n.mountOnEnter?p=du:p=nr,r.state={status:p},r.nextCallback=null,r}t.getDerivedStateFromProps=function(s,r){var u=s.in;return u&&r.status===du?{status:nr}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(s){var r=null;if(s!==this.props){var u=this.state.status;this.props.in?u!==es&&u!==ro&&(r=es):(u===es||u===ro)&&(r=yu)}this.updateStatus(!1,r)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var s=this.props.timeout,r,u,c;return r=u=c=s,s!=null&&typeof s!="number"&&(r=s.exit,u=s.enter,c=s.appear!==void 0?s.appear:u),{exit:r,enter:u,appear:c}},i.updateStatus=function(s,r){if(s===void 0&&(s=!1),r!==null)if(this.cancelNextCallback(),r===es){if(this.props.unmountOnExit||this.props.mountOnEnter){var u=this.props.nodeRef?this.props.nodeRef.current:jr.findDOMNode(this);u&&pE(u)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===nr&&this.setState({status:du})},i.performEnter=function(s){var r=this,u=this.props.enter,c=this.context?this.context.isMounting:s,p=this.props.nodeRef?[c]:[jr.findDOMNode(this),c],g=p[0],v=p[1],S=this.getTimeouts(),y=c?S.appear:S.enter;if(!s&&!u||tC.disabled){this.safeSetState({status:ro},function(){r.props.onEntered(g)});return}this.props.onEnter(g,v),this.safeSetState({status:es},function(){r.props.onEntering(g,v),r.onTransitionEnd(y,function(){r.safeSetState({status:ro},function(){r.props.onEntered(g,v)})})})},i.performExit=function(){var s=this,r=this.props.exit,u=this.getTimeouts(),c=this.props.nodeRef?void 0:jr.findDOMNode(this);if(!r||tC.disabled){this.safeSetState({status:nr},function(){s.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:yu},function(){s.props.onExiting(c),s.onTransitionEnd(u.exit,function(){s.safeSetState({status:nr},function(){s.props.onExited(c)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(s,r){r=this.setNextCallback(r),this.setState(s,r)},i.setNextCallback=function(s){var r=this,u=!0;return this.nextCallback=function(c){u&&(u=!1,r.nextCallback=null,s(c))},this.nextCallback.cancel=function(){u=!1},this.nextCallback},i.onTransitionEnd=function(s,r){this.setNextCallback(r);var u=this.props.nodeRef?this.props.nodeRef.current:jr.findDOMNode(this),c=s==null&&!this.props.addEndListener;if(!u||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var p=this.props.nodeRef?[this.nextCallback]:[u,this.nextCallback],g=p[0],v=p[1];this.props.addEndListener(g,v)}s!=null&&setTimeout(this.nextCallback,s)},i.render=function(){var s=this.state.status;if(s===du)return null;var r=this.props,u=r.children;r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef;var c=gw(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return ae.createElement(vw.Provider,{value:null},typeof u=="function"?u(s,c):ae.cloneElement(ae.Children.only(u),c))},t}(ae.Component);mo.contextType=vw;mo.propTypes={};function ql(){}mo.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ql,onEntering:ql,onEntered:ql,onExit:ql,onExiting:ql,onExited:ql};mo.UNMOUNTED=du;mo.EXITED=nr;mo.ENTERING=es;mo.ENTERED=ro;mo.EXITING=yu;function fE(e){return e.code==="Escape"||e.keyCode===27}function gE(){const e=R.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function Hd(e){if(!e||typeof e=="function")return null;const{major:t}=gE();return t>=19?e.props.ref:e.ref}const Bd=!!(typeof window<"u"&&window.document&&window.document.createElement);var lf=!1,af=!1;try{var _p={get passive(){return lf=!0},get once(){return af=lf=!0}};Bd&&(window.addEventListener("test",_p,_p),window.removeEventListener("test",_p,!0))}catch{}function mE(e,t,i,n){if(n&&typeof n!="boolean"&&!af){var s=n.once,r=n.capture,u=i;!af&&s&&(u=i.__once||function c(p){this.removeEventListener(t,c,r),i.call(this,p)},i.__once=u),e.addEventListener(t,u,lf?n:r)}e.addEventListener(t,i,n)}function vE(e,t,i,n){var s=n&&typeof n!="boolean"?n.capture:n;e.removeEventListener(t,i,s),i.__once&&e.removeEventListener(t,i.__once,s)}function Sd(e,t,i,n){return mE(e,t,i,n),function(){vE(e,t,i,n)}}function CE(e,t,i,n){if(n===void 0&&(n=!0),e){var s=document.createEvent("HTMLEvents");s.initEvent(t,i,n),e.dispatchEvent(s)}}function wE(e){var t=ao(e,"transitionDuration")||"",i=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*i}function SE(e,t,i){i===void 0&&(i=5);var n=!1,s=setTimeout(function(){n||CE(e,"transitionend",!0)},t+i),r=Sd(e,"transitionend",function(){n=!0},{once:!0});return function(){clearTimeout(s),r()}}function yE(e,t,i,n){i==null&&(i=wE(e)||0);var s=SE(e,i,n),r=Sd(e,"transitionend",t);return function(){s(),r()}}function iC(e,t){const i=ao(e,t)||"",n=i.indexOf("ms")===-1?1e3:1;return parseFloat(i)*n}function $f(e,t){const i=iC(e,"transitionDuration"),n=iC(e,"transitionDelay"),s=yE(e,r=>{r.target===e&&(s(),t(r))},i+n)}function su(...e){return e.filter(t=>t!=null).reduce((t,i)=>{if(typeof i!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?i:function(...s){t.apply(this,s),i.apply(this,s)}},null)}function Cw(e){e.offsetHeight}const nC=e=>!e||typeof e=="function"?e:t=>{e.current=t};function RE(e,t){const i=nC(e),n=nC(t);return s=>{i&&i(s),n&&n(s)}}function PE(e,t){return R.useMemo(()=>RE(e,t),[e,t])}function FE(e){return e&&"setState"in e?jr.findDOMNode(e):e??null}const Kf=ae.forwardRef(({onEnter:e,onEntering:t,onEntered:i,onExit:n,onExiting:s,onExited:r,addEndListener:u,children:c,childRef:p,...g},v)=>{const S=R.useRef(null),y=PE(S,p),E=z=>{y(FE(z))},b=z=>j=>{z&&S.current&&z(S.current,j)},M=R.useCallback(b(e),[e]),x=R.useCallback(b(t),[t]),_=R.useCallback(b(i),[i]),k=R.useCallback(b(n),[n]),I=R.useCallback(b(s),[s]),H=R.useCallback(b(r),[r]),A=R.useCallback(b(u),[u]);return de.jsx(mo,{ref:v,...g,onEnter:M,onEntered:_,onEntering:x,onExit:k,onExited:H,onExiting:I,addEndListener:A,nodeRef:S,children:typeof c=="function"?(z,j)=>c(z,{...j,ref:E}):ae.cloneElement(c,{ref:E})})}),EE={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function bE(e,t){const i=`offset${e[0].toUpperCase()}${e.slice(1)}`,n=t[i],s=EE[e];return n+parseInt(ao(t,s[0]),10)+parseInt(ao(t,s[1]),10)}const xE={[nr]:"collapse",[yu]:"collapsing",[es]:"collapsing",[ro]:"collapse show"},DE=ae.forwardRef(({onEnter:e,onEntering:t,onEntered:i,onExit:n,onExiting:s,className:r,children:u,dimension:c="height",in:p=!1,timeout:g=300,mountOnEnter:v=!1,unmountOnExit:S=!1,appear:y=!1,getDimensionValue:E=bE,...b},M)=>{const x=typeof c=="function"?c():c,_=R.useMemo(()=>su(z=>{z.style[x]="0"},e),[x,e]),k=R.useMemo(()=>su(z=>{const j=`scroll${x[0].toUpperCase()}${x.slice(1)}`;z.style[x]=`${z[j]}px`},t),[x,t]),I=R.useMemo(()=>su(z=>{z.style[x]=null},i),[x,i]),H=R.useMemo(()=>su(z=>{z.style[x]=`${E(x,z)}px`,Cw(z)},n),[n,E,x]),A=R.useMemo(()=>su(z=>{z.style[x]=null},s),[x,s]);return de.jsx(Kf,{ref:M,addEndListener:$f,...b,"aria-expanded":b.role?p:null,onEnter:_,onEntering:k,onEntered:I,onExit:H,onExiting:A,childRef:Hd(u),in:p,timeout:g,mountOnEnter:v,unmountOnExit:S,appear:y,children:(z,j)=>ae.cloneElement(u,{...j,className:ai(r,u.props.className,xE[z],x==="width"&&"collapse-horizontal")})})});function ME(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e},[e]),t}function Vd(e){const t=ME(e);return R.useCallback(function(...i){return t.current&&t.current(...i)},[t])}const TE=e=>R.forwardRef((t,i)=>de.jsx("div",{...t,ref:i,className:ai(t.className,e)}));function _E(e){const t=R.useRef(e);return R.useEffect(()=>{t.current=e},[e]),t}function lo(e){const t=_E(e);return R.useCallback(function(...i){return t.current&&t.current(...i)},[t])}function LE(){const e=R.useRef(!0),t=R.useRef(()=>e.current);return R.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function AE(e){const t=R.useRef(null);return R.useEffect(()=>{t.current=e}),t.current}const IE=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",kE=typeof document<"u",sC=kE||IE?R.useLayoutEffect:R.useEffect,OE=["as","disabled"];function NE(e,t){if(e==null)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}function GE(e){return!e||e.trim()==="#"}function ww({tagName:e,disabled:t,href:i,target:n,rel:s,role:r,onClick:u,tabIndex:c=0,type:p}){e||(i!=null||n!=null||s!=null?e="a":e="button");const g={tagName:e};if(e==="button")return[{type:p||"button",disabled:t},g];const v=y=>{if((t||e==="a"&&GE(i))&&y.preventDefault(),t){y.stopPropagation();return}u==null||u(y)},S=y=>{y.key===" "&&(y.preventDefault(),v(y))};return e==="a"&&(i||(i="#"),t&&(i=void 0)),[{role:r??"button",disabled:void 0,tabIndex:t?void 0:c,href:i,target:e==="a"?n:void 0,"aria-disabled":t||void 0,rel:e==="a"?s:void 0,onClick:v,onKeyDown:S},g]}const Sw=R.forwardRef((e,t)=>{let{as:i,disabled:n}=e,s=NE(e,OE);const[r,{tagName:u}]=ww(Object.assign({tagName:i,disabled:n},s));return de.jsx(u,Object.assign({},s,r,{ref:t}))});Sw.displayName="Button";const HE=["onKeyDown"];function BE(e,t){if(e==null)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}function VE(e){return!e||e.trim()==="#"}const yw=R.forwardRef((e,t)=>{let{onKeyDown:i}=e,n=BE(e,HE);const[s]=ww(Object.assign({tagName:"a"},n)),r=lo(u=>{s.onKeyDown(u),i==null||i(u)});return VE(n.href)||n.role==="button"?de.jsx("a",Object.assign({ref:t},n,s,{onKeyDown:r})):de.jsx("a",Object.assign({ref:t},n,{onKeyDown:i}))});yw.displayName="Anchor";const WE={[es]:"show",[ro]:"show"},Rw=R.forwardRef(({className:e,children:t,transitionClasses:i={},onEnter:n,...s},r)=>{const u={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...s},c=R.useCallback((p,g)=>{Cw(p),n==null||n(p,g)},[n]);return de.jsx(Kf,{ref:r,addEndListener:$f,...u,onEnter:c,childRef:Hd(t),children:(p,g)=>R.cloneElement(t,{...g,className:ai("fade",e,t.props.className,WE[p],i[p])})})});Rw.displayName="Fade";const zE={"aria-label":Tp.string,onClick:Tp.func,variant:Tp.oneOf(["white"])},Zf=R.forwardRef(({className:e,variant:t,"aria-label":i="Close",...n},s)=>de.jsx("button",{ref:s,type:"button",className:ai("btn-close",t&&`btn-close-${t}`,e),"aria-label":i,...n}));Zf.displayName="CloseButton";Zf.propTypes=zE;const Pw=R.createContext(null);Pw.displayName="CardHeaderContext";const Fw=R.forwardRef(({bsPrefix:e,fluid:t=!1,as:i="div",className:n,...s},r)=>{const u=Xi(e,"container"),c=typeof t=="string"?`-${t}`:"-fluid";return de.jsx(i,{ref:r,...s,className:ai(n,t?`${u}${c}`:u)})});Fw.displayName="Container";var UE=Function.prototype.bind.call(Function.prototype.call,[].slice);function Nr(e,t){return UE(e.querySelectorAll(t))}function jE(){const[,e]=R.useReducer(t=>t+1,0);return e}function oC(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const yd=R.createContext(null),qf=(e,t=null)=>e!=null?String(e):t||null,Yf=R.createContext(null);Yf.displayName="NavContext";const $E="data-rr-ui-",KE="rrUi";function Wd(e){return`${$E}${e}`}function ZE(e){return`${KE}${e}`}const Ew=R.createContext(Bd?window:void 0);Ew.Provider;function Qf(){return R.useContext(Ew)}const qE=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",YE=typeof document<"u",QE=YE||qE?R.useLayoutEffect:R.useEffect,la=R.createContext(null);la.displayName="NavbarContext";const rC=e=>!e||typeof e=="function"?e:t=>{e.current=t};function XE(e,t){const i=rC(e),n=rC(t);return s=>{i&&i(s),n&&n(s)}}function zd(e,t){return R.useMemo(()=>XE(e,t),[e,t])}const bw=R.createContext(null),JE=["as","active","eventKey"];function eb(e,t){if(e==null)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}function xw({key:e,onClick:t,active:i,id:n,role:s,disabled:r}){const u=R.useContext(yd),c=R.useContext(Yf),p=R.useContext(bw);let g=i;const v={role:s};if(c){!s&&c.role==="tablist"&&(v.role="tab");const S=c.getControllerId(e??null),y=c.getControlledId(e??null);v[Wd("event-key")]=e,v.id=S||n,g=i==null&&e!=null?c.activeKey===e:i,(g||!(p!=null&&p.unmountOnExit)&&!(p!=null&&p.mountOnEnter))&&(v["aria-controls"]=y)}return v.role==="tab"&&(v["aria-selected"]=g,g||(v.tabIndex=-1),r&&(v.tabIndex=-1,v["aria-disabled"]=!0)),v.onClick=lo(S=>{r||(t==null||t(S),e!=null&&u&&!S.isPropagationStopped()&&u(e,S))}),[v,{isActive:g}]}const Dw=R.forwardRef((e,t)=>{let{as:i=Sw,active:n,eventKey:s}=e,r=eb(e,JE);const[u,c]=xw(Object.assign({key:qf(s,r.href),active:n},r));return u[Wd("active")]=c.isActive,de.jsx(i,Object.assign({},r,u,{ref:t}))});Dw.displayName="NavItem";const tb=["as","onSelect","activeKey","role","onKeyDown"];function ib(e,t){if(e==null)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}const lC=()=>{},aC=Wd("event-key"),Mw=R.forwardRef((e,t)=>{let{as:i="div",onSelect:n,activeKey:s,role:r,onKeyDown:u}=e,c=ib(e,tb);const p=jE(),g=R.useRef(!1),v=R.useContext(yd),S=R.useContext(bw);let y,E;S&&(r=r||"tablist",s=S.activeKey,y=S.getControlledId,E=S.getControllerId);const b=R.useRef(null),M=I=>{const H=b.current;if(!H)return null;const A=Nr(H,`[${aC}]:not([aria-disabled=true])`),z=H.querySelector("[aria-selected=true]");if(!z||z!==document.activeElement)return null;const j=A.indexOf(z);if(j===-1)return null;let te=j+I;return te>=A.length&&(te=0),te<0&&(te=A.length-1),A[te]},x=(I,H)=>{I!=null&&(n==null||n(I,H),v==null||v(I,H))},_=I=>{if(u==null||u(I),!S)return;let H;switch(I.key){case"ArrowLeft":case"ArrowUp":H=M(-1);break;case"ArrowRight":case"ArrowDown":H=M(1);break;default:return}H&&(I.preventDefault(),x(H.dataset[ZE("EventKey")]||null,I),g.current=!0,p())};R.useEffect(()=>{if(b.current&&g.current){const I=b.current.querySelector(`[${aC}][aria-selected=true]`);I==null||I.focus()}g.current=!1});const k=zd(t,b);return de.jsx(yd.Provider,{value:x,children:de.jsx(Yf.Provider,{value:{role:r,activeKey:qf(s),getControlledId:y||lC,getControllerId:E||lC},children:de.jsx(i,Object.assign({},c,{onKeyDown:_,ref:k,role:r}))})})});Mw.displayName="Nav";const nb=Object.assign(Mw,{Item:Dw});function Lp(e){e===void 0&&(e=jf());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function sb(e){const t=R.useRef(e);return t.current=e,t}function ob(e){const t=sb(e);R.useEffect(()=>()=>t.current(),[])}function rb(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const uC=Wd("modal-open");class Xf{constructor({ownerDocument:t,handleContainerOverflow:i=!0,isRTL:n=!1}={}){this.handleContainerOverflow=i,this.isRTL=n,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return rb(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const i={overflow:"hidden"},n=this.isRTL?"paddingLeft":"paddingRight",s=this.getElement();t.style={overflow:s.style.overflow,[n]:s.style[n]},t.scrollBarWidth&&(i[n]=`${parseInt(ao(s,n)||"0",10)+t.scrollBarWidth}px`),s.setAttribute(uC,""),ao(s,i)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const i=this.getElement();i.removeAttribute(uC),Object.assign(i.style,t.style)}add(t){let i=this.modals.indexOf(t);return i!==-1||(i=this.modals.length,this.modals.push(t),this.setModalAttributes(t),i!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),i}remove(t){const i=this.modals.indexOf(t);i!==-1&&(this.modals.splice(i,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const Ap=(e,t)=>Bd?e==null?(t||jf()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function lb(e,t){const i=Qf(),[n,s]=R.useState(()=>Ap(e,i==null?void 0:i.document));if(!n){const r=Ap(e);r&&s(r)}return R.useEffect(()=>{},[t,n]),R.useEffect(()=>{const r=Ap(e);r!==n&&s(r)},[e,n]),n}function ab({children:e,in:t,onExited:i,mountOnEnter:n,unmountOnExit:s}){const r=R.useRef(null),u=R.useRef(t),c=lo(i);R.useEffect(()=>{t?u.current=!0:c(r.current)},[t,c]);const p=zd(r,e.ref),g=R.cloneElement(e,{ref:p});return t?g:s||!u.current&&n?null:g}const ub=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function cb(e,t){if(e==null)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}function db(e){let{onEnter:t,onEntering:i,onEntered:n,onExit:s,onExiting:r,onExited:u,addEndListener:c,children:p}=e,g=cb(e,ub);const v=R.useRef(null),S=zd(v,Hd(p)),y=H=>A=>{H&&v.current&&H(v.current,A)},E=R.useCallback(y(t),[t]),b=R.useCallback(y(i),[i]),M=R.useCallback(y(n),[n]),x=R.useCallback(y(s),[s]),_=R.useCallback(y(r),[r]),k=R.useCallback(y(u),[u]),I=R.useCallback(y(c),[c]);return Object.assign({},g,{nodeRef:v},t&&{onEnter:E},i&&{onEntering:b},n&&{onEntered:M},s&&{onExit:x},r&&{onExiting:_},u&&{onExited:k},c&&{addEndListener:I},{children:typeof p=="function"?(H,A)=>p(H,Object.assign({},A,{ref:S})):R.cloneElement(p,{ref:S})})}const hb=["component"];function pb(e,t){if(e==null)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}const fb=R.forwardRef((e,t)=>{let{component:i}=e,n=pb(e,hb);const s=db(n);return de.jsx(i,Object.assign({ref:t},s))});function gb({in:e,onTransition:t}){const i=R.useRef(null),n=R.useRef(!0),s=lo(t);return sC(()=>{if(!i.current)return;let r=!1;return s({in:e,element:i.current,initial:n.current,isStale:()=>r}),()=>{r=!0}},[e,s]),sC(()=>(n.current=!1,()=>{n.current=!0}),[]),i}function mb({children:e,in:t,onExited:i,onEntered:n,transition:s}){const[r,u]=R.useState(!t);t&&r&&u(!1);const c=gb({in:!!t,onTransition:g=>{const v=()=>{g.isStale()||(g.in?n==null||n(g.element,g.initial):(u(!0),i==null||i(g.element)))};Promise.resolve(s(g)).then(v,S=>{throw g.in||u(!0),S})}}),p=zd(c,e.ref);return r&&!t?null:R.cloneElement(e,{ref:p})}function cC(e,t,i){return e?de.jsx(fb,Object.assign({},i,{component:e})):t?de.jsx(mb,Object.assign({},i,{transition:t})):de.jsx(ab,Object.assign({},i))}const vb=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function Cb(e,t){if(e==null)return{};var i={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;i[n]=e[n]}return i}let Ip;function wb(e){return Ip||(Ip=new Xf({ownerDocument:e==null?void 0:e.document})),Ip}function Sb(e){const t=Qf(),i=e||wb(t),n=R.useRef({dialog:null,backdrop:null});return Object.assign(n.current,{add:()=>i.add(n.current),remove:()=>i.remove(n.current),isTopModal:()=>i.isTopModal(n.current),setDialogRef:R.useCallback(s=>{n.current.dialog=s},[]),setBackdropRef:R.useCallback(s=>{n.current.backdrop=s},[])})}const Tw=R.forwardRef((e,t)=>{let{show:i=!1,role:n="dialog",className:s,style:r,children:u,backdrop:c=!0,keyboard:p=!0,onBackdropClick:g,onEscapeKeyDown:v,transition:S,runTransition:y,backdropTransition:E,runBackdropTransition:b,autoFocus:M=!0,enforceFocus:x=!0,restoreFocus:_=!0,restoreFocusOptions:k,renderDialog:I,renderBackdrop:H=Ve=>de.jsx("div",Object.assign({},Ve)),manager:A,container:z,onShow:j,onHide:te=()=>{},onExit:le,onExited:ve,onExiting:ue,onEnter:Re,onEntering:Be,onEntered:Oe}=e,He=Cb(e,vb);const be=Qf(),Te=lb(z),U=Sb(A),Se=LE(),J=AE(i),[N,Z]=R.useState(!i),Pe=R.useRef(null);R.useImperativeHandle(t,()=>U,[U]),Bd&&!J&&i&&(Pe.current=Lp(be==null?void 0:be.document)),i&&N&&Z(!1);const re=lo(()=>{if(U.add(),qe.current=Sd(document,"keydown",Ze),xe.current=Sd(document,"focus",()=>setTimeout(we),!0),j&&j(),M){var Ve,Qt;const ui=Lp((Ve=(Qt=U.dialog)==null?void 0:Qt.ownerDocument)!=null?Ve:be==null?void 0:be.document);U.dialog&&ui&&!oC(U.dialog,ui)&&(Pe.current=ui,U.dialog.focus())}}),fe=lo(()=>{if(U.remove(),qe.current==null||qe.current(),xe.current==null||xe.current(),_){var Ve;(Ve=Pe.current)==null||Ve.focus==null||Ve.focus(k),Pe.current=null}});R.useEffect(()=>{!i||!Te||re()},[i,Te,re]),R.useEffect(()=>{N&&fe()},[N,fe]),ob(()=>{fe()});const we=lo(()=>{if(!x||!Se()||!U.isTopModal())return;const Ve=Lp(be==null?void 0:be.document);U.dialog&&Ve&&!oC(U.dialog,Ve)&&U.dialog.focus()}),$e=lo(Ve=>{Ve.target===Ve.currentTarget&&(g==null||g(Ve),c===!0&&te())}),Ze=lo(Ve=>{p&&fE(Ve)&&U.isTopModal()&&(v==null||v(Ve),Ve.defaultPrevented||te())}),xe=R.useRef(),qe=R.useRef(),wt=(...Ve)=>{Z(!0),ve==null||ve(...Ve)};if(!Te)return null;const it=Object.assign({role:n,ref:U.setDialogRef,"aria-modal":n==="dialog"?!0:void 0},He,{style:r,className:s,tabIndex:-1});let st=I?I(it):de.jsx("div",Object.assign({},it,{children:R.cloneElement(u,{role:"document"})}));st=cC(S,y,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!i,onExit:le,onExiting:ue,onExited:wt,onEnter:Re,onEntering:Be,onEntered:Oe,children:st});let yt=null;return c&&(yt=H({ref:U.setBackdropRef,onClick:$e}),yt=cC(E,b,{in:!!i,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:yt})),de.jsx(de.Fragment,{children:jr.createPortal(de.jsxs(de.Fragment,{children:[yt,st]}),Te)})});Tw.displayName="Modal";const yb=Object.assign(Tw,{Manager:Xf});function Rb(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function Pb(e,t){e.classList?e.classList.add(t):Rb(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function dC(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function Fb(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=dC(e.className,t):e.setAttribute("class",dC(e.className&&e.className.baseVal||"",t))}const Yl={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class _w extends Xf{adjustAndStore(t,i,n){const s=i.style[t];i.dataset[t]=s,ao(i,{[t]:`${parseFloat(ao(i,t))+n}px`})}restore(t,i){const n=i.dataset[t];n!==void 0&&(delete i.dataset[t],ao(i,{[t]:n}))}setContainerStyle(t){super.setContainerStyle(t);const i=this.getElement();if(Pb(i,"modal-open"),!t.scrollBarWidth)return;const n=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Nr(i,Yl.FIXED_CONTENT).forEach(r=>this.adjustAndStore(n,r,t.scrollBarWidth)),Nr(i,Yl.STICKY_CONTENT).forEach(r=>this.adjustAndStore(s,r,-t.scrollBarWidth)),Nr(i,Yl.NAVBAR_TOGGLER).forEach(r=>this.adjustAndStore(s,r,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const i=this.getElement();Fb(i,"modal-open");const n=this.isRTL?"paddingLeft":"paddingRight",s=this.isRTL?"marginLeft":"marginRight";Nr(i,Yl.FIXED_CONTENT).forEach(r=>this.restore(n,r)),Nr(i,Yl.STICKY_CONTENT).forEach(r=>this.restore(s,r)),Nr(i,Yl.NAVBAR_TOGGLER).forEach(r=>this.restore(s,r))}}let kp;function Eb(e){return kp||(kp=new _w(e)),kp}const Lw=R.createContext({onHide(){}}),bb=R.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:i=!1,onHide:n,children:s,...r},u)=>{const c=R.useContext(Lw),p=Vd(()=>{c==null||c.onHide(),n==null||n()});return de.jsxs("div",{ref:u,...r,children:[s,i&&de.jsx(Zf,{"aria-label":e,variant:t,onClick:p})]})}),Aw=R.forwardRef(({className:e,bsPrefix:t,as:i="div",...n},s)=>(t=Xi(t,"nav-item"),de.jsx(i,{ref:s,className:ai(e,t),...n})));Aw.displayName="NavItem";const Iw=R.forwardRef(({bsPrefix:e,className:t,as:i=yw,active:n,eventKey:s,disabled:r=!1,...u},c)=>{e=Xi(e,"nav-link");const[p,g]=xw({key:qf(s,u.href),active:n,disabled:r,...u});return de.jsx(i,{...u,...p,ref:c,disabled:r,className:ai(t,e,r&&"disabled",g.isActive&&"active")})});Iw.displayName="NavLink";const kw=R.forwardRef((e,t)=>{const{as:i="div",bsPrefix:n,variant:s,fill:r=!1,justify:u=!1,navbar:c,navbarScroll:p,className:g,activeKey:v,...S}=mw(e,{activeKey:"onSelect"}),y=Xi(n,"nav");let E,b,M=!1;const x=R.useContext(la),_=R.useContext(Pw);return x?(E=x.bsPrefix,M=c??!0):_&&({cardHeaderBsPrefix:b}=_),de.jsx(nb,{as:i,ref:t,activeKey:v,className:ai(g,{[y]:!M,[`${E}-nav`]:M,[`${E}-nav-scroll`]:M&&p,[`${b}-${s}`]:!!b,[`${y}-${s}`]:!!s,[`${y}-fill`]:r,[`${y}-justified`]:u}),...S})});kw.displayName="Nav";const ou=Object.assign(kw,{Item:Aw,Link:Iw}),Ow=R.forwardRef(({bsPrefix:e,className:t,as:i,...n},s)=>{e=Xi(e,"navbar-brand");const r=i||(n.href?"a":"span");return de.jsx(r,{...n,ref:s,className:ai(t,e)})});Ow.displayName="NavbarBrand";const Nw=R.forwardRef(({children:e,bsPrefix:t,...i},n)=>{t=Xi(t,"navbar-collapse");const s=R.useContext(la);return de.jsx(DE,{in:!!(s&&s.expanded),...i,children:de.jsx("div",{ref:n,className:t,children:e})})});Nw.displayName="NavbarCollapse";const Gw=R.forwardRef(({bsPrefix:e,className:t,children:i,label:n="Toggle navigation",as:s="button",onClick:r,...u},c)=>{e=Xi(e,"navbar-toggler");const{onToggle:p,expanded:g}=R.useContext(la)||{},v=Vd(S=>{r&&r(S),p&&p()});return s==="button"&&(u.type="button"),de.jsx(s,{...u,ref:c,onClick:v,"aria-label":n,className:ai(t,e,!g&&"collapsed"),children:i||de.jsx("span",{className:`${e}-icon`})})});Gw.displayName="NavbarToggle";const uf=new WeakMap,hC=(e,t)=>{if(!e||!t)return;const i=uf.get(t)||new Map;uf.set(t,i);let n=i.get(e);return n||(n=t.matchMedia(e),n.refCount=0,i.set(n.media,n)),n};function xb(e,t=typeof window>"u"?void 0:window){const i=hC(e,t),[n,s]=R.useState(()=>i?i.matches:!1);return QE(()=>{let r=hC(e,t);if(!r)return s(!1);let u=uf.get(t);const c=()=>{s(r.matches)};return r.refCount++,r.addListener(c),c(),()=>{r.removeListener(c),r.refCount--,r.refCount<=0&&(u==null||u.delete(r.media)),r=void 0}},[e]),n}function Db(e){const t=Object.keys(e);function i(c,p){return c===p?p:c?`${c} and ${p}`:p}function n(c){return t[Math.min(t.indexOf(c)+1,t.length-1)]}function s(c){const p=n(c);let g=e[p];return typeof g=="number"?g=`${g-.2}px`:g=`calc(${g} - 0.2px)`,`(max-width: ${g})`}function r(c){let p=e[c];return typeof p=="number"&&(p=`${p}px`),`(min-width: ${p})`}function u(c,p,g){let v;typeof c=="object"?(v=c,g=p,p=!0):(p=p||!0,v={[c]:p});let S=R.useMemo(()=>Object.entries(v).reduce((y,[E,b])=>((b==="up"||b===!0)&&(y=i(y,r(E))),(b==="down"||b===!0)&&(y=i(y,s(E))),y),""),[JSON.stringify(v)]);return xb(S,g)}return u}const Mb=Db({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),Hw=R.forwardRef(({className:e,bsPrefix:t,as:i="div",...n},s)=>(t=Xi(t,"offcanvas-body"),de.jsx(i,{ref:s,className:ai(e,t),...n})));Hw.displayName="OffcanvasBody";const Tb={[es]:"show",[ro]:"show"},Bw=R.forwardRef(({bsPrefix:e,className:t,children:i,in:n=!1,mountOnEnter:s=!1,unmountOnExit:r=!1,appear:u=!1,...c},p)=>(e=Xi(e,"offcanvas"),de.jsx(Kf,{ref:p,addEndListener:$f,in:n,mountOnEnter:s,unmountOnExit:r,appear:u,...c,childRef:Hd(i),children:(g,v)=>R.cloneElement(i,{...v,className:ai(t,i.props.className,(g===es||g===yu)&&`${e}-toggling`,Tb[g])})})));Bw.displayName="OffcanvasToggling";const Vw=R.forwardRef(({bsPrefix:e,className:t,closeLabel:i="Close",closeButton:n=!1,...s},r)=>(e=Xi(e,"offcanvas-header"),de.jsx(bb,{ref:r,...s,className:ai(t,e),closeLabel:i,closeButton:n})));Vw.displayName="OffcanvasHeader";const _b=TE("h5"),Ww=R.forwardRef(({className:e,bsPrefix:t,as:i=_b,...n},s)=>(t=Xi(t,"offcanvas-title"),de.jsx(i,{ref:s,className:ai(e,t),...n})));Ww.displayName="OffcanvasTitle";function Lb(e){return de.jsx(Bw,{...e})}function Ab(e){return de.jsx(Rw,{...e})}const zw=R.forwardRef(({bsPrefix:e,className:t,children:i,"aria-labelledby":n,placement:s="start",responsive:r,show:u=!1,backdrop:c=!0,keyboard:p=!0,scroll:g=!1,onEscapeKeyDown:v,onShow:S,onHide:y,container:E,autoFocus:b=!0,enforceFocus:M=!0,restoreFocus:x=!0,restoreFocusOptions:_,onEntered:k,onExit:I,onExiting:H,onEnter:A,onEntering:z,onExited:j,backdropClassName:te,manager:le,renderStaticNode:ve=!1,...ue},Re)=>{const Be=R.useRef();e=Xi(e,"offcanvas");const[Oe,He]=R.useState(!1),be=Vd(y),Te=Mb(r||"xs","up");R.useEffect(()=>{He(r?u&&!Te:u)},[u,r,Te]);const U=R.useMemo(()=>({onHide:be}),[be]);function Se(){return le||(g?(Be.current||(Be.current=new _w({handleContainerOverflow:!1})),Be.current):Eb())}const J=(re,...fe)=>{re&&(re.style.visibility="visible"),A==null||A(re,...fe)},N=(re,...fe)=>{re&&(re.style.visibility=""),j==null||j(...fe)},Z=R.useCallback(re=>de.jsx("div",{...re,className:ai(`${e}-backdrop`,te)}),[te,e]),Pe=re=>de.jsx("div",{...re,...ue,className:ai(t,r?`${e}-${r}`:e,`${e}-${s}`),"aria-labelledby":n,children:i});return de.jsxs(de.Fragment,{children:[!Oe&&(r||ve)&&Pe({}),de.jsx(Lw.Provider,{value:U,children:de.jsx(yb,{show:Oe,ref:Re,backdrop:c,container:E,keyboard:p,autoFocus:b,enforceFocus:M&&!g,restoreFocus:x,restoreFocusOptions:_,onEscapeKeyDown:v,onShow:S,onHide:be,onEnter:J,onEntering:z,onEntered:k,onExit:I,onExiting:H,onExited:N,manager:Se(),transition:Lb,backdropTransition:Ab,renderBackdrop:Z,renderDialog:Pe})})]})});zw.displayName="Offcanvas";const Ib=Object.assign(zw,{Body:Hw,Header:Vw,Title:Ww}),Uw=R.forwardRef(({onHide:e,...t},i)=>{const n=R.useContext(la),s=Vd(()=>{n==null||n.onToggle==null||n.onToggle(),e==null||e()});return de.jsx(Ib,{ref:i,show:!!(n!=null&&n.expanded),...t,renderStaticNode:!0,onHide:s})});Uw.displayName="NavbarOffcanvas";const jw=R.forwardRef(({className:e,bsPrefix:t,as:i="span",...n},s)=>(t=Xi(t,"navbar-text"),de.jsx(i,{ref:s,className:ai(e,t),...n})));jw.displayName="NavbarText";const $w=R.forwardRef((e,t)=>{const{bsPrefix:i,expand:n=!0,variant:s="light",bg:r,fixed:u,sticky:c,className:p,as:g="nav",expanded:v,onToggle:S,onSelect:y,collapseOnSelect:E=!1,...b}=mw(e,{expanded:"onToggle"}),M=Xi(i,"navbar"),x=R.useCallback((...I)=>{y==null||y(...I),E&&v&&(S==null||S(!1))},[y,E,v,S]);b.role===void 0&&g!=="nav"&&(b.role="navigation");let _=`${M}-expand`;typeof n=="string"&&(_=`${_}-${n}`);const k=R.useMemo(()=>({onToggle:()=>S==null?void 0:S(!v),bsPrefix:M,expanded:!!v,expand:n}),[M,v,n,S]);return de.jsx(la.Provider,{value:k,children:de.jsx(yd.Provider,{value:x,children:de.jsx(g,{ref:t,...b,className:ai(p,M,n&&_,s&&`${M}-${s}`,r&&`bg-${r}`,c&&`sticky-${c}`,u&&`fixed-${u}`)})})})});$w.displayName="Navbar";const Op=Object.assign($w,{Brand:Ow,Collapse:Nw,Offcanvas:Uw,Text:jw,Toggle:Gw}),kb=R.createContext(null),Np={didCatch:!1,error:null};class Ob extends R.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Np}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var i,n,s=arguments.length,r=new Array(s),u=0;u<s;u++)r[u]=arguments[u];(i=(n=this.props).onReset)===null||i===void 0||i.call(n,{args:r,reason:"imperative-api"}),this.setState(Np)}}componentDidCatch(t,i){var n,s;(n=(s=this.props).onError)===null||n===void 0||n.call(s,t,i)}componentDidUpdate(t,i){const{didCatch:n}=this.state,{resetKeys:s}=this.props;if(n&&i.error!==null&&Nb(t.resetKeys,s)){var r,u;(r=(u=this.props).onReset)===null||r===void 0||r.call(u,{next:s,prev:t.resetKeys,reason:"keys"}),this.setState(Np)}}render(){const{children:t,fallbackRender:i,FallbackComponent:n,fallback:s}=this.props,{didCatch:r,error:u}=this.state;let c=t;if(r){const p={error:u,resetErrorBoundary:this.resetErrorBoundary};if(typeof i=="function")c=i(p);else if(n)c=R.createElement(n,p);else if(s!==void 0)c=s;else throw u}return R.createElement(kb.Provider,{value:{didCatch:r,error:u,resetErrorBoundary:this.resetErrorBoundary}},c)}}function Nb(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((i,n)=>!Object.is(i,t[n]))}function Kw(e,t){const i=R.useRef(t);R.useEffect(function(){t!==i.current&&e.attributionControl!=null&&(i.current!=null&&e.attributionControl.removeAttribution(i.current),t!=null&&e.attributionControl.addAttribution(t)),i.current=t},[e,t])}const Gb=1;function Hb(e){return Object.freeze({__version:Gb,map:e})}function Bb(e,t){return Object.freeze({...e,...t})}const Zw=R.createContext(null),qw=Zw.Provider;function Yw(){const e=R.useContext(Zw);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function Vb(e){function t(i,n){const{instance:s,context:r}=e(i).current;return R.useImperativeHandle(n,()=>s),i.children==null?null:ae.createElement(qw,{value:r},i.children)}return R.forwardRef(t)}function Wb(e){function t(i,n){const[s,r]=R.useState(!1),{instance:u}=e(i,r).current;R.useImperativeHandle(n,()=>u),R.useEffect(function(){s&&u.update()},[u,s,i.children]);const c=u._contentNode;return c?Iu.createPortal(i.children,c):null}return R.forwardRef(t)}function zb(e){function t(i,n){const{instance:s}=e(i).current;return R.useImperativeHandle(n,()=>s),null}return R.forwardRef(t)}function Qw(e,t){const i=R.useRef();R.useEffect(function(){return t!=null&&e.instance.on(t),i.current=t,function(){i.current!=null&&e.instance.off(i.current),i.current=null}},[e,t])}function Jf(e,t){const i=e.pane??t.pane;return i?{...e,pane:i}:e}function Ub(e,t){return function(n,s){const r=Yw(),u=e(Jf(n,r),r);return Kw(r.map,n.attribution),Qw(u.current,n.eventHandlers),t(u.current,r,n,s),u}}var hu={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var jb=hu.exports,pC;function $b(){return pC||(pC=1,function(e,t){(function(i,n){n(t)})(jb,function(i){var n="1.9.4";function s(l){var d,f,C,F;for(f=1,C=arguments.length;f<C;f++){F=arguments[f];for(d in F)l[d]=F[d]}return l}var r=Object.create||function(){function l(){}return function(d){return l.prototype=d,new l}}();function u(l,d){var f=Array.prototype.slice;if(l.bind)return l.bind.apply(l,f.call(arguments,1));var C=f.call(arguments,2);return function(){return l.apply(d,C.length?C.concat(f.call(arguments)):arguments)}}var c=0;function p(l){return"_leaflet_id"in l||(l._leaflet_id=++c),l._leaflet_id}function g(l,d,f){var C,F,T,G;return G=function(){C=!1,F&&(T.apply(f,F),F=!1)},T=function(){C?F=arguments:(l.apply(f,arguments),setTimeout(G,d),C=!0)},T}function v(l,d,f){var C=d[1],F=d[0],T=C-F;return l===C&&f?l:((l-F)%T+T)%T+F}function S(){return!1}function y(l,d){if(d===!1)return l;var f=Math.pow(10,d===void 0?6:d);return Math.round(l*f)/f}function E(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function b(l){return E(l).split(/\s+/)}function M(l,d){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?r(l.options):{});for(var f in d)l.options[f]=d[f];return l.options}function x(l,d,f){var C=[];for(var F in l)C.push(encodeURIComponent(f?F.toUpperCase():F)+"="+encodeURIComponent(l[F]));return(!d||d.indexOf("?")===-1?"?":"&")+C.join("&")}var _=/\{ *([\w_ -]+) *\}/g;function k(l,d){return l.replace(_,function(f,C){var F=d[C];if(F===void 0)throw new Error("No value provided for variable "+f);return typeof F=="function"&&(F=F(d)),F})}var I=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function H(l,d){for(var f=0;f<l.length;f++)if(l[f]===d)return f;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function z(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var j=0;function te(l){var d=+new Date,f=Math.max(0,16-(d-j));return j=d+f,window.setTimeout(l,f)}var le=window.requestAnimationFrame||z("RequestAnimationFrame")||te,ve=window.cancelAnimationFrame||z("CancelAnimationFrame")||z("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function ue(l,d,f){if(f&&le===te)l.call(d);else return le.call(window,u(l,d))}function Re(l){l&&ve.call(window,l)}var Be={__proto__:null,extend:s,create:r,bind:u,get lastId(){return c},stamp:p,throttle:g,wrapNum:v,falseFn:S,formatNum:y,trim:E,splitWords:b,setOptions:M,getParamString:x,template:k,isArray:I,indexOf:H,emptyImageUrl:A,requestFn:le,cancelFn:ve,requestAnimFrame:ue,cancelAnimFrame:Re};function Oe(){}Oe.extend=function(l){var d=function(){M(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},f=d.__super__=this.prototype,C=r(f);C.constructor=d,d.prototype=C;for(var F in this)Object.prototype.hasOwnProperty.call(this,F)&&F!=="prototype"&&F!=="__super__"&&(d[F]=this[F]);return l.statics&&s(d,l.statics),l.includes&&(He(l.includes),s.apply(null,[C].concat(l.includes))),s(C,l),delete C.statics,delete C.includes,C.options&&(C.options=f.options?r(f.options):{},s(C.options,l.options)),C._initHooks=[],C.callInitHooks=function(){if(!this._initHooksCalled){f.callInitHooks&&f.callInitHooks.call(this),this._initHooksCalled=!0;for(var T=0,G=C._initHooks.length;T<G;T++)C._initHooks[T].call(this)}},d},Oe.include=function(l){var d=this.prototype.options;return s(this.prototype,l),l.options&&(this.prototype.options=d,this.mergeOptions(l.options)),this},Oe.mergeOptions=function(l){return s(this.prototype.options,l),this},Oe.addInitHook=function(l){var d=Array.prototype.slice.call(arguments,1),f=typeof l=="function"?l:function(){this[l].apply(this,d)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(f),this};function He(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=I(l)?l:[l];for(var d=0;d<l.length;d++)l[d]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var be={on:function(l,d,f){if(typeof l=="object")for(var C in l)this._on(C,l[C],d);else{l=b(l);for(var F=0,T=l.length;F<T;F++)this._on(l[F],d,f)}return this},off:function(l,d,f){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var C in l)this._off(C,l[C],d);else{l=b(l);for(var F=arguments.length===1,T=0,G=l.length;T<G;T++)F?this._off(l[T]):this._off(l[T],d,f)}return this},_on:function(l,d,f,C){if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}if(this._listens(l,d,f)===!1){f===this&&(f=void 0);var F={fn:d,ctx:f};C&&(F.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(F)}},_off:function(l,d,f){var C,F,T;if(this._events&&(C=this._events[l],!!C)){if(arguments.length===1){if(this._firingCount)for(F=0,T=C.length;F<T;F++)C[F].fn=S;delete this._events[l];return}if(typeof d!="function"){console.warn("wrong listener type: "+typeof d);return}var G=this._listens(l,d,f);if(G!==!1){var K=C[G];this._firingCount&&(K.fn=S,this._events[l]=C=C.slice()),C.splice(G,1)}}},fire:function(l,d,f){if(!this.listens(l,f))return this;var C=s({},d,{type:l,target:this,sourceTarget:d&&d.sourceTarget||this});if(this._events){var F=this._events[l];if(F){this._firingCount=this._firingCount+1||1;for(var T=0,G=F.length;T<G;T++){var K=F[T],X=K.fn;K.once&&this.off(l,X,K.ctx),X.call(K.ctx||this,C)}this._firingCount--}}return f&&this._propagateEvent(C),this},listens:function(l,d,f,C){typeof l!="string"&&console.warn('"string" type argument expected');var F=d;typeof d!="function"&&(C=!!d,F=void 0,f=void 0);var T=this._events&&this._events[l];if(T&&T.length&&this._listens(l,F,f)!==!1)return!0;if(C){for(var G in this._eventParents)if(this._eventParents[G].listens(l,d,f,C))return!0}return!1},_listens:function(l,d,f){if(!this._events)return!1;var C=this._events[l]||[];if(!d)return!!C.length;f===this&&(f=void 0);for(var F=0,T=C.length;F<T;F++)if(C[F].fn===d&&C[F].ctx===f)return F;return!1},once:function(l,d,f){if(typeof l=="object")for(var C in l)this._on(C,l[C],d,!0);else{l=b(l);for(var F=0,T=l.length;F<T;F++)this._on(l[F],d,f,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[p(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[p(l)],this},_propagateEvent:function(l){for(var d in this._eventParents)this._eventParents[d].fire(l.type,s({layer:l.target,propagatedFrom:l.target},l),!0)}};be.addEventListener=be.on,be.removeEventListener=be.clearAllEventListeners=be.off,be.addOneTimeEventListener=be.once,be.fireEvent=be.fire,be.hasEventListeners=be.listens;var Te=Oe.extend(be);function U(l,d,f){this.x=f?Math.round(l):l,this.y=f?Math.round(d):d}var Se=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(l){return this.clone()._add(J(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(J(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new U(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new U(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=Se(this.x),this.y=Se(this.y),this},distanceTo:function(l){l=J(l);var d=l.x-this.x,f=l.y-this.y;return Math.sqrt(d*d+f*f)},equals:function(l){return l=J(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=J(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+y(this.x)+", "+y(this.y)+")"}};function J(l,d,f){return l instanceof U?l:I(l)?new U(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new U(l.x,l.y):new U(l,d,f)}function N(l,d){if(l)for(var f=d?[l,d]:l,C=0,F=f.length;C<F;C++)this.extend(f[C])}N.prototype={extend:function(l){var d,f;if(!l)return this;if(l instanceof U||typeof l[0]=="number"||"x"in l)d=f=J(l);else if(l=Z(l),d=l.min,f=l.max,!d||!f)return this;return!this.min&&!this.max?(this.min=d.clone(),this.max=f.clone()):(this.min.x=Math.min(d.x,this.min.x),this.max.x=Math.max(f.x,this.max.x),this.min.y=Math.min(d.y,this.min.y),this.max.y=Math.max(f.y,this.max.y)),this},getCenter:function(l){return J((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return J(this.min.x,this.max.y)},getTopRight:function(){return J(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var d,f;return typeof l[0]=="number"||l instanceof U?l=J(l):l=Z(l),l instanceof N?(d=l.min,f=l.max):d=f=l,d.x>=this.min.x&&f.x<=this.max.x&&d.y>=this.min.y&&f.y<=this.max.y},intersects:function(l){l=Z(l);var d=this.min,f=this.max,C=l.min,F=l.max,T=F.x>=d.x&&C.x<=f.x,G=F.y>=d.y&&C.y<=f.y;return T&&G},overlaps:function(l){l=Z(l);var d=this.min,f=this.max,C=l.min,F=l.max,T=F.x>d.x&&C.x<f.x,G=F.y>d.y&&C.y<f.y;return T&&G},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var d=this.min,f=this.max,C=Math.abs(d.x-f.x)*l,F=Math.abs(d.y-f.y)*l;return Z(J(d.x-C,d.y-F),J(f.x+C,f.y+F))},equals:function(l){return l?(l=Z(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function Z(l,d){return!l||l instanceof N?l:new N(l,d)}function Pe(l,d){if(l)for(var f=d?[l,d]:l,C=0,F=f.length;C<F;C++)this.extend(f[C])}Pe.prototype={extend:function(l){var d=this._southWest,f=this._northEast,C,F;if(l instanceof fe)C=l,F=l;else if(l instanceof Pe){if(C=l._southWest,F=l._northEast,!C||!F)return this}else return l?this.extend(we(l)||re(l)):this;return!d&&!f?(this._southWest=new fe(C.lat,C.lng),this._northEast=new fe(F.lat,F.lng)):(d.lat=Math.min(C.lat,d.lat),d.lng=Math.min(C.lng,d.lng),f.lat=Math.max(F.lat,f.lat),f.lng=Math.max(F.lng,f.lng)),this},pad:function(l){var d=this._southWest,f=this._northEast,C=Math.abs(d.lat-f.lat)*l,F=Math.abs(d.lng-f.lng)*l;return new Pe(new fe(d.lat-C,d.lng-F),new fe(f.lat+C,f.lng+F))},getCenter:function(){return new fe((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new fe(this.getNorth(),this.getWest())},getSouthEast:function(){return new fe(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof fe||"lat"in l?l=we(l):l=re(l);var d=this._southWest,f=this._northEast,C,F;return l instanceof Pe?(C=l.getSouthWest(),F=l.getNorthEast()):C=F=l,C.lat>=d.lat&&F.lat<=f.lat&&C.lng>=d.lng&&F.lng<=f.lng},intersects:function(l){l=re(l);var d=this._southWest,f=this._northEast,C=l.getSouthWest(),F=l.getNorthEast(),T=F.lat>=d.lat&&C.lat<=f.lat,G=F.lng>=d.lng&&C.lng<=f.lng;return T&&G},overlaps:function(l){l=re(l);var d=this._southWest,f=this._northEast,C=l.getSouthWest(),F=l.getNorthEast(),T=F.lat>d.lat&&C.lat<f.lat,G=F.lng>d.lng&&C.lng<f.lng;return T&&G},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,d){return l?(l=re(l),this._southWest.equals(l.getSouthWest(),d)&&this._northEast.equals(l.getNorthEast(),d)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function re(l,d){return l instanceof Pe?l:new Pe(l,d)}function fe(l,d,f){if(isNaN(l)||isNaN(d))throw new Error("Invalid LatLng object: ("+l+", "+d+")");this.lat=+l,this.lng=+d,f!==void 0&&(this.alt=+f)}fe.prototype={equals:function(l,d){if(!l)return!1;l=we(l);var f=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return f<=(d===void 0?1e-9:d)},toString:function(l){return"LatLng("+y(this.lat,l)+", "+y(this.lng,l)+")"},distanceTo:function(l){return Ze.distance(this,we(l))},wrap:function(){return Ze.wrapLatLng(this)},toBounds:function(l){var d=180*l/40075017,f=d/Math.cos(Math.PI/180*this.lat);return re([this.lat-d,this.lng-f],[this.lat+d,this.lng+f])},clone:function(){return new fe(this.lat,this.lng,this.alt)}};function we(l,d,f){return l instanceof fe?l:I(l)&&typeof l[0]!="object"?l.length===3?new fe(l[0],l[1],l[2]):l.length===2?new fe(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new fe(l.lat,"lng"in l?l.lng:l.lon,l.alt):d===void 0?null:new fe(l,d,f)}var $e={latLngToPoint:function(l,d){var f=this.projection.project(l),C=this.scale(d);return this.transformation._transform(f,C)},pointToLatLng:function(l,d){var f=this.scale(d),C=this.transformation.untransform(l,f);return this.projection.unproject(C)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var d=this.projection.bounds,f=this.scale(l),C=this.transformation.transform(d.min,f),F=this.transformation.transform(d.max,f);return new N(C,F)},infinite:!1,wrapLatLng:function(l){var d=this.wrapLng?v(l.lng,this.wrapLng,!0):l.lng,f=this.wrapLat?v(l.lat,this.wrapLat,!0):l.lat,C=l.alt;return new fe(f,d,C)},wrapLatLngBounds:function(l){var d=l.getCenter(),f=this.wrapLatLng(d),C=d.lat-f.lat,F=d.lng-f.lng;if(C===0&&F===0)return l;var T=l.getSouthWest(),G=l.getNorthEast(),K=new fe(T.lat-C,T.lng-F),X=new fe(G.lat-C,G.lng-F);return new Pe(K,X)}},Ze=s({},$e,{wrapLng:[-180,180],R:6371e3,distance:function(l,d){var f=Math.PI/180,C=l.lat*f,F=d.lat*f,T=Math.sin((d.lat-l.lat)*f/2),G=Math.sin((d.lng-l.lng)*f/2),K=T*T+Math.cos(C)*Math.cos(F)*G*G,X=2*Math.atan2(Math.sqrt(K),Math.sqrt(1-K));return this.R*X}}),xe=6378137,qe={R:xe,MAX_LATITUDE:85.0511287798,project:function(l){var d=Math.PI/180,f=this.MAX_LATITUDE,C=Math.max(Math.min(f,l.lat),-f),F=Math.sin(C*d);return new U(this.R*l.lng*d,this.R*Math.log((1+F)/(1-F))/2)},unproject:function(l){var d=180/Math.PI;return new fe((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*d,l.x*d/this.R)},bounds:function(){var l=xe*Math.PI;return new N([-l,-l],[l,l])}()};function wt(l,d,f,C){if(I(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=d,this._c=f,this._d=C}wt.prototype={transform:function(l,d){return this._transform(l.clone(),d)},_transform:function(l,d){return d=d||1,l.x=d*(this._a*l.x+this._b),l.y=d*(this._c*l.y+this._d),l},untransform:function(l,d){return d=d||1,new U((l.x/d-this._b)/this._a,(l.y/d-this._d)/this._c)}};function it(l,d,f,C){return new wt(l,d,f,C)}var st=s({},Ze,{code:"EPSG:3857",projection:qe,transformation:function(){var l=.5/(Math.PI*qe.R);return it(l,.5,-l,.5)}()}),yt=s({},st,{code:"EPSG:900913"});function Ve(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Qt(l,d){var f="",C,F,T,G,K,X;for(C=0,T=l.length;C<T;C++){for(K=l[C],F=0,G=K.length;F<G;F++)X=K[F],f+=(F?"L":"M")+X.x+" "+X.y;f+=d?oe.svg?"z":"x":""}return f||"M0 0"}var ui=document.documentElement.style,On="ActiveXObject"in window,Ji=On&&!document.addEventListener,Kt="msLaunchUri"in navigator&&!("documentMode"in document),kt=Ee("webkit"),fi=Ee("android"),Gi=Ee("android 2")||Ee("android 3"),rs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),gi=fi&&Ee("Google")&&rs<537&&!("AudioNode"in window),ot=!!window.opera,Ot=!Kt&&Ee("chrome"),en=Ee("gecko")&&!kt&&!ot&&!On,ll=!Ot&&Ee("safari"),ci=Ee("phantom"),Nn="OTransition"in ui,al=navigator.platform.indexOf("Win")===0,Co=On&&"transition"in ui,wo="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Gi,hr="MozPerspective"in ui,ls=!window.L_DISABLE_3D&&(Co||wo||hr)&&!Nn&&!ci,mn=typeof orientation<"u"||Ee("mobile"),As=mn&&kt,pr=mn&&wo,Is=!window.PointerEvent&&window.MSPointerEvent,Gn=!!(window.PointerEvent||Is),vn="ontouchstart"in window||!!window.TouchEvent,ks=!window.L_NO_TOUCH&&(vn||Gn),Os=mn&&ot,ul=mn&&en,cl=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,V=function(){var l=!1;try{var d=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",S,d),window.removeEventListener("testPassiveEventSupport",S,d)}catch{}return l}(),$=function(){return!!document.createElement("canvas").getContext}(),ne=!!(document.createElementNS&&Ve("svg").createSVGRect),he=!!ne&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Me=!ne&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var d=l.firstChild;return d.style.behavior="url(#default#VML)",d&&typeof d.adj=="object"}catch{return!1}}(),Ie=navigator.platform.indexOf("Mac")===0,Ye=navigator.platform.indexOf("Linux")===0;function Ee(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var oe={ie:On,ielt9:Ji,edge:Kt,webkit:kt,android:fi,android23:Gi,androidStock:gi,opera:ot,chrome:Ot,gecko:en,safari:ll,phantom:ci,opera12:Nn,win:al,ie3d:Co,webkit3d:wo,gecko3d:hr,any3d:ls,mobile:mn,mobileWebkit:As,mobileWebkit3d:pr,msPointer:Is,pointer:Gn,touch:ks,touchNative:vn,mobileOpera:Os,mobileGecko:ul,retina:cl,passiveEvents:V,canvas:$,svg:ne,vml:Me,inlineSvg:he,mac:Ie,linux:Ye},Fe=oe.msPointer?"MSPointerDown":"pointerdown",Ke=oe.msPointer?"MSPointerMove":"pointermove",tt=oe.msPointer?"MSPointerUp":"pointerup",Rt=oe.msPointer?"MSPointerCancel":"pointercancel",Nt={touchstart:Fe,touchmove:Ke,touchend:tt,touchcancel:Rt},pt={touchstart:Ft,touchmove:Bi,touchend:Bi,touchcancel:Bi},ct={},Tt=!1;function as(l,d,f){return d==="touchstart"&&Gs(),pt[d]?(f=pt[d].bind(this,f),l.addEventListener(Nt[d],f,!1),f):(console.warn("wrong event specified:",d),S)}function us(l,d,f){if(!Nt[d]){console.warn("wrong event specified:",d);return}l.removeEventListener(Nt[d],f,!1)}function Hi(l){ct[l.pointerId]=l}function bi(l){ct[l.pointerId]&&(ct[l.pointerId]=l)}function Ns(l){delete ct[l.pointerId]}function Gs(){Tt||(document.addEventListener(Fe,Hi,!0),document.addEventListener(Ke,bi,!0),document.addEventListener(tt,Ns,!0),document.addEventListener(Rt,Ns,!0),Tt=!0)}function Bi(l,d){if(d.pointerType!==(d.MSPOINTER_TYPE_MOUSE||"mouse")){d.touches=[];for(var f in ct)d.touches.push(ct[f]);d.changedTouches=[d],l(d)}}function Ft(l,d){d.MSPOINTER_TYPE_TOUCH&&d.pointerType===d.MSPOINTER_TYPE_TOUCH&&Gt(d),Bi(l,d)}function So(l){var d={},f,C;for(C in l)f=l[C],d[C]=f&&f.bind?f.bind(l):f;return l=d,d.type="dblclick",d.detail=2,d.isTrusted=!1,d._simulated=!0,d}var gt=200;function Zt(l,d){l.addEventListener("dblclick",d);var f=0,C;function F(T){if(T.detail!==1){C=T.detail;return}if(!(T.pointerType==="mouse"||T.sourceCapabilities&&!T.sourceCapabilities.firesTouchEvents)){var G=Ws(T);if(!(G.some(function(X){return X instanceof HTMLLabelElement&&X.attributes.for})&&!G.some(function(X){return X instanceof HTMLInputElement||X instanceof HTMLSelectElement}))){var K=Date.now();K-f<=gt?(C++,C===2&&d(So(T))):C=1,f=K}}}return l.addEventListener("click",F),{dblclick:d,simDblclick:F}}function Hn(l,d){l.removeEventListener("dblclick",d.dblclick),l.removeEventListener("click",d.simDblclick)}var Bn=Po(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Pt=Po(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Vi=Pt==="webkitTransition"||Pt==="OTransition"?Pt+"End":"transitionend";function mi(l){return typeof l=="string"?document.getElementById(l):l}function Hs(l,d){var f=l.style[d]||l.currentStyle&&l.currentStyle[d];if((!f||f==="auto")&&document.defaultView){var C=document.defaultView.getComputedStyle(l,null);f=C?C[d]:null}return f==="auto"?null:f}function et(l,d,f){var C=document.createElement(l);return C.className=d||"",f&&f.appendChild(C),C}function _t(l){var d=l.parentNode;d&&d.removeChild(l)}function dl(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function yo(l){var d=l.parentNode;d&&d.lastChild!==l&&d.appendChild(l)}function Vn(l){var d=l.parentNode;d&&d.firstChild!==l&&d.insertBefore(l,d.firstChild)}function Ro(l,d){if(l.classList!==void 0)return l.classList.contains(d);var f=hl(l);return f.length>0&&new RegExp("(^|\\s)"+d+"(\\s|$)").test(f)}function Je(l,d){if(l.classList!==void 0)for(var f=b(d),C=0,F=f.length;C<F;C++)l.classList.add(f[C]);else if(!Ro(l,d)){var T=hl(l);ga(l,(T?T+" ":"")+d)}}function Dt(l,d){l.classList!==void 0?l.classList.remove(d):ga(l,E((" "+hl(l)+" ").replace(" "+d+" "," ")))}function ga(l,d){l.className.baseVal===void 0?l.className=d:l.className.baseVal=d}function hl(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function vi(l,d){"opacity"in l.style?l.style.opacity=d:"filter"in l.style&&Wu(l,d)}function Wu(l,d){var f=!1,C="DXImageTransform.Microsoft.Alpha";try{f=l.filters.item(C)}catch{if(d===1)return}d=Math.round(d*100),f?(f.Enabled=d!==100,f.Opacity=d):l.style.filter+=" progid:"+C+"(opacity="+d+")"}function Po(l){for(var d=document.documentElement.style,f=0;f<l.length;f++)if(l[f]in d)return l[f];return!1}function tn(l,d,f){var C=d||new U(0,0);l.style[Bn]=(oe.ie3d?"translate("+C.x+"px,"+C.y+"px)":"translate3d("+C.x+"px,"+C.y+"px,0)")+(f?" scale("+f+")":"")}function zt(l,d){l._leaflet_pos=d,oe.any3d?tn(l,d):(l.style.left=d.x+"px",l.style.top=d.y+"px")}function Wn(l){return l._leaflet_pos||new U(0,0)}var dt,Fo,pl;if("onselectstart"in document)dt=function(){Qe(window,"selectstart",Gt)},Fo=function(){Et(window,"selectstart",Gt)};else{var Bs=Po(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);dt=function(){if(Bs){var l=document.documentElement.style;pl=l[Bs],l[Bs]="none"}},Fo=function(){Bs&&(document.documentElement.style[Bs]=pl,pl=void 0)}}function fl(){Qe(window,"dragstart",Gt)}function gl(){Et(window,"dragstart",Gt)}var fr,gr;function Eo(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(nn(),fr=l,gr=l.style.outlineStyle,l.style.outlineStyle="none",Qe(window,"keydown",nn))}function nn(){fr&&(fr.style.outlineStyle=gr,fr=void 0,gr=void 0,Et(window,"keydown",nn))}function zn(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function Cn(l){var d=l.getBoundingClientRect();return{x:d.width/l.offsetWidth||1,y:d.height/l.offsetHeight||1,boundingClientRect:d}}var mr={__proto__:null,TRANSFORM:Bn,TRANSITION:Pt,TRANSITION_END:Vi,get:mi,getStyle:Hs,create:et,remove:_t,empty:dl,toFront:yo,toBack:Vn,hasClass:Ro,addClass:Je,removeClass:Dt,setClass:ga,getClass:hl,setOpacity:vi,testProp:Po,setTransform:tn,setPosition:zt,getPosition:Wn,get disableTextSelection(){return dt},get enableTextSelection(){return Fo},disableImageDrag:fl,enableImageDrag:gl,preventOutline:Eo,restoreOutline:nn,getSizedParentNode:zn,getScale:Cn};function Qe(l,d,f,C){if(d&&typeof d=="object")for(var F in d)va(l,F,d[F],f);else{d=b(d);for(var T=0,G=d.length;T<G;T++)va(l,d[T],f,C)}return this}var ei="_leaflet_events";function Et(l,d,f,C){if(arguments.length===1)ma(l),delete l[ei];else if(d&&typeof d=="object")for(var F in d)ml(l,F,d[F],f);else if(d=b(d),arguments.length===2)ma(l,function(K){return H(d,K)!==-1});else for(var T=0,G=d.length;T<G;T++)ml(l,d[T],f,C);return this}function ma(l,d){for(var f in l[ei]){var C=f.split(/\d/)[0];(!d||d(C))&&ml(l,C,null,null,f)}}var Vs={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function va(l,d,f,C){var F=d+p(f)+(C?"_"+p(C):"");if(l[ei]&&l[ei][F])return this;var T=function(K){return f.call(C||l,K||window.event)},G=T;!oe.touchNative&&oe.pointer&&d.indexOf("touch")===0?T=as(l,d,T):oe.touch&&d==="dblclick"?T=Zt(l,T):"addEventListener"in l?d==="touchstart"||d==="touchmove"||d==="wheel"||d==="mousewheel"?l.addEventListener(Vs[d]||d,T,oe.passiveEvents?{passive:!1}:!1):d==="mouseenter"||d==="mouseleave"?(T=function(K){K=K||window.event,wr(l,K)&&G(K)},l.addEventListener(Vs[d],T,!1)):l.addEventListener(d,G,!1):l.attachEvent("on"+d,T),l[ei]=l[ei]||{},l[ei][F]=T}function ml(l,d,f,C,F){F=F||d+p(f)+(C?"_"+p(C):"");var T=l[ei]&&l[ei][F];if(!T)return this;!oe.touchNative&&oe.pointer&&d.indexOf("touch")===0?us(l,d,T):oe.touch&&d==="dblclick"?Hn(l,T):"removeEventListener"in l?l.removeEventListener(Vs[d]||d,T,!1):l.detachEvent("on"+d,T),l[ei][F]=null}function wn(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function vl(l){return va(l,"wheel",wn),this}function vr(l){return Qe(l,"mousedown touchstart dblclick contextmenu",wn),l._leaflet_disable_click=!0,this}function Gt(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function sn(l){return Gt(l),wn(l),this}function Ws(l){if(l.composedPath)return l.composedPath();for(var d=[],f=l.target;f;)d.push(f),f=f.parentNode;return d}function Cr(l,d){if(!d)return new U(l.clientX,l.clientY);var f=Cn(d),C=f.boundingClientRect;return new U((l.clientX-C.left)/f.x-d.clientLeft,(l.clientY-C.top)/f.y-d.clientTop)}var Xd=oe.linux&&oe.chrome?window.devicePixelRatio:oe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function zu(l){return oe.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/Xd:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function wr(l,d){var f=d.relatedTarget;if(!f)return!0;try{for(;f&&f!==l;)f=f.parentNode}catch{return!1}return f!==l}var Cl={__proto__:null,on:Qe,off:Et,stopPropagation:wn,disableScrollPropagation:vl,disableClickPropagation:vr,preventDefault:Gt,stop:sn,getPropagationPath:Ws,getMousePosition:Cr,getWheelDelta:zu,isExternalTarget:wr,addListener:Qe,removeListener:Et},wl=Te.extend({run:function(l,d,f,C){this.stop(),this._el=l,this._inProgress=!0,this._duration=f||.25,this._easeOutPower=1/Math.max(C||.5,.2),this._startPos=Wn(l),this._offset=d.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=ue(this._animate,this),this._step()},_step:function(l){var d=+new Date-this._startTime,f=this._duration*1e3;d<f?this._runFrame(this._easeOut(d/f),l):(this._runFrame(1),this._complete())},_runFrame:function(l,d){var f=this._startPos.add(this._offset.multiplyBy(l));d&&f._round(),zt(this._el,f),this.fire("step")},_complete:function(){Re(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),lt=Te.extend({options:{crs:st,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,d){d=M(this,d),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=u(this._onResize,this),this._initEvents(),d.maxBounds&&this.setMaxBounds(d.maxBounds),d.zoom!==void 0&&(this._zoom=this._limitZoom(d.zoom)),d.center&&d.zoom!==void 0&&this.setView(we(d.center),d.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Pt&&oe.any3d&&!oe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Qe(this._proxy,Vi,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,d,f){if(d=d===void 0?this._zoom:this._limitZoom(d),l=this._limitCenter(we(l),d,this.options.maxBounds),f=f||{},this._stop(),this._loaded&&!f.reset&&f!==!0){f.animate!==void 0&&(f.zoom=s({animate:f.animate},f.zoom),f.pan=s({animate:f.animate,duration:f.duration},f.pan));var C=this._zoom!==d?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,d,f.zoom):this._tryAnimatedPan(l,f.pan);if(C)return clearTimeout(this._sizeTimer),this}return this._resetView(l,d,f.pan&&f.pan.noMoveStart),this},setZoom:function(l,d){return this._loaded?this.setView(this.getCenter(),l,{zoom:d}):(this._zoom=l,this)},zoomIn:function(l,d){return l=l||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,d)},zoomOut:function(l,d){return l=l||(oe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,d)},setZoomAround:function(l,d,f){var C=this.getZoomScale(d),F=this.getSize().divideBy(2),T=l instanceof U?l:this.latLngToContainerPoint(l),G=T.subtract(F).multiplyBy(1-1/C),K=this.containerPointToLatLng(F.add(G));return this.setView(K,d,{zoom:f})},_getBoundsCenterZoom:function(l,d){d=d||{},l=l.getBounds?l.getBounds():re(l);var f=J(d.paddingTopLeft||d.padding||[0,0]),C=J(d.paddingBottomRight||d.padding||[0,0]),F=this.getBoundsZoom(l,!1,f.add(C));if(F=typeof d.maxZoom=="number"?Math.min(d.maxZoom,F):F,F===1/0)return{center:l.getCenter(),zoom:F};var T=C.subtract(f).divideBy(2),G=this.project(l.getSouthWest(),F),K=this.project(l.getNorthEast(),F),X=this.unproject(G.add(K).divideBy(2).add(T),F);return{center:X,zoom:F}},fitBounds:function(l,d){if(l=re(l),!l.isValid())throw new Error("Bounds are not valid.");var f=this._getBoundsCenterZoom(l,d);return this.setView(f.center,f.zoom,d)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,d){return this.setView(l,this._zoom,{pan:d})},panBy:function(l,d){if(l=J(l).round(),d=d||{},!l.x&&!l.y)return this.fire("moveend");if(d.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new wl,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),d.noMoveStart||this.fire("movestart"),d.animate!==!1){Je(this._mapPane,"leaflet-pan-anim");var f=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,f,d.duration||.25,d.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,d,f){if(f=f||{},f.animate===!1||!oe.any3d)return this.setView(l,d,f);this._stop();var C=this.project(this.getCenter()),F=this.project(l),T=this.getSize(),G=this._zoom;l=we(l),d=d===void 0?G:d;var K=Math.max(T.x,T.y),X=K*this.getZoomScale(G,d),ce=F.distanceTo(C)||1,De=1.42,We=De*De;function nt(St){var Bo=St?-1:1,hh=St?X:K,ph=X*X-K*K+Bo*We*We*ce*ce,qs=2*hh*We*ce,Ys=ph/qs,Qs=Math.sqrt(Ys*Ys+1)-Ys,Al=Qs<1e-9?-18:Math.log(Qs);return Al}function ti(St){return(Math.exp(St)-Math.exp(-St))/2}function Xt(St){return(Math.exp(St)+Math.exp(-St))/2}function Mi(St){return ti(St)/Xt(St)}var wi=nt(0);function Go(St){return K*(Xt(wi)/Xt(wi+De*St))}function Ga(St){return K*(Xt(wi)*Mi(wi+De*St)-ti(wi))/We}function vs(St){return 1-Math.pow(1-St,1.5)}var cc=Date.now(),Zs=(nt(1)-wi)/De,Pn=f.duration?1e3*f.duration:1e3*Zs*.8;function Ho(){var St=(Date.now()-cc)/Pn,Bo=vs(St)*Zs;St<=1?(this._flyToFrame=ue(Ho,this),this._move(this.unproject(C.add(F.subtract(C).multiplyBy(Ga(Bo)/ce)),G),this.getScaleZoom(K/Go(Bo),G),{flyTo:!0})):this._move(l,d)._moveEnd(!0)}return this._moveStart(!0,f.noMoveStart),Ho.call(this),this},flyToBounds:function(l,d){var f=this._getBoundsCenterZoom(l,d);return this.flyTo(f.center,f.zoom,d)},setMaxBounds:function(l){return l=re(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var d=this.options.minZoom;return this.options.minZoom=l,this._loaded&&d!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var d=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&d!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,d){this._enforcingBounds=!0;var f=this.getCenter(),C=this._limitCenter(f,this._zoom,re(l));return f.equals(C)||this.panTo(C,d),this._enforcingBounds=!1,this},panInside:function(l,d){d=d||{};var f=J(d.paddingTopLeft||d.padding||[0,0]),C=J(d.paddingBottomRight||d.padding||[0,0]),F=this.project(this.getCenter()),T=this.project(l),G=this.getPixelBounds(),K=Z([G.min.add(f),G.max.subtract(C)]),X=K.getSize();if(!K.contains(T)){this._enforcingBounds=!0;var ce=T.subtract(K.getCenter()),De=K.extend(T).getSize().subtract(X);F.x+=ce.x<0?-De.x:De.x,F.y+=ce.y<0?-De.y:De.y,this.panTo(this.unproject(F),d),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=s({animate:!1,pan:!0},l===!0?{animate:!0}:l);var d=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var f=this.getSize(),C=d.divideBy(2).round(),F=f.divideBy(2).round(),T=C.subtract(F);return!T.x&&!T.y?this:(l.animate&&l.pan?this.panBy(T):(l.pan&&this._rawPanBy(T),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(u(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:d,newSize:f}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=s({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var d=u(this._handleGeolocationResponse,this),f=u(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(d,f,l):navigator.geolocation.getCurrentPosition(d,f,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var d=l.code,f=l.message||(d===1?"permission denied":d===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:d,message:"Geolocation error: "+f+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var d=l.coords.latitude,f=l.coords.longitude,C=new fe(d,f),F=C.toBounds(l.coords.accuracy*2),T=this._locateOptions;if(T.setView){var G=this.getBoundsZoom(F);this.setView(C,T.maxZoom?Math.min(G,T.maxZoom):G)}var K={latlng:C,bounds:F,timestamp:l.timestamp};for(var X in l.coords)typeof l.coords[X]=="number"&&(K[X]=l.coords[X]);this.fire("locationfound",K)}},addHandler:function(l,d){if(!d)return this;var f=this[l]=new d(this);return this._handlers.push(f),this.options[l]&&f.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),_t(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Re(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)_t(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,d){var f="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),C=et("div",f,d||this._mapPane);return l&&(this._panes[l]=C),C},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),d=this.unproject(l.getBottomLeft()),f=this.unproject(l.getTopRight());return new Pe(d,f)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,d,f){l=re(l),f=J(f||[0,0]);var C=this.getZoom()||0,F=this.getMinZoom(),T=this.getMaxZoom(),G=l.getNorthWest(),K=l.getSouthEast(),X=this.getSize().subtract(f),ce=Z(this.project(K,C),this.project(G,C)).getSize(),De=oe.any3d?this.options.zoomSnap:1,We=X.x/ce.x,nt=X.y/ce.y,ti=d?Math.max(We,nt):Math.min(We,nt);return C=this.getScaleZoom(ti,C),De&&(C=Math.round(C/(De/100))*(De/100),C=d?Math.ceil(C/De)*De:Math.floor(C/De)*De),Math.max(F,Math.min(T,C))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,d){var f=this._getTopLeftPoint(l,d);return new N(f,f.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,d){var f=this.options.crs;return d=d===void 0?this._zoom:d,f.scale(l)/f.scale(d)},getScaleZoom:function(l,d){var f=this.options.crs;d=d===void 0?this._zoom:d;var C=f.zoom(l*f.scale(d));return isNaN(C)?1/0:C},project:function(l,d){return d=d===void 0?this._zoom:d,this.options.crs.latLngToPoint(we(l),d)},unproject:function(l,d){return d=d===void 0?this._zoom:d,this.options.crs.pointToLatLng(J(l),d)},layerPointToLatLng:function(l){var d=J(l).add(this.getPixelOrigin());return this.unproject(d)},latLngToLayerPoint:function(l){var d=this.project(we(l))._round();return d._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(we(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(re(l))},distance:function(l,d){return this.options.crs.distance(we(l),we(d))},containerPointToLayerPoint:function(l){return J(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return J(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var d=this.containerPointToLayerPoint(J(l));return this.layerPointToLatLng(d)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(we(l)))},mouseEventToContainerPoint:function(l){return Cr(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var d=this._container=mi(l);if(d){if(d._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Qe(d,"scroll",this._onScroll,this),this._containerId=p(d)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&oe.any3d,Je(l,"leaflet-container"+(oe.touch?" leaflet-touch":"")+(oe.retina?" leaflet-retina":"")+(oe.ielt9?" leaflet-oldie":"")+(oe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var d=Hs(l,"position");d!=="absolute"&&d!=="relative"&&d!=="fixed"&&d!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),zt(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Je(l.markerPane,"leaflet-zoom-hide"),Je(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,d,f){zt(this._mapPane,new U(0,0));var C=!this._loaded;this._loaded=!0,d=this._limitZoom(d),this.fire("viewprereset");var F=this._zoom!==d;this._moveStart(F,f)._move(l,d)._moveEnd(F),this.fire("viewreset"),C&&this.fire("load")},_moveStart:function(l,d){return l&&this.fire("zoomstart"),d||this.fire("movestart"),this},_move:function(l,d,f,C){d===void 0&&(d=this._zoom);var F=this._zoom!==d;return this._zoom=d,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),C?f&&f.pinch&&this.fire("zoom",f):((F||f&&f.pinch)&&this.fire("zoom",f),this.fire("move",f)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Re(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){zt(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[p(this._container)]=this;var d=l?Et:Qe;d(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&d(window,"resize",this._onResize,this),oe.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Re(this._resizeRequest),this._resizeRequest=ue(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,d){for(var f=[],C,F=d==="mouseout"||d==="mouseover",T=l.target||l.srcElement,G=!1;T;){if(C=this._targets[p(T)],C&&(d==="click"||d==="preclick")&&this._draggableMoved(C)){G=!0;break}if(C&&C.listens(d,!0)&&(F&&!wr(T,l)||(f.push(C),F))||T===this._container)break;T=T.parentNode}return!f.length&&!G&&!F&&this.listens(d,!0)&&(f=[this]),f},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var d=l.target||l.srcElement;if(!(!this._loaded||d._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(d))){var f=l.type;f==="mousedown"&&Eo(d),this._fireDOMEvent(l,f)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,d,f){if(l.type==="click"){var C=s({},l);C.type="preclick",this._fireDOMEvent(C,C.type,f)}var F=this._findEventTargets(l,d);if(f){for(var T=[],G=0;G<f.length;G++)f[G].listens(d,!0)&&T.push(f[G]);F=T.concat(F)}if(F.length){d==="contextmenu"&&Gt(l);var K=F[0],X={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var ce=K.getLatLng&&(!K._radius||K._radius<=10);X.containerPoint=ce?this.latLngToContainerPoint(K.getLatLng()):this.mouseEventToContainerPoint(l),X.layerPoint=this.containerPointToLayerPoint(X.containerPoint),X.latlng=ce?K.getLatLng():this.layerPointToLatLng(X.layerPoint)}for(G=0;G<F.length;G++)if(F[G].fire(d,X,!0),X.originalEvent._stopped||F[G].options.bubblingMouseEvents===!1&&H(this._mouseEvents,d)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,d=this._handlers.length;l<d;l++)this._handlers[l].disable()},whenReady:function(l,d){return this._loaded?l.call(d||this,{target:this}):this.on("load",l,d),this},_getMapPanePos:function(){return Wn(this._mapPane)||new U(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,d){var f=l&&d!==void 0?this._getNewPixelOrigin(l,d):this.getPixelOrigin();return f.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,d){var f=this.getSize()._divideBy(2);return this.project(l,d)._subtract(f)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,d,f){var C=this._getNewPixelOrigin(f,d);return this.project(l,d)._subtract(C)},_latLngBoundsToNewLayerBounds:function(l,d,f){var C=this._getNewPixelOrigin(f,d);return Z([this.project(l.getSouthWest(),d)._subtract(C),this.project(l.getNorthWest(),d)._subtract(C),this.project(l.getSouthEast(),d)._subtract(C),this.project(l.getNorthEast(),d)._subtract(C)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,d,f){if(!f)return l;var C=this.project(l,d),F=this.getSize().divideBy(2),T=new N(C.subtract(F),C.add(F)),G=this._getBoundsOffset(T,f,d);return Math.abs(G.x)<=1&&Math.abs(G.y)<=1?l:this.unproject(C.add(G),d)},_limitOffset:function(l,d){if(!d)return l;var f=this.getPixelBounds(),C=new N(f.min.add(l),f.max.add(l));return l.add(this._getBoundsOffset(C,d))},_getBoundsOffset:function(l,d,f){var C=Z(this.project(d.getNorthEast(),f),this.project(d.getSouthWest(),f)),F=C.min.subtract(l.min),T=C.max.subtract(l.max),G=this._rebound(F.x,-T.x),K=this._rebound(F.y,-T.y);return new U(G,K)},_rebound:function(l,d){return l+d>0?Math.round(l-d)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(d))},_limitZoom:function(l){var d=this.getMinZoom(),f=this.getMaxZoom(),C=oe.any3d?this.options.zoomSnap:1;return C&&(l=Math.round(l/C)*C),Math.max(d,Math.min(f,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Dt(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,d){var f=this._getCenterOffset(l)._trunc();return(d&&d.animate)!==!0&&!this.getSize().contains(f)?!1:(this.panBy(f,d),!0)},_createAnimProxy:function(){var l=this._proxy=et("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(d){var f=Bn,C=this._proxy.style[f];tn(this._proxy,this.project(d.center,d.zoom),this.getZoomScale(d.zoom,1)),C===this._proxy.style[f]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){_t(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),d=this.getZoom();tn(this._proxy,this.project(l,d),this.getZoomScale(d,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,d,f){if(this._animatingZoom)return!0;if(f=f||{},!this._zoomAnimated||f.animate===!1||this._nothingToAnimate()||Math.abs(d-this._zoom)>this.options.zoomAnimationThreshold)return!1;var C=this.getZoomScale(d),F=this._getCenterOffset(l)._divideBy(1-1/C);return f.animate!==!0&&!this.getSize().contains(F)?!1:(ue(function(){this._moveStart(!0,f.noMoveStart||!1)._animateZoom(l,d,!0)},this),!0)},_animateZoom:function(l,d,f,C){this._mapPane&&(f&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=d,Je(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:d,noUpdate:C}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(u(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Dt(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function cs(l,d){return new lt(l,d)}var xi=Oe.extend({options:{position:"topright"},initialize:function(l){M(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var d=this._map;return d&&d.removeControl(this),this.options.position=l,d&&d.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var d=this._container=this.onAdd(l),f=this.getPosition(),C=l._controlCorners[f];return Je(d,"leaflet-control"),f.indexOf("bottom")!==-1?C.insertBefore(d,C.firstChild):C.appendChild(d),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(_t(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),ds=function(l){return new xi(l)};lt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},d="leaflet-",f=this._controlContainer=et("div",d+"control-container",this._container);function C(F,T){var G=d+F+" "+d+T;l[F+T]=et("div",G,f)}C("top","left"),C("top","right"),C("bottom","left"),C("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)_t(this._controlCorners[l]);_t(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Ca=xi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,d,f,C){return f<C?-1:C<f?1:0}},initialize:function(l,d,f){M(this,f),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var C in l)this._addLayer(l[C],C);for(C in d)this._addLayer(d[C],C,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var d=0;d<this._layers.length;d++)this._layers[d].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return xi.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,d){return this._addLayer(l,d),this._map?this._update():this},addOverlay:function(l,d){return this._addLayer(l,d,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var d=this._getLayer(p(l));return d&&this._layers.splice(this._layers.indexOf(d),1),this._map?this._update():this},expand:function(){Je(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(Je(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):Dt(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Dt(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",d=this._container=et("div",l),f=this.options.collapsed;d.setAttribute("aria-haspopup",!0),vr(d),vl(d);var C=this._section=et("section",l+"-list");f&&(this._map.on("click",this.collapse,this),Qe(d,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var F=this._layersLink=et("a",l+"-toggle",d);F.href="#",F.title="Layers",F.setAttribute("role","button"),Qe(F,{keydown:function(T){T.keyCode===13&&this._expandSafely()},click:function(T){Gt(T),this._expandSafely()}},this),f||this.expand(),this._baseLayersList=et("div",l+"-base",C),this._separator=et("div",l+"-separator",C),this._overlaysList=et("div",l+"-overlays",C),d.appendChild(C)},_getLayer:function(l){for(var d=0;d<this._layers.length;d++)if(this._layers[d]&&p(this._layers[d].layer)===l)return this._layers[d]},_addLayer:function(l,d,f){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:d,overlay:f}),this.options.sortLayers&&this._layers.sort(u(function(C,F){return this.options.sortFunction(C.layer,F.layer,C.name,F.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;dl(this._baseLayersList),dl(this._overlaysList),this._layerControlInputs=[];var l,d,f,C,F=0;for(f=0;f<this._layers.length;f++)C=this._layers[f],this._addItem(C),d=d||C.overlay,l=l||!C.overlay,F+=C.overlay?0:1;return this.options.hideSingleBase&&(l=l&&F>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=d&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var d=this._getLayer(p(l.target)),f=d.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;f&&this._map.fire(f,d)},_createRadioElement:function(l,d){var f='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(d?' checked="checked"':"")+"/>",C=document.createElement("div");return C.innerHTML=f,C.firstChild},_addItem:function(l){var d=document.createElement("label"),f=this._map.hasLayer(l.layer),C;l.overlay?(C=document.createElement("input"),C.type="checkbox",C.className="leaflet-control-layers-selector",C.defaultChecked=f):C=this._createRadioElement("leaflet-base-layers_"+p(this),f),this._layerControlInputs.push(C),C.layerId=p(l.layer),Qe(C,"click",this._onInputClick,this);var F=document.createElement("span");F.innerHTML=" "+l.name;var T=document.createElement("span");d.appendChild(T),T.appendChild(C),T.appendChild(F);var G=l.overlay?this._overlaysList:this._baseLayersList;return G.appendChild(d),this._checkDisabledLayers(),d},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,d,f,C=[],F=[];this._handlingClick=!0;for(var T=l.length-1;T>=0;T--)d=l[T],f=this._getLayer(d.layerId).layer,d.checked?C.push(f):d.checked||F.push(f);for(T=0;T<F.length;T++)this._map.hasLayer(F[T])&&this._map.removeLayer(F[T]);for(T=0;T<C.length;T++)this._map.hasLayer(C[T])||this._map.addLayer(C[T]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,d,f,C=this._map.getZoom(),F=l.length-1;F>=0;F--)d=l[F],f=this._getLayer(d.layerId).layer,d.disabled=f.options.minZoom!==void 0&&C<f.options.minZoom||f.options.maxZoom!==void 0&&C>f.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,Qe(l,"click",Gt),this.expand();var d=this;setTimeout(function(){Et(l,"click",Gt),d._preventClick=!1})}}),Sl=function(l,d,f){return new Ca(l,d,f)},bo=xi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var d="leaflet-control-zoom",f=et("div",d+" leaflet-bar"),C=this.options;return this._zoomInButton=this._createButton(C.zoomInText,C.zoomInTitle,d+"-in",f,this._zoomIn),this._zoomOutButton=this._createButton(C.zoomOutText,C.zoomOutTitle,d+"-out",f,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),f},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,d,f,C,F){var T=et("a",f,C);return T.innerHTML=l,T.href="#",T.title=d,T.setAttribute("role","button"),T.setAttribute("aria-label",d),vr(T),Qe(T,"click",sn),Qe(T,"click",F,this),Qe(T,"click",this._refocusOnMap,this),T},_updateDisabled:function(){var l=this._map,d="leaflet-disabled";Dt(this._zoomInButton,d),Dt(this._zoomOutButton,d),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(Je(this._zoomOutButton,d),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(Je(this._zoomInButton,d),this._zoomInButton.setAttribute("aria-disabled","true"))}});lt.mergeOptions({zoomControl:!0}),lt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new bo,this.addControl(this.zoomControl))});var Uu=function(l){return new bo(l)},Ci=xi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var d="leaflet-control-scale",f=et("div",d),C=this.options;return this._addScales(C,d+"-line",f),l.on(C.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),f},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,d,f){l.metric&&(this._mScale=et("div",d,f)),l.imperial&&(this._iScale=et("div",d,f))},_update:function(){var l=this._map,d=l.getSize().y/2,f=l.distance(l.containerPointToLatLng([0,d]),l.containerPointToLatLng([this.options.maxWidth,d]));this._updateScales(f)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var d=this._getRoundNum(l),f=d<1e3?d+" m":d/1e3+" km";this._updateScale(this._mScale,f,d/l)},_updateImperial:function(l){var d=l*3.2808399,f,C,F;d>5280?(f=d/5280,C=this._getRoundNum(f),this._updateScale(this._iScale,C+" mi",C/f)):(F=this._getRoundNum(d),this._updateScale(this._iScale,F+" ft",F/d))},_updateScale:function(l,d,f){l.style.width=Math.round(this.options.maxWidth*f)+"px",l.innerHTML=d},_getRoundNum:function(l){var d=Math.pow(10,(Math.floor(l)+"").length-1),f=l/d;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:1,d*f}}),xo=function(l){return new Ci(l)},wa='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',zs=xi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(oe.inlineSvg?wa+" ":"")+"Leaflet</a>"},initialize:function(l){M(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=et("div","leaflet-control-attribution"),vr(this._container);for(var d in l._layers)l._layers[d].getAttribution&&this.addAttribution(l._layers[d].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var d in this._attributions)this._attributions[d]&&l.push(d);var f=[];this.options.prefix&&f.push(this.options.prefix),l.length&&f.push(l.join(", ")),this._container.innerHTML=f.join(' <span aria-hidden="true">|</span> ')}}});lt.mergeOptions({attributionControl:!0}),lt.addInitHook(function(){this.options.attributionControl&&new zs().addTo(this)});var Jd=function(l){return new zs(l)};xi.Layers=Ca,xi.Zoom=bo,xi.Scale=Ci,xi.Attribution=zs,ds.layers=Sl,ds.zoom=Uu,ds.scale=xo,ds.attribution=Jd;var Wi=Oe.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Wi.addTo=function(l,d){return l.addHandler(d,this),this};var Sa={Events:be},Do=oe.touch?"touchstart mousedown":"mousedown",on=Te.extend({options:{clickTolerance:3},initialize:function(l,d,f,C){M(this,C),this._element=l,this._dragStartTarget=d||l,this._preventOutline=f},enable:function(){this._enabled||(Qe(this._dragStartTarget,Do,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(on._dragging===this&&this.finishDrag(!0),Et(this._dragStartTarget,Do,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!Ro(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){on._dragging===this&&this.finishDrag();return}if(!(on._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(on._dragging=this,this._preventOutline&&Eo(this._element),fl(),dt(),!this._moving)){this.fire("down");var d=l.touches?l.touches[0]:l,f=zn(this._element);this._startPoint=new U(d.clientX,d.clientY),this._startPos=Wn(this._element),this._parentScale=Cn(f);var C=l.type==="mousedown";Qe(document,C?"mousemove":"touchmove",this._onMove,this),Qe(document,C?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var d=l.touches&&l.touches.length===1?l.touches[0]:l,f=new U(d.clientX,d.clientY)._subtract(this._startPoint);!f.x&&!f.y||Math.abs(f.x)+Math.abs(f.y)<this.options.clickTolerance||(f.x/=this._parentScale.x,f.y/=this._parentScale.y,Gt(l),this._moved||(this.fire("dragstart"),this._moved=!0,Je(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Je(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(f),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),zt(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){Dt(document.body,"leaflet-dragging"),this._lastTarget&&(Dt(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Et(document,"mousemove touchmove",this._onMove,this),Et(document,"mouseup touchend touchcancel",this._onUp,this),gl(),Fo();var d=this._moved&&this._moving;this._moving=!1,on._dragging=!1,d&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function ya(l,d,f){var C,F=[1,4,2,8],T,G,K,X,ce,De,We,nt;for(T=0,De=l.length;T<De;T++)l[T]._code=Us(l[T],d);for(K=0;K<4;K++){for(We=F[K],C=[],T=0,De=l.length,G=De-1;T<De;G=T++)X=l[T],ce=l[G],X._code&We?ce._code&We||(nt=Rl(ce,X,We,d,f),nt._code=Us(nt,d),C.push(nt)):(ce._code&We&&(nt=Rl(ce,X,We,d,f),nt._code=Us(nt,d),C.push(nt)),C.push(X));l=C}return l}function ju(l,d){var f,C,F,T,G,K,X,ce,De;if(!l||l.length===0)throw new Error("latlngs not passed");zi(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var We=we([0,0]),nt=re(l),ti=nt.getNorthWest().distanceTo(nt.getSouthWest())*nt.getNorthEast().distanceTo(nt.getNorthWest());ti<1700&&(We=Ra(l));var Xt=l.length,Mi=[];for(f=0;f<Xt;f++){var wi=we(l[f]);Mi.push(d.project(we([wi.lat-We.lat,wi.lng-We.lng])))}for(K=X=ce=0,f=0,C=Xt-1;f<Xt;C=f++)F=Mi[f],T=Mi[C],G=F.y*T.x-T.y*F.x,X+=(F.x+T.x)*G,ce+=(F.y+T.y)*G,K+=G*3;K===0?De=Mi[0]:De=[X/K,ce/K];var Go=d.unproject(J(De));return we([Go.lat+We.lat,Go.lng+We.lng])}function Ra(l){for(var d=0,f=0,C=0,F=0;F<l.length;F++){var T=we(l[F]);d+=T.lat,f+=T.lng,C++}return we([d/C,f/C])}var eh={__proto__:null,clipPolygon:ya,polygonCenter:ju,centroid:Ra};function yl(l,d){if(!d||!l.length)return l.slice();var f=d*d;return l=nh(l,f),l=ih(l,f),l}function $u(l,d,f){return Math.sqrt(js(l,d,f,!0))}function th(l,d,f){return js(l,d,f)}function ih(l,d){var f=l.length,C=typeof Uint8Array<"u"?Uint8Array:Array,F=new C(f);F[0]=F[f-1]=1,Pa(l,F,d,0,f-1);var T,G=[];for(T=0;T<f;T++)F[T]&&G.push(l[T]);return G}function Pa(l,d,f,C,F){var T=0,G,K,X;for(K=C+1;K<=F-1;K++)X=js(l[K],l[C],l[F],!0),X>T&&(G=K,T=X);T>f&&(d[G]=1,Pa(l,d,f,C,G),Pa(l,d,f,G,F))}function nh(l,d){for(var f=[l[0]],C=1,F=0,T=l.length;C<T;C++)sh(l[C],l[F])>d&&(f.push(l[C]),F=C);return F<T-1&&f.push(l[T-1]),f}var Fa;function Ku(l,d,f,C,F){var T=C?Fa:Us(l,f),G=Us(d,f),K,X,ce;for(Fa=G;;){if(!(T|G))return[l,d];if(T&G)return!1;K=T||G,X=Rl(l,d,K,f,F),ce=Us(X,f),K===T?(l=X,T=ce):(d=X,G=ce)}}function Rl(l,d,f,C,F){var T=d.x-l.x,G=d.y-l.y,K=C.min,X=C.max,ce,De;return f&8?(ce=l.x+T*(X.y-l.y)/G,De=X.y):f&4?(ce=l.x+T*(K.y-l.y)/G,De=K.y):f&2?(ce=X.x,De=l.y+G*(X.x-l.x)/T):f&1&&(ce=K.x,De=l.y+G*(K.x-l.x)/T),new U(ce,De,F)}function Us(l,d){var f=0;return l.x<d.min.x?f|=1:l.x>d.max.x&&(f|=2),l.y<d.min.y?f|=4:l.y>d.max.y&&(f|=8),f}function sh(l,d){var f=d.x-l.x,C=d.y-l.y;return f*f+C*C}function js(l,d,f,C){var F=d.x,T=d.y,G=f.x-F,K=f.y-T,X=G*G+K*K,ce;return X>0&&(ce=((l.x-F)*G+(l.y-T)*K)/X,ce>1?(F=f.x,T=f.y):ce>0&&(F+=G*ce,T+=K*ce)),G=l.x-F,K=l.y-T,C?G*G+K*K:new U(F,T)}function zi(l){return!I(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Zu(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),zi(l)}function qu(l,d){var f,C,F,T,G,K,X,ce;if(!l||l.length===0)throw new Error("latlngs not passed");zi(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var De=we([0,0]),We=re(l),nt=We.getNorthWest().distanceTo(We.getSouthWest())*We.getNorthEast().distanceTo(We.getNorthWest());nt<1700&&(De=Ra(l));var ti=l.length,Xt=[];for(f=0;f<ti;f++){var Mi=we(l[f]);Xt.push(d.project(we([Mi.lat-De.lat,Mi.lng-De.lng])))}for(f=0,C=0;f<ti-1;f++)C+=Xt[f].distanceTo(Xt[f+1])/2;if(C===0)ce=Xt[0];else for(f=0,T=0;f<ti-1;f++)if(G=Xt[f],K=Xt[f+1],F=G.distanceTo(K),T+=F,T>C){X=(T-C)/F,ce=[K.x-X*(K.x-G.x),K.y-X*(K.y-G.y)];break}var wi=d.unproject(J(ce));return we([wi.lat+De.lat,wi.lng+De.lng])}var Yu={__proto__:null,simplify:yl,pointToSegmentDistance:$u,closestPointOnSegment:th,clipSegment:Ku,_getEdgeIntersection:Rl,_getBitCode:Us,_sqClosestPointOnSegment:js,isFlat:zi,_flat:Zu,polylineCenter:qu},Ea={project:function(l){return new U(l.lng,l.lat)},unproject:function(l){return new fe(l.y,l.x)},bounds:new N([-180,-90],[180,90])},ba={R:6378137,R_MINOR:6356752314245179e-9,bounds:new N([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var d=Math.PI/180,f=this.R,C=l.lat*d,F=this.R_MINOR/f,T=Math.sqrt(1-F*F),G=T*Math.sin(C),K=Math.tan(Math.PI/4-C/2)/Math.pow((1-G)/(1+G),T/2);return C=-f*Math.log(Math.max(K,1e-10)),new U(l.lng*d*f,C)},unproject:function(l){for(var d=180/Math.PI,f=this.R,C=this.R_MINOR/f,F=Math.sqrt(1-C*C),T=Math.exp(-l.y/f),G=Math.PI/2-2*Math.atan(T),K=0,X=.1,ce;K<15&&Math.abs(X)>1e-7;K++)ce=F*Math.sin(G),ce=Math.pow((1-ce)/(1+ce),F/2),X=Math.PI/2-2*Math.atan(T*ce)-G,G+=X;return new fe(G*d,l.x*d/f)}},oh={__proto__:null,LonLat:Ea,Mercator:ba,SphericalMercator:qe},rh=s({},Ze,{code:"EPSG:3395",projection:ba,transformation:function(){var l=.5/(Math.PI*ba.R);return it(l,.5,-l,.5)}()}),Qu=s({},Ze,{code:"EPSG:4326",projection:Ea,transformation:it(1/180,1,-1/180,.5)}),lh=s({},$e,{projection:Ea,transformation:it(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,d){var f=d.lng-l.lng,C=d.lat-l.lat;return Math.sqrt(f*f+C*C)},infinite:!0});$e.Earth=Ze,$e.EPSG3395=rh,$e.EPSG3857=st,$e.EPSG900913=yt,$e.EPSG4326=Qu,$e.Simple=lh;var rn=Te.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[p(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[p(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var d=l.target;if(d.hasLayer(this)){if(this._map=d,this._zoomAnimated=d._zoomAnimated,this.getEvents){var f=this.getEvents();d.on(f,this),this.once("remove",function(){d.off(f,this)},this)}this.onAdd(d),this.fire("add"),d.fire("layeradd",{layer:this})}}});lt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var d=p(l);return this._layers[d]?this:(this._layers[d]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var d=p(l);return this._layers[d]?(this._loaded&&l.onRemove(this),delete this._layers[d],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return p(l)in this._layers},eachLayer:function(l,d){for(var f in this._layers)l.call(d,this._layers[f]);return this},_addLayers:function(l){l=l?I(l)?l:[l]:[];for(var d=0,f=l.length;d<f;d++)this.addLayer(l[d])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[p(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var d=p(l);this._zoomBoundLayers[d]&&(delete this._zoomBoundLayers[d],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,d=-1/0,f=this._getZoomSpan();for(var C in this._zoomBoundLayers){var F=this._zoomBoundLayers[C].options;l=F.minZoom===void 0?l:Math.min(l,F.minZoom),d=F.maxZoom===void 0?d:Math.max(d,F.maxZoom)}this._layersMaxZoom=d===-1/0?void 0:d,this._layersMinZoom=l===1/0?void 0:l,f!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var hs=rn.extend({initialize:function(l,d){M(this,d),this._layers={};var f,C;if(l)for(f=0,C=l.length;f<C;f++)this.addLayer(l[f])},addLayer:function(l){var d=this.getLayerId(l);return this._layers[d]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var d=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[d]&&this._map.removeLayer(this._layers[d]),delete this._layers[d],this},hasLayer:function(l){var d=typeof l=="number"?l:this.getLayerId(l);return d in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var d=Array.prototype.slice.call(arguments,1),f,C;for(f in this._layers)C=this._layers[f],C[l]&&C[l].apply(C,d);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,d){for(var f in this._layers)l.call(d,this._layers[f]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return p(l)}}),Sr=function(l,d){return new hs(l,d)},Un=hs.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),hs.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),hs.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new Pe;for(var d in this._layers){var f=this._layers[d];l.extend(f.getBounds?f.getBounds():f.getLatLng())}return l}}),Xu=function(l,d){return new Un(l,d)},$s=Oe.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){M(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,d){var f=this._getIconUrl(l);if(!f){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var C=this._createImg(f,d&&d.tagName==="IMG"?d:null);return this._setIconStyles(C,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(C.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),C},_setIconStyles:function(l,d){var f=this.options,C=f[d+"Size"];typeof C=="number"&&(C=[C,C]);var F=J(C),T=J(d==="shadow"&&f.shadowAnchor||f.iconAnchor||F&&F.divideBy(2,!0));l.className="leaflet-marker-"+d+" "+(f.className||""),T&&(l.style.marginLeft=-T.x+"px",l.style.marginTop=-T.y+"px"),F&&(l.style.width=F.x+"px",l.style.height=F.y+"px")},_createImg:function(l,d){return d=d||document.createElement("img"),d.src=l,d},_getIconUrl:function(l){return oe.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function Ju(l){return new $s(l)}var Mo=$s.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof Mo.imagePath!="string"&&(Mo.imagePath=this._detectIconPath()),(this.options.imagePath||Mo.imagePath)+$s.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var d=function(f,C,F){var T=C.exec(f);return T&&T[F]};return l=d(l,/^url\((['"])?(.+)\1\)$/,2),l&&d(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=et("div","leaflet-default-icon-path",document.body),d=Hs(l,"background-image")||Hs(l,"backgroundImage");if(document.body.removeChild(l),d=this._stripUrl(d),d)return d;var f=document.querySelector('link[href$="leaflet.css"]');return f?f.href.substring(0,f.href.length-11-1):""}}),xa=Wi.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new on(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Je(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Dt(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var d=this._marker,f=d._map,C=this._marker.options.autoPanSpeed,F=this._marker.options.autoPanPadding,T=Wn(d._icon),G=f.getPixelBounds(),K=f.getPixelOrigin(),X=Z(G.min._subtract(K).add(F),G.max._subtract(K).subtract(F));if(!X.contains(T)){var ce=J((Math.max(X.max.x,T.x)-X.max.x)/(G.max.x-X.max.x)-(Math.min(X.min.x,T.x)-X.min.x)/(G.min.x-X.min.x),(Math.max(X.max.y,T.y)-X.max.y)/(G.max.y-X.max.y)-(Math.min(X.min.y,T.y)-X.min.y)/(G.min.y-X.min.y)).multiplyBy(C);f.panBy(ce,{animate:!1}),this._draggable._newPos._add(ce),this._draggable._startPos._add(ce),zt(d._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=ue(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(Re(this._panRequest),this._panRequest=ue(this._adjustPan.bind(this,l)))},_onDrag:function(l){var d=this._marker,f=d._shadow,C=Wn(d._icon),F=d._map.layerPointToLatLng(C);f&&zt(f,C),d._latlng=F,l.latlng=F,l.oldLatLng=this._oldLatLng,d.fire("move",l).fire("drag",l)},_onDragEnd:function(l){Re(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),jn=rn.extend({options:{icon:new Mo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,d){M(this,d),this._latlng=we(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var d=this._latlng;return this._latlng=we(l),this.update(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,d="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),f=l.icon.createIcon(this._icon),C=!1;f!==this._icon&&(this._icon&&this._removeIcon(),C=!0,l.title&&(f.title=l.title),f.tagName==="IMG"&&(f.alt=l.alt||"")),Je(f,d),l.keyboard&&(f.tabIndex="0",f.setAttribute("role","button")),this._icon=f,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Qe(f,"focus",this._panOnFocus,this);var F=l.icon.createShadow(this._shadow),T=!1;F!==this._shadow&&(this._removeShadow(),T=!0),F&&(Je(F,d),F.alt=""),this._shadow=F,l.opacity<1&&this._updateOpacity(),C&&this.getPane().appendChild(this._icon),this._initInteraction(),F&&T&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Et(this._icon,"focus",this._panOnFocus,this),_t(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&_t(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&zt(this._icon,l),this._shadow&&zt(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(d)},_initInteraction:function(){if(this.options.interactive&&(Je(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),xa)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new xa(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&vi(this._icon,l),this._shadow&&vi(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var d=this.options.icon.options,f=d.iconSize?J(d.iconSize):J(0,0),C=d.iconAnchor?J(d.iconAnchor):J(0,0);l.panInside(this._latlng,{paddingTopLeft:C,paddingBottomRight:f.subtract(C)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function ah(l,d){return new jn(l,d)}var ps=rn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return M(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Pl=ps.extend({options:{fill:!0,radius:10},initialize:function(l,d){M(this,d),this._latlng=we(l),this._radius=this.options.radius},setLatLng:function(l){var d=this._latlng;return this._latlng=we(l),this.redraw(),this.fire("move",{oldLatLng:d,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var d=l&&l.radius||this._radius;return ps.prototype.setStyle.call(this,l),this.setRadius(d),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,d=this._radiusY||l,f=this._clickTolerance(),C=[l+f,d+f];this._pxBounds=new N(this._point.subtract(C),this._point.add(C))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function ec(l,d){return new Pl(l,d)}var Fl=Pl.extend({initialize:function(l,d,f){if(typeof d=="number"&&(d=s({},f,{radius:d})),M(this,d),this._latlng=we(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new Pe(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:ps.prototype.setStyle,_project:function(){var l=this._latlng.lng,d=this._latlng.lat,f=this._map,C=f.options.crs;if(C.distance===Ze.distance){var F=Math.PI/180,T=this._mRadius/Ze.R/F,G=f.project([d+T,l]),K=f.project([d-T,l]),X=G.add(K).divideBy(2),ce=f.unproject(X).lat,De=Math.acos((Math.cos(T*F)-Math.sin(d*F)*Math.sin(ce*F))/(Math.cos(d*F)*Math.cos(ce*F)))/F;(isNaN(De)||De===0)&&(De=T/Math.cos(Math.PI/180*d)),this._point=X.subtract(f.getPixelOrigin()),this._radius=isNaN(De)?0:X.x-f.project([ce,l-De]).x,this._radiusY=X.y-G.y}else{var We=C.unproject(C.project(this._latlng).subtract([this._mRadius,0]));this._point=f.latLngToLayerPoint(this._latlng),this._radius=this._point.x-f.latLngToLayerPoint(We).x}this._updateBounds()}});function yr(l,d,f){return new Fl(l,d,f)}var Di=ps.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,d){M(this,d),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var d=1/0,f=null,C=js,F,T,G=0,K=this._parts.length;G<K;G++)for(var X=this._parts[G],ce=1,De=X.length;ce<De;ce++){F=X[ce-1],T=X[ce];var We=C(l,F,T,!0);We<d&&(d=We,f=C(l,F,T))}return f&&(f.distance=Math.sqrt(d)),f},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qu(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,d){return d=d||this._defaultShape(),l=we(l),d.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new Pe,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return zi(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var d=[],f=zi(l),C=0,F=l.length;C<F;C++)f?(d[C]=we(l[C]),this._bounds.extend(d[C])):d[C]=this._convertLatLngs(l[C]);return d},_project:function(){var l=new N;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),d=new U(l,l);this._rawPxBounds&&(this._pxBounds=new N([this._rawPxBounds.min.subtract(d),this._rawPxBounds.max.add(d)]))},_projectLatlngs:function(l,d,f){var C=l[0]instanceof fe,F=l.length,T,G;if(C){for(G=[],T=0;T<F;T++)G[T]=this._map.latLngToLayerPoint(l[T]),f.extend(G[T]);d.push(G)}else for(T=0;T<F;T++)this._projectLatlngs(l[T],d,f)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var d=this._parts,f,C,F,T,G,K,X;for(f=0,F=0,T=this._rings.length;f<T;f++)for(X=this._rings[f],C=0,G=X.length;C<G-1;C++)K=Ku(X[C],X[C+1],l,C,!0),K&&(d[F]=d[F]||[],d[F].push(K[0]),(K[1]!==X[C+1]||C===G-2)&&(d[F].push(K[1]),F++))}},_simplifyPoints:function(){for(var l=this._parts,d=this.options.smoothFactor,f=0,C=l.length;f<C;f++)l[f]=yl(l[f],d)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,d){var f,C,F,T,G,K,X=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(f=0,T=this._parts.length;f<T;f++)for(K=this._parts[f],C=0,G=K.length,F=G-1;C<G;F=C++)if(!(!d&&C===0)&&$u(l,K[F],K[C])<=X)return!0;return!1}});function uh(l,d){return new Di(l,d)}Di._flat=Zu;var $n=Di.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ju(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var d=Di.prototype._convertLatLngs.call(this,l),f=d.length;return f>=2&&d[0]instanceof fe&&d[0].equals(d[f-1])&&d.pop(),d},_setLatLngs:function(l){Di.prototype._setLatLngs.call(this,l),zi(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return zi(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,d=this.options.weight,f=new U(d,d);if(l=new N(l.min.subtract(f),l.max.add(f)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var C=0,F=this._rings.length,T;C<F;C++)T=ya(this._rings[C],l,!0),T.length&&this._parts.push(T)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var d=!1,f,C,F,T,G,K,X,ce;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(T=0,X=this._parts.length;T<X;T++)for(f=this._parts[T],G=0,ce=f.length,K=ce-1;G<ce;K=G++)C=f[G],F=f[K],C.y>l.y!=F.y>l.y&&l.x<(F.x-C.x)*(l.y-C.y)/(F.y-C.y)+C.x&&(d=!d);return d||Di.prototype._containsPoint.call(this,l,!0)}});function ch(l,d){return new $n(l,d)}var Sn=Un.extend({initialize:function(l,d){M(this,d),this._layers={},l&&this.addData(l)},addData:function(l){var d=I(l)?l:l.features,f,C,F;if(d){for(f=0,C=d.length;f<C;f++)F=d[f],(F.geometries||F.geometry||F.features||F.coordinates)&&this.addData(F);return this}var T=this.options;if(T.filter&&!T.filter(l))return this;var G=To(l,T);return G?(G.feature=Ml(l),G.defaultOptions=G.options,this.resetStyle(G),T.onEachFeature&&T.onEachFeature(l,G),this.addLayer(G)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=s({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(d){this._setLayerStyle(d,l)},this)},_setLayerStyle:function(l,d){l.setStyle&&(typeof d=="function"&&(d=d(l.feature)),l.setStyle(d))}});function To(l,d){var f=l.type==="Feature"?l.geometry:l,C=f?f.coordinates:null,F=[],T=d&&d.pointToLayer,G=d&&d.coordsToLatLng||bl,K,X,ce,De;if(!C&&!f)return null;switch(f.type){case"Point":return K=G(C),El(T,l,K,d);case"MultiPoint":for(ce=0,De=C.length;ce<De;ce++)K=G(C[ce]),F.push(El(T,l,K,d));return new Un(F);case"LineString":case"MultiLineString":return X=Rr(C,f.type==="LineString"?0:1,G),new Di(X,d);case"Polygon":case"MultiPolygon":return X=Rr(C,f.type==="Polygon"?1:2,G),new $n(X,d);case"GeometryCollection":for(ce=0,De=f.geometries.length;ce<De;ce++){var We=To({geometry:f.geometries[ce],type:"Feature",properties:l.properties},d);We&&F.push(We)}return new Un(F);case"FeatureCollection":for(ce=0,De=f.features.length;ce<De;ce++){var nt=To(f.features[ce],d);nt&&F.push(nt)}return new Un(F);default:throw new Error("Invalid GeoJSON object.")}}function El(l,d,f,C){return l?l(d,f):new jn(f,C&&C.markersInheritOptions&&C)}function bl(l){return new fe(l[1],l[0],l[2])}function Rr(l,d,f){for(var C=[],F=0,T=l.length,G;F<T;F++)G=d?Rr(l[F],d-1,f):(f||bl)(l[F]),C.push(G);return C}function xl(l,d){return l=we(l),l.alt!==void 0?[y(l.lng,d),y(l.lat,d),y(l.alt,d)]:[y(l.lng,d),y(l.lat,d)]}function Dl(l,d,f,C){for(var F=[],T=0,G=l.length;T<G;T++)F.push(d?Dl(l[T],zi(l[T])?0:d-1,f,C):xl(l[T],C));return!d&&f&&F.length>0&&F.push(F[0].slice()),F}function _o(l,d){return l.feature?s({},l.feature,{geometry:d}):Ml(d)}function Ml(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var Da={toGeoJSON:function(l){return _o(this,{type:"Point",coordinates:xl(this.getLatLng(),l)})}};jn.include(Da),Fl.include(Da),Pl.include(Da),Di.include({toGeoJSON:function(l){var d=!zi(this._latlngs),f=Dl(this._latlngs,d?1:0,!1,l);return _o(this,{type:(d?"Multi":"")+"LineString",coordinates:f})}}),$n.include({toGeoJSON:function(l){var d=!zi(this._latlngs),f=d&&!zi(this._latlngs[0]),C=Dl(this._latlngs,f?2:d?1:0,!0,l);return d||(C=[C]),_o(this,{type:(f?"Multi":"")+"Polygon",coordinates:C})}}),hs.include({toMultiPoint:function(l){var d=[];return this.eachLayer(function(f){d.push(f.toGeoJSON(l).geometry.coordinates)}),_o(this,{type:"MultiPoint",coordinates:d})},toGeoJSON:function(l){var d=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(d==="MultiPoint")return this.toMultiPoint(l);var f=d==="GeometryCollection",C=[];return this.eachLayer(function(F){if(F.toGeoJSON){var T=F.toGeoJSON(l);if(f)C.push(T.geometry);else{var G=Ml(T);G.type==="FeatureCollection"?C.push.apply(C,G.features):C.push(G)}}}),f?_o(this,{geometries:C,type:"GeometryCollection"}):{type:"FeatureCollection",features:C}}});function tc(l,d){return new Sn(l,d)}var ln=tc,fs=rn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,d,f){this._url=l,this._bounds=re(d),M(this,f)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Je(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){_t(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&yo(this._image),this},bringToBack:function(){return this._map&&Vn(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=re(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",d=this._image=l?this._url:et("img");if(Je(d,"leaflet-image-layer"),this._zoomAnimated&&Je(d,"leaflet-zoom-animated"),this.options.className&&Je(d,this.options.className),d.onselectstart=S,d.onmousemove=S,d.onload=u(this.fire,this,"load"),d.onerror=u(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(d.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=d.src;return}d.src=this._url,d.alt=this.options.alt},_animateZoom:function(l){var d=this._map.getZoomScale(l.zoom),f=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;tn(this._image,f,d)},_reset:function(){var l=this._image,d=new N(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),f=d.getSize();zt(l,d.min),l.style.width=f.x+"px",l.style.height=f.y+"px"},_updateOpacity:function(){vi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),ic=function(l,d,f){return new fs(l,d,f)},Ma=fs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",d=this._image=l?this._url:et("video");if(Je(d,"leaflet-image-layer"),this._zoomAnimated&&Je(d,"leaflet-zoom-animated"),this.options.className&&Je(d,this.options.className),d.onselectstart=S,d.onmousemove=S,d.onloadeddata=u(this.fire,this,"load"),l){for(var f=d.getElementsByTagName("source"),C=[],F=0;F<f.length;F++)C.push(f[F].src);this._url=f.length>0?C:[d.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(d.style,"objectFit")&&(d.style.objectFit="fill"),d.autoplay=!!this.options.autoplay,d.loop=!!this.options.loop,d.muted=!!this.options.muted,d.playsInline=!!this.options.playsInline;for(var T=0;T<this._url.length;T++){var G=et("source");G.src=this._url[T],d.appendChild(G)}}});function nc(l,d,f){return new Ma(l,d,f)}var Ta=fs.extend({_initImage:function(){var l=this._image=this._url;Je(l,"leaflet-image-layer"),this._zoomAnimated&&Je(l,"leaflet-zoom-animated"),this.options.className&&Je(l,this.options.className),l.onselectstart=S,l.onmousemove=S}});function _a(l,d,f){return new Ta(l,d,f)}var yn=rn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,d){l&&(l instanceof fe||I(l))?(this._latlng=we(l),M(this,d)):(M(this,l),this._source=d),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&vi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&vi(this._container,1),this.bringToFront(),this.options.interactive&&(Je(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(vi(this._container,0),this._removeTimeout=setTimeout(u(_t,void 0,this._container),200)):_t(this._container),this.options.interactive&&(Dt(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=we(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&yo(this._container),this},bringToBack:function(){return this._map&&Vn(this._container),this},_prepareOpen:function(l){var d=this._source;if(!d._map)return!1;if(d instanceof Un){d=null;var f=this._source._layers;for(var C in f)if(f[C]._map){d=f[C];break}if(!d)return!1;this._source=d}if(!l)if(d.getCenter)l=d.getCenter();else if(d.getLatLng)l=d.getLatLng();else if(d.getBounds)l=d.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,d=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof d=="string")l.innerHTML=d;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(d)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),d=J(this.options.offset),f=this._getAnchor();this._zoomAnimated?zt(this._container,l.add(f)):d=d.add(l).add(f);var C=this._containerBottom=-d.y,F=this._containerLeft=-Math.round(this._containerWidth/2)+d.x;this._container.style.bottom=C+"px",this._container.style.left=F+"px"}},_getAnchor:function(){return[0,0]}});lt.include({_initOverlay:function(l,d,f,C){var F=d;return F instanceof l||(F=new l(C).setContent(d)),f&&F.setLatLng(f),F}}),rn.include({_initOverlay:function(l,d,f,C){var F=f;return F instanceof l?(M(F,C),F._source=this):(F=d&&!C?d:new l(C,this),F.setContent(f)),F}});var Tl=yn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,yn.prototype.openOn.call(this,l)},onAdd:function(l){yn.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ps||this._source.on("preclick",wn))},onRemove:function(l){yn.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ps||this._source.off("preclick",wn))},getEvents:function(){var l=yn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",d=this._container=et("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),f=this._wrapper=et("div",l+"-content-wrapper",d);if(this._contentNode=et("div",l+"-content",f),vr(d),vl(this._contentNode),Qe(d,"contextmenu",wn),this._tipContainer=et("div",l+"-tip-container",d),this._tip=et("div",l+"-tip",this._tipContainer),this.options.closeButton){var C=this._closeButton=et("a",l+"-close-button",d);C.setAttribute("role","button"),C.setAttribute("aria-label","Close popup"),C.href="#close",C.innerHTML='<span aria-hidden="true">&#215;</span>',Qe(C,"click",function(F){Gt(F),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,d=l.style;d.width="",d.whiteSpace="nowrap";var f=l.offsetWidth;f=Math.min(f,this.options.maxWidth),f=Math.max(f,this.options.minWidth),d.width=f+1+"px",d.whiteSpace="",d.height="";var C=l.offsetHeight,F=this.options.maxHeight,T="leaflet-popup-scrolled";F&&C>F?(d.height=F+"px",Je(l,T)):Dt(l,T),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),f=this._getAnchor();zt(this._container,d.add(f))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,d=parseInt(Hs(this._container,"marginBottom"),10)||0,f=this._container.offsetHeight+d,C=this._containerWidth,F=new U(this._containerLeft,-f-this._containerBottom);F._add(Wn(this._container));var T=l.layerPointToContainerPoint(F),G=J(this.options.autoPanPadding),K=J(this.options.autoPanPaddingTopLeft||G),X=J(this.options.autoPanPaddingBottomRight||G),ce=l.getSize(),De=0,We=0;T.x+C+X.x>ce.x&&(De=T.x+C-ce.x+X.x),T.x-De-K.x<0&&(De=T.x-K.x),T.y+f+X.y>ce.y&&(We=T.y+f-ce.y+X.y),T.y-We-K.y<0&&(We=T.y-K.y),(De||We)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([De,We]))}},_getAnchor:function(){return J(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Lo=function(l,d){return new Tl(l,d)};lt.mergeOptions({closePopupOnClick:!0}),lt.include({openPopup:function(l,d,f){return this._initOverlay(Tl,l,d,f).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),rn.include({bindPopup:function(l,d){return this._popup=this._initOverlay(Tl,this._popup,l,d),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Un||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){sn(l);var d=l.layer||l.target;if(this._popup._source===d&&!(d instanceof ps)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=d,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var Ao=yn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){yn.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){yn.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=yn.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",d=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=et("div",d),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var d,f,C=this._map,F=this._container,T=C.latLngToContainerPoint(C.getCenter()),G=C.layerPointToContainerPoint(l),K=this.options.direction,X=F.offsetWidth,ce=F.offsetHeight,De=J(this.options.offset),We=this._getAnchor();K==="top"?(d=X/2,f=ce):K==="bottom"?(d=X/2,f=0):K==="center"?(d=X/2,f=ce/2):K==="right"?(d=0,f=ce/2):K==="left"?(d=X,f=ce/2):G.x<T.x?(K="right",d=0,f=ce/2):(K="left",d=X+(De.x+We.x)*2,f=ce/2),l=l.subtract(J(d,f,!0)).add(De).add(We),Dt(F,"leaflet-tooltip-right"),Dt(F,"leaflet-tooltip-left"),Dt(F,"leaflet-tooltip-top"),Dt(F,"leaflet-tooltip-bottom"),Je(F,"leaflet-tooltip-"+K),zt(F,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&vi(this._container,l)},_animateZoom:function(l){var d=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(d)},_getAnchor:function(){return J(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Pr=function(l,d){return new Ao(l,d)};lt.include({openTooltip:function(l,d,f){return this._initOverlay(Ao,l,d,f).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),rn.include({bindTooltip:function(l,d){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(Ao,this._tooltip,l,d),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var d=l?"off":"on",f={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?f.add=this._openTooltip:(f.mouseover=this._openTooltip,f.mouseout=this.closeTooltip,f.click=this._openTooltip,this._map?this._addFocusListeners():f.add=this._addFocusListeners),this._tooltip.options.sticky&&(f.mousemove=this._moveTooltip),this[d](f),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Un||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var d=typeof l.getElement=="function"&&l.getElement();d&&(Qe(d,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),Qe(d,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var d=typeof l.getElement=="function"&&l.getElement();d&&d.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var d=this;this._map.once("moveend",function(){d._openOnceFlag=!1,d._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var d=l.latlng,f,C;this._tooltip.options.sticky&&l.originalEvent&&(f=this._map.mouseEventToContainerPoint(l.originalEvent),C=this._map.containerPointToLayerPoint(f),d=this._map.layerPointToLatLng(C)),this._tooltip.setLatLng(d)}});var _l=$s.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var d=l&&l.tagName==="DIV"?l:document.createElement("div"),f=this.options;if(f.html instanceof Element?(dl(d),d.appendChild(f.html)):d.innerHTML=f.html!==!1?f.html:"",f.bgPos){var C=J(f.bgPos);d.style.backgroundPosition=-C.x+"px "+-C.y+"px"}return this._setIconStyles(d,"icon"),d},createShadow:function(){return null}});function sc(l){return new _l(l)}$s.Default=Mo;var gs=rn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:oe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){M(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),_t(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(yo(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Vn(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof U?l:new U(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var d=this.getPane().children,f=-l(-1/0,1/0),C=0,F=d.length,T;C<F;C++)T=d[C].style.zIndex,d[C]!==this._container&&T&&(f=l(f,+T));isFinite(f)&&(this.options.zIndex=f+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!oe.ielt9){vi(this._container,this.options.opacity);var l=+new Date,d=!1,f=!1;for(var C in this._tiles){var F=this._tiles[C];if(!(!F.current||!F.loaded)){var T=Math.min(1,(l-F.loaded)/200);vi(F.el,T),T<1?d=!0:(F.active?f=!0:this._onOpaqueTile(F),F.active=!0)}}f&&!this._noPrune&&this._pruneTiles(),d&&(Re(this._fadeFrame),this._fadeFrame=ue(this._updateOpacity,this))}},_onOpaqueTile:S,_initContainer:function(){this._container||(this._container=et("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,d=this.options.maxZoom;if(l!==void 0){for(var f in this._levels)f=Number(f),this._levels[f].el.children.length||f===l?(this._levels[f].el.style.zIndex=d-Math.abs(l-f),this._onUpdateLevel(f)):(_t(this._levels[f].el),this._removeTilesAtZoom(f),this._onRemoveLevel(f),delete this._levels[f]);var C=this._levels[l],F=this._map;return C||(C=this._levels[l]={},C.el=et("div","leaflet-tile-container leaflet-zoom-animated",this._container),C.el.style.zIndex=d,C.origin=F.project(F.unproject(F.getPixelOrigin()),l).round(),C.zoom=l,this._setZoomTransform(C,F.getCenter(),F.getZoom()),S(C.el.offsetWidth),this._onCreateLevel(C)),this._level=C,C}},_onUpdateLevel:S,_onRemoveLevel:S,_onCreateLevel:S,_pruneTiles:function(){if(this._map){var l,d,f=this._map.getZoom();if(f>this.options.maxZoom||f<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)d=this._tiles[l],d.retain=d.current;for(l in this._tiles)if(d=this._tiles[l],d.current&&!d.active){var C=d.coords;this._retainParent(C.x,C.y,C.z,C.z-5)||this._retainChildren(C.x,C.y,C.z,C.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var d in this._tiles)this._tiles[d].coords.z===l&&this._removeTile(d)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)_t(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,d,f,C){var F=Math.floor(l/2),T=Math.floor(d/2),G=f-1,K=new U(+F,+T);K.z=+G;var X=this._tileCoordsToKey(K),ce=this._tiles[X];return ce&&ce.active?(ce.retain=!0,!0):(ce&&ce.loaded&&(ce.retain=!0),G>C?this._retainParent(F,T,G,C):!1)},_retainChildren:function(l,d,f,C){for(var F=2*l;F<2*l+2;F++)for(var T=2*d;T<2*d+2;T++){var G=new U(F,T);G.z=f+1;var K=this._tileCoordsToKey(G),X=this._tiles[K];if(X&&X.active){X.retain=!0;continue}else X&&X.loaded&&(X.retain=!0);f+1<C&&this._retainChildren(F,T,f+1,C)}},_resetView:function(l){var d=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),d,d)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var d=this.options;return d.minNativeZoom!==void 0&&l<d.minNativeZoom?d.minNativeZoom:d.maxNativeZoom!==void 0&&d.maxNativeZoom<l?d.maxNativeZoom:l},_setView:function(l,d,f,C){var F=Math.round(d);this.options.maxZoom!==void 0&&F>this.options.maxZoom||this.options.minZoom!==void 0&&F<this.options.minZoom?F=void 0:F=this._clampZoom(F);var T=this.options.updateWhenZooming&&F!==this._tileZoom;(!C||T)&&(this._tileZoom=F,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),F!==void 0&&this._update(l),f||this._pruneTiles(),this._noPrune=!!f),this._setZoomTransforms(l,d)},_setZoomTransforms:function(l,d){for(var f in this._levels)this._setZoomTransform(this._levels[f],l,d)},_setZoomTransform:function(l,d,f){var C=this._map.getZoomScale(f,l.zoom),F=l.origin.multiplyBy(C).subtract(this._map._getNewPixelOrigin(d,f)).round();oe.any3d?tn(l.el,F,C):zt(l.el,F)},_resetGrid:function(){var l=this._map,d=l.options.crs,f=this._tileSize=this.getTileSize(),C=this._tileZoom,F=this._map.getPixelWorldBounds(this._tileZoom);F&&(this._globalTileRange=this._pxBoundsToTileRange(F)),this._wrapX=d.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,d.wrapLng[0]],C).x/f.x),Math.ceil(l.project([0,d.wrapLng[1]],C).x/f.y)],this._wrapY=d.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([d.wrapLat[0],0],C).y/f.x),Math.ceil(l.project([d.wrapLat[1],0],C).y/f.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var d=this._map,f=d._animatingZoom?Math.max(d._animateToZoom,d.getZoom()):d.getZoom(),C=d.getZoomScale(f,this._tileZoom),F=d.project(l,this._tileZoom).floor(),T=d.getSize().divideBy(C*2);return new N(F.subtract(T),F.add(T))},_update:function(l){var d=this._map;if(d){var f=this._clampZoom(d.getZoom());if(l===void 0&&(l=d.getCenter()),this._tileZoom!==void 0){var C=this._getTiledPixelBounds(l),F=this._pxBoundsToTileRange(C),T=F.getCenter(),G=[],K=this.options.keepBuffer,X=new N(F.getBottomLeft().subtract([K,-K]),F.getTopRight().add([K,-K]));if(!(isFinite(F.min.x)&&isFinite(F.min.y)&&isFinite(F.max.x)&&isFinite(F.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ce in this._tiles){var De=this._tiles[ce].coords;(De.z!==this._tileZoom||!X.contains(new U(De.x,De.y)))&&(this._tiles[ce].current=!1)}if(Math.abs(f-this._tileZoom)>1){this._setView(l,f);return}for(var We=F.min.y;We<=F.max.y;We++)for(var nt=F.min.x;nt<=F.max.x;nt++){var ti=new U(nt,We);if(ti.z=this._tileZoom,!!this._isValidTile(ti)){var Xt=this._tiles[this._tileCoordsToKey(ti)];Xt?Xt.current=!0:G.push(ti)}}if(G.sort(function(wi,Go){return wi.distanceTo(T)-Go.distanceTo(T)}),G.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Mi=document.createDocumentFragment();for(nt=0;nt<G.length;nt++)this._addTile(G[nt],Mi);this._level.el.appendChild(Mi)}}}},_isValidTile:function(l){var d=this._map.options.crs;if(!d.infinite){var f=this._globalTileRange;if(!d.wrapLng&&(l.x<f.min.x||l.x>f.max.x)||!d.wrapLat&&(l.y<f.min.y||l.y>f.max.y))return!1}if(!this.options.bounds)return!0;var C=this._tileCoordsToBounds(l);return re(this.options.bounds).overlaps(C)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var d=this._map,f=this.getTileSize(),C=l.scaleBy(f),F=C.add(f),T=d.unproject(C,l.z),G=d.unproject(F,l.z);return[T,G]},_tileCoordsToBounds:function(l){var d=this._tileCoordsToNwSe(l),f=new Pe(d[0],d[1]);return this.options.noWrap||(f=this._map.wrapLatLngBounds(f)),f},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var d=l.split(":"),f=new U(+d[0],+d[1]);return f.z=+d[2],f},_removeTile:function(l){var d=this._tiles[l];d&&(_t(d.el),delete this._tiles[l],this.fire("tileunload",{tile:d.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){Je(l,"leaflet-tile");var d=this.getTileSize();l.style.width=d.x+"px",l.style.height=d.y+"px",l.onselectstart=S,l.onmousemove=S,oe.ielt9&&this.options.opacity<1&&vi(l,this.options.opacity)},_addTile:function(l,d){var f=this._getTilePos(l),C=this._tileCoordsToKey(l),F=this.createTile(this._wrapCoords(l),u(this._tileReady,this,l));this._initTile(F),this.createTile.length<2&&ue(u(this._tileReady,this,l,null,F)),zt(F,f),this._tiles[C]={el:F,coords:l,current:!0},d.appendChild(F),this.fire("tileloadstart",{tile:F,coords:l})},_tileReady:function(l,d,f){d&&this.fire("tileerror",{error:d,tile:f,coords:l});var C=this._tileCoordsToKey(l);f=this._tiles[C],f&&(f.loaded=+new Date,this._map._fadeAnimated?(vi(f.el,0),Re(this._fadeFrame),this._fadeFrame=ue(this._updateOpacity,this)):(f.active=!0,this._pruneTiles()),d||(Je(f.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:f.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),oe.ielt9||!this._map._fadeAnimated?ue(this._pruneTiles,this):setTimeout(u(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var d=new U(this._wrapX?v(l.x,this._wrapX):l.x,this._wrapY?v(l.y,this._wrapY):l.y);return d.z=l.z,d},_pxBoundsToTileRange:function(l){var d=this.getTileSize();return new N(l.min.unscaleBy(d).floor(),l.max.unscaleBy(d).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function Io(l){return new gs(l)}var ms=gs.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,d){this._url=l,d=M(this,d),d.detectRetina&&oe.retina&&d.maxZoom>0?(d.tileSize=Math.floor(d.tileSize/2),d.zoomReverse?(d.zoomOffset--,d.minZoom=Math.min(d.maxZoom,d.minZoom+1)):(d.zoomOffset++,d.maxZoom=Math.max(d.minZoom,d.maxZoom-1)),d.minZoom=Math.max(0,d.minZoom)):d.zoomReverse?d.minZoom=Math.min(d.maxZoom,d.minZoom):d.maxZoom=Math.max(d.minZoom,d.maxZoom),typeof d.subdomains=="string"&&(d.subdomains=d.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,d){return this._url===l&&d===void 0&&(d=!0),this._url=l,d||this.redraw(),this},createTile:function(l,d){var f=document.createElement("img");return Qe(f,"load",u(this._tileOnLoad,this,d,f)),Qe(f,"error",u(this._tileOnError,this,d,f)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(f.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(f.referrerPolicy=this.options.referrerPolicy),f.alt="",f.src=this.getTileUrl(l),f},getTileUrl:function(l){var d={r:oe.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var f=this._globalTileRange.max.y-l.y;this.options.tms&&(d.y=f),d["-y"]=f}return k(this._url,s(d,this.options))},_tileOnLoad:function(l,d){oe.ielt9?setTimeout(u(l,this,null,d),0):l(null,d)},_tileOnError:function(l,d,f){var C=this.options.errorTileUrl;C&&d.getAttribute("src")!==C&&(d.src=C),l(f,d)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,d=this.options.maxZoom,f=this.options.zoomReverse,C=this.options.zoomOffset;return f&&(l=d-l),l+C},_getSubdomain:function(l){var d=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[d]},_abortLoading:function(){var l,d;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(d=this._tiles[l].el,d.onload=S,d.onerror=S,!d.complete)){d.src=A;var f=this._tiles[l].coords;_t(d),delete this._tiles[l],this.fire("tileabort",{tile:d,coords:f})}},_removeTile:function(l){var d=this._tiles[l];if(d)return d.el.setAttribute("src",A),gs.prototype._removeTile.call(this,l)},_tileReady:function(l,d,f){if(!(!this._map||f&&f.getAttribute("src")===A))return gs.prototype._tileReady.call(this,l,d,f)}});function La(l,d){return new ms(l,d)}var Fr=ms.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,d){this._url=l;var f=s({},this.defaultWmsParams);for(var C in d)C in this.options||(f[C]=d[C]);d=M(this,d);var F=d.detectRetina&&oe.retina?2:1,T=this.getTileSize();f.width=T.x*F,f.height=T.y*F,this.wmsParams=f},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var d=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[d]=this._crs.code,ms.prototype.onAdd.call(this,l)},getTileUrl:function(l){var d=this._tileCoordsToNwSe(l),f=this._crs,C=Z(f.project(d[0]),f.project(d[1])),F=C.min,T=C.max,G=(this._wmsVersion>=1.3&&this._crs===Qu?[F.y,F.x,T.y,T.x]:[F.x,F.y,T.x,T.y]).join(","),K=ms.prototype.getTileUrl.call(this,l);return K+x(this.wmsParams,K,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+G},setParams:function(l,d){return s(this.wmsParams,l),d||this.redraw(),this}});function oc(l,d){return new Fr(l,d)}ms.WMS=Fr,La.wms=oc;var Rn=rn.extend({options:{padding:.1},initialize:function(l){M(this,l),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Je(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,d){var f=this._map.getZoomScale(d,this._zoom),C=this._map.getSize().multiplyBy(.5+this.options.padding),F=this._map.project(this._center,d),T=C.multiplyBy(-f).add(F).subtract(this._map._getNewPixelOrigin(l,d));oe.any3d?tn(this._container,T,f):zt(this._container,T)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,d=this._map.getSize(),f=this._map.containerPointToLayerPoint(d.multiplyBy(-l)).round();this._bounds=new N(f,f.add(d.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Aa=Rn.extend({options:{tolerance:0},getEvents:function(){var l=Rn.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Rn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");Qe(l,"mousemove",this._onMouseMove,this),Qe(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Qe(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){Re(this._redrawRequest),delete this._ctx,_t(this._container),Et(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var d in this._layers)l=this._layers[d],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Rn.prototype._update.call(this);var l=this._bounds,d=this._container,f=l.getSize(),C=oe.retina?2:1;zt(d,l.min),d.width=C*f.x,d.height=C*f.y,d.style.width=f.x+"px",d.style.height=f.y+"px",oe.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){Rn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[p(l)]=l;var d=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=d),this._drawLast=d,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var d=l._order,f=d.next,C=d.prev;f?f.prev=C:this._drawLast=C,C?C.next=f:this._drawFirst=f,delete l._order,delete this._layers[p(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var d=l.options.dashArray.split(/[, ]+/),f=[],C,F;for(F=0;F<d.length;F++){if(C=Number(d[F]),isNaN(C))return;f.push(C)}l.options._dashArray=f}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||ue(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var d=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new N,this._redrawBounds.extend(l._pxBounds.min.subtract([d,d])),this._redrawBounds.extend(l._pxBounds.max.add([d,d]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var d=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,d.x,d.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,d=this._redrawBounds;if(this._ctx.save(),d){var f=d.getSize();this._ctx.beginPath(),this._ctx.rect(d.min.x,d.min.y,f.x,f.y),this._ctx.clip()}this._drawing=!0;for(var C=this._drawFirst;C;C=C.next)l=C.layer,(!d||l._pxBounds&&l._pxBounds.intersects(d))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,d){if(this._drawing){var f,C,F,T,G=l._parts,K=G.length,X=this._ctx;if(K){for(X.beginPath(),f=0;f<K;f++){for(C=0,F=G[f].length;C<F;C++)T=G[f][C],X[C?"lineTo":"moveTo"](T.x,T.y);d&&X.closePath()}this._fillStroke(X,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var d=l._point,f=this._ctx,C=Math.max(Math.round(l._radius),1),F=(Math.max(Math.round(l._radiusY),1)||C)/C;F!==1&&(f.save(),f.scale(1,F)),f.beginPath(),f.arc(d.x,d.y/F,C,0,Math.PI*2,!1),F!==1&&f.restore(),this._fillStroke(f,l)}},_fillStroke:function(l,d){var f=d.options;f.fill&&(l.globalAlpha=f.fillOpacity,l.fillStyle=f.fillColor||f.color,l.fill(f.fillRule||"evenodd")),f.stroke&&f.weight!==0&&(l.setLineDash&&l.setLineDash(d.options&&d.options._dashArray||[]),l.globalAlpha=f.opacity,l.lineWidth=f.weight,l.strokeStyle=f.color,l.lineCap=f.lineCap,l.lineJoin=f.lineJoin,l.stroke())},_onClick:function(l){for(var d=this._map.mouseEventToLayerPoint(l),f,C,F=this._drawFirst;F;F=F.next)f=F.layer,f.options.interactive&&f._containsPoint(d)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(f))&&(C=f);this._fireEvent(C?[C]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var d=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,d)}},_handleMouseOut:function(l){var d=this._hoveredLayer;d&&(Dt(this._container,"leaflet-interactive"),this._fireEvent([d],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,d){if(!this._mouseHoverThrottled){for(var f,C,F=this._drawFirst;F;F=F.next)f=F.layer,f.options.interactive&&f._containsPoint(d)&&(C=f);C!==this._hoveredLayer&&(this._handleMouseOut(l),C&&(Je(this._container,"leaflet-interactive"),this._fireEvent([C],l,"mouseover"),this._hoveredLayer=C)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(u(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,d,f){this._map._fireDOMEvent(d,f||d.type,l)},_bringToFront:function(l){var d=l._order;if(d){var f=d.next,C=d.prev;if(f)f.prev=C;else return;C?C.next=f:f&&(this._drawFirst=f),d.prev=this._drawLast,this._drawLast.next=d,d.next=null,this._drawLast=d,this._requestRedraw(l)}},_bringToBack:function(l){var d=l._order;if(d){var f=d.next,C=d.prev;if(C)C.next=f;else return;f?f.prev=C:C&&(this._drawLast=C),d.prev=null,d.next=this._drawFirst,this._drawFirst.prev=d,this._drawFirst=d,this._requestRedraw(l)}}});function Ia(l){return oe.canvas?new Aa(l):null}var ko=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),rc={_initContainer:function(){this._container=et("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Rn.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var d=l._container=ko("shape");Je(d,"leaflet-vml-shape "+(this.options.className||"")),d.coordsize="1 1",l._path=ko("path"),d.appendChild(l._path),this._updateStyle(l),this._layers[p(l)]=l},_addPath:function(l){var d=l._container;this._container.appendChild(d),l.options.interactive&&l.addInteractiveTarget(d)},_removePath:function(l){var d=l._container;_t(d),l.removeInteractiveTarget(d),delete this._layers[p(l)]},_updateStyle:function(l){var d=l._stroke,f=l._fill,C=l.options,F=l._container;F.stroked=!!C.stroke,F.filled=!!C.fill,C.stroke?(d||(d=l._stroke=ko("stroke")),F.appendChild(d),d.weight=C.weight+"px",d.color=C.color,d.opacity=C.opacity,C.dashArray?d.dashStyle=I(C.dashArray)?C.dashArray.join(" "):C.dashArray.replace(/( *, *)/g," "):d.dashStyle="",d.endcap=C.lineCap.replace("butt","flat"),d.joinstyle=C.lineJoin):d&&(F.removeChild(d),l._stroke=null),C.fill?(f||(f=l._fill=ko("fill")),F.appendChild(f),f.color=C.fillColor||C.color,f.opacity=C.fillOpacity):f&&(F.removeChild(f),l._fill=null)},_updateCircle:function(l){var d=l._point.round(),f=Math.round(l._radius),C=Math.round(l._radiusY||f);this._setPath(l,l._empty()?"M0 0":"AL "+d.x+","+d.y+" "+f+","+C+" 0,"+65535*360)},_setPath:function(l,d){l._path.v=d},_bringToFront:function(l){yo(l._container)},_bringToBack:function(l){Vn(l._container)}},an=oe.vml?ko:Ve,Ks=Rn.extend({_initContainer:function(){this._container=an("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=an("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){_t(this._container),Et(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Rn.prototype._update.call(this);var l=this._bounds,d=l.getSize(),f=this._container;(!this._svgSize||!this._svgSize.equals(d))&&(this._svgSize=d,f.setAttribute("width",d.x),f.setAttribute("height",d.y)),zt(f,l.min),f.setAttribute("viewBox",[l.min.x,l.min.y,d.x,d.y].join(" ")),this.fire("update")}},_initPath:function(l){var d=l._path=an("path");l.options.className&&Je(d,l.options.className),l.options.interactive&&Je(d,"leaflet-interactive"),this._updateStyle(l),this._layers[p(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){_t(l._path),l.removeInteractiveTarget(l._path),delete this._layers[p(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var d=l._path,f=l.options;d&&(f.stroke?(d.setAttribute("stroke",f.color),d.setAttribute("stroke-opacity",f.opacity),d.setAttribute("stroke-width",f.weight),d.setAttribute("stroke-linecap",f.lineCap),d.setAttribute("stroke-linejoin",f.lineJoin),f.dashArray?d.setAttribute("stroke-dasharray",f.dashArray):d.removeAttribute("stroke-dasharray"),f.dashOffset?d.setAttribute("stroke-dashoffset",f.dashOffset):d.removeAttribute("stroke-dashoffset")):d.setAttribute("stroke","none"),f.fill?(d.setAttribute("fill",f.fillColor||f.color),d.setAttribute("fill-opacity",f.fillOpacity),d.setAttribute("fill-rule",f.fillRule||"evenodd")):d.setAttribute("fill","none"))},_updatePoly:function(l,d){this._setPath(l,Qt(l._parts,d))},_updateCircle:function(l){var d=l._point,f=Math.max(Math.round(l._radius),1),C=Math.max(Math.round(l._radiusY),1)||f,F="a"+f+","+C+" 0 1,0 ",T=l._empty()?"M0 0":"M"+(d.x-f)+","+d.y+F+f*2+",0 "+F+-f*2+",0 ";this._setPath(l,T)},_setPath:function(l,d){l._path.setAttribute("d",d)},_bringToFront:function(l){yo(l._path)},_bringToBack:function(l){Vn(l._path)}});oe.vml&&Ks.include(rc);function Ll(l){return oe.svg||oe.vml?new Ks(l):null}lt.include({getRenderer:function(l){var d=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return d||(d=this._renderer=this._createRenderer()),this.hasLayer(d)||this.addLayer(d),d},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var d=this._paneRenderers[l];return d===void 0&&(d=this._createRenderer({pane:l}),this._paneRenderers[l]=d),d},_createRenderer:function(l){return this.options.preferCanvas&&Ia(l)||Ll(l)}});var lc=$n.extend({initialize:function(l,d){$n.prototype.initialize.call(this,this._boundsToLatLngs(l),d)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=re(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function dh(l,d){return new lc(l,d)}Ks.create=an,Ks.pointsToPath=Qt,Sn.geometryToLayer=To,Sn.coordsToLatLng=bl,Sn.coordsToLatLngs=Rr,Sn.latLngToCoords=xl,Sn.latLngsToCoords=Dl,Sn.getFeature=_o,Sn.asFeature=Ml,lt.mergeOptions({boxZoom:!0});var Oo=Wi.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){Qe(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Et(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){_t(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),dt(),fl(),this._startPoint=this._map.mouseEventToContainerPoint(l),Qe(document,{contextmenu:sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=et("div","leaflet-zoom-box",this._container),Je(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var d=new N(this._point,this._startPoint),f=d.getSize();zt(this._box,d.min),this._box.style.width=f.x+"px",this._box.style.height=f.y+"px"},_finish:function(){this._moved&&(_t(this._box),Dt(this._container,"leaflet-crosshair")),Fo(),gl(),Et(document,{contextmenu:sn,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(u(this._resetState,this),0);var d=new Pe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(d).fire("boxzoomend",{boxZoomBounds:d})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});lt.addInitHook("addHandler","boxZoom",Oo),lt.mergeOptions({doubleClickZoom:!0});var ac=Wi.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var d=this._map,f=d.getZoom(),C=d.options.zoomDelta,F=l.originalEvent.shiftKey?f-C:f+C;d.options.doubleClickZoom==="center"?d.setZoom(F):d.setZoomAround(l.containerPoint,F)}});lt.addInitHook("addHandler","doubleClickZoom",ac),lt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var ka=Wi.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new on(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}Je(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Dt(this._map._container,"leaflet-grab"),Dt(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var d=re(this._map.options.maxBounds);this._offsetLimit=Z(this._map.latLngToContainerPoint(d.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(d.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var d=this._lastTime=+new Date,f=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(f),this._times.push(d),this._prunePositions(d)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),d=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=d.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,d){return l-(l-d)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),d=this._offsetLimit;l.x<d.min.x&&(l.x=this._viscousLimit(l.x,d.min.x)),l.y<d.min.y&&(l.y=this._viscousLimit(l.y,d.min.y)),l.x>d.max.x&&(l.x=this._viscousLimit(l.x,d.max.x)),l.y>d.max.y&&(l.y=this._viscousLimit(l.y,d.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,d=Math.round(l/2),f=this._initialWorldOffset,C=this._draggable._newPos.x,F=(C-d+f)%l+d-f,T=(C+d+f)%l-d-f,G=Math.abs(F+f)<Math.abs(T+f)?F:T;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=G},_onDragEnd:function(l){var d=this._map,f=d.options,C=!f.inertia||l.noInertia||this._times.length<2;if(d.fire("dragend",l),C)d.fire("moveend");else{this._prunePositions(+new Date);var F=this._lastPos.subtract(this._positions[0]),T=(this._lastTime-this._times[0])/1e3,G=f.easeLinearity,K=F.multiplyBy(G/T),X=K.distanceTo([0,0]),ce=Math.min(f.inertiaMaxSpeed,X),De=K.multiplyBy(ce/X),We=ce/(f.inertiaDeceleration*G),nt=De.multiplyBy(-We/2).round();!nt.x&&!nt.y?d.fire("moveend"):(nt=d._limitOffset(nt,d.options.maxBounds),ue(function(){d.panBy(nt,{duration:We,easeLinearity:G,noMoveStart:!0,animate:!0})}))}}});lt.addInitHook("addHandler","dragging",ka),lt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Oa=Wi.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),Qe(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Et(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,d=document.documentElement,f=l.scrollTop||d.scrollTop,C=l.scrollLeft||d.scrollLeft;this._map._container.focus(),window.scrollTo(C,f)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var d=this._panKeys={},f=this.keyCodes,C,F;for(C=0,F=f.left.length;C<F;C++)d[f.left[C]]=[-1*l,0];for(C=0,F=f.right.length;C<F;C++)d[f.right[C]]=[l,0];for(C=0,F=f.down.length;C<F;C++)d[f.down[C]]=[0,l];for(C=0,F=f.up.length;C<F;C++)d[f.up[C]]=[0,-1*l]},_setZoomDelta:function(l){var d=this._zoomKeys={},f=this.keyCodes,C,F;for(C=0,F=f.zoomIn.length;C<F;C++)d[f.zoomIn[C]]=l;for(C=0,F=f.zoomOut.length;C<F;C++)d[f.zoomOut[C]]=-l},_addHooks:function(){Qe(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Et(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var d=l.keyCode,f=this._map,C;if(d in this._panKeys){if(!f._panAnim||!f._panAnim._inProgress)if(C=this._panKeys[d],l.shiftKey&&(C=J(C).multiplyBy(3)),f.options.maxBounds&&(C=f._limitOffset(J(C),f.options.maxBounds)),f.options.worldCopyJump){var F=f.wrapLatLng(f.unproject(f.project(f.getCenter()).add(C)));f.panTo(F)}else f.panBy(C)}else if(d in this._zoomKeys)f.setZoom(f.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[d]);else if(d===27&&f._popup&&f._popup.options.closeOnEscapeKey)f.closePopup();else return;sn(l)}}});lt.addInitHook("addHandler","keyboard",Oa),lt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var bt=Wi.extend({addHooks:function(){Qe(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Et(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var d=zu(l),f=this._map.options.wheelDebounceTime;this._delta+=d,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var C=Math.max(f-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(u(this._performZoom,this),C),sn(l)},_performZoom:function(){var l=this._map,d=l.getZoom(),f=this._map.options.zoomSnap||0;l._stop();var C=this._delta/(this._map.options.wheelPxPerZoomLevel*4),F=4*Math.log(2/(1+Math.exp(-Math.abs(C))))/Math.LN2,T=f?Math.ceil(F/f)*f:F,G=l._limitZoom(d+(this._delta>0?T:-T))-d;this._delta=0,this._startTime=null,G&&(l.options.scrollWheelZoom==="center"?l.setZoom(d+G):l.setZoomAround(this._lastMousePos,d+G))}});lt.addInitHook("addHandler","scrollWheelZoom",bt);var Na=600;lt.mergeOptions({tapHold:oe.touchNative&&oe.safari&&oe.mobile,tapTolerance:15});var Er=Wi.extend({addHooks:function(){Qe(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Et(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var d=l.touches[0];this._startPos=this._newPos=new U(d.clientX,d.clientY),this._holdTimeout=setTimeout(u(function(){this._cancel(),this._isTapValid()&&(Qe(document,"touchend",Gt),Qe(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",d))},this),Na),Qe(document,"touchend touchcancel contextmenu",this._cancel,this),Qe(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Et(document,"touchend",Gt),Et(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Et(document,"touchend touchcancel contextmenu",this._cancel,this),Et(document,"touchmove",this._onMove,this)},_onMove:function(l){var d=l.touches[0];this._newPos=new U(d.clientX,d.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,d){var f=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:d.screenX,screenY:d.screenY,clientX:d.clientX,clientY:d.clientY});f._simulated=!0,d.target.dispatchEvent(f)}});lt.addInitHook("addHandler","tapHold",Er),lt.mergeOptions({touchZoom:oe.touch,bounceAtZoomLimits:!0});var No=Wi.extend({addHooks:function(){Je(this._map._container,"leaflet-touch-zoom"),Qe(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Dt(this._map._container,"leaflet-touch-zoom"),Et(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var d=this._map;if(!(!l.touches||l.touches.length!==2||d._animatingZoom||this._zooming)){var f=d.mouseEventToContainerPoint(l.touches[0]),C=d.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=d.getSize()._divideBy(2),this._startLatLng=d.containerPointToLatLng(this._centerPoint),d.options.touchZoom!=="center"&&(this._pinchStartLatLng=d.containerPointToLatLng(f.add(C)._divideBy(2))),this._startDist=f.distanceTo(C),this._startZoom=d.getZoom(),this._moved=!1,this._zooming=!0,d._stop(),Qe(document,"touchmove",this._onTouchMove,this),Qe(document,"touchend touchcancel",this._onTouchEnd,this),Gt(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var d=this._map,f=d.mouseEventToContainerPoint(l.touches[0]),C=d.mouseEventToContainerPoint(l.touches[1]),F=f.distanceTo(C)/this._startDist;if(this._zoom=d.getScaleZoom(F,this._startZoom),!d.options.bounceAtZoomLimits&&(this._zoom<d.getMinZoom()&&F<1||this._zoom>d.getMaxZoom()&&F>1)&&(this._zoom=d._limitZoom(this._zoom)),d.options.touchZoom==="center"){if(this._center=this._startLatLng,F===1)return}else{var T=f._add(C)._divideBy(2)._subtract(this._centerPoint);if(F===1&&T.x===0&&T.y===0)return;this._center=d.unproject(d.project(this._pinchStartLatLng,this._zoom).subtract(T),this._zoom)}this._moved||(d._moveStart(!0,!1),this._moved=!0),Re(this._animRequest);var G=u(d._move,d,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=ue(G,this,!0),Gt(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Re(this._animRequest),Et(document,"touchmove",this._onTouchMove,this),Et(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});lt.addInitHook("addHandler","touchZoom",No),lt.BoxZoom=Oo,lt.DoubleClickZoom=ac,lt.Drag=ka,lt.Keyboard=Oa,lt.ScrollWheelZoom=bt,lt.TapHold=Er,lt.TouchZoom=No,i.Bounds=N,i.Browser=oe,i.CRS=$e,i.Canvas=Aa,i.Circle=Fl,i.CircleMarker=Pl,i.Class=Oe,i.Control=xi,i.DivIcon=_l,i.DivOverlay=yn,i.DomEvent=Cl,i.DomUtil=mr,i.Draggable=on,i.Evented=Te,i.FeatureGroup=Un,i.GeoJSON=Sn,i.GridLayer=gs,i.Handler=Wi,i.Icon=$s,i.ImageOverlay=fs,i.LatLng=fe,i.LatLngBounds=Pe,i.Layer=rn,i.LayerGroup=hs,i.LineUtil=Yu,i.Map=lt,i.Marker=jn,i.Mixin=Sa,i.Path=ps,i.Point=U,i.PolyUtil=eh,i.Polygon=$n,i.Polyline=Di,i.Popup=Tl,i.PosAnimation=wl,i.Projection=oh,i.Rectangle=lc,i.Renderer=Rn,i.SVG=Ks,i.SVGOverlay=Ta,i.TileLayer=ms,i.Tooltip=Ao,i.Transformation=wt,i.Util=Be,i.VideoOverlay=Ma,i.bind=u,i.bounds=Z,i.canvas=Ia,i.circle=yr,i.circleMarker=ec,i.control=ds,i.divIcon=sc,i.extend=s,i.featureGroup=Xu,i.geoJSON=tc,i.geoJson=ln,i.gridLayer=Io,i.icon=Ju,i.imageOverlay=ic,i.latLng=we,i.latLngBounds=re,i.layerGroup=Sr,i.map=cs,i.marker=ah,i.point=J,i.polygon=ch,i.polyline=uh,i.popup=Lo,i.rectangle=dh,i.setOptions=M,i.stamp=p,i.svg=Ll,i.svgOverlay=_a,i.tileLayer=La,i.tooltip=Pr,i.transformation=it,i.version=n,i.videoOverlay=nc;var uc=window.L;i.noConflict=function(){return window.L=uc,this},window.L=i})}(hu,hu.exports)),hu.exports}var ku=$b();const Kb=Tu(ku);function eg(e,t,i){return Object.freeze({instance:e,context:t,container:i})}function tg(e,t){return t==null?function(n,s){const r=R.useRef();return r.current||(r.current=e(n,s)),r}:function(n,s){const r=R.useRef();r.current||(r.current=e(n,s));const u=R.useRef(n),{instance:c}=r.current;return R.useEffect(function(){u.current!==n&&(t(c,n,u.current),u.current=n)},[c,n,s]),r}}function Zb(e,t){R.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var r;(r=t.layerContainer)==null||r.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function Xw(e){return function(i){const n=Yw(),s=e(Jf(i,n),n);return Kw(n.map,i.attribution),Qw(s.current,i.eventHandlers),Zb(s.current,n),s}}function qb(e,t){const i=tg(e,t),n=Xw(i);return Vb(n)}function Yb(e,t){const i=tg(e),n=Ub(i,t);return Wb(n)}function Qb(e,t){const i=tg(e,t),n=Xw(i);return zb(n)}function Xb(e,t,i){const{opacity:n,zIndex:s}=t;n!=null&&n!==i.opacity&&e.setOpacity(n),s!=null&&s!==i.zIndex&&e.setZIndex(s)}function cf(){return cf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},cf.apply(this,arguments)}function Jb({bounds:e,boundsOptions:t,center:i,children:n,className:s,id:r,placeholder:u,style:c,whenReady:p,zoom:g,...v},S){const[y]=R.useState({className:s,id:r,style:c}),[E,b]=R.useState(null);R.useImperativeHandle(S,()=>(E==null?void 0:E.map)??null,[E]);const M=R.useCallback(_=>{if(_!==null&&E===null){const k=new ku.Map(_,v);i!=null&&g!=null?k.setView(i,g):e!=null&&k.fitBounds(e,t),p!=null&&k.whenReady(p),b(Hb(k))}},[]);R.useEffect(()=>()=>{E==null||E.map.remove()},[E]);const x=E?ae.createElement(qw,{value:E},n):u??null;return ae.createElement("div",cf({},y,{ref:M}),x)}const ex=R.forwardRef(Jb),tx=qb(function({position:t,...i},n){const s=new ku.Marker(t,i);return eg(s,Bb(n,{overlayContainer:s}))},function(t,i,n){i.position!==n.position&&t.setLatLng(i.position),i.icon!=null&&i.icon!==n.icon&&t.setIcon(i.icon),i.zIndexOffset!=null&&i.zIndexOffset!==n.zIndexOffset&&t.setZIndexOffset(i.zIndexOffset),i.opacity!=null&&i.opacity!==n.opacity&&t.setOpacity(i.opacity),t.dragging!=null&&i.draggable!==n.draggable&&(i.draggable===!0?t.dragging.enable():t.dragging.disable())}),ix=Yb(function(t,i){const n=new ku.Popup(t,i.overlayContainer);return eg(n,i)},function(t,i,{position:n},s){R.useEffect(function(){const{instance:u}=t;function c(g){g.popup===u&&(u.update(),s(!0))}function p(g){g.popup===u&&s(!1)}return i.map.on({popupopen:c,popupclose:p}),i.overlayContainer==null?(n!=null&&u.setLatLng(n),u.openOn(i.map)):i.overlayContainer.bindPopup(u),function(){var v;i.map.off({popupopen:c,popupclose:p}),(v=i.overlayContainer)==null||v.unbindPopup(),i.map.removeLayer(u)}},[t,i,s,n])}),nx=Qb(function({url:t,...i},n){const s=new ku.TileLayer(t,Jf(i,n));return eg(s,n)},function(t,i,n){Xb(t,i,n);const{url:s}=i;s!=null&&s!==n.url&&t.setUrl(s)});var aa=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const n=t?this.allAsyncListeners:this.allSyncListeners;let s=n.get(e);return!s&&i&&(s=new Set,n.set(e,s)),s}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const n=this.getListeners(e,i,!1);n&&(n.delete(t),n.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const c=e.event;c instanceof Event&&(e.eventPath=c.composedPath())}const n=(c,p)=>c.forEach(g=>{if(!p.has(g))return;const v=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>g(e)):()=>g(e);t?this.dispatchAsync(v):v()}),s=this.getListeners(i,t,!1)??new Set,r=new Set(s);r.size>0&&n(r,s),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(c=>{const p=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(i,e)):()=>c(i,e);t?this.dispatchAsync(p):p()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}},Jw=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(Jw||{}),fC={};function ig(e,t){fC[t]||(e(),fC[t]=!0)}function is(e,...t){console.log("AG Grid: "+e,...t)}function se(e,...t){ig(()=>console.warn("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function Ct(e,...t){ig(()=>console.error("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function ng(e){return!!(e&&e.constructor&&e.call&&e.apply)}function sx(e){ox(e,400)}var Gp=[],Hp=!1;function gC(e){Gp.push(e),!Hp&&(Hp=!0,window.setTimeout(()=>{const t=Gp.slice();Gp.length=0,Hp=!1,t.forEach(i=>i())},0))}function ox(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(i=>i()),t)}function Oi(e,t){let i;return function(...n){const s=this;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(s,n)},t)}}function mC(e,t){let i=0;return function(...n){const s=this,r=new Date().getTime();r-i<t||(i=r,e.apply(s,n))}}function rx(e,t,i=100,n){const s=new Date().getTime();let r=null,u=!1;const c=()=>{const p=new Date().getTime()-s>i;(e()||p)&&(t(),u=!0,r!=null&&(window.clearInterval(r),r=null),p&&n&&se(n))};c(),u||(r=window.setInterval(c,10))}function lx(...e){return t=>e.reduce((i,n)=>n(i),t)}function uo(e){return e==null||e===""?null:e}function ge(e,t=!1){return e!=null&&(e!==""||t)}function ut(e){return!ge(e)}function fn(e){return e==null||e.length===0}function df(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function Kr(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function hf(e){if(e!==void 0)return e===null||e===""?!1:pf(e)}function pf(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function Ru(e,t){const i=e?JSON.stringify(e):null,n=t?JSON.stringify(t):null;return i===n}function ax(e,t,i=!1){const n=e==null,s=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),n&&s)return 0;if(n)return-1;if(s)return 1;function r(u,c){return u>c?1:u<c?-1:0}if(typeof e!="string"||!i)return r(e,t);try{return e.localeCompare(t)}catch{return r(e,t)}}function cd(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach(i=>t.push(i)),t}return Object.values(e)}function eS(e,t){return e.get("rowModelType")===t}function At(e){return eS(e,"clientSide")}function Ts(e){return eS(e,"serverSide")}function pi(e,t){return e.get("domLayout")===t}function Rd(e){return Ed(e)!==void 0}function Pd(e){return!e.get("suppressAsyncEvents")}function tS(e){return typeof e.get("getRowHeight")=="function"}function ux(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function ar(e,t,i=!1,n){if(n==null&&(n=e.environment.getDefaultRowHeight()),tS(e)){if(i)return{height:n,estimated:!0};const u={node:t,data:t.data},c=e.getCallback("getRowHeight")(u);if(ff(c))return c===0&&se("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,c),estimated:!1}}if(t.detail&&e.get("masterDetail"))return cx(e);const s=e.get("rowHeight");return{height:s&&ff(s)?s:n,estimated:!1}}function cx(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return ff(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function Zr(e){const{environment:t}=e,i=e.get("rowHeight");if(!i||ut(i))return t.getDefaultRowHeight();const n=t.refreshRowHeightVariable();return n!==-1?n:(se("row height must be a number if not using standard row model"),t.getDefaultRowHeight())}function ff(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function Pu(e,t,i){const n=t[e.getDomDataKey()];return n?n[i]:void 0}function Xr(e,t,i,n){const s=e.getDomDataKey();let r=t[s];ut(r)&&(r={},t[s]=r),r[i]=n}function $t(e){let t=null;const i=e.get("getDocument");return i&&ge(i)?t=i():e.eGridDiv&&(t=e.eGridDiv.ownerDocument),t&&ge(t)?t:document}function iS(e){return $t(e).defaultView||window}function Fu(e){return e.eGridDiv.getRootNode()}function Wt(e){return Fu(e).activeElement}function nS(e){const t=$t(e),i=Wt(e);return i===null||i===t.body}function ea(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function Ud(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||pi(e,"print"))}function Rs(e){const t=e.get("autoGroupColumnDef");return!(t!=null&&t.comparator)&&!e.get("treeData")}function gf(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function sS(e){const t=e.get("grandTotalRow");if(t)return t;if(e.get("groupIncludeTotalFooter"))return"bottom"}function oS(e){const t=e.get("groupTotalRow");if(typeof t=="function")return e.getCallback("groupTotalRow");if(t)return()=>t;const i=e.get("groupIncludeFooter");if(typeof i=="function"){const n=e.getCallback("groupIncludeFooter");return s=>n(s)?"bottom":void 0}return()=>i?"bottom":void 0}function rS(e){return e.exists("groupDisplayType")?e.get("groupDisplayType")==="multipleColumns":e.get("groupHideOpenParents")}function jd(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function ua(e){const t=e.getCallback("getRowId");return t===void 0?t:i=>{let n=t(i);return typeof n!="string"&&(se("The getRowId callback must return a string. The ID ",n," is being cast to a string."),n=String(n)),n}}function na(e){return(e==null?void 0:e.checkboxes)??!0}function Fd(e){return(e==null?void 0:e.mode)==="multiRow"&&(e.headerCheckbox??!0)}function dx(e){return(e==null?void 0:e.hideDisabledCheckboxes)??!1}function hx(e){return typeof e.get("rowSelection")!="string"}function px(e){return e.get("cellSelection")!==void 0}function fx(e){const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?(t==null?void 0:t.suppressMultiRanges)??!1:!1:e.get("suppressMultiRangeSelection")}function po(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function gx(e){var n;const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?((n=t.handle)==null?void 0:n.mode)==="range":!1:e.get("enableRangeHandle")}function vC(e){var n;const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?((n=t.handle)==null?void 0:n.mode)==="fill":!1:e.get("enableFillHandle")}function lS(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const i=e.get("suppressRowClickSelection"),n=e.get("suppressRowDeselection");return i&&n?!1:i?"enableDeselection":n?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function mx(e){const t=lS(e);return t===!0||t==="enableSelection"}function CC(e){const t=lS(e);return t===!0||t==="enableDeselection"}function sg(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t==null?void 0:t.isRowSelectable}function Ed(e){const t=e.get("rowSelection");if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return t==null?void 0:t.mode}function aS(e){return Ed(e)==="multiRow"}function vx(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):(t==null?void 0:t.enableSelectionWithoutKeys)??!1}function og(e){const t=e.get("rowSelection");if(typeof t=="string"){const i=e.get("groupSelectsChildren"),n=e.get("groupSelectsFiltered");return i&&n?"filteredDescendants":i?"descendants":"self"}return(t==null?void 0:t.mode)==="multiRow"?t.groupSelects:void 0}function Jr(e){const t=og(e);return t==="descendants"||t==="filteredDescendants"}function Bp(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function at(e){if(!(!e||!e.length))return e[e.length-1]}function cr(e,t,i){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((n,s)=>i?i(n,t[s]):t[s]===n)}function Cx(e){return e.sort((t,i)=>t-i)}function uS(e,t){const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function Ni(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function wx(e,t){for(let i=0;i<t.length;i++)uS(e,t[i])}function Sx(e,t){for(let i=0;i<t.length;i++)Ni(e,t[i])}function bd(e,t,i){e.splice(i,0,t)}function cS(e,t,i){Sx(e,t),t.slice().reverse().forEach(n=>bd(e,n,i))}function qr(e,t){return e.indexOf(t)>-1}function yx(e){return(e==null?void 0:e.flatMap(t=>t))??[]}function wC(e,t){t==null||e==null||t.forEach(i=>e.push(i))}var dS="__ag_Grid_Stop_Propagation",Rx=["touchstart","touchend","touchmove","touchcancel","scroll"],Vp={};function sa(e){e[dS]=!0}function co(e){return e[dS]===!0}var hS=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof Vp[i]=="boolean")return Vp[i];const n=document.createElement(e[i]||"div");return i="on"+i,Vp[i]=i in n}})();function mf(e,t,i){let n=t;for(;n;){const s=Pu(e,n,i);if(s)return s;n=n.parentElement}return null}function Px(e,t){return!t||!e?!1:Ex(t).indexOf(e)>=0}function Fx(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function Ex(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():Fx(t)}function bx(e,t,i,n){const r=qr(Rx,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,n,r)}var ie=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new aa),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService&&this.localEventService.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const n in t){const s=t[n];s&&i.push(this._setupListener(e,n,s))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;e instanceof HTMLElement?bx(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);const n=()=>(e.removeEventListener(t,i),null);return this.destroyFunctions.push(n),()=>(n(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==n),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);const i=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,n=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=s.changeSet.id}const r={type:"gridPropertyChanged",changeSet:s.changeSet,source:s.source};t(r)};e.forEach(s=>this.setupGridOptionListener(s,n))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function Ii(e){return e instanceof dd}var dd=class extends ie{constructor(e,t,i,n){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=gS(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=n}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{ur(t)?e.push(t):Ii(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const n=this.findChildrenRemovingPadding();for(let r=0,u=n.length;r<u;r++){const c=n[r];if(!c.isVisible())continue;const p=c.getColumnGroupShow();p==="open"?(e=!0,i=!0):p==="closed"?(t=!0,i=!0):(e=!0,t=!0)}const s=e&&t&&i;this.expandable!==s&&(this.expandable=s,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach(n=>{Ii(n)&&n.isPadding()?t(n.children):e.push(n)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},pS="ag-Grid-ControlsColumn",xx=class extends ie{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){const{gos:e}=this,t=e.get("rowSelection");if(!t||typeof t!="object")return[];const i=na(t),n=Fd(t);if(i||n){const s=e.get("selectionColumnDef"),u={maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:e.get("enableRtl")?"right":"left",comparator(p,g,v,S){const y=v.isSelected(),E=S.isSelected();return y&&E?0:y?1:-1},editable:!1,suppressFillHandle:!0,...s,colId:`${pS}`},c=new ug(u,null,u.colId,!1);return this.createBean(c),[c]}return[]}},$d="ag-Grid-AutoColumn";function rg(e){const t=[],i=n=>{for(let s=0;s<n.length;s++){const r=n[s];ur(r)?t.push(r):Ii(r)&&i(r.getChildren())}};return i(e),t}function oo(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}function sr(e,t,i){const n={};if(!t)return;fo(null,t,r=>{n[r.getInstanceId()]=r}),i&&fo(null,i,r=>{n[r.getInstanceId()]=null});const s=Object.values(n).filter(r=>r!=null);e.destroyBeans(s)}function vf(e){return e.getId().startsWith($d)}function Ou(e){return e.getColId().startsWith(pS)}function hd(e){let t=[];return e instanceof Array?e.some(n=>typeof n!="string")?se("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):se("colDef.type should be of type 'string' | 'string[]'"),t}var lg=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=i=>{this.frameworkOverrides.wrapOutgoing(()=>e(i))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(i,n)=>{this.frameworkOverrides.wrapOutgoing(()=>e(i,n))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}},ag=new Set(["__proto__","constructor","prototype"]);function ts(e,t){if(e!=null){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(const[i,n]of Object.entries(e))t(i,n)}}function fS(e){const t={},i=Object.keys(e);for(let n=0;n<i.length;n++){if(ag.has(i[n]))continue;const s=i[n],r=e[s];t[s]=r}return t}function Cf(e,t){if(!e)return;const i=e,n={};return Object.keys(i).forEach(s=>{if(t&&t.indexOf(s)>=0||ag.has(s))return;const r=i[s];Sf(r)&&r.constructor===Object?n[s]=Cf(r):n[s]=r}),n}function wf(e){if(!e)return[];const t=Object;if(typeof t.values=="function")return t.values(e);const i=[];for(const n in e)e.hasOwnProperty(n)&&e.propertyIsEnumerable(n)&&i.push(e[n]);return i}function ki(e,t,i=!0,n=!1){ge(t)&&ts(t,(s,r)=>{if(ag.has(s))return;let u=e[s];u!==r&&(n&&u==null&&r!=null&&typeof r=="object"&&r.constructor===Object&&(u={},e[s]=u),Sf(r)&&Sf(u)&&!Array.isArray(u)?ki(u,r,i,n):(i||r!==void 0)&&(e[s]=r))})}function gu(e,t,i){if(!t||!e)return;if(!i)return e[t];const n=t.split(".");let s=e;for(let r=0;r<n.length;r++){if(s==null)return;s=s[n[r]]}return s}function Sf(e){return typeof e=="object"&&e!==null}var Dx={resizable:!0,sortable:!0},Mx=0;function gS(){return Mx++}function ur(e){return e instanceof ug}var ug=class extends ie{constructor(e,t,i,n){super(),this.isColumn=!0,this.instanceId=gS(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new aa,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=n,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);const t=e.sortIndex,i=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):i!==null&&(this.sortIndex=i);const n=e.hide,s=e.initialHide;n!==void 0?this.visible=!n:this.visible=!s,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const r=e.flex,u=e.initialFlex;r!==void 0?this.flex=r:u!==void 0&&(this.flex=u)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",i))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=ge(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=ge(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=ge(this.colDef.tooltipField)||ge(this.colDef.tooltipValueGetter)||ge(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=Kr(e.width),n=Kr(e.initialWidth);return i!=null?t=i:n!=null?t=n:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(ut(this.colDef)||ut(this.colDef.showRowGroup))return!1;const t=this.colDef.showRowGroup===!0,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){var n;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new lg(this.frameworkOverrides));const i=((n=this.frameworkEventListenerService)==null?void 0:n.wrap(t))??t;this.columnEventService.addEventListener(e,i)}removeEventListener(e,t){var n;const i=((n=this.frameworkEventListenerService)==null?void 0:n.unwrap(t))??t;this.columnEventService.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const t=this.createColumnFunctionCallbackParams(e),i=this.colDef.suppressNavigable;return i(t)}return!1}isCellEditable(e){if(e.group){if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){const t=this.gos.get("rowSelection");if(t&&typeof t!="string"){const i=Ou(this)&&na(t);return this.isColumnFunc(e,i)}else return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??Dx[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const i=this.createColumnFunctionCallbackParams(e);return t(i)}return!1}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return ut(this.sort)}isSorting(){return ge(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,i){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const n=this.createColumnEvent("filterChanged",t);i&&ki(n,i),this.columnEventService.dispatchEvent(n)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const i=e===!0;this.visible!==i&&(this.visible=i,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(ut(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(ut(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},Tx={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},_x=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=df(e);let i=0;for(;;){let n;if(e?(n=e,i!==0&&(n+="_"+i)):t?(n=t,i!==0&&(n+="_"+i)):n=i,!this.existingKeys[n])return this.existingKeys[n]=!0,String(n);i++}}},Lx=class extends ie{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,i,n){const s=new _x,{existingCols:r,existingGroups:u,existingColKeys:c}=this.extractExistingTreeData(i);s.addExistingKeys(c);const p=this.recursivelyCreateColumns(e,0,t,r,s,u,n),g=this.findMaxDept(p,0),v=this.balanceColumnTree(p,0,g,s);return fo(null,v,(y,E)=>{Ii(y)&&y.setupExpandable(),y.setOriginalParent(E)}),{columnTree:v,treeDept:g}}extractExistingTreeData(e){const t=[],i=[],n=[];return e&&fo(null,e,s=>{if(Ii(s)){const r=s;i.push(r)}else{const r=s;n.push(r.getId()),t.push(r)}}),{existingCols:t,existingGroups:i,existingColKeys:n}}balanceTreeForAutoCols(e,t){const i=[],n=this.findDepth(t);return e.forEach(s=>{let r=s;for(let u=n-1;u>=0;u--){const c=new dd(null,`FAKE_PATH_${s.getId()}}_${u}`,!0,u);this.createBean(c),c.setChildren([r]),r.setOriginalParent(c),r=c}n===0&&s.setOriginalParent(null),i.push(r)}),[i,n]}findDepth(e){let t=0,i=e;for(;i&&i[0]&&Ii(i[0]);)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,n){const s=[];for(let r=0;r<e.length;r++){const u=e[r];if(Ii(u)){const c=u,p=this.balanceColumnTree(c.getChildren(),t+1,i,n);c.setChildren(p),s.push(c)}else{let c,p;for(let g=i-1;g>=t;g--){const v=n.getUniqueKey(null,null),S=this.createMergedColGroupDef(null),y=new dd(S,v,!0,t);this.createBean(y),p&&p.setChildren([y]),p=y,c||(c=p)}if(c&&p)if(s.push(c),e.some(v=>Ii(v))){p.setChildren([u]);continue}else{p.setChildren(e);break}s.push(u)}}return s}findMaxDept(e,t){let i=t;for(let n=0;n<e.length;n++){const s=e[n];if(Ii(s)){const r=s,u=this.findMaxDept(r.getChildren(),t+1);i<u&&(i=u)}}return i}recursivelyCreateColumns(e,t,i,n,s,r,u){if(!e)return[];const c=new Array(e.length);for(let p=0;p<c.length;p++){const g=e[p];this.isColumnGroup(g)?c[p]=this.createColumnGroup(i,g,t,n,s,r,u):c[p]=this.createColumn(i,g,n,s,u)}return c}createColumnGroup(e,t,i,n,s,r,u){const c=this.createMergedColGroupDef(t),p=s.getUniqueKey(c.groupId||null,null),g=new dd(c,p,!1,i);this.createBean(g);const v=this.findExistingGroup(t,r);v&&r.splice(v.idx,1);const S=v==null?void 0:v.group;S&&g.setExpanded(S.isExpanded());const y=this.recursivelyCreateColumns(c.children,i+1,e,n,s,r,u);return g.setChildren(y),g}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,n,s){var c;const r=this.findExistingColumn(t,i);r&&(i==null||i.splice(r.idx,1));let u=r==null?void 0:r.column;if(u){const p=this.addColumnDefaultAndTypes(t,u.getColId());u.setColDef(p,t,s),this.applyColumnState(u,p,s)}else{const p=n.getUniqueKey(t.colId,t.field),g=this.addColumnDefaultAndTypes(t,p);u=new ug(g,t,p,e),this.createBean(u)}return(c=this.dataTypeService)==null||c.addColumnListeners(u),u}applyColumnState(e,t,i){const n=Kr(t.flex);if(n!==void 0&&e.setFlex(n),e.getFlex()<=0){const c=Kr(t.width);if(c!=null)e.setActualWidth(c,i);else{const p=e.getActualWidth();e.setActualWidth(p,i)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,i):e.setSort(void 0,i));const r=Kr(t.sortIndex);r!==void 0&&e.setSortIndex(r);const u=hf(t.hide);u!==void 0&&e.setVisible(!u,i),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){const n=t[i].getUserProvidedColDef();if(!n)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(n.field===e.field)return{idx:i,column:t[i]};continue}if(n===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let n=0;n<t.length;n++){const s=t[n];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:n,group:s}}}addColumnDefaultAndTypes(e,t){var c;const i={},n=this.gos.get("defaultColDef");ki(i,n,!1,!0);const s=this.updateColDefAndGetColumnType(i,e,t);s&&this.assignColumnTypes(s,i),ki(i,e,!1,!0);const r=this.gos.get("autoGroupColumnDef"),u=Rs(this.gos);return e.rowGroup&&r&&u&&ki(i,{sort:r.sort,initialSort:r.initialSort},!1,!0),(c=this.dataTypeService)==null||c.validateColDef(i),i}updateColDefAndGetColumnType(e,t,i){var r;const n=(r=this.dataTypeService)==null?void 0:r.updateColDefAndGetColumnType(e,t,i),s=t.type??n??e.type;return e.type=s,s?hd(s):void 0}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},Tx),n=this.gos.get("columnTypes")||{};ts(n,(s,r)=>{s in i?se(`the column type '${s}' is a default column type and cannot be overridden.`):(r.type&&se("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[s]=r)}),e.forEach(s=>{const r=i[s.trim()];r?ki(t,r,!1,!0):se("colDef.type '"+s+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function fo(e,t,i){if(t)for(let n=0;n<t.length;n++){const s=t[n];Ii(s)&&fo(s,s.getChildren(),i),i(s,e)}}var Ax=class extends ie{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(Vr(t.source))),this.addManagedPropertyListener("rowSelection",t=>{this.onSelectionOptionsChanged(t.currentValue,t.previousValue,Vr(t.source))}),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(Vr(t.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs(Vr(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),Vr(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){var g,v,S;const t=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();const i=(g=this.colDefCols)==null?void 0:g.list,n=(v=this.colDefCols)==null?void 0:v.tree,s=this.columnFactory.createColumnTree(this.colDefs,!0,n,e);sr(this.context,(S=this.colDefCols)==null?void 0:S.tree,s.columnTree);const r=s.columnTree,u=s.treeDept,c=rg(r),p={};c.forEach(y=>p[y.getId()]=y),this.colDefCols={tree:r,treeDepth:u,list:c,map:p},this.funcColsService.extractCols(e,i),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),t&&(this.changeEventsDispatching=!0,t(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),e==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){var s,r,u;if(!this.colDefCols)return;const t=(s=this.cols)==null?void 0:s.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();const i=ux(this.gos,this.showingPivotResult);(!e||i)&&this.restoreColOrder(),this.positionLockedCols(),(r=this.showRowGroupColsService)==null||r.refresh(),(u=this.quickFilterService)==null||u.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!cr(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){const e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){const{map:t,list:i,tree:n,treeDepth:s}=e;this.cols={list:i.slice(),map:{...t},tree:n.slice(),treeDepth:s},e.list.some(u=>{var c;return((c=this.cols)==null?void 0:c.map[u.getColId()])!==void 0})||(this.lastPivotOrder=null)}else{const{map:t,list:i,tree:n,treeDepth:s}=this.colDefCols;this.cols={list:i.slice(),map:{...t},tree:n.slice(),treeDepth:s}}}getColsToShow(){const e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter(n=>{const s=vf(n);if(e){const r=t&&qr(t,n);return s||r}else return s||n.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),SC(this.cols))}createAutoCols(){var b;const e=jd(this.gos,this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),i=this.funcColsService.getRowGroupColumns(),s=!(i.length>0||this.gos.get("treeData"))||t||e,r=()=>{this.autoCols&&(sr(this.context,this.autoCols.tree),this.autoCols=null)};if(s||!this.autoColService){r();return}const u=this.autoColService.createAutoCols(i)??[],c=RC(u,((b=this.autoCols)==null?void 0:b.list)||null),p=this.cols.treeDepth,v=(this.autoCols?this.autoCols.treeDepth:-1)==p;if(c&&v)return;r();const[S,y]=this.columnFactory.balanceTreeForAutoCols(u,this.cols.tree);this.autoCols={list:u,tree:S,treeDepth:y,map:{}};const E=M=>{if(!M)return null;const x=M.filter(_=>!vf(_));return[...u,...x]};this.lastOrder=E(this.lastOrder),this.lastPivotOrder=E(this.lastPivotOrder)}createControlsCols(){var g,v,S;const e=()=>{var y;sr(this.context,(y=this.controlsCols)==null?void 0:y.tree),this.controlsCols=null};this.controlsColService||e();const t=this.cols.treeDepth,n=(((g=this.controlsCols)==null?void 0:g.treeDepth)??-1)==t,s=((v=this.controlsColService)==null?void 0:v.createControlsCols())??[];if(RC(s,((S=this.controlsCols)==null?void 0:S.list)??[])&&n)return;e();const[u,c]=this.columnFactory.balanceTreeForAutoCols(s,this.cols.tree);this.controlsCols={list:s,tree:u,treeDepth:c,map:{}};const p=y=>{if(!y)return null;const E=y.filter(b=>!Ou(b));return[...s,...E]};this.lastOrder=p(this.lastOrder),this.lastPivotOrder=p(this.lastPivotOrder)}addControlsCols(){this.controlsCols!=null&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),SC(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,i){this.columnApplyStateService.applyColumnState({state:e.map(n=>({colId:typeof n=="string"?n:n.getColId(),hide:!t}))},i)}setColsPinned(e,t,i){if(!this.cols||fn(e))return;if(pi(this.gos,"print")){se("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let n;t===!0||t==="left"?n="left":t==="right"?n="right":n=null;const s=[];e.forEach(r=>{if(!r)return;const u=this.getCol(r);u&&u.getPinned()!==n&&(u.setPinned(n),s.push(u))}),s.length&&(this.visibleColsService.refresh(i),this.eventDispatcher.columnPinned(s,i)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let n;Ii(e)?n=e.getId():n=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:n,open:t}],i)}getProvidedColGroup(e){var i;let t=null;return fo(null,(i=this.cols)==null?void 0:i.tree,n=>{Ii(n)&&n.getId()===e&&(t=n)}),t}isColGroupLocked(e){const t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;const n=this.funcColsService.getRowGroupColumns().findIndex(s=>s.getColId()===e.getColId());return t>n}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isVisible()&&e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,At(this.gos)||Ts(this.gos)||se("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;const t=new Map(e.map((p,g)=>[p,g]));if(!this.cols.list.some(p=>t.has(p)))return;const n=new Map(this.cols.list.map(p=>[p,!0])),s=e.filter(p=>n.has(p)),r=new Map(s.map(p=>[p,!0])),u=this.cols.list.filter(p=>!r.has(p)),c=s.slice();u.forEach(p=>{let g=p.getOriginalParent();if(!g){c.push(p);return}const v=[];for(;!v.length&&g;)g.getLeafColumns().forEach(b=>{const M=c.indexOf(b)>=0,x=v.indexOf(b)<0;M&&x&&v.push(b)}),g=g.getOriginalParent();if(!v.length){c.push(p);return}const S=v.map(E=>c.indexOf(E)),y=Math.max(...S);bd(c,p,y+1)}),this.cols.list=c}sortColsLikeKeys(e){if(this.cols==null)return;let t=[];const i={};e.forEach(s=>{if(i[s])return;const r=this.cols.map[s];r&&(t.push(r),i[s]=!0)});let n=0;if(this.cols.list.forEach(s=>{const r=s.getColId();if(i[r]!=null)return;r.startsWith($d)?bd(t,s,n++):t.push(s)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){se("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(i=>this.cols.list.indexOf(i)<0).length>0||e.sort((i,n)=>{const s=this.cols.list.indexOf(i),r=this.cols.list.indexOf(n);return s-r})}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const n=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(n,i,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,i){var n;cS((n=this.cols)==null?void 0:n.list,e,t),this.visibleColsService.refresh(i)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=(e=this.cols)==null?void 0:e.list:this.lastOrder=(t=this.cols)==null?void 0:t.list}getColumnDefs(){if(!this.colDefCols)return;const e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((n,s)=>this.lastOrder.indexOf(n)-this.lastOrder.indexOf(s)):this.lastOrder&&e.sort((n,s)=>this.cols.list.indexOf(n)-this.cols.list.indexOf(s));const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,i)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){var e;return((e=this.colDefCols)==null?void 0:e.treeDepth)>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(se("Pivot mode not available with treeData."),!1):!0}isPivotActive(){const e=this.funcColsService.getPivotColumns();return this.pivotMode&&!fn(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e,t,i;sr(this.context,(e=this.colDefCols)==null?void 0:e.tree),sr(this.context,(t=this.autoCols)==null?void 0:t.tree),sr(this.context,(i=this.controlsCols)==null?void 0:i.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){var e;return(e=this.colDefCols)!=null&&e.list?this.colDefCols.list:null}getCols(){var e;return((e=this.cols)==null?void 0:e.list)??[]}getAllCols(){var i,n,s;const e=this.pivotResultColsService.getPivotResultCols(),t=e==null?void 0:e.list;return[((i=this.colDefCols)==null?void 0:i.list)??[],((n=this.autoCols)==null?void 0:n.list)??[],((s=this.controlsCols)==null?void 0:s.list)??[],t??[]].flat()}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){var t;return(t=this.colDefCols)!=null&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;const{map:i,list:n}=t;if(typeof e=="string"&&i[e])return i[e];for(let s=0;s<n.length;s++)if(yC(n[s],e))return n[s];return this.getAutoCol(e)}getAutoCol(e){var t;return((t=this.autoCols)==null?void 0:t.list.find(i=>yC(i,e)))??null}getAutoCols(){var e;return((e=this.autoCols)==null?void 0:e.list)??null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){const e=[],t=this.ctrlsService.getHeaderRowContainerCtrls();for(const i of t){if(!i)continue;const n=i.getGroupRowCount()||0;for(let s=0;s<n;s++){const r=i.getGroupRowCtrlAtIndex(s),u=e[s];if(r){const c=this.getColumnGroupHeaderRowHeight(r);(u==null||c>u)&&(e[s]=c)}}}return e}getColumnGroupHeaderRowHeight(e){const t=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight();let i=0;const n=e.getHeaderCtrls();for(const s of n){const r=s.getColumn();if(r.isAutoHeaderHeight()){const u=r.getAutoHeaderHeight();u!=null&&u>i&&(i=u)}}return Math.max(t,i)}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),i=this.visibleColsService.getAllCols().filter(n=>n.isAutoHeaderHeight()).map(n=>n.getAutoHeaderHeight()||0);return Math.max(e,...i)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if((e==null?void 0:e.type)!=="fitCellContents")return;const{colIds:t,skipHeader:i}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",i)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,t,i){const n=t&&typeof t!="string"?na(t):void 0,s=e&&typeof e!="string"?na(e):void 0,r=n!==s,u=t&&typeof t!="string"?Fd(t):void 0,c=e&&typeof e!="string"?Fd(e):void 0;(r||u!==c)&&this.refreshAll(i)}};function Vr(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function SC(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function yC(e,t){const i=e===t,n=e.getColDef()===t,s=e.getColId()==t;return i||n||s}function RC(e,t){return cr(e,t,(i,n)=>i.getColId()===n.getColId())}var Ix=class extends ie{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}const{colKeys:t,skipHeader:i,skipHeaderGroups:n,stopAtGroup:s,source:r="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;const u=[];let c=-1;const p=i??this.gos.get("skipHeaderOnAutoSize"),g=n??p;for(;c!==0;){c=0;const v=[];t.forEach(S=>{if(!S)return;const y=this.columnModel.getCol(S);if(!y||u.indexOf(y)>=0)return;const E=this.autoWidthCalculator.getPreferredWidthForColumn(y,p);if(E>0){const b=this.normaliseColumnWidth(y,E);y.setActualWidth(b,r),u.push(y),c++}v.push(y)}),v.length&&this.visibleColsService.refresh(r)}g||this.autoSizeColumnGroupsByColumns(t,r,s),this.eventDispatcher.columnResized(u,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const n=new Set;this.columnModel.getColsForKeys(e).forEach(c=>{let p=c.getParent();for(;p&&p!=i;)p.isPadding()||n.add(p),p=p.getParent()});let r;const u=[];for(const c of n){for(const p of this.ctrlsService.getHeaderRowContainerCtrls())if(r=p.getHeaderCtrlForColumn(c),r)break;r&&r.resizeLeafColumnsToFit(t)}return u}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}const i=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}normaliseColumnWidth(e,t){const i=e.getMinWidth();t<i&&(t=i);const n=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=n),t}},kx=class extends ie{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>Ni(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>Ni(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>Ni(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);const i=this.columnModel.getColDefCol(t);return i?[i]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return fn(this.rowGroupCols)}setColumnAggFunc(e,t,i){if(!e)return;const n=this.columnModel.getColDefCol(e);n&&(n.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[n],i))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(i,n)=>this.setRowGroupActive(i,n,t),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,i),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,i))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,i=>this.setRowGroupActive(!0,i,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,i=>this.setRowGroupActive(!1,i,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,i=>i.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(i,n)=>{n.setPivotActive(i,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,i=>i.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(i,n)=>this.setValueActive(i,n,t),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&this.aggFuncService)){const n=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(n)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,i=>this.setValueActive(!0,i,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,i=>this.setValueActive(!1,i,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;const n=this.rowGroupCols[e],s=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,n),this.eventDispatcher.rowGroupChanged(s,i)}setColList(e,t,i,n,s,r,u){if(!this.columnModel.getCols())return;const c=new Map;t.forEach((g,v)=>c.set(g,v)),t.length=0,ge(e)&&e.forEach(g=>{const v=this.columnModel.getColDefCol(g);v&&t.push(v)}),t.forEach((g,v)=>{const S=c.get(g);if(S===void 0){c.set(g,0);return}n&&S!==v||c.delete(g)}),(this.columnModel.getColDefCols()||[]).forEach(g=>{const v=t.indexOf(g)>=0;r(v,g)}),s&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(u),this.eventDispatcher.columnChanged(i,[...c.keys()],u)}updateColList(e,t,i,n,s,r,u){if(!e||fn(e))return;let c=!1;const p=new Set;e.forEach(g=>{if(!g)return;const v=this.columnModel.getColDefCol(g);if(v){if(p.add(v),i){if(t.indexOf(v)>=0)return;t.push(v)}else{const S=t.indexOf(v);if(S<0)return;for(let y=S+1;y<t.length;y++)p.add(t[y]);Ni(t,v)}s(v),c=!0}}),c&&(n&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(u),this.eventDispatcher.genericColumnEvent(r,Array.from(p),u))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(i,n)=>i.setValueActive(n,e),()=>{},()=>{},i=>{const n=i.aggFunc;if(n===null||n==="")return null;if(n!==void 0)return!!n},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueCols.forEach(i=>{const n=i.getColDef();n.aggFunc!=null&&n.aggFunc!=""?i.setAggFunc(n.aggFunc):i.getAggFunc()||i.setAggFunc(n.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(i,n)=>i.setRowGroupActive(n,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(i,n)=>i.setPivotActive(n,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}extractColsCommon(e=[],t=[],i,n,s,r,u){const c=[],p=[];(this.columnModel.getColDefCols()||[]).forEach(y=>{const E=e.indexOf(y)<0,b=y.getColDef(),M=hf(r(b)),x=hf(u(b)),_=Kr(n(b)),k=Kr(s(b));let I;M!==void 0?I=M:_!==void 0?_===null?I=!1:I=_>=0:E?x!==void 0?I=x:k!==void 0?I=k!=null&&k>=0:I=!1:I=t.indexOf(y)>=0,I&&((E?_!=null||k!=null:_!=null)?c.push(y):p.push(y))});const v=y=>{const E=n(y.getColDef()),b=s(y.getColDef());return E??b};c.sort((y,E)=>{const b=v(y),M=v(E);return b===M?0:b<M?-1:1});const S=[].concat(c);return t.forEach(y=>{p.indexOf(y)>=0&&S.push(y)}),p.forEach(y=>{S.indexOf(y)<0&&S.push(y)}),t.forEach(y=>{S.indexOf(y)<0&&i(y,!1)}),S.forEach(y=>{t.indexOf(y)<0&&i(y,!0)}),S}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},n=(s,r,u,c,p,g)=>{const v=this.columnModel.getColDefCols();if(!r.length||!v)return[];const S=Object.keys(s),y=new Set(S),E=new Set(S),b=new Set(r.map(z=>{const j=z.getColId();return E.delete(j),j}).concat(S)),M=[],x={};let _=0;for(let z=0;z<v.length;z++){const j=v[z].getColId();b.has(j)&&(M.push(j),x[j]=_++)}let k=1e3,I=!1,H=0;const A=z=>{const j=x[z];for(let te=H;te<j;te++){const le=M[te];E.has(le)&&(s[le][p]=k++,E.delete(le))}H=j};r.forEach(z=>{const j=z.getColId();if(y.has(j))A(j),s[j][p]=k++;else{const te=z.getColDef();(te[p]===null||te[p]===void 0&&te[g]==null)&&(I||(te[u]||te[u]===void 0&&te[c]?A(j):(E.forEach(ue=>{s[ue][p]=k+x[ue]}),k+=M.length,I=!0)),i[j]||(i[j]={colId:j}),i[j][p]=k++)}})};return n(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),n(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}},Ox=class extends ie{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){const i=this.columnModel.getColDefCols()||[];if(fn(i))return!1;if(e&&e.state&&!e.state.forEach)return se("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const n=this.funcColsService.getModifyColumnsNoEventsCallbacks(),s=(c,p,g)=>{const v=this.compareColumnStatesAndDispatchEvents(t),S=p.slice(),y={},E={},b=[],M=[];let x=0;const _=this.funcColsService.getRowGroupColumns().slice(),k=this.funcColsService.getPivotColumns().slice();c.forEach(z=>{const j=z.colId||"";if(j.startsWith($d)){b.push(z),M.push(z);return}const le=g(j);le?(this.syncColumnWithStateItem(le,z,e.defaultState,y,E,!1,t,n),Ni(S,le)):(M.push(z),x+=1)});const I=z=>this.syncColumnWithStateItem(z,null,e.defaultState,y,E,!1,t,n);S.forEach(I),this.funcColsService.sortRowGroupColumns(PC.bind(this,y,_)),this.funcColsService.sortPivotColumns(PC.bind(this,E,k)),this.columnModel.refreshCols(!1);const A=(this.columnModel.getAutoCols()||[]).slice();return b.forEach(z=>{const j=this.columnModel.getAutoCol(z.colId);Ni(A,j),this.syncColumnWithStateItem(j,z,e.defaultState,null,null,!0,t,n)}),A.forEach(I),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),v(),{unmatchedAndAutoStates:M,unmatchedCount:x}};this.columnAnimationService.start();let{unmatchedAndAutoStates:r,unmatchedCount:u}=s(e.state||[],i,c=>this.columnModel.getColDefCol(c));if(r.length>0||ge(e.defaultState)){const c=this.pivotResultColsService.getPivotResultCols(),p=c==null?void 0:c.list;u=s(r,p||[],g=>this.pivotResultColsService.getPivotResultCol(g)).unmatchedCount}return this.columnAnimationService.finish(),u===0}resetColumnState(e){const t=this.columnModel.getColDefCols();if(fn(t))return;const i=this.columnModel.getColDefColTree(),n=rg(i),s=[];let r=1e3,u=1e3,c=[];const p=this.columnModel.getAutoCols();p&&(c=c.concat(p)),n&&(c=c.concat(n)),c.forEach(g=>{const v=this.getColumnStateFromColDef(g);ut(v.rowGroupIndex)&&v.rowGroup&&(v.rowGroupIndex=r++),ut(v.pivotIndex)&&v.pivot&&(v.pivotIndex=u++),s.push(v)}),this.applyColumnState({state:s,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(b,M)=>b??M??null,i=e.getColDef(),n=t(i.sort,i.initialSort),s=t(i.sortIndex,i.initialSortIndex),r=t(i.hide,i.initialHide),u=t(i.pinned,i.initialPinned),c=t(i.width,i.initialWidth),p=t(i.flex,i.initialFlex);let g=t(i.rowGroupIndex,i.initialRowGroupIndex),v=t(i.rowGroup,i.initialRowGroup);g==null&&(v==null||v==!1)&&(g=null,v=null);let S=t(i.pivotIndex,i.initialPivotIndex),y=t(i.pivot,i.initialPivot);S==null&&(y==null||y==!1)&&(S=null,y=null);const E=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:n,sortIndex:s,hide:r,pinned:u,width:c,flex:p,rowGroup:v,rowGroupIndex:g,pivot:y,pivotIndex:S,aggFunc:E}}syncColumnWithStateItem(e,t,i,n,s,r,u,c){if(!e)return;const p=(H,A)=>{const z={value1:void 0,value2:void 0};let j=!1;return t&&(t[H]!==void 0&&(z.value1=t[H],j=!0),ge(A)&&t[A]!==void 0&&(z.value2=t[A],j=!0)),!j&&i&&(i[H]!==void 0&&(z.value1=i[H]),ge(A)&&i[A]!==void 0&&(z.value2=i[A])),z},g=p("hide").value1;g!==void 0&&e.setVisible(!g,u);const v=p("pinned").value1;v!==void 0&&e.setPinned(v);const S=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),y=p("flex").value1;if(y!==void 0&&e.setFlex(y),y==null){const H=p("width").value1;H!=null&&S!=null&&H>=S&&e.setActualWidth(H,u)}const E=p("sort").value1;E!==void 0&&(E==="desc"||E==="asc"?e.setSort(E,u):e.setSort(void 0,u));const b=p("sortIndex").value1;if(b!==void 0&&e.setSortIndex(b),r||!e.isPrimary())return;const M=p("aggFunc").value1;M!==void 0&&(typeof M=="string"?(e.setAggFunc(M),e.isValueActive()||(e.setValueActive(!0,u),c.addValueCol(e))):(ge(M)&&se("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,u),c.removeValueCol(e))));const{value1:x,value2:_}=p("rowGroup","rowGroupIndex");(x!==void 0||_!==void 0)&&(typeof _=="number"||x?(e.isRowGroupActive()||(e.setRowGroupActive(!0,u),c.addGroupCol(e)),n&&typeof _=="number"&&(n[e.getId()]=_)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,u),c.removeGroupCol(e)));const{value1:k,value2:I}=p("pivot","pivotIndex");(k!==void 0||I!==void 0)&&(typeof I=="number"||k?(e.isPivotActive()||(e.setPivotActive(!0,u),c.addPivotCol(e)),s&&typeof I=="number"&&(s[e.getId()]=I)):e.isPivotActive()&&(e.setPivotActive(!1,u),c.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;const t=[];e.state.forEach(i=>{i.colId!=null&&t.push(i.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},i=this.columnGetStateService.getColumnState(),n={};return i.forEach(s=>{n[s.colId]=s}),()=>{const s=this.columnModel.getAllCols(),r=(M,x,_,k)=>{const I=x.map(k),H=_.map(k);if(cr(I,H))return;const z=new Set(x);_.forEach(te=>{z.delete(te)||z.add(te)});const j=[...z];this.eventService.dispatchEvent({type:M,columns:j,column:j.length===1?j[0]:null,source:e})},u=M=>{const x=[];return s.forEach(_=>{const k=n[_.getColId()];k&&M(k,_)&&x.push(_)}),x},c=M=>M.getColId();r("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),c),r("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),c);const g=u((M,x)=>{const _=M.aggFunc!=null,k=_!=x.isValueActive(),I=_&&M.aggFunc!=x.getAggFunc();return k||I});g.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",g,e);const v=(M,x)=>M.width!=x.getActualWidth();this.eventDispatcher.columnResized(u(v),!0,e);const S=(M,x)=>M.pinned!=x.getPinned();this.eventDispatcher.columnPinned(u(S),e);const y=(M,x)=>M.hide==x.isVisible();this.eventDispatcher.columnVisible(u(y),e);const b=u((M,x)=>M.sort!=x.getSort()||M.sortIndex!=x.getSortIndex());b.length>0&&this.sortController.dispatchSortChangedEvents(e,b),this.normaliseColumnMovedEventForColumnState(i,e)}}normaliseColumnMovedEventForColumnState(e,t){const i=this.columnGetStateService.getColumnState(),n={};i.forEach(p=>n[p.colId]=p);const s={};e.forEach(p=>{n[p.colId]&&(s[p.colId]=!0)});const r=e.filter(p=>s[p.colId]),u=i.filter(p=>s[p.colId]),c=[];u.forEach((p,g)=>{const v=r&&r[g];if(v&&v.colId!==p.colId){const S=this.columnModel.getCol(v.colId);S&&c.push(S)}}),c.length&&this.eventDispatcher.columnMoved({movedColumns:c,source:t,finished:!0})}},PC=(e,t,i,n)=>{const s=e[i.getId()],r=e[n.getId()],u=s!=null,c=r!=null;if(u&&c)return s-r;if(u)return-1;if(c)return 1;const p=t.indexOf(i),g=t.indexOf(n),v=p>=0,S=g>=0;return v&&S?p-g:v?-1:1},Nx=class extends ie{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,i){const n=this.columnModel.getCols();if(!n)return;const s=n[e];this.moveColumns([s],t,i)}moveColumns(e,t,i,n=!0){const s=this.columnModel.getCols();if(!s)return;if(t>s.length-e.length){se("tried to insert columns in invalid location, toIndex = ",t),se("remember that you should not count the moving columns when calculating the new index");return}this.columnAnimationService.start();const r=this.columnModel.getColsForKeys(e);this.doesMovePassRules(r,t)&&(this.columnModel.moveInCols(r,t,i),this.eventDispatcher.columnMoved({movedColumns:r,source:i,toIndex:t,finished:n})),this.columnAnimationService.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){const n=this.columnModel.getCols().slice();return cS(n,e,t),n}doesMovePassLockedPositions(e){const t=r=>r?r==="left"||r===!0?-1:1:0,i=this.gos.get("enableRtl");let n=i?1:-1,s=!0;return e.forEach(r=>{const u=t(r.getColDef().lockPosition);i?u>n&&(s=!1):u<n&&(s=!1),n=u}),s}doesMovePassMarryChildren(e){let t=!0;const i=this.columnModel.getColTree();return fo(null,i,n=>{if(!Ii(n))return;const s=n,r=s.getColGroupDef();if(!(r&&r.marryChildren))return;const c=[];s.getLeafColumns().forEach(y=>{const E=e.indexOf(y);c.push(E)});const p=Math.max.apply(Math,c),g=Math.min.apply(Math,c),v=p-g,S=s.getLeafColumns().length-1;v>S&&(t=!1)}),t}placeLockedColumns(e){const t=[],i=[],n=[];return e.forEach(r=>{const u=r.getColDef().lockPosition;u==="right"?n.push(r):u==="left"||u===!0?t.push(r):i.push(r)}),this.gos.get("enableRtl")?[...n,...i,...t]:[...t,...i,...n]}},Gx=/[&<>"']/g,Hx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function Es(e,t){if(e==null)return null;const i=e.toString().toString();return t?i:i.replace(Gx,n=>Hx[n])}function Bx(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(s=>s.substring(0,1).toUpperCase()+(s.length>1?s.substring(1,s.length):"")).join(" ")}var Vx=class extends ie{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const n=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,i){const n=t?t.getColGroupDef():null;return n?this.getHeaderName(n,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,n,s){const r=e.headerValueGetter;if(r){const u=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:n,location:s});return typeof r=="function"?r(u):typeof r=="string"?this.expressionService.evaluate(r,u):(se("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return Bx(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn,n=ge(i);let s=null,r;if(n){const u=this.funcColsService.getValueColumns(),c=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&u.length===1,p=e.getColDef().pivotTotalColumnIds!==void 0;if(c&&!p)return t;s=i?i.getAggFunc():null,r=!0}else{const u=e.isValueActive(),c=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();u&&c?(s=e.getAggFunc(),r=!0):r=!1}if(r){const u=typeof s=="string"?s:"func";return`${this.localeService.getLocaleTextFunc()(u,u)}(${t})`}return t}},Wx=class extends ie{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){var e;sr(this.context,(e=this.pivotResultCols)==null?void 0:e.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;const i=this.columnModel.getColDefCol(t);let n=null;return this.pivotResultCols.list.forEach(s=>{const r=s.getColDef().pivotKeys,u=s.getColDef().pivotValueColumn;cr(r,e)&&u===i&&(n=s)}),n}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){var i,n;if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);const s=this.columnFactory.createColumnTree(e,!1,((i=this.pivotResultCols)==null?void 0:i.tree)||this.previousPivotResultCols||void 0,t);sr(this.context,(n=this.pivotResultCols)==null?void 0:n.tree,s.columnTree);const r=s.columnTree,u=s.treeDept,c=rg(r),p={};this.pivotResultCols={tree:r,treeDepth:u,list:c,map:p},this.pivotResultCols.list.forEach(v=>this.pivotResultCols.map[v.getId()]=v);const g=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!g)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(t)}}processPivotResultColDef(e){const t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;const n=s=>{s.forEach(r=>{if(ge(r.children)){const c=r;i&&i(c),n(c.children)}else t&&t(r)})};e&&n(e)}},zx=class extends ie{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,i,n){const s=[];e.forEach(r=>{const u=this.columnModel.getColDefCol(r.key)||this.columnModel.getCol(r.key);if(!u)return;if(s.push({width:r.newWidth,ratios:[1],columns:[u]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){const p=this.visibleColsService.getColAfter(u);if(!p)return;const g=u.getActualWidth()-r.newWidth,v=p.getActualWidth()+g;s.push({width:v,ratios:[1],columns:[p]})}}),s.length!==0&&this.resizeColumnSets({resizeSets:s,finished:i,source:n})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:n}=e;if(!(!t||t.every(v=>this.checkMinAndMaxWidthsForSet(v)))){if(i){const v=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(v,i,n)}return}const r=[],u=[];t.forEach(v=>{const{width:S,columns:y,ratios:E}=v,b={},M={};y.forEach(k=>u.push(k));let x=!0,_=0;for(;x;){if(_++,_>1e3){Ct("infinite loop in resizeColumnSets");break}x=!1;const k=[];let I=0,H=S;y.forEach((z,j)=>{if(M[z.getId()])H-=b[z.getId()];else{k.push(z);const le=E[j];I+=le}});const A=1/I;k.forEach((z,j)=>{const te=j===k.length-1;let le;te?le=H:(le=Math.round(E[j]*S*A),H-=le);const ve=z.getMinWidth(),ue=z.getMaxWidth();le<ve?(le=ve,M[z.getId()]=!0,x=!0):ue>0&&le>ue&&(le=ue,M[z.getId()]=!0,x=!0),b[z.getId()]=le})}y.forEach(k=>{const I=b[k.getId()];k.getActualWidth()!==I&&(k.setActualWidth(I,n),r.push(k))})});const c=r.length>0;let p=[];c&&(p=this.refreshFlexedColumns({resizingCols:u,skipSetLeft:!0}),this.visibleColsService.setLeftValues(n),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());const g=u.concat(p);(c||i)&&this.eventDispatcher.columnResized(g,i,n,p)}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let n=0,s=0,r=!0;t.forEach(p=>{const g=p.getMinWidth();n+=g||0;const v=p.getMaxWidth();v>0?s+=v:r=!1});const u=i>=n,c=!r||i<=s;return u&&c}refreshFlexedColumns(e={}){const t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];const i=this.visibleColsService.getCenterCols();let n=-1;if(e.resizingCols){const y=new Set(e.resizingCols);for(let E=i.length-1;E>=0;E--)if(y.has(i[E])){n=E;break}}let s=0,r=[],u=0,c=0;for(let y=0;y<i.length;y++)i[y].getFlex()&&y>n?(r.push(i[y]),c+=i[y].getFlex(),u+=i[y].getMinWidth()):s+=i[y].getActualWidth();if(!r.length)return[];let p=[];s+u>this.flexViewportWidth&&(r.forEach(y=>y.setActualWidth(y.getMinWidth(),t)),p=r,r=[]);const g=[];let v;e:for(;;){v=this.flexViewportWidth-s;const y=v/c;for(let E=0;E<r.length;E++){const b=r[E],M=y*b.getFlex();let x=0;const _=b.getMinWidth(),k=b.getMaxWidth();if(M<_?x=_:M>k&&(x=k),x){b.setActualWidth(x,t),uS(r,b),c-=b.getFlex(),p.push(b),s+=b.getActualWidth();continue e}g[E]=Math.floor(M)}break}let S=v;return r.forEach((y,E)=>{const b=E<r.length-1?Math.min(g[E],S):Math.max(g[E],S);y.setActualWidth(b,t),p.push(y),S-=g[E]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(p,!0,t,r),r}sizeColumnsToFit(e,t="sizeColumnsToFit",i,n){var y;if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,i,n));return}const s={};n&&((y=n==null?void 0:n.columnLimits)==null||y.forEach(({key:E,...b})=>{s[typeof E=="string"?E:E.getColId()]=b}));const r=this.visibleColsService.getAllCols(),u=e===oo(r);if(e<=0||!r.length||u)return;const c=[],p=[];r.forEach(E=>{E.getColDef().suppressSizeToFit===!0?p.push(E):c.push(E)});const g=c.slice(0);let v=!1;const S=E=>{Ni(c,E),p.push(E)};for(c.forEach(E=>{E.resetActualWidth(t);const b=s==null?void 0:s[E.getId()],M=(b==null?void 0:b.minWidth)??(n==null?void 0:n.defaultMinWidth),x=(b==null?void 0:b.maxWidth)??(n==null?void 0:n.defaultMaxWidth),_=E.getActualWidth();typeof M=="number"&&_<M?E.setActualWidth(M,t,!0):typeof x=="number"&&_>x&&E.setActualWidth(x,t,!0)});!v;){v=!0;const E=e-oo(p);if(E<=0)c.forEach(b=>{var x;const M=((x=s==null?void 0:s[b.getId()])==null?void 0:x.minWidth)??(n==null?void 0:n.defaultMinWidth);if(typeof M=="number"){b.setActualWidth(M,t,!0);return}b.setMinimum(t)});else{const b=E/oo(c);let M=E;for(let x=c.length-1;x>=0;x--){const _=c[x],k=s==null?void 0:s[_.getId()],I=(k==null?void 0:k.minWidth)??(n==null?void 0:n.defaultMinWidth),H=(k==null?void 0:k.maxWidth)??(n==null?void 0:n.defaultMaxWidth),A=_.getMinWidth(),z=_.getMaxWidth(),j=typeof I=="number"&&I>A?I:A,te=typeof H=="number"&&H<z?H:z;let le=Math.round(_.getActualWidth()*b);le<j?(le=j,S(_),v=!1):le>te?(le=te,S(_),v=!1):x===0&&(le=M),_.setActualWidth(le,t,!0),M-=le}}}g.forEach(E=>{E.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!i&&this.eventDispatcher.columnResized(g,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:i,defaultMinWidth:n,defaultMaxWidth:s}=e,r=i==null?void 0:i.map(({colId:u,minWidth:c,maxWidth:p})=>({key:u,minWidth:c,maxWidth:p}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:n,defaultMaxWidth:s,columnLimits:r})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function mS(e,t){return e+"_"+t}function Yt(e){return e instanceof vS}var vS=class extends ie{constructor(e,t,i,n){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=n}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return mS(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{Yt(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=at(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!!((e=this.getColGroupDef())!=null&&e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{ur(t)?e.push(t):Yt(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{ur(t)?e.push(t):Yt(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(i=>{if(Yt(i)&&(!i.displayedChildren||!i.displayedChildren.length))return;switch(i.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},CS=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}},Ux=class extends ie{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=Wp(this.treeLeft),this.columnsCenter=Wp(this.treeCenter),this.columnsRight=Wp(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(i=>i.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){const e=oo(this.columnsCenter),t=oo(this.columnsLeft),i=oo(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,i;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,i=this.columnsRight?at(this.columnsRight):null):(t=this.columnsLeft?at(this.columnsLeft):null,i=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(n=>{n.setLastLeftPinned(n===t,e),n.setFirstRightPinned(n===i,e)})}buildTrees(){const e=this.columnModel.getColsToShow(),t=e.filter(r=>r.getPinned()=="left"),i=e.filter(r=>r.getPinned()=="right"),n=e.filter(r=>r.getPinned()!="left"&&r.getPinned()!="right"),s=new CS;this.treeLeft=this.createGroups({columns:t,idCreator:s,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:i,idCreator:s,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:n,idCreator:s,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){const e=this.columnModel.getCols(),t=[],i=[],n=[];for(const s of e){const r=s.getPinned();r?r===!0||r==="left"?t.push(s):n.push(s):i.push(s)}this.ariaOrderColumns=t.concat(i).concat(n)}getAriaColIndex(e){let t;return Yt(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{Yt(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;const i=this.columnModel.getCols().slice(0),n=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(s=>{if(n){let r=oo(s);s.forEach(u=>{r-=u.getActualWidth(),u.setLeft(r,e)})}else{let r=0;s.forEach(u=>{u.setLeft(r,e),r+=u.getActualWidth()})}wx(i,s)}),i.forEach(s=>{s.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,i,n){const s=[];let r=null;for(let u=0;u<t.length;u++){const c=t[u],p=t.length-u,g=Math.min(c.getColSpan(e),p),v=[c];if(g>1){const y=g-1;for(let E=1;E<=y;E++)v.push(t[u+E]);u+=y}let S;i?(S=!1,v.forEach(y=>{i(y)&&(S=!0)})):S=!0,S&&(s.length===0&&r&&(n&&n(c))&&s.push(r),s.push(c)),r=c}return s}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){const t=this.getAllCols(),i=t.indexOf(e);return i>0?t[i-1]:null}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),s=t==="After"?at(n):n[0],r=`getCol${t}`;for(;;){const u=this[r](s);if(!u)return null;const c=this.getColGroupAtLevel(u,i);if(c!==e)return c}}getColGroupAtLevel(e,t){let i=e.getParent(),n,s;for(;n=i.getProvidedColumnGroup().getLevel(),s=i.getPaddingLevel(),!(n+s<=t);)i=i.getParent();return i}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};Wr(this.treeCenter,!1,e),Wr(this.treeLeft,!1,e),Wr(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllTrees();Wr(e,!1,t=>{Yt(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const n=this[t[i]]();if(n.length)return e?at(n):n[0]}return null}getColumnGroup(e,t){if(!e)return null;if(Yt(e))return e;const i=this.getAllTrees(),n=typeof t=="number";let s=null;return Wr(i,!1,r=>{if(Yt(r)){const u=r;let c;n?c=e===u.getGroupId()&&t===u.getPartId():c=e===u.getGroupId(),c&&(s=u)}}),s}getColAfter(e){const t=this.getAllCols(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return oo(this.columnsLeft)}getDisplayedColumnsRightWidth(){return oo(this.columnsRight)}isColAtEdge(e,t){const i=this.getAllCols();if(!i.length)return!1;const n=t==="first";let s;if(Yt(e)){const r=e.getDisplayedLeafColumns();if(!r.length)return!1;s=n?r[0]:at(r)}else s=e;return(n?i[0]:at(i))===s}createGroups(e){const{columns:t,idCreator:i,pinned:n,oldDisplayedGroups:s,isStandaloneStructure:r}=e,u=this.mapOldGroupsById(s),c=[];let p=t;for(;p.length;){const g=p;p=[];let v=0;const S=y=>{const E=v;v=y;const b=g[E],x=(Yt(b)?b.getProvidedColumnGroup():b).getOriginalParent();if(x==null){for(let k=E;k<y;k++)c.push(g[k]);return}const _=this.createColGroup(x,i,u,n,r);for(let k=E;k<y;k++)_.addChild(g[k]);p.push(_)};for(let y=1;y<g.length;y++){const E=g[y],M=(Yt(E)?E.getProvidedColumnGroup():E).getOriginalParent(),x=g[v],k=(Yt(x)?x.getProvidedColumnGroup():x).getOriginalParent();M!==k&&S(y)}v<g.length&&S(g.length)}return r||this.setupParentsIntoCols(c,null),c}createColGroup(e,t,i,n,s){const r=e.getGroupId(),u=t.getInstanceIdForKey(r),c=mS(r,u);let p=i[c];return p&&p.getProvidedColumnGroup()!==e&&(p=null),ge(p)?p.reset():(p=new vS(e,r,u,n),s||this.createBean(p)),p}mapOldGroupsById(e){const t={},i=n=>{n.forEach(s=>{if(Yt(s)){const r=s;t[s.getUniqueId()]=r,i(r.getChildren())}})};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach(i=>{if(i.setParent(t),Yt(i)){const n=i;this.setupParentsIntoCols(n.getChildren(),n)}})}};function Wr(e,t,i){if(e)for(let n=0;n<e.length;n++){const s=e[n];if(Yt(s)){const r=t?s.getDisplayedChildren():s.getChildren();Wr(r,t,i)}i(s)}}function Wp(e){const t=[];return Wr(e,!0,i=>{ur(i)&&t.push(i)}),t}var wS=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],jx=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],$x=[...wS,...jx],Kx={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},Fi=class{};Fi.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];Fi.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"];Fi.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];Fi.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];Fi.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"];Fi.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"];Fi.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];Fi.ALL_PROPERTIES=[...Fi.ARRAY_PROPERTIES,...Fi.OBJECT_PROPERTIES,...Fi.STRING_PROPERTIES,...Fi.NUMBER_PROPERTIES,...Fi.FUNCTION_PROPERTIES,...Fi.BOOLEAN_PROPERTIES,...Fi.OTHER_PROPERTIES];var Eu=Fi,An=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};An.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";An.PUBLIC_EVENTS=wS;An.EVENT_CALLBACKS=$x.map(e=>An.getCallbackForEvent(e));An.BOOLEAN_PROPERTIES=Eu.BOOLEAN_PROPERTIES;An.ALL_PROPERTIES=Eu.ALL_PROPERTIES;An.ALL_PROPERTIES_AND_CALLBACKS=[...An.ALL_PROPERTIES,...An.EVENT_CALLBACKS];An.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(An.ALL_PROPERTIES_AND_CALLBACKS);var bu=An;function Zx(e,t){typeof e!="object"&&(e={});const i={...e};return bu.ALL_PROPERTIES_AND_CALLBACKS.forEach(s=>{const r=t[s];typeof r<"u"&&r!==bu.VUE_OMITTED_PROPERTY&&(i[s]=r)}),i}function qx(e,t){if(!e)return;const i={};let n=!1;if(Object.keys(e).filter(u=>bu.ALL_PROPERTIES_AND_CALLBACKS_SET.has(u)).forEach(u=>{i[u]=e[u],n=!0}),!n)return;const s={type:"gridOptionsChanged",options:i};t.dispatchEvent(s);const r={type:"componentStateChanged"};ts(i,(u,c)=>{r[u]=c}),t.dispatchEvent(r)}var ca=class extends ie{};function Nu(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),i??e}var Gu=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(n=>this.addCssClass(n));return}if(this.cssClassStates[e]!==!0&&e.length){const n=this.getGui();n&&n.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(n=>this.removeCssClass(n));return}if(this.cssClassStates[e]!==!1&&e.length){const n=this.getGui();n&&n.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const n=(e||"").split(" ");if(n.length>1){n.forEach(s=>this.addOrRemoveCssClass(s,t));return}}if(this.cssClassStates[e]!==t&&e.length){const n=this.getGui();n&&n.classList.toggle(e,t),this.cssClassStates[e]=t}}};function vo(e,t,i){i==null||typeof i=="string"&&i==""?SS(e,t):_s(e,t,i)}function _s(e,t,i){e.setAttribute(yS(t),i.toString())}function SS(e,t){e.removeAttribute(yS(t))}function yS(e){return`aria-${e}`}function os(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function Yx(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function Qx(e){return e.getAttribute("aria-label")}function oa(e,t){vo(e,"label",t)}function xu(e,t){vo(e,"labelledby",t)}function RS(e,t){vo(e,"live",t)}function Xx(e,t){vo(e,"atomic",t)}function Jx(e,t){vo(e,"relevant",t)}function eD(e,t){vo(e,"disabled",t)}function PS(e,t){vo(e,"hidden",t)}function xd(e,t){_s(e,"expanded",t)}function tD(e,t){_s(e,"setsize",t)}function iD(e,t){_s(e,"posinset",t)}function nD(e,t){_s(e,"rowcount",t)}function sD(e,t){_s(e,"rowindex",t)}function oD(e,t){_s(e,"colcount",t)}function FS(e,t){_s(e,"colindex",t)}function rD(e,t){_s(e,"colspan",t)}function lD(e,t){_s(e,"sort",t)}function aD(e){SS(e,"sort")}function Dd(e,t){vo(e,"selected",t)}function uD(e,t){vo(e,"controls",t.id),xu(t,e.id)}function cg(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var zp,Jc,Up,jp,$p,Kp,yf,Rf,Zp;function bs(){return zp===void 0&&(zp=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),zp}function ES(){if(Jc===void 0)if(bs()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(Jc=e[1]!=null?parseFloat(e[1]):0)}else Jc=0;return Jc}function dg(){if(Up===void 0){const e=window;Up=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Up}function hg(){return jp===void 0&&(jp=/(firefox)/i.test(navigator.userAgent)),jp}function bS(){return $p===void 0&&($p=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),$p}function dr(){return Kp===void 0&&(Kp=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),Kp}function FC(){return!bs()||ES()>=15}function Pf(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return t===-1&&(i===null||i===""&&!hg())?null:t.toString()}function cD(){if(Zp!==void 0)return Zp;if(!document.body)return-1;let e=1e6;const t=hg()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const n=e*2;if(i.style.height=n+"px",n>t||i.clientHeight!==n)break;e=n}return document.body.removeChild(i),Zp=e,e}function dD(){var e,t;return((e=document.body)==null?void 0:e.clientWidth)??(window.innerHeight||((t=document.documentElement)==null?void 0:t.clientWidth)||-1)}function hD(){var e,t;return((e=document.body)==null?void 0:e.clientHeight)??(window.innerHeight||((t=document.documentElement)==null?void 0:t.clientHeight)||-1)}function pD(){return Rf==null&&xS(),Rf}function xS(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;i===0&&t.clientWidth===0&&(i=null),t.parentNode&&t.parentNode.removeChild(t),i!=null&&(Rf=i,yf=i===0)}function DS(){return yf==null&&xS(),yf}var ed,fD="[tabindex], input, select, button, textarea, [href]",MS="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function pg(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,n=t.call(e,"input, select, button, textarea"),s=t.call(e,MS),r=xs(e);return n&&!s&&r}function Vt(e,t,i={}){const{skipAriaHidden:n}=i;e.classList.toggle("ag-hidden",!t),n||PS(e,!t)}function gD(e,t,i={}){const{skipAriaHidden:n}=i;e.classList.toggle("ag-invisible",!t),n||PS(e,!t)}function Du(e,t){const i="disabled",n=t?s=>s.setAttribute(i,""):s=>s.removeAttribute(i);n(e),AS(e.querySelectorAll("input"),s=>n(s))}function ta(e,t,i){let n=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof i=="number"){if(++n>i)break}else if(e===i)break}return!1}function nl(e){const{height:t,width:i,borderTopWidth:n,borderRightWidth:s,borderBottomWidth:r,borderLeftWidth:u,paddingTop:c,paddingRight:p,paddingBottom:g,paddingLeft:v,marginTop:S,marginRight:y,marginBottom:E,marginLeft:b,boxSizing:M}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(n||"0"),borderRightWidth:parseFloat(s||"0"),borderBottomWidth:parseFloat(r||"0"),borderLeftWidth:parseFloat(u||"0"),paddingTop:parseFloat(c||"0"),paddingRight:parseFloat(p||"0"),paddingBottom:parseFloat(g||"0"),paddingLeft:parseFloat(v||"0"),marginTop:parseFloat(S||"0"),marginRight:parseFloat(y||"0"),marginBottom:parseFloat(E||"0"),marginLeft:parseFloat(b||"0"),boxSizing:M}}function fg(e){const t=nl(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function Hu(e){const t=nl(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function TS(e){const{height:t,marginBottom:i,marginTop:n}=nl(e);return Math.floor(t+i+n)}function Md(e){const{width:t,marginLeft:i,marginRight:n}=nl(e);return Math.floor(t+i+n)}function _S(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:n,borderRightWidth:s,borderBottomWidth:r}=nl(e);return{top:t.top+(i||0),left:t.left+(n||0),right:t.right+(s||0),bottom:t.bottom+(r||0)}}function Td(){if(typeof ed=="boolean")return ed;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,ed=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),ed}function _d(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),dg()&&!Td()&&(i=e.scrollWidth-e.getBoundingClientRect().width-i)),i}function Ld(e,t,i){i&&(Td()?t*=-1:(bs()||dg())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t}function gn(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function el(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function LS(e){return!!e.offsetParent}function xs(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!LS(e)||window.getComputedStyle(e).visibility!=="visible")}function Mu(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function mD(e){return e.clientWidth<e.scrollWidth}function vD(e){return e.clientHeight<e.scrollHeight}function Ad(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):ns(e,t)}function ns(e,t){t=gg(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function mu(e,t){t=gg(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function gg(e){return typeof e=="number"?`${e}px`:e}function mg(e){return e instanceof Node||e instanceof HTMLElement}function CD(e){if(e==null)return[];const t=[];return AS(e,i=>t.push(i)),t}function wD(e,t){if(e)for(let i=0;i<e.length;i++){const n=e[i];t(n.name,n.value)}}function In(e,t,i){i==null||i===""?e.removeAttribute(t):e.setAttribute(t,i.toString())}function AS(e,t){if(e!=null)for(let i=0;i<e.length;i++)t(e[i])}var ra=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},SD=1e3,yD=1e3,EC=100,IS=class Gr extends ie{constructor(t,i,n,s){super(),this.parentComp=t,this.tooltipShowDelayOverride=i,this.tooltipHideDelayOverride=n,this.shouldDisplayTooltip=s,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupService=t.popupService,this.userComponentFactory=t.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const t=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){const i=this.gos.get(t);return i<0&&se(`${t} should not be lower than 0`),Math.max(200,i)}getTooltipDelay(t){return t==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!dr()&&(Gr.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},EC):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){var r;const i=t.relatedTarget,n=this.parentComp.getGui(),s=(r=this.tooltipComp)==null?void 0:r.getGui();this.isInteractingWithTooltip||n.contains(i)||this.interactionEnabled&&(s!=null&&s.contains(i))||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||Gr.isLocked)return;let i=0;t&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){const t=new Date().getTime(),i=Gr.lastTooltipHideTime;return t-i<SD}setToDoNothing(t){!t&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const t={...this.parentComp.getTooltipParams()};if(!ge(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(i)}hideTooltip(t){!t&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),Gr.lastTooltipHideTime=new Date().getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),t&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(t,i){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(i);return}const s=i.getGui();this.tooltipComp=i,s.classList.contains("ag-tooltip")||s.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&s.classList.add("ag-tooltip-animate"),this.interactionEnabled&&s.classList.add("ag-tooltip-interactive");const r=this.localeService.getLocaleTextFunc(),u=this.popupService.addPopup({eChild:s,ariaLabel:r("ariaLabelTooltip","Tooltip")});if(u&&(this.tooltipPopupDestroyFunc=u.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const c=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:c,columnMoved:c})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(s,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners($t(this.gos),{keydown:c=>{s.contains(c==null?void 0:c.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(s,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:s,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var n;const t=(n=this.tooltipComp)==null?void 0:n.getGui(),i=Wt(this.gos);return!!t&&t.contains(i)}onTooltipFocusOut(t){const i=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,i.contains(t.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent({...t,mouseEvent:this.lastMouseEvent}):this.popupService.positionPopupByComponent({...t,eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const t=this.tooltipPopupDestroyFunc,i=this.tooltipComp,n=this.tooltipTrigger===0?yD:0;window.setTimeout(()=>{t(),this.destroyBean(i)},n),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Gr.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},EC)}unlockService(){Gr.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};IS.isLocked=!1;var RD=IS,da=class extends ie{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(e!=null&&e!=""?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var t,i,n,s;if(this.tooltipManager!=null)return;const e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new RD(e,(i=(t=this.ctrl).getTooltipShowDelayOverride)==null?void 0:i.call(t),(s=(n=this.ctrl).getTooltipHideDelayOverride)==null?void 0:s.call(n),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){var s,r,u,c,p;const e=this.ctrl,t=(s=e.getColumn)==null?void 0:s.call(e),i=(r=e.getColDef)==null?void 0:r.call(e),n=(u=e.getRowNode)==null?void 0:u.call(e);return{location:e.getLocation(),colDef:i,column:t,rowIndex:(c=e.getRowIndex)==null?void 0:c.call(e),node:n,data:n==null?void 0:n.data,value:this.getTooltipText(),valueFormatted:(p=e.getValueFormatted)==null?void 0:p.call(e),hideTooltipCallback:()=>{var g;return(g=this.tooltipManager)==null?void 0:g.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},PD=new ra,Ge=null,xt=class kS extends ie{constructor(t,i){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=PD.next(),this.cssClassManager=new Gu(()=>this.eGui),this.componentSelectors=new Map((i??[]).map(n=>[n.selector,n])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,i){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,i))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){const{newTooltipText:i,showDelayOverride:n,hideDelayOverride:s,location:r,shouldDisplayTooltip:u}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==i&&(this.tooltipText=i);const c=()=>this.tooltipText;i!=null&&(this.tooltipFeature=this.createBean(new da({getTooltipValue:c,getGui:()=>this.getGui(),getLocation:()=>r??"UNKNOWN",getColDef:t==null?void 0:t.getColDef,getColumn:t==null?void 0:t.getColumn,getTooltipShowDelayOverride:n!=null?()=>n:void 0,getTooltipHideDelayOverride:s!=null?()=>s:void 0,shouldDisplayTooltip:u})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,i,n,s=null){if(i===void 0&&(i=this.getDataRefAttribute(t)),i){const r=this[i];if(r===Ge)this[i]=s??t;else{const u=n&&n[i];!this.suppressDataRefValidation&&!u&&se(`Issue with data-ref: ${i} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(t,i){CD(t.childNodes).forEach(s=>{if(!(s instanceof HTMLElement))return;const r=this.createComponentFromElement(s,u=>{u.getGui()&&this.copyAttributesFromNode(s,u.getGui())},i);if(r){if(r.addItems&&s.children.length){this.createChildComponentsFromTags(s,i);const u=Array.prototype.slice.call(s.children);r.addItems(u)}this.swapComponentForNode(r,t,s)}else s.childNodes&&this.createChildComponentsFromTags(s,i)})}createComponentFromElement(t,i,n){const s=t.nodeName,r=this.getDataRefAttribute(t),u=s.indexOf("AG-")===0,c=u?this.componentSelectors.get(s):null;let p=null;if(c){kS.elementGettingCreated=t;const g=n&&r?n[r]:void 0;p=new c.component(g),p.setParentComponent(this),this.createBean(p,null,i)}else u&&se(`Missing selector: ${s}`);return this.applyElementsToComponent(t,r,n,p),p}copyAttributesFromNode(t,i){wD(t.attributes,(n,s)=>i.setAttribute(n,s))}swapComponentForNode(t,i,n){const s=t.getGui();i.replaceChild(s,n),i.insertBefore(document.createComment(n.nodeName),s),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){const i=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(n=>n.setAttribute("tabindex",i.toString()))}setTemplate(t,i,n){const s=Mu(t);this.setTemplateFromElement(s,i,n)}setTemplateFromElement(t,i,n,s=!1){if(this.eGui=t,this.suppressDataRefValidation=s,i)for(let r=0;r<i.length;r++){const u=i[r];this.componentSelectors.set(u.selector,u)}this.wireTemplate(t,n)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,i){let n=i;return t==null?null:(n||(n=this.eGui),mg(t)?{element:t,parent:n}:{element:t.getGui(),parent:n})}prependChild(t,i){const{element:n,parent:s}=this.getContainerAndElement(t,i)||{};!n||!s||s.insertAdjacentElement("afterbegin",n)}appendChild(t,i){const{element:n,parent:s}=this.getContainerAndElement(t,i)||{};!n||!s||s.appendChild(n)}isDisplayed(){return this.displayed}setVisible(t,i={}){if(t!==this.visible){this.visible=t;const{skipAriaHidden:n}=i;gD(this.eGui,t,{skipAriaHidden:n})}}setDisplayed(t,i={}){if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:n}=i;Vt(this.eGui,t,{skipAriaHidden:n});const s={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(s)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,i,n){this.eGui.addEventListener(t,i,n),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,i))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,i){this.cssClassManager.addOrRemoveCssClass(t,i)}},OS={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},FD=(()=>{const e=new Set(Object.values(OS));return e.add("eye"),e})();function ED(e,t,i){const n=pn(e,t,i);if(n){const{className:r}=n;if(typeof r=="string"&&r.indexOf("ag-icon")>-1||typeof r=="object"&&r["ag-icon"])return n}const s=document.createElement("span");return s.appendChild(n),s}function pn(e,t,i,n){let s=null;const r=i&&i.getColDef().icons;if(r&&(s=r[e]),t&&!s){const u=t.get("icons");u&&(s=u[e])}if(s){let u;if(typeof s=="function")u=s();else if(typeof s=="string")u=s;else throw new Error("icon from grid options needs to be a string or a function");if(typeof u=="string")return Mu(u);if(mg(u))return u;se("iconRenderer should return back a string or a dom object")}else{const u=document.createElement("span");let c=OS[e]??(FD.has(e)?e:void 0);return c||(se(`Did not find icon ${e}`),c=""),u.setAttribute("class",`ag-icon ag-icon-${c}`),u.setAttribute("unselectable","on"),os(u,"presentation"),u}}var bD=class extends xt{constructor(){super(...arguments),this.dragSource=null,this.eIcon=Ge,this.eLabel=Ge}postConstruct(){const e=t=>ED(t,this.gos,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(`<div class="ag-dnd-ghost ag-unselectable">
                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>
            </div>`)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t=!1){var n,s;gn(this.eIcon);let i=null;e||(e=(n=this.dragSource)!=null&&n.getDefaultIconName?(s=this.dragSource)==null?void 0:s.getDefaultIconName():"notAllowed"),i=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",t),!(i===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&i&&this.eIcon.appendChild(i)}setLabel(e){this.eLabel.textContent=Es(e)}};function NS(e,t,i){if(i===0)return!1;const n=Math.abs(e.clientX-t.clientX),s=Math.abs(e.clientY-t.clientY);return Math.max(n,s)<=i}var rr=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new aa,this.eElement=e,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),n=this.onTouchMove.bind(this),s=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",n,{passive:!0}),this.eElement.addEventListener("touchend",s,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",n,{passive:!0}),this.eElement.removeEventListener("touchend",s,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const n={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(n)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!NS(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const i={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(i),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};function ru(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var xD=`<span class="ag-sort-indicator-container">
        ${ru("Order","order")}
        ${ru("Asc","ascending-icon")}
        ${ru("Desc","descending-icon")}
        ${ru("Mixed","mixed-icon")}
        ${ru("None","none-icon")}
    </span>`,vg=class extends xt{constructor(e){super(),this.eSortOrder=Ge,this.eSortAsc=Ge,this.eSortDesc=Ge,this.eSortMixed=Ge,this.eSortNone=Ge,e||this.setTemplate(xD)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,i,n,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=n,this.eSortNone=s}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),n=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:n,columnRowGroupChanged:n}),this.onSortChanged()}addInIcon(e,t,i){if(t==null)return;const n=pn(e,this.gos,i);n&&t.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t=e==="asc";Vt(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t=e==="desc";Vt(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),i=e==null;Vt(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;Rs(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Vt(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;const e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,i=e.some(s=>this.sortController.getDisplaySortIndexForColumn(s)??!1),n=t>=0&&i;Vt(this.eSortOrder,n,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():gn(this.eSortOrder)}},DD={selector:"AG-SORT-INDICATOR",component:vg},MD=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,Ff=class extends xt{constructor(){super(...arguments),this.eFilter=Ge,this.eFilterButton=Ge,this.eSortIndicator=Ge,this.eMenu=Ge,this.eLabel=Ge,this.eText=Ge,this.eSortOrder=Ge,this.eSortAsc=Ge,this.eSortDesc=Ge,this.eSortMixed=Ge,this.eSortNone=Ge,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??MD;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[DD]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=Es(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,i){if(t==null)return;const n=pn(e,this.gos,i);n&&t.appendChild(n)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const t=new rr(this.getGui(),!0),i=this.shouldSuppressMenuHide(),n=i&&ge(this.eMenu),s=n?new rr(this.eMenu,!0):t;if(this.params.enableMenu){const r=n?"tap":"longTap",u=c=>this.params.showColumnMenuAfterMouseClick(c.touchStart);this.addManagedListeners(s,{[r]:u})}if(this.params.enableSorting){const r=u=>{var p,g;const c=u.touchStart.target;i&&((p=this.eMenu)!=null&&p.contains(c)||(g=this.eFilterButton)!=null&&g.contains(c))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:r})}if(this.params.enableFilterButton){const r=new rr(this.eFilterButton,!0);this.addManagedListeners(r,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>r.destroy())}this.addDestroyFunc(()=>t.destroy()),n&&this.addDestroyFunc(()=>s.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){el(this.eMenu),this.eMenu=void 0;return}const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){const t=this.params.column,i=this.menuService.isLegacyMenuEnabled();if(e&&!i){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new vg(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{const i=this.params.column.isMoving(),s=new Date().getTime()-this.lastMovingChanged<50;if(!(i||s)){const c=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(c)}}});const e=()=>{const t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){const i=this.funcColsService.getSourceColumnsForGroupColumn(this.params.column),s=!(i==null?void 0:i.every(r=>this.params.column.getSort()==r.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",s)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,i){if(!e)return el(t),!1;const n=this.params.column;return this.addInIcon("filter",t,n),this.addManagedListeners(n,{filterChanged:i}),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();Vt(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},TD=class extends xt{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=Ge,this.agClosed=Ge,this.agLabel=Ge}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&se("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);const e=s=>{if(co(s))return;const r=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),r,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);const t=s=>{sa(s)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();const i=this.params.columnGroup.getProvidedColumnGroup(),n=this.updateIconVisibility.bind(this);this.addManagedListeners(i,{expandedChanged:n,expandableChanged:n})}addTouchAndClickListeners(e,t){const i=new rr(e,!0);this.addManagedListeners(i,{tap:t}),this.addDestroyFunc(()=>i.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const t=this.params.columnGroup.isExpanded();Vt(this.agOpened,t),Vt(this.agClosed,!t)}else Vt(this.agOpened,!1),Vt(this.agClosed,!1)}addInIcon(e,t){const i=pn(e,this.gos,null);i&&t.appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){Vt(this.agOpened,!1),Vt(this.agClosed,!1);return}}setupLabel(){var i;const{displayName:e,columnGroup:t}=this.params;if(ge(e)){const n=Es(e,!0);this.agLabel.textContent=n}this.addOrRemoveCssClass("ag-sticky-label",!((i=t.getColGroupDef())!=null&&i.suppressStickyLabel))}},_D="↑",LD="↓",AD=class extends xt{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),n=e.formatValue(i),s=ge(n)?n:i,r=t>=0;r?this.eDelta.textContent=_D+s:this.eDelta.textContent=LD+s,this.eDelta.classList.toggle("ag-value-change-delta-up",r),this.eDelta.classList.toggle("ag-value-change-delta-down",!r)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),gn(this.eDelta)}refresh(e,t=!1){var n;const i=e.value;if(i===this.lastValue||(ge(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:ge(e.value)?this.eValue.textContent=i:gn(this.eValue),(n=this.filterManager)!=null&&n.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof i=="number"&&typeof this.lastValue=="number"){const s=i-this.lastValue;this.showDelta(e,s)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},ID=class extends xt{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){var n;let i=e.value;return ut(i)&&(i=""),i===this.lastValue||(n=this.filterManager)!=null&&n.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=i,ge(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:ge(e.value)?this.eCurrent.textContent=i:gn(this.eCurrent),!0)}},Q=class{};Q.BACKSPACE="Backspace";Q.TAB="Tab";Q.ENTER="Enter";Q.ESCAPE="Escape";Q.SPACE=" ";Q.LEFT="ArrowLeft";Q.UP="ArrowUp";Q.RIGHT="ArrowRight";Q.DOWN="ArrowDown";Q.DELETE="Delete";Q.F2="F2";Q.PAGE_UP="PageUp";Q.PAGE_DOWN="PageDown";Q.PAGE_HOME="Home";Q.PAGE_END="End";Q.A="KeyA";Q.C="KeyC";Q.D="KeyD";Q.V="KeyV";Q.X="KeyX";Q.Y="KeyY";Q.Z="KeyZ";var kD=class extends xt{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:n,disabled:s}=this.config;s!=null&&this.setDisabled(s),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){gn(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Vt(this.eLabel,!1),os(this.eLabel,"presentation")):(Vt(this.eLabel,!0),os(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(Ad(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return Du(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},GS=class extends kD{constructor(e,t,i,n){super(e,t,i),this.className=n}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),i!=null&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();i==null||i==""||Qx(e)!==null?xu(e,""):xu(e,t??"")}setAriaLabel(e){return oa(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return ns(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},$r=class extends GS{constructor(e,t,i="text",n="input"){super(e,(e==null?void 0:e.template)??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${n} data-ref="eInput" class="ag-input-field-input"></${n}>
                </div>
            </div>`,[],t),this.inputType=i,this.displayFieldTag=n,this.eLabel=Ge,this.eWrapper=Ge,this.eInput=Ge}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return Ad(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return In(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return oa(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Du(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)In(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";In(this.eInput,"autocomplete",t)}return this}},Cg=class extends $r{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const n=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:n.id,name:n.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},wg={selector:"AG-CHECKBOX",component:Cg},OD=class extends xt{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[wg]),this.eCheckbox=Ge}init(e){this.refresh(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),RS(t,"polite"),this.addManagedListeners(t,{click:i=>{if(sa(i),this.eCheckbox.isDisabled())return;const n=this.eCheckbox.getValue();this.onCheckboxChanged(n)},dblclick:i=>{sa(i)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:i=>{if(i.key===Q.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===Wt(this.gos)&&this.eCheckbox.toggle();const n=this.eCheckbox.getValue();this.onCheckboxChanged(n),i.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var c;let t,i=!0;if(e.node.group&&e.column)if(typeof e.value=="boolean")t=e.value;else{const p=e.column.getColId();p.startsWith($d)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[p]!==void 0?t=e.value??void 0:i=!1}else t=e.value??void 0;if(!i){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);const n=e.disabled!=null?e.disabled:!((c=e.column)!=null&&c.isCellEditable(e.node));this.eCheckbox.setDisabled(n);const s=this.localeService.getLocaleTextFunc(),r=cg(s,t),u=n?r:`${s("ariaToggleCellValue","Press SPACE to toggle cell value")} (${r})`;this.eCheckbox.setInputAriaLabel(u)}onCheckboxChanged(e){const{column:t,node:i,value:n}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:n});const s=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:n,oldValue:n,newValue:e,valueChanged:s}),s||this.updateCheckbox(this.params)}},ND=class extends xt{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=Ge,this.eLoadingText=Ge}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=pn("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},GD=class extends xt{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){const t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>xu(e.eParentOfValue)),xu(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");oa(this.getGui(),t)}setupLoading(e){const i=$t(this.gos).createElement("div");i.classList.add("ag-skeleton-effect");const n=e.node.rowIndex;if(n!=null){const u=75+25*(n%2===0?Math.sin(n):Math.cos(n));i.style.width=`${u}%`}this.getGui().appendChild(i);const r=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");oa(this.getGui(),r)}refresh(e){return!1}destroy(){super.destroy()}},HS=class extends xt{constructor(){super()}destroy(){super.destroy()}},HD=class extends HS{init(){var t;const e=uo((t=this.gos.get("overlayLoadingTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const i=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=i("loadingOoo","Loading...")})}}},BD=class extends HS{init(){var t;const e=uo((t=this.gos.get("overlayNoRowsTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const i=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=i("noRowsToShow","No Rows To Show")})}}},ha=class extends xt{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},VD=class extends ha{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=Es(t,!0)}};function BS(e){const{inputValue:t,allSuggestions:i,hideIrrelevant:n,filterByPercentageOfBestMatch:s,addSequentialWeight:r}=e;let u=i.map((g,v)=>({value:g,relevance:zD(t.toLowerCase(),g.toLocaleLowerCase(),r),idx:v}));if(u.sort((g,v)=>v.relevance-g.relevance),n&&(u=u.filter(g=>g.relevance!==0)),u.length>0&&s&&s>0){const v=u[0].relevance*s;u=u.filter(S=>v-S.relevance<0)}const c=[],p=[];for(const g of u)c.push(g.value),p.push(g.idx);return{values:c,indices:p}}function WD(e){const t=[],i=e.length;for(let n=1;n<=i;n++)for(let s=0;s<=i-n;s++){const r=s+n-1;t.push(e.slice(s,r+1))}return t}function zD(e,t,i=!1){const n=e.replace(/\s/g,""),s=t.replace(/\s/g,""),r=n.length,u=s.length,c=new Array(r+1).fill(null).map(()=>new Array(u+1).fill(0));for(let S=0;S<=r;S+=1)c[S][0]=S;for(let S=0;S<=u;S+=1)c[0][S]=S;for(let S=1;S<=r;S++)for(let y=1;y<=u;y++)n[S-1]===s[y-1]?c[S][y]=c[S-1][y-1]:c[S][y]=1+Math.min(c[S][y-1],Math.min(c[S-1][y],c[S-1][y-1]));const p=c[r][u];let v=Math.max(r,u)-p;if(i){const S=WD(n);for(let y=0;y<S.length;y++){const E=S[y];s.indexOf(E)!==-1&&(v+=1,v*=E.length)}}return v}var UD=class extends ie{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:bD,agColumnHeader:Ff,agColumnGroupHeader:TD,agSortIndicator:vg,agAnimateShowChangeCellRenderer:AD,agAnimateSlideCellRenderer:ID,agLoadingCellRenderer:ND,agSkeletonCellRenderer:GD,agCheckboxCellRenderer:OD,agLoadingOverlay:HD,agNoRowsOverlay:BD,agTooltipComponent:VD},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){const e=this.gos.get("components");e!=null&&ts(e,(t,i)=>this.registerJsComponent(t,i))}registerDefaultComponent(e,t,i){this.agGridDefaults[e]=t,i&&(this.agGridDefaultParams[e]=i)}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const i=(c,p,g)=>({componentFromFramework:p,component:c,params:g}),n=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(n!=null)return i(n,!0);const s=this.jsComps[t];if(s){const c=this.getFrameworkOverrides().isFrameworkComponent(s);return i(s,c)}const r=this.agGridDefaults[t];if(r)return i(r,!1,this.agGridDefaultParams[t]);const u=this.enterpriseAgDefaultCompsModule[t];return u?this.gos.assertModuleRegistered(u,`AG Grid '${e}' component: ${t}`):ig(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){const i=[...Object.keys(this.agGridDefaults).filter(s=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(s)),...Object.keys(this.jsComps)],n=BS({inputValue:t,allSuggestions:i,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;se(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),n.length>0&&se(`         Did you mean: [${n.slice(0,3)}]?`),se(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},jt=class pu{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(i=>this.onDone(i),i=>this.onReject(i))}static all(t){return t.length?new pu(i=>{let n=t.length;const s=new Array(n);t.forEach((r,u)=>{r.then(c=>{s[u]=c,n--,n===0&&i(s)})})}):pu.resolve()}static resolve(t=null){return new pu(i=>i(t))}then(t){return new pu(i=>{this.status===1?i(t(this.resolution)):this.waiters.push(n=>i(t(n)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(i=>i(t))}onReject(t){}},jD={propertyName:"dateComponent",cellRenderer:!1},$D={propertyName:"dragAndDropImageComponent",cellRenderer:!1},KD={propertyName:"headerComponent",cellRenderer:!1},ZD={propertyName:"headerGroupComponent",cellRenderer:!1},bC={propertyName:"cellRenderer",cellRenderer:!0},qD={propertyName:"cellRenderer",cellRenderer:!1},YD={propertyName:"loadingCellRenderer",cellRenderer:!0},QD={propertyName:"cellEditor",cellRenderer:!1},xC={propertyName:"innerRenderer",cellRenderer:!0},XD={propertyName:"loadingOverlayComponent",cellRenderer:!1},JD={propertyName:"noRowsOverlayComponent",cellRenderer:!1},eM={propertyName:"tooltipComponent",cellRenderer:!1},Sg={propertyName:"filter",cellRenderer:!1},tM={propertyName:"floatingFilterComponent",cellRenderer:!1},iM={propertyName:"toolPanel",cellRenderer:!1},nM={propertyName:"statusPanel",cellRenderer:!1},sM={propertyName:"fullWidthCellRenderer",cellRenderer:!0},oM={propertyName:"loadingCellRenderer",cellRenderer:!0},rM={propertyName:"groupRowRenderer",cellRenderer:!0},lM={propertyName:"detailCellRenderer",cellRenderer:!0},aM={propertyName:"menuItem",cellRenderer:!1},VS=class WS extends ie{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getDragAndDropImageCompDetails(t){return this.getCompDetails(this.gridOptions,$D,"agDragAndDropImage",t,!0)}getHeaderCompDetails(t,i){return this.getCompDetails(t,KD,"agColumnHeader",i)}getHeaderGroupCompDetails(t){const i=t.columnGroup.getColGroupDef();return this.getCompDetails(i,ZD,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,sM,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,oM,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,rM,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,lM,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,i){return this.getCompDetails(t,xC,null,i)}getFullWidthGroupRowInnerCellRenderer(t,i){return this.getCompDetails(t,xC,null,i)}getCellRendererDetails(t,i){return this.getCompDetails(t,bC,null,i)}getEditorRendererDetails(t,i){return this.getCompDetails(t,qD,null,i)}getLoadingCellRendererDetails(t,i){return this.getCompDetails(t,YD,"agSkeletonCellRenderer",i,!0)}getCellEditorDetails(t,i){return this.getCompDetails(t,QD,"agCellEditor",i,!0)}getFilterDetails(t,i,n){return this.getCompDetails(t,Sg,n,i,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,jD,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,XD,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,JD,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,eM,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,i){return this.getCompDetails(t,bC,null,i)}getFloatingFilterCompDetails(t,i,n){return this.getCompDetails(t,tM,n,i)}getToolPanelCompDetails(t,i){return this.getCompDetails(t,iM,null,i,!0)}getStatusPanelCompDetails(t,i){return this.getCompDetails(t,nM,null,i,!0)}getMenuItemCompDetails(t,i){return this.getCompDetails(t,aM,"agMenuItem",i,!0)}getCompDetails(t,i,n,s,r=!1){const{propertyName:u,cellRenderer:c}=i;let{compName:p,jsComp:g,fwComp:v,paramsFromSelector:S,popupFromSelector:y,popupPositionFromSelector:E}=WS.getCompKeys(this.frameworkOverrides,t,i,s),b;const M=I=>{const H=this.userComponentRegistry.retrieve(u,I);H&&(g=H.componentFromFramework?void 0:H.component,v=H.componentFromFramework?H.component:void 0,b=H.params)};if(p!=null&&M(p),g==null&&v==null&&n!=null&&M(n),g&&c&&!this.agComponentUtils.doesImplementIComponent(g)&&(g=this.agComponentUtils.adaptFunction(u,g)),!g&&!v){r&&Ct(`Could not find component ${p}, did you forget to configure this component?`);return}const x=this.mergeParamsWithApplicationProvidedParams(t,i,s,S,b),_=g==null,k=g||v;return{componentFromFramework:_,componentClass:k,params:x,type:i,popupFromSelector:y,popupPositionFromSelector:E,newAgStackInstance:()=>this.newAgStackInstance(k,_,x,i)}}static getCompKeys(t,i,n,s){const{propertyName:r}=n;let u,c,p,g,v,S;if(i){const y=i,E=y[r+"Selector"],b=E?E(s):null,M=x=>{typeof x=="string"?u=x:x!=null&&x!==!0&&(t.isFrameworkComponent(x)?p=x:c=x)};b?(M(b.component),g=b.params,v=b.popup,S=b.popupPosition):M(y[r])}return{compName:u,jsComp:c,fwComp:p,paramsFromSelector:g,popupFromSelector:v,popupPositionFromSelector:S}}newAgStackInstance(t,i,n,s){const r=s.propertyName,u=!i;let c;if(u)c=new t;else{const g=this.componentMetadataProvider.retrieve(r);c=this.frameworkComponentWrapper.wrap(t,g.mandatoryMethodList,g.optionalMethodList,s)}const p=this.initComponent(c,n);return p==null?jt.resolve(c):p.then(()=>c)}mergeParamsWithApplicationProvidedParams(t,i,n,s=null,r){const u=this.gos.getGridCommonParams();ki(u,n),r&&ki(u,r);const c=t,p=c&&c[i.propertyName+"Params"];if(typeof p=="function"){const g=p(n);ki(u,g)}else typeof p=="object"&&ki(u,p);return ki(u,s),u}initComponent(t,i){if(this.createBean(t),t.init!=null)return t.init(i)}};function vu(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var Kd=class vt{static register(t){vt.__register(t,!0,void 0)}static registerModules(t){vt.__registerModules(t,!0,void 0)}static __register(t,i,n){vt.runVersionChecks(t),n!==void 0?(vt.areGridScopedModules=!0,vt.gridModulesMap[n]===void 0&&(vt.gridModulesMap[n]={}),vt.gridModulesMap[n][t.moduleName]=t):vt.globalModulesMap[t.moduleName]=t,vt.setModuleBased(i)}static __unRegisterGridModules(t){delete vt.gridModulesMap[t]}static __registerModules(t,i,n){vt.setModuleBased(i),t&&t.forEach(s=>vt.__register(s,i,n))}static isValidModuleVersion(t){const[i,n]=t.version.split(".")||[],[s,r]=vt.currentModuleVersion.split(".")||[];return i===s&&n===r}static runVersionChecks(t){vt.currentModuleVersion||(vt.currentModuleVersion=t.version);const i=n=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${n} Please update all modules to the same version.`;if(t.version?vt.isValidModuleVersion(t)||Ct(i(`'${t.moduleName}' is version ${t.version} but the other modules are version ${vt.currentModuleVersion}.`)):Ct(i(`'${t.moduleName}' is incompatible.`)),t.validate){const n=t.validate();n.isValid||Ct(`${n.message}`)}}static setModuleBased(t){vt.moduleBased===void 0?vt.moduleBased=t:vt.moduleBased!==t&&(Ct("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),Ct("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){vt.isBundled=!0}static __assertRegistered(t,i,n){var r;if(this.__isRegistered(t,n))return!0;let s;if(vt.isBundled)s=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(vt.moduleBased||vt.moduleBased===void 0){const u=(r=Object.entries(Jw).find(([c,p])=>p===t))==null?void 0:r[0];s=`AG Grid: unable to use ${i} as the ${u} is not registered${vt.areGridScopedModules?` for gridId: ${n}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${u} } from '${t}';
    
    ModuleRegistry.registerModules([ ${u} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else s=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return Ct(s),!1}static __isRegistered(t,i){var n;return!!vt.globalModulesMap[t]||!!((n=vt.gridModulesMap[i])!=null&&n[t])}static __getRegisteredModules(t){return[...cd(vt.globalModulesMap),...cd(vt.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return cd(vt.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!vt.moduleBased}};Kd.globalModulesMap={};Kd.gridModulesMap={};Kd.areGridScopedModules=!1;var Ps=Kd,uM=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){var t;Object.entries(e.providedBeanInstances).forEach(([i,n])=>{this.beans[i]=n}),e.beanClasses.forEach(i=>{const n=new i;n.beanName?this.beans[n.beanName]=n:console.error(`Bean ${i.name} is missing beanName`),this.createdBeans.push(n)}),(t=e.derivedBeans)==null||t.forEach(i=>{const{beanName:n,bean:s}=i(this);this.beans[n]=s,this.createdBeans.push(s)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(i=>{var n,s;(n=i.preWireBeans)==null||n.call(i,this.beans),(s=i.wireBeans)==null||s.call(i,this.beans)}),e.forEach(i=>{var n;return(n=i.preConstruct)==null?void 0:n.call(i)}),t&&e.forEach(t),e.forEach(i=>{var n;return(n=i.postConstruct)==null?void 0:n.call(i)})}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){var t;(t=e==null?void 0:e.destroy)==null||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},cM=class extends uM{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),Ps.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}},zS=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(zS||{}),dM=class extends ie{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e,t=!1){const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){const t=this.dragSourceAndParamsList.find(i=>i.dragSource===e);t&&(this.dragService.removeDragSource(t.params),Ni(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){var i,n;this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),(n=(i=this.dragSource).onDragStarted)==null||n.call(i),this.createDragAndDropImageComponent()}onDragStop(e){var t,i,n;if((i=(t=this.dragSource)==null?void 0:t.onDragStopped)==null||i.call(t),(n=this.lastDropTarget)!=null&&n.onDragStop){const s=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(s)}this.clearDragAndDropProperties()}onDragCancel(){var e,t,i;(t=(e=this.dragSource)==null?void 0:e.onDragCancelled)==null||t.call(e),(i=this.lastDropTarget)!=null&&i.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){var u,c,p,g;const i=this.getHorizontalDirection(e),n=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const s=this.dropTargets.filter(v=>this.isMouseOnDropTarget(e,v)),r=this.findCurrentDropTarget(e,s);if(r!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,i,n,t),this.lastDropTarget!==null&&r===null&&((c=(u=this.dragSource)==null?void 0:u.onGridExit)==null||c.call(u,this.dragItem)),this.lastDropTarget===null&&r!==null&&((g=(p=this.dragSource)==null?void 0:p.onGridEnter)==null||g.call(p,this.dragItem)),this.enterDragTargetIfExists(r,e,i,n,t),r&&this.dragAndDropImageComp){const{comp:v,promise:S}=this.dragAndDropImageComp;v?v.setIcon(r.getIconName?r.getIconName():null):S.then(y=>{y&&y.setIcon(r.getIconName?r.getIconName():null)})}this.lastDropTarget=r}else if(r&&r.onDragging){const v=this.createDropTargetEvent(r,e,i,n,t);r.onDragging(v)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(const i of t){const{width:n,height:s,left:r,right:u,top:c,bottom:p}=i.getBoundingClientRect();if(n===0||s===0)return!1;const g=e.clientX>=r&&e.clientX<u,v=e.clientY>=c&&e.clientY<p;if(!g||!v)return!1}return!0}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let n=!1;for(const u of i)if(this.allContainersIntersect(e,u)){n=!0;break}const{eElement:s,type:r}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(s)?!1:n&&t.isInterestedIn(r,s)}findCurrentDropTarget(e,t){const i=t.length;if(i===0)return null;if(i===1)return t[0];const s=Fu(this.gos).elementsFromPoint(e.clientX,e.clientY);for(const r of s)for(const u of t)if(yx(this.getAllContainersFromDropTarget(u)).indexOf(r)!==-1)return u;return null}enterDragTargetIfExists(e,t,i,n,s){if(e&&e.onDragEnter){const r=this.createDropTargetEvent(e,t,i,n,s);e.onDragEnter(r)}}leaveLastTargetIfExists(e,t,i,n){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){const r=this.createDropTargetEvent(this.lastDropTarget,e,t,i,n);this.lastDropTarget.onDragLeave(r)}const s=this.getDragAndDropImageComponent();s&&s.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){const i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:n}=e;return i.contains(n)}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?0:1}createDropTargetEvent(e,t,i,n,s){const r=e.getContainer(),u=r.getBoundingClientRect(),{dragItem:c,dragSource:p}=this,g=t.clientX-u.left,v=t.clientY-u.top;return this.gos.addGridCommonParams({event:t,x:g,y:v,vDirection:n,hDirection:i,dragSource:p,fromNudge:s,dragItem:c,dropZoneTarget:r})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();if(!t)return;const i=t.getGui(),s=i.getBoundingClientRect().height,r=dD()-2,u=hD()-2;if(!i.offsetParent)return;const p=_S(i.offsetParent),{clientY:g,clientX:v}=e;let S=g-p.top-s/2,y=v-p.left-10;const E=$t(this.gos),b=E.defaultView||window,M=b.pageYOffset||E.documentElement.scrollTop,x=b.pageXOffset||E.documentElement.scrollLeft;r>0&&y+i.clientWidth>r+x&&(y=r+x-i.clientWidth),y<0&&(y=0),u>0&&S+i.clientHeight>u+M&&(S=u+M-i.clientHeight),S<0&&(S=0),i.style.left=`${y}px`,i.style.top=`${S}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){const{comp:e}=this.dragAndDropImageComp;if(e){const t=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(t),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e}=this;if(!e)return;const i=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:i},i.then(n=>{!n||!this.isAlive()||(this.processDragAndDropImageComponent(n),this.dragAndDropImageComp.comp=n)})}processDragAndDropImageComponent(e){const{dragSource:t,mouseEventService:i,environment:n}=this;if(!t)return;const s=e.getGui();s.style.setProperty("position","absolute"),s.style.setProperty("z-index","9999"),i.stampTopLevelGridCompWithGridInstance(s),n.applyThemeClasses(s),e.setIcon(null);let{dragItemName:r}=t;ng(r)&&(r=r()),e.setLabel(r||""),s.style.top="20px",s.style.left="20px";const u=$t(this.gos);let c=null,p=null;try{c=u.fullscreenElement}catch{}finally{c||(c=Fu(this.gos));const g=c.querySelector("body");g?p=g:c instanceof ShadowRoot?p=c:c instanceof Document?p=c==null?void 0:c.documentElement:p=c}this.dragAndDropImageParent=p,p?p.appendChild(s):se("Could not find document body, it is needed for drag and drop.")}},hM=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const n=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<n.left+s,this.tickRight=e.clientX>n.right-s,this.tickUp=e.clientY<n.top+s&&!i,this.tickDown=e.clientY>n.bottom-s&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},pM=class extends ie{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){At(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,e=>{const t=e.gridBodyCtrl;this.autoScrollService=new hM({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>t.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){var n;return!!(this.funcColsService.getRowGroupColumns().length||((n=this.filterManager)==null?void 0:n.isAnyFilterPresent())||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const n=[...this.selectionService.getSelectedNodes()].sort((s,r)=>s.rowIndex==null||r.rowIndex==null?0:this.getRowIndexNumber(s)-this.getRowIndexNumber(r));if(n.indexOf(t)!==-1)return n}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const i=this.isFromThisGrid(e),n=this.gos.get("rowDragManaged"),s=e.dragItem.rowNodes;n&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(s[0],t):this.moveRows(s,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(at(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&t.highlighted===1,n=this.mouseEventService.getNormalisedPosition(e).y,s=e.dragItem.rowNodes;let r=i?1:0;if(this.isFromThisGrid(e))s.forEach(u=>{u.rowTop<n&&(r-=1)}),this.moveRows(s,n,r);else{const u=ua(this.gos);let c=this.clientSideRowModel.getRowIndexAtPixel(n)+1;this.clientSideRowModel.getHighlightPosition(n)===0&&c--,this.clientSideRowModel.updateRowData({add:s.filter(p=>!this.clientSideRowModel.getRowNode((u==null?void 0:u({data:p.data,level:0,rowPinned:p.rowPinned}))??p.data.id)).map(p=>p.data),addIndex:c})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){var s;this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),(s=this.rangeService)==null||s.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){se("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){se("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=n=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",n))}),e.onDragLeave&&(t.onDragLeave=n=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",n))}),e.onDragging&&(t.onDragging=n=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",n))}),e.onDragStop&&(t.onDragStop=n=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",n))}),e.onDragCancel&&(t.onDragCancel=n=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",n))}));const i={isInterestedIn:n=>n===2,getIconName:()=>"move",external:!0,...t};this.dragAndDropService.addDropTarget(i),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(i))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),n=this.onDragLeave.bind(this),s=this.onDragging.bind(this),r=this.onDragStop.bind(this),u=this.onDragCancel.bind(this);let c;return e?c={getContainer:t,onDragEnter:e.onDragEnter?p=>{i(p),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",p))}:i,onDragLeave:e.onDragLeave?p=>{n(p),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",p))}:n,onDragging:e.onDragging?p=>{s(p),e.onDragging(this.draggingToRowDragEvent("rowDragMove",p))}:s,onDragStop:e.onDragStop?p=>{r(p),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",p))}:r,onDragCancel:e.onDragCancel?p=>{u(p),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",p))}:u,fromGrid:!0}:c={getContainer:t,onDragEnter:i,onDragLeave:n,onDragging:s,onDragStop:r,onDragCancel:u,fromGrid:!0},c}draggingToRowDragEvent(e,t){const i=this.mouseEventService.getNormalisedPosition(t).y,n=i>this.pageBoundsService.getCurrentPageHeight();let s=-1,r;n||(s=this.rowModel.getRowIndexAtPixel(i),r=this.rowModel.getRow(s));let u;switch(t.vDirection){case 1:u="down";break;case 0:u="up";break;default:u=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:s,overNode:r,y:i,vDirection:u})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},fM=class extends ie{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const n=e.touchStartListener;t.removeEventListener("touchstart",n,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find(i=>i.dragSource===e);t&&(this.removeListener(t),Ni(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:n,stopPropagationForTouch:s}=e;i.addEventListener("mousedown",t);let r=null;const u=this.gos.get("suppressTouch");n&&!u&&(r=c=>{pg(c.target)||(s&&c.stopPropagation(),this.onTouchStart(e,c))},i.addEventListener("touchstart",r,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:r,touchEnabled:!!n})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const n=p=>this.onTouchMove(p,e.eElement),s=p=>this.onTouchUp(p,e.eElement),r=p=>{p.cancelable&&p.preventDefault()},u=t.target,c=[{target:Fu(this.gos),type:"touchmove",listener:r,options:{passive:!1}},{target:u,type:"touchmove",listener:n,options:{passive:!0}},{target:u,type:"touchend",listener:s,options:{passive:!0}},{target:u,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(c),e.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const n=g=>this.onMouseMove(g,e.eElement),s=g=>this.onMouseUp(g,e.eElement),r=g=>g.preventDefault(),u=g=>{g.key===Q.ESCAPE&&this.cancelDrag(e.eElement)},c=Fu(this.gos),p=[{target:c,type:"mousemove",listener:n},{target:c,type:"mouseup",listener:s},{target:c,type:"contextmenu",listener:r},{target:c,type:"keydown",listener:u}];this.addTemporaryEvents(p),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:i,type:n,listener:s,options:r}=t;i.addEventListener(n,s,r)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:i,type:n,listener:s,options:r}=t;i.removeEventListener(n,s,r)})})}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams,n=ge(i)?i:4;return NS(e,t,n)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){var n;if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}(n=this.currentDragParams)==null||n.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){var i;bs()&&((i=$t(this.gos).getSelection())==null||i.removeAllRanges()),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gos.get("enableCellTextSelection"),i=e.type==="mousemove";return t&&i&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,i=t==null?void 0:t.tagName.toLocaleLowerCase();return!!(i!=null&&i.match("^a$|textarea|input|select|button"))}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){var t,i;this.eventService.dispatchEvent({type:"dragCancelled",target:e}),(i=(t=this.currentDragParams)==null?void 0:t.onDragCancel)==null||i.call(t),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(e=>e()),this.dragEndFunctions.length=0}},Ef=class extends xt{constructor(e,t,i,n,s,r){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=n,this.dragStartPixels=s,this.suppressVisibilityChange=r,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(pn("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new mM(this,this.beans,this.rowNode,this.column):new gM(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&se("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:n=>{n==null||n.preventDefault()}})[0]);const i=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{var u;const n=this.getDragItem(),s=((u=n.rowNodes)==null?void 0:u.length)||1,r=this.getRowDragText(this.column);return r?r(n,s):s===1?this.cellValueFn():`${s} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},US=class extends ie{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let i=!0,n=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),n=ng(this.column.getColDef().rowDrag)),n?(this.parent.setDisplayed(!0,t),this.parent.setVisible(i,t)):(this.parent.setDisplayed(i,t),this.parent.setVisible(!0,t))}}},gM=class extends US{constructor(e,t,i,n){super(e,i,n),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},mM=class extends US{constructor(e,t,i,n){super(e,i,n),this.beans=t}postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=t&&t.shouldPreventRowMove(),n=this.gos.get("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones(),r=i&&!s||n;this.setDisplayedOrVisible(r)}},vM=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),Bu=class ir{constructor(t){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=ir.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,i){var r;const n=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const s=this.createDataChangedEvent(t,n,i);(r=this.localEventService)==null||r.dispatchEvent(s)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,i,n){return{type:"dataChanged",node:this,oldData:i,newData:t,update:n}}getRowIndexString(){return this.rowIndex==null?(Ct("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?ir.ID_PREFIX_TOP_PINNED+this.rowIndex:this.rowPinned==="bottom"?ir.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new ir(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,i){var u;const n=ge(this.id)?this.createDaemonNode():null,s=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(i),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,n);const r=this.createDataChangedEvent(t,s,!1);(u=this.localEventService)==null||u.dispatchEvent(r)}checkRowSelectable(){const t=sg(this.beans.gos);this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,i){if(this.selectable!==t){if(this.selectable=t,this.dispatchRowEvent("selectableChanged"),i)return;if(Jr(this.beans.gos)){const s=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:s??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){var n;const i=ua(this.beans.gos);if(i)if(this.data){const s=((n=this.parent)==null?void 0:n.getRoute())??[];this.id=i({data:this.data,parentKeys:s.length>0?s:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(ir.ID_PREFIX_ROW_GROUP)&&Ct(`Row IDs cannot start with ${ir.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(t){this.hovered=t}isHovered(){return this.hovered}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.dispatchRowEvent("masterChanged"))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(t,i=!1){this.rowHeight=t,this.rowHeightEstimated=i,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(t,i){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[i.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Oi(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){var c;let t=!1,i=!0,n=0;const s=this.__autoHeights;if(s==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(p=>{let g=s[p.getId()];if(g==null)if(this.beans.columnModel.isColSpanActive()){let v=[];switch(p.getPinned()){case"left":v=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":v=this.beans.visibleColsService.getRightColsForRow(this);break;case null:v=this.beans.columnViewportService.getColsWithinViewport(this);break}if(v.includes(p)){t=!0;return}g=-1}else{t=!0;return}else i=!1;g>n&&(n=g)}),t)||((i||n<10)&&(n=ar(this.beans.gos,this).height),n==this.rowHeight))return;this.setRowHeight(n);const u=this.beans.rowModel;(c=u.onRowHeightChangedDebounced)==null||c.call(u)}setExpanded(t,i,n){if(this.expanded===t)return;this.expanded=t,this.dispatchRowEvent("expandedChanged");const s={...this.createGlobalRowEvent("rowGroupOpened"),expanded:t,event:i||null};this.beans.rowNodeEventThrottle.dispatchExpanded(s,n),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(t,i,n){const r=typeof t!="string"?t:this.beans.columnModel.getCol(t)??this.beans.columnModel.getColDefCol(t),u=this.beans.valueService.getValueForDisplay(r,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:r,colDef:r.getColDef(),data:this.data,node:this,oldValue:u,newValue:i,value:i,source:n}),!1;const c=this.beans.valueService.setValue(this,r,i,n);return this.dispatchCellChangedEvent(r,i,u),this.checkRowSelectable(),c}setGroupValue(t,i){const n=this.beans.columnModel.getCol(t);ut(this.groupData)&&(this.groupData={});const s=n.getColId(),r=this.groupData[s];r!==i&&(this.groupData[s]=i,this.dispatchCellChangedEvent(n,i,r))}setAggData(t){const i=this.aggData;if(this.aggData=t,this.localEventService){const n=s=>{const r=this.aggData?this.aggData[s]:void 0,u=i?i[s]:void 0;if(r===u)return;const c=this.beans.columnModel.getCol(s);c&&this.dispatchCellChangedEvent(c,r,u)};for(const s in i)n(s);for(const s in t)(!i||!(s in i))&&n(s)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(Ts(this.beans.gos)){const n=this.beans.gos.get("treeData"),s=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(n?!!s&&s(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(t,i,n){var r;const s={type:"cellChanged",node:this,column:t,newValue:i,oldValue:n};(r=this.localEventService)==null||r.dispatchEvent(s)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(i=>i.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){var n;let t=!1,i=!1;if(!((n=this.childrenAfterGroup)!=null&&n.length))return this.selectable?this.selected:null;for(let s=0;s<this.childrenAfterGroup.length;s++){const r=this.childrenAfterGroup[s];let u=r.isSelected();if(!r.selectable){const c=r.calculateSelectedFromChildren();if(c===null)continue;u=c}switch(u){case!0:t=!0;break;case!1:i=!0;break;default:return}}if(!(t&&i))return t?!0:i?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}dispatchRowEvent(t){var i;(i=this.localEventService)==null||i.dispatchEvent({type:t,node:this})}selectThisNode(t,i,n="api"){const s=!this.selectable&&t,r=this.selected===t;if(s||r)return!1;this.selected=t,this.dispatchRowEvent("rowSelected");const u=this.sibling;return u&&u.footer&&u.localEventService&&u.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent({...this.createGlobalRowEvent("rowSelected"),event:i||null,source:n}),!0}setSelected(t,i=!1,n="api"){if(typeof n=="boolean"){se("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:i,rangeSelect:!1,source:n})}setSelectedParams(t){return this.rowPinned?(se("cannot select pinned rows"),0):this.id===void 0?(se("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected({...t,nodes:[this.footer?this.sibling:this]})}isRowPinned(){return!!this.rowPinned}addEventListener(t,i){var s;this.localEventService||(this.localEventService=new aa),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new lg(this.beans.frameworkOverrides));const n=((s=this.frameworkEventListenerService)==null?void 0:s.wrap(i))??i;this.localEventService.addEventListener(t,n)}removeEventListener(t,i){var s;if(!this.localEventService)return;const n=((s=this.frameworkEventListenerService)==null?void 0:s.unwrap(i))??i;this.localEventService.removeEventListener(t,n),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(se("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const t=[];let i=this;for(;i&&i.key!=null;)t.push(i.key),i=i.parent;return t.reverse()}createFooter(){if(this.sibling)return;const t=new ir(this.beans);Object.keys(this).forEach(i=>{vM.has(i)||(t[i]=this[i])}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.dispatchRowEvent("firstChildChanged"))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.dispatchRowEvent("draggingChanged"))}setHighlighted(t){this.highlighted!==t&&(this.highlighted=t,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.dispatchRowEvent("uiLevelChanged"))}};Bu.ID_PREFIX_ROW_GROUP="row-group-";Bu.ID_PREFIX_TOP_PINNED="t-";Bu.ID_PREFIX_BOTTOM_PINNED="b-";Bu.OBJECT_ID_SEQUENCE=0;var ho=Bu,CM=class extends ie{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvancedFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",i=>this.setAdvancedFilterModel(i.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){var i;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}(i=this.columnFilterService)==null||i.setFilterModel(e,t)}getFilterModel(){var e;return((e=this.columnFilterService)==null?void 0:e.getFilterModel())??{}}isColumnFilterPresent(){var e;return!!((e=this.columnFilterService)!=null&&e.isColumnFilterPresent())}isAggregateFilterPresent(){var e;return!!((e=this.columnFilterService)!=null&&e.isAggregateFilterPresent())}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var t,i;e?(t=this.columnFilterService)!=null&&t.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):(i=this.advancedFilterService)!=null&&i.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return!!((e=this.advancedFilterService)!=null&&e.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){var e;(e=this.quickFilterService)==null||e.resetQuickFilterCache()}refreshFiltersForAggregations(){gf(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:i,columns:n=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):jt.resolve()).then(()=>{var r;const s={source:t,type:"filterChanged",columns:n};i&&ki(s,i),this.eventService.dispatchEvent(s),(r=this.columnFilterService)==null||r.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var e;return!!((e=this.columnFilterService)!=null&&e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!!((e=this.quickFilterService)!=null&&e.isQuickFilterPresent())}updateAggFiltering(){this.aggFiltering=!!gf(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){var t;return!!((t=this.columnFilterService)!=null&&t.isFilterActive(e))}getOrCreateFilterWrapper(e){var t;return((t=this.columnFilterService)==null?void 0:t.getOrCreateFilterWrapper(e))??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){var t;return this.isAdvancedFilterEnabled()?!1:!!((t=this.columnFilterService)!=null&&t.isFilterAllowed(e))}getFloatingFilterCompDetails(e,t){var i;return(i=this.columnFilterService)==null?void 0:i.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){var t;return(t=this.columnFilterService)==null?void 0:t.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){var i;(i=this.columnFilterService)==null||i.destroyFilter(e,t)}areFilterCompsDifferent(e,t){var i;return!!((i=this.columnFilterService)!=null&&i.areFilterCompsDifferent(e,t))}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){var t;if(this.isAdvancedFilterEnabled()){if((t=this.dataTypeService)!=null&&t.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return this.isAdvancedFilterEnabled()?!1:!!((e=this.columnFilterService)!=null&&e.hasFloatingFilters())}getFilterInstance(e,t){var i;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return(i=this.columnFilterService)==null?void 0:i.getFilterInstance(e,t)}getColumnFilterInstance(e){var t;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):((t=this.columnFilterService)==null?void 0:t.getColumnFilterInstance(e))??Promise.resolve(void 0)}warnAdvancedFilters(){se("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){var t;(t=this.advancedFilterService)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){var t;return(t=this.columnFilterService)==null?void 0:t.getColumnFilterModel(e)}setColumnFilterModel(e,t){var i;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):((i=this.columnFilterService)==null?void 0:i.setColumnFilterModel(e,t))??Promise.resolve()}setColDefPropertiesForDataType(e,t,i){var n;(n=this.columnFilterService)==null||n.setColDefPropertiesForDataType(e,t,i)}},wM=class extends xt{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){var e;return((e=this.filterWrapper)==null?void 0:e.filterPromise)??null}afterInit(){var e,t;return((t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null?void 0:t.then(()=>{}))??jt.resolve()}afterGuiAttached(e){var t,i;(i=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||i.then(n=>{var s;(s=n==null?void 0:n.afterGuiAttached)==null||s.call(n,e)})}afterGuiDetached(){var e,t;(t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null||t.then(i=>{var n;(n=i==null?void 0:i.afterGuiDetached)==null||n.call(i)})}createFilter(e){var n,s;const{column:t,source:i}=this;this.filterWrapper=((n=this.filterManager)==null?void 0:n.getOrCreateFilterWrapper(t))??null,(s=this.filterWrapper)!=null&&s.filterPromise&&this.filterWrapper.filterPromise.then(r=>{const u=r.getGui();ge(u)||se(`getGui method from filter returned ${u}; it should be a DOM element.`),this.appendChild(u),e&&this.eventService.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()})})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(gn(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},jS="ag-resizer-wrapper",Jo=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,SM=`<div class="${jS}">
        ${Jo("eTopLeft","topLeft")}
        ${Jo("eTop","top")}
        ${Jo("eTopRight","topRight")}
        ${Jo("eRight","right")}
        ${Jo("eBottomRight","bottomRight")}
        ${Jo("eBottom","bottom")}
        ${Jo("eBottomLeft","bottomLeft")}
        ${Jo("eLeft","left")}
    </div>`,yM=class extends ie{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,n=e/2-this.getHeight()/2;this.offsetElement(i,n)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:n,minHeight:s,height:r,x:u,y:c}=this.config;this.offsetParent||this.setOffsetParent();let p=0,g=0;const v=xs(this.element);if(v){const S=this.findBoundaryElement(),y=window.getComputedStyle(S);if(y.minWidth!=null){const E=S.offsetWidth-this.element.offsetWidth;g=parseInt(y.minWidth,10)-E}if(y.minHeight!=null){const E=S.offsetHeight-this.element.offsetHeight;p=parseInt(y.minHeight,10)-E}}if(this.minHeight=s||p,this.minWidth=i||g,n&&this.setWidth(n),r&&this.setHeight(r),(!n||!r)&&this.refreshSize(),e)this.center();else if(u||c)this.offsetElement(u,c);else if(v&&t){let S=this.boundaryEl,y=!0;if(S||(S=this.findBoundaryElement(),y=!1),S){const E=parseFloat(S.style.top),b=parseFloat(S.style.left);y?this.offsetElement(isNaN(b)?0:b,isNaN(E)?0:E):this.setPosition(b,E)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const n=!!e[t],s=this.getResizerElement(t),r={dragStartPixels:0,eElement:s,onDragStart:u=>this.onResizeStart(u,t),onDragging:this.onResize.bind(this),onDragStop:u=>this.onResizeEnd(u,t)};(n||!this.isAlive()&&!n)&&(n?(this.dragService.addDragSource(r),this.resizeListeners.push(r),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=n)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let n=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)mu(i,e),e=TS(i),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(n?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?mu(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const n=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),r=e?this.position.y:n.top,u=e?0:s.top;let c=0;if(t){const g=this.element.parentElement;if(g){const{bottom:v}=g.getBoundingClientRect();c=v-n.bottom}}return i+u-r-c}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let n=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)ns(t,e),e=Md(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:s}=this.offsetParent,r=i?this.position.x:this.element.getBoundingClientRect().left;s&&e+r>s&&(e=s-r)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?ns(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:i}=this.config,n=i?this.boundaryEl:this.element;n&&(this.popupService.positionPopup({ePopup:n,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(n.style.left),parseFloat(n.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:n,anywhereWithin:s,topBuffer:r}=e,u=t.clientX-this.dragStartPosition.x,c=t.clientY-this.dragStartPosition.y,p=this.shouldSkipX(t,!!i,!!s,u)?0:u,g=this.shouldSkipY(t,!!n,r,c)?0:c;return{movementX:p,movementY:g}}shouldSkipX(e,t,i,n){const s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),u=this.boundaryEl.getBoundingClientRect(),c=this.config.popup?this.position.x:s.left;let p=c<=0&&r.left>=e.clientX||r.right<=e.clientX&&r.right<=u.right;return p?!0:(t?p=n<0&&e.clientX>c+r.left||n>0&&e.clientX<c+r.left:i?p=n<0&&e.clientX>u.right||n>0&&e.clientX<c+r.left:p=n<0&&e.clientX>u.right||n>0&&e.clientX<u.right,p)}shouldSkipY(e,t,i=0,n){const s=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),u=this.boundaryEl.getBoundingClientRect(),c=this.config.popup?this.position.y:s.top;let p=c<=0&&r.top>=e.clientY||r.bottom<=e.clientY&&r.bottom<=u.bottom;return p?!0:(t?p=n<0&&e.clientY>c+r.top+i||n>0&&e.clientY<c+r.top:p=n<0&&e.clientY>u.bottom||n>0&&e.clientY<u.bottom,p)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const i=new DOMParser().parseFromString(SM,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${jS}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:n}=this.config;!i&&!n&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let n=0;n<e.length;n++){const s=e[n],r=!!s.style.flex&&s.style.flex!=="0 0 auto";if(s===this.element)continue;let u=this.minHeight||0,c=this.minWidth||0;if(r){const p=window.getComputedStyle(s);p.minHeight&&(u=parseInt(p.minHeight,10)),p.minWidth&&(c=parseInt(p.minWidth,10))}else u=s.offsetHeight,c=s.offsetWidth;t+=u,i+=c}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let n=0;n<i.length;n++){const s=i[n];s!==t&&(e?s.style.height=`${s.offsetHeight}px`:s.style.width=`${s.offsetWidth}px`,s.style.flex="0 0 auto",s===this.element&&(t=i[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:n,isRight:s,isBottom:r,isLeft:u}=this.currentResizer,c=s||u,p=r||n,{movementX:g,movementY:v}=this.calculateMouseMovement({e,isLeft:u,isTop:n}),S=this.position.x,y=this.position.y;let E=0,b=0;if(c&&g){const M=u?-1:1,x=this.getWidth(),_=x+g*M;let k=!1;u&&(E=x-_,(S+E<=0||_<=this.minWidth)&&(k=!0,E=0)),k||this.setWidth(_)}if(p&&v){const M=n?-1:1,x=this.getHeight(),_=x+v*M;let k=!1;n?(b=x-_,(y+b<=0||_<=this.minHeight)&&(k=!0,b=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&x<_&&this.getMinSizeOfSiblings().height+_>this.element.parentElement.offsetHeight&&(k=!0),k||this.setHeight(_)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&E||b)&&this.offsetElement(S+E,y+b)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());const{movementX:s,movementY:r}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+s,i+r),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},$S=class KS extends ie{constructor(t,i={}){super(),this.eFocusableElement=t,this.callbacks=i,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:n=>{if(n.defaultPrevented)return;const s=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,n.shiftKey);s&&(s.focus(),n.preventDefault())},...i}}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.eFocusableElement.classList.add(KS.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:i=>{if(!(i.defaultPrevented||co(i))){if(this.callbacks.shouldStopEventPropagation(i)){sa(i);return}i.key===Q.TAB?this.callbacks.onTabKeyDown(i):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(i)}}})}};$S.FOCUS_MANAGED_CLASS="ag-focus-managed";var sl=$S,ZS={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function yg(e,t){return Id(e)?(e.debounceMs!=null&&se("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function Id(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var RM=class extends xt{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=Ge,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new sl(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new yM(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=Id(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=Id(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){const{buttons:i,readOnly:n}=t??{},{buttons:s,readOnly:r}=e;if(n===r&&Ru(i,s))return;const u=s&&s.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(gn(this.eButtonsPanel),this.buttonListeners.forEach(g=>g()),this.buttonListeners=[]):u&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!u){this.eButtonsPanel&&el(this.eButtonsPanel);return}const c=document.createDocumentFragment(),p=g=>{let v,S;switch(g){case"apply":v=this.translate("applyFilter"),S=b=>this.onBtApply(!1,!1,b);break;case"clear":v=this.translate("clearFilter"),S=()=>this.onBtClear();break;case"reset":v=this.translate("resetFilter"),S=()=>this.onBtReset();break;case"cancel":v=this.translate("cancelFilter"),S=b=>{this.onBtCancel(b)};break;default:se("Unknown button type specified");return}const E=Mu(`<button
                    type="${g==="apply"?"submit":"button"}"
                    data-ref="${g}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${v}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(E,{click:S})),c.append(E)};s.forEach(g=>p(g)),this.eButtonsPanel.append(c),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=yg(this.providedFilterParams,this.getDefaultDebounceMs()),t=Oi(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),t==null||t()};e!=null?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});const{closeOnApply:n}=this.providedFilterParams;n&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let n;(i==="Enter"||i==="Space")&&(n={keyboardEvent:t}),this.hidePopup(n),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const i=this.isModelValid(this.getModelFromUi()),n=this.queryForHtmlElement('[data-ref="applyFilterButton"]');n&&Du(n,!i)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;const t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:i,gos:n}=this;t?(i.restoreLastSize(),i.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,ZS[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},PM=class extends Cg{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},FM=class extends xt{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case Q.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const i=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(i)}break;case Q.DOWN:case Q.UP:e.preventDefault(),this.navigate(t);break;case Q.PAGE_DOWN:case Q.PAGE_UP:case Q.PAGE_HOME:case Q.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){const t=e===Q.DOWN;let i;if(!this.highlightedEl)i=this.itemEls[t?0:this.itemEls.length-1];else{let s=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);s=Math.min(Math.max(s,0),this.itemEls.length-1),i=this.itemEls[s]}this.highlightItem(i)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;const t=this.itemEls.indexOf(this.highlightedEl),i=this.options.length-1,n=this.itemEls[0].clientHeight,s=Math.floor(this.getGui().clientHeight/n);let r=-1;e===Q.PAGE_HOME?r=0:e===Q.PAGE_END?r=i:e===Q.PAGE_DOWN?r=Math.min(t+s,i):e===Q.PAGE_UP&&(r=Math.max(t-s,0)),r!==-1&&this.highlightItem(this.itemEls[r])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:i}=e,n=i||t;return this.options.push({value:t,text:n}),this.renderOption(t,n),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{el(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,i)=>{iD(t,i+1),tD(t,e.length)})}renderOption(e,t){const i=$t(this.gos),n=i.createElement("div");os(n,"option"),n.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const s=i.createElement("span");n.appendChild(s),s.textContent=t,this.unFocusable||(n.tabIndex=-1),this.itemEls.push(n),this.addManagedListeners(n,{mouseover:()=>this.highlightItem(n),mousedown:r=>{r.preventDefault(),r.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new da({getTooltipValue:()=>t,getGui:()=>n,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>s.scrollWidth>s.clientWidth})),this.getGui().appendChild(n)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const i=this.options.findIndex(n=>n.value===e);if(i!==-1){const n=this.options[i];this.value=n.value,this.displayValue=n.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!xs(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),Dd(this.highlightedEl,!0);const t=this.getGui(),{scrollTop:i,clientHeight:n}=t,{offsetTop:s,offsetHeight:r}=e;(s+r>i+n||s<i)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!xs(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),Dd(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},EM=class extends GS{constructor(e){if(super(e,(e==null?void 0:e.template)||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,(e==null?void 0:e.agComponents)||[],e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=Ge,this.eWrapper=Ge,this.eDisplayField=Ge,this.eIcon=Ge,this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:n,minPickerWidth:s,maxPickerWidth:r}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!n,i!=null&&this.setPickerMaxHeight(i),s!=null&&this.setPickerMinWidth(s),r!=null&&this.setPickerMaxWidth(r)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:n}=this.config;if(i){const s=pn(i,this.gos);s&&this.eIcon.appendChild(s)}n!=null&&this.setInputWidth(n)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),xd(e,!1),this.ariaRole&&os(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case Q.UP:case Q.DOWN:case Q.ENTER:case Q.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case Q.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:n,modalPicker:s=!0}=this.config,r={modal:s,eChild:e,closeOnEsc:!0,closedCallback:()=>{const y=nS(this.gos);this.beforeHidePicker(),y&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,n),anchorToElement:this.eWrapper};e.style.position="absolute";const u=this.popupService.addPopup(r),{maxPickerHeight:c,minPickerWidth:p,maxPickerWidth:g,variableWidth:v}=this;v?(p&&(e.style.minWidth=p),e.style.width=gg(Md(this.eWrapper)),g&&(e.style.maxWidth=g)):Ad(e,g??Md(this.eWrapper));const S=c??`${fg(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",S),this.alignPickerToComponent(),u.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();xd(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return Ad(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},Rg=class extends EM{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox",...e})}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),i&&t==null&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new FM("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),uD(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){var i;const{key:t}=e;switch(t===Q.TAB&&this.hidePicker(),t){case Q.ENTER:case Q.UP:case Q.DOWN:case Q.PAGE_UP:case Q.PAGE_DOWN:case Q.PAGE_HOME:case Q.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(i=this.listComponent)==null||i.handleKeyDown(e):super.onKeyDown(e);break;case Q.ESCAPE:super.onKeyDown(e);break;case Q.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this}setValue(e,t,i){if(this.value===e||!this.listComponent)return this;if(i||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let s=this.listComponent.getDisplayValue();return s==null&&this.config.placeholder&&(s=this.config.placeholder),this.eDisplayField.textContent=s,this.setTooltip({newTooltipText:s??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},bM={selector:"AG-SELECT",component:Rg},qS=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;const t=[["displayKey"],["displayName"],["predicate","test"]],i=n=>n.some(s=>e[s]!=null)?!0:(se(`ignoring FilterOptionDef as it doesn't contain one of '${n}'`),!1);if(!t.every(i)){this.filterOptions=this.filterOptions.filter(n=>n===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:se("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else se("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},YS=class extends RM{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:n}=t;return n??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{i===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,n=!t.operator;if(!i&&n||i&&!n)return!1;let r;if(i){const u=e,c=t;r=this.areSimpleModelsEqual(u,c)}else{const u=e,c=t;r=u.operator===c.operator&&cr(u.conditions,c.conditions,(p,g)=>this.areSimpleModelsEqual(p,g))}return r}shouldRefresh(e){var r;const t=this.getModel(),i=t?t.conditions??[t]:null,n=((r=e.filterOptions)==null?void 0:r.map(u=>typeof u=="string"?u:u.displayKey))??this.getDefaultFilterOptions();return!(!(!i||i.every(u=>n.find(c=>c===u.type)!==void 0))||typeof e.maxNumConditions=="number"&&i&&i.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const i=e;let n=i.conditions;n==null&&(n=[],se("Filter model is missing 'conditions'"));const s=this.validateAndUpdateConditions(n),r=this.getNumConditions();if(s<r)this.removeConditionsAndOperators(s);else if(s>r)for(let c=r;c<s;c++)this.createJoinOperatorPanel(),this.createOption();const u=i.operator==="OR";this.eJoinOperatorsAnd.forEach(c=>c.setValue(!u,!0)),this.eJoinOperatorsOr.forEach(c=>c.setValue(u,!0)),n.forEach((c,p)=>{this.eTypes[p].setValue(c.type,!0),this.setConditionIntoUi(c,p)})}else{const i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),jt.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),se('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){const t=this.getModel();if(t==null)return!0;const{operator:i}=t,n=[];if(i){const r=t;n.push(...r.conditions??[])}else n.push(t);return n[i&&i==="OR"?"some":"every"](r=>this.individualConditionPasses(e,r))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new qS,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(se('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(se('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(se('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new Rg);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,n=>this.resetInput(n)),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const n=this.eJoinOperatorPanels.length-1,s=this.joinOperatorId++;this.resetJoinOperatorAnd(t,n,s),this.resetJoinOperatorOr(i,n,s),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const n=this.createManagedBean(new PM);return e.push(n),n.addCssClass("ag-filter-condition-operator"),n.addCssClass(`ag-filter-condition-operator-${i}`),t.appendChild(n.getGui()),n}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const i=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<i){this.removeConditionsAndOperators(i+1);const n=e+1,s=i-n;s>0&&this.removeConditionsAndOperators(n,s),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((n,s)=>{const r=this.isConditionDisabled(s,e);n.setDisabled(r||this.filterListOptions.length<=1),s===1&&(Du(this.eJoinOperatorPanels[0],r),this.eJoinOperatorsAnd[0].setDisabled(r),this.eJoinOperatorsOr[0].setDisabled(r))}),this.eConditionBodies.forEach((n,s)=>{Vt(n,this.isConditionBodyVisible(s))});const i=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(n=>{n.setValue(!i,!0)}),this.eJoinOperatorsOr.forEach(n=>{n.setValue(i,!0)}),this.forEachInput((n,s,r,u)=>{this.setElementDisplayed(n,s<u),this.setElementDisabled(n,this.isConditionDisabled(r,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,t),this.removeComponents(this.eJoinOperatorsAnd,i,t),this.removeComponents(this.eJoinOperatorsOr,i,t)}removeElements(e,t,i){this.removeItems(e,t,i).forEach(s=>el(s))}removeComponents(e,t,i){this.removeItems(e,t,i).forEach(s=>{el(s.getGui()),this.destroyBean(s)})}removeItems(e,t,i){return i==null?e.splice(t):e.splice(t,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const t=this.getInputs(0)[0];if(!t)return;t instanceof $r&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,n=!1;const s=this.getJoinOperator();for(let u=this.getNumConditions()-1;u>=0;u--)if(this.isConditionUiComplete(u))t===-1&&(t=u,i=u);else{const c=u>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(u-1),p=u<t;(c||p)&&(this.removeConditionsAndOperators(u,1),n=!0,p&&i--)}let r=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),r=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),r=!0),r&&this.updateConditionStatusesAndValues(i,s),n&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if(ng(this.filterPlaceholder)){const n=this.filterPlaceholder,s=this.eTypes[t].getValue(),r=this.translate(s);i=n({filterOptionKey:s,filterOption:r,placeholder:i})}else typeof this.filterPlaceholder=="string"&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((t,i,n,s)=>{if(!(t instanceof $r))return;const r=i===0&&s>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",u=i===0&&s>1?e("ariaFilterFromValue","Filter from value"):i===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(r,n)),t.setInputAriaLabel(u)})}setElementValue(e,t,i){e instanceof $r&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof xt&&Vt(e.getGui(),t)}setElementDisabled(e,t){e instanceof xt&&Du(e.getGui(),t)}attachElementOnChange(e,t){e instanceof $r&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const n=this.getNumberOfInputs(t),s=this.getInputs(e);for(let r=0;r<s.length;r++){const u=s[r];u!=null&&i(u,r,e,n)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(i=>i==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,i)=>this.resetJoinOperatorAnd(t,i,this.joinOperatorId+i)),this.eJoinOperatorsOr.forEach((t,i)=>this.resetJoinOperatorOr(t,i,this.joinOperatorId+i)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),jt.resolve()}resetType(e){const i=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,t,i,n,s){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${s}`).setLabel(n),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput((n,s,r)=>{r===t&&this.setElementValue(n,i[s]!=null?i[s]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,n)=>{this.setElementValue(t,i===0&&n===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,i=>{this.attachElementOnChange(i,this.listener)}))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),n=this.mapValuesFromModel(t),s=this.optionsFactory.getCustomOption(t.type),r=this.evaluateCustomFilter(s,n,i);return r??(i==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(n,i,t,e))}evaluateCustomFilter(e,t,i){if(e==null)return;const{predicate:n}=e;if(n!=null&&!t.some(s=>s==null))return n(t,i)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},QS=class extends YS{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const n=this.comparator(),s=e[0]!=null?n(e[0],t):0;switch(i.type){case"equals":return s===0;case"notEqual":return s!==0;case"greaterThan":return s>0;case"greaterThanOrEqual":return s>=0;case"lessThan":return s<0;case"lessThanOrEqual":return s<=0;case"inRange":{const r=n(e[1],t);return this.scalarFilterParams.inRangeInclusive?s>=0&&r<=0:s>0&&r<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return se('Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},xM=65,DM=67,MM=86,TM=68,_M=90,LM=89;function XS(e){var i;return e.altKey||e.ctrlKey||e.metaKey?!1:((i=e.key)==null?void 0:i.length)===1}function bf(e,t,i,n,s){const r=n?n.getColDef().suppressKeyboardEvent:void 0;if(!r)return!1;const u=e.addGridCommonParams({event:t,editing:s,column:n,node:i,data:i.data,colDef:n.getColDef()});return!!(r&&r(u))}function AM(e,t,i,n){const s=n.getDefinition(),r=s&&s.suppressHeaderKeyboardEvent;if(!ge(r))return!1;const u=e.addGridCommonParams({colDef:s,column:n,headerRowIndex:i,event:t});return!!r(u)}function IM(e){const{keyCode:t}=e;let i;switch(t){case xM:i=Q.A;break;case DM:i=Q.C;break;case MM:i=Q.V;break;case TM:i=Q.D;break;case _M:i=Q.Z;break;case LM:i=Q.Y;break;default:i=e.code}return i}function kM(e,t=!1){return e===Q.DELETE?!0:!t&&e===Q.BACKSPACE?bS():!1}var ol=class extends $r{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=ge(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{XS(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:i=>{var s;const n=(s=i.clipboardData)==null?void 0:s.getData("text");n&&n.split("").some(r=>!e.test(r))&&i.preventDefault()}})}},Zd={selector:"AG-INPUT-TEXT-FIELD",component:ol},Pg=class extends ol{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{const s=parseFloat(this.eInput.value),r=isNaN(s)?"":this.normalizeValue(s.toString());this.value!==r&&this.setValue(r)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";const{precision:e,min:t,max:i,step:n}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof i=="number"&&this.setMax(i),typeof n=="number"&&this.setStep(n)}onWheel(e){Wt(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));const t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){const n=parseFloat(e).toFixed(this.precision);return parseFloat(n).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,In(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,In(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,In(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(ge(i)){let n=this.isScientificNotation(i);if(n&&this.eInput.validity.valid)return e(i);if(!n){i=this.adjustPrecision(i);const s=this.normalizeValue(i);n=i!=s}if(n)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},OM={selector:"AG-INPUT-NUMBER-FIELD",component:Pg},JS=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],Fg=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=e.operator!=null,i=this.localeService.getLocaleTextFunc();if(t){const n=e,r=(n.conditions??[]).map(c=>this.getModelAsString(c)),u=n.operator==="AND"?"andCondition":"orCondition";return r.join(` ${i(u,ZS[u])} `)}else{if(e.type==="blank"||e.type==="notBlank")return i(e.type,e.type);{const n=e,s=this.optionsFactory.getCustomOption(n.type),{displayKey:r,displayName:u,numberOfInputs:c}=s||{};return r&&u&&c===0?(i(r,u),u):this.conditionToString(n,s)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},ey=class extends Fg{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function xf(e){const{allowedCharPattern:t}=e??{};return t??null}var NM=class extends QS{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:n}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(n))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new ey(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return JS}setElementValue(e,t,i){const n=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,n)}createValueElement(){const e=xf(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),os(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,n){const s=this.createManagedBean(n?new ol({allowedCharPattern:n}):new Pg);s.addCssClass(`ag-filter-${i}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,(i,n,s,r)=>{n<r&&t.push(this.processValue(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=uo(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},n=this.getValues(e);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},ty=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],iy=class extends Fg{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function ny(e){const t=e&&e.trim();return t===""?e:t}var GM=class extends YS{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:i})=>{if(i==null)return!1;switch(e){case"contains":return t.indexOf(i)>=0;case"notContains":return t.indexOf(i)<0;case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return t.indexOf(i)===0;case"endsWith":{const n=t.lastIndexOf(i);return n>=0&&n===t.length-i.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new iy(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(se("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:i,filterText:n})=>e(t,i,n)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},n=this.getValuesWithSideEffects(e,!0);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,(n,s,r,u)=>{if(s<u){let c=uo(n.getValue());t&&this.textFilterParams.trimInput&&(c=ny(c)??null,n.setValue(c,!0)),i.push(c)}}),i}getDefaultFilterOptions(){return ty}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),os(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const n=this.createManagedBean(new ol);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:n}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(n))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,i,n){const s=e.map(y=>this.formatter(y))||[],r=this.formatter(t),{api:u,colDef:c,column:p,context:g,textFormatter:v}=this.textFilterParams;if(i.type==="blank")return this.isBlank(t);if(i.type==="notBlank")return!this.isBlank(t);const S={api:u,colDef:c,column:p,context:g,node:n.node,data:n.data,filterOption:i.type,value:r,textFormatter:v};return s.some(y=>this.matcher({...S,filterText:y}))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function sy(e){if(typeof e=="number")return e;if(typeof e=="string"){const t=parseInt(e);return isNaN(t)?void 0:t}}function ys(e,t=Number.MAX_VALUE){return i=>{const n=sy(i);if(!(n==null||n<e||n>t))return n}}function Cu(e,t){return e.toString().padStart(t,"0")}function HM(e,t){const i=[];for(let n=e;n<=t;n++)i.push(n);return i}function BM(e,t,i){return typeof e!="number"?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function kn(e,t=!0,i="-"){if(!e)return null;let n=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(s=>Cu(s,2)).join(i);return t&&(n+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(s=>Cu(s,2)).join(":")),n}var qp=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function wu(e,t="YYYY-MM-DD"){const i=Cu(e.getFullYear(),4),n=["January","February","March","April","May","June","July","August","September","October","November","December"],s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>n[e.getMonth()],MMM:()=>n[e.getMonth()].slice(0,3),MM:()=>Cu(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${qp(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${qp(e.getDate())}`,DD:()=>Cu(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>s[e.getDay()],ddd:()=>s[e.getDay()].slice(0,3),dd:()=>s[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${qp(e.getDay())}`,d:()=>`${e.getDay()}`},u=new RegExp(Object.keys(r).join("|"),"g");return t.replace(u,c=>c in r?r[c]():c)}function Qi(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const n=t.split("-").map(S=>parseInt(S,10));if(n.filter(S=>!isNaN(S)).length!==3)return null;const[s,r,u]=n,c=new Date(s,r-1,u);if(c.getFullYear()!==s||c.getMonth()!==r-1||c.getDate()!==u)return null;if(!i||i==="00:00:00")return c;const[p,g,v]=i.split(":").map(S=>parseInt(S,10));return p>=0&&p<24&&c.setHours(p),g>=0&&g<60&&c.setMinutes(g),v>=0&&v<60&&c.setSeconds(v),c}var oy=class{constructor(e,t,i,n,s){this.alive=!0,this.context=e,this.eParent=n,t.getDateCompDetails(i).newAgStackInstance().then(c=>{if(!this.alive){e.destroyBean(c);return}this.dateComp=c,c&&(n.appendChild(c.getGui()),c.afterGuiAttached&&c.afterGuiAttached(),this.tempValue&&c.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),s==null||s(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Vt(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){var i,n;let t=!1;(i=this.dateComp)!=null&&i.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&((n=this.dateComp)!=null&&n.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&se("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},ry=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],ly=class extends Fg{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:n}=t||{},s=i=="inRange"||n===2,r=Qi(e.dateFrom),u=Qi(e.dateTo),c=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(s){const p=r!==null?wu(r,c):"null",g=u!==null?wu(u,c):"null";return`${p}-${g}`}return r!=null?wu(r,c):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},DC=1e3,MC=1/0,VM=class extends QS{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=DC,this.maxValidYear=MC,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:n}=e||{};return[t&&Qi(t)||null,i&&Qi(i)||null].slice(0,this.getNumberOfInputs(n))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){const i=t;return t==null||i<e?-1:i>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(i,n)=>{if(e[i]!=null)if(isNaN(e[i]))se(`DateFilter ${i} is not a number`);else return e[i]==null?n:Number(e[i]);return n};this.minValidYear=t("minValidYear",DC),this.maxValidYear=t("maxValidYear",MC),this.minValidYear>this.maxValidYear&&se("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Qi(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Qi(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&se("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new ly(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new oy(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return ry}createValueElement(){const t=$t(this.gos).createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,i,n){const r=$t(this.gos).createElement("div");r.classList.add(`ag-filter-${n}`),r.classList.add(`ag-filter-date-${n}`),t.push(r),e.appendChild(r),i.push(this.createDateCompWrapper(r))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach(s=>s.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,n,s,r)=>{s!==e||!t||n>=r||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),i={},n=this.getValues(e);return n.length>0&&(i.dateFrom=kn(n[0])),n.length>1&&(i.dateTo=kn(n[1])),{dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t,...i}}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(n=>{n.setInputPlaceholder(t),n.setInputAriaLabel(i)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,n,s,r)=>{n<r&&t.push(i.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},Eg=class extends ie{constructor(e,t,i,n){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=n,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?at(this.colsSpanning):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),t=ge(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),n=this.modifyLeftForPrintLayout(e,i),s=this.modifyLeftForPrintLayout(e,t);this.setLeft(n),this.actualLeft=s,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===s&&this.setLeft(s)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!pi(this.beans.gos,"print")||e.getPinned()==="left")return t;const n=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){const s=this.beans.visibleColsService.getBodyContainerWidth();return n+s+t}return n+t}setLeft(e){if(ge(e)&&(this.eCell.style.left=`${e}px`),Yt(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&rD(this.ariaEl,t.length)}}},WM="ag-column-first",zM="ag-column-last";function ay(e,t,i,n){return ut(e)?[]:jM(e.headerClass,e,t,i,n)}function uy(e,t,i){e.addOrRemoveCssClass(WM,i.isColAtEdge(t,"first")),e.addOrRemoveCssClass(zM,i.isColAtEdge(t,"last"))}function UM(e,t,i,n){return t.addGridCommonParams({colDef:e,column:i,columnGroup:n})}function jM(e,t,i,n,s){if(ut(e))return[];let r;if(typeof e=="function"){const u=UM(t,i,n,s);r=e(u)}else r=e;return typeof r=="string"?[r]:Array.isArray(r)?[...r]:[]}var $M=0,cy=class dy extends ie{constructor(t,i,n){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=n,this.beans=i,this.instanceId=t.getUniqueId()+"-"+$M++}wireBeans(t){this.pinnedWidthService=t.pinnedWidthService,this.focusService=t.focusService,this.userComponentFactory=t.userComponentFactory,this.ctrlsService=t.ctrlsService,this.dragAndDropService=t.dragAndDropService,this.menuService=t.menuService}postConstruct(){const t=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],t),this.addManagedEventListeners({overlayExclusiveChanged:t})}shouldStopEventPropagation(t){const{headerRowIndex:i,column:n}=this.focusService.getFocusedHeader();return AM(this.gos,t,i,n)}getWrapperHasFocus(){return Wt(this.gos)===this.eGui}setGui(t,i){this.eGui=t,this.addDomData(i),i.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),i.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(t){const{wrapperElement:i,checkMeasuringCallback:n,compBean:s}=t,{animationFrameService:r,resizeObserverService:u,columnModel:c,gos:p}=this.beans,g=M=>{if(!this.isAlive()||!s.isAlive())return;const{paddingTop:x,paddingBottom:_,borderBottomWidth:k,borderTopWidth:I}=nl(this.getGui()),H=x+_+k+I,z=i.offsetHeight+H;if(M<5){const j=$t(p),te=!j||!j.contains(i),le=z==0;if(te||le){r.requestAnimationFrame(()=>g(M+1));return}}c.setColHeaderHeight(this.column,z)};let v=!1,S;const y=()=>{const M=this.column.isAutoHeaderHeight();M&&!v&&E(),!M&&v&&b()},E=()=>{v=!0,g(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),S=u.observeResize(i,()=>g(0))},b=()=>{v=!1,S&&S(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),S=void 0};y(),s.addDestroyFunc(()=>b()),s.addManagedListeners(this.column,{widthChanged:()=>v&&g(0)}),s.addManagedEventListeners({sortChanged:()=>{v&&window.setTimeout(()=>g(0))}}),n&&n(y)}onDisplayedColumnsChanged(){const{comp:t,column:i,beans:n,eGui:s}=this;!t||!i||!s||(uy(t,i,n.visibleColsService),FS(s,n.visibleColsService.getAriaColIndex(i)))}addResizeAndMoveKeyboardListeners(t){this.resizeFeature&&t.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const t=this.focusService.isHeaderFocusSuppressed();this.eGui&&In(this.eGui,"tabindex",t?null:"-1")}onGuiKeyDown(t){var u;const i=Wt(this.gos),n=t.key===Q.LEFT||t.key===Q.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),i!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||n)&&(t.preventDefault(),t.stopImmediatePropagation()),!n))return;const s=t.key===Q.LEFT!==this.gos.get("enableRtl"),r=zS[s?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const c=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(c,t.shiftKey),(u=this.resizeFeature)==null||u.toggleColumnResizing(!0)}else this.moveHeader(r)}getViewportAdjustedResizeDiff(t){let i=this.getResizeDiff(t);if(this.column.getPinned()){const s=this.pinnedWidthService.getPinnedLeftWidth(),r=this.pinnedWidthService.getPinnedRightWidth(),u=Hu(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(s+r+i>u)if(u>s+r)i=u-s-r;else return 0}return i}getResizeDiff(t){let i=t.key===Q.LEFT!==this.gos.get("enableRtl");const n=this.column.getPinned(),s=this.gos.get("enableRtl");return n&&s!==(n==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var t;(t=this.resizeFeature)==null||t.toggleColumnResizing(!1)},150))}handleKeyDown(t){const i=this.getWrapperHasFocus();switch(t.key){case Q.PAGE_DOWN:case Q.PAGE_UP:case Q.PAGE_HOME:case Q.PAGE_END:i&&t.preventDefault()}}addDomData(t){const i=dy.DOM_DATA_KEY_HEADER_CTRL;Xr(this.gos,this.eGui,i,this),t.addDestroyFunc(()=>Xr(this.gos,this.eGui,i,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,i,n){const s=t??i;this.gos.get("preventDefaultOnContextMenu")&&s.preventDefault(),this.menuService.isHeaderContextMenuEnabled(n)&&this.menuService.showHeaderContextMenu(n,t,i),this.dispatchColumnMouseEvent("columnHeaderContextMenu",n)}dispatchColumnMouseEvent(t,i){this.eventService.dispatchEvent({type:t,column:i})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};cy.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var qd=cy,bg=class extends ie{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},KM=class extends qd{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,n,s){this.comp=e,s=Nu(this,this.beans.context,s),this.eButtonShowMainFilter=i,this.eFloatingFilterBody=n,this.setGui(t,s),this.setupActive(),this.setupWidth(s),this.setupLeft(s),this.setupHover(s),this.setupFocus(s),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(s),this.setupUi(),s.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(s),s.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(s)}),s.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=pn("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new sl(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();oa(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(Wt(this.gos)===this.eGui)return;const n=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(n){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),n.focus();return}const s=this.findNextColumnWithFloatingFilter(e.shiftKey);s&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:s},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleColsService;let i=this.column;do if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case Q.UP:case Q.DOWN:t||e.preventDefault();case Q.LEFT:case Q.RIGHT:if(t)return;e.stopPropagation();case Q.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case Q.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),n=!!e.relatedTarget&&ta(e.relatedTarget,"ag-floating-filter");if(i&&n&&e.target===this.eGui){const r=this.lastFocusEvent,u=!!(r&&r.key===Q.TAB);if(r&&u){const c=r.shiftKey;this.focusService.focusInto(this.eGui,c)}}const s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.column)}setupHover(e){e.createManagedBean(new bg([this.column],this.eGui));const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(e){const t=new Eg(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){var t;if(!this.active)return;const e=(t=this.beans.filterManager)==null?void 0:t.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,i=n=>{if((n==null?void 0:n.source)==="filterDestroyed"&&!this.isAlive())return;const s=this.comp.getFloatingFilterComp();s&&s.then(r=>{if(r){const u=t==null?void 0:t.getCurrentFloatingFilterParentModel(this.column),c=n?{...n,columns:n.columns??[],source:n.source==="api"?"api":"columnFilter"}:null;r.onParentModelChanged(u,c)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:i}),t!=null&&t.isFilterActive(this.column)&&i(null)}setupWidth(e){const t=()=>{const i=`${this.column.getActualWidth()}px`;this.comp.setWidth(i)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var e;if(!this.suppressFilterButton&&this.comp){const t=!!((e=this.beans.filterManager)!=null&&e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){var r;const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const n=this.active?(r=this.beans.filterManager)==null?void 0:r.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,s=this.comp.getFloatingFilterComp();!s||!n?this.updateCompDetails(e,n,i):s.then(u=>{var c;!u||(c=this.beans.filterManager)!=null&&c.areFilterCompsDifferent(this.userCompDetails??null,n)?this.updateCompDetails(e,n,i):this.updateFloatingFilterParams(n)})}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){var i;if(!e)return;const t=e.params;(i=this.comp.getFloatingFilterComp())==null||i.then(n=>{let s=!1;n!=null&&n.refresh&&typeof n.refresh=="function"&&n.refresh(t)!==null&&(s=!0),!s&&(n!=null&&n.onParamsUpdated)&&typeof n.onParamsUpdated=="function"&&n.onParamsUpdated(t)!==null&&se("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};var je="32.3.3";function ZM(e){var t,i;return!!((t=e.filterManager)!=null&&t.isColumnFilterPresent())||!!((i=e.filterManager)!=null&&i.isAggregateFilterPresent())}function qM(e,t,i){var n;return(n=e.filterManager)==null?void 0:n.getFilterInstance(t,i)}function YM(e,t){var i;return((i=e.filterManager)==null?void 0:i.getColumnFilterInstance(t))??Promise.resolve(void 0)}function QM(e,t){var n;const i=e.columnModel.getColDefCol(t);if(i)return(n=e.filterManager)==null?void 0:n.destroyFilter(i,"api")}function XM(e,t){e.frameworkOverrides.wrapIncoming(()=>{var i;return(i=e.filterManager)==null?void 0:i.setFilterModel(t)})}function JM(e){var t;return((t=e.filterManager)==null?void 0:t.getFilterModel())??{}}function e0(e,t){var i;return((i=e.filterManager)==null?void 0:i.getColumnFilterModel(t))??null}function t0(e,t,i){var n;return((n=e.filterManager)==null?void 0:n.setColumnFilterModel(t,i))??Promise.resolve()}function i0(e,t){const i=e.columnModel.getCol(t);if(!i){Ct(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"})}function n0(e,t,i){if(t==null)return null;let n=null;const{compName:s,jsComp:r,fwComp:u}=VS.getCompKeys(e,t,Sg);return s?n={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[s]:r==null&&u==null&&t.filter===!0&&(n=i()),n}var TC={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},_C=["january","february","march","april","may","june","july","august","september","october","november","december"],s0=class extends ie{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){var e,t;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...((t=(e=this.gos.get("initialState"))==null?void 0:e.filter)==null?void 0:t.filterModel)??{}}}setFilterModel(e,t="api"){var s;if((s=this.dataTypeService)!=null&&s.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}const i=[],n=this.getFilterModel(!0);if(e){const r=new Set(Object.keys(e));this.allColumnFilters.forEach((u,c)=>{const p=e[c];i.push(this.setModelOnFilterWrapper(u.filterPromise,p)),r.delete(c)}),r.forEach(u=>{const c=this.columnModel.getColDefCol(u)||this.columnModel.getCol(u);if(!c){se("setFilterModel() - no column found for colId: "+u);return}if(!c.isFilterAllowed()){se("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+u);return}const p=this.getOrCreateFilterWrapper(c);if(!p){se("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+u);return}i.push(this.setModelOnFilterWrapper(p.filterPromise,e[u]))})}else this.allColumnFilters.forEach(r=>{i.push(this.setModelOnFilterWrapper(r.filterPromise,null))});jt.all(i).then(()=>{var c;const r=this.getFilterModel(!0),u=[];this.allColumnFilters.forEach((p,g)=>{const v=n?n[g]:null,S=r?r[g]:null;Ru(v,S)||u.push(p.column)}),u.length>0&&((c=this.filterManager)==null||c.onFilterChanged({columns:u,source:t}))})}setModelOnFilterWrapper(e,t){return new jt(i=>{e.then(n=>{typeof n.setModel!="function"&&(se("filter missing setModel method, which is needed for setFilterModel"),i()),(n.setModel(t)||jt.resolve()).then(()=>i())})})}getFilterModel(e){const t={},{allColumnFilters:i,initialFilterModel:n}=this;return i.forEach((s,r)=>{const u=this.getModelFromFilterWrapper(s);ge(u)&&(t[r]=u)}),e||Object.entries(n).forEach(([s,r])=>{var u;ge(r)&&!i.has(s)&&((u=this.columnModel.getCol(s))!=null&&u.isFilterAllowed())&&(t[s]=r)}),t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?typeof t.getModel!="function"?(se("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const e=r=>r?r.isFilterActive?r.isFilterActive():(se("Filter is missing isFilterActive() method"),!1):!1,t=!!gf(this.gos),i=r=>{if(!r.isPrimary())return!0;const c=!this.columnModel.isPivotActive();return!r.isValueActive()||!c?!1:this.columnModel.isPivotMode()?!0:t},n=[],s=[];return this.forEachColumnFilter((r,u)=>{e(r)&&(i(u.column)?n.push(r):s.push(r))}).then(()=>{this.activeAggregateFilters=n,this.activeColumnFilters=s})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((i,n)=>n.column.setFilterActive(i.isFilterActive(),e,t))}forEachColumnFilter(e){return jt.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(i=>e(i,t))))}doColumnFiltersPass(e,t,i){const{data:n,aggData:s}=e,r=i?this.activeAggregateFilters:this.activeColumnFilters,u=i?s:n;for(let c=0;c<r.length;c++){const p=r[c];if(!(p==null||p===t)){if(typeof p.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!p.doesFilterPass({node:e,data:u}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const t=()=>{var i;return(i=this.filterManager)==null?void 0:i.onFilterChanged(e)};this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){const{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(n=>{n.filterPromise&&n.filterPromise.then(s=>{s&&s!==t&&s.onAnyFilterChanged&&s.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,i)=>{const n=i?this.columnModel.getCol(i):e;return n?this.valueService.getValue(n,t,!0):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){var i;let t;if(Bp(this.gos))t="agSetColumnFilter";else{const n=(i=this.dataTypeService)==null?void 0:i.getBaseDataType(e);n==="number"?t="agNumberColumnFilter":n==="date"||n==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){var i;let t;if(Bp(this.gos))t="agSetColumnFloatingFilter";else{const n=(i=this.dataTypeService)==null?void 0:i.getBaseDataType(e);n==="number"?t="agNumberColumnFloatingFilter":n==="date"||n==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const i=this.getDefaultFilter(e),n=e.getColDef();let s;const r={...this.createFilterParams(e,n),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(s,e)(),filterChangedCallback:c=>this.filterChangedCallbackFactory(s,e)(c),doesRowPassOtherFilter:c=>this.filterManager?this.filterManager.doesRowPassOtherFilters(s,c):!0},u=this.userComponentFactory.getFilterDetails(n,r,i);return u?{filterPromise:()=>{const c=u.newAgStackInstance();return c!=null&&c.then(p=>{s=p,t&&(t.filter=p)}),c},compDetails:u}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:fS(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:i,compDetails:n}=this.createFilterInstance(e,t);return t.filterPromise=(i==null?void 0:i())??null,t.compDetails=n,t}onColumnsChanged(){var i;const e=[];this.allColumnFilters.forEach((n,s)=>{let r;n.column.isPrimary()?r=this.columnModel.getColDefCol(s):r=this.columnModel.getCol(s),!(r&&r===n.column)&&(e.push(n.column),this.disposeFilterWrapper(n,"columnChanged"),this.disposeColumnListener(s))});const t=e.every(n=>n.getColDef().filter==="agGroupColumnFilter");e.length>0&&!t?(i=this.filterManager)==null||i.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){const e=this.columnModel.getAutoCols();e==null||e.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:i}=this.allColumnFilters.get(e.getColId())??{};return i&&typeof(i==null?void 0:i.isFilterAllowed)=="function"?i.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){const i=p=>{var v;const g=(v=this.getOrCreateFilterWrapper(e))==null?void 0:v.filterPromise;g!=null&&g.then(S=>{p(vu(S))})},n=e.getColDef(),s={...this.createFilterParams(e,n),filterChangedCallback:()=>i(p=>this.filterChangedCallbackFactory(p,e)())},r=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(n,Sg,s);let u=n0(this.frameworkOverrides,n,()=>this.getDefaultFloatingFilter(e));u==null&&(u="agReadOnlyFloatingFilter");const c={column:e,filterParams:r,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(n,c,u)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){var s;const i=e.getColId(),n=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],n&&(this.disposeFilterWrapper(n,t),(s=this.filterManager)==null||s.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(i=>{this.destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})})}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{const n=(i==null?void 0:i.source)??"columnFilter",s={filter:e,additionalEventAttributes:i,columns:[t],source:n};this.callOnFilterChangedOutsideRenderCycle(s)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:n}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,n)){this.destroyFilter(i,"paramsUpdated");return}const s=i.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(i,"paramsUpdated");return}t.filterPromise.then(r=>{(r!=null&&r.refresh?r.refresh({...this.createFilterParams(i,i.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(r,i),filterChangedCallback:this.filterChangedCallbackFactory(r,i),doesRowPassOtherFilter:c=>this.filterManager?this.filterManager.doesRowPassOtherFilters(r,c):!0,...s}):!0)===!1&&this.destroyFilter(i,"paramsUpdated")})}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:n}=t;return!(i===n||(i==null?void 0:i.render)&&(n==null?void 0:n.render)&&i.render===n.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(i=>{const n=vu(i);t(n)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(i=>{t(vu(i))})})}getFilterInstanceImpl(e){var n;const t=this.columnModel.getColDefCol(e);return t?((n=this.getOrCreateFilterWrapper(t))==null?void 0:n.filterPromise)??jt.resolve(null):jt.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:i})=>{this.setColumnFilterModel(e,t).then(()=>i())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){var r;if((r=this.dataTypeService)!=null&&r.isPendingInference()){let u=()=>{};const c=new Promise(p=>{u=p});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:u}),c}const i=this.columnModel.getColDefCol(e),n=i?this.getOrCreateFilterWrapper(i):null;return n?(u=>new Promise(c=>{u.then(p=>c(p))}))(this.setModelOnFilterWrapper(n.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){const t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,i){const n=Bp(this.gos),s=this.localeService.getLocaleTextFunc(),r=u=>{const{filterParams:c}=e;e.filterParams=typeof c=="object"?{...c,...u}:u};switch(t.baseDataType){case"number":{n&&r({comparator:(u,c)=>{const p=u==null?0:parseInt(u),g=c==null?0:parseInt(c);return p===g?0:p>g?1:-1}});break}case"boolean":{r(n?{valueFormatter:u=>ge(u.value)?s(String(u.value),u.value?"True":"False"):s("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(u,c)=>c,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(u,c)=>c===!1,numberOfInputs:0}]});break}case"date":{n&&r({valueFormatter:u=>{const c=i(u);return ge(c)?c:s("blanks","(Blanks)")},treeList:!0,treeListFormatter:(u,c)=>{if(c===1&&u!=null){const p=_C[Number(u)-1];return s(p,TC[p])}return u??s("blanks","(Blanks)")}});break}case"dateString":{const u=t.dateParser;r(n?{valueFormatter:c=>{const p=i(c);return ge(p)?p:s("blanks","(Blanks)")},treeList:!0,treeListPathGetter:c=>{const p=u(c??void 0);return p?[String(p.getFullYear()),String(p.getMonth()+1),String(p.getDate())]:null},treeListFormatter:(c,p)=>{if(p===1&&c!=null){const g=_C[Number(c)-1];return s(g,TC[g])}return c??s("blanks","(Blanks)")}}:{comparator:(c,p)=>{const g=u(p);return p==null||g<c?-1:g>c?1:0}});break}case"object":{n?r({valueFormatter:u=>{const c=i(u);return ge(c)?c:s("blanks","(Blanks)")}}):e.filterValueGetter=u=>i({column:u.column,node:u.node,value:this.valueService.getValue(u.column,u.node)});break}}}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function o0(e){var t;return!!((t=e.filterManager)!=null&&t.isAnyFilterPresent())}function r0(e,t="api"){var i;(i=e.filterManager)==null||i.onFilterChanged({source:t})}var l0=class extends xt{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[Zd]),this.eFloatingFilterText=Ge}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},hy=class extends xt{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e==null?void 0:e.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}const t=e.operator;let i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const i=e;return this.isTypeEditable(i.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new qS,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return i==null||i==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${t} ${i("ariaFilterInput","Filter Input")}`}},a0=class extends hy{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[Zd]),this.eReadOnlyText=Ge,this.eDateWrapper=Ge}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return ry}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new ly(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const i=e;this.dateComp.setDate(Qi(i.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Vt(this.eDateWrapper,e),Vt(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=this.dateComp.getDate(),t=kn(e);this.params.parentFilterInstance(i=>{if(i){const n=Qi(t);i.onFloatingFilterChanged(this.getLastType()||null,n)}})}getDateComponentParams(){const e=yg(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Oi(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new oy(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},u0=class extends xt{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[Zd]),this.eDateInput=Ge}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:i=>{i.target===Wt(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&bs(),t.type=i?"date":"text";const{minValidYear:n,maxValidYear:s,minValidDate:r,maxValidDate:u}=e.filterParams||{};if(r&&n&&se("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),u&&s&&se("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),r&&u){const[c,p]=[r,u].map(g=>g instanceof Date?g:Qi(g));c&&p&&c.getTime()>p.getTime()&&se("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}r?r instanceof Date?t.min=wu(r):t.min=r:n&&(t.min=`${n}-01-01`),u?u instanceof Date?t.max=wu(u):t.max=u:s&&(t.max=`${s}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Qi(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(kn(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:dg()||hg()||bs()&&ES()>=14.1}},py=class extends ie{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=Ge,this.valueChangedListener=()=>{}}setupGui(e){var n;this.eFloatingFilterTextInput=this.createManagedBean(new ol((n=this.params)==null?void 0:n.config));const t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);const i=s=>this.valueChangedListener(s);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},fy=class extends hy{constructor(){super(...arguments),this.eFloatingFilterInputContainer=Ge}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=Id(this.params.filterParams),!this.isReadOnly()){const i=yg(this.params.filterParams,this.getDefaultDebounceMs()),n=Oi(this.syncUpWithParentFilter.bind(this),i);this.floatingFilterInputService.setValueChangedListener(n)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();gn(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){const t=e.key===Q.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=ny(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(n=>{n&&n.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},c0=class extends ie{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new Pg),this.eFloatingFilterTextInput=this.createManagedBean(new ol),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,n=>this.valueChangedListener(n)),this.setupListeners(i,n=>this.valueChangedListener(n))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},d0=class extends fy{init(e){var t;super.init(e),this.filterModelFormatter=new ey(this.localeService,this.optionsFactory,(t=e.filterParams)==null?void 0:t.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){xf(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return JS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=xf(e.filterParams),this.allowedCharPattern?this.createManagedBean(new py({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new c0)}},h0=class extends fy{init(e){super.init(e),this.filterModelFormatter=new iy(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return ty}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new py)}};function p0(e){var t;return!!((t=e.filterManager)!=null&&t.isQuickFilterPresent())}function f0(e){return e.gos.get("quickFilterText")}function g0(e){var t;(t=e.filterManager)==null||t.resetQuickFilterCache()}var m0=class extends ie{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){const e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){var s;const e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),i=this.columnModel.getColDefCols();let n=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?(s=this.pivotResultColsService.getPivotResultCols())==null?void 0:s.list:i)??[];t&&(n=n.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?n:n.filter(r=>r.isVisible()||r.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return ge(e)?At(this.gos)?e.toUpperCase():(se("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){se(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(i=>{const n=this.getQuickFilterTextForColumn(i,e);return ge(n)&&n.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);const{quickFilterParts:n,matcher:s}=this;return s(n,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0);const n=e.getColDef();if(n.getQuickFilterText){const s=this.gos.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:n});i=n.getQuickFilterText(s)}return ge(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.colsForQuickFilter.forEach(i=>{const n=this.getQuickFilterTextForColumn(i,e);ge(n)&&t.push(n)}),t.join(`
`)}},xg={version:je,moduleName:"@ag-grid-community/filter-core",beans:[CM]},v0={version:je,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:o0,onFilterChanged:r0},dependantModules:[xg]},Dg={version:je,moduleName:"@ag-grid-community/column-filter",beans:[s0],dependantModules:[xg]},C0={version:je,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:ZM,getFilterInstance:qM,getColumnFilterInstance:YM,destroyFilter:QM,setFilterModel:XM,getFilterModel:JM,getColumnFilterModel:e0,setColumnFilterModel:t0,showColumnFilter:i0},dependantModules:[Dg,v0]},gy={version:je,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:KM}],dependantModules:[Dg]},w0={version:je,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:l0}],dependantModules:[gy]},S0={version:je,moduleName:"@ag-grid-community/simple-filter",dependantModules:[Dg],userComponents:[{name:"agTextColumnFilter",classImp:GM},{name:"agNumberColumnFilter",classImp:NM},{name:"agDateColumnFilter",classImp:VM},{name:"agDateInput",classImp:u0}]},y0={version:je,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[S0,gy],userComponents:[{name:"agTextColumnFloatingFilter",classImp:h0},{name:"agNumberColumnFloatingFilter",classImp:d0},{name:"agDateColumnFloatingFilter",classImp:a0}]},my={version:je,moduleName:"@ag-grid-community/quick-filter-core",beans:[m0],dependantModules:[xg]},R0={version:je,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:p0,getQuickFilter:f0,resetQuickFilter:g0},dependantModules:[my]},P0={version:je,moduleName:"@ag-grid-community/quick-filter",dependantModules:[my,R0]},F0={version:je,moduleName:"@ag-grid-community/filter",dependantModules:[y0,w0,P0,C0]},Df=(e=>(e.COLUMN_GROUP="group",e.COLUMN="column",e.FLOATING_FILTER="filter",e))(Df||{}),E0=class extends ie{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl});const e=$t(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){var e;return((e=this.ctrlsService.getHeaderRowContainerCtrl())==null?void 0:e.getRowCount())??0}getHeaderPositionForColumn(e,t){let i;if(typeof e=="string"?(i=this.columnModel.getCol(e),i||(i=this.visibleColService.getColumnGroup(e))):i=e,!i)return null;const n=this.ctrlsService.getHeaderRowContainerCtrl(),s=n==null?void 0:n.getAllCtrls(),r=at(s||[]).getType()==="filter",u=this.getHeaderRowCount()-1;let c=-1,p=i;for(;p;)c++,p=p.getParent();let g=c;return t&&r&&g===u-1&&g++,g===-1?null:{headerRowIndex:g,column:i}}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:n}=t,s=t.column,r=this.getHeaderRowCount(),u=e===0;let{headerRowIndex:c,column:p,headerRowIndexWithoutSpan:g}=u?this.headerPositionUtils.getColumnVisibleParent(s,n):this.headerPositionUtils.getColumnVisibleChild(s,n),v=!1;return c<0&&(c=0,p=s,v=!0),c>=r?(c=-1,this.setCurrentHeaderRowWithoutSpan(-1)):g!==void 0&&(this.currentHeaderRowWithoutSpan=g),!v&&!p?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:c,column:p},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,i){const n=this.focusService.getFocusedHeader(),s=e===2,r=this.gos.get("enableRtl");let u,c;if(this.currentHeaderRowWithoutSpan!==-1?n.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=n.headerRowIndex,s!==r?(c="Before",u=this.headerPositionUtils.findHeader(n,c)):(c="After",u=this.headerPositionUtils.findHeader(n,c)),u||!t)return this.focusService.focusHeaderPosition({headerPosition:u,direction:c,fromTab:t,allowUserOverride:!0,event:i});if(t){const p=this.gos.getCallback("tabToNextHeader");if(p)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:p,headerPosition:u,direction:c})}return this.focusNextHeaderRow(n,c,i)}focusNextHeaderRow(e,t,i){const n=e.headerRowIndex;let s=null,r;if(t==="Before"?n>0&&(r=n-1,this.currentHeaderRowWithoutSpan-=1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"end")):(r=n+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),s=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"start")),!s)return!1;const{column:u,headerRowIndex:c}=this.headerPositionUtils.getHeaderIndexToFocus(s.column,s==null?void 0:s.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:u,headerRowIndex:c},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(Yt(e)){const n=e.getDisplayedLeafColumns();i=t==="Before"?at(n):n[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}},b0=class extends ie{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new sl(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();const n=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:n}),this.mockContextMenuForIPad(n),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame(()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){var r;const{columnModel:e}=this;let t=0;const i=this.columnModel.getGroupRowsHeight().reduce((u,c)=>u+c,0),n=this.columnModel.getColumnHeaderRowHeight();if((r=this.filterManager)!=null&&r.hasFloatingFilters()&&(t+=e.getFloatingFiltersHeight()),t+=i,t+=n,this.headerHeight===t)return;this.headerHeight=t;const s=`${t+1}px`;this.comp.setHeightAndMinHeight(s),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const t=this.visibleColsService.getAllCols().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,n=i!==t?2:3;(this.headerNavigationService.navigateHorizontally(n,!0,e)||!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case Q.LEFT:t=2;case Q.RIGHT:{ge(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case Q.UP:t=0;case Q.DOWN:{ge(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e;!t&&this.eGui.contains(Wt(this.gos))||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){var s;if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;const{target:n}=e??t;(n===this.eGui||n===((s=this.ctrlsService.getHeaderRowContainerCtrl())==null?void 0:s.getViewportElement()))&&this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!dr())return;const t=new rr(this.eGui),i=n=>{e(void 0,n.touchStart,n.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}},Mg=class extends ie{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=pi(this.gos,"print"),t=this.visibleColsService.getBodyContainerWidth(),i=this.visibleColsService.getColsLeftWidth(),n=this.visibleColsService.getDisplayedColumnsRightWidth();let s;e?s=t+i+n:(s=t,this.addSpacer&&(this.gos.get("enableRtl")?i:n)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(s+=this.scrollVisibleService.getScrollbarWidth())),this.callback(s)}},x0=class extends ie{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function vy(e){const{isFromHeader:t,fromLeft:i,xPosition:n,fromEnter:s,fakeEvent:r,pinned:u,gos:c,columnModel:p,columnMoveService:g,visibleColsService:v}=e;let{allMovingColumns:S}=e;if(t){const A=[];S.forEach(z=>{var le;let j=null,te=z.getParent();for(;te!=null&&te.getDisplayedLeafColumns().length===1;)j=te,te=te.getParent();j!=null?(!!((le=j.getColGroupDef())!=null&&le.marryChildren)?j.getProvidedColumnGroup().getLeafColumns():j.getLeafColumns()).forEach(Re=>{A.includes(Re)||A.push(Re)}):A.includes(z)||A.push(z)}),S=A}const y=S.slice();p.sortColsLikeCols(y);const E=_0({movingCols:y,draggingRight:i,xPosition:n,pinned:u,gos:c,columnModel:p,visibleColsService:v}),b=D0(y,p);if(E.length===0)return;const M=E[0];let x=b!==null&&!s;if(t&&(x=b!==null),x&&!r&&(!i&&M>=b||i&&M<=b))return;const _=v.getAllCols(),k=[];let I=null;for(let A=0;A<E.length;A++){const z=E[A],j=g.getProposedColumnOrder(y,z);if(!g.doesOrderPassRules(j))continue;const te=j.filter(ve=>_.includes(ve));if(I===null)I=te;else if(!cr(te,I))break;const le=M0(j);k.push({move:z,fragCount:le})}if(k.length===0)return;k.sort((A,z)=>A.fragCount-z.fragCount);const H=k[0].move;if(!(H>p.getCols().length-S.length))return{columns:S,toIndex:H}}function Tg(e){const{columns:t,toIndex:i}=vy(e)||{},{finished:n,columnMoveService:s}=e;return!t||i==null?null:(s.moveColumns(t,i,"uiColumnMoved",n),n?null:{columns:t,toIndex:i})}function D0(e,t){const i=t.getCols(),n=Cx(e.map(p=>i.indexOf(p))),s=n[0];return at(n)-s!==n.length-1?null:s}function M0(e){function t(n){const s=[];let r=n.getOriginalParent();for(;r!=null;)s.push(r),r=r.getOriginalParent();return s}let i=0;for(let n=0;n<e.length-1;n++){let s=t(e[n]),r=t(e[n+1]);[s,r]=s.length>r.length?[s,r]:[r,s],s.forEach(u=>{r.indexOf(u)===-1&&i++})}return i}function T0(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function _0(e){const{movingCols:t,draggingRight:i,xPosition:n,pinned:s,gos:r,columnModel:u,visibleColsService:c}=e;if(r.get("suppressMovableColumns")||t.some(I=>I.getColDef().suppressMovable))return[];const g=T0(c,s),v=u.getCols(),S=g.filter(I=>qr(t,I)),y=g.filter(I=>!qr(t,I)),E=v.filter(I=>!qr(t,I));let b=0,M=n;if(i){let I=0;S.forEach(H=>I+=H.getActualWidth()),M-=I}if(M>0){for(let I=0;I<y.length;I++){const H=y[I];if(M-=H.getActualWidth(),M<0)break;b++}i&&b++}let x;if(b>0){const I=y[b-1];x=E.indexOf(I)+1}else x=E.indexOf(y[0]),x===-1&&(x=0);const _=[x],k=(I,H)=>I-H;if(i){let I=x+1;const H=v.length-1;for(;I<=H;)_.push(I),I++;_.sort(k)}else{let I=x;const H=v.length-1;let A=v[I];for(;I<=H&&g.indexOf(A)<0;)I++,_.push(I),A=v[I];I=x-1;const z=0;for(;I>=z;)_.push(I),I--;_.sort(k).reverse()}return _}function kd(e){var g;const{pinned:t,fromKeyboard:i,gos:n,ctrlsService:s,useHeaderRow:r,skipScrollPadding:u}=e;let c=(g=s.getHeaderRowContainerCtrl(t))==null?void 0:g.getViewportElement(),{x:p}=e;return c?(i&&(p-=c.getBoundingClientRect().left),n.get("enableRtl")&&(r&&(c=c.querySelector(".ag-header-row")),p=c.clientWidth-p),t==null&&!u&&(p+=s.get("center").getCenterViewportScrollLeft()),p):0}function ia(e,t){for(const i of e)i.setMoving(t,"uiColumnMoved")}var LC=7,Mf=100,td=Mf/2,L0=5,A0=100,I0=class extends ie{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!ge(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){var t;const e=((t=this.lastDraggingEvent)==null?void 0:t.dragItem.columns)??[];for(const i of e){const n=i.getPinned();if(i.getColDef().lockPinned){if(n==this.pinned)return"move";continue}if(n===this.pinned||!this.pinned)return"move";if(!n&&this.pinned)return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const n=e.dragItem.visibleState,s=(t||[]).filter(r=>n[r.getId()]);this.setColumnsVisible(s,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(t,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,n=!1){const s=this.gos.get("suppressMoveWhenColumnDragging");if(n&&!s){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!n&&ut(e.hDirection))return;const{pinned:r,gos:u,ctrlsService:c}=this,p=kd({x:e.x,pinned:r,gos:u,ctrlsService:c});t||this.checkCenterForScrolling(p),s?this.handleColumnDragWhileSuppressingMovement(e,t,i,p,n):this.handleColumnDragWhileAllowingMovement(e,t,i,p,n)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e)return;const n=e.filter(s=>!s.getColDef().lockVisible);this.columnModel.setColsVisible(n,t,i)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;const{columns:e,toIndex:t}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,t,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,i,n,s){const r=this.getAllMovingColumns(e,!0);if(s){const u=this.isAttemptingToPin(r);u&&this.attemptToPinColumns(r,void 0,!0);const{fromLeft:c,xPosition:p}=this.getNormalisedXPositionInfo(r,u)||{};if(c==null||p==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:r,xPosition:p,fromEnter:t,fakeEvent:i,fromLeft:c})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(r,n)}}handleColumnDragWhileAllowingMovement(e,t,i,n,s){const r=this.getAllMovingColumns(e),u=this.normaliseDirection(e.hDirection)===1,c=e.dragSource.type===1,p=this.getMoveColumnParams({allMovingColumns:r,isFromHeader:c,xPosition:n,fromLeft:u,fromEnter:t,fakeEvent:i}),g=Tg({...p,finished:s});g&&(this.lastMovedInfo=g)}getAllMovingColumns(e,t=!1){const i=e.dragSource.getDragItem();let n=null;t?(n=i.columnsInSplit,n||(n=i.columns)):n=i.columns;const s=r=>r.getColDef().lockPinned?r.getPinned()==this.pinned:!0;return n?n.filter(s):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:n,fromLeft:s,fromEnter:r,fakeEvent:u}=e,{pinned:c,gos:p,columnModel:g,columnMoveService:v,visibleColsService:S}=this;return{allMovingColumns:t,isFromHeader:i,fromLeft:s,xPosition:n,pinned:c,fromEnter:r,fakeEvent:u,gos:p,columnModel:g,columnMoveService:v,visibleColsService:S}}findFirstAndLastMovingColumns(e){const t=e.length;let i,n;for(let s=0;s<=t;s++){if(!i){const r=e[s];r.getLeft()!=null&&(i=r)}if(!n){const r=e[t-1-s];r.getLeft()!=null&&(n=r)}if(i&&n)break}return{firstMovingCol:i,lastMovingCol:n}}highlightHoveredColumn(e,t){var v;const{gos:i,columnModel:n}=this,s=i.get("enableRtl"),r=n.getCols().filter(S=>S.isVisible()&&S.getPinned()===this.pinned);let u=null,c=null,p=null;for(const S of r){if(c=S.getActualWidth(),u=this.getNormalisedColumnLeft(S,0,s),u!=null){const y=u+c;if(u<=t&&y>=t){p=S;break}}u=null,c=null}if(p)e.indexOf(p)!==-1&&(p=null);else{for(let S=r.length-1;S>=0;S--){const y=r[S],E=r[S].getParent();if(!E){p=y;break}const b=E==null?void 0:E.getDisplayedLeafColumns();if(b.length){p=at(b);break}}if(!p)return;u=this.getNormalisedColumnLeft(p,0,s),c=p.getActualWidth()}if(((v=this.lastHighlightedColumn)==null?void 0:v.column)!==p&&this.clearHighlighted(),p==null||u==null||c==null)return;let g;t-u<c/2!==s?g=0:g=1,p.setHighlighted(g),this.lastHighlightedColumn={column:p,position:g}}getNormalisedXPositionInfo(e,t){const{gos:i,visibleColsService:n}=this,s=i.get("enableRtl"),{firstMovingCol:r,column:u,position:c}=this.getColumnMoveAndTargetInfo(e,t,s);if(!r||!u||c==null)return;const p=n.getAllCols(),g=p.indexOf(r),v=p.indexOf(u),S=c===0!==s,y=g<v||g===v&&!S;let E=0;if(S?y&&(E-=1):y||(E+=1),v+E===g)return;const b=p[v+E];if(!b)return;const M=this.getNormalisedColumnLeft(b,20,s);return{fromLeft:y,xPosition:M}}getColumnMoveAndTargetInfo(e,t,i){const n=this.lastHighlightedColumn||{},{firstMovingCol:s,lastMovingCol:r}=this.findFirstAndLastMovingColumns(e);if(!s||!r||n.column||!t)return{firstMovingCol:s,...n};const c=this.getPinDirection()==="left";return{firstMovingCol:s,position:c?1:0,column:c!==i?s:r}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,t,i){const{gos:n,ctrlsService:s}=this,r=e.getLeft();if(r==null)return null;const u=e.getActualWidth();return kd({x:i?r+u-t:r+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:n,ctrlsService:s})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>LC;return t&&i||e.some(n=>n.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:n,fakeEvent:s,fromLeft:r}=e,u=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:r,fromEnter:n,fakeEvent:s}),{columns:c,toIndex:p}=vy(u)||{};c&&p!=null&&(this.lastMovedInfo={columns:c,toIndex:p}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.ctrlsService.get("center"),i=t.getCenterViewportScrollLeft(),n=i+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<i+td,this.needToMoveLeft=e>n-td):(this.needToMoveLeft=e<i+td,this.needToMoveRight=e>n-td),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){var e;this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),A0),(e=this.dragAndDropService.getDragAndDropImageComponent())==null||e.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){var e;this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,(e=this.dragAndDropService.getDragAndDropImageComponent())==null||e.setIcon(this.getIconName()))}moveInterval(){var n,s;let e;this.intervalCount++,e=10+this.intervalCount*L0,e>Mf&&(e=Mf);let t=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=LC+1)return;if((n=this.dragAndDropService.getDragAndDropImageComponent())==null||n.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){const r=(s=this.lastDraggingEvent)==null?void 0:s.dragItem.columns;this.attemptToPinColumns(r,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,i=!1){const n=(e||[]).filter(s=>!s.getColDef().lockPinned);return n.length?(i&&(t=this.getPinDirection()),this.columnModel.setColsPinned(n,t,"uiColumnDragged"),i&&this.dragAndDropService.nudge(),n.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},k0=class extends ie{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(this,e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new I0(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new x0(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},O0=class extends ie{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,n,s){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=n,this.ctrl=s}postConstruct(){const e=[];let t,i;const n=()=>{if(Vt(this.eResize,t),!t)return;const u=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(u),i){const c=this.gos.get("skipHeaderOnAutoSize"),p=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",c)};this.eResize.addEventListener("dblclick",p);const g=new rr(this.eResize);g.addEventListener("doubleTap",p),e.push(()=>{this.eResize.removeEventListener("dblclick",p),g.removeEventListener("doubleTap",p),g.destroy()})}},s=()=>{e.forEach(u=>u()),e.length=0},r=()=>{const u=this.column.isResizable(),c=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(u!==t||c!==i)&&(t=u,i=c,s(),n())};r(),this.addDestroyFunc(s),this.ctrl.setRefreshFunction("resize",r)}onResizing(e,t){const{column:i,lastResizeAmount:n,resizeStartWidth:s}=this,r=this.normaliseResizeAmount(t),u=s+r,c=[{key:i,newWidth:u}];if(this.column.getPinned()){const p=this.pinnedWidthService.getPinnedLeftWidth(),g=this.pinnedWidthService.getPinnedRightWidth(),v=Hu(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(p+g+(r-n)>v)return}this.lastResizeAmount=r,this.columnSizeService.setColumnWidths(c,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i=this.pinned!=="left",n=this.pinned==="right";return this.gos.get("enableRtl")?i&&(t*=-1):n&&(t*=-1),t}},N0=class extends ie{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(Wt(this.gos))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new Cg),this.cbSelectAll.addCssClass("ag-header-select-all"),os(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),n=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${n} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return aS(this.gos)?!0:(se(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return At(this.gos)||Ts(this.gos)?!0:(se(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly();let n="uiSelectAll";i?n="uiSelectAllCurrentPage":t&&(n="uiSelectAllFiltered");const s={source:n,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(s):this.selectionService.deselectAllRowNodes(s)}isCheckboxSelection(){const e=this.gos.get("rowSelection"),t=typeof e=="object"&&Fd(e)&&Ou(this.column),i=this.column.getColDef().headerCheckboxSelection;let n=!1;return t?n=!0:typeof i=="function"?n=i(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):n=!!i,n&&this.checkRightRowModelType(t?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(t?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){const e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="filtered":!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){const e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="currentPage":!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},G0=class extends qd{constructor(e,t,i){super(e,t,i),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,n,s){this.comp=e,s=Nu(this,this.beans.context,s),this.setGui(t,s),this.updateState(),this.setupWidth(s),this.setupMovingCss(s),this.setupMenuClass(s),this.setupSortableClass(s),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:n,checkMeasuringCallback:u=>this.setRefreshFunction("measuring",u),compBean:s}),this.addColumnHoverListener(s),this.setupFilterClass(s),this.setupClassesFromColDef(),this.setupTooltip(s),this.addActiveHeaderMouseListeners(s),this.setupSelectAll(s),this.setupUserComp(s),this.refreshAria(),this.resizeFeature=s.createManagedBean(new O0(this.getPinned(),this.column,i,e,this)),s.createManagedBean(new bg([this.column],t)),s.createManagedBean(new Eg(this.column,t,this.beans)),s.createManagedBean(new sl(t,{shouldStopEventPropagation:u=>this.shouldStopEventPropagation(u),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(s),s.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],()=>this.refresh(s)),s.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(s)}),s.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const r=()=>this.checkDisplayName(s);s.addManagedEventListeners({columnValueChanged:r,columnRowGroupChanged:r,columnPivotChanged:r,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),s.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){if(!this.column.isResizable())return;const i=this.column.getActualWidth(),n=this.column.getMinWidth(),s=this.column.getMaxWidth(),r=Math.min(Math.max(i+e,n),s);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:r}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,beans:i,column:n,ctrlsService:s}=this,{gos:r,columnModel:u,columnMoveService:c,visibleColsService:p}=i,g=this.getPinned(),v=t.getBoundingClientRect().left,S=n.getActualWidth(),y=r.get("enableRtl"),b=kd({x:e===0!==y?v-20:v+S+20,pinned:g,fromKeyboard:!0,gos:r,ctrlsService:s}),M=this.focusService.getFocusedHeader();Tg({allMovingColumns:[n],isFromHeader:!0,fromLeft:e===1,xPosition:b,pinned:g,fromEnter:!1,fakeEvent:!1,gos:r,columnModel:u,columnMoveService:c,visibleColsService:p,finished:!0}),s.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(n,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&M&&this.restoreFocus(M)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:{...e,column:this.column}})}setupUserComp(e){const t=this.lookupUserCompDetails(e);this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){const t=this.createParams(e),i=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(i,t)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:i=>{this.menuService.showColumnMenu({column:this.column,buttonElement:i,positionBy:"button"})},showColumnMenuAfterMouseClick:i=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:i,positionBy:"mouse"})},showFilter:i=>{this.menuService.showFilterMenu({column:this.column,buttonElement:i,containerType:"columnFilter",positionBy:"button"})},progressSort:i=>{this.beans.sortController.progressSort(this.column,!!i,"uiColumnSorted")},setSort:(i,n)=>{this.beans.sortController.setSortForColumn(this.column,i,!!n,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(i,n)=>{this.setupTooltip(e,i,n)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new N0(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===Q.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===Q.ENTER&&this.onEnterKeyDown(e),e.key===Q.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();!i||!(i instanceof Ff)||i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const n=this.gos.get("tooltipShowMode")==="whenTruncated",s=this.eGui,r=this.column.getColDef();!i&&n&&!r.headerComponent&&(i=()=>{const p=s.querySelector(".ag-header-cell-text");return p?p.scrollWidth>p.clientWidth:!0});const u={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>s,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:i},c=e.createManagedBean(new da(u));this.setRefreshFunction("tooltip",()=>c.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),i=ay(t,this.gos,this.column,null),n=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(s=>{n.has(s)?n.delete(s):this.comp.addOrRemoveCssClass(s,!0)}),n.forEach(s=>this.comp.addOrRemoveCssClass(s,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:i,displayName:n,dragAndDropService:s,gos:r}=this,{columnModel:u}=i;let c=!this.gos.get("suppressDragLeaveHidesColumns");const p=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>c?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:n,onDragStarted:()=>{c=!r.get("suppressDragLeaveHidesColumns"),ia([t],!0)},onDragStopped:()=>ia([t],!1),onDragCancelled:()=>ia([t],!1),onGridEnter:g=>{var v;if(c){const S=((v=g==null?void 0:g.columns)==null?void 0:v.filter(y=>!y.getColDef().lockVisible))||[];u.setColsVisible(S,!0,"uiColumnMoved")}},onGridExit:g=>{var v;if(c){const S=((v=g==null?void 0:g.columns)==null?void 0:v.filter(y=>!y.getColDef().lockVisible))||[];u.setColsVisible(S,!1,"uiColumnMoved")}}};s.addDragSource(p,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach(t=>t())}refreshHeaderComp(e){const t=this.lookupUserCompDetails(e);(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const i=this.column.getActualWidth();this.comp.setWidth(`${i}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const i=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",i),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,i=e===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:n}=this,s=this.beans.columnModel.getGroupRowsHeight(),r=s.reduce((S,y)=>S+=y,0)===0;if(i.addOrRemoveCssClass("ag-header-parent-hidden",r),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),i.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:u,isSpanningTotal:c}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",u>0);const{columnModel:p}=n,g=p.getColumnHeaderRowHeight();if(u===0){i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${g}px`);return}i.addOrRemoveCssClass("ag-header-span-total",c);let v=0;for(let S=0;S<u;S++)v+=s[s.length-1-S];e.style.setProperty("top",`${-v}px`),e.style.setProperty("height",`${g+v}px`)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(Yx(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(Wt(this.beans.gos)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,i)=>t==="filter"?-1:i.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){const t=s=>this.handleMouseOverChange(s.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),n=s=>this.handleContextMenuMouseEvent(s,void 0,this.column);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:n})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof Ff?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},H0=class extends ie{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,n){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const i=[];this.columnGroup.getDisplayedLeafColumns().forEach(s=>{s.getColDef().suppressAutoSize||i.push(s.getColId())}),i.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:i,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const n=this.normaliseDragChange(t),s=this.resizeStartWidth+n;this.resizeColumnsFromLocalValues(s,i,e)}getInitialValues(e){const t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),n=this.getSizeRatiosOfColumns(t,i),s={columnsToResize:t,resizeStartWidth:i,resizeRatios:n};let r=null;if(e&&(r=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),r){const u=r.getDisplayedLeafColumns(),c=s.groupAfterColumns=u.filter(g=>g.isResizable()),p=s.groupAfterStartWidth=this.getInitialSizeOfColumns(c);s.groupAfterRatios=this.getSizeRatiosOfColumns(c,p)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:n,groupAfterColumns:s,groupAfterStartWidth:r,groupAfterRatios:u}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=n,this.resizeTakeFromCols=s,this.resizeTakeFromStartWidth=r,this.resizeTakeFromRatios=u}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;const n={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(n,e,t,i)}resizeColumns(e,t,i,n=!0){const{columnsToResize:s,resizeStartWidth:r,resizeRatios:u,groupAfterColumns:c,groupAfterStartWidth:p,groupAfterRatios:g}=e,v=[];if(v.push({columns:s,ratios:u,width:t}),c){const S=t-r;v.push({columns:c,ratios:g,width:p-S})}this.columnSizeService.resizeColumnSets({resizeSets:v,finished:n,source:i}),n&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(i=>i.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},B0=class extends ie{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},V0=class extends qd{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const n=this.getGui();this.setDragSource(n)}},this.column=e}setComp(e,t,i,n,s){this.comp=e,s=Nu(this,this.beans.context,s),this.setGui(t,s),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(s),this.setupExpandable(s),this.setupTooltip(s),this.setupAutoHeight({wrapperElement:n,compBean:s}),this.setupUserComp(s),this.addHeaderMouseListeners(s),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const r=this.getParentRowCtrl().getPinned(),u=this.column.getProvidedColumnGroup().getLeafColumns();s.createManagedBean(new bg(u,t)),s.createManagedBean(new Eg(this.column,t,this.beans)),s.createManagedBean(new B0(e,this.column)),this.resizeFeature=s.createManagedBean(new H0(e,i,r,this.column)),s.createManagedBean(new sl(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(s,u),s.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(s),s.addDestroyFunc(()=>this.clearComponent())}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");i!=null?i===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,n=at(t)===e;if(!i&&!n)return;const s=e.getHighlighted(),r=!!this.getParentRowCtrl().findHeaderCellCtrl(p=>p.getColumnGroupChild().isMoving());let u=!1,c=!1;if(r){const p=this.beans.gos.get("enableRtl"),g=s===1,v=s===0;i&&(p?c=g:u=v),n&&(p?u=v:c=g)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",u),this.comp.addOrRemoveCssClass("ag-header-highlight-after",c)}getColumn(){return this.column}resizeHeader(e,t){if(!this.resizeFeature)return;const i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:i,column:n,ctrlsService:s}=this,{gos:r,columnModel:u,columnMoveService:c,visibleColsService:p}=t,g=r.get("enableRtl"),v=e===0,S=this.getPinned(),y=i.getBoundingClientRect(),E=y.left,b=y.width,M=kd({x:v!==g?E-20:E+b+20,pinned:S,fromKeyboard:!0,gos:r,ctrlsService:s}),x=n.getGroupId(),_=this.focusService.getFocusedHeader();Tg({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:e===1,xPosition:M,pinned:S,fromEnter:!1,fakeEvent:!1,gos:r,columnModel:u,columnMoveService:c,visibleColsService:p,finished:!0});const k=n.getDisplayedLeafColumns(),I=v?k[0]:at(k);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(I,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&_&&this.restoreFocus(x,n,_)}restoreFocus(e,t,i){const n=t.getLeafColumns();if(!n.length)return;const s=n[0].getParent();if(!s)return;const r=this.findGroupWidthId(s,e);r&&this.focusService.focusHeaderPosition({headerPosition:{...i,column:r}})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){const t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:n=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),n,"gridInitializing")},setTooltip:(n,s)=>{this.setupTooltip(e,n,s)}}),i=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(i)}addHeaderMouseListeners(e){const t=s=>this.handleMouseOverChange(s.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),n=s=>this.handleContextMenuMouseEvent(s,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:n})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const n=this.column.getColGroupDef(),s=this.gos.get("tooltipShowMode")==="whenTruncated",r=this.eGui;!i&&s&&!(n!=null&&n.headerGroupComponent)&&(i=()=>{const c=r.querySelector(".ag-header-group-text");return c?c.scrollWidth>c.clientWidth:!0});const u={getColumn:()=>this.column,getGui:()=>r,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(n&&n.headerTooltip),shouldDisplayTooltip:i};n&&(u.getColDef=()=>n),e.createManagedBean(new da(u))}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=ay(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(n=>n.isSpanHeaderHeight())&&t.push("ag-header-span-height")):(t.push("ag-header-group-cell-with-group"),e!=null&&e.wrapHeaderText&&t.push("ag-header-cell-wrap-text")),t.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(e){const i=this.column.getProvidedColumnGroup().getLeafColumns(),n=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());i.forEach(s=>{e.addManagedListeners(s,{movingChanged:n})}),n()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===Q.ENTER){const i=this.column,n=!i.isExpanded();this.beans.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),n,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;const{beans:t,column:i,displayName:n,gos:s,dragAndDropService:r}=this,{columnModel:u}=t,c=i.getProvidedColumnGroup().getLeafColumns();let p=!s.get("suppressDragLeaveHidesColumns");const g=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>p?"hide":"notAllowed",dragItemName:n,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{p=!s.get("suppressDragLeaveHidesColumns"),ia(c,!0)},onDragStopped:()=>ia(c,!1),onDragCancelled:()=>ia(c,!1),onGridEnter:v=>{if(p){const{columns:S=[],visibleState:y}=v??{},E=S.filter(b=>!b.getColDef().lockVisible&&(!y||y[b.getColId()]));u.setColsVisible(E,!0,"uiColumnMoved")}},onGridExit:v=>{var S;if(p){const y=((S=v==null?void 0:v.columns)==null?void 0:S.filter(E=>!E.getColDef().lockVisible))||[];u.setColsVisible(y,!1,"uiColumnMoved")}}};r.addDragSource(g,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach(u=>i[u.getId()]=u.isVisible());const n=[];this.beans.visibleColsService.getAllCols().forEach(u=>{t.indexOf(u)>=0&&(n.push(u),Ni(t,u))}),t.forEach(u=>n.push(u));const s=[],r=e.getLeafColumns();for(const u of n)r.indexOf(u)!==-1&&s.push(u);return{columns:n,columnsInSplit:s,visibleState:i}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},W0=0,Yp=class extends ie{constructor(e,t,i){super(),this.instanceId=W0++,this.rowIndex=e,this.pinned=t,this.type=i;const n=i=="group"?"ag-header-row-column-group":i=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${n}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=pi(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t,i=!0){this.comp=e,t=Nu(this,this.beans.context,t),i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return cd(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=pi(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans,i=[],n=e.getGroupRowsHeight(),s=e.getColumnHeaderRowHeight();i.push(...n),i.push(s),t!=null&&t.hasFloatingFilters()&&i.push(e.getFloatingFiltersHeight());let r=0;for(let c=0;c<this.rowIndex;c++)r+=i[c];const u=i[this.rowIndex];return{topOffset:r,rowHeight:u}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const n of t)this.recycleAndCreateHeaderCtrls(n,e);const i=n=>{const{focusService:s,visibleColsService:r}=this.beans;return s.isHeaderWrapperFocused(n)?r.isVisible(n.getColumnGroupChild()):!1};if(e)for(const[n,s]of e)i(s)?this.headerCellCtrls.set(n,s):this.destroyBean(s);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){var e;return Array.from(((e=this.headerCellCtrls)==null?void 0:e.values())??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;const i=e.getUniqueId();let n;if(t&&(n=t.get(i),t.delete(i)),n&&n.getColumnGroupChild()!=e&&(this.destroyBean(n),n=void 0),n==null)switch(this.type){case"filter":{n=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":n=this.createBean(new V0(e,this.beans,this));break;default:n=this.createBean(new G0(e,this.beans,this));break}this.headerCellCtrls.set(i,n)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const t=this.getActualDepth(),{columnViewportService:i}=this.beans;return["left",null,"right"].forEach(n=>{const s=i.getHeadersToRender(n,t);e=e.concat(s)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;const t=this.getHeaderCellCtrls();let i;return typeof e=="function"?i=t.find(e):i=t.find(n=>n.getColumnGroupChild()==e),i}focusHeader(e,t){const i=this.findHeaderCellCtrl(e);return i?i.focus(t):!1}destroy(){var e;(e=this.headerCellCtrls)==null||e.forEach(t=>{this.destroyBean(t)}),this.headerCellCtrls=void 0,super.destroy()}},z0=class extends ie{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);const i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:i,advancedFilterEnabledChanged:i});const n=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;this.ctrlsService.register(n,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const t=new ra,i=this.focusService.getFocusHeaderToUseAfterRefresh(),n=()=>{const c=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let p=0;p<c;p++){const g=this.createBean(new Yp(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(g)}},s=()=>{const c=t.next(),p=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==c);(p||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),p&&(this.columnsRowCtrl=this.createBean(new Yp(c,this.pinned,"column")))},r=()=>{var g;this.includeFloatingFilter=!!((g=this.filterManager)!=null&&g.hasFloatingFilters())&&!this.hidden;const c=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){c();return}const p=t.next();if(this.filtersRowCtrl){const v=this.filtersRowCtrl.getRowIndex()!==p;(!e||v)&&c()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new Yp(p,this.pinned,"filter")))};n(),s(),r();const u=this.getAllCtrls();this.comp.setCtrls(u),this.restoreFocusOnHeader(i)}getHeaderCtrlForColumn(e){var t;if(ur(e))return(t=this.columnsRowCtrl)==null?void 0:t.getHeaderCellCtrl(e);if(this.groupsRowCtrls.length!==0)for(let i=0;i<this.groupsRowCtrls.length;i++){const n=this.groupsRowCtrls[i].getHeaderCellCtrl(e);if(n)return n}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const i=this.getAllCtrls()[e];return i?i.getType():void 0}focusHeader(e,t,i){const s=this.getAllCtrls()[e];return s?s.focusHeader(t,i):!1}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){const t=new k0(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;const{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){var t;const e=((t=this.filterManager)==null?void 0:t.hasFloatingFilters())&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new Mg(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;const e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;const i=()=>{const n=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(n==null)return;const s=n==0,r=this.hidden!==s,u=this.gos.get("enableRtl"),c=this.scrollVisibleService.getScrollbarWidth(),g=this.scrollVisibleService.isVerticalScrollShowing()&&(u&&e||!u&&t)?n+c:n;this.comp.setPinnedContainerWidth(`${g}px`),this.comp.setDisplayed(!s),r&&(this.hidden=s,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}},_g=class extends ie{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,t)}getDomLayout(){const e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(se(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},U0=class extends xt{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=Ge,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==Q.TAB||e.defaultPrevented||co(e)||this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;e.shiftKey?i=this.focusService.focusGridView(at(this.visibleColsService.getAllCols()),!0,!1):i=this.focusService.focusNextGridCoreContainer(!1),i&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new _g(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,n){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.focusService.isGridFocused()){const s=Wt(this.gos);s&&!nS(this.gos)&&(this.elToFocusAfter=s)}e.then(s=>{if(this.activePromise!==e){this.activeOverlay!==s&&(this.destroyBean(s),s=null);return}if(this.activePromise=null,!s)return;if(this.activeOverlay!==s&&(this.eOverlayWrapper.appendChild(s.getGui()),this.activeOverlay=s,n)){const u=s;this.updateListenerDestroyFunc=this.addManagedPropertyListener(n,({currentValue:c})=>{var p;(p=u.refresh)==null||p.call(u,this.gos.addGridCommonParams({...c??{}}))})}const r=this.focusService;i&&r.isGridFocused()&&r.focusInto(this.eOverlayWrapper)})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){var n;this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.focusService.isGridFocused()&&(t=null);const i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),gn(this.eOverlayWrapper),(n=t==null?void 0:t.focus)==null||n.call(t,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},Cy=class extends xt{constructor(e,t){super(),this.direction=t,this.eViewport=Ge,this.eContainer=Ge,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",bS()||dr())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=DS(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){const t=this.getViewportElement();rx(()=>xs(t),()=>this.setScrollPosition(e),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},j0=class extends Cy{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=Ge,this.eRightSpacer=Ge}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new Mg(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.visibleColsService.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,n=this.scrollVisibleService.getScrollbarWidth();i&&(t+=n),ns(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=n);let s=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(s+=n),ns(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=n)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),n=e&&this.scrollVisibleService.getScrollbarWidth()||0,r=i?0:n===0&&t?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),mu(this.getGui(),r),mu(this.eViewport,r),mu(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return _d(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){xs(this.getViewportElement())||this.attemptSettingScrollPosition(e),Ld(this.getViewportElement(),e,this.enableRtl)}},wy=class extends ie{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},$0=class extends Cy{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new wy(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.scrollVisibleService.getScrollbarWidth()||0,n=i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),ns(this.getGui(),n),ns(this.eViewport,n),ns(this.eContainer,n),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,i=e.getGridBodyCtrl().getBodyViewportElement(),n=this.getScrollPosition(),s=i.scrollTop;n!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,t){!t&&!xs(this.getViewportElement())&&this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}},Tf=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(Tf||{}),K0=class extends ie{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=Oi(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=Oi(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(const e of Object.values(Tf)){const t=this.ctrlsService.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsService.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?Oi(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),n=t?Oi(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,n)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...Object.values(Tf),"Viewport"]){if(this.lastScrollSource[1]===t)continue;const i=this.getViewportForSource(t);Ld(i,e,this.enableRtl)}}getViewportForSource(e){return e==="Viewport"?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const n=_d(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(n),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;e==="Viewport"?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e==="Viewport"?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{this.eventService.dispatchEvent({...t,type:"bodyScrollEnd"})},100)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!dr()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=fg(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&Td()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){const n=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&Td()?e=e>0?0:n:e=Math.min(Math.max(e,0),n)),Ld(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const i=this.rowModel.getRowCount();let n=-1;for(let s=0;s<i;s++){const r=this.rowModel.getRow(s);if(typeof e=="function"){if(r&&e(r)){n=s;break}}else if(e===r||e===r.data){n=s;break}}n>=0&&this.ensureIndexVisible(n,t)}ensureIndexVisible(e,t){if(pi(this.gos,"print"))return;const i=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=i){se("Invalid row index for ensureIndexVisible: "+e);return}const s=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{var v;s||(v=this.paginationService)==null||v.goToPageWithIndex(e);const r=this.ctrlsService.getGridBodyCtrl(),u=r.getStickyTopHeight(),c=r.getStickyBottomHeight(),p=this.rowModel.getRow(e);let g;do{const S=p.rowTop,y=p.rowHeight,E=this.pageBoundsService.getPixelOffset(),b=p.rowTop-E,M=b+p.rowHeight,x=this.getVScrollPosition(),_=this.heightScaler.getDivStretchOffset(),k=x.top+_,I=x.bottom+_,H=I-k,A=this.heightScaler.getScrollPositionForPixel(b),z=this.heightScaler.getScrollPositionForPixel(M-H),j=Math.min((A+z)/2,b),te=k+u>b,le=I-c<M;let ve=null;t==="top"?ve=A:t==="bottom"?ve=z:t==="middle"?ve=j:te?ve=A-u:le&&(ve=z+c),ve!==null&&(this.setVerticalScrollPosition(ve),this.rowRenderer.redraw({afterScroll:!0})),g=S!==p.rowTop||y!==p.rowHeight}while(g);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){const i=this.columnModel.getCol(e);if(!i||i.isPinned()||!this.visibleColsService.isColDisplayed(i))return;const n=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming(()=>{n!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(n),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:n}=this.isColumnOutsideViewport(e),s=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),r=this.centerRowsCtrl.getCenterWidth(),u=this.enableRtl;let c=(u?i:n)||s,p=u?n:i;t!=="auto"&&(c=t==="start",p=t==="end");const g=t==="middle";if(c||p||g){const{colLeft:v,colMiddle:S,colRight:y}=this.getColumnBounds(e);return g?S-r/2:c?u?y:v:u?v-r:y-r}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:n,colRight:s}=this.getColumnBounds(e),r=this.enableRtl,u=r?t>s:i<s,c=r?i<n:t>n;return{columnBeforeStart:u,columnAfterEnd:c}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleColsService.getBodyContainerWidth(),n=e.getActualWidth(),s=e.getLeft(),r=t?-1:1,u=t?i-s:s,c=u+n*r,p=u+n/2*r;return{colLeft:u,colMiddle:p,colRight:c}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=t,n=e+t;return{start:i,end:n,width:e}}},Z0=class extends ie{wireBeans(e){this.animationFrameService=e.animationFrameService,this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const e=()=>{this.animationFrameService.requestAnimationFrame(()=>{this.onCenterViewportResized()})};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=Hu(e);if(t<=50)return;let i=this.getPinnedColumnsOverflowingViewport(t-50);const n=this.gos.getCallback("processUnpinnedColumns");i.length&&(n&&(i=n({columns:i,viewportWidth:t})),this.columnModel.setColsPinned(i,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth(),i=this.pinnedWidthService.getPinnedLeftWidth(),n=t+i;if(n<e)return[];const s=[...this.visibleColsService.getLeftCols()],r=[...this.visibleColsService.getRightCols()];let u=0,c=0;const p=0,g=[];let v=n-p-e;for(;(c<s.length||u<r.length)&&v>0;){if(u<r.length){const S=r[u++];v-=S.getActualWidth(),g.push(S)}if(c<s.length&&v>0){const S=s[c++];v-=S.getActualWidth(),g.push(S)}}return g}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=fg(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},q0=class extends ie{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{po(this.gos)?this.enableFeature():this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),po(this.gos)&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},Y0=class extends xt{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[wg]),this.eCheckbox=Ge}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=cg(e,t),[n,s]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],r=e(n,s);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${r} (${i})`)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:n=>sa(n),click:n=>{sa(n);const s=og(this.gos)==="filteredDescendants",r=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(r,s)?this.onClicked(!0,s,n||{})===0&&this.onClicked(!1,s,n):r?this.onClicked(!1,s,n):this.onClicked(!0,s,n||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),sg(this.gos)||typeof this.getIsVisible()=="function"){const n=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:n}),this.addManagedListeners(this.rowNode,{dataChanged:n,cellChanged:n}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&At(this.gos)}showOrHideSelect(){var s,r,u;let e=this.rowNode.selectable;const t=this.getIsVisible();if(e)if(typeof t=="function"){const c=(s=this.overrides)==null?void 0:s.callbackParams;if(!this.column)e=t({...c,node:this.rowNode,data:this.rowNode.data});else{const p=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t({...c,...p})}}else e=t??!1;const i=this.gos.get("rowSelection");if(i&&typeof i!="string"?!dx(i):(r=this.column)==null?void 0:r.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if((u=this.overrides)!=null&&u.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){var t,i;if(this.overrides)return this.overrides.isVisible;const e=this.gos.get("rowSelection");return e&&typeof e!="string"?na(e):(i=(t=this.column)==null?void 0:t.getColDef())==null?void 0:i.checkboxSelection}},Q0=class extends xt{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(pn("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const i=()=>{try{const n=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",n),e.dataTransfer.setData("text/plain",n)}catch{}};if(t){const n=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(n)}else i()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},X0=class extends ie{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,n=>this.cellComp.addOrRemoveCssClass(n,!0),n=>this.cellComp.addOrRemoveCssClass(n,!1)),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){const i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),n=e.cellStyle;t=n(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}},J0=class extends ie{constructor(e,t,i,n,s){super(),this.cellCtrl=e,this.beans=t,this.rowNode=n,this.rowCtrl=s}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case Q.ENTER:this.onEnterKeyDown(e);break;case Q.F2:this.onF2KeyDown(e);break;case Q.ESCAPE:this.onEscapeKeyDown(e);break;case Q.TAB:this.onTabKeyDown(e);break;case Q.BACKSPACE:case Q.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case Q.DOWN:case Q.UP:case Q.RIGHT:case Q.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:n,rowNode:s}=this,{gos:r,rangeService:u,eventService:c}=n;if(!i.isEditing()){if(c.dispatchEvent({type:"keyShortcutChangedCellStart"}),kM(e,r.get("enableCellEditingOnBackspace"))){if(u&&po(r))u.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const p=i.getColumn(),g=this.beans.valueService.getDeleteValue(p,s);s.setDataValue(p,g,"cellClear")}}else i.startRowOrCellEdit(e,t);c.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const t=e.shiftKey?Q.UP:Q.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(Q.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(Q.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const n=e.key;n===" "?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(n,e)&&e.preventDefault()}onSpaceKeyDown(e){const{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&Rd(t)){const i=this.rowNode.isSelected(),n=!i,s=og(t)==="filteredDescendants",r=this.rowNode.setSelectedParams({newValue:n,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"});i===void 0&&r===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},eT=class extends ie{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!co(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}const{eventService:t,rangeService:i,gos:n}=this.beans,s=e.ctrlKey||e.metaKey;i&&s&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const r=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(r);const u=this.column.getColDef();u.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{u.onCellClicked(r)})},0),(n.get("singleClickEdit")||u.singleClickEdit)&&!n.get("suppressClickEdit")&&!(e.shiftKey&&(i==null?void 0:i.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!dr()||hS("dblclick"))return!1;const e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:n}=this,{eventService:s,frameworkOverrides:r,gos:u}=i,c=t.getColDef(),p=n.createEvent(e,"cellDoubleClicked");s.dispatchEvent(p),typeof c.onCellDoubleClicked=="function"&&window.setTimeout(()=>{r.wrapOutgoing(()=>{c.onCellDoubleClicked(p)})},0),!u.get("singleClickEdit")&&!u.get("suppressClickEdit")&&n.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:n}=e,s=e.target,{cellCtrl:r,beans:u}=this,{eventService:c,rangeService:p,focusService:g,gos:v}=u;if(this.isRightClickInExistingRange(e))return;const S=p&&p.getCellRanges().length!=0;if(!n||!S){const E=v.get("enableCellTextSelection")&&e.defaultPrevented,b=(bs()||E)&&!r.isEditing()&&!pg(s);r.focusCell(b)}if(n&&S&&!g.isCellFocused(r.getCellPosition())){e.preventDefault();const y=g.getFocusedCell();if(y){const{column:E,rowIndex:b,rowPinned:M}=y,x=u.rowRenderer.getRowByPosition({rowIndex:b,rowPinned:M}),_=x==null?void 0:x.getCellCtrl(E);_!=null&&_.isEditing()&&_.stopEditing(),g.setFocusedCell({column:E,rowIndex:b,rowPinned:M,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(s)){if(p){const y=this.cellCtrl.getCellPosition();if(n)p.extendLatestRangeToCell(y);else{const E=t||i;p.setRangeToCell(y,E)}}c.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),n=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&n)return!0}return!1}containsWidget(e){return ta(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),i=t.contains(e.target),n=t.contains(e.relatedTarget);return i&&n}destroy(){super.destroy()}},tT=class extends ie{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();cr(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let i=this.column;const n=this.column.getPinned();for(let s=0;i&&s<e&&(t.push(i),i=this.beans.visibleColsService.getColAfter(i),!(!i||ut(i)||n!==i.getPinned()));s++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=at(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;const t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){const i=this.beans.visibleColsService.getBodyContainerWidth();return t+i+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;const i=Zr(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${i}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},lu="ag-cell-range-selected",iT="ag-cell-range-chart",nT="ag-cell-range-single-cell",sT="ag-cell-range-chart-category",oT="ag-cell-range-handle",rT="ag-cell-range-top",lT="ag-cell-range-right",aT="ag-cell-range-bottom",uT="ag-cell-range-left",cT=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(lu,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${lu}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${lu}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${lu}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${lu}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(iT,this.hasChartRange),Dd(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(nT,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,n=!t&&e.right,s=!t&&e.bottom,r=!t&&e.left;this.cellComp.addOrRemoveCssClass(rT,i),this.cellComp.addOrRemoveCssClass(lT,n),this.cellComp.addOrRemoveCssClass(aT,s),this.cellComp.addOrRemoveCssClass(uT,r)}isSingleCell(){const{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every(i=>qr([1,0],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,i=!1,n=!1,s=!1;const r=this.cellCtrl.getCellPosition().column,u=this.beans.visibleColsService;let c,p;e?(c=u.getColAfter(r),p=u.getColBefore(r)):(c=u.getColBefore(r),p=u.getColAfter(r));const g=this.rangeService.getCellRanges().filter(v=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),v));c||(s=!0),p||(i=!0);for(let v=0;v<g.length&&!(t&&i&&n&&s);v++){const S=g[v],y=this.rangeService.getRangeStartRow(S),E=this.rangeService.getRangeEndRow(S);!t&&this.beans.rowPositionUtils.sameRow(y,this.cellCtrl.getCellPosition())&&(t=!0),!n&&this.beans.rowPositionUtils.sameRow(E,this.cellCtrl.getCellPosition())&&(n=!0),!s&&c&&S.columns.indexOf(c)<0&&(s=!0),!i&&p&&S.columns.indexOf(p)<0&&(i=!0)}return{top:t,right:i,bottom:n,left:s}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(oT,!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeService.getCellRanges(),i=t.length;if(this.rangeCount<1||i<1)return!1;const n=at(t),s=this.cellCtrl.getCellPosition(),r=vC(e)&&!this.cellCtrl.isSuppressFillHandle(),u=gx(e);let c=i===1&&!this.cellCtrl.isEditing()&&(r||u);if(this.hasChartRange){const g=t[0].type===1&&this.rangeService.isCellInSpecificRange(s,t[0]);this.cellComp.addOrRemoveCssClass(sT,g),c=n.type===0}return c&&n.endRow!=null&&this.rangeService.isContiguousRange(n)&&this.rangeService.isBottomRightCell(n,s)}addSelectionHandle(){const e=at(this.rangeService.getCellRanges()).type,i=vC(this.beans.gos)&&ut(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(i)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},dT="ag-cell",hT="ag-cell-auto-height",pT="ag-cell-normal-height",fT="ag-cell-focus",gT="ag-cell-first-right-pinned",mT="ag-cell-last-left-pinned",vT="ag-cell-not-inline-editing",CT="ag-column-hover",wT="ag-cell-wrap-text",ST=0,Sy=class _f extends ie{constructor(t,i,n,s){super(),this.column=t,this.rowNode=i,this.beans=n,this.rowCtrl=s,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=t.getId()+"-"+ST++,this.colIdSanitised=Es(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new tT(this,this.beans),this.cellCustomStyleFeature=new X0(this,this.beans),this.cellMouseListenerFeature=new eT(this,this.beans,this.column),this.cellKeyboardListenerFeature=new J0(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature(),this.beans.rangeService&&po(this.beans.gos)&&(this.cellRangeFeature=new cT(this.beans,this))}removeFeatures(){const t=this.beans.context;this.cellPositionFeature=t.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=t.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=t.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=t.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=t.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(t,i){const n=()=>{const u=this.column.getColDef(),c=this.rowNode.data;if(u.tooltipField&&ge(c))return gu(c,u.tooltipField,this.column.isTooltipFieldContainsDots());const p=u.tooltipValueGetter;return p?p(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},s=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!i&&s&&!this.isCellRenderer()&&(i=()=>{const u=this.getGui(),c=u.children.length===0?u:u.querySelector(".ag-cell-value");return c?c.scrollWidth>c.clientWidth:!0});const r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:n,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:i};this.tooltipFeature=new da(r,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(t,i,n,s,r,u){var c,p,g,v;this.cellComp=t,this.eGui=i,this.printLayout=s,u??(u=this),this.addDomData(u),this.addFeatures(),u.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(n,u),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(c=this.cellPositionFeature)==null||c.setComp(i),(p=this.cellCustomStyleFeature)==null||p.setComp(t),(g=this.tooltipFeature)==null||g.refreshToolTip(),(v=this.cellKeyboardListenerFeature)==null||v.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,i),r&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(S=>S()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t,i){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;const n=t.parentElement,s=ar(this.beans.gos,this.rowNode).height,r=p=>{if(this.editing||!this.isAlive()||!i.isAlive())return;const{paddingTop:g,paddingBottom:v,borderBottomWidth:S,borderTopWidth:y}=nl(n),E=g+v+S+y,M=t.offsetHeight+E;if(p<5){const _=$t(this.beans.gos),k=!_||!_.contains(t),I=M==0;if(k||I){window.setTimeout(()=>r(p+1),0);return}}const x=Math.max(M,s);this.rowNode.setRowAutoHeight(x,this.column)},u=()=>r(0);u();const c=this.beans.resizeObserverService.observeResize(t,u);i.addDestroyFunc(()=>{c(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(t=!1){var y;const{beans:i,column:n,rowNode:s,cellRangeFeature:r,cellComp:u}=this,{userComponentFactory:c,animationFrameService:p}=i,g=this.getValueToDisplay();let v;if(s.stub&&((y=s.groupData)==null?void 0:y[this.column.getId()])==null){const E=this.createCellRendererParams();v=c.getLoadingCellRendererDetails(n.getColDef(),E)}else if(this.isCellRenderer()){const E=this.createCellRendererParams();v=c.getCellRendererDetails(n.getColDef(),E)}u.setRenderDetails(v,g,t),p.requestAnimationFrame(()=>r==null?void 0:r.refreshHandle())}setupControlComps(){const t=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(t)),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}isCheckboxSelection(t){const{rowSelection:i}=this.beans.gridOptions;return t.checkboxSelection||Ou(this.column)&&i&&typeof i!="string"&&na(i)}refreshShouldDestroy(){const t=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(t)),n=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),s=this.includeDndSource!=this.isIncludeControl(t.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return i||n||s||r}startEditing(t=null,i=!1,n=null){const{editService:s}=this.beans;return!this.isCellEditable()||this.editing||!s?!0:this.cellComp?s.startEditing(this,t,i,n):(this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,i,n)}),!0)}setEditing(t,i){this.editCompDetails=i,this.editing!==t&&(this.editing=t)}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(t=!1){this.onCellEditorAttachedFuncs=[];const{editService:i}=this.beans;return!this.editing||!i?!1:i.stopEditing(this,t)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:i=>this.beans.valueService.setValue(this.rowNode,this.column,i),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(i,n,s,r)=>this.registerRowDragger(i,n,r),setTooltip:(i,n)=>{var s;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(i,n),(s=this.tooltipFeature)==null||s.refreshToolTip()}})}setFocusOutOnEditor(){var t;this.editing&&((t=this.beans.editService)==null||t.setFocusOutOnEditor(this))}setFocusInOnEditor(){var t;this.editing&&((t=this.beans.editService)==null||t.setFocusInOnEditor(this))}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){var i;this.refreshShouldDestroy()?(i=this.rowCtrl)==null||i.recreateCell(this):this.refreshCell(t)}refreshCell(t){var v,S,y,E,b;if(this.suppressRefreshCell||this.editing)return;const i=this.column.getColDef(),n=t!=null&&!!t.newData,s=t!=null&&!!t.suppressFlash||!!i.suppressCellFlash,r=i.field==null&&i.valueGetter==null&&i.showRowGroup==null,u=t&&t.forceRefresh||r||n,c=!!this.cellComp,p=this.updateAndFormatValue(c),g=u||p;if(c){if(g){this.showValue(n);const M=(v=this.beans.filterManager)==null?void 0:v.isSuppressFlashingCellsBecauseFiltering();!s&&!M&&(this.beans.gos.get("enableCellChangeFlash")||i.enableCellChangeFlash)&&this.flashCell(),(S=this.cellCustomStyleFeature)==null||S.applyUserStyles(),(y=this.cellCustomStyleFeature)==null||y.applyClassesFromColDef()}(E=this.tooltipFeature)==null||E.refreshToolTip(),(b=this.cellCustomStyleFeature)==null||b.applyCellClassRules()}}stopEditingAndFocus(t=!1,i=!1){var n;(n=this.beans.editService)==null||n.stopEditingAndFocus(this,t,i)}flashCell(t){const i=(t==null?void 0:t.flashDuration)??(t==null?void 0:t.flashDelay),n=(t==null?void 0:t.fadeDuration)??(t==null?void 0:t.fadeDelay);this.animateCell("data-changed",i,n)}animateCell(t,i,n){if(!this.cellComp)return;const{gos:s}=this.beans;if(i||(i=s.get("cellFlashDuration")),i===0)return;ge(n)||(n=s.get("cellFadeDuration"));const r=`ag-cell-${t}`,u=`ag-cell-${t}-animation`;this.cellComp.addOrRemoveCssClass(r,!0),this.cellComp.addOrRemoveCssClass(u,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.cellComp.addOrRemoveCssClass(u,!0),this.eGui.style.transition=`background-color ${n}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(u,!1),this.eGui.style.transition="")},n))},i)})}onFlashCells(t){if(!this.cellComp)return;const i=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[i]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){const i=this.value,n=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(i,this.value)||this.valueFormatted!=n:!0}valuesAreEqual(t,i){const n=this.column.getColDef();return n.equals?n.equals(t,i):t===i}getComp(){return this.cellComp}getValue(){return this.value}addDomData(t){const i=this.getGui();Xr(this.beans.gos,i,_f.DOM_DATA_KEY_CELL_CTRL,this),t.addDestroyFunc(()=>Xr(this.beans.gos,i,_f.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,i){return this.beans.gos.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.processCharacter(t)}onKeyDown(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.onKeyDown(t)}onMouseEvent(t,i){var n;(n=this.cellMouseListenerFeature)==null||n.onMouseEvent(t,i)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var t;this.cellComp&&((t=this.cellPositionFeature)==null||t.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:t,column:i,beans:n}=this;uy(t,i,n.visibleColsService)}refreshAriaColIndex(){const t=this.beans.visibleColsService.getAriaColIndex(this.column);FS(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var t;return(t=this.cellPositionFeature)==null?void 0:t.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,i=null){return this.cellComp?this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,i):(this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,i)}),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(t){this.eGui&&In(this.eGui,"tabindex",t?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;const t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(gT,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(mT,t)}onCellFocused(t){if(this.beans.focusService.isCellFocusSuppressed())return;const i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){i&&(t!=null&&t.forceBrowserFocus)&&(this.focusEventToRestore=t);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(fT,i),i&&t&&t.forceBrowserFocus){let s=this.cellComp.getFocusableElement();if(this.editing){const r=this.beans.focusService.findFocusableElements(s,null,!0);r.length&&(s=r[0])}s.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}const n=this.beans.gos.get("editType")==="fullRow";!i&&!n&&this.editing&&this.stopRowOrCellEdit(),i&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:uo(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(dT,!0),this.cellComp.addOrRemoveCssClass(vT,!0);const t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(hT,t),this.cellComp.addOrRemoveCssClass(pT,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(CT,t)}onColDefChanged(){var i;if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?(i=this.beans.editService)==null||i.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){const t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(wT,t)}dispatchCellContextMenuEvent(t){const i=this.column.getColDef(),n=this.createEvent(t,"cellContextMenu");this.beans.eventService.dispatchEvent(n),i.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{i.onCellContextMenu(n)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const t=new Y0;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const t=new Q0(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,i,n){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,i);return}const s=this.createRowDragComp(t,i,n);s&&(this.customRowDragComp=s,this.addDestroyFunc(()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null}))}createRowDragComp(t,i,n){const s=this.beans.gos.get("pagination"),r=this.beans.gos.get("rowDragManaged"),u=At(this.beans.gos);if(r){if(!u){se("managed row dragging is only allowed in the Client Side Row Model");return}if(s){se("managed row dragging is not possible when doing pagination");return}}const c=new Ef(()=>this.value,this.rowNode,this.column,t,i,n);return this.beans.context.createBean(c),c}setSuppressRefreshCell(t){this.suppressRefreshCell=t}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(t){this.onCellEditorAttachedFuncs.push(t)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach(t=>t()),this.onCellEditorAttachedFuncs=[]}};Sy.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var Yr=Sy,yT=0,yy=class Lf extends ie{constructor(t,i,n,s,r){var u;super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=i,this.gos=i.gos,this.rowNode=t,this.paginationPage=((u=i.paginationService)==null?void 0:u.getCurrentPage())??0,this.useAnimationFrameForCreate=s,this.printLayout=r,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+yT++,this.rowId=Es(t.id),this.initRowBusinessKey(),this.rowFocused=i.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=i.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=Es(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(t,i){t==="left"?this.leftGui=i:t==="right"?this.rightGui=i:t==="fullWidth"?this.fullWidthGui=i:this.centerGui=i}setComp(t,i,n,s){s=Nu(this,this.beans.context,s);const r={rowComp:t,element:i,containerType:n,compBean:s};this.allRowGuis.push(r),this.updateGui(n,r),this.initialiseRowComp(r),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(i=>i.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){const i=t?"none":"";this.allRowGuis.forEach(n=>n.element.style.display=i)}initialiseRowComp(t){const i=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),Rd(i)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(r=>n.addOrRemoveCssClass(r,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&xd(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),Xr(i,t.element,Lf.DOM_DATA_KEY_ROW_CTRL,this),t.compBean.addDestroyFunc(()=>Xr(i,t.element,Lf.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=Es(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){const{containerType:i}=t;this.slideInAnimation[i]&&(gC(()=>{this.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&(gC(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)}addRowDraggerToRow(t){if(po(this.gos)){se("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");return}const i=this.beans.localeService.getLocaleTextFunc(),n=new Ef(()=>`1 ${i("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),s=this.createBean(n,this.beans.context);this.rowDragComps.push(s),t.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(r=>r!==s),this.destroyBean(s,this.beans.context)})}setupFullWidth(t){const i=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;const n=this.createFullWidthCompDetails(t.element,i);t.rowComp.showFullWidth(n)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var t,i;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(n=>{var s;return(s=n==null?void 0:n.rowComp)==null?void 0:s.getFullWidthCellRenderer()}):[(i=(t=this.fullWidthGui)==null?void 0:t.rowComp)==null?void 0:i.getFullWidthCellRenderer()]}getCellElement(t){const i=this.getCellCtrl(t);return i?i.getGui():null}executeProcessRowPostCreateFunc(){const t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;const i={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(i)}areAllContainersReady(){const t=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),i=!!this.centerGui,n=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return t&&i&&n}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this.rowNode}):!1}setRowType(){const t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),i=this.isNodeFullWidthCell(),n=this.gos.get("masterDetail")&&this.rowNode.detail,s=this.beans.columnModel.isPivotMode(),u=!!this.rowNode.group&&!this.rowNode.footer&&jd(this.gos,s);t?this.rowType="FullWidthLoading":n?this.rowType="FullWidthDetail":i?this.rowType="FullWidth":u?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,i=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(i);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,i,n=null){const s={list:[],map:{}},r=(u,c)=>{s.list.push(c),s.map[u]=c};return i.forEach(u=>{const c=u.getInstanceId();let p=t.map[c];p||(p=new Yr(u,this.rowNode,this.beans,this)),r(c,p)}),t.list.forEach(u=>{const c=u.getColumn().getInstanceId();if(s.map[c]!=null)return;if(!this.isCellEligibleToBeRemoved(u,n)){r(c,u);return}u.destroy()}),s}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(i=>{const n=this.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(n,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const t=this.beans.columnViewportService,i=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const n=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,n);const s=i.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,s,"left");const r=i.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(t,i){if(t.getColumn().getPinned()!=i)return!0;const u=t.isEditing(),c=this.beans.focusService.isCellFocused(t.getCellPosition());if(u||c){const g=t.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(g)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||pi(this.gos,"print")}listenOnDomOrder(t){const i=()=>{t.rowComp.setDomOrder(this.getDomOrder())};t.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],i)}setAnimateFlags(t){if(this.isSticky()||!t)return;const i=ge(this.rowNode.oldRowTop),n=this.beans.visibleColsService.isPinningLeft(),s=this.beans.visibleColsService.isPinningRight();if(i){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=n,this.slideInAnimation.right=s}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=n,this.fadeInAnimation.right=s}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const t=(c,p)=>c?c.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(c.element,p).params):!0,i=t(this.fullWidthGui,null),n=t(this.centerGui,null),s=t(this.leftGui,"left"),r=t(this.rightGui,"right");return i&&n&&s&&r}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(i=>{this.addRowDraggerToRow(i)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())},cellChanged:t=>{this.getAllCellCtrls().forEach(i=>i.onCellChanged(t))}})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(n=>n.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(n=>{this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const t=this.rowNode.highlighted;this.allRowGuis.forEach(i=>{const n=t===0,s=t===1;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",n),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)})}postProcessRowDragging(){const t=this.rowNode.dragging;this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){const t=this.rowNode.isExpandable(),i=this.rowNode.expanded==!0;this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass("ag-row-group",t),n.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&i),n.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!i),xd(n.element,t&&i)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:uo(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(t){return this.allRowGuis.find(i=>i.element.contains(t))}onKeyboardNavigate(t){const i=this.findFullWidthRowGui(t.target);if(!((i?i.element:null)===t.target))return;const r=this.rowNode,u=this.beans.focusService.getFocusedCell(),c={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:(u==null?void 0:u.column)??this.getColumnForFullWidth(i)};this.beans.navigationService.navigateToNextCell(t,t.key,c,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||co(t))return;const i=this.allRowGuis.find(p=>p.element.contains(t.target)),n=i?i.element:null,s=n===t.target,r=Wt(this.gos);let u=!1;n&&r&&(u=n.contains(r)&&r.classList.contains("ag-cell"));let c=null;!s&&!u&&(c=this.beans.focusService.findNextFocusableElement(n,!1,t.shiftKey)),(this.isFullWidth()&&s||!c)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var i;const t=(i=this.allRowGuis.find(n=>xs(n.element)))==null?void 0:i.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(t){const i=this.isFullWidth()&&t?void 0:-1;this.allRowGuis.forEach(n=>{In(n.element,"tabindex",i)})}onFullWidthRowFocused(t){var r;const i=this.rowNode,n=t?this.isFullWidth()&&t.rowIndex===i.rowIndex&&t.rowPinned==i.rowPinned:!1,s=this.fullWidthGui?this.fullWidthGui.element:(r=this.centerGui)==null?void 0:r.element;s&&(s.classList.toggle("ag-full-width-focus",n),n&&(t!=null&&t.forceBrowserFocus)&&s.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,i){const n={list:[],map:{}};return t.list.forEach(s=>{s!==i&&(n.list.push(s),n.map[s.getColumn().getInstanceId()]=s)}),n}onMouseEvent(t,i){switch(t){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i);break}}createRowEvent(t,i){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:i})}createRowEventWithSource(t,i){const n=this.createRowEvent(t,i);return n.source=this,n}onRowDblClick(t){co(t)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",t))}getColumnForFullWidth(t){const{visibleColsService:i}=this.beans;switch(t==null?void 0:t.containerType){case"center":return i.getCenterCols()[0];case"left":return i.getLeftCols()[0];case"right":return i.getRightCols()[0];default:return i.getAllCols()[0]}}onRowMouseDown(t){if(this.lastMouseDownOnDragger=ta(t.target,"ag-row-drag",3),!this.isFullWidth())return;const i=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();const n=this.findFullWidthRowGui(t.target),s=n==null?void 0:n.element,r=t.target;let u=!0;s&&s.contains(r)&&pg(r)&&(u=!1),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:this.getColumnForFullWidth(n),rowPinned:i.rowPinned,forceBrowserFocus:u})}onRowClick(t){if(co(t)||this.lastMouseDownOnDragger)return;const{gos:n}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",t));const s=t.ctrlKey||t.metaKey,r=t.shiftKey,u=this.rowNode.isSelected(),c=Jr(n),p=CC(n),g=mx(n);if(c&&this.rowNode.group||this.isRowSelectionBlocked()||!g&&!u||!p&&u)return;const v=vx(n),S="rowClicked";if(u)v?this.rowNode.setSelectedParams({newValue:!1,event:t,source:S}):s?p&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:S}):g&&this.rowNode.setSelectedParams({newValue:!0,clearSelection:!r,rangeSelect:r,event:t,source:S});else{const y=v?!1:!s;this.rowNode.setSelectedParams({newValue:!0,clearSelection:y,rangeSelect:r,event:t,source:S})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!Rd(this.gos)}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;const i=()=>{const s=t.clientHeight;if(s!=null&&s>0){const r=()=>{this.rowNode.setRowHeight(s),(At(this.gos)||Ts(this.gos))&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(r,0)}},n=this.beans.resizeObserverService.observeResize(t,i);this.addDestroyFunc(n),i()}createFullWidthCompDetails(t,i){const{gos:n,rowNode:s}=this,r=n.addGridCommonParams({fullWidth:!0,data:s.data,node:s,value:s.key,valueFormatted:s.key,eGridCell:t,eParentOfValue:t,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(c,p,g,v)=>this.addFullWidthRowDragging(c,p,g,v),setTooltip:(c,p)=>this.refreshRowTooltip(c,p)}),u=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return u.getFullWidthDetailCellRendererDetails(r);case"FullWidthGroup":return u.getFullWidthGroupCellRendererDetails(r);case"FullWidthLoading":return u.getFullWidthLoadingCellRendererDetails(r);default:return u.getFullWidthCellRendererDetails(r)}}refreshRowTooltip(t,i){if(!this.fullWidthGui)return;const n={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new da(n,this.beans))}addFullWidthRowDragging(t,i,n="",s){if(!this.isFullWidth())return;const r=new Ef(()=>n,this.rowNode,void 0,t,i,s);this.createBean(r,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(r,this.beans.context)})}onUiLevelChanged(){const t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){const i="ag-row-level-"+t,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass(i,!0),s.rowComp.addOrRemoveCssClass(n,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){const t=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-last",i)))}stopEditing(t=!1){var i;this.stoppingRowEdit||(i=this.beans.rowEditService)==null||i.stopEditing(this,t)}setInlineEditingCss(){const t=this.editingRow||this.getAllCellCtrls().some(i=>i.isEditing());this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t}startRowEditing(t=null,i=null,n=null){var s;return this.editingRow?!0:((s=this.beans.rowEditService)==null?void 0:s.startEditing(this,t,i,n))??!0}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(i=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(i,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,i){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){const i=this.getPinnedForContainer(t),n={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(n)}processStylesFromGridOptions(){const t=this.gos.get("rowStyle");if(t&&typeof t=="function"){se("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const i=this.gos.getCallback("getRowStyle");let n;if(i){const s={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};n=i(s)}return n||t?Object.assign({},t,n):this.emptyStyle}onRowSelected(t){const i=!!this.rowNode.isSelected();this.forEachGui(t,n=>{n.rowComp.addOrRemoveCssClass("ag-row-selected",i),Dd(n.element,i),n.element.contains(Wt(this.gos))&&(n===this.centerGui||n===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const t=this.rowNode.isSelected();if(t&&!CC(this.gos))return;const n=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(n,"rowSelection")}addHoverFunctionality(t){if(!this.active)return;const{element:i,compBean:n}=t,{rowNode:s,beans:r,gos:u}=this;n.addManagedListeners(i,{mouseenter:()=>s.onMouseEnter(),mouseleave:()=>s.onMouseLeave()}),n.addManagedListeners(s,{mouseEnter:()=>{!r.dragService.isDragging()&&!u.get("suppressRowHoverHighlight")&&(i.classList.add("ag-row-hover"),s.setHovered(!0))},mouseLeave:()=>{i.classList.remove("ag-row-hover"),s.setHovered(!1)}})}roundRowTopToBounds(t){const i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(i.top,!0)-100,s=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(n,t),s)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,i){t?i(t):this.allRowGuis.forEach(i)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;const i=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),r=tS(this.gos)?ar(this.gos,this.rowNode).height:void 0,u=r?`${Math.min(n,r)-2}px`:void 0;this.forEachGui(t,c=>{c.element.style.height=`${i}px`,u&&c.element.style.setProperty("--ag-line-height",u)})}addEventListener(t,i){super.addEventListener(t,i)}removeEventListener(t,i){super.removeEventListener(t,i)}destroyFirstPass(t=!1){if(this.active=!1,!t&&ea(this.gos)&&!this.isSticky())if(this.rowNode.rowTop!=null){const s=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventService.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const t=i=>(i.list.forEach(n=>n.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){var i;const t=((i=this.beans.paginationService)==null?void 0:i.getCurrentPage())??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,i=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;const n=this.beans.pageBoundsService.getPixelOffset();return t+n*(i?1:-1)}setRowTop(t){if(!this.printLayout&&ge(t)){const i=this.applyPaginationOffset(t),r=`${this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}px`;this.setRowTopStyle(r)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";const i=this.rowNode;let n;if(this.isSticky())n=i.stickyRowTop;else{const s=this.slideInAnimation[t]?this.roundRowTopToBounds(i.oldRowTop):i.rowTop,r=this.applyPaginationOffset(s);n=i.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return n+"px"}setRowTopStyle(t){this.allRowGuis.forEach(i=>this.suppressRowTransform?i.rowComp.setTop(t):i.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let i=null;return this.getAllCellCtrls().forEach(n=>{n.getColumn()==t&&(i=n)}),i!=null||this.getAllCellCtrls().forEach(n=>{n.getColSpanningList().indexOf(t)>=0&&(i=n)}),i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){var u;const i=this.rowNode.getRowIndexString();if(i===null)return;const n=this.beans.headerNavigationService.getHeaderRowCount()+(((u=this.beans.filterManager)==null?void 0:u.getHeaderRowCount())??0),s=this.rowNode.rowIndex%2===0,r=n+this.rowNode.rowIndex+1;this.forEachGui(t,c=>{c.rowComp.setRowIndex(i),c.rowComp.addOrRemoveCssClass("ag-row-even",s),c.rowComp.addOrRemoveCssClass("ag-row-odd",!s),sD(c.element,r)})}setStoppingRowEdit(t){this.stoppingRowEdit=t}};yy.DOM_DATA_KEY_ROW_CTRL="renderedRow";var Qr=yy,RT=class extends ie{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",hS("touchstart")?"touchstart":"mousedown"].forEach(i=>{const n=this.processMouseEvent.bind(this,i);this.addManagedElementListeners(this.element,{[i]:n})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||co(t))return;const i=this.getRowForEvent(t),n=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,i,n):(n&&n.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!dr())return;const e=new rr(this.element),t=i=>{const n=this.getRowForEvent(i.touchEvent),s=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(void 0,i.touchEvent,n,s)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){const i=Pu(this.gos,t,Qr.DOM_DATA_KEY_ROW_CTRL);if(i)return i;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,n){const s=i?i.getRowNode():null,r=n?n.getColumn():null;let u=null;if(r){const g=e||t;n.dispatchCellContextMenuEvent(g??null),u=this.valueService.getValue(r,s)}const c=this.ctrlsService.getGridBodyCtrl(),p=n?n.getGui():c.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:s,column:r,value:u,anchorToElement:p})}getControlsForEventTarget(e){return{cellCtrl:mf(this.gos,e,Yr.DOM_DATA_KEY_CELL_CTRL),rowCtrl:mf(this.gos,e,Qr.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):n&&n.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,i){const n=e.getRowNode(),s=e.getColumn(),r=e.isEditing();!bf(this.gos,i,n,s,r)&&t==="keydown"&&(!r&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),XS(i)&&e.processCharacter(i)),t==="keydown"&&this.eventService.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const n=e.getRowNode(),s=this.focusService.getFocusedCell(),r=s&&s.column;if(!bf(this.gos,i,n,r,!1)){const c=i.key;if(t==="keydown")switch(c){case Q.PAGE_HOME:case Q.PAGE_END:case Q.PAGE_UP:case Q.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case Q.UP:case Q.DOWN:e.onKeyboardNavigate(i);break;case Q.TAB:e.onTabKeyDown(i);break}}t==="keydown"&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;const i=IM(e);if(i===Q.A)return this.onCtrlAndA(e);if(i===Q.C)return this.onCtrlAndC(e);if(i===Q.D)return this.onCtrlAndD(e);if(i===Q.V)return this.onCtrlAndV(e);if(i===Q.X)return this.onCtrlAndX(e);if(i===Q.Y)return this.onCtrlAndY();if(i===Q.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){const{pinnedRowModel:t,rowModel:i,rangeService:n}=this;if(n&&i.isRowsToRender()){const[s,r]=[t.isEmpty("top"),t.isEmpty("bottom")],u=s?null:"top";let c,p;r?(c=null,p=i.getRowCount()-1):(c="bottom",p=t.getPinnedBottomRowCount()-1);const g=this.visibleColsService.getAllCols();if(fn(g))return;n.setCellRange({rowStartIndex:0,rowStartPinned:u,rowEndIndex:p,rowEndPinned:c,columnStart:g[0],columnEnd:at(g)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){var e;(e=this.undoRedoService)==null||e.redo("ui")}},PT=class extends ie{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Vt(this.element,t),ns(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},FT=class extends ie{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Vt(this.element,t),ns(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},id=e=>e.getTopRowCtrls(),nd=e=>e.getStickyTopRowCtrls(),sd=e=>e.getStickyBottomRowCtrls(),od=e=>e.getBottomRowCtrls(),rd=e=>e.getCentreRowCtrls(),ET={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:rd},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:rd},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:rd},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:rd},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:id},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:id},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:id},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:id},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:nd},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:nd},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:nd},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:nd},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:sd},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:sd},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:sd},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:sd},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:od},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:od},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:od},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:od}};function Jl(e){return ET[e]}var bT=["topCenter","topLeft","topRight"],xT=["bottomCenter","bottomLeft","bottomRight"],DT=["center","left","right"],MT=["center","left","right","fullWidth"],TT=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],_T=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],LT=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],Ry=["stickyTopCenter","stickyTopLeft","stickyTopRight"],Py=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],AT=[...Ry,"stickyTopFullWidth",...Py,"stickyBottomFullWidth"],IT=[...bT,...xT,...DT,...Ry,...Py],kT=class extends ie{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=Jl(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new Z0(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new RT(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const n=()=>this.onPinnedWidthChanged();this.forContainers(_T,()=>{this.pinnedWidthFeature=this.createManagedBean(new PT(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:n})}),this.forContainers(LT,()=>{this.pinnedWidthFeature=this.createManagedBean(new FT(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:n})}),this.forContainers(MT,()=>this.createManagedBean(new wy(this.eContainer,this.name==="center"?i:void 0))),this.forContainers(IT,()=>this.createManagedBean(new q0(this.eContainer))),this.forContainers(TT,()=>this.createManagedBean(new Mg(s=>this.comp.setContainerWidth(`${s}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(AT.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const i=this.gos.get("ensureDomOrder"),n=pi(this.gos,"print");this.comp.setDomOrder(i||n)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return Hu(this.eViewport)}getCenterViewportScrollLeft(){return _d(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return LS(this.eViewport)}getViewportScrollLeft(){return _d(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||mD(this.eViewport)}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Ld(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const i=pi(this.gos,"print"),s=this.gos.get("embedFullWidthRows")||i,r=t.filter(u=>{const c=u.isFullWidth();return this.options.fullWidth?!s&&c:s||!c});this.comp.setRowCtrls({rowCtrls:r,useFlushSync:e})}},OT="ag-force-vertical-scroll",NT="ag-selectable",GT="ag-column-moving",HT=class extends ie{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,n,s,r,u){var c;this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=n,this.eBottom=s,this.eStickyTop=r,this.eStickyBottom=u,this.eCenterColsViewport=i.querySelector(`.${Jl("center").viewport}`),this.eFullWidthContainer=i.querySelector(`.${Jl("fullWidth").container}`),this.eStickyTopFullWidthContainer=r.querySelector(`.${Jl("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=u.querySelector(`.${Jl("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",p=>this.setCellTextSelection(p.currentValue)),this.createManagedBean(new _g(this.comp)),this.bodyScrollFeature=this.createManagedBean(new K0(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,i,s,r,u]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),(c=this.filterManager)==null||c.setupAdvancedFilterHeaderComp(n),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){const e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:i=>{const{target:n}=i,s=ta(n,"ag-root",t);t.classList.toggle("ag-has-focus",!s)},focusout:i=>{const{target:n,relatedTarget:s}=i,r=t.contains(s),u=ta(s,"ag-root",t);ta(n,"ag-root",t)||(!r||u)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(GT,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(NT,e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const t=e&&this.scrollVisibleService.getScrollbarWidth()||0,i=DS()?16:0,n=`calc(100% + ${t+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(n)),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){const e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=i=>{const n=i.relatedTarget;if(Pf(n)===null){this.rowRenderer.stopEditing();return}let s=t.some(r=>r.contains(n))&&this.mouseEventService.isElementInThisGrid(n);if(!s){const r=this.popupService;s=r.getActivePopups().some(u=>u.contains(n))||r.isElementWithinCustomPopup(n)}s||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(i=>this.addManagedElementListeners(i,{focusout:e}))}updateRowCount(){var n;const e=this.headerNavigationService.getHeaderRowCount()+(((n=this.filterManager)==null?void 0:n.getHeaderRowCount())??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=t===-1?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?OT:null,i=pi(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&vD(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes();const t=()=>{const i=e&&ea(this.gos)&&!this.rowContainerHeightService.isStretching(),n=i?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(n,i)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e;(n||Math.abs(t)>Math.abs(i))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:t,deltaY:i,shiftKey:n}=e,s=n||Math.abs(t)>Math.abs(i),r=e.target;s?(this.eStickyTopFullWidthContainer.contains(r)||this.eStickyBottomFullWidthContainer.contains(r))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(i))}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:n}=e||t;(n===this.eBodyViewport||n===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!dr())return;const t=new rr(this.eBodyViewport),i=n=>{e(void 0,n.touchStart,n.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new pM(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){const{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){var s;const t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(((s=this.filterManager)==null?void 0:s.getHeaderHeight())??0),i=this.pinnedRowModel.getPinnedTopTotalHeight();let n=0;t>0&&(n+=t),i>0&&(n+=i),n>0&&(n+=1),this.comp.setStickyTopTop(`${n}px`)}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight(),i=this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0,n=e+i;this.comp.setStickyBottomBottom(`${n}px`)}sizeColumnsToFit(e,t){const n=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,r=Hu(this.eGridBody)-n;if(r>0){this.columnSizeService.sizeColumnsToFit(r,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):se("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}};function au(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}`${au(["topLeft","topCenter","topRight","topFullWidth"])}${au(["left","center","right","fullWidth"])}${au(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}${au(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}${au(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}`;var BT=class extends ie{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsService.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),i=typeof e=="number"&&e>=0?e:pD();i!=null&&(this.scrollbarWidth=i,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},AC="__ag_grid_instance",Fy=class Ey extends ie{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=Ey.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[AC]=this.gridInstanceId}getRenderedCellForEvent(t){return mf(this.gos,t.target,Yr.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let i=t;for(;i;){const n=i[AC];if(ge(n))return n===this.gridInstanceId;i=i.parentElement}return!1}getCellPositionForEvent(t){const i=this.getRenderedCellForEvent(t);return i?i.getCellPosition():null}getNormalisedPosition(t){const i=pi(this.gos,"normal"),n=t;let s,r;if(n.clientX!=null||n.clientY!=null?(s=n.clientX,r=n.clientY):(s=n.x,r=n.y),i){const u=this.ctrlsService.getGridBodyCtrl(),c=u.getScrollFeature().getVScrollPosition(),p=u.getScrollFeature().getHScrollPosition();s+=p.left,r+=c.top}return{x:s,y:r}}};Fy.gridInstanceSequence=new ra;var VT=Fy,WT=class extends ie{constructor(){super(),this.beanName="navigationService",this.onPageDown=mC(this.onPageDown,100),this.onPageUp=mC(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const i=e.key,n=e.altKey,s=e.ctrlKey||e.metaKey,r=!!this.rangeService&&e.shiftKey,u=this.mouseEventService.getCellPositionForEvent(e);let c=!1;switch(i){case Q.PAGE_HOME:case Q.PAGE_END:!s&&!n&&(this.onHomeOrEndKey(i),c=!0);break;case Q.LEFT:case Q.RIGHT:case Q.UP:case Q.DOWN:if(!u)return!1;s&&!n&&!r&&(this.onCtrlUpDownLeftRight(i,u),c=!0);break;case Q.PAGE_DOWN:case Q.PAGE_UP:!s&&!n&&(c=this.handlePageUpDown(i,u,t));break}return c&&e.preventDefault(),c}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),t?(e===Q.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){var u;const{scrollIndex:t,scrollType:i,scrollColumn:n,focusIndex:s,focusColumn:r}=e;ge(n)&&!n.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(n),ge(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:r,rowPinned:null,forceBrowserFocus:!0}),(u=this.rangeService)==null||u.setRangeToCell({rowIndex:s,rowPinned:null,column:r})}onPageDown(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.getViewportHeight(),s=this.pageBoundsService.getPixelOffset(),r=i.top+n,u=this.rowModel.getRowIndexAtPixel(r+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,u):this.navigateToNextPage(e,u)}onPageUp(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.pageBoundsService.getPixelOffset(),s=i.top,r=this.rowModel.getRowIndexAtPixel(s+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,r,!0):this.navigateToNextPage(e,r,!0)}navigateToNextPage(e,t,i=!1){const n=this.getViewportHeight(),s=this.pageBoundsService.getFirstRow(),r=this.pageBoundsService.getLastRow(),u=this.pageBoundsService.getPixelOffset(),c=this.rowModel.getRow(e.rowIndex),p=i?(c==null?void 0:c.rowHeight)-n-u:n-u,g=(c==null?void 0:c.rowTop)+p;let v=this.rowModel.getRowIndexAtPixel(g+u);if(v===e.rowIndex){const y=i?-1:1;t=v=e.rowIndex+y}let S;i?(S="bottom",v<s&&(v=s),t<s&&(t=s)):(S="top",v>r&&(v=r),t>r&&(t=r)),this.isRowTallerThanView(v)&&(t=v,S="top"),this.navigateTo({scrollIndex:t,scrollType:S,scrollColumn:null,focusIndex:v,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const n=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const i=t?-1:1,n=this.getViewportHeight(),s=this.pageBoundsService.getLastRow();let r=0,u=e.rowIndex;for(;u>=0&&u<=s;){const c=this.rowModel.getRow(u);if(c){const p=c.rowHeight??0;if(r+p>n)break;r+=p}u+=i}return Math.max(0,Math.min(u,s))}getViewportHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.scrollVisibleService.getScrollbarWidth();let i=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(i-=t),i}isRowTallerThanView(e){const t=this.rowModel.getRow(e);if(!t)return!1;const i=t.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:n}=i,s=i.column;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:s,focusIndex:n,focusColumn:s})}onHomeOrEndKey(e){const t=e===Q.PAGE_HOME,i=this.visibleColsService.getAllCols(),n=t?i[0]:at(i),s=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:n,focusIndex:s,focusColumn:n})}onTabKeyDown(e,t){const i=t.shiftKey,n=this.tabToNextCellCommon(e,i,t);if(n!==!1){n?t.preventDefault():n===null&&this.focusService.allowFocusForNextGridCoreContainer(i);return}if(i){const{rowIndex:s,rowPinned:r}=e.getRowPosition();(r?s===0:s===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof Yr&&e.focusCell(!0),(!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i))&&t.preventDefault()}tabToNextCell(e,t){const i=this.focusService.getFocusedCell();if(!i)return!1;let n=this.getCellByPosition(i);return!n&&(n=this.rowRenderer.getRowByPosition(i),!n||!n.isFullWidth())?!1:!!this.tabToNextCellCommon(n,e,t)}tabToNextCellCommon(e,t,i){let n=e.isEditing();if(!n&&e instanceof Yr){const u=e.getRowCtrl();u&&(n=u.isEditing())}let s;return n?this.gos.get("editType")==="fullRow"?s=this.moveToNextEditingRow(e,t,i):s=this.moveToNextEditingCell(e,t,i):s=this.moveToNextCellNotEditing(e,t),s===null?s:s||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,i=null){const n=e.getCellPosition();e.getGui().focus(),e.stopEditing();const s=this.findNextCellToFocusOn(n,t,!0);return s===!1?null:s==null?!1:(s.startEditing(null,!0,i),s.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){const n=e.getCellPosition(),s=this.findNextCellToFocusOn(n,t,!0);if(s===!1)return null;if(s==null)return!1;const r=s.getCellPosition(),u=this.isCellEditable(n),c=this.isCellEditable(r),p=r&&n.rowIndex===r.rowIndex&&n.rowPinned===r.rowPinned;return u&&e.setFocusOutOnEditor(),p||(e.getRowCtrl().stopEditing(),s.getRowCtrl().startRowEditing(void 0,void 0,i)),c?(s.setFocusInOnEditor(),s.focusCell()):s.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.visibleColsService.getAllCols();let n;e instanceof Qr?n={...e.getRowPosition(),column:t?i[0]:at(i)}:n=e.getCellPosition();const s=this.findNextCellToFocusOn(n,t,!1);if(s===!1)return null;if(s instanceof Yr)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s.getRowPosition(),t);return ge(s)}findNextCellToFocusOn(e,t,i){var s;let n=e;for(;;){e!==n&&(e=n),t||(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextTabbedCell(n,t);const r=this.gos.getCallback("tabToNextCell");if(ge(r)){const g=r({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:n||null});if(g===!0||g===null)g===null&&se("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),n=e;else{if(g===!1)return!1;n={rowIndex:g.rowIndex,column:g.column,rowPinned:g.rowPinned}}}if(!n)return null;if(n.rowIndex<0){const p=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:p+n.rowIndex,column:n.column},fromCell:!0}),null}const u=this.gos.get("editType")==="fullRow";if(i&&!u&&!this.isCellEditable(n))continue;this.ensureCellVisible(n);const c=this.getCellByPosition(n);if(!c){const p=this.rowRenderer.getRowByPosition(n);if(!p||!p.isFullWidth()||i)continue;return p}if(!c.isSuppressNavigable())return(s=this.rangeService)==null||s.setRangeToCell(n),c}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,i,n){let s=i,r=!1;for(;s&&(s===i||!this.isValidNavigateCell(s));)this.gos.get("enableRtl")?t===Q.LEFT&&(s=this.getLastCellOfColSpan(s)):t===Q.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextCellToFocus(t,s),r=ut(s);if(r&&e&&e.key===Q.UP&&(s={rowIndex:-1,rowPinned:null,column:i.column}),n){const c=this.gos.getCallback("navigateToNextCell");if(ge(c)){const g=c({key:t,previousCellPosition:i,nextCellPosition:s||null,event:e});ge(g)?s={rowPinned:g.rowPinned,rowIndex:g.rowIndex,column:g.column}:s=null}}if(!s)return;if(s.rowIndex<0){const c=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:c+s.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}const u=this.getNormalisedPosition(s);u?this.focusPosition(u):this.tryToFocusFullWidthRow(s)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const i=this.visibleColsService.getAllCols(),n=this.rowRenderer.getRowByPosition(e);if(!n||!n.isFullWidth())return!1;const s=this.focusService.getFocusedCell(),r={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?at(i):i[0])};this.focusPosition(r);const u=t??(s!=null&&this.rowPositionUtils.before(r,s));return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:r.column,isFullWidthCell:!0,fromBelow:u}),!0}focusPosition(e){var t;this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),(t=this.rangeService)==null||t.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:at(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=Ud(this.gos),i=this.rowModel.getRow(e.rowIndex);!(t&&(i==null?void 0:i.sticky))&&ut(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},zT=class extends ie{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},UT=class extends ie{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,n=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:n})},i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let n=-1,s="left";const r=this.menuService.isLegacyMenuEnabled();!r&&this.gos.get("enableRtl")&&(n=1,s="right");const u=r?void 0:4*n,c=r?void 0:4;this.showPopup(e,p=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:p,nudgeX:u,nudgeY:c,alignSide:s,keepWithinBounds:!0,position:"under",column:e})},i,t,r)}showPopup(e,t,i,n,s){const r=e?this.createBean(new wM(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,!(r!=null&&r.hasFilter())||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const u=document.createElement("div");os(u,"presentation"),u.classList.add("ag-menu"),s||u.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(u,{keydown:b=>this.trapFocusWithin(b,u)}),u.appendChild(r==null?void 0:r.getGui());let c;const p=()=>r==null?void 0:r.afterGuiDetached(),g=this.menuService.isColumnMenuAnchoringEnabled()?n??this.ctrlsService.getGridBodyCtrl().getGui():void 0,v=b=>{e.setMenuVisible(!1,"contextMenu");const M=b instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),M&&n&&xs(n)){const x=this.focusService.findTabbableParent(n);x&&x.focus()}p(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e)},S=this.localeService.getLocaleTextFunc(),y=s&&i!=="columnFilter"?S("ariaLabelColumnMenu","Column Menu"):S("ariaLabelColumnFilter","Column Filter"),E=this.popupService.addPopup({modal:!0,eChild:u,closeOnEsc:!0,closedCallback:v,positionCallback:()=>t(u),anchorToElement:g,ariaLabel:y});E&&(this.hidePopup=c=E.hideFunc),r.afterInit().then(()=>{t(u),r.afterGuiAttached({container:i,hidePopup:c})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==Q.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},jT=class extends ie{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,t){const n=iS(this.gos).ResizeObserver,s=n?new n(t):null;return s==null||s.observe(e),()=>s==null?void 0:s.disconnect()}},$T=class extends ie{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){var i;const t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){const n=((i=this.paginationService)==null?void 0:i.getCurrentPage())??0;n!==this.lastPage&&(this.lastPage=n,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&se(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);const n={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],n),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((i,n)=>i.index!==n.index?t*(n.index-i.index):n.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,n=this.createTasksP2,s=n.list,r=this.destroyTasks,u=new Date().getTime();let c=new Date().getTime()-u;const p=e<=0,g=this.ctrlsService.getGridBodyCtrl();for(;p||c<e;){if(!g.getScrollFeature().scrollGridIfNeeded()){let S;if(i.length)this.sortTaskList(t),S=i.pop().task;else if(s.length)this.sortTaskList(n),S=s.pop().task;else if(r.length)S=r.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(S)||S()}c=new Date().getTime()-u}i.length||s.length||r.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=iS(this.gos);t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}},KT=class extends ie{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=At(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode(i=>{i.id&&t.has(i.id)&&(i.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode(({expanded:t,id:i})=>{t&&i&&e.push(i)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i,n){e&&(i&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,i,n),e.setExpanded(t,void 0,n))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},ZT=class extends ie{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}getContextMenuPosition(e,t){const i=this.getRowCtrl(e),n=this.getCellGui(i,t);if(!n)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};const s=n.getBoundingClientRect();return{x:s.x+s.width/2,y:s.y+s.height/2}}showContextMenu(e){var r;const t=e.rowNode,i=e.column;let{anchorToElement:n,value:s}=e;t&&i&&s==null&&(s=this.valueService.getValueForDisplay(i,t)),n==null&&(n=this.getContextMenuAnchorElement(t,i)),(r=this.contextMenuFactory)==null||r.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,i??null,s,n)}showColumnChooser(e){var t;(t=this.columnChooserFactory)==null||t.showColumnChooser(e)}hidePopupMenu(){var e;(e=this.contextMenuFactory)==null||e.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var e;(e=this.columnChooserFactory)==null||e.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(i??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!!((t=this.filterManager)!=null&&t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&ur(e)?e.getColDef():e==null?void 0:e.getColGroupDef();return!(t!=null&&t.suppressHeaderContextMenu)&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(dr()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!!((t=this.filterManager)!=null&&t.isFilterAllowed(e))&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){var n;const t=e.getColDef(),i=(n=t.floatingFilterComponentParams)==null?void 0:n.suppressFilterButton;return i!=null&&se("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!i:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,i,n){const{positionBy:s}=t,r=t.column;if(s==="button"){const{buttonElement:u}=t;e.showMenuAfterButtonClick(r,u,i,n)}else if(s==="mouse"){const{mouseEvent:u}=t;e.showMenuAfterMouseEvent(r,u,i,n)}else r&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto"),this.animationFrameService.requestAnimationFrame(()=>{var c;const u=(c=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()))==null?void 0:c.getHeaderCtrlForColumn(r);u&&e.showMenuAfterButtonClick(r,u.getAnchorElementForMenu(n),i,!0)}))}getRowCtrl(e){const{rowIndex:t,rowPinned:i}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){if(!e||!t)return;const i=e.getCellCtrl(t);return(i==null?void 0:i.getGui())||void 0}getContextMenuAnchorElement(e,t){const i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),n=this.getRowCtrl(e);if(!n)return i;const s=this.getCellGui(n,t);return s||(n.isFullWidth()?n.getFullWidthElement():i)}},qT=class extends $r{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},YT={selector:"AG-INPUT-TEXT-AREA",component:qT},QT=class extends ha{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[YT]),this.eTextArea=Ge}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),ge(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===Q.LEFT||t===Q.UP||t===Q.RIGHT||t===Q.DOWN||e.shiftKey&&t===Q.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return!ge(e)&&!ge(this.params.value)?this.params.value:this.params.parseValue(e)}},XT=class extends ha{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){Xr(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,i=n=>{bf(this.gos,n,t.node,t.column,!0)||t.onKeyDown(n)};this.addManagedElementListeners(e,{keydown:i})}},JT=class extends ha{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[bM]),this.eSelect=Ge,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueService:i,gos:n}=this,{values:s,value:r,eventKey:u}=e;if(ut(s)){se("no values found for select cellEditor");return}this.startedByEnter=u!=null?u===Q.ENTER:!1;let c=!1;s.forEach(S=>{const y={value:S},E=i.formatValue(e.column,null,S),b=E!=null;y.text=b?E:S,t.addOption(y),c=c||r===S}),c?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:p,valueListMaxWidth:g,valueListMaxHeight:v}=e;p!=null&&t.setPickerGap(p),v!=null&&t.setPickerMaxHeight(v),g!=null&&t.setPickerMaxWidth(g),n.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},Yd=class extends ha{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=Ge}init(e){this.params=e;const{cellStartedEdit:t,eventKey:i,suppressPreventDefault:n}=e,s=this.eInput;this.cellEditorInput.init(s,e);let r,u=!0;t?(this.focusAfterAttached=!0,i===Q.BACKSPACE||i===Q.DELETE?r="":i&&i.length===1?n?u=!1:r=i:(r=this.cellEditorInput.getStartValue(),i!==Q.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,r=this.cellEditorInput.getStartValue()),u&&r!=null&&s.setStartValue(r),this.addManagedElementListeners(s.getGui(),{keydown:c=>{const{key:p}=c;(p===Q.PAGE_UP||p===Q.PAGE_DOWN)&&c.preventDefault()}})}afterGuiAttached(){var n,s;const e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;bs()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():(s=(n=this.cellEditorInput).setCaret)==null||s.call(n)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},e_=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[Zd]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return!ge(e)&&!ge(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=ge(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},by=class extends Yd{constructor(){super(new e_)}},t_=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[OM]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);const i=e.getInputElement();t.preventStepping?e.addManagedElementListeners(i,{keydown:this.preventStepping}):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===Q.UP||e.key===Q.DOWN)&&e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!ge(e)&&!ge(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}setCaret(){bs()&&this.eInput.getInputElement().focus({preventScroll:!0})}},i_=class extends Yd{constructor(){super(new t_)}},n_=class extends ol{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=bs();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){Wt(this.gos)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?kn(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,In(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?kn(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,In(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,In(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return Qi(this.getValue())??void 0}setDate(e,t){this.setValue(kn(e??null,!1),t)}},xy={selector:"AG-INPUT-DATE-FIELD",component:n_},s_=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[xy]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return!ge(e)&&!ge(this.params.value)?this.params.value:e??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return kn(e,!1)}},o_=class extends Yd{constructor(){super(new s_)}},r_=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[xy]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return!ge(e)&&!ge(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return kn(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Qi(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):kn(e??null,!1)??void 0}},l_=class extends Yd{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new r_(()=>this.dataTypeService))}},a_=class extends ha{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[wg]),this.eCheckbox=Ge}init(e){this.params=e;const t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:n=>this.setAriaLabel(n.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),i=cg(t,e),n=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${n} (${i})`)}},fu=class{constructor(e){this.cellValueChanges=e}},Qp=class extends fu{constructor(e,t,i,n){super(e),this.initialRange=t,this.finalRange=i,this.ranges=n}},u_=10,IC=class{constructor(e){this.actionStack=[],this.maxStackSize=e||u_,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},c_=class extends ie{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),n=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||n||this.isPasting||this.isRangeInAction))return;const{rowPinned:r,rowIndex:u,column:c,oldValue:p,value:g}=e,v={rowPinned:r,rowIndex:u,columnId:c.getColId(),newValue:g,oldValue:p};this.cellValueChanges.push(v)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new IC(e),this.redoStack=new IC(e),this.addListeners();const t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:i=>{i.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(this,i=>{this.gridBodyCtrl=i.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});const t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:t})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});const t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:t})}undoRedo(e,t,i,n,s){if(!e)return!1;const r=e.pop();return!r||!r.cellValueChanges?!1:(this.processAction(r,u=>u[n],s),r instanceof Qp?this.processRange(this.rangeService,r.ranges||[r[i]]):this.processCell(r.cellValueChanges),t.push(r),!0)}processAction(e,t,i){e.cellValueChanges.forEach(n=>{const{rowIndex:s,rowPinned:r,columnId:u}=n,c={rowIndex:s,rowPinned:r},p=this.rowPositionUtils.getRowNode(c);p.displayed&&p.setDataValue(u,t(n),i)})}processRange(e,t){let i;e.removeAllCellRanges(!0),t.forEach((n,s)=>{if(!n)return;const r=n.startRow,u=n.endRow;s===t.length-1&&(i={rowPinned:r.rowPinned,rowIndex:r.rowIndex,columnId:n.startColumn.getColId()},this.setLastFocusedCell(i));const c={rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:u.rowIndex,rowEndPinned:u.rowPinned,columnStart:n.startColumn,columns:n.columns};e.addCellRange(c)})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:n}=t,s={rowIndex:i,rowPinned:n},r=this.rowPositionUtils.getRowNode(s),u={rowPinned:t.rowPinned,rowIndex:r.rowIndex,columnId:t.columnId};this.setLastFocusedCell(u,this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:i,columnId:n,rowPinned:s}=e,r=this.gridBodyCtrl.getScrollFeature(),u=this.columnModel.getCol(n);if(!u)return;r.ensureIndexVisible(i),r.ensureColumnVisible(u);const c={rowIndex:i,column:u,rowPinned:s};this.focusService.setFocusedCell({...c,forceBrowserFocus:!0}),t==null||t.setRangeToCell(c)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new fu(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new fu(this.cellValueChanges);this.pushActionsToUndoStack(i)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new fu(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new Qp(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&po(this.gos)?e=new Qp(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new fu(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function d_(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function h_(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function Dy(e,t,i="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")}function My(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")}function p_(e,t,i=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}function f_(e){var t;(t=e.undoRedoService)==null||t.undo("api")}function g_(e){var t;(t=e.undoRedoService)==null||t.redo("api")}function m_(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(vu)}function v_(e){return e.rowRenderer.getEditingCells()}function C_(e,t=!1){e.rowRenderer.stopEditing(t)}function w_(e,t){const i=e.columnModel.getCol(t.colKey);if(!i){se(`no column found for ${t.colKey}`);return}const n={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};t.rowPinned==null&&My(e,t.rowIndex),Dy(e,t.colKey);const r=e.navigationService.getCellByPosition(n);if(!r)return;const{focusService:u,gos:c}=e,p=()=>{const v=Wt(c),S=r.getGui();return v!==S&&!!(S!=null&&S.contains(v))},g=c.get("stopEditingWhenCellsLoseFocus")&&p();(g||!u.isCellFocused(n))&&u.setFocusedCell({...n,forceBrowserFocus:g,preventScrollOnBrowserFocus:!0}),r.startRowOrCellEdit(t.key)}function S_(e){var t;return((t=e.undoRedoService)==null?void 0:t.getCurrentUndoStackSize())??0}function y_(e){var t;return((t=e.undoRedoService)==null?void 0:t.getCurrentRedoStackSize())??0}var R_=class extends ie{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,i=!1,n=null){var g;const s=this.createCellEditorParams(e,t,i),r=e.getColumn().getColDef(),u=this.userComponentFactory.getCellEditorDetails(r,s),c=(u==null?void 0:u.popupFromSelector)!=null?u.popupFromSelector:!!r.cellEditorPopup,p=(u==null?void 0:u.popupPositionFromSelector)!=null?u.popupPositionFromSelector:r.cellEditorPopupPosition;return e.setEditing(!0,u),e.getComp().setEditDetails(u,c,p,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(n,"cellEditingStarted")),!((g=u==null?void 0:u.params)!=null&&g.suppressPreventDefault)}stopEditing(e,t){const i=e.getComp(),{newValue:n,newValueExists:s}=this.takeValueFromCellEditor(t,i),r=e.getRowNode(),u=e.getColumn(),c=this.valueService.getValueForDisplay(u,r);let p=!1;return s&&(p=this.saveNewValue(e,c,n,r,u)),e.setEditing(!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent({...e.createEvent(null,"cellEditingStopped"),oldValue:c,newValue:n,valueChanged:p}),p}handleColDefChanged(e){const t=e.getCellEditor();if(t!=null&&t.refresh){const{eventKey:i,cellStartedEdit:n}=e.getEditCompDetails().params,s=this.createCellEditorParams(e,i,n),r=e.getColumn().getColDef(),u=this.userComponentFactory.getCellEditorDetails(r,s);t.refresh(u.params)}}setFocusOutOnEditor(e){const t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){const t=e.getComp(),i=t.getCellEditor();i!=null&&i.focusIn?i.focusIn():(e.focusCell(!0),e.onCellEditorAttached(()=>{var n,s;return(s=(n=t.getCellEditor())==null?void 0:n.focusIn)==null?void 0:s.call(n)}))}stopEditingAndFocus(e,t=!1,i=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(i,e.getCellPosition())}createPopupEditorWrapper(e){return new XT(e)}takeValueFromCellEditor(e,t){const i={newValueExists:!1};if(e)return i;const n=t.getCellEditor();return!n||n.isCancelAfterEnd&&n.isCancelAfterEnd()?i:{newValue:n.getValue(),newValueExists:!0}}saveNewValue(e,t,i,n,s){if(i===t)return!1;e.setSuppressRefreshCell(!0);const r=n.setDataValue(s,i,"edit");return e.setSuppressRefreshCell(!1),r}createCellEditorParams(e,t,i){const n=e.getColumn(),s=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(n,s),eventKey:t,column:n,colDef:n.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:s,data:s.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:r=>this.valueService.parseValue(n,s,r,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const n=e?Q.UP:Q.DOWN;this.navigationService.navigateToNextCell(null,n,t,!1)}}},P_=class extends ie{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,i=null,n=null){let s=!0;return e.getAllCellCtrls().reduce((u,c)=>{const p=c===i;return p?s=c.startEditing(t,p,n):c.startEditing(null,p,n),u?!0:c.isEditing()},!1)&&this.setEditing(e,!0),s}stopEditing(e,t=!1){const i=e.getAllCellCtrls(),n=e.isEditing();e.setStoppingRowEdit(!0);let s=!1;for(const r of i){const u=r.stopEditing(t);n&&!t&&!s&&u&&(s=!0)}s&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),n&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,n=>n.rowComp.addOrRemoveCssClass("ag-row-editing",t));const i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(i)}},rl={version:je,moduleName:"@ag-grid-community/edit-core",beans:[R_]},F_={version:je,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:f_,redoCellEditing:g_,getCellEditorInstances:m_,getEditingCells:v_,stopEditing:C_,startEditingCell:w_,getCurrentUndoSize:S_,getCurrentRedoSize:y_},dependantModules:[rl]},E_={version:je,moduleName:"@ag-grid-community/undo-redo-edit",beans:[c_],dependantModules:[rl]},b_={version:je,moduleName:"@ag-grid-community/full-row-edit",beans:[P_],dependantModules:[rl]},Ty={version:je,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:by}],dependantModules:[rl]},x_={version:je,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:by},{name:"agNumberCellEditor",classImp:i_,params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:o_},{name:"agDateStringCellEditor",classImp:l_},{name:"agCheckboxCellEditor",classImp:a_}],dependantModules:[Ty]},D_={version:je,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:JT}],dependantModules:[rl]},M_={version:je,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:QT}],dependantModules:[rl]},T_={version:je,moduleName:"@ag-grid-community/all-editors",dependantModules:[Ty,x_,D_,M_]},__={version:je,moduleName:"@ag-grid-community/editing",dependantModules:[rl,E_,b_,T_,F_]},L_=class extends ie{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const n=this.rowRenderer.getAllCellsForColumn(e);return t||n.push(i),this.addElementsToContainerAndGetWidth(n)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();e.forEach(r=>this.cloneItemIntoDummy(r,t)),i.appendChild(t);const n=t.offsetWidth;i.removeChild(t);const s=this.getAutoSizePadding();return n+s}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{const n=i.getHtmlElementForColumnHeader(e);n!=null&&(t=n)}),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const n=document.createElement("div"),s=n.classList;["ag-header-cell","ag-header-group-cell"].some(c=>i.classList.contains(c))?(s.add("ag-header","ag-header-row"),n.style.position="static"):s.add("ag-row");let u=e.parentElement;for(;u;){if(["ag-header-row","ag-row"].some(p=>u.classList.contains(p))){for(let p=0;p<u.classList.length;p++){const g=u.classList[p];g!="ag-row-position-absolute"&&s.add(g)}break}u=u.parentElement}n.appendChild(i),t.appendChild(n)}},A_=class extends ie{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=At(this.gos),this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){var t,i;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let s=(t=e.childStore)==null?void 0:t.getStoreBounds();return e.footer&&(s=(i=e.sibling.childStore)==null?void 0:i.getStoreBounds()),((s==null?void 0:s.heightPx)??0)+((s==null?void 0:s.topPx)??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let n=e.footer?e.sibling:e;for(;n.isExpandable()&&n.expanded;)if(n.master)n=n.detailNode;else if(n.childrenAfterSort){if(n.childrenAfterSort.length===0)break;n=at(n.childrenAfterSort)}return n.rowTop+n.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const t=e==="top";let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);const n=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,s=new Set,r=g=>{if(s.add(g),t){const v=this.getLastPixelOfGroup(g),S=n+i+g.rowHeight;v<S?g.stickyRowTop=i+(v-S):g.stickyRowTop=i}else{const v=this.getFirstPixelOfGroup(g),S=n-(i+g.rowHeight);v>S?g.stickyRowTop=i-(v-S):g.stickyRowTop=i}i=0,s.forEach(v=>{const S=v.stickyRowTop+v.rowHeight;i<S&&(i=S)})},u=this.areFooterRowsStickySuppressed(),c=this.gos.get("suppressGroupRowsSticky"),p=g=>{if(!g.displayed)return!1;if(g.footer){if(u===!0||u==="grand"&&g.level===-1||u==="group"&&g.level>-1)return!1;const v=g.sibling.rowIndex?g.sibling.rowIndex+1===g.rowIndex:!1;return e==="bottom"&&v?!1:!s.has(g)}return g.isExpandable()?c===!0||e==="bottom"?!1:!s.has(g)&&g.expanded:!1};for(let g=0;g<100;g++){let v=n+i;t||(v=n-i);const S=this.rowModel.getRowIndexAtPixel(v),y=this.rowModel.getRow(S);if(y==null)break;const b=this.getStickyAncestors(y).find(x=>(t?x.rowIndex<S:x.rowIndex>S)&&p(x));if(b){r(b);continue}if((t?y.rowTop<v:y.rowTop+y.rowHeight>v)&&p(y)){r(y);continue}break}return t||s.forEach(g=>{g.stickyRowTop=i-(g.stickyRowTop+g.rowHeight)}),this.refreshNodesAndContainerHeight(e,s,i)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;const t=!!this.gos.get("groupIncludeFooter")||e==="group",i=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&i?!0:i?"grand":t?"group":!1}canRowsBeSticky(){const e=Ud(this.gos),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){const t=[];let i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some(i=>i.getRowNode()===e)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const n=this.stickyTopRowCtrls[i].getRowNode();n!==e&&t.add(n)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const n=this.stickyBottomRowCtrls[i].getRowNode();n!==e&&t.add(n)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,i){const n=e==="top",s=n?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,r={},u=[];for(let y=0;y<s.length;y++){const E=s[y].getRowNode();if(!t.has(E)){r[E.id]=s[y],E.sticky=!1;continue}u.push(s[y])}const c=new Set;for(let y=0;y<u.length;y++)c.add(u[y].getRowNode());const p=[];t.forEach(y=>{c.has(y)||(y.sticky=!0,p.push(this.createRowCon(y,!1,!1)))});let g=!!p.length||u.length!==s.length;n?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),g=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),g=!0),this.destroyRowCtrls(r,!1);const v=[...u,...p];v.sort((y,E)=>E.getRowNode().rowIndex-y.getRowNode().rowIndex),n||v.reverse(),v.forEach(y=>y.setRowTop(y.getRowNode().stickyRowTop));let S=0;return n?(t.forEach(y=>{y.rowIndex<this.pageBoundsService.getFirstRow()&&(S+=y.rowHeight)}),S>this.topContainerHeight&&(S=this.topContainerHeight),this.setOffsetTop(S)):(t.forEach(y=>{y.rowIndex>this.pageBoundsService.getLastRow()&&(S+=y.rowHeight)}),S>this.bottomContainerHeight&&(S=this.bottomContainerHeight),this.setOffsetBottom(S)),g?(n?this.stickyTopRowCtrls=v:this.stickyBottomRowCtrls=v,!0):!1}ensureRowHeightsValid(){let e=!1;const t=i=>{const n=i.getRowNode();if(n.rowHeightEstimated){const s=ar(this.gos,n);n.setRowHeight(s.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},I_=class extends ie{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(r=>r.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(r=>r.updateRangeBordersIfRangeCount())},i=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},n=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>n()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{po(this.gos)?i():n()}),po(this.gos)&&i()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],()=>this.redrawRows()),Ud(this.gos)&&(At(this.gos)||Ts(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new A_(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=pi(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new k_(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=wf(this.rowCtrlsByRowIndex),t=wf(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{const i=p=>{this.getAllCellCtrls().forEach(g=>{g.getColumn()===t&&p(g)})},n=()=>{i(p=>p.onLeftChanged())},s=()=>{i(p=>p.onWidthChanged())},r=()=>{i(p=>p.onFirstRightPinnedChanged())},u=()=>{i(p=>p.onLastLeftPinnedChanged())},c=()=>{i(p=>p.onColDefChanged())};t.addEventListener("leftChanged",n),t.addEventListener("widthChanged",s),t.addEventListener("firstRightPinnedChanged",r),t.addEventListener("lastLeftPinnedChanged",u),t.addEventListener("colDefChanged",c),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",n),t.removeEventListener("widthChanged",s),t.removeEventListener("firstRightPinnedChanged",r),t.removeEventListener("lastLeftPinnedChanged",u),t.removeEventListener("colDefChanged",c)})})}onDomLayoutChanged(){const e=pi(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach(i=>{const n=i.getCellElement(e);n&&t.push(n)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){const{pinnedRowModel:i,beans:n,printLayout:s}=this,r=Object.fromEntries(e.map(c=>[c.getRowNode().id,c]));i.forEachPinnedRow(t,(c,p)=>{const g=e[p];g&&i.getPinnedRowById(g.getRowNode().id,t)===void 0&&(g.destroyFirstPass(),g.destroySecondPass()),c.id in r?(e[p]=r[c.id],delete r[c.id]):e[p]=new Qr(c,n,!1,!1,s)});const u=t==="top"?i.getPinnedTopRowCount():i.getPinnedBottomRowCount();e.length=u}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){var i;if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if((i=this.cachedRowCtrls)!=null&&i.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const n=s=>{const r=s[e.rowIndex];r&&r.getRowNode()===e&&(r.destroyFirstPass(),r.destroySecondPass(),s[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e==null||e.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e!=null&&e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;const i=Wt(this.gos),n=Pu(this.gos,i,Yr.DOM_DATA_KEY_CELL_CTRL),s=Pu(this.gos,i,Qr.DOM_DATA_KEY_ROW_CTRL);return n||s?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,n=e.animate&&ea(this.gos),s=i?this.getRowsToRecycle():null;if(i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();const r=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();r&&this.updateContainerHeights(r)}this.recycleRows(s,n),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){var n;const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),(n=this.stickyRowFeature)==null||n.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,(t=(e=this.frameworkOverrides).getLockOnRefresh)==null||t.call(e)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,(t=(e=this.frameworkOverrides).releaseLockOnRefresh)==null||t.call(e)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let n=0;n<i;n++){const s=t[n].getAllCellCtrls(),r=s.length;for(let u=0;u<r;u++)e.push(s[u])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(const n in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[n]);return i}addRenderedRowListener(e,t,i){const n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,i)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&FC()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){var s;const t=this.getCellCtrls(e.rowNodes,e.columns).map(r=>r.getCellRenderer()).filter(r=>r!=null);if((s=e.columns)!=null&&s.length)return t;const i=[],n=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(r=>{if(n&&!this.isRowInMap(r.getRowNode(),n)||!r.isFullWidth())return;const u=r.getFullWidthCellRenderers();for(let c=0;c<u.length;c++){const p=u[c];p!=null&&i.push(p)}}),[...i,...t]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{const n=i.getCellEditor();n&&t.push(n)}),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){const i=t.getCellPosition();e.push(i)}}),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(i=>{const n=i.id;switch(i.rowPinned){case"top":t.top[n]=i;break;case"bottom":t.bottom[n]=i;break;default:t.normal[n]=i;break}}),t}isRowInMap(e,t){const i=e.id;switch(e.rowPinned){case"top":return t.top[i]!=null;case"bottom":return t.bottom[i]!=null;default:return t.normal[i]!=null}}getRowCtrls(e){const t=this.mapRowNodes(e),i=this.getAllRowCtrls();return!e||!t?i:i.filter(n=>{const s=n.getRowNode();return this.isRowInMap(s,t)})}getCellCtrls(e,t){let i;ge(t)&&(i={},t.forEach(s=>{const r=this.columnModel.getCol(s);ge(r)&&(i[r.getId()]=!0)}));const n=[];return this.getRowCtrls(e).forEach(s=>{s.getAllCellCtrls().forEach(r=>{const u=r.getColumn().getId();i&&!i[u]||n.push(r)})}),n}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];ts(this.rowCtrlsByRowIndex,(i,n)=>{n.getRowNode().id==null&&e.push(i)}),this.removeRowCtrls(e);const t={};return ts(this.rowCtrlsByRowIndex,(i,n)=>{const s=n.getRowNode();t[s.id]=n}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(i=>{const n=this.rowCtrlsByRowIndex[i];n&&(n.destroyFirstPass(t),n.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let i;this.stickyRowFeature&&FC()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const n=this.firstRenderedRow,s=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let r=!1;if(this.stickyRowFeature){r=this.stickyRowFeature.checkStickyRows();const c=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();c&&this.updateContainerHeights(c)}const u=this.firstRenderedRow!==n||this.lastRenderedRow!==s;if(!(t&&!r&&!u)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!r),i!=null)){const c=this.getCellToRestoreFocusToAfterRefresh();i!=null&&c==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach(r=>i[r]=!0);const s=Object.keys(this.rowCtrlsByRowIndex).filter(r=>!i[r]);this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){const t=HM(this.firstRenderedRow,this.lastRenderedRow),i=(s,r)=>{const u=r.getRowNode().rowIndex;u!=null&&(u<this.firstRenderedRow||u>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(r)&&t.push(u)};ts(this.rowCtrlsByRowIndex,i),ts(e,i),t.sort((s,r)=>s-r);const n=[];for(let s=0;s<t.length;s++){const r=t[s],u=this.rowModel.getRow(r);u&&!u.sticky&&n.push(r)}return n}recycleRows(e,t=!1,i=!1){const n=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(n,!t),n.forEach(s=>{this.createOrUpdateRowCtrl(s,e,t,i)}),e&&(i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const i=t.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const n=i.getRowNode();return!(t!=null&&!this.isRowInMap(n,t))})}createOrUpdateRowCtrl(e,t,i,n){let s,r=this.rowCtrlsByRowIndex[e];if(r||(s=this.rowModel.getRow(e),ge(s)&&ge(t)&&t[s.id]&&s.alreadyRendered&&(r=t[s.id],t[s.id]=null)),!r)if(s||(s=this.rowModel.getRow(e)),ge(s))r=this.createRowCon(s,i,n);else return;return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=r,r}destroyRowCtrls(e,t){const i=[];ts(e,(n,s)=>{if(s){if(this.cachedRowCtrls&&s.isCacheable()){this.cachedRowCtrls.addRow(s);return}if(s.destroyFirstPass(!t),t){const r=s.instanceId;this.zombieRowCtrls[r]=s,i.push(()=>{s.destroySecondPass(),delete this.zombieRowCtrls[r]})}else s.destroySecondPass()}}),t&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),sx(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=Zr(this.gos);return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{const c=this.getRowBufferInPixels(),p=this.ctrlsService.getGridBodyCtrl(),g=this.gos.get("suppressRowVirtualisation");let v=!1,S,y;do{const _=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:k,pageLastPixel:I}=this.pageBoundsService.getCurrentPagePixelRange(),H=this.rowContainerHeightService.getDivStretchOffset(),A=p.getScrollFeature().getVScrollPosition(),z=A.top,j=A.bottom;g?(S=k+H,y=I+H):(S=Math.max(z+_-c,k)+H,y=Math.min(j+_+c,I)+H),this.firstVisibleVPixel=Math.max(z+_,k)+H,this.lastVisibleVPixel=Math.min(j+_,I)+H,v=this.ensureAllRowsInRangeHaveHeightsCalculated(S,y)}while(v);let E=this.rowModel.getRowIndexAtPixel(S),b=this.rowModel.getRowIndexAtPixel(y);const M=this.pageBoundsService.getFirstRow(),x=this.pageBoundsService.getLastRow();E<M&&(E=M),b>x&&(b=x),e=E,t=b}const i=pi(this.gos,"normal"),n=this.gos.get("suppressMaxRenderedRowRestriction"),s=Math.max(this.getRowBuffer(),500);i&&!n&&t-e>s&&(t=e+s);const r=e!==this.firstRenderedRow,u=t!==this.lastRenderedRow;(r||u)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var r,u;const i=(r=this.pinnedRowModel)==null?void 0:r.ensureRowHeightsValid(),n=(u=this.stickyRowFeature)==null?void 0:u.ensureRowHeightsValid(),s=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(s||n)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),n||s||i?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const n=e.getRowNode(),s=this.focusService.isRowNodeFocused(n),r=e.isEditing(),u=n.detail;return s||r||u?!!this.isRowPresent(n):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,i){const n=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(n)return n;const s=this.gos.get("suppressAnimationFrame"),r=i&&!s&&!this.printLayout;return new Qr(e,this.beans,t,r,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(n=>n.getRowNode().rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(n=>n.getRowNode().rowIndex===i)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const n=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!n}},k_=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],Ni(this.entriesList,i)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],Ni(this.entriesList,e)}getEntries(){return this.entriesList}},O_=class extends ie{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new kC,this.pinnedBottomRows=new kC}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return(e==="top"?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){const t=i=>{i.setRowHeight(i.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){var n,s;let e=!1,t=0;const i=r=>{if(r.rowHeightEstimated){const u=ar(this.gos,r);r.setRowTop(t),r.setRowHeight(u.height),t+=u.height,e=!0}};return(n=this.pinnedBottomRows)==null||n.forEach(i),t=0,(s=this.pinnedTopRows)==null||s.forEach(i),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(e===void 0){i.clear();return}const n=ua(this.gos),s=t==="top"?ho.ID_PREFIX_TOP_PINNED:ho.ID_PREFIX_BOTTOM_PINNED,r=i.getIds(),u=[],c=new Set;let p=0,g=-1;for(const v of e){const S=(n==null?void 0:n({data:v,level:0,rowPinned:t}))??s+this.nextId++;if(c.has(S)){se("Duplicate ID",S,"found for pinned row with data",v,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}g++,c.add(S),u.push(S);const y=i.getById(S);if(y!==void 0)y.data!==v&&y.setData(v),p+=this.setRowTopAndRowIndex(y,p,g),r.delete(S);else{const E=new ho(this.beans);E.id=S,E.data=v,E.rowPinned=t,p+=this.setRowTopAndRowIndex(E,p,g),i.push(E)}}r.forEach(v=>{var S;(S=i.getById(v))==null||S.clearRowTopAndRowIndex()}),i.removeAllById(r),i.setOrder(u)}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight(ar(this.gos,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,t){return t==="top"?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,t){return e==="top"?this.pinnedTopRows.forEach(t):this.pinnedBottomRows.forEach(t)}getTotalHeight(e){const t=e.getSize();if(t===0)return 0;const i=e.getByIndex(t-1);return i===void 0?0:i.rowTop+i.rowHeight}},kC=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){const t=this.ordering[e];return this.cache[t]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(const t of e)delete this.cache[t];this.ordering=this.ordering.filter(t=>!e.has(t))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach((t,i)=>{const n=this.cache[t];n&&e(n,i)})}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return this.ordering.length===0}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}},N_=class extends ie{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){const t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},G_=class extends ie{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Oi(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Ni(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&is("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.getAvailableLoadingCount(),t=this.blocks.filter(i=>i.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(Ts(this.gos))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(t=>{const{id:i,state:n}=t.getBlockStateJson();e[i]=n}),e}printCacheStatus(){this.gos.get("debug")&&is(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},H_={version:je,moduleName:"@ag-grid-community/row-node-block",beans:[G_]},B_=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){var e;return this.root&&((e=this.root)==null?void 0:e.key)===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){var e;return this.end&&((e=this.end)==null?void 0:e.key)===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const i=t[0].id===this.root.id,n=t.findIndex(s=>s.id===e.id);if(n>-1){const s=t.slice(0,n),r=t.slice(n+1);return this.setEndRange(e),i?{keep:s,discard:r}:{keep:r,discard:s}}else return{keep:t,discard:[]}}extend(e,t=!1){const i=this.getRoot();if(i==null){const s=this.getRange().slice();return t&&e.depthFirstSearch(r=>!r.group&&s.push(r)),s.push(e),this.setRoot(e),{keep:s,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(i,e).find(s=>{var r;return s.id===((r=this.end)==null?void 0:r.id)}))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const s=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:s}}}},V_=class extends ie{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,i,n){this.processClassRules(void 0,e.cellClassRules,t,i,n),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,n,s){if(t==null&&e==null)return;const r={},u={},c=(p,g)=>{p.split(" ").forEach(v=>{v.trim()!=""&&g(v)})};if(t){const p=Object.keys(t);for(let g=0;g<p.length;g++){const v=p[g],S=t[v];let y;typeof S=="string"?y=this.expressionService.evaluate(S,i):typeof S=="function"&&(y=S(i)),c(v,E=>{y?r[E]=!0:u[E]=!0})}}e&&s&&Object.keys(e).forEach(p=>c(p,g=>{r[g]||(u[g]=!0)})),s&&Object.keys(u).forEach(s),Object.keys(r).forEach(n)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let n;return typeof i=="function"?n=i(t):n=i,typeof n=="string"&&(n=[n]),n||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(s=>{i(s)})}},pd=(e=>(e.TAB_GUARD="ag-tab-guard",e.TAB_GUARD_TOP="ag-tab-guard-top",e.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",e))(pd||{}),_y=class extends ie{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:n,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:r,isFocusableContainer:u,focusInnerElement:c,onFocusIn:p,onFocusOut:g,shouldStopEventPropagation:v,onTabKeyDown:S,handleKeyDown:y,eFocusableElement:E}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=n,this.providedFocusInnerElement=c,this.eFocusableElement=E,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!r,this.isFocusableContainer=!!u,this.providedFocusIn=p,this.providedFocusOut=g,this.providedShouldStopEventPropagation=v,this.providedOnTabKeyDown=S,this.providedHandleKeyDown=y}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new sl(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){var p;const t=$t(this.gos),i=this.focusService.findFocusableElements(t.body,null,!0),n=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(n===-1)return;let s,r;e?(s=0,r=n):(s=n+1,r=i.length);const u=i.slice(s,r),c=this.gos.get("tabIndex");u.sort((g,v)=>{const S=parseInt(g.getAttribute("tabindex")||"0"),y=parseInt(v.getAttribute("tabindex")||"0");return y===c?1:S===c?-1:S===0?1:y===0?-1:S-y}),(p=u[e?u.length-1:0])==null||p.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},W_=class extends ie{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:n}=this,s=[t,i],r={setTabIndex:M=>{s.forEach(x=>M!=null?x.setAttribute("tabindex",M):x.removeAttribute("tabindex"))}};this.addTabGuards(t,i);const{focusTrapActive:u=!1,onFocusIn:c,onFocusOut:p,focusInnerElement:g,handleKeyDown:v,onTabKeyDown:S,shouldStopEventPropagation:y,forceFocusOutWhenTabGuardsAreEmpty:E,isFocusableContainer:b}=e;this.tabGuardCtrl=this.createManagedBean(new _y({comp:r,focusTrapActive:u,eTopGuard:t,eBottomGuard:i,eFocusableElement:n,onFocusIn:c,onFocusOut:p,focusInnerElement:g,handleKeyDown:v,onTabKeyDown:S,shouldStopEventPropagation:y,forceFocusOutWhenTabGuardsAreEmpty:E,isFocusableContainer:b}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=$t(this.gos).createElement("div"),i=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",i),os(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];gn(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){mg(t)||(t=t.getGui());const{eBottomGuard:n}=this;n?n.insertAdjacentElement("beforebegin",t):e(t,i)}},z_=class extends xt{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new W_(this)),this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=!1){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,i){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,i)}},U_=0,j_=200,$_=class extends ie{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i}=e,n=this.getPopupIndex(i);if(n!==-1){const E=this.popupList[n];E.alignedToElement=t}const s=t.getBoundingClientRect(),r=this.getParentRect(),u=this.keepXYWithinBounds(i,s.top-r.top,0),c=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${c}px`;const g=r.right-r.left-c;let v;this.gos.get("enableRtl")?(v=y(),v<0&&(v=S(),this.setAlignedStyles(i,"left")),v>g&&(v=0,this.setAlignedStyles(i,"right"))):(v=S(),v>g&&(v=y(),this.setAlignedStyles(i,"right")),v<0&&(v=0,this.setAlignedStyles(i,"left"))),i.style.left=`${v}px`,i.style.top=`${u}px`;function S(){return s.right-r.left-2}function y(){return s.left-r.left-c}}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:n,skipObserver:s}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:!0,skipObserver:s,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:s,eventSource:r,alignSide:u="left",position:c="over",column:p,rowNode:g,type:v}=e,S=r.getBoundingClientRect(),y=this.getParentRect(),E=this.getPopupIndex(t);if(E!==-1){const M=this.popupList[E];M.alignedToElement=r}const b=()=>{let M=S.left-y.left;u==="right"&&(M-=t.offsetWidth-S.width);let x;return c==="over"?(x=S.top-y.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,S,y,e.nudgeY||0)==="under"?x=S.top-y.top+S.height:x=S.top-t.offsetHeight-(n||0)*2-y.top),{x:M,y:x}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:s,updatePosition:b,postProcessCallback:()=>this.callPostProcessPopup(v,t,r,null,p,g)})}shouldRenderUnderOrAbove(e,t,i,n){const s=i.bottom-t.bottom,r=t.top-i.top,u=e.offsetHeight+n;return s>u?"under":r>u||r>s?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const n=this.popupList[i],{alignedToElement:s}=n;!s||(["right","left","over","above","under"].forEach(u=>{s.classList.remove(`ag-has-popup-positioned-${u}`),e.classList.remove(`ag-popup-positioned-${u}`)}),!t)||(s.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,i,n,s,r){const u=this.gos.getCallback("postProcessPopup");u&&u({column:s,rowNode:r,ePopup:t,type:e,eventSource:i,mouseEvent:n})}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:n,nudgeY:s,skipObserver:r,updatePosition:u}=e,c={width:0,height:0},p=(g=!1)=>{let{x:v,y:S}=u();g&&t.clientWidth===c.width&&t.clientHeight===c.height||(c.width=t.clientWidth,c.height=t.clientHeight,n&&(v+=n),s&&(S+=s),i&&(v=this.keepXYWithinBounds(t,v,1),S=this.keepXYWithinBounds(t,S,0)),t.style.left=`${v}px`,t.style.top=`${S}px`,e.postProcessCallback&&e.postProcessCallback())};if(p(),!r){const g=this.resizeObserverService.observeResize(t,()=>p(!0));setTimeout(()=>g(),j_)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=$t(this.gos);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),_S(t)}keepXYWithinBounds(e,t,i){const n=i===0,s=n?"clientHeight":"clientWidth",r=n?"top":"left",u=n?"height":"width",c=n?"scrollTop":"scrollLeft",p=$t(this.gos),g=p.documentElement,v=this.getPopupParent(),S=e.getBoundingClientRect(),y=v.getBoundingClientRect(),E=p.documentElement.getBoundingClientRect(),b=v===p.body,M=Math.ceil(S[u]);let _=b?(n?TS:Md)(g)+g[c]:v[s];b&&(_-=Math.abs(E[r]-y[r]));const k=_-M;return Math.min(Math.max(t,0),Math.abs(k))}addPopup(e){const t=$t(this.gos),{eChild:i,ariaLabel:n,alwaysOnTop:s,positionCallback:r,anchorToElement:u}=e;if(!t)return se("could not find the document, document is empty"),{hideFunc:()=>{}};const c=this.getPopupIndex(i);if(c!==-1)return{hideFunc:this.popupList[c].hideFunc};this.initialisePopupPosition(i);const p=this.createPopupWrapper(i,n,!!s),g=this.addEventListenersToPopup({...e,wrapperEl:p});return r&&r(),this.addPopupToPopupList(i,p,g,u),{hideFunc:g}}initialisePopupPosition(e){const i=this.getPopupParent().getBoundingClientRect();ge(e.style.top)||(e.style.top=`${i.top*-1}px`),ge(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i){const n=this.getPopupParent(),s=document.createElement("div");return this.environment.applyThemeClasses(s),s.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||os(e,"dialog"),oa(e,t),s.appendChild(e),n.appendChild(s),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),s}handleThemeChange(e){if(e.themeChanged)for(const t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){const t=$t(this.gos),i=this.getPopupParent(),{wrapperEl:n,eChild:s,closedCallback:r,afterGuiAttached:u,closeOnEsc:c,modal:p}=e;let g=!1;const v=b=>{if(!n.contains(Wt(this.gos)))return;b.key===Q.ESCAPE&&!co(b)&&E({keyboardEvent:b})},S=b=>E({mouseEvent:b}),y=b=>E({touchEvent:b}),E=(b={})=>{const{mouseEvent:M,touchEvent:x,keyboardEvent:_,forceHide:k}=b;!k&&(this.isEventFromCurrentPopup({mouseEvent:M,touchEvent:x},s)||g)||(g=!0,i.removeChild(n),t.removeEventListener("keydown",v),t.removeEventListener("mousedown",S),t.removeEventListener("touchstart",y),t.removeEventListener("contextmenu",S),this.eventService.removeEventListener("dragStarted",S),r&&r(M||x||_),this.removePopupFromPopupList(s))};return u&&u({hidePopup:E}),window.setTimeout(()=>{c&&t.addEventListener("keydown",v),p&&(t.addEventListener("mousedown",S),this.eventService.addEventListener("dragStarted",S),t.addEventListener("touchstart",y),t.addEventListener("contextmenu",S))},0),E}addPopupToPopupList(e,t,i,n){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:U_++,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const n=this.popupList[i];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then(r=>r&&r()),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;const s=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=s,n.isAnchored=!0,s}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:n,ePopup:s}=e,r=n.getBoundingClientRect(),u=S=>parseInt(S.substring(0,S.length-1),10),c=(S,y)=>{const E=i[S]-r[S],b=u(s.style[S]);return{initialDiff:E,lastDiff:E,initial:b,last:b,direction:y}},p=c("top",0),g=c("left",1),v=this.getFrameworkOverrides();return new jt(S=>{v.wrapIncoming(()=>{v.setInterval(()=>{const y=t.getBoundingClientRect(),E=n.getBoundingClientRect();if(E.top==0&&E.left==0&&E.height==0&&E.width==0){e.hidePopup();return}const M=(x,_)=>{const k=u(s.style[_]);x.last!==k&&(x.initial=k,x.last=k);const I=y[_]-E[_];if(I!=x.lastDiff){const H=this.keepXYWithinBounds(s,x.initial+x.initialDiff-I,x.direction);s.style[_]=`${H}px`,x.last=H}x.lastDiff=I};M(p,"top"),M(g,"left")},200).then(y=>{S(()=>{y!=null&&window.clearInterval(y)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:n}=e,s=i||n;if(!s)return!1;const r=this.getPopupIndex(t);if(r===-1)return!1;for(let u=r;u<this.popupList.length;u++){const c=this.popupList[u];if(Px(c.element,s))return!0}return this.isElementWithinCustomPopup(s.target)}isElementWithinCustomPopup(e){const t=$t(this.gos);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=i.length,s=this.getWrapper(e);if(!s||n<=1||!t.contains(e))return;const r=[],u=[];for(const y of i)y!==s&&(y.classList.contains("ag-always-on-top")?u.push(y):r.push(y));const c=[],p=u.length,S=s.classList.contains("ag-always-on-top")||!p?[...r,...u,s]:[...r,s,...u];for(let y=0;y<=n;y++){const E=S[y];if(i[y]===S[y]||E===s)continue;E.querySelectorAll("div").forEach(M=>{M.scrollTop!==0&&c.push([M,M.scrollTop])}),y===0?t.insertAdjacentElement("afterbegin",E):S[y-1].insertAdjacentElement("afterend",E)}for(;c.length;){const y=c.pop();y[0].scrollTop=y[1]}}},K_=["touchstart","touchend","touchmove","touchcancel"],Ly=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new jt(i=>{i(window.setInterval(e,t))})}addEventListener(e,t,i,n){const s=qr(K_,t);e.addEventListener(t,i,{capture:!!n,passive:s})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},Z_=class extends ie{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===Q.UP,n=e===Q.DOWN,s=e===Q.LEFT;let r,u;if(i||n)u=i?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),r=t.column;else{const c=this.visibleColsService.getAllCols(),p=this.gos.get("enableRtl");u=t.rowIndex,r=s!==p?c[0]:at(c)}return{rowIndex:u,rowPinned:null,column:r}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,n=!1;for(;!n;){switch(e){case Q.UP:i=this.getCellAbove(i);break;case Q.DOWN:i=this.getCellBelow(i);break;case Q.RIGHT:this.gos.get("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case Q.LEFT:this.gos.get("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,se("unknown key for navigation ",e);break}i?n=this.isCellGoodToFocusOn(i):n=!0}return i}isCellGoodToFocusOn(e){const t=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex);break}return i?!t.isSuppressNavigable(i):!1}getCellToLeft(e){if(!e)return null;const t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;let n=!1;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else i&&(n=!0);const s=this.rowModel.getRow(e.rowIndex),r=n?void 0:this.getNextStickyPosition(s);return r||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!Ud(this.gos)||!e||!e.sticky)return;const i=this.rowRenderer.getStickyTopRowCtrls().some(c=>c.getRowNode().rowIndex===e.rowIndex);let n=[];i?n=[...this.rowRenderer.getStickyTopRowCtrls()].sort((c,p)=>c.getRowNode().rowIndex-p.getRowNode().rowIndex):n=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((c,p)=>p.getRowNode().rowIndex-c.getRowNode().rowIndex);const s=t?-1:1,r=n.findIndex(c=>c.getRowNode().rowIndex===e.rowIndex),u=n[r+s];if(u)return{rowIndex:u.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowCount()-1<=i:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowCount()-1<=i:this.pageBoundsService.getLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned,n=i?t===0:t===this.pageBoundsService.getFirstRow();let s=!1;if(n)return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;i&&(s=!0);const r=this.rowModel.getRow(e.rowIndex),u=s?void 0:this.getNextStickyPosition(r,!0);return u||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){var r;const t=this.visibleColsService.getAllCols();let i=e.rowIndex,n=e.rowPinned,s=this.visibleColsService.getColAfter(e.column);if(!s){s=t[0];const u=this.getRowBelow(e);if(ut(u)||!u.rowPinned&&!(((r=this.paginationService)==null?void 0:r.isRowInPage(u))??!0))return null;i=u?u.rowIndex:null,n=u?u.rowPinned:null}return{rowIndex:i,column:s,rowPinned:n}}getNextTabbedCellBackwards(e){var r;const t=this.visibleColsService.getAllCols();let i=e.rowIndex,n=e.rowPinned,s=this.visibleColsService.getColBefore(e.column);if(!s){s=at(t);const u=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(ut(u)||!u.rowPinned&&!(((r=this.paginationService)==null?void 0:r.isRowInPage(u))??!0))return null;i=u?u.rowIndex:null,n=u?u.rowPinned:null}return{rowIndex:i,column:s,rowPinned:n}}},Li=(e,t)=>{for(const i in t)t[i]=e;return t},OC={...Li("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...Li("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...Li("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0}),...Li("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...Li("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...Li("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...Li("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...Li("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...Li("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...Li("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0}),...Li("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...Li("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...Li("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...Li("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...Li("@ag-grid-enterprise/status-bar",{getStatusPanel:0})},Xp={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},q_=(e,t)=>e.eventService.dispatchEvent(t),Ay=class{};Reflect.defineProperty(Ay,"name",{value:"GridApi"});var Y_=class extends ie{constructor(){super(),this.beanName="apiFunctionService",this.api=new Ay,this.fns={...Xp,dispatchEvent:q_},this.beans=null,this.preDestroyLink="";const{api:e}=this;for(const t in OC)e[t]=this.makeApi(t)[t]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){var s;const{fns:i,beans:n}=this;i!==Xp&&(i[e]=((s=n==null?void 0:n.validationService)==null?void 0:s.validateApiFunction(e,t))??t)}makeApi(e){return{[e]:(...t)=>{const{beans:i,fns:{[e]:n}}=this;return n?n(i,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:n}=this;if(!t)se(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${n}`);else{const s=OC[e];i.assertModuleRegistered(s,`api.${e}`)&&se(`API function '${e}' not registered to module '${s}'`)}}destroy(){super.destroy(),this.fns=Xp,this.beans=null}};function Q_(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var X_=class extends ie{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,i){const n=[],s={};return e.forEach(r=>{const u=this.createDefFromColumn(r,t,i);let c=!0,p=u,g=r.getOriginalParent(),v=null;for(;g;){let S=null;if(g.isPadding()){g=g.getOriginalParent();continue}const y=s[g.getGroupId()];if(y){y.children.push(p),c=!1;break}if(S=this.createDefFromGroup(g),S&&(S.children=[p],s[S.groupId]=S,p=S,g=g.getOriginalParent()),g!=null&&v===g){c=!1;break}v=g}c&&n.push(p)}),n}createDefFromGroup(e){const t=Cf(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const n=Cf(e.getColDef());return n.colId=e.getColId(),n.width=e.getActualWidth(),n.rowGroup=e.isRowGroupActive(),n.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,n.pivot=e.isPivotActive(),n.pivotIndex=e.isPivotActive()?i.indexOf(e):null,n.aggFunc=e.isValueActive()?e.getAggFunc():null,n.hide=e.isVisible()?void 0:!0,n.pinned=e.isPinned()?e.getPinned():null,n.sort=e.getSort()?e.getSort():null,n.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,n}},J_=class extends ie{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,t){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t})}genericColumnEvent(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t.length===1?t[0]:null,source:i})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){const{movedColumns:t,source:i,toIndex:n,finished:s}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:n,finished:s,source:i})}columnPinned(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,n=this.getCommonValue(e,s=>s.getPinned());this.eventService.dispatchEvent({type:"columnPinned",pinned:n??null,columns:e,column:i,source:t})}columnVisible(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,n=this.getCommonValue(e,s=>s.isVisible());this.eventService.dispatchEvent({type:"columnVisible",visible:n,columns:e,column:i,source:t})}getCommonValue(e,t){if(!e||e.length==0)return;const i=t(e[0]);for(let n=1;n<e.length;n++)if(i!==t(e[n]))return;return i}columnChanged(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t&&t.length==1?t[0]:null,source:i})}columnResized(e,t,i,n=null){e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:n,finished:t,source:i})}},eL=class extends ie{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){const e=this.columnModel.getColDefCols();if(ut(e)||!this.columnModel.isAlive())return[];const i=this.columnModel.getAllCols().map(n=>this.createStateItemFromColumn(n));return this.orderColumnStateList(i),i}createStateItemFromColumn(e){const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns(),n=e.isRowGroupActive()?t.indexOf(e):null,s=e.isPivotActive()?i.indexOf(e):null,r=e.isValueActive()?e.getAggFunc():null,u=e.getSort()!=null?e.getSort():null,c=e.getSortIndex()!=null?e.getSortIndex():null,p=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:u,sortIndex:c,aggFunc:r,rowGroup:e.isRowGroupActive(),rowGroupIndex:n,pivot:e.isPivotActive(),pivotIndex:s,flex:p}}orderColumnStateList(e){const t=this.columnModel.getCols(),i=new Map(t.map((n,s)=>[n.getColId(),s]));e.sort((n,s)=>{const r=i.has(n.colId)?i.get(n.colId):-1,u=i.has(s.colId)?i.get(s.colId):-1;return r-u})}},tL=class extends ie{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){const e=[],t=this.columnModel.getColTree();return fo(null,t,i=>{Ii(i)&&e.push({groupId:i.getGroupId(),open:i.isExpanded()})}),e}resetColumnGroupState(e){const t=this.columnModel.getColDefColTree();if(!t)return;const i=[];fo(null,t,n=>{if(Ii(n)){const s=n.getColGroupDef(),r={groupId:n.getGroupId(),open:s?s.openByDefault:void 0};i.push(r)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();const n=[];e.forEach(s=>{const r=s.groupId,u=s.open,c=this.columnModel.getProvidedColGroup(r);c&&c.isExpanded()!==u&&(c.setExpanded(u),n.push(c))}),this.visibleColsService.refresh(t,!0),n.length&&this.eventDispatcher.groupOpened(n),this.columnAnimationService.finish()}},iL=class extends ie{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){const n=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!n)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){const r=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=r-this.scrollPosition-this.scrollWidth,this.viewportRight=r-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t];break}return i||[]}extractViewportColumns(){const e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||this.isAnyParentAutoHeaderHeight(e)?!0:this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),n=this.viewportLeft-200,s=this.viewportRight+200,r=t<n&&i<n,u=t>s&&i>s;return!r&&!u}getViewportColumns(){const e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;const t=s=>{const r=s.getLeft();return ge(r)&&r>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),n=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,n,i,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};const e={},t=this.visibleColsService.getLeftCols(),i=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(i).forEach(r=>e[r.getId()]=!0);const s=(r,u,c)=>{let p=!1;for(let g=0;g<r.length;g++){const v=r[g];let S=!1;if(ur(v))S=e[v.getId()]===!0;else{const E=v.getDisplayedChildren();E&&(S=s(E,u,c+1))}S&&(p=!0,u[c]||(u[c]=[]),u[c].push(v))}return p};s(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),s(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),s(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){const e=n=>`${n.getId()}-${n.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),i=this.colsWithinViewportHash!==t;return i&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),i}},nL=class extends ie{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(n){const s=e(n),r=typeof s;if(r==="string"||r==="number"||r==="boolean"){this.eGui=Mu("<span>"+s+"</span>");return}if(s==null){this.eGui=Mu("<span></span>");return}this.eGui=s}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},sL=class extends ie{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},oL=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],NC=Object.fromEntries(oL.map((e,t)=>[e,t]));function rL(e,t){const i=(e.beanName?NC[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,n=(t.beanName?NC[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return i-n}function lL(e,t){return(e==null?void 0:e.beanName)==="gridDestroyService"?-1:0}var aL=class extends ie{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){const i=this.registry[e];if(i!=null)return new i(...t)}},uL=class extends ie{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){var t,i;this.runReadyCallbacksAsync=((i=(t=e.frameworkOverrides).runWhenReadyAsync)==null?void 0:i.call(t))??!1}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every(e=>(e==null?void 0:e.isAlive())??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const i=this.readyCallbacks.indexOf(t);i>=0&&this.readyCallbacks.splice(i,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},cL=class extends ie{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){const{rowIndex:t,rowPinned:i,column:n}=e;return this.createIdFromValues({rowIndex:t,column:n,rowPinned:i})}createIdFromValues(e){const{rowIndex:t,rowPinned:i,column:n}=e;return`${t}.${i??"null"}.${n.getId()}`}equals(e,t){const i=e.column===t.column,n=e.rowPinned===t.rowPinned,s=e.rowIndex===t.rowIndex;return i&&n&&s}},dL=class extends ie{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){At(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);const i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(n=>this.eventService.dispatchEvent(n)),this.events=[]};t?i():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}},hL=class extends ie{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),n=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):n&&(t="top",e=n-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(ge(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},GC={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},HC={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},BC={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},pL=class extends ie{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addDestroyFunc(()=>this.stopUsingTheme()),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(GC),this.getSizeEl(HC),this.getSizeEl(BC)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(GC)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(HC)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(BC)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){var e;return((e=this.gridTheme)==null?void 0:e.getCssClass())||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){const t=this.getThemeClasses();for(const i of Array.from(e.classList))i.startsWith("ag-theme-")&&!t.includes(i)&&e.classList.remove(i);e.classList.add(...t)}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const i=this.measureSizeEl(e);return i==="detached"||i==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const i=t.offsetWidth;return i===VC?"no-styles":(this.sizesMeasured=!0,i)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let i=this.eMeasurementContainer;i||(i=this.eMeasurementContainer=document.createElement("div"),i.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(i),this.eGridDiv.appendChild(i)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${VC}px)`,i.appendChild(t),this.sizeEls.set(e,t);let n=this.measureSizeEl(e);n==="no-styles"&&se(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);const s=this.resizeObserverService.observeResize(t,()=>{const r=this.measureSizeEl(e);r==="detached"||r==="no-styles"||(this.lastKnownValues.set(e,r),r!==n&&(n=r,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>s()),t}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){const e=new MutationObserver(()=>{const i=this.readAncestorThemeClasses();fL(i,this.ancestorThemeClasses)||(this.ancestorThemeClasses=i,this.fireGridStylesChangedEvent("themeChanged"))});let t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement;this.addDestroyFunc(()=>e.disconnect())}readAncestorThemeClasses(){let e=this.eGridDiv;const t=[];for(;e;){const i=Array.from(e.classList).filter(n=>n.startsWith("ag-theme-"));for(const n of i)t.includes(n)||t.unshift(n);e=e.parentElement}return Object.freeze(t)}handleThemeGridOptionChange(){const{gos:e,eMeasurementContainer:t,gridTheme:i}=this,n=e.get("theme")||null;n!==i&&(i==null||i.stopUse(),this.gridTheme=n,n==null||n.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),t&&this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){var e;(e=this.gridTheme)==null||e.stopUse(),this.gridTheme=null}},fL=(e,t)=>e.length===t.length&&e.findIndex((i,n)=>e[n]!==t[n])===-1,VC=15538,gL=class extends ie{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new aa}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){const e=Pd(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},Lg=class Tn extends ie{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(t){this.eGridDiv=t.eGridDiv,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.headerNavigationService=t.headerNavigationService,this.headerPositionUtils=t.headerPositionUtils,this.rowRenderer=t.rowRenderer,this.rowPositionUtils=t.rowPositionUtils,this.cellPositionUtils=t.cellPositionUtils,this.navigationService=t.navigationService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.rangeService=t.rangeService,this.advancedFilterService=t.advancedFilterService,this.overlayService=t.overlayService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Tn.toggleKeyboardMode),t.addEventListener("mousedown",Tn.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.removeEventListener("keydown",Tn.toggleKeyboardMode),t.removeEventListener("mousedown",Tn.toggleKeyboardMode))}static toggleKeyboardMode(t){const i=Tn.keyboardModeActive,n=t.type==="keydown";n&&(t.ctrlKey||t.metaKey||t.altKey)||i!==n&&(Tn.keyboardModeActive=n)}postConstruct(){const t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,i=>{this.gridCtrl=i.gridCtrl})}registerKeyboardFocusEvents(){const t=$t(this.gos);Tn.addKeyboardModeEvents(t),Tn.instanceCount++,this.addDestroyFunc(()=>{Tn.instanceCount--,Tn.removeKeyboardModeEvents(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const t=this.focusedCellPosition.column,i=this.columnModel.getCol(t.getId());t!==i&&this.clearFocusedCell()}isKeyboardMode(){return Tn.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(Wt(this.gos),Qr.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(Wt(this.gos),qd.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,i){let n=t;for(;n;){if(Pu(this.gos,n,i))return!1;n=n.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(t,i){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(t),i())})}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(t){const{rowIndex:i,rowPinned:n,column:s}=t,r={rowIndex:i,rowPinned:n,column:s,isFullWidthCell:!1},u=this.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:n});return u&&(r.isFullWidthCell=u.isFullWidth()),r}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const t=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent({type:"cellFocusCleared",...t})}setFocusedCell(t){const{column:i,rowIndex:n,rowPinned:s,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:u=!1}=t,c=this.columnModel.getCol(i);if(!c){this.focusedCellPosition=null;return}this.focusedCellPosition={rowIndex:n,rowPinned:uo(s),column:c},this.eventService.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCellPosition),forceBrowserFocus:r,preventScrollOnBrowserFocus:u})}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;const i=t.getColumnGroupChild(),n=t.getRowIndex(),s=t.getPinned(),{column:r,headerRowIndex:u}=this.focusedHeaderPosition;return i===r&&n===u&&s==r.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,i){this.focusedHeaderPosition={headerRowIndex:t,column:i}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(t){var g;if(this.isHeaderFocusSuppressed())return!1;const{direction:i,fromTab:n,allowUserOverride:s,event:r,fromCell:u,rowWithoutSpanValue:c}=t;let{headerPosition:p}=t;if(u&&((g=this.filterManager)!=null&&g.isAdvancedFilterHeaderActive()))return this.focusAdvancedFilter(p);if(s){const v=this.getFocusedHeader(),S=this.headerNavigationService.getHeaderRowCount();if(n){const y=this.gos.getCallback("tabToNextHeader");y&&(p=this.getHeaderPositionFromUserFunc({userFunc:y,direction:i,currentPosition:v,headerPosition:p,headerRowCount:S}))}else{const y=this.gos.getCallback("navigateToNextHeader");if(y&&r){const E={key:r.key,previousHeaderPosition:v,nextHeaderPosition:p,headerRowCount:S,event:r};p=y(E)}}}return p?this.focusProvidedHeaderPosition({headerPosition:p,direction:i,event:r,fromCell:u,rowWithoutSpanValue:c}):!1}focusHeaderPositionFromUserFunc(t){if(this.isHeaderFocusSuppressed())return!1;const{userFunc:i,headerPosition:n,direction:s,event:r}=t,u=this.getFocusedHeader(),c=this.headerNavigationService.getHeaderRowCount(),p=this.getHeaderPositionFromUserFunc({userFunc:i,direction:s,currentPosition:u,headerPosition:n,headerRowCount:c});return!!p&&this.focusProvidedHeaderPosition({headerPosition:p,direction:s,event:r})}getHeaderPositionFromUserFunc(t){const{userFunc:i,direction:n,currentPosition:s,headerPosition:r,headerRowCount:u}=t,p=i({backwards:n==="Before",previousHeaderPosition:s,nextHeaderPosition:r,headerRowCount:u});return p===!0||p===null?(p===null&&se("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),s):p===!1?null:p}focusProvidedHeaderPosition(t){var S;const{headerPosition:i,direction:n,fromCell:s,rowWithoutSpanValue:r,event:u}=t,{column:c,headerRowIndex:p}=i;if(p===-1)return(S=this.filterManager)!=null&&S.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(i):this.focusGridView(c);this.headerNavigationService.scrollToColumn(c,n);const g=this.ctrlsService.getHeaderRowContainerCtrl(c.getPinned()),v=(g==null?void 0:g.focusHeader(i.headerRowIndex,c,u))||!1;return v&&(r!=null||s)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(r??-1),v}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let t=this.visibleColsService.getAllCols()[0];if(!t)return!1;t.getParent()&&(t=this.visibleColsService.getColGroupAtLevel(t,0));const i=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:i,rowWithoutSpanValue:0})}focusLastHeader(t){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;const i=this.headerNavigationService.getHeaderRowCount()-1,n=at(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:i,column:n},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){var i;return(i=this.filterManager)!=null&&i.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,i){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===uo(i)}findFocusableElements(t,i,n=!1){const s=fD;let r=MS;i&&(r+=", "+i),n&&(r+=', [tabindex="-1"]');const u=Array.prototype.slice.apply(t.querySelectorAll(s)).filter(g=>xs(g)),c=Array.prototype.slice.apply(t.querySelectorAll(r));return c.length?((g,v)=>g.filter(S=>v.indexOf(S)===-1))(u,c):u}focusInto(t,i=!1,n=!1){const s=this.findFocusableElements(t,null,n),r=i?at(s):s[0];return r?(r.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,i){if(!i)return null;const n=this.findFocusableElements(t),s=n.indexOf(i);if(s===-1)return null;let r=-1;for(let u=s-1;u>=0;u--)if(n[u].classList.contains("ag-tab-guard-top")){r=u;break}return r<=0?null:n[r-1]}findNextFocusableElement(t=this.eGridDiv,i,n){const s=this.findFocusableElements(t,i?':not([tabindex="-1"])':null),r=Wt(this.gos);let u;i?u=s.findIndex(p=>p.contains(r)):u=s.indexOf(r);const c=u+(n?-1:1);return c<0||c>=s.length?null:s[c]}isTargetUnderManagedComponent(t,i){if(!i)return!1;const n=t.querySelectorAll(`.${sl.FOCUS_MANAGED_CLASS}`);if(!n.length)return!1;for(let s=0;s<n.length;s++)if(n[s].contains(i))return!0;return!1}findTabbableParent(t,i=5){let n=0;for(;t&&Pf(t)===null&&++n<=i;)t=t.parentElement;return Pf(t)===null?null:t}focusOverlay(t){var n;const i=this.overlayService.isVisible()&&((n=this.overlayService.getOverlayWrapper())==null?void 0:n.getGui());return!!i&&this.focusInto(i,t)}focusGridViewFailed(t,i){return i&&this.focusOverlay(t)||t&&this.focusLastHeader()}focusGridView(t,i=!1,n=!0){var r,u;if(this.overlayService.isExclusive())return n&&this.focusOverlay(i);if(this.isCellFocusSuppressed())return i&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():n&&this.focusOverlay(i)?!0:this.focusNextGridCoreContainer(!1);const s=i?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(s){const{rowIndex:c,rowPinned:p}=s;if(t??(t=(r=this.getFocusedHeader())==null?void 0:r.column),t&&c!==void 0&&c!==null){if(this.navigationService.ensureCellVisible({rowIndex:c,column:t,rowPinned:p}),i){const g=this.rowRenderer.getRowByPosition(s);if(g!=null&&g.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(s,i))return!0}return this.setFocusedCell({rowIndex:c,column:t,rowPinned:uo(p),forceBrowserFocus:!0}),(u=this.rangeService)==null||u.setRangeToCell({rowIndex:c,rowPinned:p,column:t}),!0}}return!!(n&&this.focusOverlay(i)||i&&this.focusLastHeader())}isGridFocused(){const t=Wt(this.gos);return!!t&&this.eGridDiv.contains(t)}focusNextGridCoreContainer(t,i=!1){return!i&&this.gridCtrl.focusNextInnerContainer(t)?!0:((i||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){var i;return this.advancedFilterFocusColumn=t==null?void 0:t.column,((i=this.advancedFilterService)==null?void 0:i.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(t,i){var s;const n=(i?void 0:this.advancedFilterFocusColumn)??((s=this.visibleColsService.getAllCols())==null?void 0:s[0]);return t?this.focusHeaderPosition({headerPosition:{column:n,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(n)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(t){this.gridCtrl.addFocusableContainer(t)}removeFocusableContainer(t){this.gridCtrl.removeFocusableContainer(t)}focusGridInnerElement(t){return this.gridCtrl.focusInnerElement(t)}allowFocusForNextGridCoreContainer(t){this.gridCtrl.allowFocusForNextCoreContainer(t)}};Lg.keyboardModeActive=!1;Lg.instanceCount=0;var mL=Lg,vL=class extends ie{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=pi(this.gos,"print"),t=e?0:this.visibleColsService.getColsLeftWidth(),i=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},CL=class extends ie{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDropService:n,mouseEventService:s,ctrlsService:r,resizeObserverService:u}=this.beans,c={getContainer:()=>this.eGui,isInterestedIn:g=>g===1||g===0,getIconName:()=>"notAllowed"};n.addDropTarget(c),this.addDestroyFunc(()=>n.removeDropTarget(c)),s.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new _g(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});const p=u.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>p()),r.register("gridCtrl",this)}isDetailGrid(){var t;const e=this.focusService.findTabbableParent(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}getOptionalSelectors(){var t,i,n,s,r;const e=this.beans;return{paginationSelector:(t=e.paginationService)==null?void 0:t.getPaginationSelector(),gridHeaderDropZonesSelector:(i=e.columnDropZonesService)==null?void 0:i.getDropZoneSelector(),sideBarSelector:(n=e.sideBarService)==null?void 0:n.getSideBarSelector(),statusBarSelector:(s=e.statusBarService)==null?void 0:s.getStatusPanelSelector(),watermarkSelector:(r=e.licenseManager)==null?void 0:r.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:n}=this.getNextFocusableIndex(t,e);if(n<0||n>=t.length)return!1;if(n===0){if(i>0){const s=this.visibleColsService.getAllCols(),r=at(s);if(this.focusService.focusGridView(r,!0))return!0}return!1}return this.focusContainer(t[n],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),n=this.visibleColsService.getAllCols();if(e){if(i.length>1)return this.focusContainer(at(i),!0);const s=at(n);if(this.focusService.focusGridView(s,!0))return!0}if(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(n[0]))return!0;for(let s=1;s<i.length;s++)if(this.focusService.focusInto(i[s].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){var r;const t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:n}=this.getNextFocusableIndex(t,e);if(n===-1||i<0||i>=t.length)return;const s=t[i];(r=s.setAllowFocus)==null||r.call(s,!0),setTimeout(()=>{var u;(u=s.setAllowFocus)==null||u.call(s,!1)})}getNextFocusableIndex(e,t){const i=Wt(this.gos),n=e.findIndex(r=>r.getGui().contains(i)),s=n+(t?-1:1);return{indexWithFocus:n,nextIndex:s}}focusContainer(e,t){var n,s;(n=e.setAllowFocus)==null||n.call(e,!0);const i=this.focusService.focusInto(e.getGui(),t);return(s=e.setAllowFocus)==null||s.call(e,!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){const e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},wL=class extends ie{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";typeof e=="function"&&(e=e());const i=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(s=>{var u;if(!s){Ct("alignedGrids contains an undefined option."),t||Ct(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),Ct(i());return}if(this.isGridApi(s))return s;const r=s;return"current"in r?(u=r.current)==null?void 0:u.api:(r.api||Ct(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${i()}`),r.api)}).filter(s=>!!s&&!s.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach(n=>{i.push(t(n))}):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":se("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){const{columnModel:t}=this;e.columnGroups.forEach(i=>{let n=null;i&&(n=t.getProvidedColGroup(i.getGroupId())),!(i&&!n)&&t.setColumnGroupOpened(n,i.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){var g;const t=e.column;let i=null;if(t&&(i=this.columnModel.getColDefCol(t.getColId())),t&&!i)return;const n=this.getMasterColumns(e),{columnApplyStateService:s,columnSizeService:r,ctrlsService:u}=this;switch(e.type){case"columnMoved":{const S=e.api.getColumnState().map(y=>({colId:y.colId}));s.applyColumnState({state:S,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const S=e.api.getColumnState().map(y=>({colId:y.colId,hide:y.hide}));s.applyColumnState({state:S},"alignedGridChanged")}break;case"columnPinned":{const S=e.api.getColumnState().map(y=>({colId:y.colId,pinned:y.pinned}));s.applyColumnState({state:S},"alignedGridChanged")}break;case"columnResized":{const v=e,S={};n.forEach(y=>{S[y.getId()]={key:y.getColId(),newWidth:y.getActualWidth()}}),(g=v.flexColumns)==null||g.forEach(y=>{S[y.getId()]&&delete S[y.getId()]}),r.setColumnWidths(Object.values(S),!1,v.finished,"alignedGridChanged");break}}const p=u.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(v=>{v.setGridOption("alwaysShowVerticalScroll",p)})}},SL={version:je,moduleName:"@ag-grid-community/aligned-grid",beans:[wL]};function yL(e,t){const i=e.columnModel.getColDefCol(t);return i?i.getColDef():null}function RL(e){return e.columnModel.getColumnDefs()}function PL(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function FL(e,t,i){e.columnModel.setColumnGroupOpened(t,i,"api")}function EL(e,t,i){return e.visibleColsService.getColumnGroup(t,i)}function bL(e,t){return e.columnModel.getProvidedColGroup(t)}function xL(e,t,i){return e.columnNameService.getDisplayNameForColumn(t,i)||""}function DL(e,t,i){return e.columnNameService.getDisplayNameForColumnGroup(t,i)||""}function ML(e,t){return e.columnModel.getColDefCol(t)}function TL(e){return e.columnModel.getColDefCols()}function _L(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function LL(e){return e.columnGetStateService.getColumnState()}function AL(e){e.columnApplyStateService.resetColumnState("api")}function IL(e){return e.columnGroupStateService.getColumnGroupState()}function kL(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function OL(e){e.columnGroupStateService.resetColumnGroupState("api")}function NL(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function GL(e){return e.visibleColsService.isPinningLeft()}function HL(e){return e.visibleColsService.isPinningRight()}function BL(e,t){return e.visibleColsService.getColAfter(t)}function VL(e,t){return e.visibleColsService.getColBefore(t)}function WL(e,t,i){e.columnModel.setColsVisible([t],i,"api")}function zL(e,t,i){e.columnModel.setColsVisible(t,i,"api")}function UL(e,t,i){e.columnModel.setColsPinned([t],i,"api")}function jL(e,t,i){e.columnModel.setColsPinned(t,i,"api")}function $L(e){return e.columnModel.getCols()}function KL(e){return e.visibleColsService.getLeftCols()}function ZL(e){return e.visibleColsService.getCenterCols()}function qL(e){return e.visibleColsService.getRightCols()}function YL(e){return e.visibleColsService.getAllCols()}function QL(e){return e.columnViewportService.getViewportColumns()}function XL(e,t,i){e.columnMoveService.moveColumns([t],i,"api")}function JL(e,t,i){e.columnMoveService.moveColumnByIndex(t,i,"api")}function eA(e,t,i){e.columnMoveService.moveColumns(t,i,"api")}function tA(e,t,i,n=!0,s="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:i}],!1,n,s)}function iA(e,t,i=!0,n="api"){e.columnSizeService.setColumnWidths(t,!1,i,n)}function nA(e){return e.visibleColsService.getTreeLeft()}function sA(e){return e.visibleColsService.getTreeCenter()}function oA(e){return e.visibleColsService.getTreeRight()}function rA(e){return e.visibleColsService.getAllTrees()}function lA(e,t,i){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:i,source:"api"})}function aA(e,t,i){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})}function uA(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var cA=class extends ie{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(Vr(e.source))})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};const t=n=>s=>{const{column:r,node:u,value:c}=s;let p=r.getColDef().valueFormatter;return p===n.groupSafeValueFormatter&&(p=n.valueFormatter),this.valueService.formatValue(r,u,c,p)};Object.entries(e).forEach(([n,s])=>{const r={...s,groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)};this.dataTypeDefinitions[n]=r,this.formatValueFuncs[n]=t(r)});const i=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(i).forEach(([n,s])=>{const r=this.processDataTypeDefinition(s,i,[n],e);r&&(this.dataTypeDefinitions[n]=r,s.dataTypeMatcher&&(this.dataTypeMatchers[n]=s.dataTypeMatcher),this.formatValueFuncs[n]=t(r))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(n=>{const s=this.dataTypeMatchers[n];s&&delete this.dataTypeMatchers[n],this.dataTypeMatchers[n]=s??e[n].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...hd(e.columnTypes),...hd(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,n){let s;const r=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let u=n[r];const c=t[r];if(u&&c&&(u=c),!this.validateDataTypeDefinition(e,u,r))return;s=this.mergeDataTypeDefinitions(u,e)}else{if(i.includes(r)){se('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const u=t[r];if(!this.validateDataTypeDefinition(e,u,r))return;const c=this.processDataTypeDefinition(u,t,[...i,r],n);if(!c)return;s=this.mergeDataTypeDefinitions(c,e)}return{...s,groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)}}validateDataTypeDefinition(e,t,i){return t?t.baseDataType!==e.baseDataType?(se('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(se(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{var i,n;if((i=t.node)!=null&&i.group){const s=(t.colDef.pivotValueColumn??t.column).getAggFunc();if(s){if(s==="first"||s==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&s!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter({...t,value:t.value.toNumber()});if("value"in t.value)return e.valueFormatter({...t,value:t.value.value})}}return}if((this.gos.get("suppressGroupMaintainValueType")||this.gos.get("groupDisplayType")==="groupRows")&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()&&typeof t.value=="string"&&!((n=e.dataTypeMatcher)!=null&&n.call(e,t.value)))return;return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:n}=t;const{field:s}=t;if(n===void 0&&(n=e.cellDataType),(n==null||n===!0)&&(n=this.canInferCellDataType(e,t)?this.inferCellDataType(s,i):!1),!n){e.cellDataType=!1;return}const r=this.dataTypeDefinitions[n];if(!r){se(`Missing data type definition - "${n}"`);return}return e.cellDataType=n,r.groupSafeValueFormatter&&(e.valueFormatter=r.groupSafeValueFormatter),r.valueParser&&(e.valueParser=r.valueParser),r.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,n,r,i),r.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=n=>{t.add(n.key)};e.addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){if(!At(this.gos))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,i))return!1;const n=t.type===null?e.type:t.type;if(n){const s=this.gos.get("columnTypes")??{};if(hd(n).some(u=>{const c=s[u.trim()];return c&&this.doColDefPropsPreventInference(c,i)}))return!1}return!this.doColDefPropsPreventInference(e,i)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,n])=>this.doesColDefPropPreventInference(e,t,i,n))}doesColDefPropPreventInference(e,t,i,n){if(!t[i])return!1;const s=e[i];return s===null?(t[i]=!1,!1):n===void 0?!!s:s===n}inferCellDataType(e,t){if(!e)return;let i;const n=this.getInitialData();if(n){const r=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=gu(n,e,r)}else this.initWaitForRowData(t);if(i==null)return;const[s]=Object.entries(this.dataTypeMatchers).find(([r,u])=>u(i))??["object"];return s}getInitialData(){const e=this.gos.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const t=this.rowModel.getRootNode().allLeafChildren;if(t!=null&&t.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const[i]=this.addManagedEventListeners({rowDataUpdateStarted:n=>{const{firstRowData:s}=n;s&&(i==null||i(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const n={},s={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([r,u])=>{const c=this.columnModel.getCol(r);if(!c)return;const p=c.getColDef();if(!this.columnModel.resetColDefIntoCol(c,"cellDataTypeInferred"))return;const g=c.getColDef();if(t&&g.type&&g.type!==p.type){const v=this.getUpdatedColumnState(c,u);v.rowGroup&&v.rowGroupIndex==null&&(n[r]=v),v.pivot&&v.pivotIndex==null&&(s[r]=v),i.push(v)}}),t&&i.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(n,s)),i.length&&this.columnApplyStateService.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const i=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(n=>{delete i[n],n==="rowGroup"?delete i.rowGroupIndex:n==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var n;if(t==null)return!0;const i=(n=this.getDataTypeDefinition(e))==null?void 0:n.dataTypeMatcher;return i?i(t):!0}validateColDef(e){const t=i=>se(`Cell data type is "object" but no Value ${i} has been provided. Please either provide an object data type definition with a Value ${i}, or set "colDef.value${i}"`);e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&t("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,i,n){var r;const s=this.formatValueFuncs[t];switch(i.baseDataType){case"number":{e.cellEditor="agNumberCellEditor";break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=u=>!!u.colDef.editable&&u.event.key===Q.SPACE;break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=s;break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=s;break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(u,c)=>{const p=this.columnModel.getColDefCol(n),g=p==null?void 0:p.getColDef();if(!p||!g)return 0;const v=u==null?"":s({column:p,node:null,value:u}),S=c==null?"":s({column:p,node:null,value:c});return v===S?0:v>S?1:-1},e.keyCreator=s;break}}(r=this.filterManager)==null||r.setColDefPropertiesForDataType(e,i,s)}getDefaultDataTypes(){const e=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>{var n,s;return((s=(n=i.newValue)==null?void 0:n.trim)==null?void 0:s.call(n))===""?null:Number(i.newValue)},valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?t("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:df(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>{var n,s;return i.newValue==null?i.newValue:((s=(n=i.newValue)==null?void 0:n.trim)==null?void 0:s.call(n))===""?null:String(i.newValue).toLowerCase()==="true"},valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>Qi(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):kn(i.value,!1)??"",dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>Qi(i)??void 0,dateFormatter:i=>kn(i??null,!1)??void 0,valueParser:i=>e(String(i.newValue))?i.newValue:null,valueFormatter:i=>e(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&e(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>df(i.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},dA={version:je,moduleName:"@ag-grid-community/data-type",beans:[cA]},hA={version:je,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:yL,getColumnDefs:RL,sizeColumnsToFit:PL,setColumnGroupOpened:FL,getColumnGroup:EL,getProvidedColumnGroup:bL,getDisplayNameForColumn:xL,getDisplayNameForColumnGroup:DL,getColumn:ML,getColumns:TL,applyColumnState:_L,getColumnState:LL,resetColumnState:AL,getColumnGroupState:IL,setColumnGroupState:kL,resetColumnGroupState:OL,isPinning:NL,isPinningLeft:GL,isPinningRight:HL,getDisplayedColAfter:BL,getDisplayedColBefore:VL,setColumnVisible:WL,setColumnsVisible:zL,setColumnPinned:UL,setColumnsPinned:jL,getAllGridColumns:$L,getDisplayedLeftColumns:KL,getDisplayedCenterColumns:ZL,getDisplayedRightColumns:qL,getAllDisplayedColumns:YL,getAllDisplayedVirtualColumns:QL,moveColumn:XL,moveColumnByIndex:JL,moveColumns:eA,setColumnWidth:tA,setColumnWidths:iA,getLeftDisplayedColumnGroups:nA,getCenterDisplayedColumnGroups:sA,getRightDisplayedColumnGroups:oA,getAllDisplayedColumnGroups:rA,autoSizeColumn:lA,autoSizeColumns:aA,autoSizeAllColumns:uA}};function pA(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function fA(e,t){const i=e.dragAndDropService.findExternalZone(t);i&&e.dragAndDropService.removeDropTarget(i)}function gA(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var mA={version:je,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:pA,removeRowDropZone:fA,getRowDropZoneParams:gA}};function vA(e){return e.pinnedRowModel.getPinnedTopRowCount()}function CA(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function wA(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function SA(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var yA={version:je,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:vA,getPinnedBottomRowCount:CA,getPinnedTopRow:wA,getPinnedBottomRow:SA}};function RA(e){e.overlayService.showLoadingOverlay()}function PA(e){e.overlayService.showNoRowsOverlay()}function FA(e){e.overlayService.hideOverlay()}var EA={version:je,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:RA,showNoRowsOverlay:PA,hideOverlay:FA}};function bA(e,t,i){if(!t)return;const n=e.ctrlsService.getGridBodyCtrl().getGui(),s=`aria-${t}`;i===null?n.removeAttribute(s):n.setAttribute(s,i)}function xA(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function DA(e,t={}){const i=n=>se(`Since v31.1 api.flashCells parameter '${n}Delay' is deprecated. Please use '${n}Duration' instead.`);ge(t.fadeDelay)&&i("fade"),ge(t.flashDelay)&&i("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function MA(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function TA(e){return e.animationFrameService.isQueueEmpty()}function _A(e){e.animationFrameService.flushAllFrames()}function LA(e){return{rowHeight:Zr(e.gos),headerHeight:e.columnModel.getHeaderHeight()}}function AA(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(vu)}var IA={version:je,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:bA,refreshCells:xA,flashCells:DA,refreshHeader:MA,isAnimationFrameQueueEmpty:TA,flushAllAnimationFrames:_A,getSizesForCurrentTheme:LA,getCellRendererInstances:AA}};function kA(e){e.valueCache.expire()}function OA(e,t,i){return Iy(e,{colKey:t,rowNode:i})}function Iy(e,t){const{colKey:i,rowNode:n,useFormatter:s}=t,r=e.columnModel.getColDefCol(i)??e.columnModel.getCol(i);if(ut(r))return null;const u=e.valueService.getValueForDisplay(r,n);return s?e.valueService.formatValue(r,n,u)??Es(u,!0):u}function NA(e){return e.context.getGridId()}function GA(e){e.gridDestroyService.destroy()}function HA(e){return e.gridDestroyService.isDestroyCalled()}function BA(e,t){return e.gos.get(t)}function VA(e,t,i){ky(e,{[t]:i})}function ky(e,t){e.gos.updateGridOptions({options:t})}function WA(e,t,i){e.apiEventService.addEventListener(t,i)}function zA(e,t,i){e.apiEventService.removeEventListener(t,i)}function UA(e,t){e.apiEventService.addGlobalListener(t)}function jA(e,t){e.apiEventService.removeGlobalListener(t)}function $A(e){return e.focusService.getFocusedCell()}function KA(e){return e.focusService.clearFocusedCell()}function ZA(e,t,i,n){e.focusService.setFocusedCell({rowIndex:t,column:i,rowPinned:n,forceBrowserFocus:!0})}function qA(e,t){return e.navigationService.tabToNextCell(!1,t)}function YA(e,t){return e.navigationService.tabToNextCell(!0,t)}function QA(e,t,i=!1){const n=e.headerNavigationService.getHeaderPositionForColumn(t,i);n&&e.focusService.focusHeaderPosition({headerPosition:n})}function XA(e,t,i){const n=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:n,buttonElement:i,positionBy:"button"})}function JA(e,t,i){let n=e.columnModel.getCol(t);if(n||(n=e.columnModel.getColDefCol(t)),!n){Ct(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:n,mouseEvent:i,positionBy:"mouse"})}function eI(e,t){const i=e.columnModel.getCol(t);if(!i){Ct(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,positionBy:"auto"})}function tI(e){e.menuService.hidePopupMenu()}function iI(e,t={}){const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))}function nI(e,t,i,n,s){e.expansionService.setRowNodeExpanded(t,i,n,s)}function sI(e,t){return e.rowModel.getRowNode(t)}function oI(e,t,i,n){e.rowRenderer.addRenderedRowListener(t,i,n)}function rI(e){return e.rowRenderer.getRenderedNodes()}function lI(e,t,i){e.rowModel.forEachNode(t,i)}function aI(e){return Oy(e)}function Oy(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function uI(e){return Ny(e)}function Ny(e){return e.rowRenderer.getLastVirtualRenderedRow()}function cI(e,t){return e.rowModel.getRow(t)}function dI(e){return e.rowModel.getRowCount()}function hI(e){return e.rowModel}function pI(e,t){if(!t.nodes.every(c=>c.rowPinned?(se("cannot select pinned rows"),!1):c.id===void 0?(se("cannot select node until id for node is known"),!1):!0))return;const{nodes:n,source:s,newValue:r}=t,u=n;e.selectionService.setNodesSelected({nodes:u,source:s??"api",newValue:r})}function fI(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function gI(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function mI(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function vI(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function CI(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function wI(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function SI(e){return e.selectionService.getSelectedNodes()}function yI(e){return e.selectionService.getSelectedRows()}function RI(e){e.sortController.onSortChanged("api")}var PI={version:je,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:NA,destroy:GA,isDestroyed:HA,getGridOption:BA,setGridOption:VA,updateGridOptions:ky}},FI={version:je,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:pI,selectAll:fI,deselectAll:gI,selectAllFiltered:mI,deselectAllFiltered:vI,selectAllOnCurrentPage:CI,deselectAllOnCurrentPage:wI,getSelectedNodes:SI,getSelectedRows:yI}},EI={version:je,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:iI,setRowNodeExpanded:nI,getRowNode:sI,addRenderedRowListener:oI,getRenderedNodes:rI,forEachNode:lI,getFirstDisplayedRow:aI,getFirstDisplayedRowIndex:Oy,getLastDisplayedRow:uI,getLastDisplayedRowIndex:Ny,getDisplayedRowAtIndex:cI,getDisplayedRowCount:dI,getModel:hI}},bI={version:je,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:d_,getHorizontalPixelRange:h_,ensureColumnVisible:Dy,ensureIndexVisible:My,ensureNodeVisible:p_}},xI={version:je,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:$A,clearFocusedCell:KA,setFocusedCell:ZA,setFocusedHeader:QA,tabToNextCell:qA,tabToPreviousCell:YA}},DI={version:je,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:WA,addGlobalListener:UA,removeEventListener:zA,removeGlobalListener:jA}},MI={version:je,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:kA,getValue:OA,getCellValue:Iy}},TI={version:je,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:XA,showColumnMenuAfterMouseClick:JA,showColumnMenu:eI,hidePopupMenu:tI}},_I={version:je,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:RI}},LI={version:je,moduleName:"@ag-grid-community/api",dependantModules:[PI,yA,FI,hA,EI,mA,bI,EA,xI,DI,IA,MI,TI,_I]};function AI(e){var t;return((t=e.stateService)==null?void 0:t.getState())??{}}function II(e){switch(e={...e},e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=kI(e)}return e}function kI(e){return e.cellSelection=OI(e,"rangeSelection"),e}function OI(e,t){if(e&&typeof e=="object")return e[t]}var NI=class extends ie{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Oi(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Oi(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=Oi(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=At(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",je),this.ctrlsService.whenReady(this,()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const[e,t,i]=this.addManagedEventListeners({newColumnsLoaded:({source:n})=>{n==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t==null||t(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{i==null||i(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getInitialState(){return II(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());const e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const t=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:n}=this.getInitialState(),s=this.gos.get("advancedFilterModel");(e||s)&&this.setFilterState(e,s),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),n&&this.setPaginationState(n),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());const r=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:r,columnRowGroupChanged:r,rowDataUpdated:()=>{this.gos.get("groupDefaultExpanded")!==0&&setTimeout(()=>{r()})},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:u=>{(u.newPage||u.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:t,focusedCell:i,columnOrder:n}=this.getInitialState();i&&this.setFocusedCellState(i),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!(n!=null&&n.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());const s=this.getRangeSelectionState();this.updateCachedState("rangeSelection",s),this.updateCachedState("cellSelection",s),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:r=>{if(r.finished){const u=this.getRangeSelectionState();this.updateCachedState("rangeSelection",u),this.updateCachedState("cellSelection",u)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],i=[],n=[],s=[],r=[],u=[],c=[],p=[],g=[];let v=0;const S=this.columnGetStateService.getColumnState();for(let y=0;y<S.length;y++){const{colId:E,sort:b,sortIndex:M,rowGroup:x,rowGroupIndex:_,aggFunc:k,pivot:I,pivotIndex:H,pinned:A,hide:z,width:j,flex:te}=S[y];g.push(E),b&&(t[M??v++]={colId:E,sort:b}),x&&(i[_??0]=E),typeof k=="string"&&n.push({colId:E,aggFunc:k}),I&&(s[H??0]=E),A&&(A==="right"?u:r).push(E),z&&c.push(E),(te||j)&&p.push({colId:E,flex:te??void 0,width:j})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:n.length?{aggregationModel:n}:void 0,pivot:s.length||e?{pivotMode:e,pivotColIds:s}:void 0,columnPinning:r.length||u.length?{leftColIds:r,rightColIds:u}:void 0,columnVisibility:c.length?{hiddenColIds:c}:void 0,columnSizing:p.length?{columnSizingModel:p}:void 0,columnOrder:g.length?{orderedColIds:g}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:n,pivot:s,columnPinning:r,columnVisibility:u,columnSizing:c,columnOrder:p,partialColumnState:g}=e,v={},S=x=>{let _=v[x];return _||(_={colId:x},v[x]=_,_)},y=g?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(({colId:x,sort:_},k)=>{const I=S(x);I.sort=_,I.sortIndex=k}),y.sort=null,y.sortIndex=null),i&&(i.groupColIds.forEach((x,_)=>{const k=S(x);k.rowGroup=!0,k.rowGroupIndex=_}),y.rowGroup=null,y.rowGroupIndex=null),n&&(n.aggregationModel.forEach(({colId:x,aggFunc:_})=>{S(x).aggFunc=_}),y.aggFunc=null),s&&(s.pivotColIds.forEach((x,_)=>{const k=S(x);k.pivot=!0,k.pivotIndex=_}),this.gos.updateGridOptions({options:{pivotMode:s.pivotMode},source:"gridInitializing"}),y.pivot=null,y.pivotIndex=null),r&&(r.leftColIds.forEach(x=>{S(x).pinned="left"}),r.rightColIds.forEach(x=>{S(x).pinned="right"}),y.pinned=null),u&&(u.hiddenColIds.forEach(x=>{S(x).hide=!0}),y.hide=null),c&&(c.columnSizingModel.forEach(({colId:x,flex:_,width:k})=>{const I=S(x);I.flex=_??null,I.width=k}),y.flex=null);const E=p==null?void 0:p.orderedColIds,b=!!(E!=null&&E.length),M=b?E.map(x=>S(x)):Object.values(v);M.length&&(this.columnStates=M,this.columnApplyStateService.applyColumnState({state:M,applyOrder:b,defaultState:y},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){const n=[];for(const s of t)this.pivotResultColsService.getPivotResultCol(s.colId)&&n.push(s);this.columnApplyStateService.applyColumnState({state:n,applyOrder:e},"gridInitializing")}i&&this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:i,open:n})=>{n&&t.push(i)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){var s;if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const t=new Set((s=e.columnGroup)==null?void 0:s.openColumnGroupIds),n=this.columnGroupStateService.getColumnGroupState().map(({groupId:r})=>{const u=t.has(r);return u&&t.delete(r),{groupId:r,open:u}});t.forEach(r=>{n.push({groupId:r,open:!0})}),n.length&&(this.columnGroupStates=n),this.columnGroupStateService.setColumnGroupState(n,"gridInitializing")}getFilterState(){var i,n;let e=(i=this.filterManager)==null?void 0:i.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);const t=((n=this.filterManager)==null?void 0:n.getAdvancedFilterModel())??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){var s,r;const{filterModel:i,advancedFilterModel:n}=e??{advancedFilterModel:t};i&&((s=this.filterManager)==null||s.setFilterModel(i,"columnFilter")),n&&((r=this.filterManager)==null||r.setAdvancedFilterModel(n))}getRangeSelectionState(){var t;const e=(t=this.rangeService)==null?void 0:t.getCellRanges().map(i=>{const{id:n,type:s,startRow:r,endRow:u,columns:c,startColumn:p}=i;return{id:n,type:s,startRow:r,endRow:u,colIds:c.map(g=>g.getColId()),startColId:p.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeService:i,columnModel:n,visibleColsService:s}=this;if(!po(t)||!i)return;const r=[];if(e.cellRanges.forEach(u=>{const c=[];if(u.colIds.forEach(g=>{const v=n.getCol(g);v&&c.push(v)}),!c.length)return;let p=n.getCol(u.startColId);if(!p){const g=s.getAllCols(),v=new Set(c);p=g.find(S=>v.has(S))}r.push({...u,columns:c,startColumn:p})}),px(t)&&fx(t)&&r.length>1)return se("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");i.setCellRanges(r)}getScrollState(){var n;if(!this.isClientSideRowModel)return;const e=(n=this.ctrlsService.getGridBodyCtrl())==null?void 0:n.getScrollFeature(),{left:t}=(e==null?void 0:e.getHScrollPosition())??{left:0},{top:i}=(e==null?void 0:e.getVScrollPosition())??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){var n;if(!this.isClientSideRowModel)return;const{top:t,left:i}=e;(n=this.ctrlsService.getGridBodyCtrl())==null||n.getScrollFeature().setScrollPosition(t,i)}getSideBarState(){var e,t;return(t=(e=this.sideBarService)==null?void 0:e.getSideBarComp())==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:n}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:n}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:n}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:i,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;const e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){var i;const e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!((i=e==null?void 0:e.toggledNodes)!=null&&i.length)?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;Object.entries(t).forEach(([n,s])=>{Ru(s,this.cachedState[n])||(i=!0)}),this.cachedState={...this.cachedState,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),Ru(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},Gy={version:je,moduleName:"@ag-grid-community/state-core",beans:[NI]},GI={version:je,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:AI},dependantModules:[Gy]},HI={version:je,moduleName:"@ag-grid-community/state",dependantModules:[Gy,GI]};function BI(e){return e.rowModel.isLastRowIndexKnown()}function VI(e){var t;return((t=e.paginationService)==null?void 0:t.getPageSize())??100}function WI(e){var t;return((t=e.paginationService)==null?void 0:t.getCurrentPage())??0}function zI(e){var t;return((t=e.paginationService)==null?void 0:t.getTotalPages())??1}function UI(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function jI(e){var t;(t=e.paginationService)==null||t.goToNextPage()}function $I(e){var t;(t=e.paginationService)==null||t.goToPreviousPage()}function KI(e){var t;(t=e.paginationService)==null||t.goToFirstPage()}function ZI(e){var t;(t=e.paginationService)==null||t.goToLastPage()}function qI(e,t){var i;(i=e.paginationService)==null||i.goToPage(t)}var YI=class extends ie{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const i=Math.max(Zr(this.gos),1),n=Math.floor(e/i);this.paginationService.setPageSize(n,"autoCalculated")};this.isBodyRendered?Oi(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function QI(e,t,i){e.addManagedElementListeners(t,{keydown:n=>{if(!n.defaultPrevented&&n.key===Q.TAB){const s=n.shiftKey;i.findNextFocusableElement(t,!1,s)||i.focusNextGridCoreContainer(s)&&n.preventDefault()}}})}var uu="paginationPageSizeSelector",XI=class extends xt{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(uu,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))return;const t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){gn(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(uu)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),i=!t||!e.includes(t);if(i){const s=this.gos.exists("paginationPageSize"),r=this.gos.get(uu)!==!0;se(`'paginationPageSize=${t}'${s?"":" (default value)"}, but ${t} is not included in${r?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),r||se(`Either set '${uu}' to an array that includes ${t} or to 'false' to disable the page size selector.`),e.unshift("")}const n=String(i?"":t);this.selectPageSizeComp?(cr(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(n,!0)):this.createPageSizeSelectorComp(e,n),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const i=this.localeService.getLocaleTextFunc(),n=i("pageSizeSelectorLabel","Page Size:"),s=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new Rg).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(s).setLabel(n).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(uu);return!Array.isArray(t)||fn(t)?e:[...t].sort((i,n)=>i-n)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},JI={selector:"AG-PAGE-SIZE-SELECTOR",component:XI},ek=class extends z_{constructor(){super(),this.btFirst=Ge,this.btPrevious=Ge,this.btNext=Ge,this.btLast=Ge,this.lbRecordCount=Ge,this.lbFirstRowOnPage=Ge,this.lbLastRowOnPage=Ge,this.lbCurrent=Ge,this.lbTotal=Ge,this.pageSizeComp=Ge,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[JI]);const{btFirst:t,btPrevious:i,btNext:n,btLast:s}=this;this.activateTabIndex([t,i,n,s]),t.insertAdjacentElement("afterbegin",pn(e?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",pn(e?"next":"previous",this.gos)),n.insertAdjacentElement("afterbegin",pn(e?"previous":"next",this.gos)),s.insertAdjacentElement("afterbegin",pn(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(r):this.focusService.focusGridInnerElement(r)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:n=>{(n.key===Q.ENTER||n.key===Q.SPACE)&&(n.preventDefault(),i())}})}),QI(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});const i=this.localeService.getLocaleTextFunc(),n=i("thousandSeparator",","),s=i("decimalSeparator",".");return BM(e,n,s)}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),n=e("of","of"),s=e("firstPage","First Page"),r=e("previousPage","Previous Page"),u=e("nextPage","Next Page"),c=e("lastPage","Last Page"),p=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${p}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel">
                    <span id="ag-${p}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${p}-to">${i}</span>
                    <span id="ag-${p}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${p}-of">${n}</span>
                    <span id="ag-${p}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <span class="ag-paging-description">
                        <span id="ag-${p}-start-page">${t}</span>
                        <span id="ag-${p}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${p}-of-page">${n}</span>
                        <span id="ag-${p}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${u}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${c}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){const e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const n=this.isZeroPagesToDisplay(),s=e===i-1;this.nextButtonDisabled=s||n,this.lastButtonDisabled=!t||n||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){eD(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),i=this.paginationService.getMasterRowCount(),n=e?i:null;if(n===1){const k=this.rowModel.getRow(0);if(k&&k.group&&!(k.groupData||k.aggData)){this.setTotalLabelsToZero();return}}const s=this.paginationService.getCurrentPage(),r=this.paginationService.getPageSize();let u,c;this.isZeroPagesToDisplay()?u=c=0:(u=r*s+1,c=u+r-1,e&&c>n&&(c=n));const p=u+r-1,g=!e&&i<p,v=this.formatNumber(u);this.lbFirstRowOnPage.textContent=v;let S;const y=this.localeService.getLocaleTextFunc();g?S=y("pageLastRowUnknown","?"):S=this.formatNumber(c),this.lbLastRowOnPage.textContent=S;const b=t>0?s+1:0,M=this.formatNumber(b);this.lbCurrent.textContent=M;let x,_;if(e)x=this.formatNumber(t),_=this.formatNumber(n);else{const k=y("more","more");x=k,_=k}this.lbTotal.textContent=x,this.lbRecordCount.textContent=_,this.announceAriaStatus(v,S,_,M,x)}announceAriaStatus(e,t,i,n,s){const r=this.localeService.getLocaleTextFunc(),u=r("page","Page"),c=r("to","to"),p=r("of","of"),g=`${e} ${c} ${t} ${p} ${i}`,v=`${u} ${n} ${p} ${s}`;g!==this.ariaRowStatus&&(this.ariaRowStatus=g,this.ariaAnnouncementService.announceValue(g,"paginationRow")),v!==this.ariaPageStatus&&(this.ariaPageStatus=v,this.ariaAnnouncementService.announceValue(v,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}},tk={selector:"AG-PAGINATION",component:ek},ik=class extends ie{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return tk}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return ge(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:ge(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:ge(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:ge(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const n=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=n-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:n=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:n,keepRenderedRows:t})}},Hy={version:je,moduleName:"@ag-grid-community/pagination-core",beans:[ik,YI]},nk={version:je,moduleName:"@ag-grid-community/pagination-api",dependantModules:[Hy],apiFunctions:{paginationIsLastPageFound:BI,paginationGetPageSize:VI,paginationGetCurrentPage:WI,paginationGetTotalPages:zI,paginationGetRowCount:UI,paginationGoToNextPage:jI,paginationGoToPreviousPage:$I,paginationGoToFirstPage:KI,paginationGoToLastPage:ZI,paginationGoToPage:qI}},sk={version:je,moduleName:"@ag-grid-community/pagination",dependantModules:[Hy,nk]},Yi="clientSide",Ai="serverSide",Ql="infinite",ok={onGroupExpandedOrCollapsed:[Yi],refreshClientSideRowModel:[Yi],isRowDataEmpty:[Yi],forEachLeafNode:[Yi],forEachNodeAfterFilter:[Yi],forEachNodeAfterFilterAndSort:[Yi],resetRowHeights:[Yi],applyTransaction:[Yi],applyTransactionAsync:[Yi],flushAsyncTransactions:[Yi],getBestCostNodeSelection:[Yi],getServerSideSelectionState:[Ai],setServerSideSelectionState:[Ai],applyServerSideTransaction:[Ai],applyServerSideTransactionAsync:[Ai],applyServerSideRowData:[Ai],retryServerSideLoads:[Ai],flushServerSideAsyncTransactions:[Ai],refreshServerSide:[Ai],getServerSideGroupLevelState:[Ai],refreshInfiniteCache:[Ql],purgeInfiniteCache:[Ql],getInfiniteRowCount:[Ql],isLastRowIndexKnown:[Ql,Ai],expandAll:[Yi,Ai],collapseAll:[Yi,Ai],onRowHeightChanged:[Yi,Ai],setRowCount:[Ql,Ai],getCacheBlockState:[Ql,Ai]},rk={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}};function lk(e,t,i){const n=rk[e];if(n){const{version:r,new:u,old:c,message:p}=n,g=c??e;return(...v)=>{const S=u?`Please use ${u} instead. `:"";return se(`Since ${r} api.${g} is deprecated. ${S}${p??""}`),t.apply(t,v)}}const s=ok[e];return s?(...r)=>{const u=i.rowModel.getType();if(!s.includes(u)){Ct(`api.${e} can only be called when gridOptions.rowModelType is ${s.join(" or ")}`);return}return t.apply(t,r)}:t}var ak={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},er=(e,t)=>{const i=t.rowModelType??"clientSide";return i==="clientSide"||i==="serverSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},uk={enableRowGroup:er,rowGroup:er,rowGroupIndex:er,enablePivot:er,enableValue:er,pivot:er,pivotIndex:er,aggFunc:er,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{var i;const t=["columnsMenuTab","generalMenuTab"];return(i=e.menuTabs)!=null&&i.some(n=>t.includes(n))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Xl},ck={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},dk=Object.keys(ck),Xl={objectName:"colDef",allProperties:dk,docsUrl:"column-properties/",deprecations:ak,validations:uk},hk=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}}),pk={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},fk=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{const t=e.rowModelType??"clientSide";switch(t){case"clientSide":{const i=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:i}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return typeof t=="boolean"||t==null||t.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},rowSelection:{validate({rowSelection:e}){return e&&typeof e=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&typeof e!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":null}},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>Xl,defaultColDef:()=>Xl,defaultColGroupDef:()=>Xl,autoGroupColumnDef:()=>Xl,selectionColumnDef:()=>Xl}),gk=()=>({objectName:"gridOptions",allProperties:[...Eu.ALL_PROPERTIES,...bu.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:hk(),validations:fk()}),mk=class extends ie{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,gk())}validateApiFunction(e,t){return lk(e,t,this.beans)}processOptions(e,t){const{validations:i,deprecations:n,allProperties:s,propertyExceptions:r,objectName:u,docsUrl:c}=t;s&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...r??[],...Object.keys(n)],s,u,c);const p=new Set;Object.keys(e).forEach(v=>{const S=n[v];if(S)if("renamed"in S){const{renamed:I,version:H}=S;p.add(`As of v${H}, ${String(v)} is deprecated. Please use ${String(I)} instead.`),e[I]=e[v]}else{const{message:I,version:H}=S;p.add(`As of v${H}, ${String(v)} is deprecated. ${I??""}`)}const y=e[v];if(y==null||y===!1)return;const E=i[v];let b;if(E)if(typeof E=="function"){const I=E(e,this.gridOptions);if(!I)return;if("objectName"in I){const H=e[v];if(Array.isArray(H)){H.forEach(A=>{this.processOptions(A,I)});return}this.processOptions(e[v],I);return}b=I}else b=E;else return;const{module:M,dependencies:x,validate:_,supportedRowModels:k}=b;if(k){const I=this.gridOptions.rowModelType??"clientSide";if(!k.includes(I)){p.add(`${String(v)} is not supported with the '${I}' row model.`);return}}if(M){const I=Array.isArray(M)?M:[M];let H=!0;if(I.forEach(A=>{this.gos.assertModuleRegistered(A,String(v))||(H=!1,p.add(`${String(v)} is only available when ${A} is loaded.`))}),!H)return}if(x){const I=this.checkForRequiredDependencies(v,x,e);if(I){p.add(I);return}}if(_){const I=_(e,this.gridOptions);if(I){p.add(I);return}}}),p.size>0&&p.forEach(v=>{se(v)})}checkForRequiredDependencies(e,t,i){const s=Object.entries(t).find(([c,p])=>{const g=i[c];return!p.includes(g)});if(!s)return null;const[r,u]=s;return u.length>1?`'${String(e)}' requires '${r}' to be one of [${u.join(", ")}].`:`'${String(e)}' requires '${r}' to be ${u[0]}.`}checkProperties(e,t,i,n,s){const r=["__ob__","__v_skip","__metadata__"],u=vk(Object.getOwnPropertyNames(e),[...r,...t,...i],i);if(ts(u,(c,p)=>{let g=`invalid ${n} property '${c}' did you mean any of these: ${p.slice(0,8).join(", ")}.`;i.includes("context")&&(g+=`
If you are trying to annotate ${n} with application data, use the '${n}.context' property instead.`),se(g)}),Object.keys(u).length>0&&s){const c=this.getFrameworkOverrides().getDocLink(s);se(`to see all the valid ${n} properties please check: ${c}`)}}};function vk(e,t,i){const n={},s=e.filter(r=>!t.some(u=>u===r));return s.length>0&&s.forEach(r=>n[r]=BS({inputValue:r,allSuggestions:i}).values),n}var Ck={version:je,moduleName:"@ag-grid-community/core"},wk={version:je,moduleName:"@ag-grid-community/core-validations",beans:[mk]},By={version:je,moduleName:"@ag-grid-community/core-community-features",dependantModules:[Ck,wk,__,F0,HI,dA,SL,sk,LI]},Sk=class extends ie{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){var e,t;this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:((e=this.beans.stateService)==null?void 0:e.getState())??{}}),this.destroyCalled=!0,(t=this.beans.ctrlsService.get("gridCtrl"))==null||t.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},fd=new Set(["gridPreDestroyed","fillStart","pasteStart"]),yk=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",Rk=new Map([...Eu.BOOLEAN_PROPERTIES.map(e=>[e,pf]),...Eu.NUMBER_PROPERTIES.map(e=>[e,sy]),["groupAggFiltering",e=>typeof e=="function"?e:pf(e)],["pageSize",ys(1)],["autoSizePadding",ys(0)],["keepDetailRowsCount",ys(1)],["rowBuffer",ys(0)],["infiniteInitialRowCount",ys(1)],["cacheOverflowSize",ys(1)],["cacheBlockSize",ys(1)],["serverSideInitialRowCount",ys(1)],["viewportRowModelPageSize",ys(1)],["viewportRowModelBufferSize",ys(0)]]);function Vy(e,t){const i=Rk.get(e);return i?i(t):t}function Pk(e){const t={};return Object.entries(e).forEach(([i,n])=>{const s=Vy(i,n);t[i]=s}),t}var Wy=class zy extends ie{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new aa,this.globalEventHandlerFactory=t=>(i,n)=>{if(!this.isAlive())return;const s=fd.has(i);if(s&&!t||!s&&t)return;const r=bu.getCallbackForEvent(i),u=this.gridOptions[r];typeof u=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{u(n)})}}wireBeans(t){this.gridOptions=t.gridOptions,this.eGridDiv=t.eGridDiv,this.validationService=t.validationService,this.environment=t.environment,this.api=t.gridApi,this.gridId=t.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){const t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:i})=>{this.updateGridOptions({options:i,force:!0,source:"gridOptionsUpdated"})}})}get(t){return this.gridOptions[t]??pk[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return ge(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(n=>{const s=n;return s.api=this.api,s.context=this.gridOptionsContext,t(s)})}updateGridOptions({options:t,force:i,source:n="api"}){var u;const s={id:zy.changeSetId++,properties:[]},r=[];Object.entries(t).forEach(([c,p])=>{n==="api"&&Kx[c]&&se(`${c} is an initial property and cannot be updated.`);const g=Vy(c,p),v=i||typeof g=="object"&&n==="api",S=this.gridOptions[c];if(v||S!==g){this.gridOptions[c]=g;const y={type:c,currentValue:g,previousValue:S,changeSet:s,source:n};r.push(y)}}),(u=this.validationService)==null||u.processGridOptions(this.gridOptions),s.properties=r.map(c=>c.type),r.forEach(c=>{this.gridOptions.debug&&is(`Updated property ${c.type} from`,c.previousValue," to ",c.currentValue),this.propertyEventService.dispatchEvent(c)})}addPropertyEventListener(t,i){this.propertyEventService.addEventListener(t,i)}removePropertyEventListener(t,i){this.propertyEventService.removeEventListener(t,i)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(t){const i=t;return i.api=this.api,i.context=this.gridOptionsContext,i}assertModuleRegistered(t,i){return Ps.__assertRegistered(t,i,this.gridId)}isModuleRegistered(t){return Ps.__isRegistered(t,this.gridId)}};Wy.changeSetId=0;var Fk=Wy,Ek=class extends ie{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let i,n;if(Yt(e.column)?i=this.visibleColsService.getGroupAtDirection(e.column,t):(n=`getCol${t}`,i=this.visibleColsService[n](e.column)),!i)return;const{headerRowIndex:s}=e;if(this.getHeaderRowType(s)!=="filter"){const c=[i];for(;i.getParent();)i=i.getParent(),c.push(i);i=c[c.length-1-s]}const{column:r,headerRowIndex:u}=this.getHeaderIndexToFocus(i,s);return{column:r,headerRowIndex:u}}getHeaderIndexToFocus(e,t){let i;if(Yt(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const n=e;i=n.getLeafColumns()[0];let s=i;for(;s!==n;)t++,s=s.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){const i=this.getHeaderRowType(t),n=i==="filter",s=i==="column";let r=n?e:e.getParent(),u=t-1,c=u;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;r&&r.isPadding();)r=r.getParent(),u--;c=u,u<0&&(r=e,u=t,c=void 0)}return{column:r,headerRowIndex:u,headerRowIndexWithoutSpan:c}}getColumnVisibleChild(e,t,i="After"){const n=this.getHeaderRowType(t);let s=e,r=t+1;const u=r;if(n==="group"){const c=e.getDisplayedLeafColumns(),p=i==="After"?c[0]:at(c),g=[];let v=p;for(;v.getParent()!==e;)v=v.getParent(),g.push(v);if(s=p,p.isSpanHeaderHeight())for(let S=g.length-1;S>=0;S--){const y=g[S];if(!y.isPadding()){s=y;break}r++}else s=at(g),s||(s=p)}return{column:s,headerRowIndex:r,headerRowIndexWithoutSpan:u}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const i=this.visibleColsService.getAllCols(),n=i[t==="start"?0:i.length-1];if(!n)return;const s=this.ctrlsService.getHeaderRowContainerCtrl(n.getPinned()),r=s==null?void 0:s.getRowType(e);if(r=="group"){const u=this.visibleColsService.getColGroupAtLevel(n,e);return{headerRowIndex:e,column:u}}return{headerRowIndex:r==null?-1:e,column:n}}},bk=class extends ie{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(i,n,s)=>e({key:i,defaultValue:n,variableValues:s});const t=this.gos.get("localeText");return(i,n,s)=>{let r=t&&t[i];if(r&&s&&s.length){let u=0;for(;!(u>=s.length||r.indexOf("${variable}")===-1);)r=r.replace("${variable}",s[u++])}return r??n}}},xk=class extends ie{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new lg(this.getFrameworkOverrides())}addEventListener(e,t){const i=this.frameworkEventWrappingService.wrap(t),n=Pd(this.gos)&&!fd.has(e),s=n?this.asyncEventListeners:this.syncEventListeners;s.has(e)||s.set(e,new Set),s.get(e).add(i),this.eventService.addEventListener(e,i,n)}removeEventListener(e,t){var r;const i=this.frameworkEventWrappingService.unwrap(t),n=this.asyncEventListeners.get(e),s=!!(n!=null&&n.delete(i));s||(r=this.syncEventListeners.get(e))==null||r.delete(i),this.eventService.removeEventListener(e,i,s)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(Pd(this.gos)){const n=(r,u)=>{fd.has(r)&&t(r,u)},s=(r,u)=>{fd.has(r)||t(r,u)};this.globalEventListenerPairs.set(e,{syncListener:n,asyncListener:s}),this.eventService.addGlobalListener(n,!1),this.eventService.addGlobalListener(s,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:n,asyncListener:s}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(n,!1),this.eventService.removeGlobalListener(s,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((i,n)=>{i.forEach(s=>this.eventService.removeEventListener(n,s,t)),i.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(i=>this.eventService.removeGlobalListener(i,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},Dk=class extends ie{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:(e==null?void 0:e.animate)??!1,newData:(e==null?void 0:e.newData)??!1,newPage:(e==null?void 0:e.newPage)??!1,newPageSize:(e==null?void 0:e.newPageSize)??!1,keepRenderedRows:(e==null?void 0:e.keepRenderedRows)??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},Mk=class extends ie{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return ut(this.topRowBounds)||ut(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=ge(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},Tk=class extends ie{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=Oi(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){const e=$t(this.gos),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),RS(t,"polite"),Jx(t,"additions text"),Xx(t,!0),this.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50)}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(gn(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},_k=class extends ie{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e,t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e(),t();return}const i=n=>{for(;n.length;){const s=n.pop();s&&s()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e(),i(this.executeNextFuncs)},0),window.setTimeout(()=>{t(),i(this.executeLaterFuncs)},200)})}},Lk=class extends ie{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},Ak=class extends ie{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=At(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.overlayWrapperComp}isExclusive(){return this.state===1&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){se("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.");return}this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp){this.state=0;return}let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){var s;const n=e.newAgStackInstance();(s=this.overlayWrapperComp)==null||s.showOverlay(n,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;if(this.state===2){const t=this.ctrlsService.get("gridHeaderCtrl");e=(t==null?void 0:t.getHeaderHeight())||0}else this.wrapperPadding!==0&&(e=0);this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},Ik=class extends ie{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){const t=[];return ge(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),wC(t,this.processClassesFromGridOptions(e.rowNode)),wC(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],i=r=>{typeof r=="string"?t.push(r):Array.isArray(r)&&r.forEach(u=>t.push(u))},n=this.gos.get("rowClass");if(n){if(typeof n=="function")return se("rowClass should not be a function, please use getRowClass instead"),[];i(n)}const s=this.gos.getCallback("getRowClass");if(s){const r={data:e.data,node:e,rowIndex:e.rowIndex},u=s(r);i(u)}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,i=>{t.push(i)},()=>{}),t}processRowClassRules(e,t,i){const n=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),n,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},kk=class extends ie{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=cD(),this.gos.get("debug")&&is("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(t!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&is(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}},Ok=class extends ie{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=Rs(this.gos),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=Rs(this.gos))}doFullSort(e,t){const i=(s,r)=>({currentPos:r,rowNode:s}),n=e.map(i);return n.sort(this.compareRowNodes.bind(this,t)),n.map(s=>s.rowNode)}compareRowNodes(e,t,i){const n=t.rowNode,s=i.rowNode;for(let r=0,u=e.length;r<u;r++){const c=e[r],p=c.sort==="desc",g=this.getValue(n,c.column),v=this.getValue(s,c.column);let S;const y=this.getComparator(c,n);if(y?S=y(g,v,n,s,p):S=ax(g,v,this.isAccentedSort),!isNaN(S)&&S!==0)return c.sort==="asc"?S:S*-1}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,n=i.getColDef().comparator;if(n!=null)return n;if(!i.getColDef().showRowGroup)return;const s=!t.group&&i.getColDef().field;if(!s)return;const r=this.columnModel.getColDefCol(s);if(r)return r.getColDef().comparator}getValue(e,t){var n,s,r;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(jd(this.gos,this.columnModel.isPivotActive())){const p=(n=e.allLeafChildren)==null?void 0:n[0];return p?this.valueService.getValue(t,p,!1,!1):void 0}const c=(s=this.showRowGroupColsService)==null?void 0:s.getShowRowGroupCol(t.getId());return c?(r=e.groupData)==null?void 0:r[c.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},Qd=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let n=0;n<e.childrenAfterGroup.length;n++){const s=e.childrenAfterGroup[n];s.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[n],t,i):i&&t(s)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const n={rowNode:t,children:null};this.mapToItems[t.id]=n,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach(n=>this.nodeIdsToColumns[i.id][n.getId()]=!0),i=i.parent}linkPathItems(e,t){let i=e;for(let n=0;n<t;n++){const s=this.mapToItems[i.id],r=this.mapToItems[i.parent.id];r.children||(r.children=[]),r.children.push(s),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(s=>i[s.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(s=>!i[s.getId()])}},Uy=class extends ie{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new B_,this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){const{gos:e,rowModel:t,onRowSelected:i}=this;this.selectionCtx.init(t),this.rowSelectionMode=Ed(e),this.groupSelectsChildren=Jr(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{const n=Jr(e),s=Ed(e);(n!==this.groupSelectsChildren||s!==this.rowSelectionMode)&&(this.groupSelectsChildren=n,this.rowSelectionMode=s,this.deselectAllRowNodes({source:"api"}))}),this.addManagedEventListeners({rowSelected:i.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return this.rowSelectionMode==="multiRow"}overrideSelectionValue(e,t){if(!yk(t))return e;const i=this.selectionCtx.getRoot();return i?i.isSelected()??!1:!0}setNodesSelected(e){var S;const{newValue:t,clearSelection:i,suppressFinishActions:n,rangeSelect:s,nodes:r,event:u,source:c}=e;if(r.length===0)return 0;if(r.length>1&&!this.isMultiSelect())return se("cannot multi select unless selection mode is 'multiRow'"),0;const p=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,g=r.map(y=>y.footer?y.sibling:y);if(s){if(g.length>1)return se("cannot range select while selecting multiple rows"),0;const y=g[0],E=this.overrideSelectionValue(t,c);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(y)){const b=this.selectionCtx.truncate(y);return E&&this.selectRange(b.discard,!1,c),this.selectRange(b.keep,E,c)}else if(this.selectionCtx.getRoot()!==y){const x=this.selectionCtx.extend(y,this.groupSelectsChildren);return E&&this.selectRange(x.discard,!1,c),this.selectRange(x.keep,E,c)}}}n||this.selectionCtx.setRoot(g[0]);let v=0;for(let y=0;y<g.length;y++){const E=g[y];p&&E.group||E.selectThisNode(t,u,c)&&v++,this.groupSelectsChildren&&((S=E.childrenAfterGroup)!=null&&S.length)&&(v+=this.selectChildren(E,t,p,c))}return n||(t&&(i||!this.isMultiSelect())&&(v+=this.clearOtherNodes(g[0],c)),v>0&&(this.updateGroupsFromChildrenSelections(c),this.dispatchSelectionChanged(c))),v}selectRange(e,t,i){let n=0;return e.forEach(s=>{if(s.group&&this.groupSelectsChildren)return;s.selectThisNode(t,void 0,i)&&n++}),n>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),n}selectChildren(e,t,i,n){const s=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return ut(s)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:n,nodes:s})}getSelectedNodes(){const e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((i,n)=>{i&&e(i)&&t.set(n,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||!At(this.gos))return!1;const n=this.rowModel.getRootNode();t||(t=new Qd(!0,n),t.setInactive());let s=!1;return t.forEachChangedNodeDepthFirst(r=>{if(r!==n){const u=r.calculateSelectedFromChildren();s=r.selectThisNode(u===null?!1:u,void 0,e)||s}}),s}clearOtherNodes(e,t){const i=new Map;let n=0;return this.selectedNodes.forEach(s=>{if(s&&s.id!==e.id){const r=this.selectedNodes.get(s.id);n+=r.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&s.parent&&i.set(s.parent.id,s.parent)}}),i.forEach(s=>{const r=s.calculateSelectedFromChildren();s.selectThisNode(r===null?!1:r,void 0,t)}),n}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(ge(t)&&e.id!==t.id&&t){const n=t.id;this.selectedNodes.get(n)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){var e;(e=this.selectedNodes)==null||e.clear()}getBestCostNodeSelection(){if(!At(this.gos))return;const t=this.rowModel.getTopLevelNodes();if(t===null)return;const i=[];function n(s){for(let r=0,u=s.length;r<u;r++){const c=s[r];if(c.isSelected())i.push(c);else{const p=c;p.group&&p.children&&n(p.children)}}}return n(t),i}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){const t=u=>u.selectThisNode(!1,void 0,n),i=At(this.gos),{source:n,justFiltered:s,justCurrentPage:r}=e;if(r||s){if(!i){Ct("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(s,r).forEach(t)}else this.selectedNodes.forEach(u=>{u&&t(u)}),this.reset(n);this.selectionCtx.reset(),i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(n),this.dispatchSelectionChanged(n)}getSelectedCounts(e,t){let i=0,n=0;const s=r=>{this.groupSelectsChildren&&r.group||(r.isSelected()?i++:r.selectable&&n++)};return this.getNodesToSelect(e,t).forEach(s),{selectedCount:i,notSelectedCount:n}}getSelectAllState(e,t){const{selectedCount:i,notSelectedCount:n}=this.getSelectedCounts(e,t);return i===0&&n===0?!1:i>0&&n>0?null:i>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(i=>i.selectable).length>0}getNodesToSelect(e=!1,t=!1){this.validateSelectAllType();const i=[];if(t)return this.forEachNodeOnPage(s=>{if(!s.group){i.push(s);return}if(!s.expanded){const r=u=>{var c;i.push(u),(c=u.childrenAfterFilter)!=null&&c.length&&u.childrenAfterFilter.forEach(r)};r(s);return}this.groupSelectsChildren||i.push(s)}),i;const n=this.rowModel;return e?(n.forEachNodeAfterFilter(s=>{i.push(s)}),i):(n.forEachNode(s=>{i.push(s)}),i)}forEachNodeOnPage(e){const t=this.pageBoundsService.getFirstRow(),i=this.pageBoundsService.getLastRow();for(let n=t;n<=i;n++){const s=this.rowModel.getRow(n);s&&e(s)}}selectAllRowNodes(e){if(hx(this.gos)&&!aS(this.gos))return se("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();const{source:t,justFiltered:i,justCurrentPage:n}=e,s=this.getNodesToSelect(i,n);s.forEach(r=>r.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(s[0]??null),this.selectionCtx.setEndRange(at(s)??null),At(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){const e=[];return this.selectedNodes.forEach(t=>{t!=null&&t.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return Ct("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");const i=new Set(e),n=[];this.rowModel.forEachNode(s=>{i.has(s.id)&&n.push(s)}),this.setNodesSelected({newValue:!0,nodes:n,source:t})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!At(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},Nk=class extends ie{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){const{gos:t}=this,i=Rd(t),n=sg(t);if(!i||!n)return;const s=Jr(t),r=At(t)&&s,u=[],c=p=>{if(e&&!p.group)return;if(r&&p.group){const v=p.childrenAfterGroup.some(S=>S.selectable===!0);p.setRowSelectable(v,!0);return}const g=(n==null?void 0:n(p))??!0;p.setRowSelectable(g,!0),!g&&p.isSelected()&&u.push(p)};if(r){const p=this.rowModel;new Qd(!1,p.getRootNode()).forEachChangedNodeDepthFirst(c,!0,!0)}else this.rowModel.forEachNode(c);u.length&&this.selectionService.setNodesSelected({nodes:u,newValue:!1,source:"selectableChanged"}),r&&this.selectionService instanceof Uy&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},WC=["asc","desc",null],Gk=class extends ie{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,i){const n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)}setSortForColumn(e,t,i,n){t!=="asc"&&t!=="desc"&&(t=null);const s=Rs(this.gos);let r=[e];if(s&&e.getColDef().showRowGroup){const p=this.funcColsService.getSourceColumnsForGroupColumn(e),g=p==null?void 0:p.filter(v=>v.isSortable());g&&(r=[e,...g])}r.forEach(p=>p.setSort(t,n));const u=(i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),c=[];if(!u){const p=this.clearSortBarTheseColumns(r,n);c.push(...p)}this.updateSortIndex(e),c.push(...r),this.dispatchSortChangedEvents(n,c)}updateSortIndex(e){var c;const t=Rs(this.gos),i=(c=this.showRowGroupColsService)==null?void 0:c.getShowRowGroupCol(e.getId()),n=t&&i||e,s=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(p=>p.setSortIndex(null));const r=s.filter(p=>t&&p.getColDef().showRowGroup?!1:p!==n);(n.getSort()?[...r,n]:r).forEach((p,g)=>{p.setSortIndex(g)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const t=this.columnModel.getAllCols().filter(i=>!!i.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.columnModel.getAllCols().forEach(n=>{e.includes(n)||(n.getSort()&&i.push(n),n.setSort(void 0,t))}),i}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=WC,!Array.isArray(t)||t.length<=0)return se(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;const i=t.indexOf(e.getSort()),n=i<0,s=i==t.length-1;let r;return n||s?r=t[0]:r=t[i+1],WC.indexOf(r)<0?(se("invalid sort type ",r),null):r}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(r=>!!r.getSort());if(this.columnModel.isPivotMode()){const r=Rs(this.gos);e=e.filter(u=>{var v;const c=!!u.getAggFunc(),p=!u.isPrimary(),g=r?(v=this.showRowGroupColsService)==null?void 0:v.getShowRowGroupCol(u.getId()):u.getColDef().showRowGroup;return c||p||g})}const t=this.funcColsService.getRowGroupColumns().filter(r=>!!r.getSort()),i={};e.forEach((r,u)=>i[r.getId()]=u),e.sort((r,u)=>{const c=r.getSortIndex(),p=u.getSortIndex();if(c!=null&&p!=null)return c-p;if(c==null&&p==null){const g=i[r.getId()],v=i[u.getId()];return g>v?1:-1}else return p==null?-1:1});const n=Rs(this.gos)&&!!t.length;n&&(e=[...new Set(e.map(r=>{var u;return((u=this.showRowGroupColsService)==null?void 0:u.getShowRowGroupCol(r.getId()))??r}))]);const s=new Map;return e.forEach((r,u)=>s.set(r,u)),n&&t.forEach(r=>{const u=this.showRowGroupColsService.getShowRowGroupCol(r.getId());s.set(r,s.get(u))}),s}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[i,n])=>t-n).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=Rs(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const n=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,s=n[0].getSort();return n.every(u=>u.getSort()==s)?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},Hk=class extends ie{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});const e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&is(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,Vr(e.source))}}},Bk="paste",Vk=class extends ie{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){At(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==Bk&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;const i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const n=this.gos.get("aggregateOnlyChangedColumns"),s=new Qd(n,this.clientSideRowModel.getRootNode());s.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(s),s.forEachChangedNodeDepthFirst(r=>{i.push(r)})}this.rowRenderer.refreshCells({rowNodes:i})}},Wk=class extends ie{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);Ct("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return is("Processing of the expression failed"),is("Expression = ",e),is("Params = ",t),is("Exception = ",i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},zk=class extends ie{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},Uk=class extends ie{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=Ts(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=i=>this.callColumnCellValueChangedHandler(i),t=Pd(this.gos);this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValueForDisplay(e,t){const i=t.leafGroup&&this.columnModel.isPivotMode(),n=t.group&&t.expanded&&!t.footer&&!i,s=this.gos.get("groupSuppressBlankHeader");if(!n||s)return this.getValue(e,t);let r=!1;const u=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");typeof u!="function"?r=!!u:r=!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this});const c=n&&r;return this.getValue(e,t,!1,c)}getValue(e,t,i=!1,n=!1){if(this.initialised||this.init(),!t)return;const s=e.getColDef(),r=s.field,u=e.getColId(),c=t.data;let p;const g=t.groupData&&t.groupData[u]!==void 0,v=!n&&t.aggData&&t.aggData[u]!==void 0,S=this.isSsrm&&n&&!!e.getColDef().aggFunc,y=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(i&&s.filterValueGetter?p=this.executeFilterValueGetter(s.filterValueGetter,c,e,t):this.isTreeData&&v?p=t.aggData[u]:this.isTreeData&&s.valueGetter?p=this.executeValueGetter(s.valueGetter,c,e,t):this.isTreeData&&r&&c?p=gu(c,r,e.isFieldContainsDots()):g?p=t.groupData[u]:v?p=t.aggData[u]:s.valueGetter?p=this.executeValueGetter(s.valueGetter,c,e,t):y?p=gu(c,t.field,e.isFieldContainsDots()):r&&c&&!S&&(p=gu(c,r,e.isFieldContainsDots())),this.cellExpressions&&typeof p=="string"&&p.indexOf("=")===0){const E=p.substring(1);p=this.executeValueGetter(E,c,e,t)}if(p==null){const E=this.getOpenedGroup(t,e);if(E!=null)return E}return p}parseValue(e,t,i,n){const s=e.getColDef(),r=s.valueParser;if(ge(r)){const u=this.gos.addGridCommonParams({node:t,data:t==null?void 0:t.data,oldValue:n,newValue:i,colDef:s,column:e});return typeof r=="function"?r(u):this.expressionService.evaluate(r,u)}return i}getDeleteValue(e,t){return ge(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,i,n,s=!0){let r=null,u;const c=e.getColDef();if(n?u=n:s&&(u=c.valueFormatter),u){const p=this.gos.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:c,column:e});typeof u=="function"?r=u(p):r=this.expressionService.evaluate(u,p)}else if(c.refData)return c.refData[i]||"";return r==null&&Array.isArray(i)&&(r=i.join(", ")),r}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;const n=t.getColDef().showRowGroup;let s=e.parent;for(;s!=null;){if(s.rowGroupColumn&&(n===!0||n===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}setValue(e,t,i,n){const s=this.columnModel.getColDefCol(t);if(!e||!s)return!1;ut(e.data)&&(e.data={});const{field:r,valueSetter:u}=s.getColDef();if(ut(r)&&ut(u))return se("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(s,i))return se("Data type of the new value does not match the cell data type of the column"),!1;const c=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(s,e),newValue:i,colDef:s.getColDef(),column:s});c.newValue=i;let p;if(ge(u)?typeof u=="function"?p=u(c):p=this.expressionService.evaluate(u,c):p=this.setValueUsingField(e.data,r,i,s.isFieldContainsDots()),p===void 0&&(p=!0),!p)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();const g=this.getValue(s,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:c.column,colDef:c.colDef,data:e.data,node:e,oldValue:c.oldValue,newValue:g,value:g,source:n}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,n){if(!t)return!1;let s=!1;if(!n)s=e[t]===i,s||(e[t]=i);else{const r=t.split(".");let u=e;for(;r.length>0&&u;){const c=r.shift();r.length===0?(s=u[c]===i,s||(u[c]=i)):u=u[c]}}return!s}executeFilterValueGetter(e,t,i,n){const s=this.gos.addGridCommonParams({data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)});return typeof e=="function"?e(s):this.expressionService.evaluate(e,s)}executeValueGetter(e,t,i,n){const s=i.getColId(),r=this.valueCache.getValue(n,s);if(r!==void 0)return r;const u=this.gos.addGridCommonParams({data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)});let c;return typeof e=="function"?c=e(u):c=this.expressionService.evaluate(e,u),this.valueCache.setValue(n,s,c),c}getValueCallback(e,t){const i=this.columnModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),n=e.getColDef().keyCreator;let s=i;if(n){const r=this.gos.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data});s=n(r)}return typeof s=="string"||s==null||(s=String(s),s==="[object Object]"&&se("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),s}},Ag=class Hr{static applyGlobalGridOptions(t){if(!Hr.gridOptions)return t;let i={};return ki(i,Hr.gridOptions,!0,!0),Hr.mergeStrategy==="deep"?ki(i,t,!0,!0):i={...i,...t},Hr.gridOptions.context&&(i.context=Hr.gridOptions.context),t.context&&(Hr.mergeStrategy==="deep"&&i.context&&ki(t.context,i.context,!0,!0),i.context=t.context),i}};Ag.gridOptions=void 0;Ag.mergeStrategy="shallow";var jy=Ag;function jk(e){var t;return(t=jy.gridOptions)==null?void 0:t[e]}var $k=1,Kk=class{create(e,t,i,n,s){const r=jy.applyGlobalGridOptions(t),u=Pk(r),c=u.gridId??String($k++),p=this.getRegisteredModules(s,c),g=this.createBeansList(u.rowModelType,p,c),v=this.createProvidedBeans(e,u,s);if(!g){Ct("Failed to create grid.");return}const S={providedBeanInstances:v,beanClasses:g,gridId:c,beanInitComparator:rL,beanDestroyComparator:lL,derivedBeans:[Q_]},y=new cM(S);return this.registerModuleUserComponents(y,p),this.registerControllers(y,p),this.registerModuleApiFunctions(y,p),i(y),y.getBean("syncService").start(),n&&n(y),y.getBean("gridApi")}registerControllers(e,t){const i=e.getBean("ctrlsFactory");t.forEach(n=>{n.controllers&&n.controllers.forEach(s=>i.register(s))})}getRegisteredModules(e,t){const i=e?e.modules:null,n=Ps.__getRegisteredModules(t),s=[],r={},u=(c,p,g)=>{(S=>{r[S.moduleName]||(r[S.moduleName]=!0,s.push(S),Ps.__register(S,c,g))})(p),p.dependantModules&&p.dependantModules.forEach(S=>u(c,S,g))};return u(!!(i!=null&&i.length)||!Ps.__isPackageBased(),By,void 0),i&&i.forEach(c=>u(!0,c,t)),n&&n.forEach(c=>u(!Ps.__isPackageBased(),c,void 0)),s}registerModuleUserComponents(e,t){const i=this.extractModuleEntity(t,s=>s.userComponents?s.userComponents:[]),n=e.getBean("userComponentRegistry");i.forEach(({name:s,classImp:r,params:u})=>{n.registerDefaultComponent(s,r,u)})}registerModuleApiFunctions(e,t){const i=e.getBean("apiFunctionService");t.forEach(n=>{const s=n.apiFunctions;s&&Object.keys(s).forEach(u=>{i==null||i.addFunction(u,s[u])})})}createProvidedBeans(e,t,i){let n=i?i.frameworkOverrides:null;ut(n)&&(n=new Ly);const s={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:n};return i&&i.providedBeanInstances&&Object.assign(s,i.providedBeanInstances),s}createBeansList(e="clientSide",t,i){const n=t.filter(p=>!p.rowModel||p.rowModel===e),s={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!s[e]){Ct("Could not find row model for rowModelType = ",e);return}if(!Ps.__assertRegistered(s[e],`rowModelType = '${e}'`,i))return;const r=[hL,cL,Ek,Sk,Y_,UD,nL,sL,jT,VS,kk,zT,bk,O_,fM,Ux,gL,Fk,$_,Uy,Ax,E0,Mk,Dk,I_,Wk,Lx,WT,zk,Uk,L_,UT,dM,mL,VT,pL,Z_,V_,BT,Gk,Lk,_k,Nk,Vk,$T,X_,Ik,Ok,uL,vL,dL,aL,Hk,Ak,KT,xk,Tk,ZT,Ox,J_,Nx,Ix,eL,tL,zx,kx,Vx,iL,Wx,xx],u=this.extractModuleEntity(n,p=>p.beans?p.beans:[]);r.push(...u);const c=[];return r.forEach(p=>{c.indexOf(p)<0&&c.push(p)}),c}extractModuleEntity(e,t){return[].concat(...e.map(t))}},$y=class extends ie{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){const e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function Zk(e){e.expansionService.expandAll(!0)}function qk(e){e.expansionService.expandAll(!1)}function Yk(e){var n,s;const t=(n=e.rowModelHelperService)==null?void 0:n.getClientSideRowModel(),i=(s=e.rowModelHelperService)==null?void 0:s.getServerSideRowModel();t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}function Qk(e,t,i){var r,u;const n=(r=e.rowModelHelperService)==null?void 0:r.getServerSideRowModel();if(n){if(e.funcColsService.isRowGroupEmpty()){n.setRowCount(t,i);return}Ct("setRowCount cannot be used while using row grouping.");return}const s=(u=e.rowModelHelperService)==null?void 0:u.getInfiniteRowModel();if(s){s.setRowCount(t,i);return}}function Xk(e){var t;return((t=e.rowNodeBlockLoader)==null?void 0:t.getBlockState())??{}}function Jk(e){return e.rowModel.isLastRowIndexKnown()}var eO={version:je,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:Zk,collapseAll:qk,onRowHeightChanged:Yk}},tO={version:je,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:Qk,getCacheBlockState:Xk,isLastRowIndexKnown:Jk}},iO=class{wrap(e,t,i=[],n){const s=this.createWrapper(e,n);return t.forEach(r=>{this.createMethod(s,r,!0)}),i.forEach(r=>{this.createMethod(s,r,!1)}),s}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&se("Framework component is missing the method "+t+"()"),null)}}},pa=typeof global>"u"?{}:global;pa.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;pa.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;pa.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;pa.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;pa.Node=typeof Node>"u"?{}:Node;pa.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var nO="ROOT_NODE_ID",Jp=0,sO=class{constructor(e,t,i,n,s,r){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=i,this.funcColsService=n,this.beans=r,this.selectionService=s,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=nO,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return fS(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){se("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const t=this.rootNode,i=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map((n,s)=>this.createNode(n,this.rootNode,Jp,s)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=t.childrenAfterFilter,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenAfterAggFilter=t.childrenAfterAggFilter,i.childrenAfterSort=t.childrenAfterSort,i.childrenMapped=t.childrenMapped,i.allLeafChildren=t.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const t={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[];return this.executeRemove(e,t,i),this.executeUpdate(e,t,i),this.executeAdd(e,t),this.updateSelection(i,"rowDataChanged"),t}updateRowOrderFromRowData(e){const t=this.rootNode.allLeafChildren,i=(t==null?void 0:t.length)??0,n=new Map;let s=-1,r=-1;for(let u=0;u<i;++u){const c=t[u],p=c.data;p!==e[u]&&(r<0&&(s=u),r=u,n.set(p,c))}if(s<0)return!1;for(let u=s;u<=r;++u){const c=n.get(e[u]);c!==void 0&&(t[u]=c,c.sourceRowIndex=u)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e!=null&&e.length?e[0]:null})}updateSelection(e,t){const i=e.length>0;i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),i&&this.eventService.dispatchEvent({type:"selectionChanged",source:t})}executeAdd(e,t){const i=e.add;if(fn(i))return;const n=this.rootNode.allLeafChildren;let s=n.length;if(typeof e.addIndex=="number"&&(s=this.sanitizeAddIndex(e.addIndex),s>0&&this.gos.get("treeData")))for(let p=0;p<n.length;p++){const g=n[p];if((g==null?void 0:g.rowIndex)==s-1){s=p+1;break}}const r=i.map((c,p)=>this.createNode(c,this.rootNode,Jp,s+p));if(s<n.length){const c=n.slice(0,s),p=n.slice(s,n.length),g=c.length+r.length;for(let v=0,S=p.length;v<S;++v)p[v].sourceRowIndex=g+v;this.rootNode.allLeafChildren=[...c,...r,...p],t.rowsInserted=!0}else this.rootNode.allLeafChildren=n.concat(r);const u=this.rootNode.sibling;u&&(u.allLeafChildren=n),t.rowNodeTransaction.add=r}sanitizeAddIndex(e){var i;const t=((i=this.rootNode.allLeafChildren)==null?void 0:i.length)??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}executeRemove(e,{rowNodeTransaction:t},i){var u,c;const{remove:n}=e;if(fn(n))return;const s={};n.forEach(p=>{const g=this.lookupRowNode(p);g&&(g.isSelected()&&i.push(g),g.clearRowTopAndRowIndex(),s[g.id]=!0,delete this.allNodesMap[g.id],t.remove.push(g))}),this.rootNode.allLeafChildren=((u=this.rootNode.allLeafChildren)==null?void 0:u.filter(p=>!s[p.id]))??null,(c=this.rootNode.allLeafChildren)==null||c.forEach((p,g)=>{p.sourceRowIndex=g});const r=this.rootNode.sibling;r&&(r.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,{rowNodeTransaction:t},i){const{update:n}=e;fn(n)||n.forEach(s=>{const r=this.lookupRowNode(s);r&&(r.updateData(s),!r.selectable&&r.isSelected()&&i.push(r),this.setMasterForRow(r,s,Jp,!1),t.update.push(r))})}lookupRowNode(e){var n;const t=ua(this.gos);let i;if(t){const s=t({data:e,level:0});if(i=this.allNodesMap[s],!i)return Ct(`could not find row id=${s}, data item was not found for this id`),null}else if(i=(n=this.rootNode.allLeafChildren)==null?void 0:n.find(s=>s.data===e),!i)return Ct("could not find data item as object was not found",e),Ct("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,t,i,n){const s=new ho(this.beans);return s.sourceRowIndex=n,s.group=!1,this.setMasterForRow(s,e,i,!0),t&&(s.parent=t),s.level=i,s.setDataAndId(e,this.nextId.toString()),this.allNodesMap[s.id]&&se(`duplicate node id '${s.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[s.id]=s,this.nextId++,s}setMasterForRow(e,t,i,n){if(this.gos.get("treeData"))e.setMaster(!1),n&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const u=this.gos.get("isRowMaster");u?e.setMaster(u(t)):e.setMaster(!0)}else e.setMaster(!1);if(n){const u=this.funcColsService.getRowGroupColumns(),c=u?u.length:0,p=i+c;e.expanded=e.master?this.isExpanded(p):!1}}}isExpanded(e){const t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},oO=class extends ie{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=Oi(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new ho(this.beans),this.nodeManager=new sO(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),n=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),s=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),r=new Set(["postSortRows","groupDisplayType","accentedSort"]),u=new Set([]),c=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),p=[...e,...t,...i,...n,...n,...s,...r,...u,...c];this.addManagedPropertyListeners(p,g=>{var y;const v=(y=g.changeSet)==null?void 0:y.properties;if(!v)return;const S=E=>v.some(b=>E.has(b));if(S(e)){this.setRowData(this.rootNode.allLeafChildren.map(E=>E.data));return}if(S(t)){this.refreshModel({step:"group"});return}if(S(i)){this.refreshModel({step:"filter"});return}if(S(n)){this.refreshModel({step:"pivot"});return}if(S(s)){this.refreshModel({step:"aggregate"});return}if(S(r)){this.refreshModel({step:"sort"});return}if(S(u)){this.refreshModel({step:"filter_aggregates"});return}S(c)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,n){let s,r=!1;do{s=!1;const u=this.getRowIndexAtPixel(e),c=this.getRowIndexAtPixel(t),p=Math.max(u,i),g=Math.min(c,n);for(let v=p;v<=g;v++){const S=this.getRow(v);if(S.rowHeightEstimated){const y=ar(this.gos,S);S.setRowHeight(y.height),s=!0,r=!0}}s&&this.setRowTopAndRowIndex()}while(s);return r}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const i=new Set,n=pi(this.gos,"normal");for(let s=0;s<this.rowsToDisplay.length;s++){const r=this.rowsToDisplay[s];if(r.id!=null&&i.add(r.id),r.rowHeight==null){const u=ar(this.gos,r,n,e);r.setRowHeight(u.height,u.estimated)}r.setRowTop(t),r.setRowIndex(s),t+=r.rowHeight}return i}clearRowTopAndRowIndex(e,t){const i=e.isActive(),n=r=>{r&&r.id!=null&&!t.has(r.id)&&r.clearRowTopAndRowIndex()},s=r=>{if(n(r),n(r.detailNode),n(r.sibling),r.hasChildren()&&r.childrenAfterGroup){const u=r.level==-1;i&&!u&&!r.expanded||r.childrenAfterGroup.forEach(s)}};s(this.rootNode)}ensureRowsAtPixel(e,t,i=0){const n=this.getRowIndexAtPixel(t),s=this.getRow(n),r=!this.gos.get("suppressAnimationFrame");if(s===e[0])return!1;const u=this.rootNode.allLeafChildren;return e.forEach(c=>{Ni(u,c)}),e.forEach((c,p)=>{bd(u,c,Math.max(n+i,0)+p)}),e.forEach((c,p)=>{c.sourceRowIndex=p}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:r,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,t){const i=t!=null?this.getRowIndexAtPixel(t):null,n=i!=null?this.getRow(i):null;if(!n||!e||t==null){this.clearHighlightedRow();return}const s=this.getHighlightPosition(t,n),r=this.isHighlightingCurrentPosition(e,n,s),u=this.lastHighlightedRow!=null&&this.lastHighlightedRow!==n;(r||u)&&(this.clearHighlightedRow(),r)||(n.setHighlighted(s),this.lastHighlightedRow=n)}getHighlightPosition(e,t){if(!t){const s=this.getRowIndexAtPixel(e);if(t=this.getRow(s||0),!t)return 1}const{rowTop:i,rowHeight:n}=t;return e-i<n/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,i){if(e===t)return!0;const n=i===0?-1:1;return this.getRow(t.rowIndex+n)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const t=this.rootNode.childrenAfterAggFilter,i=this.rootNode.sibling?1:0;return(t?t.length:0)+i}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let i=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;i-=1}const n=this.rowsToDisplay[this.rowsToDisplay.length-1],s=i>=this.rootNode.childrenAfterSort.length;if(n.footer&&s)return n.rowIndex;let r=this.rootNode.childrenAfterSort[i];if(this.gos.get("groupHideOpenParents"))for(;r.expanded&&r.childrenAfterSort&&r.childrenAfterSort.length>0;)r=r.childrenAfterSort[0];return r.rowIndex}getRowBounds(e){if(ut(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=ea(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=ea(this.gos),n=e.columns.length===0||e.columns.some(s=>s.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:n,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=ea(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=fn(e),i=new Qd(!1,this.rootNode);return t&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;const t=e.rowNodeTransactions.filter(n=>n.add!=null&&n.add.length>0||n.remove!=null&&n.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group";const i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",filter_aggregates:"filter_aggregates",sort:"sort",pivot:"pivot",nothing:"nothing"};if(ge(e)&&(t=i[e]),ut(t)){Ct(`invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return}const n=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:n}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;const t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,i,!!t.rowNodesOrderChanged,!!t.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(t.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}const n=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,n),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){const e=ut(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return ut(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return ge(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,n=!1;const s=[],r=Jr(this.gos);return this.forEachNodeAfterFilterAndSort(u=>{if(n)return;if(i&&(u===t||u===e)&&(n=!0,u.group&&r)){s.push(...u.allLeafChildren);return}if(!i){if(u!==t&&u!==e)return;i=!0}if(!u.group||!r){s.push(u);return}}),s}setDatasource(e){Ct("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(at(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let s=-1,r=-1;for(;;){const u=Math.floor((t+i)/2),c=this.rowsToDisplay[u];if(this.isRowInPixel(c,e)||(c.rowTop<e?t=u+1:c.rowTop>e&&(i=u-1),s===t&&r===i))return u;s=t,r=i}}isRowInPixel(e,t){const i=e.rowTop,n=e.rowTop+e.rowHeight;return i<=t&&n>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,i)=>e(t,i))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:i,recursionType:n,includeFooterNodes:s}=e;let{index:r}=e;const u=c=>{var E;const p=(E=t[0])==null?void 0:E.parent;if(!p)return;const g=s&&sS(this.gos),v=oS(this.gos),S=s&&v({node:p});if(p===this.rootNode){g===c&&(p.createFooter(),i(p.sibling,r++));return}S===c&&(p.createFooter(),i(p.sibling,r++))};u("top");for(let c=0;c<t.length;c++){const p=t[c];if(i(p,r++),p.hasChildren()&&!p.footer){let g=null;switch(n){case 0:g=p.childrenAfterGroup;break;case 1:g=p.childrenAfterAggFilter;break;case 2:g=p.childrenAfterSort;break;case 3:g=p.leafGroup?null:p.childrenAfterSort;break}g&&(r=this.recursivelyWalkNodesAndCallback({nodes:[...g],callback:i,recursionType:n,index:r,includeFooterNodes:s}))}}return u("bottom"),r}doAggregate(e){var t;(t=this.aggregationStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),n=s=>{s&&s.forEach(r=>{const u=()=>{r.expanded=e,n(r.childrenAfterGroup)};if(t){ge(r.childrenAfterGroup)&&u();return}if(i){!r.leafGroup&&u();return}r.group&&u()})};this.rootNode&&n(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,n){if(this.groupStage)e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:i,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:n}),Jr(this.gos)&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"});else{const s=this.rootNode,r=s.sibling;s.childrenAfterGroup=s.allLeafChildren,r&&(r.childrenAfterGroup=s.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){var t;(t=this.pivotStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if(typeof e=="string"&&e.indexOf(ho.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(n=>{n.id===e&&(i=n)}),i}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const i=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var n;this.valueCache.onDataChanged();const e=[],t=[];let i=!1;(n=this.rowDataTransactionBatch)==null||n.forEach(s=>{const{rowNodeTransaction:r,rowsInserted:u}=this.nodeManager.updateRowData(s.rowDataTransaction);u&&(i=!0),t.push(r),s.callback&&e.push(s.callback.bind(null,r))}),this.commonUpdateRowData(t,i),e.length>0&&window.setTimeout(()=>{e.forEach(s=>s())},0),t.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();const{rowNodeTransaction:t,rowsInserted:i}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([t],i),t}afterImmutableDataChange(e,t){this.commonUpdateRowData([e],t)}commonUpdateRowData(e,t){if(!this.hasStarted)return;const i=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow()}};function rO(e){e.expansionService.onGroupExpandedOrCollapsed()}function lO(e,t){var i,n;(n=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||n.refreshModel(t)}function aO(e){var t,i;return((i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null?void 0:i.isEmpty())??!0}function uO(e,t){var i,n;(n=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||n.forEachLeafNode(t)}function cO(e,t){var i,n;(n=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||n.forEachNodeAfterFilter(t)}function dO(e,t){var i,n;(n=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||n.forEachNodeAfterFilterAndSort(t)}function hO(e){var t,i;if(e.columnModel.isAutoRowHeightActive()){se("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}(i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null||i.resetRowHeights()}function pO(e,t){return e.frameworkOverrides.wrapIncoming(()=>{var i,n;return(n=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null?void 0:n.updateRowData(t)})}function fO(e,t,i){e.frameworkOverrides.wrapIncoming(()=>{var n,s;return(s=(n=e.rowModelHelperService)==null?void 0:n.getClientSideRowModel())==null?void 0:s.batchUpdateRowData(t,i)})}function gO(e){e.frameworkOverrides.wrapIncoming(()=>{var t,i;return(i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null?void 0:i.flushAsyncTransactions()})}function mO(e){return e.selectionService.getBestCostNodeSelection()}var vO=class extends ie{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var i;const t=!!((i=this.filterManager)!=null&&i.isChildFilterPresent());this.filterNodes(t,e)}filterNodes(e,t){const i=(n,s)=>{n.hasChildren()&&e&&!s?n.childrenAfterFilter=n.childrenAfterGroup.filter(r=>{const u=r.childrenAfterFilter&&r.childrenAfterFilter.length>0,c=r.data&&this.filterManager.doesRowPassFilter({rowNode:r});return u||c}):n.childrenAfterFilter=n.childrenAfterGroup,n.sibling&&(n.sibling.childrenAfterFilter=n.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const n=(r,u)=>{if(r.childrenAfterGroup)for(let c=0;c<r.childrenAfterGroup.length;c++){const p=r.childrenAfterGroup[c],g=u||this.filterManager.doesRowPassFilter({rowNode:p});p.childrenAfterGroup?n(r.childrenAfterGroup[c],g):i(p,g)}i(r,u)},s=r=>n(r,!1);t.executeFromRootNode(s)}else{const n=s=>i(s,!1);t.forEachChangedNodeDepthFirst(n,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},CO=class extends ie{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){const t=e.rowNode,i=[],n=this.columnModel.isPivotMode(),s=n&&t.leafGroup,r=s?[t]:t.childrenAfterSort,u=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(u,r,i,n,0);const c=i.length>0;if(!s&&c&&u.grandTotalRow){t.createFooter();const g=u.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(u,t.sibling,i,0,g)}return i}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:rS(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:sS(this.gos),groupTotalRow:oS(this.gos)}}recursivelyAddToRowsToDisplay(e,t,i,n,s){if(!fn(t))for(let r=0;r<t.length;r++){const u=t[r],c=u.hasChildren(),p=n&&!c,g=e.groupRemoveSingleChildren&&c&&u.childrenAfterGroup.length===1,v=e.groupRemoveLowestSingleChildren&&c&&u.leafGroup&&u.childrenAfterGroup.length===1,S=n&&u.leafGroup,y=e.hideOpenParents&&u.expanded&&!u.master&&!S;if(!p&&!y&&!g&&!v&&this.addRowNodeToRowsToDisplay(e,u,i,s),!(n&&u.leafGroup)){if(c){const b=g||v;if(u.expanded||b){const M=e.groupTotalRow({node:u});M||u.destroyFooter();const x=b?s:s+1;M==="top"&&(u.createFooter(),this.addRowNodeToRowsToDisplay(e,u.sibling,i,x)),this.recursivelyAddToRowsToDisplay(e,u.childrenAfterSort,i,n,x),M==="bottom"&&(u.createFooter(),this.addRowNodeToRowsToDisplay(e,u.sibling,i,x))}}else if(u.master&&u.expanded){const b=this.createDetailNode(u);this.addRowNodeToRowsToDisplay(e,b,i,s)}}}}addRowNodeToRowsToDisplay(e,t,i,n,s){s?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:n)}createDetailNode(e){if(ge(e.detailNode))return e.detailNode;const t=new ho(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,ge(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},wO=class extends ie{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){At(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const i=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:n,rowsInserted:s}=i.updateRowData(t);let r=!1;this.gos.get("suppressMaintainUnsortedOrder")||(r=i.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(n,r||s)}createTransactionForRowData(e){if(!At(this.gos))return Ct("ImmutableService only works with ClientSideRowModel"),null;const t=ua(this.gos);if(t==null)return Ct("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;const i=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),n=[],s=[],r=[];return ge(e)&&e.forEach(u=>{const c=t({data:u,level:0}),p=i[c];p?(p.data!==u&&s.push(u),i[c]=void 0):r.push(u)}),ts(i,(u,c)=>{c&&n.push(c.data)}),{remove:n,update:s,add:r}}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},SO=class extends ie{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,i,n,s,r){const u=this.gos.get("groupMaintainOrder"),c=this.columnModel.getCols().some(y=>y.isRowGroupActive());let p={};i&&n&&(p=this.calculateDirtyNodes(n));const g=this.columnModel.isPivotMode(),v=this.gos.getCallback("postSortRows"),S=y=>{var M;this.pullDownGroupDataForHideOpenParents(y.childrenAfterAggFilter,!0);const E=g&&y.leafGroup;if(u&&c&&!y.leafGroup&&!r){const x=(M=this.funcColsService.getRowGroupColumns())==null?void 0:M[y.level+1],_=(x==null?void 0:x.getSort())===null,k=y.childrenAfterAggFilter.slice(0);if(y.childrenAfterSort&&!_){const I={};y.childrenAfterSort.forEach((H,A)=>{I[H.id]=A}),k.sort((H,A)=>(I[H.id]??0)-(I[A.id]??0))}y.childrenAfterSort=k}else!t||E?y.childrenAfterSort=y.childrenAfterAggFilter.slice(0):i?y.childrenAfterSort=this.doDeltaSort(y,p,s,e):y.childrenAfterSort=this.rowNodeSorter.doFullSort(y.childrenAfterAggFilter,e);if(y.sibling&&(y.sibling.childrenAfterSort=y.childrenAfterSort),this.updateChildIndexes(y),v){const x={nodes:y.childrenAfterSort};v(x)}};s&&s.forEachChangedNodeDepthFirst(S),this.updateGroupDataForHideOpenParents(s)}calculateDirtyNodes(e){const t={},i=n=>{n&&n.forEach(s=>t[s.id]=!0)};return e&&e.forEach(n=>{i(n.add),i(n.update),i(n.remove)}),t}doDeltaSort(e,t,i,n){const s=e.childrenAfterAggFilter,r=e.childrenAfterSort;if(!r)return this.rowNodeSorter.doFullSort(s,n);const u={},c=[];s.forEach(S=>{t[S.id]||!i.canSkip(S)?c.push(S):u[S.id]=!0});const p=r.filter(S=>u[S.id]),g=(S,y)=>({currentPos:y,rowNode:S}),v=c.map(g).sort((S,y)=>this.rowNodeSorter.compareRowNodes(n,S,y));return this.mergeSortedArrays(n,v,p.map(g)).map(({rowNode:S})=>S)}mergeSortedArrays(e,t,i){const n=[];let s=0,r=0;for(;s<t.length&&r<i.length;)this.rowNodeSorter.compareRowNodes(e,t[s],i[r])<0?n.push(t[s++]):n.push(i[r++]);for(;s<t.length;)n.push(t[s++]);for(;r<i.length;)n.push(i[r++]);return n}updateChildIndexes(e){if(ut(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const n=t[i],s=i===0,r=i===e.childrenAfterSort.length-1;n.setFirstChild(s),n.setLastChild(r),n.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return se("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(n=>{n.hasChildren()&&t(n)})};e&&e.executeFromRootNode(i=>t(i))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||ut(e)||e.forEach(i=>{var s;(((s=this.showRowGroupColsService)==null?void 0:s.getShowRowGroupCols())??[]).forEach(r=>{const u=r.getColDef().showRowGroup;if(typeof u!="string"){Ct("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const c=u,p=this.columnModel.getColDefCol(c);if(p!==i.rowGroupColumn)if(t)i.setGroupValue(r.getId(),void 0);else{const v=this.getFirstChildOfFirstChild(i,p);v&&i.setGroupValue(r.getId(),v.key)}})})}getFirstChildOfFirstChild(e,t){let i=e;for(;i;){const n=i.parent;if(n&&i.firstChild){if(n.rowGroupColumn===t)return n}else return null;i=n}return null}},yO=class extends ie{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){const t=this.sortController.getSortOptions(),i=ge(t)&&t.length>0,n=i&&ge(e.rowNodeTransactions)&&this.gos.get("deltaSort"),s=t.some(r=>Rs(this.gos)?r.column.isPrimary()&&r.column.isRowGroupActive():!!r.column.getColDef().showRowGroup);this.sortService.sort(t,i,n,e.rowNodeTransactions,e.changedPath,s)}},Ig="32.3.3",Ky={version:Ig,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[oO,vO,yO,CO,SO,wO]},RO={version:Ig,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[$y],apiFunctions:{onGroupExpandedOrCollapsed:rO,refreshClientSideRowModel:lO,isRowDataEmpty:aO,forEachLeafNode:uO,forEachNodeAfterFilter:cO,forEachNodeAfterFilterAndSort:dO,resetRowHeights:hO,applyTransaction:pO,applyTransactionAsync:fO,flushAsyncTransactions:gO,getBestCostNodeSelection:mO},dependantModules:[Ky,eO]},PO={version:Ig,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[Ky,RO]},FO=class extends ie{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},EO=class{constructor(e){this.groupColumns=[];const{columnModel:t,funcColsService:i,columnNameService:n,valueService:s,gos:r,processCellCallback:u,processHeaderCallback:c,processGroupHeaderCallback:p,processRowGroupCallback:g}=e;this.columnModel=t,this.funcColsService=i,this.columnNameService=n,this.valueService=s,this.gos=r,this.processCellCallback=u,this.processHeaderCallback=c,this.processGroupHeaderCallback=p,this.processRowGroupCallback=g}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,n,s){const u=(!this.gos.get("groupHideOpenParents")||s.footer)&&this.shouldRenderGroupSummaryCell(s,e,t)?this.createValueForGroupNode(e,s):this.valueService.getValue(e,s);return this.processCell({accumulatedRowIndex:i,rowNode:s,column:e,value:u,processCellCallback:this.processCellCallback,type:n})}shouldRenderGroupSummaryCell(e,t,i){var u;if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){const c=(u=e.groupData)==null?void 0:u[t.getId()],p=this.gos.get("suppressGroupMaintainValueType");if(p&&c!=null||!p&&c!==void 0||Ts(this.gos)&&e.group)return!0;if(e.footer&&e.level===-1){const g=t.getColDef();return g==null||g.showRowGroup===!0||g.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}const r=jd(this.gos,this.columnModel.isPivotMode());return i===0&&r}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const i=this.gos.get("treeData"),n=this.gos.get("suppressGroupMaintainValueType"),s=p=>{var v;if(i||n)return p.key;const g=(v=p.groupData)==null?void 0:v[e.getId()];return!g||!p.rowGroupColumn||p.rowGroupColumn.getColDef().useValueFormatterForExport===!1?g:this.valueService.formatValue(p.rowGroupColumn,p,g)??g},r=t.footer,u=[s(t)];if(!rS(this.gos))for(;t.parent;)t=t.parent,u.push(s(t));const c=u.reverse().join(" -> ");return r?`Total ${c}`:c}processCell(e){const{accumulatedRowIndex:t,rowNode:i,column:n,value:s,processCellCallback:r,type:u}=e;return r?{value:r(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:n,node:i,value:s,type:u,parseValue:c=>this.valueService.parseValue(n,i,c,this.valueService.getValue(n,i)),formatValue:c=>this.valueService.formatValue(n,i,c)??c}))??""}:n.getColDef().useValueFormatterForExport!==!1?{value:s??"",valueFormatted:this.valueService.formatValue(n,i,s)}:{value:s??""}}},bO=class{static download(e,t){const i=document.defaultView||window;if(!i){se("There is no `window` associated with the current `document`");return}const n=document.createElement("a"),s=i.URL.createObjectURL(t);n.setAttribute("href",s),n.setAttribute("download",e),n.style.display="none",document.body.appendChild(n),n.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(n),i.setTimeout(()=>{i.URL.revokeObjectURL(s)},0)}},zC=`\r
`,xO=class extends EO{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,zC),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((i,n)=>{n!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,n){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(n)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){t!=0&&(this.result+=this.columnSeparator);const n=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(n.valueFormatted??n.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(se("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=zC),this.isFirstLine=!1}},DO=class extends FO{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){se("Export cancelled. Export is not allowed as per your configuration.");return}const t=this.getMergedParams(e),i=this.getData(t),n=new Blob(["\uFEFF",i],{type:"text/plain"}),s=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;bO.download(this.getFileName(s),n)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,columnNameService:i,funcColsService:n,valueService:s,gos:r}=this,{processCellCallback:u,processHeaderCallback:c,processGroupHeaderCallback:p,processRowGroupCallback:g,suppressQuotes:v,columnSeparator:S}=e;return new xO({columnModel:t,columnNameService:i,funcColsService:n,valueService:s,gos:r,processCellCallback:u||void 0,processHeaderCallback:c||void 0,processGroupHeaderCallback:p||void 0,processRowGroupCallback:g||void 0,suppressQuotes:v||!1,columnSeparator:S||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function MO(e,t){var i;return(i=e.csvCreator)==null?void 0:i.getDataAsCsv(t)}function TO(e,t){var i;(i=e.csvCreator)==null||i.exportDataAsCsv(t)}var _O=class extends ie{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){const{allColumns:i,columnKeys:n,skipRowGroups:s}=t,r=this.getColumnsToExport(i,s,n);return lx(this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t))(e).parse()}processRow(e,t,i,n){var _;const s=t.shouldRowBeSkipped||(()=>!1),r=this.gos.get("groupRemoveSingleChildren"),u=this.gos.get("groupRemoveLowestSingleChildren"),p=t.rowPositions!=null||!!t.onlySelected,g=this.gos.get("groupHideOpenParents")&&!p,v=this.columnModel.isPivotMode()?n.leafGroup:!n.group,S=!!n.footer,y=u&&n.leafGroup,E=n.allChildrenCount===1&&((_=n.childrenAfterGroup)==null?void 0:_.length)===1&&(r||y);if(!v&&!S&&(t.skipRowGroups||E||g)||t.onlySelected&&!n.isSelected()||t.skipPinnedTop&&n.rowPinned==="top"||t.skipPinnedBottom&&n.rowPinned==="bottom"||n.level===-1&&!v&&!S||s(this.gos.addGridCommonParams({node:n})))return;const x=e.onNewBodyRow(n);if(i.forEach((k,I)=>{x.onColumn(k,I,n)}),t.getCustomContentBelowRow){const k=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:n}));k&&e.addCustomContent(k)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const n=new CS,s=this.visibleColsService.createGroups({columns:t,idCreator:n,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(s,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const n=i.onNewHeaderRow();t.forEach((s,r)=>{n.onColumn(s,r,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{const n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="top").sort((s,r)=>s.rowIndex-r.rowIndex).map(s=>this.pinnedRowModel.getPinnedTopRow(s.rowIndex)).forEach(n):this.pinnedRowModel.forEachPinnedRow("top",n),i}}processRows(e,t){return i=>{const n=this.rowModel,s=At(this.gos),r=Ts(this.gos),u=!s&&e.onlySelected,c=this.processRow.bind(this,i,e,t),{exportedRows:p="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(g=>g.rowPinned==null).sort((g,v)=>g.rowIndex-v.rowIndex).map(g=>n.getRow(g.rowIndex)).forEach(c);else if(this.columnModel.isPivotMode())s?n.forEachPivotNode(c,!0):r?n.forEachNodeAfterFilterAndSort(c,!0):n.forEachNode(c);else if(e.onlySelectedAllPages||u){const g=this.selectionService.getSelectedNodes();this.replicateSortedOrder(g),g.forEach(c)}else p==="all"?n.forEachNode(c):s||r?n.forEachNodeAfterFilterAndSort(c,!0):n.forEachNode(c);return i}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),i=(n,s)=>{var r,u;return n.rowIndex!=null&&s.rowIndex!=null?n.rowIndex-s.rowIndex:n.level===s.level?((r=n.parent)==null?void 0:r.id)===((u=s.parent)==null?void 0:u.id)?this.rowNodeSorter.compareRowNodes(t,{rowNode:n,currentPos:n.rowIndex??-1},{rowNode:s,currentPos:s.rowIndex??-1}):i(n.parent,s.parent):n.level>s.level?i(n.parent,s):i(n,s.parent)};e.sort(i)}processPinnedBottomRows(e,t){return i=>{const n=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(s=>s.rowPinned==="bottom").sort((s,r)=>s.rowIndex-r.rowIndex).map(s=>this.pinnedRowModel.getPinnedBottomRow(s.rowIndex)).forEach(n):this.pinnedRowModel.forEachPinnedRow("bottom",n),i}}getColumnsToExport(e=!1,t=!1,i){const n=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getColsForKeys(i);const s=this.gos.get("treeData");let r=[];return e&&!n?r=this.columnModel.getCols():r=this.visibleColsService.getAllCols(),t&&!s&&(r=r.filter(u=>vf(u)||Ou(u))),r}recursivelyAddHeaderGroups(e,t,i){const n=[];e.forEach(s=>{const r=s;r.getChildren&&r.getChildren().forEach(u=>n.push(u))}),e.length>0&&Yt(e[0])&&this.doAddHeaderHeader(t,e,i),n&&n.length>0&&this.recursivelyAddHeaderGroups(n,t,i)}doAddHeaderHeader(e,t,i){const n=e.onNewHeaderGroupingRow();let s=0;t.forEach(r=>{const u=r;let c;i?c=i(this.gos.addGridCommonParams({columnGroup:u})):c=this.columnNameService.getDisplayNameForColumnGroup(u,"header");const p=u.getLeafColumns().reduce((g,v,S,y)=>{let E=at(g);return v.getColumnGroupShow()==="open"?(!E||E[1]!=null)&&(E=[S],g.push(E)):E&&E[1]==null&&(E[1]=S-1),S===y.length-1&&E&&E[1]==null&&(E[1]=S),g},[]);n.onColumn(u,c||"",s++,u.getLeafColumns().length-1,p)})}},kg="32.3.3",Zy={version:kg,moduleName:"@ag-grid-community/csv-export-core",beans:[DO,_O]},LO={version:kg,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:MO,exportDataAsCsv:TO},dependantModules:[Zy]},AO={version:kg,moduleName:"@ag-grid-community/csv-export",dependantModules:[Zy,LO]},IO=class extends N_{wireBeans(e){this.beans=e}constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){ge(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(ut(this.params.datasource.getRows)){se("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach((n,s)=>{this.startRow+s<i&&e(n,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());const i=e-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,i=new ho(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach((i,n)=>{const s=e.rowData?e.rowData[n]:void 0;!i.id&&i.alreadyRendered&&s&&(this.rowNodes[n]=new ho(this.beans),this.rowNodes[n].setRowIndex(i.rowIndex),this.rowNodes[n].setRowTop(i.rowTop),this.rowNodes[n].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[n],s,this.startRow+n)});const t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},kO=2,OO=class extends ie{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){const i=Math.floor(e/this.params.blockSize);let n=this.blocks[i];if(!n){if(t)return;n=this.createBlock(i)}return n.getRow(e)}createBlock(e){const t=this.createBean(new IO(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&is(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(u=>u!=e),i=(u,c)=>c.getLastAccessed()-u.getLastAccessed();t.sort(i);const n=this.params.maxBlocksInCache>0,s=n?this.params.maxBlocksInCache-1:null,r=kO-1;t.forEach((u,c)=>{const p=u.getState()==="needsLoading"&&c>=r,g=n?c>=s:!1;if(p||g){if(this.isBlockCurrentlyDisplayed(u)||this.isBlockFocused(u))return;this.removeBlockFromCache(u)}})}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const i=e.getStartRow(),n=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<n}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const n=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<n&&(this.rowCount=n)}}setRowCount(e,t){this.rowCount=e,ge(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new ra;this.getBlocksInOrder().forEach(i=>i.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(i,n)=>i.getId()-n.getId();return wf(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let n=-1,s=!1;const r=new ra;let u=!1;return this.getBlocksInOrder().forEach(p=>{if(!u){if(s&&n+1!==p.getId()){u=!0;return}n=p.getId(),p.forEachNode(g=>{const v=g===e||g===t;(s||v)&&i.push(g),v&&(s=!s)},r,this.rowCount)}}),u||s?[]:i}},NO=class extends ie{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=Zr(this.gos),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&se("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=Zr(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!Ru(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;ua(this.gos)!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){var e;this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:((e=this.filterManager)==null?void 0:e.getFilterModel())??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:Zr(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new ra},this.infiniteCache=this.createBean(new OO(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function GO(e){var t,i;(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null||i.refreshCache()}function HO(e){var t,i;(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null||i.purgeCache()}function BO(e){var t,i;return(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null?void 0:i.getRowCount()}var Og="32.3.3",qy={version:Og,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[NO],dependantModules:[H_]},VO={version:Og,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[$y],apiFunctions:{refreshInfiniteCache:GO,purgeInfiniteCache:HO,getInfiniteRowCount:BO},dependantModules:[qy,tO]},WO={version:Og,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[qy,VO]};Ps.__registerModules([By,PO,WO,AO],!1,void 0);var Ei=ae.createContext({}),Vu=(e,t,i,n)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const r=e.newAgStackInstance();if(r==null)return;let u,c,p=!1;return r.then(g=>{if(p){t.destroyBean(g);return}u=g,c=u.getGui(),i.appendChild(c),UC(n,u)}),()=>{var g;p=!0,u&&((g=c==null?void 0:c.parentElement)==null||g.removeChild(c),t.destroyBean(u),n&&UC(n,void 0))}},UC=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const i=e;i.current=t}},Jn=(...e)=>e.filter(i=>i!=null&&i!=="").join(" "),Ln=class Yy{constructor(...t){this.classesMap={},t.forEach(i=>{this.classesMap[i]=!0})}setClass(t,i){if(!!this.classesMap[t]==i)return this;const s=new Yy;return s.classesMap={...this.classesMap},s.classesMap[t]=i,s}toString(){return Object.keys(this.classesMap).filter(i=>this.classesMap[i]).join(" ")}},fa=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,i=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===i()},YC,Af=(YC=ae.version)==null?void 0:YC.split(".")[0],zO=Af==="16"||Af==="17";function UO(){return Af==="19"}var gd=!1;function jO(e){return gd||setTimeout(()=>gd=!1,0),gd=!0,e()}var Ng=(e,t)=>{!zO&&e&&!gd?jr.flushSync(t):t()};function Gg(e,t,i){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(i||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const n=[],s=[],r=new Map,u=new Map;for(let c=0;c<t.length;c++){const p=t[c];u.set(p.instanceId,p)}for(let c=0;c<e.length;c++){const p=e[c];r.set(p.instanceId,p),u.has(p.instanceId)&&n.push(p)}for(let c=0;c<t.length;c++){const p=t[c],g=p.instanceId;r.has(g)||s.push(p)}return n.length===e.length&&s.length===0?e:n.length===0&&s.length===t.length?t:n.length===0?s:s.length===0?n:[...n,...s]}var Qy=R.forwardRef((e,t)=>{var Te;const{ctrlsFactory:i,context:n}=R.useContext(Ei),s=R.useRef(null),r=R.useRef(null),u=R.useRef(null),c=R.useRef(null),p=R.useRef(null),g=R.useRef(),[v,S]=R.useState(),[y,E]=R.useState(),[b,M]=R.useState(),[x,_]=R.useState(()=>new Ln),[k,I]=R.useState(()=>new Ln("ag-hidden")),[H,A]=R.useState(()=>new Ln("ag-hidden")),[z,j]=R.useState(()=>new Ln("ag-invisible"));R.useImperativeHandle(t,()=>({refresh(){return!1}})),R.useLayoutEffect(()=>Vu(v,n,r.current),[v]);const te=R.useCallback(U=>{if(s.current=U,!U){g.current=n.destroyBean(g.current);return}const Se={setInnerRenderer:(N,Z)=>{S(N),M(Z)},setChildCount:N=>E(N),addOrRemoveCssClass:(N,Z)=>_(Pe=>Pe.setClass(N,Z)),setContractedDisplayed:N=>A(Z=>Z.setClass("ag-hidden",!N)),setExpandedDisplayed:N=>I(Z=>Z.setClass("ag-hidden",!N)),setCheckboxVisible:N=>j(Z=>Z.setClass("ag-invisible",!N))},J=i.getInstance("groupCellRendererCtrl");J&&(g.current=n.createBean(J),g.current.init(Se,U,u.current,c.current,p.current,Qy,e))},[]),le=R.useMemo(()=>`ag-cell-wrapper ${x.toString()}`,[x]),ve=R.useMemo(()=>`ag-group-expanded ${k.toString()}`,[k]),ue=R.useMemo(()=>`ag-group-contracted ${H.toString()}`,[H]),Re=R.useMemo(()=>`ag-group-checkbox ${z.toString()}`,[z]),Be=v&&v.componentFromFramework,Oe=Be?v.componentClass:void 0,He=v==null&&b!=null,be=Es(b,!0);return ae.createElement("span",{className:le,ref:te,...e.colDef?{}:{role:(Te=g.current)==null?void 0:Te.getCellAriaRole()}},ae.createElement("span",{className:ve,ref:c}),ae.createElement("span",{className:ue,ref:p}),ae.createElement("span",{className:Re,ref:u}),ae.createElement("span",{className:"ag-group-value",ref:r},He&&ae.createElement(ae.Fragment,null,be),Be&&ae.createElement(Oe,{...v.params})),ae.createElement("span",{className:"ag-group-child-count"},y))}),jC=Qy,Hg=R.createContext({setMethods:()=>{}}),$O=e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:n,setMethods:s}=e,[{key:r,...u},c]=R.useState(t);return R.useEffect(()=>{i(p=>c(p))},[]),ae.createElement(Hg.Provider,{value:{setMethods:s}},ae.createElement(n,{key:r,...u}))},KO=R.memo($O),ZO=0;function $C(){return`agPortalKey_${++ZO}`}var Xy=class{constructor(e,t,i,n){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!n,this.statelessComponent=this.isStateless(this.reactComponent),this.key=$C(),this.portalKey=$C(),this.instanceCreated=this.isStatelessComponent()?jt.resolve(!1):new jt(s=>{this.resolveInstanceCreated=s})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(se('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&(se('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach(t=>this.eParentElement.classList.add(t))))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i){setTimeout(()=>this.callMethod(e,t));return}const n=i[e];if(n)return n.apply(i,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new jt(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{var i;this.componentInstance=t,this.addParentContainerStyleAndClasses(),(i=this.resolveInstanceCreated)==null||i.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=Iu.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return R.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this[`${e}Component`];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function Bg(e,t,i){e.forEach(n=>{const s=t[n];s&&(i[n]=s)})}var Ls=class extends Xy{constructor(){super(...arguments),this.awaitUpdateCallback=new jt(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=KO}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:i=>this.setMethods(i),addUpdateCallback:i=>{this.updateCallback=()=>(i(this.getProps()),new jt(n=>{setTimeout(()=>{n()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,Bg(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new jt(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},qO=class extends Ls{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},YO=class extends Ls{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},QO=class extends Ls{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:i,shake:n}=this;return e.label=t,e.icon=i,e.shake=n,e}},XO=class extends Ls{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t;this.expectingNewMethods===!1&&this.hasBeenActive&&((t=this.providedMethods)==null?void 0:t.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function Jy(e,t){e.parentFilterInstance(i=>{(i.setModel(t)||jt.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var JO=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=i=>this.updateModel(i)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){Bg(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Jy(this.floatingFilterParams,e)}},eN=class extends Ls{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),Jy(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},tN=class extends Ls{refresh(e){this.sourceParams=e,this.refreshProps()}},iN=class extends Ls{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},nN=class extends Ls{refresh(e){this.sourceParams=e,this.refreshProps()}},sN=class extends Ls{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},oN=class extends Ls{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function Vg(){se("As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.")}var rN=1e3,lN=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||rN}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,i=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout(()=>{this.waitForInstance(e,t,i)})}}},aN=({ctrl:e})=>{const t=e.isAlive(),{context:i}=R.useContext(Ei),n=t?e.getColId():void 0,[s,r]=R.useState(),u=R.useRef(),c=R.useRef(null),p=R.useRef(null),g=R.useRef(null),v=R.useRef(),S=R.useRef();t&&!S.current&&(S.current=new Gu(()=>c.current));const y=R.useCallback(x=>{var I;if(c.current=x,u.current=x?i.createBean(new ca):i.destroyBean(u.current),!x||!t)return;const _={setWidth:H=>{c.current&&(c.current.style.width=H)},addOrRemoveCssClass:(H,A)=>S.current.addOrRemoveCssClass(H,A),setAriaSort:H=>{c.current&&(H?lD(c.current,H):aD(c.current))},setUserCompDetails:H=>r(H),getUserCompInstance:()=>v.current||void 0};e.setComp(_,x,p.current,g.current,u.current);const k=e.getSelectAllGui();(I=p.current)==null||I.insertAdjacentElement("afterend",k),u.current.addDestroyFunc(()=>k.remove())},[]);R.useLayoutEffect(()=>Vu(s,i,g.current,v),[s]),R.useEffect(()=>{e.setDragSource(c.current)},[s]);const E=R.useMemo(()=>!!((s==null?void 0:s.componentFromFramework)&&fa(s.componentClass)),[s]),b=s&&s.componentFromFramework,M=s&&s.componentClass;return ae.createElement("div",{ref:y,className:"ag-header-cell","col-id":n,role:"columnheader"},ae.createElement("div",{ref:p,className:"ag-header-cell-resize",role:"presentation"}),ae.createElement("div",{ref:g,className:"ag-header-cell-comp-wrapper",role:"presentation"},b&&E&&ae.createElement(M,{...s.params}),b&&!E&&ae.createElement(M,{...s.params,ref:v})))},uN=R.memo(aN),cN=({ctrl:e})=>{const{context:t,gos:i}=R.useContext(Ei),[n,s]=R.useState(()=>new Ln("ag-header-cell","ag-floating-filter")),[r,u]=R.useState(()=>new Ln),[c,p]=R.useState(()=>new Ln("ag-floating-filter-button","ag-hidden")),[g,v]=R.useState("false"),[S,y]=R.useState(),[,E]=R.useState(1),b=R.useRef(),M=R.useRef(null),x=R.useRef(null),_=R.useRef(null),k=R.useRef(null),I=R.useRef(),H=R.useRef(),A=be=>{be!=null&&I.current&&I.current(be)},z=R.useCallback(be=>{if(M.current=be,b.current=be?t.createBean(new ca):t.destroyBean(b.current),!be)return;H.current=new jt(U=>{I.current=U});const Te={addOrRemoveCssClass:(U,Se)=>s(J=>J.setClass(U,Se)),addOrRemoveBodyCssClass:(U,Se)=>u(J=>J.setClass(U,Se)),setButtonWrapperDisplayed:U=>{p(Se=>Se.setClass("ag-hidden",!U)),v(U?"false":"true")},setWidth:U=>{M.current&&(M.current.style.width=U)},setCompDetails:U=>y(U),getFloatingFilterComp:()=>H.current?H.current:null,setMenuIcon:U=>{var Se;return(Se=k.current)==null?void 0:Se.appendChild(U)}};e.setComp(Te,be,k.current,x.current,b.current)},[]);R.useLayoutEffect(()=>Vu(S,t,x.current,A),[S]);const j=R.useMemo(()=>n.toString(),[n]),te=R.useMemo(()=>r.toString(),[r]),le=R.useMemo(()=>c.toString(),[c]),ve=R.useMemo(()=>!!(S&&S.componentFromFramework&&fa(S.componentClass)),[S]),ue=R.useMemo(()=>i.get("reactiveCustomComponents"),[]),Re=R.useMemo(()=>{if(S)if(ue){const be=new JO(S.params,()=>E(Te=>Te+1));return A(be),be}else S.componentFromFramework&&Vg()},[S]),Be=Re==null?void 0:Re.getProps(),Oe=S&&S.componentFromFramework,He=S&&S.componentClass;return ae.createElement("div",{ref:z,className:j,role:"gridcell"},ae.createElement("div",{ref:x,className:te,role:"presentation"},Oe&&!ue&&ae.createElement(He,{...S.params,ref:ve?()=>{}:A}),Oe&&ue&&ae.createElement(Hg.Provider,{value:{setMethods:be=>Re.setMethods(be)}},ae.createElement(He,{...Be}))),ae.createElement("div",{ref:_,"aria-hidden":g,className:le,role:"presentation"},ae.createElement("button",{ref:k,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},dN=R.memo(cN),hN=({ctrl:e})=>{const{context:t}=R.useContext(Ei),[i,n]=R.useState(()=>new Ln),[s,r]=R.useState(()=>new Ln),[u,c]=R.useState("false"),[p,g]=R.useState(),[v,S]=R.useState(),y=R.useMemo(()=>e.getColId(),[]),E=R.useRef(),b=R.useRef(null),M=R.useRef(null),x=R.useRef(null),_=R.useRef(),k=R.useCallback(te=>{if(b.current=te,E.current=te?t.createBean(new ca):t.destroyBean(E.current),!te)return;const le={setWidth:ve=>{b.current&&(b.current.style.width=ve)},addOrRemoveCssClass:(ve,ue)=>n(Re=>Re.setClass(ve,ue)),setHeaderWrapperHidden:ve=>{const ue=x.current;ue&&(ve?ue.style.setProperty("display","none"):ue.style.removeProperty("display"))},setHeaderWrapperMaxHeight:ve=>{const ue=x.current;ue&&(ve!=null?ue.style.setProperty("max-height",`${ve}px`):ue.style.removeProperty("max-height"),ue.classList.toggle("ag-header-cell-comp-wrapper-limited-height",ve!=null))},setUserCompDetails:ve=>S(ve),setResizableDisplayed:ve=>{r(ue=>ue.setClass("ag-hidden",!ve)),c(ve?"false":"true")},setAriaExpanded:ve=>g(ve),getUserCompInstance:()=>_.current||void 0};e.setComp(le,te,M.current,x.current,E.current)},[]);R.useLayoutEffect(()=>Vu(v,t,x.current),[v]),R.useEffect(()=>{b.current&&e.setDragSource(b.current)},[v]);const I=R.useMemo(()=>!!((v==null?void 0:v.componentFromFramework)&&fa(v.componentClass)),[v]),H=R.useMemo(()=>"ag-header-group-cell "+i.toString(),[i]),A=R.useMemo(()=>"ag-header-cell-resize "+s.toString(),[s]),z=v&&v.componentFromFramework,j=v&&v.componentClass;return ae.createElement("div",{ref:k,className:H,"col-id":y,role:"columnheader","aria-expanded":p},ae.createElement("div",{ref:x,className:"ag-header-cell-comp-wrapper",role:"presentation"},z&&I&&ae.createElement(j,{...v.params}),z&&!I&&ae.createElement(j,{...v.params,ref:_})),ae.createElement("div",{ref:M,"aria-hidden":u,className:A}))},pN=R.memo(hN),fN=({ctrl:e})=>{const{context:t}=R.useContext(Ei),{topOffset:i,rowHeight:n}=R.useMemo(()=>e.getTopAndHeight(),[]),s=e.getAriaRowIndex(),r=e.getHeaderRowClass(),[u,c]=R.useState(()=>n+"px"),[p,g]=R.useState(()=>i+"px"),v=R.useRef(null),S=R.useRef(null),[y,E]=R.useState(()=>e.getHeaderCtrls()),b=R.useRef(),M=R.useRef(null),x=R.useCallback(I=>{if(M.current=I,b.current=I?t.createBean(new ca):t.destroyBean(b.current),!I)return;const H={setHeight:A=>c(A),setTop:A=>g(A),setHeaderCtrls:(A,z,j)=>{S.current=v.current,v.current=A;const te=Gg(S.current,A,z);te!==S.current&&Ng(j,()=>E(te))},setWidth:A=>{M.current&&(M.current.style.width=A)}};e.setComp(H,b.current,!1)},[]),_=R.useMemo(()=>({height:u,top:p}),[u,p]),k=R.useCallback(I=>{switch(e.getType()){case Df.COLUMN_GROUP:return ae.createElement(pN,{ctrl:I,key:I.instanceId});case Df.FLOATING_FILTER:return ae.createElement(dN,{ctrl:I,key:I.instanceId});default:return ae.createElement(uN,{ctrl:I,key:I.instanceId})}},[]);return ae.createElement("div",{ref:x,className:r,role:"row",style:_,"aria-rowindex":s},y.map(k))},gN=R.memo(fN),mN=({pinned:e})=>{const[t,i]=R.useState(!0),[n,s]=R.useState([]),{context:r}=R.useContext(Ei),u=R.useRef(null),c=R.useRef(null),p=R.useRef(),g=e==="left",v=e==="right",S=!g&&!v,y=R.useCallback(M=>{if(u.current=M,p.current=M?r.createBean(new z0(e)):r.destroyBean(p.current),!M)return;const x={setDisplayed:i,setCtrls:_=>s(_),setCenterWidth:_=>{c.current&&(c.current.style.width=_)},setViewportScrollLeft:_=>{u.current&&(u.current.scrollLeft=_)},setPinnedContainerWidth:_=>{u.current&&(u.current.style.width=_,u.current.style.minWidth=_,u.current.style.maxWidth=_)}};p.current.setComp(x,u.current)},[]),E=t?"":"ag-hidden",b=()=>n.map(M=>ae.createElement(gN,{ctrl:M,key:M.instanceId}));return ae.createElement(ae.Fragment,null,g&&ae.createElement("div",{ref:y,className:"ag-pinned-left-header "+E,"aria-hidden":!t,role:"rowgroup"},b()),v&&ae.createElement("div",{ref:y,className:"ag-pinned-right-header "+E,"aria-hidden":!t,role:"rowgroup"},b()),S&&ae.createElement("div",{ref:y,className:"ag-header-viewport "+E,role:"presentation"},ae.createElement("div",{ref:c,className:"ag-header-container",role:"rowgroup"},b())))},ef=R.memo(mN),vN=()=>{const[e,t]=R.useState(()=>new Ln),[i,n]=R.useState(),{context:s}=R.useContext(Ei),r=R.useRef(null),u=R.useRef(),c=R.useCallback(v=>{if(r.current=v,u.current=v?s.createBean(new b0):s.destroyBean(u.current),!v)return;const S={addOrRemoveCssClass:(y,E)=>t(b=>b.setClass(y,E)),setHeightAndMinHeight:y=>n(y)};u.current.setComp(S,v,v)},[]),p=R.useMemo(()=>"ag-header "+e.toString(),[e]),g=R.useMemo(()=>({height:i,minHeight:i}),[i]);return ae.createElement("div",{ref:c,className:p,style:g,role:"presentation"},ae.createElement(ef,{pinned:"left"}),ae.createElement(ef,{pinned:null}),ae.createElement(ef,{pinned:"right"}))},CN=R.memo(vN),wN=(e,t)=>{R.useEffect(()=>{const i=t.current;if(i){const n=i.parentElement;if(n){const s=document.createComment(e);return n.insertBefore(s,i),()=>{n.removeChild(s)}}}},[e])},zr=wN,SN=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new jt(i=>{this.resolveInstanceCreated=i}),this.onValueChange=i=>this.updateValue(i),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){Bg(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var t;this.componentInstance=e,(t=this.resolveInstanceCreated)==null||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},yN=e=>{const t=R.useRef(e),i=R.useRef(),n=R.useRef(!1),s=R.useRef(!1),[,r]=R.useState(0);n.current&&(s.current=!0),R.useEffect(()=>(n.current||(i.current=t.current(),n.current=!0),r(u=>u+1),()=>{var u;s.current&&((u=i.current)==null||u.call(i))}),[])},RN=e=>{const[t,i]=R.useState(),{context:n,popupService:s,localeService:r,gos:u,editService:c}=R.useContext(Ei);return yN(()=>{var H,A;const{editDetails:p,cellCtrl:g,eParentCell:v}=e,{compDetails:S}=p,y=u.get("stopEditingWhenCellsLoseFocus"),E=n.createBean(c.createPopupEditorWrapper(S.params)),b=E.getGui();if(e.jsChildComp){const z=e.jsChildComp.getGui();z&&b.appendChild(z)}const M={column:g.getColumn(),rowNode:g.getRowNode(),type:"popupCellEditor",eventSource:v,ePopup:b,position:p.popupPosition,keepWithinBounds:!0},x=s.positionPopupByComponent.bind(s,M),_=r.getLocaleTextFunc(),k=s.addPopup({modal:y,eChild:b,closeOnEsc:!0,closedCallback:()=>{g.onPopupEditorClosed()},anchorToElement:v,positionCallback:x,ariaLabel:_("ariaLabelCellEditor","Cell Editor")}),I=k?k.hideFunc:void 0;return i(E),(A=(H=e.jsChildComp)==null?void 0:H.afterGuiAttached)==null||A.call(H),()=>{I==null||I(),n.destroyBean(E)}}),ae.createElement(ae.Fragment,null,t&&e.wrappedContent&&Iu.createPortal(e.wrappedContent,t.getGui()))},KC=R.memo(RN),PN=(e,t,i,n,s,r)=>{const{context:u}=R.useContext(Ei),c=R.useCallback(()=>{const p=s.current;if(!p)return;const g=p.getGui();g&&g.parentElement&&g.parentElement.removeChild(g),u.destroyBean(p),s.current=void 0},[]);R.useEffect(()=>{const p=e!=null,g=(e==null?void 0:e.compDetails)&&!e.compDetails.componentFromFramework,v=t&&i==null;if(!(p&&g&&!v)){c();return}const y=e.compDetails;if(s.current){const b=s.current,x=b.refresh!=null&&e.force==!1?b.refresh(y.params):!1;if(x===!0||x===void 0)return;c()}const E=y.newAgStackInstance();E!=null&&E.then(b=>{if(!b)return;const M=b.getGui();if(!M)return;(t?i:r.current).appendChild(M),s.current=b})},[e,t,n]),R.useEffect(()=>c,[])},FN=PN,EN=(e,t,i)=>{const{compProxy:n}=e;i(n);const s=n.getProps(),r=fa(t);return ae.createElement(Hg.Provider,{value:{setMethods:u=>n.setMethods(u)}},r?ae.createElement(t,{...s}):ae.createElement(t,{...s,ref:u=>n.setRef(u)}))},ZC=(e,t,i)=>{const n=e.compProxy;return ae.createElement(ae.Fragment,null,n?EN(e,t,i):ae.createElement(t,{...e.compDetails.params,ref:i}))},bN=(e,t,i,n,s)=>{const r=e.compDetails,u=r.componentClass,c=r.componentFromFramework&&!e.popup,p=r.componentFromFramework&&e.popup,g=!r.componentFromFramework&&e.popup;return ae.createElement(ae.Fragment,null,c&&ZC(e,u,t),p&&ae.createElement(KC,{editDetails:e,cellCtrl:n,eParentCell:i,wrappedContent:ZC(e,u,t)}),g&&s&&ae.createElement(KC,{editDetails:e,cellCtrl:n,eParentCell:i,jsChildComp:s}))},xN=(e,t,i,n,s,r,u)=>{const{compDetails:c,value:p}=e,g=!c,v=c&&c.componentFromFramework,S=c&&c.componentClass,y=p!=null&&p.toString?p.toString():p,E=()=>ae.createElement(ae.Fragment,null,g&&ae.createElement(ae.Fragment,null,y),v&&!r&&ae.createElement(S,{...c.params,key:t,ref:n}),v&&r&&ae.createElement(S,{...c.params,key:t}));return ae.createElement(ae.Fragment,null,s?ae.createElement("span",{role:"presentation",id:`cell-${i}`,className:"ag-cell-value",ref:u},E()):E())},DN=({cellCtrl:e,printLayout:t,editingRow:i})=>{const{context:n}=R.useContext(Ei),{colIdSanitised:s,instanceId:r}=e,u=R.useRef(),[c,p]=R.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[g,v]=R.useState(),[S,y]=R.useState(1),[E,b]=R.useState(),[M,x]=R.useState(!1),[_,k]=R.useState(!1),[I,H]=R.useState(!1),[A,z]=R.useState(),j=R.useMemo(()=>e.isForceWrapper(),[e]),te=R.useMemo(()=>e.getCellAriaRole(),[e]),le=R.useRef(null),ve=R.useRef(null),ue=R.useRef(),Re=R.useRef(),Be=R.useRef(),Oe=R.useRef([]),He=R.useRef(),[be,Te]=R.useState(0),U=R.useCallback(xe=>{He.current=xe,Te(qe=>qe+1)},[]),Se=c!=null&&(M||I||_),J=j||Se,N=R.useCallback(xe=>{if(Re.current=xe,xe){const qe=xe.isCancelBeforeStart&&xe.isCancelBeforeStart();setTimeout(()=>{qe?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()})}},[e]),Z=R.useRef();Z.current||(Z.current=new Gu(()=>le.current)),FN(c,J,He.current,be,ue,le);const Pe=R.useRef();R.useLayoutEffect(()=>{var yt;const xe=Pe.current,qe=c;if(Pe.current=c,xe==null||xe.compDetails==null||qe==null||qe.compDetails==null)return;const wt=xe.compDetails,it=qe.compDetails;if(wt.componentClass!=it.componentClass||((yt=ve.current)==null?void 0:yt.refresh)==null)return;ve.current.refresh(it.params)!=!0&&y(Ve=>Ve+1)},[c]),R.useLayoutEffect(()=>{if(!(g&&!g.compDetails.componentFromFramework))return;const qe=g.compDetails,wt=g.popup===!0,it=qe.newAgStackInstance();return it.then(st=>{if(!st)return;const yt=st.getGui();if(N(st),!wt){const Ve=(j?Be:le).current;Ve==null||Ve.appendChild(yt),st.afterGuiAttached&&st.afterGuiAttached()}z(st)}),()=>{it.then(st=>{var Ve;const yt=st.getGui();n.destroyBean(st),N(void 0),z(void 0),(Ve=yt==null?void 0:yt.parentElement)==null||Ve.removeChild(yt)})}},[g]);const re=R.useCallback(xe=>{if(Be.current=xe,!xe){Oe.current.forEach(wt=>wt()),Oe.current=[];return}const qe=wt=>{if(wt){const it=wt.getGui();xe.insertAdjacentElement("afterbegin",it),Oe.current.push(()=>{n.destroyBean(wt),el(it)})}return wt};if(M){const wt=e.createSelectionCheckbox();qe(wt)}I&&qe(e.createDndSource()),_&&qe(e.createRowDragComp())},[e,n,I,_,M]),fe=R.useCallback(xe=>{if(le.current=xe,u.current=xe?n.createBean(new ca):n.destroyBean(u.current),!xe||!e)return;const qe={addOrRemoveCssClass:(it,st)=>Z.current.addOrRemoveCssClass(it,st),setUserStyles:it=>b(it),getFocusableElement:()=>le.current,setIncludeSelection:it=>x(it),setIncludeRowDrag:it=>k(it),setIncludeDndSource:it=>H(it),getCellEditor:()=>Re.current||null,getCellRenderer:()=>ve.current??ue.current,getParentOfValue:()=>He.current??Be.current??le.current,setRenderDetails:(it,st,yt)=>{p(Ve=>(Ve==null?void 0:Ve.compDetails)!==it||(Ve==null?void 0:Ve.value)!==st||(Ve==null?void 0:Ve.force)!==yt?{value:st,compDetails:it,force:yt}:Ve)},setEditDetails:(it,st,yt,Ve)=>{if(it){let Qt;Ve?Qt=new SN(it.params,()=>y(ui=>ui+1)):it.componentFromFramework&&Vg(),v({compDetails:it,popup:st,popupPosition:yt,compProxy:Qt}),st||p(void 0)}else v(Qt=>{Qt!=null&&Qt.compProxy&&(Re.current=void 0)})}},wt=Be.current||void 0;e.setComp(qe,xe,wt,t,i,u.current)},[]),we=R.useMemo(()=>{var qe;return!!(((qe=c==null?void 0:c.compDetails)==null?void 0:qe.componentFromFramework)&&fa(c.compDetails.componentClass))},[c]);R.useLayoutEffect(()=>{var xe;le.current&&(Z.current.addOrRemoveCssClass("ag-cell-value",!J),Z.current.addOrRemoveCssClass("ag-cell-inline-editing",!!g&&!g.popup),Z.current.addOrRemoveCssClass("ag-cell-popup-editing",!!g&&!!g.popup),Z.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!g||!!g.popup),(xe=e.getRowCtrl())==null||xe.setInlineEditingCss(),e.shouldRestoreFocus()&&!e.isEditing()&&le.current.focus({preventScroll:!0}))});const $e=()=>ae.createElement(ae.Fragment,null,c!=null&&xN(c,S,r,ve,J,we,U),g!=null&&bN(g,N,le.current,e,A)),Ze=R.useCallback(()=>e.onFocusOut(),[]);return ae.createElement("div",{ref:fe,style:E,role:te,"col-id":s,onBlur:Ze},J?ae.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:re},$e()):$e())},MN=R.memo(DN),TN=({rowCtrl:e,containerType:t})=>{const{context:i,gos:n}=R.useContext(Ei),s=R.useRef(),r=R.useRef(e.getDomOrder()),u=e.isFullWidth(),c=e.getRowNode().displayed,[p,g]=R.useState(()=>c?e.getRowIndex():null),[v,S]=R.useState(()=>e.getRowId()),[y,E]=R.useState(()=>e.getBusinessKey()),[b,M]=R.useState(()=>e.getRowStyles()),x=R.useRef(null),_=R.useRef(null),[k,I]=R.useState(()=>null),[H,A]=R.useState(),[z,j]=R.useState(()=>c?e.getInitialRowTop(t):void 0),[te,le]=R.useState(()=>c?e.getInitialTransform(t):void 0),ve=R.useRef(null),ue=R.useRef(),Re=R.useRef(!1),[Be,Oe]=R.useState(0);R.useEffect(()=>{var fe;if(Re.current||!H||Be>10)return;const re=(fe=ve.current)==null?void 0:fe.firstChild;re?(e.setupDetailRowAutoHeight(re),Re.current=!0):Oe(we=>we+1)},[H,Be]);const He=R.useRef();He.current||(He.current=new Gu(()=>ve.current));const be=R.useCallback(re=>{if(ve.current=re,s.current=re?i.createBean(new ca):i.destroyBean(s.current),!re){e.unsetComp(t);return}if(!e.isAlive())return;const fe={setTop:j,setTransform:le,addOrRemoveCssClass:(we,$e)=>He.current.addOrRemoveCssClass(we,$e),setDomOrder:we=>r.current=we,setRowIndex:g,setRowId:S,setRowBusinessKey:E,setUserStyles:M,setCellCtrls:(we,$e)=>{_.current=x.current,x.current=we;const Ze=Gg(_.current,we,r.current);Ze!==_.current&&Ng($e,()=>I(Ze))},showFullWidth:we=>A(we),getFullWidthCellRenderer:()=>ue.current,refreshFullWidth:we=>N.current?(A($e=>({...$e,params:we()})),!0):!ue.current||!ue.current.refresh?!1:ue.current.refresh(we())};e.setComp(fe,re,t,s.current)},[]);R.useLayoutEffect(()=>Vu(H,i,ve.current,ue),[H]);const Te=R.useMemo(()=>{const re={top:z,transform:te};return Object.assign(re,b),re},[z,te,b]),U=u&&(H==null?void 0:H.componentFromFramework),Se=!u&&k!=null,J=R.useMemo(()=>!!((H==null?void 0:H.componentFromFramework)&&fa(H.componentClass)),[H]),N=R.useRef(!1);R.useEffect(()=>{N.current=J&&!!H&&!!n.get("reactiveCustomComponents")},[J,H]);const Z=()=>k==null?void 0:k.map(re=>ae.createElement(MN,{cellCtrl:re,editingRow:e.isEditing(),printLayout:e.isPrintLayout(),key:re.instanceId})),Pe=()=>{const re=H.componentClass;return ae.createElement(ae.Fragment,null,J?ae.createElement(re,{...H.params}):ae.createElement(re,{...H.params,ref:ue}))};return ae.createElement("div",{ref:be,role:"row",style:Te,"row-index":p,"row-id":v,"row-business-key":y},Se&&Z(),U&&Pe())},_N=R.memo(TN),LN=({name:e})=>{const{context:t}=R.useContext(Ei),i=R.useMemo(()=>Jl(e),[e]),n=R.useRef(null),s=R.useRef(null),r=R.useRef([]),u=R.useRef([]),[c,p]=R.useState(()=>[]),g=R.useRef(!1),v=R.useRef(),S=R.useMemo(()=>Jn(i.viewport),[i]),y=R.useMemo(()=>Jn(i.container),[i]),E=i.type==="center",b=E?n:s;zr(" AG Row Container "+e+" ",b);const M=R.useCallback(()=>E?n.current!=null&&s.current!=null:s.current!=null,[]),x=R.useCallback(()=>E?n.current==null&&s.current==null:s.current==null,[]),_=R.useCallback(()=>{if(x()&&(v.current=t.destroyBean(v.current)),M()){const A=j=>{const te=Gg(u.current,r.current,g.current);te!==u.current&&(u.current=te,Ng(j,()=>p(te)))},z={setHorizontalScroll:j=>{n.current&&(n.current.scrollLeft=j)},setViewportHeight:j=>{n.current&&(n.current.style.height=j)},setRowCtrls:({rowCtrls:j,useFlushSync:te})=>{const le=!!te&&r.current.length>0&&j.length>0;r.current=j,A(le)},setDomOrder:j=>{g.current!=j&&(g.current=j,A(!1))},setContainerWidth:j=>{s.current&&(s.current.style.width=j)},setOffsetTop:j=>{s.current&&(s.current.style.transform=`translateY(${j})`)}};v.current=t.createBean(new kT(e)),v.current.setComp(z,s.current,n.current)}},[M,x]),k=R.useCallback(A=>{s.current=A,_()},[_]),I=R.useCallback(A=>{n.current=A,_()},[_]),H=()=>ae.createElement("div",{className:y,ref:k,role:"rowgroup"},c.map(A=>ae.createElement(_N,{rowCtrl:A,containerType:i.type,key:A.instanceId})));return ae.createElement(ae.Fragment,null,E?ae.createElement("div",{className:S,ref:I,role:"presentation"},H()):H())},AN=R.memo(LN),IN=()=>{const{context:e,resizeObserverService:t}=R.useContext(Ei),[i,n]=R.useState(""),[s,r]=R.useState(0),[u,c]=R.useState(0),[p,g]=R.useState("0px"),[v,S]=R.useState("0px"),[y,E]=R.useState("100%"),[b,M]=R.useState("0px"),[x,_]=R.useState("0px"),[k,I]=R.useState("100%"),[H,A]=R.useState(""),[z,j]=R.useState(""),[te,le]=R.useState(null),[ve,ue]=R.useState(""),[Re,Be]=R.useState(null),[Oe,He]=R.useState("ag-layout-normal"),be=R.useRef();be.current||(be.current=new Gu(()=>Te.current));const Te=R.useRef(null),U=R.useRef(null),Se=R.useRef(null),J=R.useRef(null),N=R.useRef(null),Z=R.useRef(null),Pe=R.useRef(null),re=R.useRef([]),fe=R.useRef([]);zr(" AG Grid Body ",Te),zr(" AG Pinned Top ",U),zr(" AG Sticky Top ",Se),zr(" AG Middle ",Z),zr(" AG Pinned Bottom ",Pe);const we=R.useCallback(Kt=>{if(Te.current=Kt,!Kt){re.current=e.destroyBeans(re.current),fe.current.forEach(ot=>ot()),fe.current=[];return}if(!e)return;const kt=(ot,Ot)=>{ot.appendChild(Ot),fe.current.push(()=>ot.removeChild(Ot))},fi=ot=>{const Ot=e.createBean(new ot);return re.current.push(Ot),Ot},Gi=(ot,Ot,en)=>{kt(ot,document.createComment(en)),kt(ot,fi(Ot).getGui())};Gi(Kt,j0," AG Fake Horizontal Scroll "),Gi(Kt,U0," AG Overlay Wrapper "),N.current&&Gi(N.current,$0," AG Fake Vertical Scroll ");const rs={setRowAnimationCssOnBodyViewport:n,setColumnCount:ot=>{Te.current&&oD(Te.current,ot)},setRowCount:ot=>{Te.current&&nD(Te.current,ot)},setTopHeight:r,setBottomHeight:c,setStickyTopHeight:g,setStickyTopTop:S,setStickyTopWidth:E,setTopDisplay:A,setBottomDisplay:j,setColumnMovingCss:(ot,Ot)=>be.current.addOrRemoveCssClass(ot,Ot),updateLayoutClasses:He,setAlwaysVerticalScrollClass:le,setPinnedTopBottomOverflowY:ue,setCellSelectableCss:(ot,Ot)=>Be(Ot?ot:null),setBodyViewportWidth:ot=>{Z.current&&(Z.current.style.width=ot)},registerBodyViewportResizeListener:ot=>{if(Z.current){const Ot=t.observeResize(Z.current,ot);fe.current.push(()=>Ot())}},setStickyBottomHeight:M,setStickyBottomBottom:_,setStickyBottomWidth:I},gi=e.createBean(new HT);re.current.push(gi),gi.setComp(rs,Kt,Z.current,U.current,Pe.current,Se.current,J.current)},[]),$e=R.useMemo(()=>Jn("ag-root","ag-unselectable",Oe),[Oe]),Ze=R.useMemo(()=>Jn("ag-body-viewport",i,Oe,te,Re),[i,Oe,te,Re]),xe=R.useMemo(()=>Jn("ag-body",Oe),[Oe]),qe=R.useMemo(()=>Jn("ag-floating-top",Re),[Re]),wt=R.useMemo(()=>Jn("ag-sticky-top",Re),[Re]),it=R.useMemo(()=>Jn("ag-sticky-bottom",b==="0px"?"ag-hidden":null,Re),[Re,b]),st=R.useMemo(()=>Jn("ag-floating-bottom",Re),[Re]),yt=R.useMemo(()=>({height:s,minHeight:s,display:H,overflowY:ve}),[s,H,ve]),Ve=R.useMemo(()=>({height:p,top:v,width:y}),[p,v,y]),Qt=R.useMemo(()=>({height:b,bottom:x,width:k}),[b,x,k]),ui=R.useMemo(()=>({height:u,minHeight:u,display:z,overflowY:ve}),[u,z,ve]),On=Kt=>ae.createElement(AN,{name:Kt,key:`${Kt}-container`}),Ji=({section:Kt,children:kt,className:fi,style:Gi})=>ae.createElement("div",{ref:Kt,className:fi,role:"presentation",style:Gi},kt.map(On));return ae.createElement("div",{ref:we,className:$e,role:"treegrid"},ae.createElement(CN,null),Ji({section:U,className:qe,style:yt,children:["topLeft","topCenter","topRight","topFullWidth"]}),ae.createElement("div",{className:xe,ref:N,role:"presentation"},Ji({section:Z,className:Ze,children:["left","center","right","fullWidth"]})),Ji({section:Se,className:wt,style:Ve,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),Ji({section:J,className:it,style:Qt,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),Ji({section:Pe,className:st,style:ui,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},kN=R.memo(IN),ON=(e,t)=>{const{children:i,eFocusableElement:n,onTabKeyDown:s,gridCtrl:r,forceFocusOutWhenTabGuardsAreEmpty:u}=e,{context:c}=R.useContext(Ei),p=R.useRef(null),g=R.useRef(null),v=R.useRef(),S=x=>{const _=x==null?void 0:parseInt(x,10).toString();[p,g].forEach(k=>{var I,H;_===void 0?(I=k.current)==null||I.removeAttribute("tabindex"):(H=k.current)==null||H.setAttribute("tabindex",_)})};R.useImperativeHandle(t,()=>({forceFocusOutOfContainer(x){var _;(_=v.current)==null||_.forceFocusOutOfContainer(x)}}));const y=R.useCallback(()=>{const x=p.current,_=g.current;if(!x&&!_){v.current=c.destroyBean(v.current);return}if(x&&_){const k={setTabIndex:S};v.current=c.createBean(new _y({comp:k,eTopGuard:x,eBottomGuard:_,eFocusableElement:n,onTabKeyDown:s,forceFocusOutWhenTabGuardsAreEmpty:u,focusInnerElement:I=>r.focusInnerElement(I)}))}},[]),E=R.useCallback(x=>{p.current=x,y()},[y]),b=R.useCallback(x=>{g.current=x,y()},[y]),M=x=>{const _=x==="top"?pd.TAB_GUARD_TOP:pd.TAB_GUARD_BOTTOM;return ae.createElement("div",{className:`${pd.TAB_GUARD} ${_}`,role:"presentation",ref:x==="top"?E:b})};return ae.createElement(ae.Fragment,null,M("top"),i,M("bottom"))},NN=R.forwardRef(ON),GN=R.memo(NN),HN=({context:e})=>{const[t,i]=R.useState(""),[n,s]=R.useState(""),[r,u]=R.useState(""),[c,p]=R.useState(null),[g,v]=R.useState(null),[S,y]=R.useState(!1),[E,b]=R.useState(),M=R.useRef(),x=R.useRef(null),_=R.useRef(),[k,I]=R.useState(null),H=R.useRef(()=>{}),A=R.useRef(),z=R.useRef([]),j=R.useCallback(()=>{},[]),te=R.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);zr(" AG Grid ",x);const le=R.useCallback(Oe=>{if(x.current=Oe,M.current=Oe?e.createBean(new CL):e.destroyBean(M.current),!Oe||e.isDestroyed())return;const He=M.current;H.current=He.focusInnerElement.bind(He);const be={destroyGridUi:()=>{},setRtlClass:i,setGridThemeClass:s,forceFocusOutOfContainer:Te=>{var U,Se;if(!Te&&((U=A.current)!=null&&U.isDisplayed())){A.current.forceFocusOutOfContainer(Te);return}(Se=_.current)==null||Se.forceFocusOutOfContainer(Te)},updateLayoutClasses:u,getFocusableContainers:()=>{var Se;const Te=[],U=(Se=x.current)==null?void 0:Se.querySelector(".ag-root");return U&&Te.push({getGui:()=>U}),z.current.forEach(J=>{J.isDisplayed()&&Te.push(J)}),Te},setCursor:p,setUserSelect:v};He.setComp(be,Oe,Oe),y(!0)},[]);R.useEffect(()=>{const Oe=M.current,He=x.current;if(!E||!te||!Oe||!k||!He)return;const be=[],{watermarkSelector:Te,paginationSelector:U,sideBarSelector:Se,statusBarSelector:J,gridHeaderDropZonesSelector:N}=Oe.getOptionalSelectors(),Z=[];if(N){const re=e.createBean(new N.component),fe=re.getGui();He.insertAdjacentElement("afterbegin",fe),Z.push(fe),be.push(re)}if(Se){const re=e.createBean(new Se.component),fe=re.getGui(),we=k.querySelector(".ag-tab-guard-bottom");we&&(we.insertAdjacentElement("beforebegin",fe),Z.push(fe)),be.push(re),z.current.push(re)}const Pe=re=>{const fe=e.createBean(new re),we=fe.getGui();return He.insertAdjacentElement("beforeend",we),Z.push(we),be.push(fe),fe};if(J&&Pe(J.component),U){const re=Pe(U.component);A.current=re,z.current.push(re)}return Te&&Pe(Te.component),()=>{e.destroyBeans(be),Z.forEach(re=>{var fe;(fe=re.parentElement)==null||fe.removeChild(re)})}},[E,k,te]);const ve=R.useMemo(()=>Jn("ag-root-wrapper",t,n,r),[t,n,r]),ue=R.useMemo(()=>Jn("ag-root-wrapper-body","ag-focus-managed",r),[r]),Re=R.useMemo(()=>({userSelect:g??"",WebkitUserSelect:g??"",cursor:c??""}),[g,c]),Be=R.useCallback(Oe=>{_.current=Oe,b(Oe!==null)},[]);return ae.createElement("div",{ref:le,className:ve,style:Re,role:"presentation"},ae.createElement("div",{className:ue,ref:I,role:"presentation"},S&&k&&te&&ae.createElement(Ei.Provider,{value:te},ae.createElement(GN,{ref:Be,eFocusableElement:k,onTabKeyDown:j,gridCtrl:M.current,forceFocusOutWhenTabGuardsAreEmpty:!0},ae.createElement(kN,null)))))},BN=R.memo(HN),VN=class extends ie{wireBeans(e){this.ctrlsService=e.ctrlsService}areHeaderCellsRendered(){return this.ctrlsService.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}},eR=e=>{var x;const t=R.useRef(),i=R.useRef(null),n=R.useRef(null),s=R.useRef([]),r=R.useRef([]),u=R.useRef(e),c=R.useRef(),p=R.useRef(),g=R.useRef(!1),[v,S]=R.useState(void 0),[,y]=R.useState(0),E=R.useCallback(_=>{if(i.current=_,!_){s.current.forEach(ue=>ue()),s.current.length=0;return}const k=e.modules||[];n.current||(n.current=new lN(()=>y(ue=>ue+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),s.current.push(()=>{var ue;(ue=n.current)==null||ue.destroy(),n.current=null}));const I=Zx(e.gridOptions,e),H=()=>{if(g.current){const ue=()=>{var Be;return(Be=c.current)!=null&&Be.shouldQueueUpdates()?void 0:r.current.shift()};let Re=ue();for(;Re;)Re(),Re=ue()}},A=new jN(H);c.current=A;const z=new VN,j={providedBeanInstances:{frameworkComponentWrapper:new zN(n.current,I.reactiveCustomComponents??jk("reactiveCustomComponents")??!0),renderStatusService:z},modules:k,frameworkOverrides:A},te=ue=>{S(ue),ue.createBean(z),s.current.push(()=>{ue.destroy()}),ue.getBean("ctrlsService").whenReady({addDestroyFunc:Re=>{s.current.push(Re)}},()=>{var Be;if(ue.isDestroyed())return;const Re=t.current;Re&&((Be=e.setGridApi)==null||Be.call(e,Re))})},le=ue=>{ue.getBean("ctrlsService").whenReady({addDestroyFunc:Re=>{s.current.push(Re)}},()=>{r.current.forEach(Re=>Re()),r.current.length=0,g.current=!0})},ve=new Kk;I.gridId??(I.gridId=p.current),t.current=ve.create(_,I,te,le,j),s.current.push(()=>{t.current=void 0}),t.current&&(p.current=t.current.getGridId())},[]),b=R.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),M=R.useCallback(_=>{var k;g.current&&!((k=c.current)!=null&&k.shouldQueueUpdates())?_():r.current.push(_)},[]);return R.useEffect(()=>{const _=WN(u.current,e);u.current=e,M(()=>{t.current&&qx(_,t.current)})},[e]),ae.createElement("div",{style:b,className:e.className,ref:E},v&&!v.isDestroyed()?ae.createElement(BN,{context:v}):null,((x=n.current)==null?void 0:x.getPortals())??null)};function WN(e,t){const i={};return Object.keys(t).forEach(n=>{const s=t[n];e[n]!==s&&(i[n]=s)}),i}var zN=class extends iO{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const s=(r=>{switch(r){case"filter":return XO;case"floatingFilterComponent":return eN;case"dateComponent":return YO;case"dragAndDropImageComponent":return QO;case"loadingOverlayComponent":return tN;case"noRowsOverlayComponent":return nN;case"statusPanel":return sN;case"toolPanel":return oN;case"menuItem":return iN;case"cellRenderer":return qO}})(t.propertyName);if(s)return new s(e,this.parent,t)}else switch(t.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":Vg();break}const i=!t.cellRenderer&&t.propertyName!=="toolPanel";return new Xy(e,this.parent,t,i)}},UN=R.forwardRef((e,t)=>{const{ctrlsFactory:i,context:n,gos:s,resizeObserverService:r,rowModel:u}=R.useContext(Ei),[c,p]=R.useState(()=>new Ln),[g,v]=R.useState(()=>new Ln),[S,y]=R.useState(),[E,b]=R.useState(),M=R.useRef(),x=R.useRef(null),_=R.useRef(),k=R.useMemo(()=>Ps.__getGridRegisteredModules(e.api.getGridId()),[e]),I=R.useMemo(()=>c.toString()+" ag-details-row",[c]),H=R.useMemo(()=>g.toString()+" ag-details-grid",[g]);t&&R.useImperativeHandle(t,()=>({refresh(){var j;return((j=M.current)==null?void 0:j.refresh())??!1}})),e.template&&se("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const A=R.useCallback(j=>{var ve;if(x.current=j,!j){M.current=n.destroyBean(M.current),(ve=_.current)==null||ve.call(_);return}const te={addOrRemoveCssClass:(ue,Re)=>p(Be=>Be.setClass(ue,Re)),addOrRemoveDetailGridCssClass:(ue,Re)=>v(Be=>Be.setClass(ue,Re)),setDetailGrid:ue=>y(ue),setRowData:ue=>b(ue),getGui:()=>x.current},le=i.getInstance("detailCellRenderer");if(le&&(n.createBean(le),le.init(te,e),M.current=le,s.get("detailRowAutoHeight"))){const ue=()=>{if(x.current==null)return;const Re=x.current.clientHeight;Re!=null&&Re>0&&setTimeout(()=>{e.node.setRowHeight(Re),(At(s)||Ts(s))&&u.onRowHeightChanged()},0)};_.current=r.observeResize(j,ue),ue()}},[]),z=R.useCallback(j=>{var te;(te=M.current)==null||te.registerDetailWithMaster(j)},[]);return ae.createElement("div",{className:I,ref:A},S&&ae.createElement(eR,{className:H,...S,modules:k,rowData:E,setGridApi:z}))}),jN=class extends Ly{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:jC,agGroupRowRenderer:jC,agDetailCellRenderer:UN},this.wrapIncoming=(t,i)=>i==="ensureVisible"?jO(t):t(),this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return UO()}},$N=class extends R.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(t=>t(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return ae.createElement(eR,{...this.props,setGridApi:this.setGridApi})}};function KN(){const[e,t]=R.useState([]),[i,n]=R.useState([]);R.useEffect(()=>{async function r(){try{const c=await(await fetch("https://hub.dataverse.org/api/installation/status")).json();t(c),n(c)}catch(u){console.error("Error fetching installation data:",u)}}r()},[]);const s=r=>{const u=r.api.getRenderedNodes(),c=u==null?void 0:u.map(p=>p.data);n(c||[])};return R.useEffect(()=>{console.log("filteredData",i)},[i]),de.jsxs(de.Fragment,{children:[de.jsxs(ex,{center:[51.505,-.09],zoom:1.5,scrollWheelZoom:!1,className:"h-[50vh]",children:[de.jsx(nx,{attribution:"Dataverse-Hub",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),i.map(r=>de.jsx(tx,{position:[r.installation.latitude,r.installation.longitude],icon:Kb.divIcon({className:"custom-icon",html:`<div 
								style="background-color: ${r.status==="OK"?"green":"red"}; 
                          		width: 2rem;
								height: 2rem;
								display: block;
								left: -1rem;
								top: -1rem;
								position: relative;
								border-radius: 3rem 3rem 0;
								transform: rotate(45deg);
								border: 1px solid #FFFFFF
								"></div>`}),children:de.jsx(ix,{children:de.jsxs("div",{children:[de.jsx("strong",{children:"ID:"})," ",r.installation.dvHubId,de.jsx("br",{}),de.jsx("strong",{children:"Name:"})," ",r.installation.name,de.jsx("br",{}),de.jsx("strong",{children:"Description:"})," ",r.installation.description,de.jsx("br",{}),de.jsx("strong",{children:"Hostname:"})," ",de.jsx("a",{href:`http://${r.installation.hostname}`,target:"_blank",rel:"noopener noreferrer",children:r.installation.hostname}),de.jsx("br",{}),de.jsx("strong",{children:"Country:"})," ",r.installation.country,de.jsx("br",{}),de.jsx("strong",{children:"Continent:"})," ",r.installation.continent,de.jsx("br",{}),de.jsx("strong",{children:"Launch Year:"})," ",r.installation.launchYear,de.jsx("br",{}),de.jsx("strong",{children:"GDCC Member:"})," ",r.installation.gdccMember?"Yes":"No",de.jsx("br",{}),de.jsx("strong",{children:"DOI Authority:"})," ",r.installation.doiAuthority,de.jsx("br",{}),de.jsx("strong",{children:"Contact Email:"})," ",r.installation.contactEmail]})})},r.installation.dvHubId))]}),de.jsx("div",{className:"ag-theme-quartz",style:{height:500},children:de.jsx($N,{rowData:e,columnDefs:[{headerName:"Name",field:"installation.name",filter:!0},{headerName:"Hostname",field:"installation.hostname",filter:!0},{headerName:"Country",field:"installation.country",filter:!0},{headerName:"Continent",field:"installation.continent",filter:!0},{headerName:"Launch Year",field:"installation.launchYear",filter:!0},{headerName:"GDCC Member",field:"installation.gdccMember",filter:!0},{headerName:"Status",field:"status",filter:!0}],defaultColDef:{flex:1},domLayout:"autoHeight",animateRows:!1,onFilterChanged:s})})]})}function qC(){return R.useEffect(()=>{},[]),de.jsx("div",{children:de.jsx("h1",{children:"Installation Metrics"})})}const ZN=({error:e,resetErrorBoundary:t})=>de.jsx("div",{className:"bg-slate-500 fixed bottom-0 left-0 right-0 top-16 ",children:de.jsxs("div",{role:"alert",children:[de.jsx("p",{children:"Something went wrong:"}),de.jsx("pre",{children:e.message}),de.jsx("button",{onClick:t,children:"Try again"})]})});function qN({error:e,resetErrorBoundary:t}){return de.jsx(ZN,{error:e,resetErrorBoundary:t})}const YN=()=>de.jsx(de.Fragment,{children:de.jsxs(Ob,{FallbackComponent:qN,children:[de.jsxs(Op,{bg:"dark",variant:"dark",children:[de.jsx(Op.Brand,{className:"text-orange-500 p-1",href:"/",children:"Dataverse Hub"}),de.jsx(Op.Toggle,{"aria-controls":"basic-navbar-nav"}),de.jsx(Fw,{children:de.jsxs(ou,{className:"me-auto",children:[de.jsx(ou.Link,{disabled:!0,children:"|"}),de.jsx(ou.Link,{as:wd,to:"/map",children:"Map"}),de.jsx(ou.Link,{disabled:!0,children:"|"}),de.jsx(ou.Link,{as:wd,to:"/metrics",children:"Metrics"})]})})]}),de.jsx(uF,{})]})}),QN=IF([{path:"/",element:de.jsx(YN,{}),children:[{index:!0,element:de.jsx(qC,{})},{path:"/map",element:de.jsx(KN,{})},{path:"/metrics",element:de.jsx(qC,{})}]}]);zR.createRoot(document.getElementById("root")).render(de.jsx(R.StrictMode,{children:de.jsx($F,{router:QN})}));
