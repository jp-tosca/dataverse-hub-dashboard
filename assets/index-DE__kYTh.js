(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function i(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=i(n);fetch(n.href,r)}})();function Qf(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var yx={exports:{}},Dg={},Cx={exports:{}},Lt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iL;function bG(){if(iL)return Lt;iL=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),n=Symbol.for("react.profiler"),r=Symbol.for("react.provider"),o=Symbol.for("react.context"),a=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),c=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function f(W){return W===null||typeof W!="object"?null:(W=g&&W[g]||W["@@iterator"],typeof W=="function"?W:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,x={};function M(W,Q,ve){this.props=W,this.context=Q,this.refs=x,this.updater=ve||y}M.prototype.isReactComponent={},M.prototype.setState=function(W,Q){if(typeof W!="object"&&typeof W!="function"&&W!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,W,Q,"setState")},M.prototype.forceUpdate=function(W){this.updater.enqueueForceUpdate(this,W,"forceUpdate")};function b(){}b.prototype=M.prototype;function R(W,Q,ve){this.props=W,this.context=Q,this.refs=x,this.updater=ve||y}var I=R.prototype=new b;I.constructor=R,C(I,M.prototype),I.isPureReactComponent=!0;var P=Array.isArray,k=Object.prototype.hasOwnProperty,_={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function H(W,Q,ve){var se,ye={},ue=null,Me=null;if(Q!=null)for(se in Q.ref!==void 0&&(Me=Q.ref),Q.key!==void 0&&(ue=""+Q.key),Q)k.call(Q,se)&&!B.hasOwnProperty(se)&&(ye[se]=Q[se]);var me=arguments.length-2;if(me===1)ye.children=ve;else if(1<me){for(var ne=Array(me),Ee=0;Ee<me;Ee++)ne[Ee]=arguments[Ee+2];ye.children=ne}if(W&&W.defaultProps)for(se in me=W.defaultProps,me)ye[se]===void 0&&(ye[se]=me[se]);return{$$typeof:e,type:W,key:ue,ref:Me,props:ye,_owner:_.current}}function V(W,Q){return{$$typeof:e,type:W.type,key:Q,ref:W.ref,props:W.props,_owner:W._owner}}function U(W){return typeof W=="object"&&W!==null&&W.$$typeof===e}function $(W){var Q={"=":"=0",":":"=2"};return"$"+W.replace(/[=:]/g,function(ve){return Q[ve]})}var te=/\/+/g;function Ce(W,Q){return typeof W=="object"&&W!==null&&W.key!=null?$(""+W.key):Q.toString(36)}function be(W,Q,ve,se,ye){var ue=typeof W;(ue==="undefined"||ue==="boolean")&&(W=null);var Me=!1;if(W===null)Me=!0;else switch(ue){case"string":case"number":Me=!0;break;case"object":switch(W.$$typeof){case e:case t:Me=!0}}if(Me)return Me=W,ye=ye(Me),W=se===""?"."+Ce(Me,0):se,P(ye)?(ve="",W!=null&&(ve=W.replace(te,"$&/")+"/"),be(ye,Q,ve,"",function(Ee){return Ee})):ye!=null&&(U(ye)&&(ye=V(ye,ve+(!ye.key||Me&&Me.key===ye.key?"":(""+ye.key).replace(te,"$&/")+"/")+W)),Q.push(ye)),1;if(Me=0,se=se===""?".":se+":",P(W))for(var me=0;me<W.length;me++){ue=W[me];var ne=se+Ce(ue,me);Me+=be(ue,Q,ve,ne,ye)}else if(ne=f(W),typeof ne=="function")for(W=ne.call(W),me=0;!(ue=W.next()).done;)ue=ue.value,ne=se+Ce(ue,me++),Me+=be(ue,Q,ve,ne,ye);else if(ue==="object")throw Q=String(W),Error("Objects are not valid as a React child (found: "+(Q==="[object Object]"?"object with keys {"+Object.keys(W).join(", ")+"}":Q)+"). If you meant to render a collection of children, use an array instead.");return Me}function Re(W,Q,ve){if(W==null)return W;var se=[],ye=0;return be(W,se,"","",function(ue){return Q.call(ve,ue,ye++)}),se}function oe(W){if(W._status===-1){var Q=W._result;Q=Q(),Q.then(function(ve){(W._status===0||W._status===-1)&&(W._status=1,W._result=ve)},function(ve){(W._status===0||W._status===-1)&&(W._status=2,W._result=ve)}),W._status===-1&&(W._status=0,W._result=Q)}if(W._status===1)return W._result.default;throw W._result}var Se={current:null},K={transition:null},pe={ReactCurrentDispatcher:Se,ReactCurrentBatchConfig:K,ReactCurrentOwner:_};function q(){throw Error("act(...) is not supported in production builds of React.")}return Lt.Children={map:Re,forEach:function(W,Q,ve){Re(W,function(){Q.apply(this,arguments)},ve)},count:function(W){var Q=0;return Re(W,function(){Q++}),Q},toArray:function(W){return Re(W,function(Q){return Q})||[]},only:function(W){if(!U(W))throw Error("React.Children.only expected to receive a single React element child.");return W}},Lt.Component=M,Lt.Fragment=i,Lt.Profiler=n,Lt.PureComponent=R,Lt.StrictMode=s,Lt.Suspense=l,Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pe,Lt.act=q,Lt.cloneElement=function(W,Q,ve){if(W==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+W+".");var se=C({},W.props),ye=W.key,ue=W.ref,Me=W._owner;if(Q!=null){if(Q.ref!==void 0&&(ue=Q.ref,Me=_.current),Q.key!==void 0&&(ye=""+Q.key),W.type&&W.type.defaultProps)var me=W.type.defaultProps;for(ne in Q)k.call(Q,ne)&&!B.hasOwnProperty(ne)&&(se[ne]=Q[ne]===void 0&&me!==void 0?me[ne]:Q[ne])}var ne=arguments.length-2;if(ne===1)se.children=ve;else if(1<ne){me=Array(ne);for(var Ee=0;Ee<ne;Ee++)me[Ee]=arguments[Ee+2];se.children=me}return{$$typeof:e,type:W.type,key:ye,ref:ue,props:se,_owner:Me}},Lt.createContext=function(W){return W={$$typeof:o,_currentValue:W,_currentValue2:W,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},W.Provider={$$typeof:r,_context:W},W.Consumer=W},Lt.createElement=H,Lt.createFactory=function(W){var Q=H.bind(null,W);return Q.type=W,Q},Lt.createRef=function(){return{current:null}},Lt.forwardRef=function(W){return{$$typeof:a,render:W}},Lt.isValidElement=U,Lt.lazy=function(W){return{$$typeof:p,_payload:{_status:-1,_result:W},_init:oe}},Lt.memo=function(W,Q){return{$$typeof:c,type:W,compare:Q===void 0?null:Q}},Lt.startTransition=function(W){var Q=K.transition;K.transition={};try{W()}finally{K.transition=Q}},Lt.unstable_act=q,Lt.useCallback=function(W,Q){return Se.current.useCallback(W,Q)},Lt.useContext=function(W){return Se.current.useContext(W)},Lt.useDebugValue=function(){},Lt.useDeferredValue=function(W){return Se.current.useDeferredValue(W)},Lt.useEffect=function(W,Q){return Se.current.useEffect(W,Q)},Lt.useId=function(){return Se.current.useId()},Lt.useImperativeHandle=function(W,Q,ve){return Se.current.useImperativeHandle(W,Q,ve)},Lt.useInsertionEffect=function(W,Q){return Se.current.useInsertionEffect(W,Q)},Lt.useLayoutEffect=function(W,Q){return Se.current.useLayoutEffect(W,Q)},Lt.useMemo=function(W,Q){return Se.current.useMemo(W,Q)},Lt.useReducer=function(W,Q,ve){return Se.current.useReducer(W,Q,ve)},Lt.useRef=function(W){return Se.current.useRef(W)},Lt.useState=function(W){return Se.current.useState(W)},Lt.useSyncExternalStore=function(W,Q,ve){return Se.current.useSyncExternalStore(W,Q,ve)},Lt.useTransition=function(){return Se.current.useTransition()},Lt.version="18.3.1",Lt}var sL;function jM(){return sL||(sL=1,Cx.exports=bG()),Cx.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nL;function MG(){if(nL)return Dg;nL=1;var e=jM(),t=Symbol.for("react.element"),i=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,n=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,r={key:!0,ref:!0,__self:!0,__source:!0};function o(a,l,c){var p,g={},f=null,y=null;c!==void 0&&(f=""+c),l.key!==void 0&&(f=""+l.key),l.ref!==void 0&&(y=l.ref);for(p in l)s.call(l,p)&&!r.hasOwnProperty(p)&&(g[p]=l[p]);if(a&&a.defaultProps)for(p in l=a.defaultProps,l)g[p]===void 0&&(g[p]=l[p]);return{$$typeof:t,type:a,key:f,ref:y,props:g,_owner:n.current}}return Dg.Fragment=i,Dg.jsx=o,Dg.jsxs=o,Dg}var rL;function RG(){return rL||(rL=1,yx.exports=MG()),yx.exports}var fe=RG(),T=jM();const De=Qf(T);var _v={},Sx={exports:{}},_n={},wx={exports:{}},xx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var oL;function DG(){return oL||(oL=1,function(e){function t(K,pe){var q=K.length;K.push(pe);e:for(;0<q;){var W=q-1>>>1,Q=K[W];if(0<n(Q,pe))K[W]=pe,K[q]=Q,q=W;else break e}}function i(K){return K.length===0?null:K[0]}function s(K){if(K.length===0)return null;var pe=K[0],q=K.pop();if(q!==pe){K[0]=q;e:for(var W=0,Q=K.length,ve=Q>>>1;W<ve;){var se=2*(W+1)-1,ye=K[se],ue=se+1,Me=K[ue];if(0>n(ye,q))ue<Q&&0>n(Me,ye)?(K[W]=Me,K[ue]=q,W=ue):(K[W]=ye,K[se]=q,W=se);else if(ue<Q&&0>n(Me,q))K[W]=Me,K[ue]=q,W=ue;else break e}}return pe}function n(K,pe){var q=K.sortIndex-pe.sortIndex;return q!==0?q:K.id-pe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var r=performance;e.unstable_now=function(){return r.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],c=[],p=1,g=null,f=3,y=!1,C=!1,x=!1,M=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,R=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function I(K){for(var pe=i(c);pe!==null;){if(pe.callback===null)s(c);else if(pe.startTime<=K)s(c),pe.sortIndex=pe.expirationTime,t(l,pe);else break;pe=i(c)}}function P(K){if(x=!1,I(K),!C)if(i(l)!==null)C=!0,oe(k);else{var pe=i(c);pe!==null&&Se(P,pe.startTime-K)}}function k(K,pe){C=!1,x&&(x=!1,b(H),H=-1),y=!0;var q=f;try{for(I(pe),g=i(l);g!==null&&(!(g.expirationTime>pe)||K&&!$());){var W=g.callback;if(typeof W=="function"){g.callback=null,f=g.priorityLevel;var Q=W(g.expirationTime<=pe);pe=e.unstable_now(),typeof Q=="function"?g.callback=Q:g===i(l)&&s(l),I(pe)}else s(l);g=i(l)}if(g!==null)var ve=!0;else{var se=i(c);se!==null&&Se(P,se.startTime-pe),ve=!1}return ve}finally{g=null,f=q,y=!1}}var _=!1,B=null,H=-1,V=5,U=-1;function $(){return!(e.unstable_now()-U<V)}function te(){if(B!==null){var K=e.unstable_now();U=K;var pe=!0;try{pe=B(!0,K)}finally{pe?Ce():(_=!1,B=null)}}else _=!1}var Ce;if(typeof R=="function")Ce=function(){R(te)};else if(typeof MessageChannel<"u"){var be=new MessageChannel,Re=be.port2;be.port1.onmessage=te,Ce=function(){Re.postMessage(null)}}else Ce=function(){M(te,0)};function oe(K){B=K,_||(_=!0,Ce())}function Se(K,pe){H=M(function(){K(e.unstable_now())},pe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){C||y||(C=!0,oe(k))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return i(l)},e.unstable_next=function(K){switch(f){case 1:case 2:case 3:var pe=3;break;default:pe=f}var q=f;f=pe;try{return K()}finally{f=q}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,pe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var q=f;f=K;try{return pe()}finally{f=q}},e.unstable_scheduleCallback=function(K,pe,q){var W=e.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?W+q:W):q=W,K){case 1:var Q=-1;break;case 2:Q=250;break;case 5:Q=1073741823;break;case 4:Q=1e4;break;default:Q=5e3}return Q=q+Q,K={id:p++,callback:pe,priorityLevel:K,startTime:q,expirationTime:Q,sortIndex:-1},q>W?(K.sortIndex=q,t(c,K),i(l)===null&&K===i(c)&&(x?(b(H),H=-1):x=!0,Se(P,q-W))):(K.sortIndex=Q,t(l,K),C||y||(C=!0,oe(k))),K},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(K){var pe=f;return function(){var q=f;f=pe;try{return K.apply(this,arguments)}finally{f=q}}}}(xx)),xx}var aL;function EG(){return aL||(aL=1,wx.exports=DG()),wx.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lL;function IG(){if(lL)return _n;lL=1;var e=jM(),t=EG();function i(u){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+u,v=1;v<arguments.length;v++)d+="&args[]="+encodeURIComponent(arguments[v]);return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,n={};function r(u,d){o(u,d),o(u+"Capture",d)}function o(u,d){for(n[u]=d,u=0;u<d.length;u++)s.add(d[u])}var a=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),l=Object.prototype.hasOwnProperty,c=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function f(u){return l.call(g,u)?!0:l.call(p,u)?!1:c.test(u)?g[u]=!0:(p[u]=!0,!1)}function y(u,d,v,w){if(v!==null&&v.type===0)return!1;switch(typeof d){case"function":case"symbol":return!0;case"boolean":return w?!1:v!==null?!v.acceptsBooleans:(u=u.toLowerCase().slice(0,5),u!=="data-"&&u!=="aria-");default:return!1}}function C(u,d,v,w){if(d===null||typeof d>"u"||y(u,d,v,w))return!0;if(w)return!1;if(v!==null)switch(v.type){case 3:return!d;case 4:return d===!1;case 5:return isNaN(d);case 6:return isNaN(d)||1>d}return!1}function x(u,d,v,w,E,F,G){this.acceptsBooleans=d===2||d===3||d===4,this.attributeName=w,this.attributeNamespace=E,this.mustUseProperty=v,this.propertyName=u,this.type=d,this.sanitizeURL=F,this.removeEmptyString=G}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(u){M[u]=new x(u,0,!1,u,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(u){var d=u[0];M[d]=new x(d,1,!1,u[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(u){M[u]=new x(u,2,!1,u.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(u){M[u]=new x(u,2,!1,u,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(u){M[u]=new x(u,3,!1,u.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(u){M[u]=new x(u,3,!0,u,null,!1,!1)}),["capture","download"].forEach(function(u){M[u]=new x(u,4,!1,u,null,!1,!1)}),["cols","rows","size","span"].forEach(function(u){M[u]=new x(u,6,!1,u,null,!1,!1)}),["rowSpan","start"].forEach(function(u){M[u]=new x(u,5,!1,u.toLowerCase(),null,!1,!1)});var b=/[\-:]([a-z])/g;function R(u){return u[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(u){var d=u.replace(b,R);M[d]=new x(d,1,!1,u,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(u){var d=u.replace(b,R);M[d]=new x(d,1,!1,u,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(u){var d=u.replace(b,R);M[d]=new x(d,1,!1,u,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(u){M[u]=new x(u,1,!1,u.toLowerCase(),null,!1,!1)}),M.xlinkHref=new x("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(u){M[u]=new x(u,1,!1,u.toLowerCase(),null,!0,!0)});function I(u,d,v,w){var E=M.hasOwnProperty(d)?M[d]:null;(E!==null?E.type!==0:w||!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(C(d,v,E,w)&&(v=null),w||E===null?f(d)&&(v===null?u.removeAttribute(d):u.setAttribute(d,""+v)):E.mustUseProperty?u[E.propertyName]=v===null?E.type===3?!1:"":v:(d=E.attributeName,w=E.attributeNamespace,v===null?u.removeAttribute(d):(E=E.type,v=E===3||E===4&&v===!0?"":""+v,w?u.setAttributeNS(w,d,v):u.setAttribute(d,v))))}var P=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,k=Symbol.for("react.element"),_=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),$=Symbol.for("react.context"),te=Symbol.for("react.forward_ref"),Ce=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),Re=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),Se=Symbol.for("react.offscreen"),K=Symbol.iterator;function pe(u){return u===null||typeof u!="object"?null:(u=K&&u[K]||u["@@iterator"],typeof u=="function"?u:null)}var q=Object.assign,W;function Q(u){if(W===void 0)try{throw Error()}catch(v){var d=v.stack.trim().match(/\n( *(at )?)/);W=d&&d[1]||""}return`
`+W+u}var ve=!1;function se(u,d){if(!u||ve)return"";ve=!0;var v=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(he){var w=he}Reflect.construct(u,[],d)}else{try{d.call()}catch(he){w=he}u.call(d.prototype)}else{try{throw Error()}catch(he){w=he}u()}}catch(he){if(he&&w&&typeof he.stack=="string"){for(var E=he.stack.split(`
`),F=w.stack.split(`
`),G=E.length-1,j=F.length-1;1<=G&&0<=j&&E[G]!==F[j];)j--;for(;1<=G&&0<=j;G--,j--)if(E[G]!==F[j]){if(G!==1||j!==1)do if(G--,j--,0>j||E[G]!==F[j]){var Z=`
`+E[G].replace(" at new "," at ");return u.displayName&&Z.includes("<anonymous>")&&(Z=Z.replace("<anonymous>",u.displayName)),Z}while(1<=G&&0<=j);break}}}finally{ve=!1,Error.prepareStackTrace=v}return(u=u?u.displayName||u.name:"")?Q(u):""}function ye(u){switch(u.tag){case 5:return Q(u.type);case 16:return Q("Lazy");case 13:return Q("Suspense");case 19:return Q("SuspenseList");case 0:case 2:case 15:return u=se(u.type,!1),u;case 11:return u=se(u.type.render,!1),u;case 1:return u=se(u.type,!0),u;default:return""}}function ue(u){if(u==null)return null;if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u;switch(u){case B:return"Fragment";case _:return"Portal";case V:return"Profiler";case H:return"StrictMode";case Ce:return"Suspense";case be:return"SuspenseList"}if(typeof u=="object")switch(u.$$typeof){case $:return(u.displayName||"Context")+".Consumer";case U:return(u._context.displayName||"Context")+".Provider";case te:var d=u.render;return u=u.displayName,u||(u=d.displayName||d.name||"",u=u!==""?"ForwardRef("+u+")":"ForwardRef"),u;case Re:return d=u.displayName||null,d!==null?d:ue(u.type)||"Memo";case oe:d=u._payload,u=u._init;try{return ue(u(d))}catch{}}return null}function Me(u){var d=u.type;switch(u.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return u=d.render,u=u.displayName||u.name||"",d.displayName||(u!==""?"ForwardRef("+u+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ue(d);case 8:return d===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function me(u){switch(typeof u){case"boolean":case"number":case"string":case"undefined":return u;case"object":return u;default:return""}}function ne(u){var d=u.type;return(u=u.nodeName)&&u.toLowerCase()==="input"&&(d==="checkbox"||d==="radio")}function Ee(u){var d=ne(u)?"checked":"value",v=Object.getOwnPropertyDescriptor(u.constructor.prototype,d),w=""+u[d];if(!u.hasOwnProperty(d)&&typeof v<"u"&&typeof v.get=="function"&&typeof v.set=="function"){var E=v.get,F=v.set;return Object.defineProperty(u,d,{configurable:!0,get:function(){return E.call(this)},set:function(G){w=""+G,F.call(this,G)}}),Object.defineProperty(u,d,{enumerable:v.enumerable}),{getValue:function(){return w},setValue:function(G){w=""+G},stopTracking:function(){u._valueTracker=null,delete u[d]}}}}function ze(u){u._valueTracker||(u._valueTracker=Ee(u))}function Be(u){if(!u)return!1;var d=u._valueTracker;if(!d)return!0;var v=d.getValue(),w="";return u&&(w=ne(u)?u.checked?"true":"false":u.value),u=w,u!==v?(d.setValue(u),!0):!1}function $e(u){if(u=u||(typeof document<"u"?document:void 0),typeof u>"u")return null;try{return u.activeElement||u.body}catch{return u.body}}function tt(u,d){var v=d.checked;return q({},d,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:v??u._wrapperState.initialChecked})}function Ne(u,d){var v=d.defaultValue==null?"":d.defaultValue,w=d.checked!=null?d.checked:d.defaultChecked;v=me(d.value!=null?d.value:v),u._wrapperState={initialChecked:w,initialValue:v,controlled:d.type==="checkbox"||d.type==="radio"?d.checked!=null:d.value!=null}}function qe(u,d){d=d.checked,d!=null&&I(u,"checked",d,!1)}function ft(u,d){qe(u,d);var v=me(d.value),w=d.type;if(v!=null)w==="number"?(v===0&&u.value===""||u.value!=v)&&(u.value=""+v):u.value!==""+v&&(u.value=""+v);else if(w==="submit"||w==="reset"){u.removeAttribute("value");return}d.hasOwnProperty("value")?Dt(u,d.type,v):d.hasOwnProperty("defaultValue")&&Dt(u,d.type,me(d.defaultValue)),d.checked==null&&d.defaultChecked!=null&&(u.defaultChecked=!!d.defaultChecked)}function Rt(u,d,v){if(d.hasOwnProperty("value")||d.hasOwnProperty("defaultValue")){var w=d.type;if(!(w!=="submit"&&w!=="reset"||d.value!==void 0&&d.value!==null))return;d=""+u._wrapperState.initialValue,v||d===u.value||(u.value=d),u.defaultValue=d}v=u.name,v!==""&&(u.name=""),u.defaultChecked=!!u._wrapperState.initialChecked,v!==""&&(u.name=v)}function Dt(u,d,v){(d!=="number"||$e(u.ownerDocument)!==u)&&(v==null?u.defaultValue=""+u._wrapperState.initialValue:u.defaultValue!==""+v&&(u.defaultValue=""+v))}var xt=Array.isArray;function Mt(u,d,v,w){if(u=u.options,d){d={};for(var E=0;E<v.length;E++)d["$"+v[E]]=!0;for(v=0;v<u.length;v++)E=d.hasOwnProperty("$"+u[v].value),u[v].selected!==E&&(u[v].selected=E),E&&w&&(u[v].defaultSelected=!0)}else{for(v=""+me(v),d=null,E=0;E<u.length;E++){if(u[E].value===v){u[E].selected=!0,w&&(u[E].defaultSelected=!0);return}d!==null||u[E].disabled||(d=u[E])}d!==null&&(d.selected=!0)}}function Ri(u,d){if(d.dangerouslySetInnerHTML!=null)throw Error(i(91));return q({},d,{value:void 0,defaultValue:void 0,children:""+u._wrapperState.initialValue})}function Ki(u,d){var v=d.value;if(v==null){if(v=d.children,d=d.defaultValue,v!=null){if(d!=null)throw Error(i(92));if(xt(v)){if(1<v.length)throw Error(i(93));v=v[0]}d=v}d==null&&(d=""),v=d}u._wrapperState={initialValue:me(v)}}function Qs(u,d){var v=me(d.value),w=me(d.defaultValue);v!=null&&(v=""+v,v!==u.value&&(u.value=v),d.defaultValue==null&&u.defaultValue!==v&&(u.defaultValue=v)),w!=null&&(u.defaultValue=""+w)}function Yi(u){var d=u.textContent;d===u._wrapperState.initialValue&&d!==""&&d!==null&&(u.value=d)}function ut(u){switch(u){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ni(u,d){return u==null||u==="http://www.w3.org/1999/xhtml"?ut(d):u==="http://www.w3.org/2000/svg"&&d==="foreignObject"?"http://www.w3.org/1999/xhtml":u}var vi,zl=function(u){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(d,v,w,E){MSApp.execUnsafeLocalFunction(function(){return u(d,v,w,E)})}:u}(function(u,d){if(u.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in u)u.innerHTML=d;else{for(vi=vi||document.createElement("div"),vi.innerHTML="<svg>"+d.valueOf().toString()+"</svg>",d=vi.firstChild;u.firstChild;)u.removeChild(u.firstChild);for(;d.firstChild;)u.appendChild(d.firstChild)}});function Gi(u,d){if(d){var v=u.firstChild;if(v&&v===u.lastChild&&v.nodeType===3){v.nodeValue=d;return}}u.textContent=d}var Dn={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},jh=["Webkit","ms","Moz","O"];Object.keys(Dn).forEach(function(u){jh.forEach(function(d){d=d+u.charAt(0).toUpperCase()+u.substring(1),Dn[d]=Dn[u]})});function Hl(u,d,v){return d==null||typeof d=="boolean"||d===""?"":v||typeof d!="number"||d===0||Dn.hasOwnProperty(u)&&Dn[u]?(""+d).trim():d+"px"}function Vl(u,d){u=u.style;for(var v in d)if(d.hasOwnProperty(v)){var w=v.indexOf("--")===0,E=Hl(v,d[v],w);v==="float"&&(v="cssFloat"),w?u.setProperty(v,E):u[v]=E}}var du=q({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Go(u,d){if(d){if(du[u]&&(d.children!=null||d.dangerouslySetInnerHTML!=null))throw Error(i(137,u));if(d.dangerouslySetInnerHTML!=null){if(d.children!=null)throw Error(i(60));if(typeof d.dangerouslySetInnerHTML!="object"||!("__html"in d.dangerouslySetInnerHTML))throw Error(i(61))}if(d.style!=null&&typeof d.style!="object")throw Error(i(62))}}function Cr(u,d){if(u.indexOf("-")===-1)return typeof d.is=="string";switch(u){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var La=null;function pu(u){return u=u.target||u.srcElement||window,u.correspondingUseElement&&(u=u.correspondingUseElement),u.nodeType===3?u.parentNode:u}var Ta=null,io=null,Sr=null;function Aa(u){if(u=Ka(u)){if(typeof Ta!="function")throw Error(i(280));var d=u.stateNode;d&&(d=fd(d),Ta(u.stateNode,u.type,d))}}function Pa(u){io?Sr?Sr.push(u):Sr=[u]:io=u}function Uh(){if(io){var u=io,d=Sr;if(Sr=io=null,Aa(u),d)for(u=0;u<d.length;u++)Aa(d[u])}}function Kh(u,d){return u(d)}function X(){}var ee=!1;function ge(u,d,v){if(ee)return u(d,v);ee=!0;try{return Kh(u,d,v)}finally{ee=!1,(io!==null||Sr!==null)&&(X(),Uh())}}function Le(u,d){var v=u.stateNode;if(v===null)return null;var w=fd(v);if(w===null)return null;v=w[d];e:switch(d){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(w=!w.disabled)||(u=u.type,w=!(u==="button"||u==="input"||u==="select"||u==="textarea")),u=!w;break e;default:u=!1}if(u)return null;if(v&&typeof v!="function")throw Error(i(231,d,typeof v));return v}var je=!1;if(a)try{var Je={};Object.defineProperty(Je,"passive",{get:function(){je=!0}}),window.addEventListener("test",Je,Je),window.removeEventListener("test",Je,Je)}catch{je=!1}function dt(u,d,v,w,E,F,G,j,Z){var he=Array.prototype.slice.call(arguments,3);try{d.apply(v,he)}catch(Pe){this.onError(Pe)}}var Ve=!1,xe=null,He=!1,ht=null,wt={onError:function(u){Ve=!0,xe=u}};function ei(u,d,v,w,E,F,G,j,Z){Ve=!1,xe=null,dt.apply(wt,arguments)}function Li(u,d,v,w,E,F,G,j,Z){if(ei.apply(this,arguments),Ve){if(Ve){var he=xe;Ve=!1,xe=null}else throw Error(i(198));He||(He=!0,ht=he)}}function Bt(u){var d=u,v=u;if(u.alternate)for(;d.return;)d=d.return;else{u=d;do d=u,d.flags&4098&&(v=d.return),u=d.return;while(u)}return d.tag===3?v:null}function kt(u){if(u.tag===13){var d=u.memoizedState;if(d===null&&(u=u.alternate,u!==null&&(d=u.memoizedState)),d!==null)return d.dehydrated}return null}function yi(u){if(Bt(u)!==u)throw Error(i(188))}function zo(u){var d=u.alternate;if(!d){if(d=Bt(u),d===null)throw Error(i(188));return d!==u?null:u}for(var v=u,w=d;;){var E=v.return;if(E===null)break;var F=E.alternate;if(F===null){if(w=E.return,w!==null){v=w;continue}break}if(E.child===F.child){for(F=E.child;F;){if(F===v)return yi(E),u;if(F===w)return yi(E),d;F=F.sibling}throw Error(i(188))}if(v.return!==w.return)v=E,w=F;else{for(var G=!1,j=E.child;j;){if(j===v){G=!0,v=E,w=F;break}if(j===w){G=!0,w=E,v=F;break}j=j.sibling}if(!G){for(j=F.child;j;){if(j===v){G=!0,v=F,w=E;break}if(j===w){G=!0,w=F,v=E;break}j=j.sibling}if(!G)throw Error(i(189))}}if(v.alternate!==w)throw Error(i(190))}if(v.tag!==3)throw Error(i(188));return v.stateNode.current===v?u:d}function Ho(u){return u=zo(u),u!==null?En(u):null}function En(u){if(u.tag===5||u.tag===6)return u;for(u=u.child;u!==null;){var d=En(u);if(d!==null)return d;u=u.sibling}return null}var qs=t.unstable_scheduleCallback,Fa=t.unstable_cancelCallback,ka=t.unstable_shouldYield,In=t.unstable_requestPaint,ri=t.unstable_now,Wl=t.unstable_getCurrentPriorityLevel,Vt=t.unstable_ImmediatePriority,$i=t.unstable_UserBlockingPriority,so=t.unstable_NormalPriority,no=t.unstable_LowPriority,ti=t.unstable_IdlePriority,Ln=null,Ps=null;function Na(u){if(Ps&&typeof Ps.onCommitFiberRoot=="function")try{Ps.onCommitFiberRoot(Ln,u,void 0,(u.current.flags&128)===128)}catch{}}var Ct=Math.clz32?Math.clz32:jl,Ci=Math.log,Yh=Math.LN2;function jl(u){return u>>>=0,u===0?32:31-(Ci(u)/Yh|0)|0}var ro=64,Ul=4194304;function vt(u){switch(u&-u){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return u&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return u}}function gi(u,d){var v=u.pendingLanes;if(v===0)return 0;var w=0,E=u.suspendedLanes,F=u.pingedLanes,G=v&268435455;if(G!==0){var j=G&~E;j!==0?w=vt(j):(F&=G,F!==0&&(w=vt(F)))}else G=v&~E,G!==0?w=vt(G):F!==0&&(w=vt(F));if(w===0)return 0;if(d!==0&&d!==w&&!(d&E)&&(E=w&-w,F=d&-d,E>=F||E===16&&(F&4194240)!==0))return d;if(w&4&&(w|=v&16),d=u.entangledLanes,d!==0)for(u=u.entanglements,d&=w;0<d;)v=31-Ct(d),E=1<<v,w|=u[v],d&=~E;return w}function Vp(u,d){switch(u){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $h(u,d){for(var v=u.suspendedLanes,w=u.pingedLanes,E=u.expirationTimes,F=u.pendingLanes;0<F;){var G=31-Ct(F),j=1<<G,Z=E[G];Z===-1?(!(j&v)||j&w)&&(E[G]=Vp(j,d)):Z<=d&&(u.expiredLanes|=j),F&=~j}}function Fs(u){return u=u.pendingLanes&-1073741825,u!==0?u:u&1073741824?1073741824:0}function Tm(){var u=ro;return ro<<=1,!(ro&4194240)&&(ro=64),u}function Kl(u){for(var d=[],v=0;31>v;v++)d.push(u);return d}function qn(u,d,v){u.pendingLanes|=d,d!==536870912&&(u.suspendedLanes=0,u.pingedLanes=0),u=u.eventTimes,d=31-Ct(d),u[d]=v}function zi(u,d){var v=u.pendingLanes&~d;u.pendingLanes=d,u.suspendedLanes=0,u.pingedLanes=0,u.expiredLanes&=d,u.mutableReadLanes&=d,u.entangledLanes&=d,d=u.entanglements;var w=u.eventTimes;for(u=u.expirationTimes;0<v;){var E=31-Ct(v),F=1<<E;d[E]=0,w[E]=-1,u[E]=-1,v&=~F}}function oo(u,d){var v=u.entangledLanes|=d;for(u=u.entanglements;v;){var w=31-Ct(v),E=1<<w;E&d|u[w]&d&&(u[w]|=d),v&=~E}}var Nt=0;function Yl(u){return u&=-u,1<u?4<u?u&268435455?16:536870912:4:1}var Zh,Oa,Xh,Qh,gu,fu=!1,$l=[],Jn=null,ao=null,wr=null,mu=new Map,pt=new Map,as=[],oi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wp(u,d){switch(u){case"focusin":case"focusout":Jn=null;break;case"dragenter":case"dragleave":ao=null;break;case"mouseover":case"mouseout":wr=null;break;case"pointerover":case"pointerout":mu.delete(d.pointerId);break;case"gotpointercapture":case"lostpointercapture":pt.delete(d.pointerId)}}function _a(u,d,v,w,E,F){return u===null||u.nativeEvent!==F?(u={blockedOn:d,domEventName:v,eventSystemFlags:w,nativeEvent:F,targetContainers:[E]},d!==null&&(d=Ka(d),d!==null&&Oa(d)),u):(u.eventSystemFlags|=w,d=u.targetContainers,E!==null&&d.indexOf(E)===-1&&d.push(E),u)}function jp(u,d,v,w,E){switch(d){case"focusin":return Jn=_a(Jn,u,d,v,w,E),!0;case"dragenter":return ao=_a(ao,u,d,v,w,E),!0;case"mouseover":return wr=_a(wr,u,d,v,w,E),!0;case"pointerover":var F=E.pointerId;return mu.set(F,_a(mu.get(F)||null,u,d,v,w,E)),!0;case"gotpointercapture":return F=E.pointerId,pt.set(F,_a(pt.get(F)||null,u,d,v,w,E)),!0}return!1}function qh(u){var d=Ua(u.target);if(d!==null){var v=Bt(d);if(v!==null){if(d=v.tag,d===13){if(d=kt(v),d!==null){u.blockedOn=d,gu(u.priority,function(){Xh(v)});return}}else if(d===3&&v.stateNode.current.memoizedState.isDehydrated){u.blockedOn=v.tag===3?v.stateNode.containerInfo:null;return}}}u.blockedOn=null}function xr(u){if(u.blockedOn!==null)return!1;for(var d=u.targetContainers;0<d.length;){var v=td(u.domEventName,u.eventSystemFlags,d[0],u.nativeEvent);if(v===null){v=u.nativeEvent;var w=new v.constructor(v.type,v);La=w,v.target.dispatchEvent(w),La=null}else return d=Ka(v),d!==null&&Oa(d),u.blockedOn=v,!1;d.shift()}return!0}function Jh(u,d,v){xr(u)&&v.delete(d)}function vu(){fu=!1,Jn!==null&&xr(Jn)&&(Jn=null),ao!==null&&xr(ao)&&(ao=null),wr!==null&&xr(wr)&&(wr=null),mu.forEach(Jh),pt.forEach(Jh)}function Ti(u,d){u.blockedOn===d&&(u.blockedOn=null,fu||(fu=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,vu)))}function er(u){function d(E){return Ti(E,u)}if(0<$l.length){Ti($l[0],u);for(var v=1;v<$l.length;v++){var w=$l[v];w.blockedOn===u&&(w.blockedOn=null)}}for(Jn!==null&&Ti(Jn,u),ao!==null&&Ti(ao,u),wr!==null&&Ti(wr,u),mu.forEach(d),pt.forEach(d),v=0;v<as.length;v++)w=as[v],w.blockedOn===u&&(w.blockedOn=null);for(;0<as.length&&(v=as[0],v.blockedOn===null);)qh(v),v.blockedOn===null&&as.shift()}var Ba=P.ReactCurrentBatchConfig,yu=!0;function JS(u,d,v,w){var E=Nt,F=Ba.transition;Ba.transition=null;try{Nt=1,Cu(u,d,v,w)}finally{Nt=E,Ba.transition=F}}function Am(u,d,v,w){var E=Nt,F=Ba.transition;Ba.transition=null;try{Nt=4,Cu(u,d,v,w)}finally{Nt=E,Ba.transition=F}}function Cu(u,d,v,w){if(yu){var E=td(u,d,v,w);if(E===null)h(u,d,w,ed,v),Wp(u,w);else if(jp(E,u,d,v,w))w.stopPropagation();else if(Wp(u,w),d&4&&-1<oi.indexOf(u)){for(;E!==null;){var F=Ka(E);if(F!==null&&Zh(F),F=td(u,d,v,w),F===null&&h(u,d,w,ed,v),F===E)break;E=F}E!==null&&w.stopPropagation()}else h(u,d,w,null,v)}}var ed=null;function td(u,d,v,w){if(ed=null,u=pu(w),u=Ua(u),u!==null)if(d=Bt(u),d===null)u=null;else if(v=d.tag,v===13){if(u=kt(d),u!==null)return u;u=null}else if(v===3){if(d.stateNode.current.memoizedState.isDehydrated)return d.tag===3?d.stateNode.containerInfo:null;u=null}else d!==u&&(u=null);return ed=u,null}function Tt(u){switch(u){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Wl()){case Vt:return 1;case $i:return 4;case so:case no:return 16;case ti:return 536870912;default:return 16}default:return 16}}var Vo=null,Js=null,Wo=null;function Up(){if(Wo)return Wo;var u,d=Js,v=d.length,w,E="value"in Vo?Vo.value:Vo.textContent,F=E.length;for(u=0;u<v&&d[u]===E[u];u++);var G=v-u;for(w=1;w<=G&&d[v-w]===E[F-w];w++);return Wo=E.slice(u,1<w?1-w:void 0)}function id(u){var d=u.keyCode;return"charCode"in u?(u=u.charCode,u===0&&d===13&&(u=13)):u=d,u===10&&(u=13),32<=u||u===13?u:0}function Zl(){return!0}function Pm(){return!1}function ks(u){function d(v,w,E,F,G){this._reactName=v,this._targetInst=E,this.type=w,this.nativeEvent=F,this.target=G,this.currentTarget=null;for(var j in u)u.hasOwnProperty(j)&&(v=u[j],this[j]=v?v(F):F[j]);return this.isDefaultPrevented=(F.defaultPrevented!=null?F.defaultPrevented:F.returnValue===!1)?Zl:Pm,this.isPropagationStopped=Pm,this}return q(d.prototype,{preventDefault:function(){this.defaultPrevented=!0;var v=this.nativeEvent;v&&(v.preventDefault?v.preventDefault():typeof v.returnValue!="unknown"&&(v.returnValue=!1),this.isDefaultPrevented=Zl)},stopPropagation:function(){var v=this.nativeEvent;v&&(v.stopPropagation?v.stopPropagation():typeof v.cancelBubble!="unknown"&&(v.cancelBubble=!0),this.isPropagationStopped=Zl)},persist:function(){},isPersistent:Zl}),d}var Xl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(u){return u.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Kp=ks(Xl),Ga=q({},Xl,{view:0,detail:0}),ew=ks(Ga),Tn,Yp,Ql,tr=q({},Ga,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ha,button:0,buttons:0,relatedTarget:function(u){return u.relatedTarget===void 0?u.fromElement===u.srcElement?u.toElement:u.fromElement:u.relatedTarget},movementX:function(u){return"movementX"in u?u.movementX:(u!==Ql&&(Ql&&u.type==="mousemove"?(Tn=u.screenX-Ql.screenX,Yp=u.screenY-Ql.screenY):Yp=Tn=0,Ql=u),Tn)},movementY:function(u){return"movementY"in u?u.movementY:Yp}}),$p=ks(tr),Fm=q({},tr,{dataTransfer:0}),Zp=ks(Fm),tw=q({},Ga,{relatedTarget:0}),sd=ks(tw),km=q({},Xl,{animationName:0,elapsedTime:0,pseudoElement:0}),iw=ks(km),sw=q({},Xl,{clipboardData:function(u){return"clipboardData"in u?u.clipboardData:window.clipboardData}}),Xp=ks(sw),nw=q({},Xl,{data:0}),Qp=ks(nw),Nm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nd={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},za={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rw(u){var d=this.nativeEvent;return d.getModifierState?d.getModifierState(u):(u=za[u])?!!d[u]:!1}function Ha(){return rw}var An=q({},Ga,{key:function(u){if(u.key){var d=Nm[u.key]||u.key;if(d!=="Unidentified")return d}return u.type==="keypress"?(u=id(u),u===13?"Enter":String.fromCharCode(u)):u.type==="keydown"||u.type==="keyup"?nd[u.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ha,charCode:function(u){return u.type==="keypress"?id(u):0},keyCode:function(u){return u.type==="keydown"||u.type==="keyup"?u.keyCode:0},which:function(u){return u.type==="keypress"?id(u):u.type==="keydown"||u.type==="keyup"?u.keyCode:0}}),Om=ks(An),_m=q({},tr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bm=ks(_m),qp=q({},Ga,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ha}),Jp=ks(qp),ow=q({},Xl,{propertyName:0,elapsedTime:0,pseudoElement:0}),aw=ks(ow),Gm=q({},tr,{deltaX:function(u){return"deltaX"in u?u.deltaX:"wheelDeltaX"in u?-u.wheelDeltaX:0},deltaY:function(u){return"deltaY"in u?u.deltaY:"wheelDeltaY"in u?-u.wheelDeltaY:"wheelDelta"in u?-u.wheelDelta:0},deltaZ:0,deltaMode:0}),lw=ks(Gm),ir=[9,13,27,32],jo=a&&"CompositionEvent"in window,Su=null;a&&"documentMode"in document&&(Su=document.documentMode);var lo=a&&"TextEvent"in window&&!Su,zm=a&&(!jo||Su&&8<Su&&11>=Su),Va=" ",Hm=!1;function ql(u,d){switch(u){case"keyup":return ir.indexOf(d.keyCode)!==-1;case"keydown":return d.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function eg(u){return u=u.detail,typeof u=="object"&&"data"in u?u.data:null}var co=!1;function cw(u,d){switch(u){case"compositionend":return eg(d);case"keypress":return d.which!==32?null:(Hm=!0,Va);case"textInput":return u=d.data,u===Va&&Hm?null:u;default:return null}}function Uo(u,d){if(co)return u==="compositionend"||!jo&&ql(u,d)?(u=Up(),Wo=Js=Vo=null,co=!1,u):null;switch(u){case"paste":return null;case"keypress":if(!(d.ctrlKey||d.altKey||d.metaKey)||d.ctrlKey&&d.altKey){if(d.char&&1<d.char.length)return d.char;if(d.which)return String.fromCharCode(d.which)}return null;case"compositionend":return zm&&d.locale!=="ko"?null:d.data;default:return null}}var rd={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Vm(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d==="input"?!!rd[u.type]:d==="textarea"}function od(u,d,v,w){Pa(w),d=S(d,"onChange"),0<d.length&&(v=new Kp("onChange","change",null,v,w),u.push({event:v,listeners:d}))}var wu=null,en=null;function uw(u){cg(u,0)}function uo(u){var d=Ya(u);if(Be(d))return u}function hw(u,d){if(u==="change")return d}var br=!1;if(a){var Jl;if(a){var ad="oninput"in document;if(!ad){var ld=document.createElement("div");ld.setAttribute("oninput","return;"),ad=typeof ld.oninput=="function"}Jl=ad}else Jl=!1;br=Jl&&(!document.documentMode||9<document.documentMode)}function xu(){wu&&(wu.detachEvent("onpropertychange",cd),en=wu=null)}function cd(u){if(u.propertyName==="value"&&uo(en)){var d=[];od(d,en,u,pu(u)),ge(uw,d)}}function ud(u,d,v){u==="focusin"?(xu(),wu=d,en=v,wu.attachEvent("onpropertychange",cd)):u==="focusout"&&xu()}function ec(u){if(u==="selectionchange"||u==="keyup"||u==="keydown")return uo(en)}function hd(u,d){if(u==="click")return uo(d)}function tg(u,d){if(u==="input"||u==="change")return uo(d)}function Wm(u,d){return u===d&&(u!==0||1/u===1/d)||u!==u&&d!==d}var sr=typeof Object.is=="function"?Object.is:Wm;function Ko(u,d){if(sr(u,d))return!0;if(typeof u!="object"||u===null||typeof d!="object"||d===null)return!1;var v=Object.keys(u),w=Object.keys(d);if(v.length!==w.length)return!1;for(w=0;w<v.length;w++){var E=v[w];if(!l.call(d,E)||!sr(u[E],d[E]))return!1}return!0}function jm(u){for(;u&&u.firstChild;)u=u.firstChild;return u}function ig(u,d){var v=jm(u);u=0;for(var w;v;){if(v.nodeType===3){if(w=u+v.textContent.length,u<=d&&w>=d)return{node:v,offset:d-u};u=w}e:{for(;v;){if(v.nextSibling){v=v.nextSibling;break e}v=v.parentNode}v=void 0}v=jm(v)}}function Um(u,d){return u&&d?u===d?!0:u&&u.nodeType===3?!1:d&&d.nodeType===3?Um(u,d.parentNode):"contains"in u?u.contains(d):u.compareDocumentPosition?!!(u.compareDocumentPosition(d)&16):!1:!1}function sg(){for(var u=window,d=$e();d instanceof u.HTMLIFrameElement;){try{var v=typeof d.contentWindow.location.href=="string"}catch{v=!1}if(v)u=d.contentWindow;else break;d=$e(u.document)}return d}function ng(u){var d=u&&u.nodeName&&u.nodeName.toLowerCase();return d&&(d==="input"&&(u.type==="text"||u.type==="search"||u.type==="tel"||u.type==="url"||u.type==="password")||d==="textarea"||u.contentEditable==="true")}function Mr(u){var d=sg(),v=u.focusedElem,w=u.selectionRange;if(d!==v&&v&&v.ownerDocument&&Um(v.ownerDocument.documentElement,v)){if(w!==null&&ng(v)){if(d=w.start,u=w.end,u===void 0&&(u=d),"selectionStart"in v)v.selectionStart=d,v.selectionEnd=Math.min(u,v.value.length);else if(u=(d=v.ownerDocument||document)&&d.defaultView||window,u.getSelection){u=u.getSelection();var E=v.textContent.length,F=Math.min(w.start,E);w=w.end===void 0?F:Math.min(w.end,E),!u.extend&&F>w&&(E=w,w=F,F=E),E=ig(v,F);var G=ig(v,w);E&&G&&(u.rangeCount!==1||u.anchorNode!==E.node||u.anchorOffset!==E.offset||u.focusNode!==G.node||u.focusOffset!==G.offset)&&(d=d.createRange(),d.setStart(E.node,E.offset),u.removeAllRanges(),F>w?(u.addRange(d),u.extend(G.node,G.offset)):(d.setEnd(G.node,G.offset),u.addRange(d)))}}for(d=[],u=v;u=u.parentNode;)u.nodeType===1&&d.push({element:u,left:u.scrollLeft,top:u.scrollTop});for(typeof v.focus=="function"&&v.focus(),v=0;v<d.length;v++)u=d[v],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}}var dd=a&&"documentMode"in document&&11>=document.documentMode,tc=null,ic=null,bu=null,pd=!1;function Km(u,d,v){var w=v.window===v?v.document:v.nodeType===9?v:v.ownerDocument;pd||tc==null||tc!==$e(w)||(w=tc,"selectionStart"in w&&ng(w)?w={start:w.selectionStart,end:w.selectionEnd}:(w=(w.ownerDocument&&w.ownerDocument.defaultView||window).getSelection(),w={anchorNode:w.anchorNode,anchorOffset:w.anchorOffset,focusNode:w.focusNode,focusOffset:w.focusOffset}),bu&&Ko(bu,w)||(bu=w,w=S(ic,"onSelect"),0<w.length&&(d=new Kp("onSelect","select",null,d,v),u.push({event:d,listeners:w}),d.target=tc)))}function Yo(u,d){var v={};return v[u.toLowerCase()]=d.toLowerCase(),v["Webkit"+u]="webkit"+d,v["Moz"+u]="moz"+d,v}var sc={animationend:Yo("Animation","AnimationEnd"),animationiteration:Yo("Animation","AnimationIteration"),animationstart:Yo("Animation","AnimationStart"),transitionend:Yo("Transition","TransitionEnd")},$o={},rg={};a&&(rg=document.createElement("div").style,"AnimationEvent"in window||(delete sc.animationend.animation,delete sc.animationiteration.animation,delete sc.animationstart.animation),"TransitionEvent"in window||delete sc.transitionend.transition);function Mu(u){if($o[u])return $o[u];if(!sc[u])return u;var d=sc[u],v;for(v in d)if(d.hasOwnProperty(v)&&v in rg)return $o[u]=d[v];return u}var Ym=Mu("animationend"),Rr=Mu("animationiteration"),og=Mu("animationstart"),ag=Mu("transitionend"),nc=new Map,$m="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function nr(u,d){nc.set(u,d),r(d,[u])}for(var Wa=0;Wa<$m.length;Wa++){var gd=$m[Wa],Zm=gd.toLowerCase(),dw=gd[0].toUpperCase()+gd.slice(1);nr(Zm,"on"+dw)}nr(Ym,"onAnimationEnd"),nr(Rr,"onAnimationIteration"),nr(og,"onAnimationStart"),nr("dblclick","onDoubleClick"),nr("focusin","onFocus"),nr("focusout","onBlur"),nr(ag,"onTransitionEnd"),o("onMouseEnter",["mouseout","mouseover"]),o("onMouseLeave",["mouseout","mouseover"]),o("onPointerEnter",["pointerout","pointerover"]),o("onPointerLeave",["pointerout","pointerover"]),r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),r("onBeforeInput",["compositionend","keypress","textInput","paste"]),r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var rc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xm=new Set("cancel close invalid load scroll toggle".split(" ").concat(rc));function lg(u,d,v){var w=u.type||"unknown-event";u.currentTarget=v,Li(w,d,void 0,u),u.currentTarget=null}function cg(u,d){d=(d&4)!==0;for(var v=0;v<u.length;v++){var w=u[v],E=w.event;w=w.listeners;e:{var F=void 0;if(d)for(var G=w.length-1;0<=G;G--){var j=w[G],Z=j.instance,he=j.currentTarget;if(j=j.listener,Z!==F&&E.isPropagationStopped())break e;lg(E,j,he),F=Z}else for(G=0;G<w.length;G++){if(j=w[G],Z=j.instance,he=j.currentTarget,j=j.listener,Z!==F&&E.isPropagationStopped())break e;lg(E,j,he),F=Z}}}if(He)throw u=ht,He=!1,ht=null,u}function ai(u,d){var v=d[cc];v===void 0&&(v=d[cc]=new Set);var w=u+"__bubble";v.has(w)||(Qm(d,u,2,!1),v.add(w))}function ug(u,d,v){var w=0;d&&(w|=4),Qm(v,u,w,d)}var Ru="_reactListening"+Math.random().toString(36).slice(2);function oc(u){if(!u[Ru]){u[Ru]=!0,s.forEach(function(v){v!=="selectionchange"&&(Xm.has(v)||ug(v,!1,u),ug(v,!0,u))});var d=u.nodeType===9?u:u.ownerDocument;d===null||d[Ru]||(d[Ru]=!0,ug("selectionchange",!1,d))}}function Qm(u,d,v,w){switch(Tt(d)){case 1:var E=JS;break;case 4:E=Am;break;default:E=Cu}v=E.bind(null,d,v,u),E=void 0,!je||d!=="touchstart"&&d!=="touchmove"&&d!=="wheel"||(E=!0),w?E!==void 0?u.addEventListener(d,v,{capture:!0,passive:E}):u.addEventListener(d,v,!0):E!==void 0?u.addEventListener(d,v,{passive:E}):u.addEventListener(d,v,!1)}function h(u,d,v,w,E){var F=w;if(!(d&1)&&!(d&2)&&w!==null)e:for(;;){if(w===null)return;var G=w.tag;if(G===3||G===4){var j=w.stateNode.containerInfo;if(j===E||j.nodeType===8&&j.parentNode===E)break;if(G===4)for(G=w.return;G!==null;){var Z=G.tag;if((Z===3||Z===4)&&(Z=G.stateNode.containerInfo,Z===E||Z.nodeType===8&&Z.parentNode===E))return;G=G.return}for(;j!==null;){if(G=Ua(j),G===null)return;if(Z=G.tag,Z===5||Z===6){w=F=G;continue e}j=j.parentNode}}w=w.return}ge(function(){var he=F,Pe=pu(v),ke=[];e:{var Te=nc.get(u);if(Te!==void 0){var Ke=Kp,Qe=u;switch(u){case"keypress":if(id(v)===0)break e;case"keydown":case"keyup":Ke=Om;break;case"focusin":Qe="focus",Ke=sd;break;case"focusout":Qe="blur",Ke=sd;break;case"beforeblur":case"afterblur":Ke=sd;break;case"click":if(v.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ke=$p;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ke=Zp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ke=Jp;break;case Ym:case Rr:case og:Ke=iw;break;case ag:Ke=aw;break;case"scroll":Ke=ew;break;case"wheel":Ke=lw;break;case"copy":case"cut":case"paste":Ke=Xp;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ke=Bm}var et=(d&4)!==0,Zi=!et&&u==="scroll",re=et?Te!==null?Te+"Capture":null:Te;et=[];for(var J=he,ae;J!==null;){ae=J;var Oe=ae.stateNode;if(ae.tag===5&&Oe!==null&&(ae=Oe,re!==null&&(Oe=Le(J,re),Oe!=null&&et.push(m(J,Oe,ae)))),Zi)break;J=J.return}0<et.length&&(Te=new Ke(Te,Qe,null,v,Pe),ke.push({event:Te,listeners:et}))}}if(!(d&7)){e:{if(Te=u==="mouseover"||u==="pointerover",Ke=u==="mouseout"||u==="pointerout",Te&&v!==La&&(Qe=v.relatedTarget||v.fromElement)&&(Ua(Qe)||Qe[qt]))break e;if((Ke||Te)&&(Te=Pe.window===Pe?Pe:(Te=Pe.ownerDocument)?Te.defaultView||Te.parentWindow:window,Ke?(Qe=v.relatedTarget||v.toElement,Ke=he,Qe=Qe?Ua(Qe):null,Qe!==null&&(Zi=Bt(Qe),Qe!==Zi||Qe.tag!==5&&Qe.tag!==6)&&(Qe=null)):(Ke=null,Qe=he),Ke!==Qe)){if(et=$p,Oe="onMouseLeave",re="onMouseEnter",J="mouse",(u==="pointerout"||u==="pointerover")&&(et=Bm,Oe="onPointerLeave",re="onPointerEnter",J="pointer"),Zi=Ke==null?Te:Ya(Ke),ae=Qe==null?Te:Ya(Qe),Te=new et(Oe,J+"leave",Ke,v,Pe),Te.target=Zi,Te.relatedTarget=ae,Oe=null,Ua(Pe)===he&&(et=new et(re,J+"enter",Qe,v,Pe),et.target=ae,et.relatedTarget=Zi,Oe=et),Zi=Oe,Ke&&Qe)t:{for(et=Ke,re=Qe,J=0,ae=et;ae;ae=D(ae))J++;for(ae=0,Oe=re;Oe;Oe=D(Oe))ae++;for(;0<J-ae;)et=D(et),J--;for(;0<ae-J;)re=D(re),ae--;for(;J--;){if(et===re||re!==null&&et===re.alternate)break t;et=D(et),re=D(re)}et=null}else et=null;Ke!==null&&N(ke,Te,Ke,et,!1),Qe!==null&&Zi!==null&&N(ke,Zi,Qe,et,!0)}}e:{if(Te=he?Ya(he):window,Ke=Te.nodeName&&Te.nodeName.toLowerCase(),Ke==="select"||Ke==="input"&&Te.type==="file")var it=hw;else if(Vm(Te))if(br)it=tg;else{it=ec;var ot=ud}else(Ke=Te.nodeName)&&Ke.toLowerCase()==="input"&&(Te.type==="checkbox"||Te.type==="radio")&&(it=hd);if(it&&(it=it(u,he))){od(ke,it,v,Pe);break e}ot&&ot(u,Te,he),u==="focusout"&&(ot=Te._wrapperState)&&ot.controlled&&Te.type==="number"&&Dt(Te,"number",Te.value)}switch(ot=he?Ya(he):window,u){case"focusin":(Vm(ot)||ot.contentEditable==="true")&&(tc=ot,ic=he,bu=null);break;case"focusout":bu=ic=tc=null;break;case"mousedown":pd=!0;break;case"contextmenu":case"mouseup":case"dragend":pd=!1,Km(ke,v,Pe);break;case"selectionchange":if(dd)break;case"keydown":case"keyup":Km(ke,v,Pe)}var at;if(jo)e:{switch(u){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else co?ql(u,v)&&(mt="onCompositionEnd"):u==="keydown"&&v.keyCode===229&&(mt="onCompositionStart");mt&&(zm&&v.locale!=="ko"&&(co||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&co&&(at=Up()):(Vo=Pe,Js="value"in Vo?Vo.value:Vo.textContent,co=!0)),ot=S(he,mt),0<ot.length&&(mt=new Qp(mt,u,null,v,Pe),ke.push({event:mt,listeners:ot}),at?mt.data=at:(at=eg(v),at!==null&&(mt.data=at)))),(at=lo?cw(u,v):Uo(u,v))&&(he=S(he,"onBeforeInput"),0<he.length&&(Pe=new Qp("onBeforeInput","beforeinput",null,v,Pe),ke.push({event:Pe,listeners:he}),Pe.data=at))}cg(ke,d)})}function m(u,d,v){return{instance:u,listener:d,currentTarget:v}}function S(u,d){for(var v=d+"Capture",w=[];u!==null;){var E=u,F=E.stateNode;E.tag===5&&F!==null&&(E=F,F=Le(u,v),F!=null&&w.unshift(m(u,F,E)),F=Le(u,d),F!=null&&w.push(m(u,F,E))),u=u.return}return w}function D(u){if(u===null)return null;do u=u.return;while(u&&u.tag!==5);return u||null}function N(u,d,v,w,E){for(var F=d._reactName,G=[];v!==null&&v!==w;){var j=v,Z=j.alternate,he=j.stateNode;if(Z!==null&&Z===w)break;j.tag===5&&he!==null&&(j=he,E?(Z=Le(v,F),Z!=null&&G.unshift(m(v,Z,j))):E||(Z=Le(v,F),Z!=null&&G.push(m(v,Z,j)))),v=v.return}G.length!==0&&u.push({event:d,listeners:G})}var z=/\r\n?/g,Y=/\u0000|\uFFFD/g;function ie(u){return(typeof u=="string"?u:""+u).replace(z,`
`).replace(Y,"")}function ce(u,d,v){if(d=ie(d),ie(u)!==d&&v)throw Error(i(425))}function Ie(){}var We=null,rt=null;function bt(u,d){return u==="textarea"||u==="noscript"||typeof d.children=="string"||typeof d.children=="number"||typeof d.dangerouslySetInnerHTML=="object"&&d.dangerouslySetInnerHTML!==null&&d.dangerouslySetInnerHTML.__html!=null}var ls=typeof setTimeout=="function"?setTimeout:void 0,es=typeof clearTimeout=="function"?clearTimeout:void 0,tn=typeof Promise=="function"?Promise:void 0,Ns=typeof queueMicrotask=="function"?queueMicrotask:typeof tn<"u"?function(u){return tn.resolve(null).then(u).catch(ac)}:ls;function ac(u){setTimeout(function(){throw u})}function hg(u,d){var v=d,w=0;do{var E=v.nextSibling;if(u.removeChild(v),E&&E.nodeType===8)if(v=E.data,v==="/$"){if(w===0){u.removeChild(E),er(d);return}w--}else v!=="$"&&v!=="$?"&&v!=="$!"||w++;v=E}while(v);er(d)}function Zo(u){for(;u!=null;u=u.nextSibling){var d=u.nodeType;if(d===1||d===3)break;if(d===8){if(d=u.data,d==="$"||d==="$!"||d==="$?")break;if(d==="/$")return null}}return u}function qm(u){u=u.previousSibling;for(var d=0;u;){if(u.nodeType===8){var v=u.data;if(v==="$"||v==="$!"||v==="$?"){if(d===0)return u;d--}else v==="/$"&&d++}u=u.previousSibling}return null}var ja=Math.random().toString(36).slice(2),Dr="__reactFiber$"+ja,lc="__reactProps$"+ja,qt="__reactContainer$"+ja,cc="__reactEvents$"+ja,pw="__reactListeners$"+ja,gw="__reactHandles$"+ja;function Ua(u){var d=u[Dr];if(d)return d;for(var v=u.parentNode;v;){if(d=v[qt]||v[Dr]){if(v=d.alternate,d.child!==null||v!==null&&v.child!==null)for(u=qm(u);u!==null;){if(v=u[Dr])return v;u=qm(u)}return d}u=v,v=u.parentNode}return null}function Ka(u){return u=u[Dr]||u[qt],!u||u.tag!==5&&u.tag!==6&&u.tag!==13&&u.tag!==3?null:u}function Ya(u){if(u.tag===5||u.tag===6)return u.stateNode;throw Error(i(33))}function fd(u){return u[lc]||null}var fw=[],md=-1;function uc(u){return{current:u}}function Si(u){0>md||(u.current=fw[md],fw[md]=null,md--)}function fi(u,d){md++,fw[md]=u.current,u.current=d}var hc={},Os=uc(hc),Pn=uc(!1),Du=hc;function vd(u,d){var v=u.type.contextTypes;if(!v)return hc;var w=u.stateNode;if(w&&w.__reactInternalMemoizedUnmaskedChildContext===d)return w.__reactInternalMemoizedMaskedChildContext;var E={},F;for(F in v)E[F]=d[F];return w&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=d,u.__reactInternalMemoizedMaskedChildContext=E),E}function Fn(u){return u=u.childContextTypes,u!=null}function Jm(){Si(Pn),Si(Os)}function ME(u,d,v){if(Os.current!==hc)throw Error(i(168));fi(Os,d),fi(Pn,v)}function RE(u,d,v){var w=u.stateNode;if(d=d.childContextTypes,typeof w.getChildContext!="function")return v;w=w.getChildContext();for(var E in w)if(!(E in d))throw Error(i(108,Me(u)||"Unknown",E));return q({},v,w)}function ev(u){return u=(u=u.stateNode)&&u.__reactInternalMemoizedMergedChildContext||hc,Du=Os.current,fi(Os,u),fi(Pn,Pn.current),!0}function DE(u,d,v){var w=u.stateNode;if(!w)throw Error(i(169));v?(u=RE(u,d,Du),w.__reactInternalMemoizedMergedChildContext=u,Si(Pn),Si(Os),fi(Os,u)):Si(Pn),fi(Pn,v)}var $a=null,tv=!1,mw=!1;function EE(u){$a===null?$a=[u]:$a.push(u)}function VB(u){tv=!0,EE(u)}function dc(){if(!mw&&$a!==null){mw=!0;var u=0,d=Nt;try{var v=$a;for(Nt=1;u<v.length;u++){var w=v[u];do w=w(!0);while(w!==null)}$a=null,tv=!1}catch(E){throw $a!==null&&($a=$a.slice(u+1)),qs(Vt,dc),E}finally{Nt=d,mw=!1}}return null}var yd=[],Cd=0,iv=null,sv=0,Er=[],Ir=0,Eu=null,Za=1,Xa="";function Iu(u,d){yd[Cd++]=sv,yd[Cd++]=iv,iv=u,sv=d}function IE(u,d,v){Er[Ir++]=Za,Er[Ir++]=Xa,Er[Ir++]=Eu,Eu=u;var w=Za;u=Xa;var E=32-Ct(w)-1;w&=~(1<<E),v+=1;var F=32-Ct(d)+E;if(30<F){var G=E-E%5;F=(w&(1<<G)-1).toString(32),w>>=G,E-=G,Za=1<<32-Ct(d)+E|v<<E|w,Xa=F+u}else Za=1<<F|v<<E|w,Xa=u}function vw(u){u.return!==null&&(Iu(u,1),IE(u,1,0))}function yw(u){for(;u===iv;)iv=yd[--Cd],yd[Cd]=null,sv=yd[--Cd],yd[Cd]=null;for(;u===Eu;)Eu=Er[--Ir],Er[Ir]=null,Xa=Er[--Ir],Er[Ir]=null,Za=Er[--Ir],Er[Ir]=null}var rr=null,or=null,Di=!1,ho=null;function LE(u,d){var v=Pr(5,null,null,0);v.elementType="DELETED",v.stateNode=d,v.return=u,d=u.deletions,d===null?(u.deletions=[v],u.flags|=16):d.push(v)}function TE(u,d){switch(u.tag){case 5:var v=u.type;return d=d.nodeType!==1||v.toLowerCase()!==d.nodeName.toLowerCase()?null:d,d!==null?(u.stateNode=d,rr=u,or=Zo(d.firstChild),!0):!1;case 6:return d=u.pendingProps===""||d.nodeType!==3?null:d,d!==null?(u.stateNode=d,rr=u,or=null,!0):!1;case 13:return d=d.nodeType!==8?null:d,d!==null?(v=Eu!==null?{id:Za,overflow:Xa}:null,u.memoizedState={dehydrated:d,treeContext:v,retryLane:1073741824},v=Pr(18,null,null,0),v.stateNode=d,v.return=u,u.child=v,rr=u,or=null,!0):!1;default:return!1}}function Cw(u){return(u.mode&1)!==0&&(u.flags&128)===0}function Sw(u){if(Di){var d=or;if(d){var v=d;if(!TE(u,d)){if(Cw(u))throw Error(i(418));d=Zo(v.nextSibling);var w=rr;d&&TE(u,d)?LE(w,v):(u.flags=u.flags&-4097|2,Di=!1,rr=u)}}else{if(Cw(u))throw Error(i(418));u.flags=u.flags&-4097|2,Di=!1,rr=u}}}function AE(u){for(u=u.return;u!==null&&u.tag!==5&&u.tag!==3&&u.tag!==13;)u=u.return;rr=u}function nv(u){if(u!==rr)return!1;if(!Di)return AE(u),Di=!0,!1;var d;if((d=u.tag!==3)&&!(d=u.tag!==5)&&(d=u.type,d=d!=="head"&&d!=="body"&&!bt(u.type,u.memoizedProps)),d&&(d=or)){if(Cw(u))throw PE(),Error(i(418));for(;d;)LE(u,d),d=Zo(d.nextSibling)}if(AE(u),u.tag===13){if(u=u.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(i(317));e:{for(u=u.nextSibling,d=0;u;){if(u.nodeType===8){var v=u.data;if(v==="/$"){if(d===0){or=Zo(u.nextSibling);break e}d--}else v!=="$"&&v!=="$!"&&v!=="$?"||d++}u=u.nextSibling}or=null}}else or=rr?Zo(u.stateNode.nextSibling):null;return!0}function PE(){for(var u=or;u;)u=Zo(u.nextSibling)}function Sd(){or=rr=null,Di=!1}function ww(u){ho===null?ho=[u]:ho.push(u)}var WB=P.ReactCurrentBatchConfig;function dg(u,d,v){if(u=v.ref,u!==null&&typeof u!="function"&&typeof u!="object"){if(v._owner){if(v=v._owner,v){if(v.tag!==1)throw Error(i(309));var w=v.stateNode}if(!w)throw Error(i(147,u));var E=w,F=""+u;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===F?d.ref:(d=function(G){var j=E.refs;G===null?delete j[F]:j[F]=G},d._stringRef=F,d)}if(typeof u!="string")throw Error(i(284));if(!v._owner)throw Error(i(290,u))}return u}function rv(u,d){throw u=Object.prototype.toString.call(d),Error(i(31,u==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":u))}function FE(u){var d=u._init;return d(u._payload)}function kE(u){function d(re,J){if(u){var ae=re.deletions;ae===null?(re.deletions=[J],re.flags|=16):ae.push(J)}}function v(re,J){if(!u)return null;for(;J!==null;)d(re,J),J=J.sibling;return null}function w(re,J){for(re=new Map;J!==null;)J.key!==null?re.set(J.key,J):re.set(J.index,J),J=J.sibling;return re}function E(re,J){return re=Sc(re,J),re.index=0,re.sibling=null,re}function F(re,J,ae){return re.index=ae,u?(ae=re.alternate,ae!==null?(ae=ae.index,ae<J?(re.flags|=2,J):ae):(re.flags|=2,J)):(re.flags|=1048576,J)}function G(re){return u&&re.alternate===null&&(re.flags|=2),re}function j(re,J,ae,Oe){return J===null||J.tag!==6?(J=dx(ae,re.mode,Oe),J.return=re,J):(J=E(J,ae),J.return=re,J)}function Z(re,J,ae,Oe){var it=ae.type;return it===B?Pe(re,J,ae.props.children,Oe,ae.key):J!==null&&(J.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===oe&&FE(it)===J.type)?(Oe=E(J,ae.props),Oe.ref=dg(re,J,ae),Oe.return=re,Oe):(Oe=Lv(ae.type,ae.key,ae.props,null,re.mode,Oe),Oe.ref=dg(re,J,ae),Oe.return=re,Oe)}function he(re,J,ae,Oe){return J===null||J.tag!==4||J.stateNode.containerInfo!==ae.containerInfo||J.stateNode.implementation!==ae.implementation?(J=px(ae,re.mode,Oe),J.return=re,J):(J=E(J,ae.children||[]),J.return=re,J)}function Pe(re,J,ae,Oe,it){return J===null||J.tag!==7?(J=Ou(ae,re.mode,Oe,it),J.return=re,J):(J=E(J,ae),J.return=re,J)}function ke(re,J,ae){if(typeof J=="string"&&J!==""||typeof J=="number")return J=dx(""+J,re.mode,ae),J.return=re,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case k:return ae=Lv(J.type,J.key,J.props,null,re.mode,ae),ae.ref=dg(re,null,J),ae.return=re,ae;case _:return J=px(J,re.mode,ae),J.return=re,J;case oe:var Oe=J._init;return ke(re,Oe(J._payload),ae)}if(xt(J)||pe(J))return J=Ou(J,re.mode,ae,null),J.return=re,J;rv(re,J)}return null}function Te(re,J,ae,Oe){var it=J!==null?J.key:null;if(typeof ae=="string"&&ae!==""||typeof ae=="number")return it!==null?null:j(re,J,""+ae,Oe);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case k:return ae.key===it?Z(re,J,ae,Oe):null;case _:return ae.key===it?he(re,J,ae,Oe):null;case oe:return it=ae._init,Te(re,J,it(ae._payload),Oe)}if(xt(ae)||pe(ae))return it!==null?null:Pe(re,J,ae,Oe,null);rv(re,ae)}return null}function Ke(re,J,ae,Oe,it){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return re=re.get(ae)||null,j(J,re,""+Oe,it);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case k:return re=re.get(Oe.key===null?ae:Oe.key)||null,Z(J,re,Oe,it);case _:return re=re.get(Oe.key===null?ae:Oe.key)||null,he(J,re,Oe,it);case oe:var ot=Oe._init;return Ke(re,J,ae,ot(Oe._payload),it)}if(xt(Oe)||pe(Oe))return re=re.get(ae)||null,Pe(J,re,Oe,it,null);rv(J,Oe)}return null}function Qe(re,J,ae,Oe){for(var it=null,ot=null,at=J,mt=J=0,ws=null;at!==null&&mt<ae.length;mt++){at.index>mt?(ws=at,at=null):ws=at.sibling;var Wt=Te(re,at,ae[mt],Oe);if(Wt===null){at===null&&(at=ws);break}u&&at&&Wt.alternate===null&&d(re,at),J=F(Wt,J,mt),ot===null?it=Wt:ot.sibling=Wt,ot=Wt,at=ws}if(mt===ae.length)return v(re,at),Di&&Iu(re,mt),it;if(at===null){for(;mt<ae.length;mt++)at=ke(re,ae[mt],Oe),at!==null&&(J=F(at,J,mt),ot===null?it=at:ot.sibling=at,ot=at);return Di&&Iu(re,mt),it}for(at=w(re,at);mt<ae.length;mt++)ws=Ke(at,re,mt,ae[mt],Oe),ws!==null&&(u&&ws.alternate!==null&&at.delete(ws.key===null?mt:ws.key),J=F(ws,J,mt),ot===null?it=ws:ot.sibling=ws,ot=ws);return u&&at.forEach(function(wc){return d(re,wc)}),Di&&Iu(re,mt),it}function et(re,J,ae,Oe){var it=pe(ae);if(typeof it!="function")throw Error(i(150));if(ae=it.call(ae),ae==null)throw Error(i(151));for(var ot=it=null,at=J,mt=J=0,ws=null,Wt=ae.next();at!==null&&!Wt.done;mt++,Wt=ae.next()){at.index>mt?(ws=at,at=null):ws=at.sibling;var wc=Te(re,at,Wt.value,Oe);if(wc===null){at===null&&(at=ws);break}u&&at&&wc.alternate===null&&d(re,at),J=F(wc,J,mt),ot===null?it=wc:ot.sibling=wc,ot=wc,at=ws}if(Wt.done)return v(re,at),Di&&Iu(re,mt),it;if(at===null){for(;!Wt.done;mt++,Wt=ae.next())Wt=ke(re,Wt.value,Oe),Wt!==null&&(J=F(Wt,J,mt),ot===null?it=Wt:ot.sibling=Wt,ot=Wt);return Di&&Iu(re,mt),it}for(at=w(re,at);!Wt.done;mt++,Wt=ae.next())Wt=Ke(at,re,mt,Wt.value,Oe),Wt!==null&&(u&&Wt.alternate!==null&&at.delete(Wt.key===null?mt:Wt.key),J=F(Wt,J,mt),ot===null?it=Wt:ot.sibling=Wt,ot=Wt);return u&&at.forEach(function(xG){return d(re,xG)}),Di&&Iu(re,mt),it}function Zi(re,J,ae,Oe){if(typeof ae=="object"&&ae!==null&&ae.type===B&&ae.key===null&&(ae=ae.props.children),typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case k:e:{for(var it=ae.key,ot=J;ot!==null;){if(ot.key===it){if(it=ae.type,it===B){if(ot.tag===7){v(re,ot.sibling),J=E(ot,ae.props.children),J.return=re,re=J;break e}}else if(ot.elementType===it||typeof it=="object"&&it!==null&&it.$$typeof===oe&&FE(it)===ot.type){v(re,ot.sibling),J=E(ot,ae.props),J.ref=dg(re,ot,ae),J.return=re,re=J;break e}v(re,ot);break}else d(re,ot);ot=ot.sibling}ae.type===B?(J=Ou(ae.props.children,re.mode,Oe,ae.key),J.return=re,re=J):(Oe=Lv(ae.type,ae.key,ae.props,null,re.mode,Oe),Oe.ref=dg(re,J,ae),Oe.return=re,re=Oe)}return G(re);case _:e:{for(ot=ae.key;J!==null;){if(J.key===ot)if(J.tag===4&&J.stateNode.containerInfo===ae.containerInfo&&J.stateNode.implementation===ae.implementation){v(re,J.sibling),J=E(J,ae.children||[]),J.return=re,re=J;break e}else{v(re,J);break}else d(re,J);J=J.sibling}J=px(ae,re.mode,Oe),J.return=re,re=J}return G(re);case oe:return ot=ae._init,Zi(re,J,ot(ae._payload),Oe)}if(xt(ae))return Qe(re,J,ae,Oe);if(pe(ae))return et(re,J,ae,Oe);rv(re,ae)}return typeof ae=="string"&&ae!==""||typeof ae=="number"?(ae=""+ae,J!==null&&J.tag===6?(v(re,J.sibling),J=E(J,ae),J.return=re,re=J):(v(re,J),J=dx(ae,re.mode,Oe),J.return=re,re=J),G(re)):v(re,J)}return Zi}var wd=kE(!0),NE=kE(!1),ov=uc(null),av=null,xd=null,xw=null;function bw(){xw=xd=av=null}function Mw(u){var d=ov.current;Si(ov),u._currentValue=d}function Rw(u,d,v){for(;u!==null;){var w=u.alternate;if((u.childLanes&d)!==d?(u.childLanes|=d,w!==null&&(w.childLanes|=d)):w!==null&&(w.childLanes&d)!==d&&(w.childLanes|=d),u===v)break;u=u.return}}function bd(u,d){av=u,xw=xd=null,u=u.dependencies,u!==null&&u.firstContext!==null&&(u.lanes&d&&(kn=!0),u.firstContext=null)}function Lr(u){var d=u._currentValue;if(xw!==u)if(u={context:u,memoizedValue:d,next:null},xd===null){if(av===null)throw Error(i(308));xd=u,av.dependencies={lanes:0,firstContext:u}}else xd=xd.next=u;return d}var Lu=null;function Dw(u){Lu===null?Lu=[u]:Lu.push(u)}function OE(u,d,v,w){var E=d.interleaved;return E===null?(v.next=v,Dw(d)):(v.next=E.next,E.next=v),d.interleaved=v,Qa(u,w)}function Qa(u,d){u.lanes|=d;var v=u.alternate;for(v!==null&&(v.lanes|=d),v=u,u=u.return;u!==null;)u.childLanes|=d,v=u.alternate,v!==null&&(v.childLanes|=d),v=u,u=u.return;return v.tag===3?v.stateNode:null}var pc=!1;function Ew(u){u.updateQueue={baseState:u.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _E(u,d){u=u.updateQueue,d.updateQueue===u&&(d.updateQueue={baseState:u.baseState,firstBaseUpdate:u.firstBaseUpdate,lastBaseUpdate:u.lastBaseUpdate,shared:u.shared,effects:u.effects})}function qa(u,d){return{eventTime:u,lane:d,tag:0,payload:null,callback:null,next:null}}function gc(u,d,v){var w=u.updateQueue;if(w===null)return null;if(w=w.shared,Gt&2){var E=w.pending;return E===null?d.next=d:(d.next=E.next,E.next=d),w.pending=d,Qa(u,v)}return E=w.interleaved,E===null?(d.next=d,Dw(w)):(d.next=E.next,E.next=d),w.interleaved=d,Qa(u,v)}function lv(u,d,v){if(d=d.updateQueue,d!==null&&(d=d.shared,(v&4194240)!==0)){var w=d.lanes;w&=u.pendingLanes,v|=w,d.lanes=v,oo(u,v)}}function BE(u,d){var v=u.updateQueue,w=u.alternate;if(w!==null&&(w=w.updateQueue,v===w)){var E=null,F=null;if(v=v.firstBaseUpdate,v!==null){do{var G={eventTime:v.eventTime,lane:v.lane,tag:v.tag,payload:v.payload,callback:v.callback,next:null};F===null?E=F=G:F=F.next=G,v=v.next}while(v!==null);F===null?E=F=d:F=F.next=d}else E=F=d;v={baseState:w.baseState,firstBaseUpdate:E,lastBaseUpdate:F,shared:w.shared,effects:w.effects},u.updateQueue=v;return}u=v.lastBaseUpdate,u===null?v.firstBaseUpdate=d:u.next=d,v.lastBaseUpdate=d}function cv(u,d,v,w){var E=u.updateQueue;pc=!1;var F=E.firstBaseUpdate,G=E.lastBaseUpdate,j=E.shared.pending;if(j!==null){E.shared.pending=null;var Z=j,he=Z.next;Z.next=null,G===null?F=he:G.next=he,G=Z;var Pe=u.alternate;Pe!==null&&(Pe=Pe.updateQueue,j=Pe.lastBaseUpdate,j!==G&&(j===null?Pe.firstBaseUpdate=he:j.next=he,Pe.lastBaseUpdate=Z))}if(F!==null){var ke=E.baseState;G=0,Pe=he=Z=null,j=F;do{var Te=j.lane,Ke=j.eventTime;if((w&Te)===Te){Pe!==null&&(Pe=Pe.next={eventTime:Ke,lane:0,tag:j.tag,payload:j.payload,callback:j.callback,next:null});e:{var Qe=u,et=j;switch(Te=d,Ke=v,et.tag){case 1:if(Qe=et.payload,typeof Qe=="function"){ke=Qe.call(Ke,ke,Te);break e}ke=Qe;break e;case 3:Qe.flags=Qe.flags&-65537|128;case 0:if(Qe=et.payload,Te=typeof Qe=="function"?Qe.call(Ke,ke,Te):Qe,Te==null)break e;ke=q({},ke,Te);break e;case 2:pc=!0}}j.callback!==null&&j.lane!==0&&(u.flags|=64,Te=E.effects,Te===null?E.effects=[j]:Te.push(j))}else Ke={eventTime:Ke,lane:Te,tag:j.tag,payload:j.payload,callback:j.callback,next:null},Pe===null?(he=Pe=Ke,Z=ke):Pe=Pe.next=Ke,G|=Te;if(j=j.next,j===null){if(j=E.shared.pending,j===null)break;Te=j,j=Te.next,Te.next=null,E.lastBaseUpdate=Te,E.shared.pending=null}}while(!0);if(Pe===null&&(Z=ke),E.baseState=Z,E.firstBaseUpdate=he,E.lastBaseUpdate=Pe,d=E.shared.interleaved,d!==null){E=d;do G|=E.lane,E=E.next;while(E!==d)}else F===null&&(E.shared.lanes=0);Pu|=G,u.lanes=G,u.memoizedState=ke}}function GE(u,d,v){if(u=d.effects,d.effects=null,u!==null)for(d=0;d<u.length;d++){var w=u[d],E=w.callback;if(E!==null){if(w.callback=null,w=v,typeof E!="function")throw Error(i(191,E));E.call(w)}}}var pg={},Xo=uc(pg),gg=uc(pg),fg=uc(pg);function Tu(u){if(u===pg)throw Error(i(174));return u}function Iw(u,d){switch(fi(fg,d),fi(gg,u),fi(Xo,pg),u=d.nodeType,u){case 9:case 11:d=(d=d.documentElement)?d.namespaceURI:ni(null,"");break;default:u=u===8?d.parentNode:d,d=u.namespaceURI||null,u=u.tagName,d=ni(d,u)}Si(Xo),fi(Xo,d)}function Md(){Si(Xo),Si(gg),Si(fg)}function zE(u){Tu(fg.current);var d=Tu(Xo.current),v=ni(d,u.type);d!==v&&(fi(gg,u),fi(Xo,v))}function Lw(u){gg.current===u&&(Si(Xo),Si(gg))}var Ai=uc(0);function uv(u){for(var d=u;d!==null;){if(d.tag===13){var v=d.memoizedState;if(v!==null&&(v=v.dehydrated,v===null||v.data==="$?"||v.data==="$!"))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var Tw=[];function Aw(){for(var u=0;u<Tw.length;u++)Tw[u]._workInProgressVersionPrimary=null;Tw.length=0}var hv=P.ReactCurrentDispatcher,Pw=P.ReactCurrentBatchConfig,Au=0,Pi=null,cs=null,Cs=null,dv=!1,mg=!1,vg=0,jB=0;function _s(){throw Error(i(321))}function Fw(u,d){if(d===null)return!1;for(var v=0;v<d.length&&v<u.length;v++)if(!sr(u[v],d[v]))return!1;return!0}function kw(u,d,v,w,E,F){if(Au=F,Pi=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,hv.current=u===null||u.memoizedState===null?$B:ZB,u=v(w,E),mg){F=0;do{if(mg=!1,vg=0,25<=F)throw Error(i(301));F+=1,Cs=cs=null,d.updateQueue=null,hv.current=XB,u=v(w,E)}while(mg)}if(hv.current=fv,d=cs!==null&&cs.next!==null,Au=0,Cs=cs=Pi=null,dv=!1,d)throw Error(i(300));return u}function Nw(){var u=vg!==0;return vg=0,u}function Qo(){var u={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Cs===null?Pi.memoizedState=Cs=u:Cs=Cs.next=u,Cs}function Tr(){if(cs===null){var u=Pi.alternate;u=u!==null?u.memoizedState:null}else u=cs.next;var d=Cs===null?Pi.memoizedState:Cs.next;if(d!==null)Cs=d,cs=u;else{if(u===null)throw Error(i(310));cs=u,u={memoizedState:cs.memoizedState,baseState:cs.baseState,baseQueue:cs.baseQueue,queue:cs.queue,next:null},Cs===null?Pi.memoizedState=Cs=u:Cs=Cs.next=u}return Cs}function yg(u,d){return typeof d=="function"?d(u):d}function Ow(u){var d=Tr(),v=d.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=u;var w=cs,E=w.baseQueue,F=v.pending;if(F!==null){if(E!==null){var G=E.next;E.next=F.next,F.next=G}w.baseQueue=E=F,v.pending=null}if(E!==null){F=E.next,w=w.baseState;var j=G=null,Z=null,he=F;do{var Pe=he.lane;if((Au&Pe)===Pe)Z!==null&&(Z=Z.next={lane:0,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null}),w=he.hasEagerState?he.eagerState:u(w,he.action);else{var ke={lane:Pe,action:he.action,hasEagerState:he.hasEagerState,eagerState:he.eagerState,next:null};Z===null?(j=Z=ke,G=w):Z=Z.next=ke,Pi.lanes|=Pe,Pu|=Pe}he=he.next}while(he!==null&&he!==F);Z===null?G=w:Z.next=j,sr(w,d.memoizedState)||(kn=!0),d.memoizedState=w,d.baseState=G,d.baseQueue=Z,v.lastRenderedState=w}if(u=v.interleaved,u!==null){E=u;do F=E.lane,Pi.lanes|=F,Pu|=F,E=E.next;while(E!==u)}else E===null&&(v.lanes=0);return[d.memoizedState,v.dispatch]}function _w(u){var d=Tr(),v=d.queue;if(v===null)throw Error(i(311));v.lastRenderedReducer=u;var w=v.dispatch,E=v.pending,F=d.memoizedState;if(E!==null){v.pending=null;var G=E=E.next;do F=u(F,G.action),G=G.next;while(G!==E);sr(F,d.memoizedState)||(kn=!0),d.memoizedState=F,d.baseQueue===null&&(d.baseState=F),v.lastRenderedState=F}return[F,w]}function HE(){}function VE(u,d){var v=Pi,w=Tr(),E=d(),F=!sr(w.memoizedState,E);if(F&&(w.memoizedState=E,kn=!0),w=w.queue,Bw(UE.bind(null,v,w,u),[u]),w.getSnapshot!==d||F||Cs!==null&&Cs.memoizedState.tag&1){if(v.flags|=2048,Cg(9,jE.bind(null,v,w,E,d),void 0,null),Ss===null)throw Error(i(349));Au&30||WE(v,d,E)}return E}function WE(u,d,v){u.flags|=16384,u={getSnapshot:d,value:v},d=Pi.updateQueue,d===null?(d={lastEffect:null,stores:null},Pi.updateQueue=d,d.stores=[u]):(v=d.stores,v===null?d.stores=[u]:v.push(u))}function jE(u,d,v,w){d.value=v,d.getSnapshot=w,KE(d)&&YE(u)}function UE(u,d,v){return v(function(){KE(d)&&YE(u)})}function KE(u){var d=u.getSnapshot;u=u.value;try{var v=d();return!sr(u,v)}catch{return!0}}function YE(u){var d=Qa(u,1);d!==null&&mo(d,u,1,-1)}function $E(u){var d=Qo();return typeof u=="function"&&(u=u()),d.memoizedState=d.baseState=u,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:yg,lastRenderedState:u},d.queue=u,u=u.dispatch=YB.bind(null,Pi,u),[d.memoizedState,u]}function Cg(u,d,v,w){return u={tag:u,create:d,destroy:v,deps:w,next:null},d=Pi.updateQueue,d===null?(d={lastEffect:null,stores:null},Pi.updateQueue=d,d.lastEffect=u.next=u):(v=d.lastEffect,v===null?d.lastEffect=u.next=u:(w=v.next,v.next=u,u.next=w,d.lastEffect=u)),u}function ZE(){return Tr().memoizedState}function pv(u,d,v,w){var E=Qo();Pi.flags|=u,E.memoizedState=Cg(1|d,v,void 0,w===void 0?null:w)}function gv(u,d,v,w){var E=Tr();w=w===void 0?null:w;var F=void 0;if(cs!==null){var G=cs.memoizedState;if(F=G.destroy,w!==null&&Fw(w,G.deps)){E.memoizedState=Cg(d,v,F,w);return}}Pi.flags|=u,E.memoizedState=Cg(1|d,v,F,w)}function XE(u,d){return pv(8390656,8,u,d)}function Bw(u,d){return gv(2048,8,u,d)}function QE(u,d){return gv(4,2,u,d)}function qE(u,d){return gv(4,4,u,d)}function JE(u,d){if(typeof d=="function")return u=u(),d(u),function(){d(null)};if(d!=null)return u=u(),d.current=u,function(){d.current=null}}function eI(u,d,v){return v=v!=null?v.concat([u]):null,gv(4,4,JE.bind(null,d,u),v)}function Gw(){}function tI(u,d){var v=Tr();d=d===void 0?null:d;var w=v.memoizedState;return w!==null&&d!==null&&Fw(d,w[1])?w[0]:(v.memoizedState=[u,d],u)}function iI(u,d){var v=Tr();d=d===void 0?null:d;var w=v.memoizedState;return w!==null&&d!==null&&Fw(d,w[1])?w[0]:(u=u(),v.memoizedState=[u,d],u)}function sI(u,d,v){return Au&21?(sr(v,d)||(v=Tm(),Pi.lanes|=v,Pu|=v,u.baseState=!0),d):(u.baseState&&(u.baseState=!1,kn=!0),u.memoizedState=v)}function UB(u,d){var v=Nt;Nt=v!==0&&4>v?v:4,u(!0);var w=Pw.transition;Pw.transition={};try{u(!1),d()}finally{Nt=v,Pw.transition=w}}function nI(){return Tr().memoizedState}function KB(u,d,v){var w=yc(u);if(v={lane:w,action:v,hasEagerState:!1,eagerState:null,next:null},rI(u))oI(d,v);else if(v=OE(u,d,v,w),v!==null){var E=nn();mo(v,u,w,E),aI(v,d,w)}}function YB(u,d,v){var w=yc(u),E={lane:w,action:v,hasEagerState:!1,eagerState:null,next:null};if(rI(u))oI(d,E);else{var F=u.alternate;if(u.lanes===0&&(F===null||F.lanes===0)&&(F=d.lastRenderedReducer,F!==null))try{var G=d.lastRenderedState,j=F(G,v);if(E.hasEagerState=!0,E.eagerState=j,sr(j,G)){var Z=d.interleaved;Z===null?(E.next=E,Dw(d)):(E.next=Z.next,Z.next=E),d.interleaved=E;return}}catch{}finally{}v=OE(u,d,E,w),v!==null&&(E=nn(),mo(v,u,w,E),aI(v,d,w))}}function rI(u){var d=u.alternate;return u===Pi||d!==null&&d===Pi}function oI(u,d){mg=dv=!0;var v=u.pending;v===null?d.next=d:(d.next=v.next,v.next=d),u.pending=d}function aI(u,d,v){if(v&4194240){var w=d.lanes;w&=u.pendingLanes,v|=w,d.lanes=v,oo(u,v)}}var fv={readContext:Lr,useCallback:_s,useContext:_s,useEffect:_s,useImperativeHandle:_s,useInsertionEffect:_s,useLayoutEffect:_s,useMemo:_s,useReducer:_s,useRef:_s,useState:_s,useDebugValue:_s,useDeferredValue:_s,useTransition:_s,useMutableSource:_s,useSyncExternalStore:_s,useId:_s,unstable_isNewReconciler:!1},$B={readContext:Lr,useCallback:function(u,d){return Qo().memoizedState=[u,d===void 0?null:d],u},useContext:Lr,useEffect:XE,useImperativeHandle:function(u,d,v){return v=v!=null?v.concat([u]):null,pv(4194308,4,JE.bind(null,d,u),v)},useLayoutEffect:function(u,d){return pv(4194308,4,u,d)},useInsertionEffect:function(u,d){return pv(4,2,u,d)},useMemo:function(u,d){var v=Qo();return d=d===void 0?null:d,u=u(),v.memoizedState=[u,d],u},useReducer:function(u,d,v){var w=Qo();return d=v!==void 0?v(d):d,w.memoizedState=w.baseState=d,u={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:u,lastRenderedState:d},w.queue=u,u=u.dispatch=KB.bind(null,Pi,u),[w.memoizedState,u]},useRef:function(u){var d=Qo();return u={current:u},d.memoizedState=u},useState:$E,useDebugValue:Gw,useDeferredValue:function(u){return Qo().memoizedState=u},useTransition:function(){var u=$E(!1),d=u[0];return u=UB.bind(null,u[1]),Qo().memoizedState=u,[d,u]},useMutableSource:function(){},useSyncExternalStore:function(u,d,v){var w=Pi,E=Qo();if(Di){if(v===void 0)throw Error(i(407));v=v()}else{if(v=d(),Ss===null)throw Error(i(349));Au&30||WE(w,d,v)}E.memoizedState=v;var F={value:v,getSnapshot:d};return E.queue=F,XE(UE.bind(null,w,F,u),[u]),w.flags|=2048,Cg(9,jE.bind(null,w,F,v,d),void 0,null),v},useId:function(){var u=Qo(),d=Ss.identifierPrefix;if(Di){var v=Xa,w=Za;v=(w&~(1<<32-Ct(w)-1)).toString(32)+v,d=":"+d+"R"+v,v=vg++,0<v&&(d+="H"+v.toString(32)),d+=":"}else v=jB++,d=":"+d+"r"+v.toString(32)+":";return u.memoizedState=d},unstable_isNewReconciler:!1},ZB={readContext:Lr,useCallback:tI,useContext:Lr,useEffect:Bw,useImperativeHandle:eI,useInsertionEffect:QE,useLayoutEffect:qE,useMemo:iI,useReducer:Ow,useRef:ZE,useState:function(){return Ow(yg)},useDebugValue:Gw,useDeferredValue:function(u){var d=Tr();return sI(d,cs.memoizedState,u)},useTransition:function(){var u=Ow(yg)[0],d=Tr().memoizedState;return[u,d]},useMutableSource:HE,useSyncExternalStore:VE,useId:nI,unstable_isNewReconciler:!1},XB={readContext:Lr,useCallback:tI,useContext:Lr,useEffect:Bw,useImperativeHandle:eI,useInsertionEffect:QE,useLayoutEffect:qE,useMemo:iI,useReducer:_w,useRef:ZE,useState:function(){return _w(yg)},useDebugValue:Gw,useDeferredValue:function(u){var d=Tr();return cs===null?d.memoizedState=u:sI(d,cs.memoizedState,u)},useTransition:function(){var u=_w(yg)[0],d=Tr().memoizedState;return[u,d]},useMutableSource:HE,useSyncExternalStore:VE,useId:nI,unstable_isNewReconciler:!1};function po(u,d){if(u&&u.defaultProps){d=q({},d),u=u.defaultProps;for(var v in u)d[v]===void 0&&(d[v]=u[v]);return d}return d}function zw(u,d,v,w){d=u.memoizedState,v=v(w,d),v=v==null?d:q({},d,v),u.memoizedState=v,u.lanes===0&&(u.updateQueue.baseState=v)}var mv={isMounted:function(u){return(u=u._reactInternals)?Bt(u)===u:!1},enqueueSetState:function(u,d,v){u=u._reactInternals;var w=nn(),E=yc(u),F=qa(w,E);F.payload=d,v!=null&&(F.callback=v),d=gc(u,F,E),d!==null&&(mo(d,u,E,w),lv(d,u,E))},enqueueReplaceState:function(u,d,v){u=u._reactInternals;var w=nn(),E=yc(u),F=qa(w,E);F.tag=1,F.payload=d,v!=null&&(F.callback=v),d=gc(u,F,E),d!==null&&(mo(d,u,E,w),lv(d,u,E))},enqueueForceUpdate:function(u,d){u=u._reactInternals;var v=nn(),w=yc(u),E=qa(v,w);E.tag=2,d!=null&&(E.callback=d),d=gc(u,E,w),d!==null&&(mo(d,u,w,v),lv(d,u,w))}};function lI(u,d,v,w,E,F,G){return u=u.stateNode,typeof u.shouldComponentUpdate=="function"?u.shouldComponentUpdate(w,F,G):d.prototype&&d.prototype.isPureReactComponent?!Ko(v,w)||!Ko(E,F):!0}function cI(u,d,v){var w=!1,E=hc,F=d.contextType;return typeof F=="object"&&F!==null?F=Lr(F):(E=Fn(d)?Du:Os.current,w=d.contextTypes,F=(w=w!=null)?vd(u,E):hc),d=new d(v,F),u.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=mv,u.stateNode=d,d._reactInternals=u,w&&(u=u.stateNode,u.__reactInternalMemoizedUnmaskedChildContext=E,u.__reactInternalMemoizedMaskedChildContext=F),d}function uI(u,d,v,w){u=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(v,w),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(v,w),d.state!==u&&mv.enqueueReplaceState(d,d.state,null)}function Hw(u,d,v,w){var E=u.stateNode;E.props=v,E.state=u.memoizedState,E.refs={},Ew(u);var F=d.contextType;typeof F=="object"&&F!==null?E.context=Lr(F):(F=Fn(d)?Du:Os.current,E.context=vd(u,F)),E.state=u.memoizedState,F=d.getDerivedStateFromProps,typeof F=="function"&&(zw(u,d,F,v),E.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(d=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),d!==E.state&&mv.enqueueReplaceState(E,E.state,null),cv(u,v,E,w),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308)}function Rd(u,d){try{var v="",w=d;do v+=ye(w),w=w.return;while(w);var E=v}catch(F){E=`
Error generating stack: `+F.message+`
`+F.stack}return{value:u,source:d,stack:E,digest:null}}function Vw(u,d,v){return{value:u,source:null,stack:v??null,digest:d??null}}function Ww(u,d){try{console.error(d.value)}catch(v){setTimeout(function(){throw v})}}var QB=typeof WeakMap=="function"?WeakMap:Map;function hI(u,d,v){v=qa(-1,v),v.tag=3,v.payload={element:null};var w=d.value;return v.callback=function(){bv||(bv=!0,nx=w),Ww(u,d)},v}function dI(u,d,v){v=qa(-1,v),v.tag=3;var w=u.type.getDerivedStateFromError;if(typeof w=="function"){var E=d.value;v.payload=function(){return w(E)},v.callback=function(){Ww(u,d)}}var F=u.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(v.callback=function(){Ww(u,d),typeof w!="function"&&(mc===null?mc=new Set([this]):mc.add(this));var G=d.stack;this.componentDidCatch(d.value,{componentStack:G!==null?G:""})}),v}function pI(u,d,v){var w=u.pingCache;if(w===null){w=u.pingCache=new QB;var E=new Set;w.set(d,E)}else E=w.get(d),E===void 0&&(E=new Set,w.set(d,E));E.has(v)||(E.add(v),u=hG.bind(null,u,d,v),d.then(u,u))}function gI(u){do{var d;if((d=u.tag===13)&&(d=u.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return u;u=u.return}while(u!==null);return null}function fI(u,d,v,w,E){return u.mode&1?(u.flags|=65536,u.lanes=E,u):(u===d?u.flags|=65536:(u.flags|=128,v.flags|=131072,v.flags&=-52805,v.tag===1&&(v.alternate===null?v.tag=17:(d=qa(-1,1),d.tag=2,gc(v,d,1))),v.lanes|=1),u)}var qB=P.ReactCurrentOwner,kn=!1;function sn(u,d,v,w){d.child=u===null?NE(d,null,v,w):wd(d,u.child,v,w)}function mI(u,d,v,w,E){v=v.render;var F=d.ref;return bd(d,E),w=kw(u,d,v,w,F,E),v=Nw(),u!==null&&!kn?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Ja(u,d,E)):(Di&&v&&vw(d),d.flags|=1,sn(u,d,w,E),d.child)}function vI(u,d,v,w,E){if(u===null){var F=v.type;return typeof F=="function"&&!hx(F)&&F.defaultProps===void 0&&v.compare===null&&v.defaultProps===void 0?(d.tag=15,d.type=F,yI(u,d,F,w,E)):(u=Lv(v.type,null,w,d,d.mode,E),u.ref=d.ref,u.return=d,d.child=u)}if(F=u.child,!(u.lanes&E)){var G=F.memoizedProps;if(v=v.compare,v=v!==null?v:Ko,v(G,w)&&u.ref===d.ref)return Ja(u,d,E)}return d.flags|=1,u=Sc(F,w),u.ref=d.ref,u.return=d,d.child=u}function yI(u,d,v,w,E){if(u!==null){var F=u.memoizedProps;if(Ko(F,w)&&u.ref===d.ref)if(kn=!1,d.pendingProps=w=F,(u.lanes&E)!==0)u.flags&131072&&(kn=!0);else return d.lanes=u.lanes,Ja(u,d,E)}return jw(u,d,v,w,E)}function CI(u,d,v){var w=d.pendingProps,E=w.children,F=u!==null?u.memoizedState:null;if(w.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null,transitions:null},fi(Ed,ar),ar|=v;else{if(!(v&1073741824))return u=F!==null?F.baseLanes|v:v,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:u,cachePool:null,transitions:null},d.updateQueue=null,fi(Ed,ar),ar|=u,null;d.memoizedState={baseLanes:0,cachePool:null,transitions:null},w=F!==null?F.baseLanes:v,fi(Ed,ar),ar|=w}else F!==null?(w=F.baseLanes|v,d.memoizedState=null):w=v,fi(Ed,ar),ar|=w;return sn(u,d,E,v),d.child}function SI(u,d){var v=d.ref;(u===null&&v!==null||u!==null&&u.ref!==v)&&(d.flags|=512,d.flags|=2097152)}function jw(u,d,v,w,E){var F=Fn(v)?Du:Os.current;return F=vd(d,F),bd(d,E),v=kw(u,d,v,w,F,E),w=Nw(),u!==null&&!kn?(d.updateQueue=u.updateQueue,d.flags&=-2053,u.lanes&=~E,Ja(u,d,E)):(Di&&w&&vw(d),d.flags|=1,sn(u,d,v,E),d.child)}function wI(u,d,v,w,E){if(Fn(v)){var F=!0;ev(d)}else F=!1;if(bd(d,E),d.stateNode===null)yv(u,d),cI(d,v,w),Hw(d,v,w,E),w=!0;else if(u===null){var G=d.stateNode,j=d.memoizedProps;G.props=j;var Z=G.context,he=v.contextType;typeof he=="object"&&he!==null?he=Lr(he):(he=Fn(v)?Du:Os.current,he=vd(d,he));var Pe=v.getDerivedStateFromProps,ke=typeof Pe=="function"||typeof G.getSnapshotBeforeUpdate=="function";ke||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(j!==w||Z!==he)&&uI(d,G,w,he),pc=!1;var Te=d.memoizedState;G.state=Te,cv(d,w,G,E),Z=d.memoizedState,j!==w||Te!==Z||Pn.current||pc?(typeof Pe=="function"&&(zw(d,v,Pe,w),Z=d.memoizedState),(j=pc||lI(d,v,j,w,Te,Z,he))?(ke||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(d.flags|=4194308)):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=w,d.memoizedState=Z),G.props=w,G.state=Z,G.context=he,w=j):(typeof G.componentDidMount=="function"&&(d.flags|=4194308),w=!1)}else{G=d.stateNode,_E(u,d),j=d.memoizedProps,he=d.type===d.elementType?j:po(d.type,j),G.props=he,ke=d.pendingProps,Te=G.context,Z=v.contextType,typeof Z=="object"&&Z!==null?Z=Lr(Z):(Z=Fn(v)?Du:Os.current,Z=vd(d,Z));var Ke=v.getDerivedStateFromProps;(Pe=typeof Ke=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(j!==ke||Te!==Z)&&uI(d,G,w,Z),pc=!1,Te=d.memoizedState,G.state=Te,cv(d,w,G,E);var Qe=d.memoizedState;j!==ke||Te!==Qe||Pn.current||pc?(typeof Ke=="function"&&(zw(d,v,Ke,w),Qe=d.memoizedState),(he=pc||lI(d,v,he,w,Te,Qe,Z)||!1)?(Pe||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(w,Qe,Z),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(w,Qe,Z)),typeof G.componentDidUpdate=="function"&&(d.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof G.componentDidUpdate!="function"||j===u.memoizedProps&&Te===u.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||j===u.memoizedProps&&Te===u.memoizedState||(d.flags|=1024),d.memoizedProps=w,d.memoizedState=Qe),G.props=w,G.state=Qe,G.context=Z,w=he):(typeof G.componentDidUpdate!="function"||j===u.memoizedProps&&Te===u.memoizedState||(d.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||j===u.memoizedProps&&Te===u.memoizedState||(d.flags|=1024),w=!1)}return Uw(u,d,v,w,F,E)}function Uw(u,d,v,w,E,F){SI(u,d);var G=(d.flags&128)!==0;if(!w&&!G)return E&&DE(d,v,!1),Ja(u,d,F);w=d.stateNode,qB.current=d;var j=G&&typeof v.getDerivedStateFromError!="function"?null:w.render();return d.flags|=1,u!==null&&G?(d.child=wd(d,u.child,null,F),d.child=wd(d,null,j,F)):sn(u,d,j,F),d.memoizedState=w.state,E&&DE(d,v,!0),d.child}function xI(u){var d=u.stateNode;d.pendingContext?ME(u,d.pendingContext,d.pendingContext!==d.context):d.context&&ME(u,d.context,!1),Iw(u,d.containerInfo)}function bI(u,d,v,w,E){return Sd(),ww(E),d.flags|=256,sn(u,d,v,w),d.child}var Kw={dehydrated:null,treeContext:null,retryLane:0};function Yw(u){return{baseLanes:u,cachePool:null,transitions:null}}function MI(u,d,v){var w=d.pendingProps,E=Ai.current,F=!1,G=(d.flags&128)!==0,j;if((j=G)||(j=u!==null&&u.memoizedState===null?!1:(E&2)!==0),j?(F=!0,d.flags&=-129):(u===null||u.memoizedState!==null)&&(E|=1),fi(Ai,E&1),u===null)return Sw(d),u=d.memoizedState,u!==null&&(u=u.dehydrated,u!==null)?(d.mode&1?u.data==="$!"?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(G=w.children,u=w.fallback,F?(w=d.mode,F=d.child,G={mode:"hidden",children:G},!(w&1)&&F!==null?(F.childLanes=0,F.pendingProps=G):F=Tv(G,w,0,null),u=Ou(u,w,v,null),F.return=d,u.return=d,F.sibling=u,d.child=F,d.child.memoizedState=Yw(v),d.memoizedState=Kw,u):$w(d,G));if(E=u.memoizedState,E!==null&&(j=E.dehydrated,j!==null))return JB(u,d,G,w,j,E,v);if(F){F=w.fallback,G=d.mode,E=u.child,j=E.sibling;var Z={mode:"hidden",children:w.children};return!(G&1)&&d.child!==E?(w=d.child,w.childLanes=0,w.pendingProps=Z,d.deletions=null):(w=Sc(E,Z),w.subtreeFlags=E.subtreeFlags&14680064),j!==null?F=Sc(j,F):(F=Ou(F,G,v,null),F.flags|=2),F.return=d,w.return=d,w.sibling=F,d.child=w,w=F,F=d.child,G=u.child.memoizedState,G=G===null?Yw(v):{baseLanes:G.baseLanes|v,cachePool:null,transitions:G.transitions},F.memoizedState=G,F.childLanes=u.childLanes&~v,d.memoizedState=Kw,w}return F=u.child,u=F.sibling,w=Sc(F,{mode:"visible",children:w.children}),!(d.mode&1)&&(w.lanes=v),w.return=d,w.sibling=null,u!==null&&(v=d.deletions,v===null?(d.deletions=[u],d.flags|=16):v.push(u)),d.child=w,d.memoizedState=null,w}function $w(u,d){return d=Tv({mode:"visible",children:d},u.mode,0,null),d.return=u,u.child=d}function vv(u,d,v,w){return w!==null&&ww(w),wd(d,u.child,null,v),u=$w(d,d.pendingProps.children),u.flags|=2,d.memoizedState=null,u}function JB(u,d,v,w,E,F,G){if(v)return d.flags&256?(d.flags&=-257,w=Vw(Error(i(422))),vv(u,d,G,w)):d.memoizedState!==null?(d.child=u.child,d.flags|=128,null):(F=w.fallback,E=d.mode,w=Tv({mode:"visible",children:w.children},E,0,null),F=Ou(F,E,G,null),F.flags|=2,w.return=d,F.return=d,w.sibling=F,d.child=w,d.mode&1&&wd(d,u.child,null,G),d.child.memoizedState=Yw(G),d.memoizedState=Kw,F);if(!(d.mode&1))return vv(u,d,G,null);if(E.data==="$!"){if(w=E.nextSibling&&E.nextSibling.dataset,w)var j=w.dgst;return w=j,F=Error(i(419)),w=Vw(F,w,void 0),vv(u,d,G,w)}if(j=(G&u.childLanes)!==0,kn||j){if(w=Ss,w!==null){switch(G&-G){case 4:E=2;break;case 16:E=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:E=32;break;case 536870912:E=268435456;break;default:E=0}E=E&(w.suspendedLanes|G)?0:E,E!==0&&E!==F.retryLane&&(F.retryLane=E,Qa(u,E),mo(w,u,E,-1))}return ux(),w=Vw(Error(i(421))),vv(u,d,G,w)}return E.data==="$?"?(d.flags|=128,d.child=u.child,d=dG.bind(null,u),E._reactRetry=d,null):(u=F.treeContext,or=Zo(E.nextSibling),rr=d,Di=!0,ho=null,u!==null&&(Er[Ir++]=Za,Er[Ir++]=Xa,Er[Ir++]=Eu,Za=u.id,Xa=u.overflow,Eu=d),d=$w(d,w.children),d.flags|=4096,d)}function RI(u,d,v){u.lanes|=d;var w=u.alternate;w!==null&&(w.lanes|=d),Rw(u.return,d,v)}function Zw(u,d,v,w,E){var F=u.memoizedState;F===null?u.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:w,tail:v,tailMode:E}:(F.isBackwards=d,F.rendering=null,F.renderingStartTime=0,F.last=w,F.tail=v,F.tailMode=E)}function DI(u,d,v){var w=d.pendingProps,E=w.revealOrder,F=w.tail;if(sn(u,d,w.children,v),w=Ai.current,w&2)w=w&1|2,d.flags|=128;else{if(u!==null&&u.flags&128)e:for(u=d.child;u!==null;){if(u.tag===13)u.memoizedState!==null&&RI(u,v,d);else if(u.tag===19)RI(u,v,d);else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===d)break e;for(;u.sibling===null;){if(u.return===null||u.return===d)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}w&=1}if(fi(Ai,w),!(d.mode&1))d.memoizedState=null;else switch(E){case"forwards":for(v=d.child,E=null;v!==null;)u=v.alternate,u!==null&&uv(u)===null&&(E=v),v=v.sibling;v=E,v===null?(E=d.child,d.child=null):(E=v.sibling,v.sibling=null),Zw(d,!1,E,v,F);break;case"backwards":for(v=null,E=d.child,d.child=null;E!==null;){if(u=E.alternate,u!==null&&uv(u)===null){d.child=E;break}u=E.sibling,E.sibling=v,v=E,E=u}Zw(d,!0,v,null,F);break;case"together":Zw(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function yv(u,d){!(d.mode&1)&&u!==null&&(u.alternate=null,d.alternate=null,d.flags|=2)}function Ja(u,d,v){if(u!==null&&(d.dependencies=u.dependencies),Pu|=d.lanes,!(v&d.childLanes))return null;if(u!==null&&d.child!==u.child)throw Error(i(153));if(d.child!==null){for(u=d.child,v=Sc(u,u.pendingProps),d.child=v,v.return=d;u.sibling!==null;)u=u.sibling,v=v.sibling=Sc(u,u.pendingProps),v.return=d;v.sibling=null}return d.child}function eG(u,d,v){switch(d.tag){case 3:xI(d),Sd();break;case 5:zE(d);break;case 1:Fn(d.type)&&ev(d);break;case 4:Iw(d,d.stateNode.containerInfo);break;case 10:var w=d.type._context,E=d.memoizedProps.value;fi(ov,w._currentValue),w._currentValue=E;break;case 13:if(w=d.memoizedState,w!==null)return w.dehydrated!==null?(fi(Ai,Ai.current&1),d.flags|=128,null):v&d.child.childLanes?MI(u,d,v):(fi(Ai,Ai.current&1),u=Ja(u,d,v),u!==null?u.sibling:null);fi(Ai,Ai.current&1);break;case 19:if(w=(v&d.childLanes)!==0,u.flags&128){if(w)return DI(u,d,v);d.flags|=128}if(E=d.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),fi(Ai,Ai.current),w)break;return null;case 22:case 23:return d.lanes=0,CI(u,d,v)}return Ja(u,d,v)}var EI,Xw,II,LI;EI=function(u,d){for(var v=d.child;v!==null;){if(v.tag===5||v.tag===6)u.appendChild(v.stateNode);else if(v.tag!==4&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===d)break;for(;v.sibling===null;){if(v.return===null||v.return===d)return;v=v.return}v.sibling.return=v.return,v=v.sibling}},Xw=function(){},II=function(u,d,v,w){var E=u.memoizedProps;if(E!==w){u=d.stateNode,Tu(Xo.current);var F=null;switch(v){case"input":E=tt(u,E),w=tt(u,w),F=[];break;case"select":E=q({},E,{value:void 0}),w=q({},w,{value:void 0}),F=[];break;case"textarea":E=Ri(u,E),w=Ri(u,w),F=[];break;default:typeof E.onClick!="function"&&typeof w.onClick=="function"&&(u.onclick=Ie)}Go(v,w);var G;v=null;for(he in E)if(!w.hasOwnProperty(he)&&E.hasOwnProperty(he)&&E[he]!=null)if(he==="style"){var j=E[he];for(G in j)j.hasOwnProperty(G)&&(v||(v={}),v[G]="")}else he!=="dangerouslySetInnerHTML"&&he!=="children"&&he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&he!=="autoFocus"&&(n.hasOwnProperty(he)?F||(F=[]):(F=F||[]).push(he,null));for(he in w){var Z=w[he];if(j=E!=null?E[he]:void 0,w.hasOwnProperty(he)&&Z!==j&&(Z!=null||j!=null))if(he==="style")if(j){for(G in j)!j.hasOwnProperty(G)||Z&&Z.hasOwnProperty(G)||(v||(v={}),v[G]="");for(G in Z)Z.hasOwnProperty(G)&&j[G]!==Z[G]&&(v||(v={}),v[G]=Z[G])}else v||(F||(F=[]),F.push(he,v)),v=Z;else he==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,j=j?j.__html:void 0,Z!=null&&j!==Z&&(F=F||[]).push(he,Z)):he==="children"?typeof Z!="string"&&typeof Z!="number"||(F=F||[]).push(he,""+Z):he!=="suppressContentEditableWarning"&&he!=="suppressHydrationWarning"&&(n.hasOwnProperty(he)?(Z!=null&&he==="onScroll"&&ai("scroll",u),F||j===Z||(F=[])):(F=F||[]).push(he,Z))}v&&(F=F||[]).push("style",v);var he=F;(d.updateQueue=he)&&(d.flags|=4)}},LI=function(u,d,v,w){v!==w&&(d.flags|=4)};function Sg(u,d){if(!Di)switch(u.tailMode){case"hidden":d=u.tail;for(var v=null;d!==null;)d.alternate!==null&&(v=d),d=d.sibling;v===null?u.tail=null:v.sibling=null;break;case"collapsed":v=u.tail;for(var w=null;v!==null;)v.alternate!==null&&(w=v),v=v.sibling;w===null?d||u.tail===null?u.tail=null:u.tail.sibling=null:w.sibling=null}}function Bs(u){var d=u.alternate!==null&&u.alternate.child===u.child,v=0,w=0;if(d)for(var E=u.child;E!==null;)v|=E.lanes|E.childLanes,w|=E.subtreeFlags&14680064,w|=E.flags&14680064,E.return=u,E=E.sibling;else for(E=u.child;E!==null;)v|=E.lanes|E.childLanes,w|=E.subtreeFlags,w|=E.flags,E.return=u,E=E.sibling;return u.subtreeFlags|=w,u.childLanes=v,d}function tG(u,d,v){var w=d.pendingProps;switch(yw(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bs(d),null;case 1:return Fn(d.type)&&Jm(),Bs(d),null;case 3:return w=d.stateNode,Md(),Si(Pn),Si(Os),Aw(),w.pendingContext&&(w.context=w.pendingContext,w.pendingContext=null),(u===null||u.child===null)&&(nv(d)?d.flags|=4:u===null||u.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,ho!==null&&(ax(ho),ho=null))),Xw(u,d),Bs(d),null;case 5:Lw(d);var E=Tu(fg.current);if(v=d.type,u!==null&&d.stateNode!=null)II(u,d,v,w,E),u.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!w){if(d.stateNode===null)throw Error(i(166));return Bs(d),null}if(u=Tu(Xo.current),nv(d)){w=d.stateNode,v=d.type;var F=d.memoizedProps;switch(w[Dr]=d,w[lc]=F,u=(d.mode&1)!==0,v){case"dialog":ai("cancel",w),ai("close",w);break;case"iframe":case"object":case"embed":ai("load",w);break;case"video":case"audio":for(E=0;E<rc.length;E++)ai(rc[E],w);break;case"source":ai("error",w);break;case"img":case"image":case"link":ai("error",w),ai("load",w);break;case"details":ai("toggle",w);break;case"input":Ne(w,F),ai("invalid",w);break;case"select":w._wrapperState={wasMultiple:!!F.multiple},ai("invalid",w);break;case"textarea":Ki(w,F),ai("invalid",w)}Go(v,F),E=null;for(var G in F)if(F.hasOwnProperty(G)){var j=F[G];G==="children"?typeof j=="string"?w.textContent!==j&&(F.suppressHydrationWarning!==!0&&ce(w.textContent,j,u),E=["children",j]):typeof j=="number"&&w.textContent!==""+j&&(F.suppressHydrationWarning!==!0&&ce(w.textContent,j,u),E=["children",""+j]):n.hasOwnProperty(G)&&j!=null&&G==="onScroll"&&ai("scroll",w)}switch(v){case"input":ze(w),Rt(w,F,!0);break;case"textarea":ze(w),Yi(w);break;case"select":case"option":break;default:typeof F.onClick=="function"&&(w.onclick=Ie)}w=E,d.updateQueue=w,w!==null&&(d.flags|=4)}else{G=E.nodeType===9?E:E.ownerDocument,u==="http://www.w3.org/1999/xhtml"&&(u=ut(v)),u==="http://www.w3.org/1999/xhtml"?v==="script"?(u=G.createElement("div"),u.innerHTML="<script><\/script>",u=u.removeChild(u.firstChild)):typeof w.is=="string"?u=G.createElement(v,{is:w.is}):(u=G.createElement(v),v==="select"&&(G=u,w.multiple?G.multiple=!0:w.size&&(G.size=w.size))):u=G.createElementNS(u,v),u[Dr]=d,u[lc]=w,EI(u,d,!1,!1),d.stateNode=u;e:{switch(G=Cr(v,w),v){case"dialog":ai("cancel",u),ai("close",u),E=w;break;case"iframe":case"object":case"embed":ai("load",u),E=w;break;case"video":case"audio":for(E=0;E<rc.length;E++)ai(rc[E],u);E=w;break;case"source":ai("error",u),E=w;break;case"img":case"image":case"link":ai("error",u),ai("load",u),E=w;break;case"details":ai("toggle",u),E=w;break;case"input":Ne(u,w),E=tt(u,w),ai("invalid",u);break;case"option":E=w;break;case"select":u._wrapperState={wasMultiple:!!w.multiple},E=q({},w,{value:void 0}),ai("invalid",u);break;case"textarea":Ki(u,w),E=Ri(u,w),ai("invalid",u);break;default:E=w}Go(v,E),j=E;for(F in j)if(j.hasOwnProperty(F)){var Z=j[F];F==="style"?Vl(u,Z):F==="dangerouslySetInnerHTML"?(Z=Z?Z.__html:void 0,Z!=null&&zl(u,Z)):F==="children"?typeof Z=="string"?(v!=="textarea"||Z!=="")&&Gi(u,Z):typeof Z=="number"&&Gi(u,""+Z):F!=="suppressContentEditableWarning"&&F!=="suppressHydrationWarning"&&F!=="autoFocus"&&(n.hasOwnProperty(F)?Z!=null&&F==="onScroll"&&ai("scroll",u):Z!=null&&I(u,F,Z,G))}switch(v){case"input":ze(u),Rt(u,w,!1);break;case"textarea":ze(u),Yi(u);break;case"option":w.value!=null&&u.setAttribute("value",""+me(w.value));break;case"select":u.multiple=!!w.multiple,F=w.value,F!=null?Mt(u,!!w.multiple,F,!1):w.defaultValue!=null&&Mt(u,!!w.multiple,w.defaultValue,!0);break;default:typeof E.onClick=="function"&&(u.onclick=Ie)}switch(v){case"button":case"input":case"select":case"textarea":w=!!w.autoFocus;break e;case"img":w=!0;break e;default:w=!1}}w&&(d.flags|=4)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return Bs(d),null;case 6:if(u&&d.stateNode!=null)LI(u,d,u.memoizedProps,w);else{if(typeof w!="string"&&d.stateNode===null)throw Error(i(166));if(v=Tu(fg.current),Tu(Xo.current),nv(d)){if(w=d.stateNode,v=d.memoizedProps,w[Dr]=d,(F=w.nodeValue!==v)&&(u=rr,u!==null))switch(u.tag){case 3:ce(w.nodeValue,v,(u.mode&1)!==0);break;case 5:u.memoizedProps.suppressHydrationWarning!==!0&&ce(w.nodeValue,v,(u.mode&1)!==0)}F&&(d.flags|=4)}else w=(v.nodeType===9?v:v.ownerDocument).createTextNode(w),w[Dr]=d,d.stateNode=w}return Bs(d),null;case 13:if(Si(Ai),w=d.memoizedState,u===null||u.memoizedState!==null&&u.memoizedState.dehydrated!==null){if(Di&&or!==null&&d.mode&1&&!(d.flags&128))PE(),Sd(),d.flags|=98560,F=!1;else if(F=nv(d),w!==null&&w.dehydrated!==null){if(u===null){if(!F)throw Error(i(318));if(F=d.memoizedState,F=F!==null?F.dehydrated:null,!F)throw Error(i(317));F[Dr]=d}else Sd(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;Bs(d),F=!1}else ho!==null&&(ax(ho),ho=null),F=!0;if(!F)return d.flags&65536?d:null}return d.flags&128?(d.lanes=v,d):(w=w!==null,w!==(u!==null&&u.memoizedState!==null)&&w&&(d.child.flags|=8192,d.mode&1&&(u===null||Ai.current&1?us===0&&(us=3):ux())),d.updateQueue!==null&&(d.flags|=4),Bs(d),null);case 4:return Md(),Xw(u,d),u===null&&oc(d.stateNode.containerInfo),Bs(d),null;case 10:return Mw(d.type._context),Bs(d),null;case 17:return Fn(d.type)&&Jm(),Bs(d),null;case 19:if(Si(Ai),F=d.memoizedState,F===null)return Bs(d),null;if(w=(d.flags&128)!==0,G=F.rendering,G===null)if(w)Sg(F,!1);else{if(us!==0||u!==null&&u.flags&128)for(u=d.child;u!==null;){if(G=uv(u),G!==null){for(d.flags|=128,Sg(F,!1),w=G.updateQueue,w!==null&&(d.updateQueue=w,d.flags|=4),d.subtreeFlags=0,w=v,v=d.child;v!==null;)F=v,u=w,F.flags&=14680066,G=F.alternate,G===null?(F.childLanes=0,F.lanes=u,F.child=null,F.subtreeFlags=0,F.memoizedProps=null,F.memoizedState=null,F.updateQueue=null,F.dependencies=null,F.stateNode=null):(F.childLanes=G.childLanes,F.lanes=G.lanes,F.child=G.child,F.subtreeFlags=0,F.deletions=null,F.memoizedProps=G.memoizedProps,F.memoizedState=G.memoizedState,F.updateQueue=G.updateQueue,F.type=G.type,u=G.dependencies,F.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),v=v.sibling;return fi(Ai,Ai.current&1|2),d.child}u=u.sibling}F.tail!==null&&ri()>Id&&(d.flags|=128,w=!0,Sg(F,!1),d.lanes=4194304)}else{if(!w)if(u=uv(G),u!==null){if(d.flags|=128,w=!0,v=u.updateQueue,v!==null&&(d.updateQueue=v,d.flags|=4),Sg(F,!0),F.tail===null&&F.tailMode==="hidden"&&!G.alternate&&!Di)return Bs(d),null}else 2*ri()-F.renderingStartTime>Id&&v!==1073741824&&(d.flags|=128,w=!0,Sg(F,!1),d.lanes=4194304);F.isBackwards?(G.sibling=d.child,d.child=G):(v=F.last,v!==null?v.sibling=G:d.child=G,F.last=G)}return F.tail!==null?(d=F.tail,F.rendering=d,F.tail=d.sibling,F.renderingStartTime=ri(),d.sibling=null,v=Ai.current,fi(Ai,w?v&1|2:v&1),d):(Bs(d),null);case 22:case 23:return cx(),w=d.memoizedState!==null,u!==null&&u.memoizedState!==null!==w&&(d.flags|=8192),w&&d.mode&1?ar&1073741824&&(Bs(d),d.subtreeFlags&6&&(d.flags|=8192)):Bs(d),null;case 24:return null;case 25:return null}throw Error(i(156,d.tag))}function iG(u,d){switch(yw(d),d.tag){case 1:return Fn(d.type)&&Jm(),u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 3:return Md(),Si(Pn),Si(Os),Aw(),u=d.flags,u&65536&&!(u&128)?(d.flags=u&-65537|128,d):null;case 5:return Lw(d),null;case 13:if(Si(Ai),u=d.memoizedState,u!==null&&u.dehydrated!==null){if(d.alternate===null)throw Error(i(340));Sd()}return u=d.flags,u&65536?(d.flags=u&-65537|128,d):null;case 19:return Si(Ai),null;case 4:return Md(),null;case 10:return Mw(d.type._context),null;case 22:case 23:return cx(),null;case 24:return null;default:return null}}var Cv=!1,Gs=!1,sG=typeof WeakSet=="function"?WeakSet:Set,Xe=null;function Dd(u,d){var v=u.ref;if(v!==null)if(typeof v=="function")try{v(null)}catch(w){Hi(u,d,w)}else v.current=null}function Qw(u,d,v){try{v()}catch(w){Hi(u,d,w)}}var TI=!1;function nG(u,d){if(We=yu,u=sg(),ng(u)){if("selectionStart"in u)var v={start:u.selectionStart,end:u.selectionEnd};else e:{v=(v=u.ownerDocument)&&v.defaultView||window;var w=v.getSelection&&v.getSelection();if(w&&w.rangeCount!==0){v=w.anchorNode;var E=w.anchorOffset,F=w.focusNode;w=w.focusOffset;try{v.nodeType,F.nodeType}catch{v=null;break e}var G=0,j=-1,Z=-1,he=0,Pe=0,ke=u,Te=null;t:for(;;){for(var Ke;ke!==v||E!==0&&ke.nodeType!==3||(j=G+E),ke!==F||w!==0&&ke.nodeType!==3||(Z=G+w),ke.nodeType===3&&(G+=ke.nodeValue.length),(Ke=ke.firstChild)!==null;)Te=ke,ke=Ke;for(;;){if(ke===u)break t;if(Te===v&&++he===E&&(j=G),Te===F&&++Pe===w&&(Z=G),(Ke=ke.nextSibling)!==null)break;ke=Te,Te=ke.parentNode}ke=Ke}v=j===-1||Z===-1?null:{start:j,end:Z}}else v=null}v=v||{start:0,end:0}}else v=null;for(rt={focusedElem:u,selectionRange:v},yu=!1,Xe=d;Xe!==null;)if(d=Xe,u=d.child,(d.subtreeFlags&1028)!==0&&u!==null)u.return=d,Xe=u;else for(;Xe!==null;){d=Xe;try{var Qe=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(Qe!==null){var et=Qe.memoizedProps,Zi=Qe.memoizedState,re=d.stateNode,J=re.getSnapshotBeforeUpdate(d.elementType===d.type?et:po(d.type,et),Zi);re.__reactInternalSnapshotBeforeUpdate=J}break;case 3:var ae=d.stateNode.containerInfo;ae.nodeType===1?ae.textContent="":ae.nodeType===9&&ae.documentElement&&ae.removeChild(ae.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(i(163))}}catch(Oe){Hi(d,d.return,Oe)}if(u=d.sibling,u!==null){u.return=d.return,Xe=u;break}Xe=d.return}return Qe=TI,TI=!1,Qe}function wg(u,d,v){var w=d.updateQueue;if(w=w!==null?w.lastEffect:null,w!==null){var E=w=w.next;do{if((E.tag&u)===u){var F=E.destroy;E.destroy=void 0,F!==void 0&&Qw(d,v,F)}E=E.next}while(E!==w)}}function Sv(u,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var v=d=d.next;do{if((v.tag&u)===u){var w=v.create;v.destroy=w()}v=v.next}while(v!==d)}}function qw(u){var d=u.ref;if(d!==null){var v=u.stateNode;switch(u.tag){case 5:u=v;break;default:u=v}typeof d=="function"?d(u):d.current=u}}function AI(u){var d=u.alternate;d!==null&&(u.alternate=null,AI(d)),u.child=null,u.deletions=null,u.sibling=null,u.tag===5&&(d=u.stateNode,d!==null&&(delete d[Dr],delete d[lc],delete d[cc],delete d[pw],delete d[gw])),u.stateNode=null,u.return=null,u.dependencies=null,u.memoizedProps=null,u.memoizedState=null,u.pendingProps=null,u.stateNode=null,u.updateQueue=null}function PI(u){return u.tag===5||u.tag===3||u.tag===4}function FI(u){e:for(;;){for(;u.sibling===null;){if(u.return===null||PI(u.return))return null;u=u.return}for(u.sibling.return=u.return,u=u.sibling;u.tag!==5&&u.tag!==6&&u.tag!==18;){if(u.flags&2||u.child===null||u.tag===4)continue e;u.child.return=u,u=u.child}if(!(u.flags&2))return u.stateNode}}function Jw(u,d,v){var w=u.tag;if(w===5||w===6)u=u.stateNode,d?v.nodeType===8?v.parentNode.insertBefore(u,d):v.insertBefore(u,d):(v.nodeType===8?(d=v.parentNode,d.insertBefore(u,v)):(d=v,d.appendChild(u)),v=v._reactRootContainer,v!=null||d.onclick!==null||(d.onclick=Ie));else if(w!==4&&(u=u.child,u!==null))for(Jw(u,d,v),u=u.sibling;u!==null;)Jw(u,d,v),u=u.sibling}function ex(u,d,v){var w=u.tag;if(w===5||w===6)u=u.stateNode,d?v.insertBefore(u,d):v.appendChild(u);else if(w!==4&&(u=u.child,u!==null))for(ex(u,d,v),u=u.sibling;u!==null;)ex(u,d,v),u=u.sibling}var Ds=null,go=!1;function fc(u,d,v){for(v=v.child;v!==null;)kI(u,d,v),v=v.sibling}function kI(u,d,v){if(Ps&&typeof Ps.onCommitFiberUnmount=="function")try{Ps.onCommitFiberUnmount(Ln,v)}catch{}switch(v.tag){case 5:Gs||Dd(v,d);case 6:var w=Ds,E=go;Ds=null,fc(u,d,v),Ds=w,go=E,Ds!==null&&(go?(u=Ds,v=v.stateNode,u.nodeType===8?u.parentNode.removeChild(v):u.removeChild(v)):Ds.removeChild(v.stateNode));break;case 18:Ds!==null&&(go?(u=Ds,v=v.stateNode,u.nodeType===8?hg(u.parentNode,v):u.nodeType===1&&hg(u,v),er(u)):hg(Ds,v.stateNode));break;case 4:w=Ds,E=go,Ds=v.stateNode.containerInfo,go=!0,fc(u,d,v),Ds=w,go=E;break;case 0:case 11:case 14:case 15:if(!Gs&&(w=v.updateQueue,w!==null&&(w=w.lastEffect,w!==null))){E=w=w.next;do{var F=E,G=F.destroy;F=F.tag,G!==void 0&&(F&2||F&4)&&Qw(v,d,G),E=E.next}while(E!==w)}fc(u,d,v);break;case 1:if(!Gs&&(Dd(v,d),w=v.stateNode,typeof w.componentWillUnmount=="function"))try{w.props=v.memoizedProps,w.state=v.memoizedState,w.componentWillUnmount()}catch(j){Hi(v,d,j)}fc(u,d,v);break;case 21:fc(u,d,v);break;case 22:v.mode&1?(Gs=(w=Gs)||v.memoizedState!==null,fc(u,d,v),Gs=w):fc(u,d,v);break;default:fc(u,d,v)}}function NI(u){var d=u.updateQueue;if(d!==null){u.updateQueue=null;var v=u.stateNode;v===null&&(v=u.stateNode=new sG),d.forEach(function(w){var E=pG.bind(null,u,w);v.has(w)||(v.add(w),w.then(E,E))})}}function fo(u,d){var v=d.deletions;if(v!==null)for(var w=0;w<v.length;w++){var E=v[w];try{var F=u,G=d,j=G;e:for(;j!==null;){switch(j.tag){case 5:Ds=j.stateNode,go=!1;break e;case 3:Ds=j.stateNode.containerInfo,go=!0;break e;case 4:Ds=j.stateNode.containerInfo,go=!0;break e}j=j.return}if(Ds===null)throw Error(i(160));kI(F,G,E),Ds=null,go=!1;var Z=E.alternate;Z!==null&&(Z.return=null),E.return=null}catch(he){Hi(E,d,he)}}if(d.subtreeFlags&12854)for(d=d.child;d!==null;)OI(d,u),d=d.sibling}function OI(u,d){var v=u.alternate,w=u.flags;switch(u.tag){case 0:case 11:case 14:case 15:if(fo(d,u),qo(u),w&4){try{wg(3,u,u.return),Sv(3,u)}catch(et){Hi(u,u.return,et)}try{wg(5,u,u.return)}catch(et){Hi(u,u.return,et)}}break;case 1:fo(d,u),qo(u),w&512&&v!==null&&Dd(v,v.return);break;case 5:if(fo(d,u),qo(u),w&512&&v!==null&&Dd(v,v.return),u.flags&32){var E=u.stateNode;try{Gi(E,"")}catch(et){Hi(u,u.return,et)}}if(w&4&&(E=u.stateNode,E!=null)){var F=u.memoizedProps,G=v!==null?v.memoizedProps:F,j=u.type,Z=u.updateQueue;if(u.updateQueue=null,Z!==null)try{j==="input"&&F.type==="radio"&&F.name!=null&&qe(E,F),Cr(j,G);var he=Cr(j,F);for(G=0;G<Z.length;G+=2){var Pe=Z[G],ke=Z[G+1];Pe==="style"?Vl(E,ke):Pe==="dangerouslySetInnerHTML"?zl(E,ke):Pe==="children"?Gi(E,ke):I(E,Pe,ke,he)}switch(j){case"input":ft(E,F);break;case"textarea":Qs(E,F);break;case"select":var Te=E._wrapperState.wasMultiple;E._wrapperState.wasMultiple=!!F.multiple;var Ke=F.value;Ke!=null?Mt(E,!!F.multiple,Ke,!1):Te!==!!F.multiple&&(F.defaultValue!=null?Mt(E,!!F.multiple,F.defaultValue,!0):Mt(E,!!F.multiple,F.multiple?[]:"",!1))}E[lc]=F}catch(et){Hi(u,u.return,et)}}break;case 6:if(fo(d,u),qo(u),w&4){if(u.stateNode===null)throw Error(i(162));E=u.stateNode,F=u.memoizedProps;try{E.nodeValue=F}catch(et){Hi(u,u.return,et)}}break;case 3:if(fo(d,u),qo(u),w&4&&v!==null&&v.memoizedState.isDehydrated)try{er(d.containerInfo)}catch(et){Hi(u,u.return,et)}break;case 4:fo(d,u),qo(u);break;case 13:fo(d,u),qo(u),E=u.child,E.flags&8192&&(F=E.memoizedState!==null,E.stateNode.isHidden=F,!F||E.alternate!==null&&E.alternate.memoizedState!==null||(sx=ri())),w&4&&NI(u);break;case 22:if(Pe=v!==null&&v.memoizedState!==null,u.mode&1?(Gs=(he=Gs)||Pe,fo(d,u),Gs=he):fo(d,u),qo(u),w&8192){if(he=u.memoizedState!==null,(u.stateNode.isHidden=he)&&!Pe&&u.mode&1)for(Xe=u,Pe=u.child;Pe!==null;){for(ke=Xe=Pe;Xe!==null;){switch(Te=Xe,Ke=Te.child,Te.tag){case 0:case 11:case 14:case 15:wg(4,Te,Te.return);break;case 1:Dd(Te,Te.return);var Qe=Te.stateNode;if(typeof Qe.componentWillUnmount=="function"){w=Te,v=Te.return;try{d=w,Qe.props=d.memoizedProps,Qe.state=d.memoizedState,Qe.componentWillUnmount()}catch(et){Hi(w,v,et)}}break;case 5:Dd(Te,Te.return);break;case 22:if(Te.memoizedState!==null){GI(ke);continue}}Ke!==null?(Ke.return=Te,Xe=Ke):GI(ke)}Pe=Pe.sibling}e:for(Pe=null,ke=u;;){if(ke.tag===5){if(Pe===null){Pe=ke;try{E=ke.stateNode,he?(F=E.style,typeof F.setProperty=="function"?F.setProperty("display","none","important"):F.display="none"):(j=ke.stateNode,Z=ke.memoizedProps.style,G=Z!=null&&Z.hasOwnProperty("display")?Z.display:null,j.style.display=Hl("display",G))}catch(et){Hi(u,u.return,et)}}}else if(ke.tag===6){if(Pe===null)try{ke.stateNode.nodeValue=he?"":ke.memoizedProps}catch(et){Hi(u,u.return,et)}}else if((ke.tag!==22&&ke.tag!==23||ke.memoizedState===null||ke===u)&&ke.child!==null){ke.child.return=ke,ke=ke.child;continue}if(ke===u)break e;for(;ke.sibling===null;){if(ke.return===null||ke.return===u)break e;Pe===ke&&(Pe=null),ke=ke.return}Pe===ke&&(Pe=null),ke.sibling.return=ke.return,ke=ke.sibling}}break;case 19:fo(d,u),qo(u),w&4&&NI(u);break;case 21:break;default:fo(d,u),qo(u)}}function qo(u){var d=u.flags;if(d&2){try{e:{for(var v=u.return;v!==null;){if(PI(v)){var w=v;break e}v=v.return}throw Error(i(160))}switch(w.tag){case 5:var E=w.stateNode;w.flags&32&&(Gi(E,""),w.flags&=-33);var F=FI(u);ex(u,F,E);break;case 3:case 4:var G=w.stateNode.containerInfo,j=FI(u);Jw(u,j,G);break;default:throw Error(i(161))}}catch(Z){Hi(u,u.return,Z)}u.flags&=-3}d&4096&&(u.flags&=-4097)}function rG(u,d,v){Xe=u,_I(u)}function _I(u,d,v){for(var w=(u.mode&1)!==0;Xe!==null;){var E=Xe,F=E.child;if(E.tag===22&&w){var G=E.memoizedState!==null||Cv;if(!G){var j=E.alternate,Z=j!==null&&j.memoizedState!==null||Gs;j=Cv;var he=Gs;if(Cv=G,(Gs=Z)&&!he)for(Xe=E;Xe!==null;)G=Xe,Z=G.child,G.tag===22&&G.memoizedState!==null?zI(E):Z!==null?(Z.return=G,Xe=Z):zI(E);for(;F!==null;)Xe=F,_I(F),F=F.sibling;Xe=E,Cv=j,Gs=he}BI(u)}else E.subtreeFlags&8772&&F!==null?(F.return=E,Xe=F):BI(u)}}function BI(u){for(;Xe!==null;){var d=Xe;if(d.flags&8772){var v=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:Gs||Sv(5,d);break;case 1:var w=d.stateNode;if(d.flags&4&&!Gs)if(v===null)w.componentDidMount();else{var E=d.elementType===d.type?v.memoizedProps:po(d.type,v.memoizedProps);w.componentDidUpdate(E,v.memoizedState,w.__reactInternalSnapshotBeforeUpdate)}var F=d.updateQueue;F!==null&&GE(d,F,w);break;case 3:var G=d.updateQueue;if(G!==null){if(v=null,d.child!==null)switch(d.child.tag){case 5:v=d.child.stateNode;break;case 1:v=d.child.stateNode}GE(d,G,v)}break;case 5:var j=d.stateNode;if(v===null&&d.flags&4){v=j;var Z=d.memoizedProps;switch(d.type){case"button":case"input":case"select":case"textarea":Z.autoFocus&&v.focus();break;case"img":Z.src&&(v.src=Z.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(d.memoizedState===null){var he=d.alternate;if(he!==null){var Pe=he.memoizedState;if(Pe!==null){var ke=Pe.dehydrated;ke!==null&&er(ke)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(i(163))}Gs||d.flags&512&&qw(d)}catch(Te){Hi(d,d.return,Te)}}if(d===u){Xe=null;break}if(v=d.sibling,v!==null){v.return=d.return,Xe=v;break}Xe=d.return}}function GI(u){for(;Xe!==null;){var d=Xe;if(d===u){Xe=null;break}var v=d.sibling;if(v!==null){v.return=d.return,Xe=v;break}Xe=d.return}}function zI(u){for(;Xe!==null;){var d=Xe;try{switch(d.tag){case 0:case 11:case 15:var v=d.return;try{Sv(4,d)}catch(Z){Hi(d,v,Z)}break;case 1:var w=d.stateNode;if(typeof w.componentDidMount=="function"){var E=d.return;try{w.componentDidMount()}catch(Z){Hi(d,E,Z)}}var F=d.return;try{qw(d)}catch(Z){Hi(d,F,Z)}break;case 5:var G=d.return;try{qw(d)}catch(Z){Hi(d,G,Z)}}}catch(Z){Hi(d,d.return,Z)}if(d===u){Xe=null;break}var j=d.sibling;if(j!==null){j.return=d.return,Xe=j;break}Xe=d.return}}var oG=Math.ceil,wv=P.ReactCurrentDispatcher,tx=P.ReactCurrentOwner,Ar=P.ReactCurrentBatchConfig,Gt=0,Ss=null,ts=null,Es=0,ar=0,Ed=uc(0),us=0,xg=null,Pu=0,xv=0,ix=0,bg=null,Nn=null,sx=0,Id=1/0,el=null,bv=!1,nx=null,mc=null,Mv=!1,vc=null,Rv=0,Mg=0,rx=null,Dv=-1,Ev=0;function nn(){return Gt&6?ri():Dv!==-1?Dv:Dv=ri()}function yc(u){return u.mode&1?Gt&2&&Es!==0?Es&-Es:WB.transition!==null?(Ev===0&&(Ev=Tm()),Ev):(u=Nt,u!==0||(u=window.event,u=u===void 0?16:Tt(u.type)),u):1}function mo(u,d,v,w){if(50<Mg)throw Mg=0,rx=null,Error(i(185));qn(u,v,w),(!(Gt&2)||u!==Ss)&&(u===Ss&&(!(Gt&2)&&(xv|=v),us===4&&Cc(u,Es)),On(u,w),v===1&&Gt===0&&!(d.mode&1)&&(Id=ri()+500,tv&&dc()))}function On(u,d){var v=u.callbackNode;$h(u,d);var w=gi(u,u===Ss?Es:0);if(w===0)v!==null&&Fa(v),u.callbackNode=null,u.callbackPriority=0;else if(d=w&-w,u.callbackPriority!==d){if(v!=null&&Fa(v),d===1)u.tag===0?VB(VI.bind(null,u)):EE(VI.bind(null,u)),Ns(function(){!(Gt&6)&&dc()}),v=null;else{switch(Yl(w)){case 1:v=Vt;break;case 4:v=$i;break;case 16:v=so;break;case 536870912:v=ti;break;default:v=so}v=XI(v,HI.bind(null,u))}u.callbackPriority=d,u.callbackNode=v}}function HI(u,d){if(Dv=-1,Ev=0,Gt&6)throw Error(i(327));var v=u.callbackNode;if(Ld()&&u.callbackNode!==v)return null;var w=gi(u,u===Ss?Es:0);if(w===0)return null;if(w&30||w&u.expiredLanes||d)d=Iv(u,w);else{d=w;var E=Gt;Gt|=2;var F=jI();(Ss!==u||Es!==d)&&(el=null,Id=ri()+500,ku(u,d));do try{cG();break}catch(j){WI(u,j)}while(!0);bw(),wv.current=F,Gt=E,ts!==null?d=0:(Ss=null,Es=0,d=us)}if(d!==0){if(d===2&&(E=Fs(u),E!==0&&(w=E,d=ox(u,E))),d===1)throw v=xg,ku(u,0),Cc(u,w),On(u,ri()),v;if(d===6)Cc(u,w);else{if(E=u.current.alternate,!(w&30)&&!aG(E)&&(d=Iv(u,w),d===2&&(F=Fs(u),F!==0&&(w=F,d=ox(u,F))),d===1))throw v=xg,ku(u,0),Cc(u,w),On(u,ri()),v;switch(u.finishedWork=E,u.finishedLanes=w,d){case 0:case 1:throw Error(i(345));case 2:Nu(u,Nn,el);break;case 3:if(Cc(u,w),(w&130023424)===w&&(d=sx+500-ri(),10<d)){if(gi(u,0)!==0)break;if(E=u.suspendedLanes,(E&w)!==w){nn(),u.pingedLanes|=u.suspendedLanes&E;break}u.timeoutHandle=ls(Nu.bind(null,u,Nn,el),d);break}Nu(u,Nn,el);break;case 4:if(Cc(u,w),(w&4194240)===w)break;for(d=u.eventTimes,E=-1;0<w;){var G=31-Ct(w);F=1<<G,G=d[G],G>E&&(E=G),w&=~F}if(w=E,w=ri()-w,w=(120>w?120:480>w?480:1080>w?1080:1920>w?1920:3e3>w?3e3:4320>w?4320:1960*oG(w/1960))-w,10<w){u.timeoutHandle=ls(Nu.bind(null,u,Nn,el),w);break}Nu(u,Nn,el);break;case 5:Nu(u,Nn,el);break;default:throw Error(i(329))}}}return On(u,ri()),u.callbackNode===v?HI.bind(null,u):null}function ox(u,d){var v=bg;return u.current.memoizedState.isDehydrated&&(ku(u,d).flags|=256),u=Iv(u,d),u!==2&&(d=Nn,Nn=v,d!==null&&ax(d)),u}function ax(u){Nn===null?Nn=u:Nn.push.apply(Nn,u)}function aG(u){for(var d=u;;){if(d.flags&16384){var v=d.updateQueue;if(v!==null&&(v=v.stores,v!==null))for(var w=0;w<v.length;w++){var E=v[w],F=E.getSnapshot;E=E.value;try{if(!sr(F(),E))return!1}catch{return!1}}}if(v=d.child,d.subtreeFlags&16384&&v!==null)v.return=d,d=v;else{if(d===u)break;for(;d.sibling===null;){if(d.return===null||d.return===u)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function Cc(u,d){for(d&=~ix,d&=~xv,u.suspendedLanes|=d,u.pingedLanes&=~d,u=u.expirationTimes;0<d;){var v=31-Ct(d),w=1<<v;u[v]=-1,d&=~w}}function VI(u){if(Gt&6)throw Error(i(327));Ld();var d=gi(u,0);if(!(d&1))return On(u,ri()),null;var v=Iv(u,d);if(u.tag!==0&&v===2){var w=Fs(u);w!==0&&(d=w,v=ox(u,w))}if(v===1)throw v=xg,ku(u,0),Cc(u,d),On(u,ri()),v;if(v===6)throw Error(i(345));return u.finishedWork=u.current.alternate,u.finishedLanes=d,Nu(u,Nn,el),On(u,ri()),null}function lx(u,d){var v=Gt;Gt|=1;try{return u(d)}finally{Gt=v,Gt===0&&(Id=ri()+500,tv&&dc())}}function Fu(u){vc!==null&&vc.tag===0&&!(Gt&6)&&Ld();var d=Gt;Gt|=1;var v=Ar.transition,w=Nt;try{if(Ar.transition=null,Nt=1,u)return u()}finally{Nt=w,Ar.transition=v,Gt=d,!(Gt&6)&&dc()}}function cx(){ar=Ed.current,Si(Ed)}function ku(u,d){u.finishedWork=null,u.finishedLanes=0;var v=u.timeoutHandle;if(v!==-1&&(u.timeoutHandle=-1,es(v)),ts!==null)for(v=ts.return;v!==null;){var w=v;switch(yw(w),w.tag){case 1:w=w.type.childContextTypes,w!=null&&Jm();break;case 3:Md(),Si(Pn),Si(Os),Aw();break;case 5:Lw(w);break;case 4:Md();break;case 13:Si(Ai);break;case 19:Si(Ai);break;case 10:Mw(w.type._context);break;case 22:case 23:cx()}v=v.return}if(Ss=u,ts=u=Sc(u.current,null),Es=ar=d,us=0,xg=null,ix=xv=Pu=0,Nn=bg=null,Lu!==null){for(d=0;d<Lu.length;d++)if(v=Lu[d],w=v.interleaved,w!==null){v.interleaved=null;var E=w.next,F=v.pending;if(F!==null){var G=F.next;F.next=E,w.next=G}v.pending=w}Lu=null}return u}function WI(u,d){do{var v=ts;try{if(bw(),hv.current=fv,dv){for(var w=Pi.memoizedState;w!==null;){var E=w.queue;E!==null&&(E.pending=null),w=w.next}dv=!1}if(Au=0,Cs=cs=Pi=null,mg=!1,vg=0,tx.current=null,v===null||v.return===null){us=1,xg=d,ts=null;break}e:{var F=u,G=v.return,j=v,Z=d;if(d=Es,j.flags|=32768,Z!==null&&typeof Z=="object"&&typeof Z.then=="function"){var he=Z,Pe=j,ke=Pe.tag;if(!(Pe.mode&1)&&(ke===0||ke===11||ke===15)){var Te=Pe.alternate;Te?(Pe.updateQueue=Te.updateQueue,Pe.memoizedState=Te.memoizedState,Pe.lanes=Te.lanes):(Pe.updateQueue=null,Pe.memoizedState=null)}var Ke=gI(G);if(Ke!==null){Ke.flags&=-257,fI(Ke,G,j,F,d),Ke.mode&1&&pI(F,he,d),d=Ke,Z=he;var Qe=d.updateQueue;if(Qe===null){var et=new Set;et.add(Z),d.updateQueue=et}else Qe.add(Z);break e}else{if(!(d&1)){pI(F,he,d),ux();break e}Z=Error(i(426))}}else if(Di&&j.mode&1){var Zi=gI(G);if(Zi!==null){!(Zi.flags&65536)&&(Zi.flags|=256),fI(Zi,G,j,F,d),ww(Rd(Z,j));break e}}F=Z=Rd(Z,j),us!==4&&(us=2),bg===null?bg=[F]:bg.push(F),F=G;do{switch(F.tag){case 3:F.flags|=65536,d&=-d,F.lanes|=d;var re=hI(F,Z,d);BE(F,re);break e;case 1:j=Z;var J=F.type,ae=F.stateNode;if(!(F.flags&128)&&(typeof J.getDerivedStateFromError=="function"||ae!==null&&typeof ae.componentDidCatch=="function"&&(mc===null||!mc.has(ae)))){F.flags|=65536,d&=-d,F.lanes|=d;var Oe=dI(F,j,d);BE(F,Oe);break e}}F=F.return}while(F!==null)}KI(v)}catch(it){d=it,ts===v&&v!==null&&(ts=v=v.return);continue}break}while(!0)}function jI(){var u=wv.current;return wv.current=fv,u===null?fv:u}function ux(){(us===0||us===3||us===2)&&(us=4),Ss===null||!(Pu&268435455)&&!(xv&268435455)||Cc(Ss,Es)}function Iv(u,d){var v=Gt;Gt|=2;var w=jI();(Ss!==u||Es!==d)&&(el=null,ku(u,d));do try{lG();break}catch(E){WI(u,E)}while(!0);if(bw(),Gt=v,wv.current=w,ts!==null)throw Error(i(261));return Ss=null,Es=0,us}function lG(){for(;ts!==null;)UI(ts)}function cG(){for(;ts!==null&&!ka();)UI(ts)}function UI(u){var d=ZI(u.alternate,u,ar);u.memoizedProps=u.pendingProps,d===null?KI(u):ts=d,tx.current=null}function KI(u){var d=u;do{var v=d.alternate;if(u=d.return,d.flags&32768){if(v=iG(v,d),v!==null){v.flags&=32767,ts=v;return}if(u!==null)u.flags|=32768,u.subtreeFlags=0,u.deletions=null;else{us=6,ts=null;return}}else if(v=tG(v,d,ar),v!==null){ts=v;return}if(d=d.sibling,d!==null){ts=d;return}ts=d=u}while(d!==null);us===0&&(us=5)}function Nu(u,d,v){var w=Nt,E=Ar.transition;try{Ar.transition=null,Nt=1,uG(u,d,v,w)}finally{Ar.transition=E,Nt=w}return null}function uG(u,d,v,w){do Ld();while(vc!==null);if(Gt&6)throw Error(i(327));v=u.finishedWork;var E=u.finishedLanes;if(v===null)return null;if(u.finishedWork=null,u.finishedLanes=0,v===u.current)throw Error(i(177));u.callbackNode=null,u.callbackPriority=0;var F=v.lanes|v.childLanes;if(zi(u,F),u===Ss&&(ts=Ss=null,Es=0),!(v.subtreeFlags&2064)&&!(v.flags&2064)||Mv||(Mv=!0,XI(so,function(){return Ld(),null})),F=(v.flags&15990)!==0,v.subtreeFlags&15990||F){F=Ar.transition,Ar.transition=null;var G=Nt;Nt=1;var j=Gt;Gt|=4,tx.current=null,nG(u,v),OI(v,u),Mr(rt),yu=!!We,rt=We=null,u.current=v,rG(v),In(),Gt=j,Nt=G,Ar.transition=F}else u.current=v;if(Mv&&(Mv=!1,vc=u,Rv=E),F=u.pendingLanes,F===0&&(mc=null),Na(v.stateNode),On(u,ri()),d!==null)for(w=u.onRecoverableError,v=0;v<d.length;v++)E=d[v],w(E.value,{componentStack:E.stack,digest:E.digest});if(bv)throw bv=!1,u=nx,nx=null,u;return Rv&1&&u.tag!==0&&Ld(),F=u.pendingLanes,F&1?u===rx?Mg++:(Mg=0,rx=u):Mg=0,dc(),null}function Ld(){if(vc!==null){var u=Yl(Rv),d=Ar.transition,v=Nt;try{if(Ar.transition=null,Nt=16>u?16:u,vc===null)var w=!1;else{if(u=vc,vc=null,Rv=0,Gt&6)throw Error(i(331));var E=Gt;for(Gt|=4,Xe=u.current;Xe!==null;){var F=Xe,G=F.child;if(Xe.flags&16){var j=F.deletions;if(j!==null){for(var Z=0;Z<j.length;Z++){var he=j[Z];for(Xe=he;Xe!==null;){var Pe=Xe;switch(Pe.tag){case 0:case 11:case 15:wg(8,Pe,F)}var ke=Pe.child;if(ke!==null)ke.return=Pe,Xe=ke;else for(;Xe!==null;){Pe=Xe;var Te=Pe.sibling,Ke=Pe.return;if(AI(Pe),Pe===he){Xe=null;break}if(Te!==null){Te.return=Ke,Xe=Te;break}Xe=Ke}}}var Qe=F.alternate;if(Qe!==null){var et=Qe.child;if(et!==null){Qe.child=null;do{var Zi=et.sibling;et.sibling=null,et=Zi}while(et!==null)}}Xe=F}}if(F.subtreeFlags&2064&&G!==null)G.return=F,Xe=G;else e:for(;Xe!==null;){if(F=Xe,F.flags&2048)switch(F.tag){case 0:case 11:case 15:wg(9,F,F.return)}var re=F.sibling;if(re!==null){re.return=F.return,Xe=re;break e}Xe=F.return}}var J=u.current;for(Xe=J;Xe!==null;){G=Xe;var ae=G.child;if(G.subtreeFlags&2064&&ae!==null)ae.return=G,Xe=ae;else e:for(G=J;Xe!==null;){if(j=Xe,j.flags&2048)try{switch(j.tag){case 0:case 11:case 15:Sv(9,j)}}catch(it){Hi(j,j.return,it)}if(j===G){Xe=null;break e}var Oe=j.sibling;if(Oe!==null){Oe.return=j.return,Xe=Oe;break e}Xe=j.return}}if(Gt=E,dc(),Ps&&typeof Ps.onPostCommitFiberRoot=="function")try{Ps.onPostCommitFiberRoot(Ln,u)}catch{}w=!0}return w}finally{Nt=v,Ar.transition=d}}return!1}function YI(u,d,v){d=Rd(v,d),d=hI(u,d,1),u=gc(u,d,1),d=nn(),u!==null&&(qn(u,1,d),On(u,d))}function Hi(u,d,v){if(u.tag===3)YI(u,u,v);else for(;d!==null;){if(d.tag===3){YI(d,u,v);break}else if(d.tag===1){var w=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof w.componentDidCatch=="function"&&(mc===null||!mc.has(w))){u=Rd(v,u),u=dI(d,u,1),d=gc(d,u,1),u=nn(),d!==null&&(qn(d,1,u),On(d,u));break}}d=d.return}}function hG(u,d,v){var w=u.pingCache;w!==null&&w.delete(d),d=nn(),u.pingedLanes|=u.suspendedLanes&v,Ss===u&&(Es&v)===v&&(us===4||us===3&&(Es&130023424)===Es&&500>ri()-sx?ku(u,0):ix|=v),On(u,d)}function $I(u,d){d===0&&(u.mode&1?(d=Ul,Ul<<=1,!(Ul&130023424)&&(Ul=4194304)):d=1);var v=nn();u=Qa(u,d),u!==null&&(qn(u,d,v),On(u,v))}function dG(u){var d=u.memoizedState,v=0;d!==null&&(v=d.retryLane),$I(u,v)}function pG(u,d){var v=0;switch(u.tag){case 13:var w=u.stateNode,E=u.memoizedState;E!==null&&(v=E.retryLane);break;case 19:w=u.stateNode;break;default:throw Error(i(314))}w!==null&&w.delete(d),$I(u,v)}var ZI;ZI=function(u,d,v){if(u!==null)if(u.memoizedProps!==d.pendingProps||Pn.current)kn=!0;else{if(!(u.lanes&v)&&!(d.flags&128))return kn=!1,eG(u,d,v);kn=!!(u.flags&131072)}else kn=!1,Di&&d.flags&1048576&&IE(d,sv,d.index);switch(d.lanes=0,d.tag){case 2:var w=d.type;yv(u,d),u=d.pendingProps;var E=vd(d,Os.current);bd(d,v),E=kw(null,d,w,u,E,v);var F=Nw();return d.flags|=1,typeof E=="object"&&E!==null&&typeof E.render=="function"&&E.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,Fn(w)?(F=!0,ev(d)):F=!1,d.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,Ew(d),E.updater=mv,d.stateNode=E,E._reactInternals=d,Hw(d,w,u,v),d=Uw(null,d,w,!0,F,v)):(d.tag=0,Di&&F&&vw(d),sn(null,d,E,v),d=d.child),d;case 16:w=d.elementType;e:{switch(yv(u,d),u=d.pendingProps,E=w._init,w=E(w._payload),d.type=w,E=d.tag=fG(w),u=po(w,u),E){case 0:d=jw(null,d,w,u,v);break e;case 1:d=wI(null,d,w,u,v);break e;case 11:d=mI(null,d,w,u,v);break e;case 14:d=vI(null,d,w,po(w.type,u),v);break e}throw Error(i(306,w,""))}return d;case 0:return w=d.type,E=d.pendingProps,E=d.elementType===w?E:po(w,E),jw(u,d,w,E,v);case 1:return w=d.type,E=d.pendingProps,E=d.elementType===w?E:po(w,E),wI(u,d,w,E,v);case 3:e:{if(xI(d),u===null)throw Error(i(387));w=d.pendingProps,F=d.memoizedState,E=F.element,_E(u,d),cv(d,w,null,v);var G=d.memoizedState;if(w=G.element,F.isDehydrated)if(F={element:w,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},d.updateQueue.baseState=F,d.memoizedState=F,d.flags&256){E=Rd(Error(i(423)),d),d=bI(u,d,w,v,E);break e}else if(w!==E){E=Rd(Error(i(424)),d),d=bI(u,d,w,v,E);break e}else for(or=Zo(d.stateNode.containerInfo.firstChild),rr=d,Di=!0,ho=null,v=NE(d,null,w,v),d.child=v;v;)v.flags=v.flags&-3|4096,v=v.sibling;else{if(Sd(),w===E){d=Ja(u,d,v);break e}sn(u,d,w,v)}d=d.child}return d;case 5:return zE(d),u===null&&Sw(d),w=d.type,E=d.pendingProps,F=u!==null?u.memoizedProps:null,G=E.children,bt(w,E)?G=null:F!==null&&bt(w,F)&&(d.flags|=32),SI(u,d),sn(u,d,G,v),d.child;case 6:return u===null&&Sw(d),null;case 13:return MI(u,d,v);case 4:return Iw(d,d.stateNode.containerInfo),w=d.pendingProps,u===null?d.child=wd(d,null,w,v):sn(u,d,w,v),d.child;case 11:return w=d.type,E=d.pendingProps,E=d.elementType===w?E:po(w,E),mI(u,d,w,E,v);case 7:return sn(u,d,d.pendingProps,v),d.child;case 8:return sn(u,d,d.pendingProps.children,v),d.child;case 12:return sn(u,d,d.pendingProps.children,v),d.child;case 10:e:{if(w=d.type._context,E=d.pendingProps,F=d.memoizedProps,G=E.value,fi(ov,w._currentValue),w._currentValue=G,F!==null)if(sr(F.value,G)){if(F.children===E.children&&!Pn.current){d=Ja(u,d,v);break e}}else for(F=d.child,F!==null&&(F.return=d);F!==null;){var j=F.dependencies;if(j!==null){G=F.child;for(var Z=j.firstContext;Z!==null;){if(Z.context===w){if(F.tag===1){Z=qa(-1,v&-v),Z.tag=2;var he=F.updateQueue;if(he!==null){he=he.shared;var Pe=he.pending;Pe===null?Z.next=Z:(Z.next=Pe.next,Pe.next=Z),he.pending=Z}}F.lanes|=v,Z=F.alternate,Z!==null&&(Z.lanes|=v),Rw(F.return,v,d),j.lanes|=v;break}Z=Z.next}}else if(F.tag===10)G=F.type===d.type?null:F.child;else if(F.tag===18){if(G=F.return,G===null)throw Error(i(341));G.lanes|=v,j=G.alternate,j!==null&&(j.lanes|=v),Rw(G,v,d),G=F.sibling}else G=F.child;if(G!==null)G.return=F;else for(G=F;G!==null;){if(G===d){G=null;break}if(F=G.sibling,F!==null){F.return=G.return,G=F;break}G=G.return}F=G}sn(u,d,E.children,v),d=d.child}return d;case 9:return E=d.type,w=d.pendingProps.children,bd(d,v),E=Lr(E),w=w(E),d.flags|=1,sn(u,d,w,v),d.child;case 14:return w=d.type,E=po(w,d.pendingProps),E=po(w.type,E),vI(u,d,w,E,v);case 15:return yI(u,d,d.type,d.pendingProps,v);case 17:return w=d.type,E=d.pendingProps,E=d.elementType===w?E:po(w,E),yv(u,d),d.tag=1,Fn(w)?(u=!0,ev(d)):u=!1,bd(d,v),cI(d,w,E),Hw(d,w,E,v),Uw(null,d,w,!0,u,v);case 19:return DI(u,d,v);case 22:return CI(u,d,v)}throw Error(i(156,d.tag))};function XI(u,d){return qs(u,d)}function gG(u,d,v,w){this.tag=u,this.key=v,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=w,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(u,d,v,w){return new gG(u,d,v,w)}function hx(u){return u=u.prototype,!(!u||!u.isReactComponent)}function fG(u){if(typeof u=="function")return hx(u)?1:0;if(u!=null){if(u=u.$$typeof,u===te)return 11;if(u===Re)return 14}return 2}function Sc(u,d){var v=u.alternate;return v===null?(v=Pr(u.tag,d,u.key,u.mode),v.elementType=u.elementType,v.type=u.type,v.stateNode=u.stateNode,v.alternate=u,u.alternate=v):(v.pendingProps=d,v.type=u.type,v.flags=0,v.subtreeFlags=0,v.deletions=null),v.flags=u.flags&14680064,v.childLanes=u.childLanes,v.lanes=u.lanes,v.child=u.child,v.memoizedProps=u.memoizedProps,v.memoizedState=u.memoizedState,v.updateQueue=u.updateQueue,d=u.dependencies,v.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},v.sibling=u.sibling,v.index=u.index,v.ref=u.ref,v}function Lv(u,d,v,w,E,F){var G=2;if(w=u,typeof u=="function")hx(u)&&(G=1);else if(typeof u=="string")G=5;else e:switch(u){case B:return Ou(v.children,E,F,d);case H:G=8,E|=8;break;case V:return u=Pr(12,v,d,E|2),u.elementType=V,u.lanes=F,u;case Ce:return u=Pr(13,v,d,E),u.elementType=Ce,u.lanes=F,u;case be:return u=Pr(19,v,d,E),u.elementType=be,u.lanes=F,u;case Se:return Tv(v,E,F,d);default:if(typeof u=="object"&&u!==null)switch(u.$$typeof){case U:G=10;break e;case $:G=9;break e;case te:G=11;break e;case Re:G=14;break e;case oe:G=16,w=null;break e}throw Error(i(130,u==null?u:typeof u,""))}return d=Pr(G,v,d,E),d.elementType=u,d.type=w,d.lanes=F,d}function Ou(u,d,v,w){return u=Pr(7,u,w,d),u.lanes=v,u}function Tv(u,d,v,w){return u=Pr(22,u,w,d),u.elementType=Se,u.lanes=v,u.stateNode={isHidden:!1},u}function dx(u,d,v){return u=Pr(6,u,null,d),u.lanes=v,u}function px(u,d,v){return d=Pr(4,u.children!==null?u.children:[],u.key,d),d.lanes=v,d.stateNode={containerInfo:u.containerInfo,pendingChildren:null,implementation:u.implementation},d}function mG(u,d,v,w,E){this.tag=d,this.containerInfo=u,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Kl(0),this.expirationTimes=Kl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kl(0),this.identifierPrefix=w,this.onRecoverableError=E,this.mutableSourceEagerHydrationData=null}function gx(u,d,v,w,E,F,G,j,Z){return u=new mG(u,d,v,j,Z),d===1?(d=1,F===!0&&(d|=8)):d=0,F=Pr(3,null,null,d),u.current=F,F.stateNode=u,F.memoizedState={element:w,isDehydrated:v,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ew(F),u}function vG(u,d,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:_,key:w==null?null:""+w,children:u,containerInfo:d,implementation:v}}function QI(u){if(!u)return hc;u=u._reactInternals;e:{if(Bt(u)!==u||u.tag!==1)throw Error(i(170));var d=u;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(Fn(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(i(171))}if(u.tag===1){var v=u.type;if(Fn(v))return RE(u,v,d)}return d}function qI(u,d,v,w,E,F,G,j,Z){return u=gx(v,w,!0,u,E,F,G,j,Z),u.context=QI(null),v=u.current,w=nn(),E=yc(v),F=qa(w,E),F.callback=d??null,gc(v,F,E),u.current.lanes=E,qn(u,E,w),On(u,w),u}function Av(u,d,v,w){var E=d.current,F=nn(),G=yc(E);return v=QI(v),d.context===null?d.context=v:d.pendingContext=v,d=qa(F,G),d.payload={element:u},w=w===void 0?null:w,w!==null&&(d.callback=w),u=gc(E,d,G),u!==null&&(mo(u,E,G,F),lv(u,E,G)),G}function Pv(u){if(u=u.current,!u.child)return null;switch(u.child.tag){case 5:return u.child.stateNode;default:return u.child.stateNode}}function JI(u,d){if(u=u.memoizedState,u!==null&&u.dehydrated!==null){var v=u.retryLane;u.retryLane=v!==0&&v<d?v:d}}function fx(u,d){JI(u,d),(u=u.alternate)&&JI(u,d)}function yG(){return null}var eL=typeof reportError=="function"?reportError:function(u){console.error(u)};function mx(u){this._internalRoot=u}Fv.prototype.render=mx.prototype.render=function(u){var d=this._internalRoot;if(d===null)throw Error(i(409));Av(u,d,null,null)},Fv.prototype.unmount=mx.prototype.unmount=function(){var u=this._internalRoot;if(u!==null){this._internalRoot=null;var d=u.containerInfo;Fu(function(){Av(null,u,null,null)}),d[qt]=null}};function Fv(u){this._internalRoot=u}Fv.prototype.unstable_scheduleHydration=function(u){if(u){var d=Qh();u={blockedOn:null,target:u,priority:d};for(var v=0;v<as.length&&d!==0&&d<as[v].priority;v++);as.splice(v,0,u),v===0&&qh(u)}};function vx(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11)}function kv(u){return!(!u||u.nodeType!==1&&u.nodeType!==9&&u.nodeType!==11&&(u.nodeType!==8||u.nodeValue!==" react-mount-point-unstable "))}function tL(){}function CG(u,d,v,w,E){if(E){if(typeof w=="function"){var F=w;w=function(){var he=Pv(G);F.call(he)}}var G=qI(d,w,u,0,null,!1,!1,"",tL);return u._reactRootContainer=G,u[qt]=G.current,oc(u.nodeType===8?u.parentNode:u),Fu(),G}for(;E=u.lastChild;)u.removeChild(E);if(typeof w=="function"){var j=w;w=function(){var he=Pv(Z);j.call(he)}}var Z=gx(u,0,!1,null,null,!1,!1,"",tL);return u._reactRootContainer=Z,u[qt]=Z.current,oc(u.nodeType===8?u.parentNode:u),Fu(function(){Av(d,Z,v,w)}),Z}function Nv(u,d,v,w,E){var F=v._reactRootContainer;if(F){var G=F;if(typeof E=="function"){var j=E;E=function(){var Z=Pv(G);j.call(Z)}}Av(d,G,u,E)}else G=CG(v,d,u,E,w);return Pv(G)}Zh=function(u){switch(u.tag){case 3:var d=u.stateNode;if(d.current.memoizedState.isDehydrated){var v=vt(d.pendingLanes);v!==0&&(oo(d,v|1),On(d,ri()),!(Gt&6)&&(Id=ri()+500,dc()))}break;case 13:Fu(function(){var w=Qa(u,1);if(w!==null){var E=nn();mo(w,u,1,E)}}),fx(u,1)}},Oa=function(u){if(u.tag===13){var d=Qa(u,134217728);if(d!==null){var v=nn();mo(d,u,134217728,v)}fx(u,134217728)}},Xh=function(u){if(u.tag===13){var d=yc(u),v=Qa(u,d);if(v!==null){var w=nn();mo(v,u,d,w)}fx(u,d)}},Qh=function(){return Nt},gu=function(u,d){var v=Nt;try{return Nt=u,d()}finally{Nt=v}},Ta=function(u,d,v){switch(d){case"input":if(ft(u,v),d=v.name,v.type==="radio"&&d!=null){for(v=u;v.parentNode;)v=v.parentNode;for(v=v.querySelectorAll("input[name="+JSON.stringify(""+d)+'][type="radio"]'),d=0;d<v.length;d++){var w=v[d];if(w!==u&&w.form===u.form){var E=fd(w);if(!E)throw Error(i(90));Be(w),ft(w,E)}}}break;case"textarea":Qs(u,v);break;case"select":d=v.value,d!=null&&Mt(u,!!v.multiple,d,!1)}},Kh=lx,X=Fu;var SG={usingClientEntryPoint:!1,Events:[Ka,Ya,fd,Pa,Uh,lx]},Rg={findFiberByHostInstance:Ua,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wG={bundleType:Rg.bundleType,version:Rg.version,rendererPackageName:Rg.rendererPackageName,rendererConfig:Rg.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:P.ReactCurrentDispatcher,findHostInstanceByFiber:function(u){return u=Ho(u),u===null?null:u.stateNode},findFiberByHostInstance:Rg.findFiberByHostInstance||yG,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ov=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ov.isDisabled&&Ov.supportsFiber)try{Ln=Ov.inject(wG),Ps=Ov}catch{}}return _n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=SG,_n.createPortal=function(u,d){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vx(d))throw Error(i(200));return vG(u,d,null,v)},_n.createRoot=function(u,d){if(!vx(u))throw Error(i(299));var v=!1,w="",E=eL;return d!=null&&(d.unstable_strictMode===!0&&(v=!0),d.identifierPrefix!==void 0&&(w=d.identifierPrefix),d.onRecoverableError!==void 0&&(E=d.onRecoverableError)),d=gx(u,1,!1,null,null,v,!1,w,E),u[qt]=d.current,oc(u.nodeType===8?u.parentNode:u),new mx(d)},_n.findDOMNode=function(u){if(u==null)return null;if(u.nodeType===1)return u;var d=u._reactInternals;if(d===void 0)throw typeof u.render=="function"?Error(i(188)):(u=Object.keys(u).join(","),Error(i(268,u)));return u=Ho(d),u=u===null?null:u.stateNode,u},_n.flushSync=function(u){return Fu(u)},_n.hydrate=function(u,d,v){if(!kv(d))throw Error(i(200));return Nv(null,u,d,!0,v)},_n.hydrateRoot=function(u,d,v){if(!vx(u))throw Error(i(405));var w=v!=null&&v.hydratedSources||null,E=!1,F="",G=eL;if(v!=null&&(v.unstable_strictMode===!0&&(E=!0),v.identifierPrefix!==void 0&&(F=v.identifierPrefix),v.onRecoverableError!==void 0&&(G=v.onRecoverableError)),d=qI(d,null,u,1,v??null,E,!1,F,G),u[qt]=d.current,oc(u),w)for(u=0;u<w.length;u++)v=w[u],E=v._getVersion,E=E(v._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[v,E]:d.mutableSourceEagerHydrationData.push(v,E);return new Fv(d)},_n.render=function(u,d,v){if(!kv(d))throw Error(i(200));return Nv(null,u,d,!1,v)},_n.unmountComponentAtNode=function(u){if(!kv(u))throw Error(i(40));return u._reactRootContainer?(Fu(function(){Nv(null,null,u,!1,function(){u._reactRootContainer=null,u[qt]=null})}),!0):!1},_n.unstable_batchedUpdates=lx,_n.unstable_renderSubtreeIntoContainer=function(u,d,v,w){if(!kv(v))throw Error(i(200));if(u==null||u._reactInternals===void 0)throw Error(i(38));return Nv(u,d,v,!1,w)},_n.version="18.3.1-next-f1338f8080-20240426",_n}var cL;function nP(){if(cL)return Sx.exports;cL=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Sx.exports=IG(),Sx.exports}var uL;function LG(){if(uL)return _v;uL=1;var e=nP();return _v.createRoot=e.createRoot,_v.hydrateRoot=e.hydrateRoot,_v}var TG=LG(),Eg={},hL;function AG(){if(hL)return Eg;hL=1,Object.defineProperty(Eg,"__esModule",{value:!0}),Eg.parse=o,Eg.serialize=c;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,i=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,s=/^[\u0020-\u003A\u003D-\u007E]*$/,n=Object.prototype.toString,r=(()=>{const f=function(){};return f.prototype=Object.create(null),f})();function o(f,y){const C=new r,x=f.length;if(x<2)return C;const M=(y==null?void 0:y.decode)||p;let b=0;do{const R=f.indexOf("=",b);if(R===-1)break;const I=f.indexOf(";",b),P=I===-1?x:I;if(R>P){b=f.lastIndexOf(";",R-1)+1;continue}const k=a(f,b,R),_=l(f,R,k),B=f.slice(k,_);if(C[B]===void 0){let H=a(f,R+1,P),V=l(f,P,H);const U=M(f.slice(H,V));C[B]=U}b=P+1}while(b<x);return C}function a(f,y,C){do{const x=f.charCodeAt(y);if(x!==32&&x!==9)return y}while(++y<C);return C}function l(f,y,C){for(;y>C;){const x=f.charCodeAt(--y);if(x!==32&&x!==9)return y+1}return C}function c(f,y,C){const x=(C==null?void 0:C.encode)||encodeURIComponent;if(!e.test(f))throw new TypeError(`argument name is invalid: ${f}`);const M=x(y);if(!t.test(M))throw new TypeError(`argument val is invalid: ${y}`);let b=f+"="+M;if(!C)return b;if(C.maxAge!==void 0){if(!Number.isInteger(C.maxAge))throw new TypeError(`option maxAge is invalid: ${C.maxAge}`);b+="; Max-Age="+C.maxAge}if(C.domain){if(!i.test(C.domain))throw new TypeError(`option domain is invalid: ${C.domain}`);b+="; Domain="+C.domain}if(C.path){if(!s.test(C.path))throw new TypeError(`option path is invalid: ${C.path}`);b+="; Path="+C.path}if(C.expires){if(!g(C.expires)||!Number.isFinite(C.expires.valueOf()))throw new TypeError(`option expires is invalid: ${C.expires}`);b+="; Expires="+C.expires.toUTCString()}if(C.httpOnly&&(b+="; HttpOnly"),C.secure&&(b+="; Secure"),C.partitioned&&(b+="; Partitioned"),C.priority)switch(typeof C.priority=="string"?C.priority.toLowerCase():void 0){case"low":b+="; Priority=Low";break;case"medium":b+="; Priority=Medium";break;case"high":b+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${C.priority}`)}if(C.sameSite)switch(typeof C.sameSite=="string"?C.sameSite.toLowerCase():C.sameSite){case!0:case"strict":b+="; SameSite=Strict";break;case"lax":b+="; SameSite=Lax";break;case"none":b+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${C.sameSite}`)}return b}function p(f){if(f.indexOf("%")===-1)return f;try{return decodeURIComponent(f)}catch{return f}}function g(f){return n.call(f)==="[object Date]"}return Eg}AG();/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var dL="popstate";function PG(e={}){function t(n,r){let{pathname:o="/",search:a="",hash:l=""}=xl(n.location.hash.substring(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),vf("",{pathname:o,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function i(n,r){let o=n.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=n.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof r=="string"?r:Yc(r))}function s(n,r){xs(n.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(r)})`)}return kG(t,i,s,e)}function Ot(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function xs(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function FG(){return Math.random().toString(36).substring(2,10)}function pL(e,t){return{usr:e.state,key:e.key,idx:t}}function vf(e,t,i=null,s){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?xl(t):t,state:i,key:t&&t.key||s||FG()}}function Yc({pathname:e="/",search:t="",hash:i=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function xl(e){let t={};if(e){let i=e.indexOf("#");i>=0&&(t.hash=e.substring(i),e=e.substring(0,i));let s=e.indexOf("?");s>=0&&(t.search=e.substring(s),e=e.substring(0,s)),e&&(t.pathname=e)}return t}function kG(e,t,i,s={}){let{window:n=document.defaultView,v5Compat:r=!1}=s,o=n.history,a="POP",l=null,c=p();c==null&&(c=0,o.replaceState({...o.state,idx:c},""));function p(){return(o.state||{idx:null}).idx}function g(){a="POP";let M=p(),b=M==null?null:M-c;c=M,l&&l({action:a,location:x.location,delta:b})}function f(M,b){a="PUSH";let R=vf(x.location,M,b);i&&i(R,M),c=p()+1;let I=pL(R,c),P=x.createHref(R);try{o.pushState(I,"",P)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;n.location.assign(P)}r&&l&&l({action:a,location:x.location,delta:1})}function y(M,b){a="REPLACE";let R=vf(x.location,M,b);i&&i(R,M),c=p();let I=pL(R,c),P=x.createHref(R);o.replaceState(I,"",P),r&&l&&l({action:a,location:x.location,delta:0})}function C(M){let b=n.location.origin!=="null"?n.location.origin:n.location.href,R=typeof M=="string"?M:Yc(M);return R=R.replace(/ $/,"%20"),Ot(b,`No window.location.(origin|href) available to create URL for href: ${R}`),new URL(R,b)}let x={get action(){return a},get location(){return e(n,o)},listen(M){if(l)throw new Error("A history only accepts one active listener");return n.addEventListener(dL,g),l=M,()=>{n.removeEventListener(dL,g),l=null}},createHref(M){return t(n,M)},createURL:C,encodeLocation(M){let b=C(M);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:f,replace:y,go(M){return o.go(M)}};return x}var NG=new Set(["lazy","caseSensitive","path","id","index","children"]);function OG(e){return e.index===!0}function Ty(e,t,i=[],s={}){return e.map((n,r)=>{let o=[...i,String(r)],a=typeof n.id=="string"?n.id:o.join("-");if(Ot(n.index!==!0||!n.children,"Cannot specify children on an index route"),Ot(!s[a],`Found a route id collision on id "${a}".  Route id's must be globally unique within Data Router usages`),OG(n)){let l={...n,...t(n),id:a};return s[a]=l,l}else{let l={...n,...t(n),id:a,children:void 0};return s[a]=l,n.children&&(l.children=Ty(n.children,t,o,s)),l}})}function Ac(e,t,i="/"){return uy(e,t,i,!1)}function uy(e,t,i,s){let n=typeof t=="string"?xl(t):t,r=Po(n.pathname||"/",i);if(r==null)return null;let o=rP(e);BG(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=ZG(r);a=YG(o[l],c,s)}return a}function _G(e,t){let{route:i,pathname:s,params:n}=e;return{id:i.id,pathname:s,params:n,data:t[i.id],handle:i.handle}}function rP(e,t=[],i=[],s=""){let n=(r,o,a)=>{let l={relativePath:a===void 0?r.path||"":a,caseSensitive:r.caseSensitive===!0,childrenIndex:o,route:r};l.relativePath.startsWith("/")&&(Ot(l.relativePath.startsWith(s),`Absolute route path "${l.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),l.relativePath=l.relativePath.slice(s.length));let c=aa([s,l.relativePath]),p=i.concat(l);r.children&&r.children.length>0&&(Ot(r.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${c}".`),rP(r.children,t,p,c)),!(r.path==null&&!r.index)&&t.push({path:c,score:UG(c,r.index),routesMeta:p})};return e.forEach((r,o)=>{var a;if(r.path===""||!((a=r.path)!=null&&a.includes("?")))n(r,o);else for(let l of oP(r.path))n(r,o,l)}),t}function oP(e){let t=e.split("/");if(t.length===0)return[];let[i,...s]=t,n=i.endsWith("?"),r=i.replace(/\?$/,"");if(s.length===0)return n?[r,""]:[r];let o=oP(s.join("/")),a=[];return a.push(...o.map(l=>l===""?r:[r,l].join("/"))),n&&a.push(...o),a.map(l=>e.startsWith("/")&&l===""?"/":l)}function BG(e){e.sort((t,i)=>t.score!==i.score?i.score-t.score:KG(t.routesMeta.map(s=>s.childrenIndex),i.routesMeta.map(s=>s.childrenIndex)))}var GG=/^:[\w-]+$/,zG=3,HG=2,VG=1,WG=10,jG=-2,gL=e=>e==="*";function UG(e,t){let i=e.split("/"),s=i.length;return i.some(gL)&&(s+=jG),t&&(s+=HG),i.filter(n=>!gL(n)).reduce((n,r)=>n+(GG.test(r)?zG:r===""?VG:WG),s)}function KG(e,t){return e.length===t.length&&e.slice(0,-1).every((s,n)=>s===t[n])?e[e.length-1]-t[t.length-1]:0}function YG(e,t,i=!1){let{routesMeta:s}=e,n={},r="/",o=[];for(let a=0;a<s.length;++a){let l=s[a],c=a===s.length-1,p=r==="/"?t:t.slice(r.length)||"/",g=Ay({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},p),f=l.route;if(!g&&c&&i&&!s[s.length-1].route.index&&(g=Ay({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},p)),!g)return null;Object.assign(n,g.params),o.push({params:n,pathname:aa([r,g.pathname]),pathnameBase:qG(aa([r,g.pathnameBase])),route:f}),g.pathnameBase!=="/"&&(r=aa([r,g.pathnameBase]))}return o}function Ay(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[i,s]=$G(e.path,e.caseSensitive,e.end),n=t.match(i);if(!n)return null;let r=n[0],o=r.replace(/(.)\/+$/,"$1"),a=n.slice(1);return{params:s.reduce((c,{paramName:p,isOptional:g},f)=>{if(p==="*"){let C=a[f]||"";o=r.slice(0,r.length-C.length).replace(/(.)\/+$/,"$1")}const y=a[f];return g&&!y?c[p]=void 0:c[p]=(y||"").replace(/%2F/g,"/"),c},{}),pathname:r,pathnameBase:o,pattern:e}}function $G(e,t=!1,i=!0){xs(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let s=[],n="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(s.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),n+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):i?n+="\\/*$":e!==""&&e!=="/"&&(n+="(?:(?=\\/|$))"),[new RegExp(n,t?void 0:"i"),s]}function ZG(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return xs(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Po(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let i=t.endsWith("/")?t.length-1:t.length,s=e.charAt(i);return s&&s!=="/"?null:e.slice(i)||"/"}function XG(e,t="/"){let{pathname:i,search:s="",hash:n=""}=typeof e=="string"?xl(e):e;return{pathname:i?i.startsWith("/")?i:QG(i,t):t,search:JG(s),hash:ez(n)}}function QG(e,t){let i=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(n=>{n===".."?i.length>1&&i.pop():n!=="."&&i.push(n)}),i.length>1?i.join("/"):"/"}function bx(e,t,i,s){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${i}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function aP(e){return e.filter((t,i)=>i===0||t.route.path&&t.route.path.length>0)}function UM(e){let t=aP(e);return t.map((i,s)=>s===t.length-1?i.pathname:i.pathnameBase)}function KM(e,t,i,s=!1){let n;typeof e=="string"?n=xl(e):(n={...e},Ot(!n.pathname||!n.pathname.includes("?"),bx("?","pathname","search",n)),Ot(!n.pathname||!n.pathname.includes("#"),bx("#","pathname","hash",n)),Ot(!n.search||!n.search.includes("#"),bx("#","search","hash",n)));let r=e===""||n.pathname==="",o=r?"/":n.pathname,a;if(o==null)a=i;else{let g=t.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),g-=1;n.pathname=f.join("/")}a=g>=0?t[g]:"/"}let l=XG(n,a),c=o&&o!=="/"&&o.endsWith("/"),p=(r||o===".")&&i.endsWith("/");return!l.pathname.endsWith("/")&&(c||p)&&(l.pathname+="/"),l}var aa=e=>e.join("/").replace(/\/\/+/g,"/"),qG=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),JG=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,ez=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e,Py=class{constructor(e,t,i,s=!1){this.status=e,this.statusText=t||"",this.internal=s,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}};function wC(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var lP=["POST","PUT","PATCH","DELETE"],tz=new Set(lP),iz=["GET",...lP],sz=new Set(iz),nz=new Set([301,302,303,307,308]),rz=new Set([307,308]),Mx={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},oz={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},Ig={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},YM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,az=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),cP="remix-router-transitions",uP=Symbol("ResetLoaderData");function lz(e){const t=e.window?e.window:typeof window<"u"?window:void 0,i=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u";Ot(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let s=e.mapRouteProperties||az,n={},r=Ty(e.routes,s,void 0,n),o,a=e.basename||"/",l=e.dataStrategy||pz,c=e.patchRoutesOnNavigation,p={...e.future},g=null,f=new Set,y=null,C=null,x=null,M=e.hydrationData!=null,b=Ac(r,e.history.location,a),R=null;if(b==null&&!c){let X=Br(404,{pathname:e.history.location.pathname}),{matches:ee,route:ge}=RL(r);b=ee,R={[ge.id]:X}}b&&!e.hydrationData&&Aa(b,r,e.history.location.pathname).active&&(b=null);let I;if(b)if(b.some(X=>X.route.lazy))I=!1;else if(!b.some(X=>X.route.loader))I=!0;else{let X=e.hydrationData?e.hydrationData.loaderData:null,ee=e.hydrationData?e.hydrationData.errors:null;if(ee){let ge=b.findIndex(Le=>ee[Le.route.id]!==void 0);I=b.slice(0,ge+1).every(Le=>!Ab(Le.route,X,ee))}else I=b.every(ge=>!Ab(ge.route,X,ee))}else{I=!1,b=[];let X=Aa(null,r,e.history.location.pathname);X.active&&X.matches&&(b=X.matches)}let P,k={historyAction:e.history.action,location:e.history.location,matches:b,initialized:I,navigation:Mx,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||R,fetchers:new Map,blockers:new Map},_="POP",B=!1,H,V=!1,U=new Map,$=null,te=!1,Ce=!1,be=new Set,Re=new Map,oe=0,Se=-1,K=new Map,pe=new Set,q=new Map,W=new Map,Q=new Set,ve=new Map,se,ye=null;function ue(){if(g=e.history.listen(({action:X,location:ee,delta:ge})=>{if(se){se(),se=void 0;return}xs(ve.size===0||ge!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Le=Cr({currentLocation:k.location,nextLocation:ee,historyAction:X});if(Le&&ge!=null){let je=new Promise(Je=>{se=Je});e.history.go(ge*-1),Go(Le,{state:"blocked",location:ee,proceed(){Go(Le,{state:"proceeding",proceed:void 0,reset:void 0,location:ee}),je.then(()=>e.history.go(ge))},reset(){let Je=new Map(k.blockers);Je.set(Le,Ig),ne({blockers:Je})}});return}return $e(X,ee)}),i){Mz(t,U);let X=()=>Rz(t,U);t.addEventListener("pagehide",X),$=()=>t.removeEventListener("pagehide",X)}return k.initialized||$e("POP",k.location,{initialHydration:!0}),P}function Me(){g&&g(),$&&$(),f.clear(),H&&H.abort(),k.fetchers.forEach((X,ee)=>vi(ee)),k.blockers.forEach((X,ee)=>du(ee))}function me(X){return f.add(X),()=>f.delete(X)}function ne(X,ee={}){k={...k,...X};let ge=[],Le=[];k.fetchers.forEach((je,Je)=>{je.state==="idle"&&(Q.has(Je)?ge.push(Je):Le.push(Je))}),Q.forEach(je=>{!k.fetchers.has(je)&&!Re.has(je)&&ge.push(je)}),[...f].forEach(je=>je(k,{deletedFetchers:ge,viewTransitionOpts:ee.viewTransitionOpts,flushSync:ee.flushSync===!0})),ge.forEach(je=>vi(je)),Le.forEach(je=>k.fetchers.delete(je))}function Ee(X,ee,{flushSync:ge}={}){var He,ht;let Le=k.actionData!=null&&k.navigation.formMethod!=null&&Co(k.navigation.formMethod)&&k.navigation.state==="loading"&&((He=X.state)==null?void 0:He._isRedirect)!==!0,je;ee.actionData?Object.keys(ee.actionData).length>0?je=ee.actionData:je=null:Le?je=k.actionData:je=null;let Je=ee.loaderData?bL(k.loaderData,ee.loaderData,ee.matches||[],ee.errors):k.loaderData,dt=k.blockers;dt.size>0&&(dt=new Map(dt),dt.forEach((wt,ei)=>dt.set(ei,Ig)));let Ve=B===!0||k.navigation.formMethod!=null&&Co(k.navigation.formMethod)&&((ht=X.state)==null?void 0:ht._isRedirect)!==!0;o&&(r=o,o=void 0),te||_==="POP"||(_==="PUSH"?e.history.push(X,X.state):_==="REPLACE"&&e.history.replace(X,X.state));let xe;if(_==="POP"){let wt=U.get(k.location.pathname);wt&&wt.has(X.pathname)?xe={currentLocation:k.location,nextLocation:X}:U.has(X.pathname)&&(xe={currentLocation:X,nextLocation:k.location})}else if(V){let wt=U.get(k.location.pathname);wt?wt.add(X.pathname):(wt=new Set([X.pathname]),U.set(k.location.pathname,wt)),xe={currentLocation:k.location,nextLocation:X}}ne({...ee,actionData:je,loaderData:Je,historyAction:_,location:X,initialized:!0,navigation:Mx,revalidation:"idle",restoreScrollPosition:Sr(X,ee.matches||k.matches),preventScrollReset:Ve,blockers:dt},{viewTransitionOpts:xe,flushSync:ge===!0}),_="POP",B=!1,V=!1,te=!1,Ce=!1,ye==null||ye.resolve(),ye=null}async function ze(X,ee){if(typeof X=="number"){e.history.go(X);return}let ge=Tb(k.location,k.matches,a,X,ee==null?void 0:ee.fromRouteId,ee==null?void 0:ee.relative),{path:Le,submission:je,error:Je}=fL(!1,ge,ee),dt=k.location,Ve=vf(k.location,Le,ee&&ee.state);Ve={...Ve,...e.history.encodeLocation(Ve)};let xe=ee&&ee.replace!=null?ee.replace:void 0,He="PUSH";xe===!0?He="REPLACE":xe===!1||je!=null&&Co(je.formMethod)&&je.formAction===k.location.pathname+k.location.search&&(He="REPLACE");let ht=ee&&"preventScrollReset"in ee?ee.preventScrollReset===!0:void 0,wt=(ee&&ee.flushSync)===!0,ei=Cr({currentLocation:dt,nextLocation:Ve,historyAction:He});if(ei){Go(ei,{state:"blocked",location:Ve,proceed(){Go(ei,{state:"proceeding",proceed:void 0,reset:void 0,location:Ve}),ze(X,ee)},reset(){let Li=new Map(k.blockers);Li.set(ei,Ig),ne({blockers:Li})}});return}await $e(He,Ve,{submission:je,pendingError:Je,preventScrollReset:ht,replace:ee&&ee.replace,enableViewTransition:ee&&ee.viewTransition,flushSync:wt})}function Be(){ye||(ye=Dz()),Qs(),ne({revalidation:"loading"});let X=ye.promise;return k.navigation.state==="submitting"?X:k.navigation.state==="idle"?($e(k.historyAction,k.location,{startUninterruptedRevalidation:!0}),X):($e(_||k.historyAction,k.navigation.location,{overrideNavigation:k.navigation,enableViewTransition:V===!0}),X)}async function $e(X,ee,ge){H&&H.abort(),H=null,_=X,te=(ge&&ge.startUninterruptedRevalidation)===!0,io(k.location,k.matches),B=(ge&&ge.preventScrollReset)===!0,V=(ge&&ge.enableViewTransition)===!0;let Le=o||r,je=ge&&ge.overrideNavigation,Je=Ac(Le,ee,a),dt=(ge&&ge.flushSync)===!0,Ve=Aa(Je,Le,ee.pathname);if(Ve.active&&Ve.matches&&(Je=Ve.matches),!Je){let{error:Bt,notFoundMatches:kt,route:yi}=La(ee.pathname);Ee(ee,{matches:kt,loaderData:{},errors:{[yi.id]:Bt}},{flushSync:dt});return}if(k.initialized&&!Ce&&Cz(k.location,ee)&&!(ge&&ge.submission&&Co(ge.submission.formMethod))){Ee(ee,{matches:Je},{flushSync:dt});return}H=new AbortController;let xe=Td(e.history,ee,H.signal,ge&&ge.submission),He;if(ge&&ge.pendingError)He=[Ju(Je).route.id,{type:"error",error:ge.pendingError}];else if(ge&&ge.submission&&Co(ge.submission.formMethod)){let Bt=await tt(xe,ee,ge.submission,Je,Ve.active,{replace:ge.replace,flushSync:dt});if(Bt.shortCircuited)return;if(Bt.pendingActionResult){let[kt,yi]=Bt.pendingActionResult;if(cr(yi)&&wC(yi.error)&&yi.error.status===404){H=null,Ee(ee,{matches:Bt.matches,loaderData:{},errors:{[kt]:yi.error}});return}}Je=Bt.matches||Je,He=Bt.pendingActionResult,je=Rx(ee,ge.submission),dt=!1,Ve.active=!1,xe=Td(e.history,xe.url,xe.signal)}let{shortCircuited:ht,matches:wt,loaderData:ei,errors:Li}=await Ne(xe,ee,Je,Ve.active,je,ge&&ge.submission,ge&&ge.fetcherSubmission,ge&&ge.replace,ge&&ge.initialHydration===!0,dt,He);ht||(H=null,Ee(ee,{matches:wt||Je,...ML(He),loaderData:ei,errors:Li}))}async function tt(X,ee,ge,Le,je,Je={}){Qs();let dt=xz(ee,ge);if(ne({navigation:dt},{flushSync:Je.flushSync===!0}),je){let He=await Pa(Le,ee.pathname,X.signal);if(He.type==="aborted")return{shortCircuited:!0};if(He.type==="error"){let ht=Ju(He.partialMatches).route.id;return{matches:He.partialMatches,pendingActionResult:[ht,{type:"error",error:He.error}]}}else if(He.matches)Le=He.matches;else{let{notFoundMatches:ht,error:wt,route:ei}=La(ee.pathname);return{matches:ht,pendingActionResult:[ei.id,{type:"error",error:wt}]}}}let Ve,xe=Wg(Le,ee);if(!xe.route.action&&!xe.route.lazy)Ve={type:"error",error:Br(405,{method:X.method,pathname:ee.pathname,routeId:xe.route.id})};else if(Ve=(await Ri("action",k,X,[xe],Le,null))[xe.route.id],X.signal.aborted)return{shortCircuited:!0};if(nh(Ve)){let He;return Je&&Je.replace!=null?He=Je.replace:He=SL(Ve.response.headers.get("Location"),new URL(X.url),a)===k.location.pathname+k.location.search,await Mt(X,Ve,!0,{submission:ge,replace:He}),{shortCircuited:!0}}if(cr(Ve)){let He=Ju(Le,xe.route.id);return(Je&&Je.replace)!==!0&&(_="PUSH"),{matches:Le,pendingActionResult:[He.route.id,Ve]}}return{matches:Le,pendingActionResult:[xe.route.id,Ve]}}async function Ne(X,ee,ge,Le,je,Je,dt,Ve,xe,He,ht){let wt=je||Rx(ee,Je),ei=Je||dt||EL(wt),Li=!te&&!xe;if(Le){if(Li){let $i=qe(ht);ne({navigation:wt,...$i!==void 0?{actionData:$i}:{}},{flushSync:He})}let Vt=await Pa(ge,ee.pathname,X.signal);if(Vt.type==="aborted")return{shortCircuited:!0};if(Vt.type==="error"){let $i=Ju(Vt.partialMatches).route.id;return{matches:Vt.partialMatches,loaderData:{},errors:{[$i]:Vt.error}}}else if(Vt.matches)ge=Vt.matches;else{let{error:$i,notFoundMatches:so,route:no}=La(ee.pathname);return{matches:so,loaderData:{},errors:{[no.id]:$i}}}}let Bt=o||r,[kt,yi]=vL(e.history,k,ge,ei,ee,xe===!0,Ce,be,Q,q,pe,Bt,a,ht);if(Se=++oe,kt.length===0&&yi.length===0){let Vt=jh();return Ee(ee,{matches:ge,loaderData:{},errors:ht&&cr(ht[1])?{[ht[0]]:ht[1].error}:null,...ML(ht),...Vt?{fetchers:new Map(k.fetchers)}:{}},{flushSync:He}),{shortCircuited:!0}}if(Li){let Vt={};if(!Le){Vt.navigation=wt;let $i=qe(ht);$i!==void 0&&(Vt.actionData=$i)}yi.length>0&&(Vt.fetchers=ft(yi)),ne(Vt,{flushSync:He})}yi.forEach(Vt=>{Gi(Vt.key),Vt.controller&&Re.set(Vt.key,Vt.controller)});let zo=()=>yi.forEach(Vt=>Gi(Vt.key));H&&H.signal.addEventListener("abort",zo);let{loaderResults:Ho,fetcherResults:En}=await Ki(k,ge,kt,yi,X);if(X.signal.aborted)return{shortCircuited:!0};H&&H.signal.removeEventListener("abort",zo),yi.forEach(Vt=>Re.delete(Vt.key));let qs=Bv(Ho);if(qs)return await Mt(X,qs.result,!0,{replace:Ve}),{shortCircuited:!0};if(qs=Bv(En),qs)return pe.add(qs.key),await Mt(X,qs.result,!0,{replace:Ve}),{shortCircuited:!0};let{loaderData:Fa,errors:ka}=xL(k,ge,Ho,ht,yi,En);xe&&k.errors&&(ka={...k.errors,...ka});let In=jh(),ri=Hl(Se),Wl=In||ri||yi.length>0;return{matches:ge,loaderData:Fa,errors:ka,...Wl?{fetchers:new Map(k.fetchers)}:{}}}function qe(X){if(X&&!cr(X[1]))return{[X[0]]:X[1].data};if(k.actionData)return Object.keys(k.actionData).length===0?null:k.actionData}function ft(X){return X.forEach(ee=>{let ge=k.fetchers.get(ee.key),Le=Lg(void 0,ge?ge.data:void 0);k.fetchers.set(ee.key,Le)}),new Map(k.fetchers)}async function Rt(X,ee,ge,Le){Gi(X);let je=(Le&&Le.flushSync)===!0,Je=o||r,dt=Tb(k.location,k.matches,a,ge,ee,Le==null?void 0:Le.relative),Ve=Ac(Je,dt,a),xe=Aa(Ve,Je,dt);if(xe.active&&xe.matches&&(Ve=xe.matches),!Ve){ut(X,ee,Br(404,{pathname:dt}),{flushSync:je});return}let{path:He,submission:ht,error:wt}=fL(!0,dt,Le);if(wt){ut(X,ee,wt,{flushSync:je});return}let ei=Wg(Ve,He),Li=(Le&&Le.preventScrollReset)===!0;if(ht&&Co(ht.formMethod)){await Dt(X,ee,He,ei,Ve,xe.active,je,Li,ht);return}q.set(X,{routeId:ee,path:He}),await xt(X,ee,He,ei,Ve,xe.active,je,Li,ht)}async function Dt(X,ee,ge,Le,je,Je,dt,Ve,xe){Qs(),q.delete(X);function He(ti){if(!ti.route.action&&!ti.route.lazy){let Ln=Br(405,{method:xe.formMethod,pathname:ge,routeId:ee});return ut(X,ee,Ln,{flushSync:dt}),!0}return!1}if(!Je&&He(Le))return;let ht=k.fetchers.get(X);Yi(X,bz(xe,ht),{flushSync:dt});let wt=new AbortController,ei=Td(e.history,ge,wt.signal,xe);if(Je){let ti=await Pa(je,ge,ei.signal);if(ti.type==="aborted")return;if(ti.type==="error"){ut(X,ee,ti.error,{flushSync:dt});return}else if(ti.matches){if(je=ti.matches,Le=Wg(je,ge),He(Le))return}else{ut(X,ee,Br(404,{pathname:ge}),{flushSync:dt});return}}Re.set(X,wt);let Li=oe,kt=(await Ri("action",k,ei,[Le],je,X))[Le.route.id];if(ei.signal.aborted){Re.get(X)===wt&&Re.delete(X);return}if(Q.has(X)){if(nh(kt)||cr(kt)){Yi(X,Dc(void 0));return}}else{if(nh(kt))if(Re.delete(X),Se>Li){Yi(X,Dc(void 0));return}else return pe.add(X),Yi(X,Lg(xe)),Mt(ei,kt,!1,{fetcherSubmission:xe,preventScrollReset:Ve});if(cr(kt)){ut(X,ee,kt.error);return}}let yi=k.navigation.location||k.location,zo=Td(e.history,yi,wt.signal),Ho=o||r,En=k.navigation.state!=="idle"?Ac(Ho,k.navigation.location,a):k.matches;Ot(En,"Didn't find any matches after fetcher action");let qs=++oe;K.set(X,qs);let Fa=Lg(xe,kt.data);k.fetchers.set(X,Fa);let[ka,In]=vL(e.history,k,En,xe,yi,!1,Ce,be,Q,q,pe,Ho,a,[Le.route.id,kt]);In.filter(ti=>ti.key!==X).forEach(ti=>{let Ln=ti.key,Ps=k.fetchers.get(Ln),Na=Lg(void 0,Ps?Ps.data:void 0);k.fetchers.set(Ln,Na),Gi(Ln),ti.controller&&Re.set(Ln,ti.controller)}),ne({fetchers:new Map(k.fetchers)});let ri=()=>In.forEach(ti=>Gi(ti.key));wt.signal.addEventListener("abort",ri);let{loaderResults:Wl,fetcherResults:Vt}=await Ki(k,En,ka,In,zo);if(wt.signal.aborted)return;wt.signal.removeEventListener("abort",ri),K.delete(X),Re.delete(X),In.forEach(ti=>Re.delete(ti.key));let $i=Bv(Wl);if($i)return Mt(zo,$i.result,!1,{preventScrollReset:Ve});if($i=Bv(Vt),$i)return pe.add($i.key),Mt(zo,$i.result,!1,{preventScrollReset:Ve});let{loaderData:so,errors:no}=xL(k,En,Wl,void 0,In,Vt);if(k.fetchers.has(X)){let ti=Dc(kt.data);k.fetchers.set(X,ti)}Hl(qs),k.navigation.state==="loading"&&qs>Se?(Ot(_,"Expected pending action"),H&&H.abort(),Ee(k.navigation.location,{matches:En,loaderData:so,errors:no,fetchers:new Map(k.fetchers)})):(ne({errors:no,loaderData:bL(k.loaderData,so,En,no),fetchers:new Map(k.fetchers)}),Ce=!1)}async function xt(X,ee,ge,Le,je,Je,dt,Ve,xe){let He=k.fetchers.get(X);Yi(X,Lg(xe,He?He.data:void 0),{flushSync:dt});let ht=new AbortController,wt=Td(e.history,ge,ht.signal);if(Je){let kt=await Pa(je,ge,wt.signal);if(kt.type==="aborted")return;if(kt.type==="error"){ut(X,ee,kt.error,{flushSync:dt});return}else if(kt.matches)je=kt.matches,Le=Wg(je,ge);else{ut(X,ee,Br(404,{pathname:ge}),{flushSync:dt});return}}Re.set(X,ht);let ei=oe,Bt=(await Ri("loader",k,wt,[Le],je,X))[Le.route.id];if(Re.get(X)===ht&&Re.delete(X),!wt.signal.aborted){if(Q.has(X)){Yi(X,Dc(void 0));return}if(nh(Bt))if(Se>ei){Yi(X,Dc(void 0));return}else{pe.add(X),await Mt(wt,Bt,!1,{preventScrollReset:Ve});return}if(cr(Bt)){ut(X,ee,Bt.error);return}Yi(X,Dc(Bt.data))}}async function Mt(X,ee,ge,{submission:Le,fetcherSubmission:je,preventScrollReset:Je,replace:dt}={}){ee.response.headers.has("X-Remix-Revalidate")&&(Ce=!0);let Ve=ee.response.headers.get("Location");Ot(Ve,"Expected a Location header on the redirect Response"),Ve=SL(Ve,new URL(X.url),a);let xe=vf(k.location,Ve,{_isRedirect:!0});if(i){let Bt=!1;if(ee.response.headers.has("X-Remix-Reload-Document"))Bt=!0;else if(YM.test(Ve)){const kt=e.history.createURL(Ve);Bt=kt.origin!==t.location.origin||Po(kt.pathname,a)==null}if(Bt){dt?t.location.replace(Ve):t.location.assign(Ve);return}}H=null;let He=dt===!0||ee.response.headers.has("X-Remix-Replace")?"REPLACE":"PUSH",{formMethod:ht,formAction:wt,formEncType:ei}=k.navigation;!Le&&!je&&ht&&wt&&ei&&(Le=EL(k.navigation));let Li=Le||je;if(rz.has(ee.response.status)&&Li&&Co(Li.formMethod))await $e(He,xe,{submission:{...Li,formAction:Ve},preventScrollReset:Je||B,enableViewTransition:ge?V:void 0});else{let Bt=Rx(xe,Le);await $e(He,xe,{overrideNavigation:Bt,fetcherSubmission:je,preventScrollReset:Je||B,enableViewTransition:ge?V:void 0})}}async function Ri(X,ee,ge,Le,je,Je){let dt,Ve={};try{dt=await gz(l,X,ee,ge,Le,je,Je,n,s)}catch(xe){return Le.forEach(He=>{Ve[He.route.id]={type:"error",error:xe}}),Ve}for(let[xe,He]of Object.entries(dt))if(Sz(He)){let ht=He.result;Ve[xe]={type:"redirect",response:vz(ht,ge,xe,je,a)}}else Ve[xe]=await mz(He);return Ve}async function Ki(X,ee,ge,Le,je){let Je=Ri("loader",X,je,ge,ee,null),dt=Promise.all(Le.map(async He=>{if(He.matches&&He.match&&He.controller){let wt=(await Ri("loader",X,Td(e.history,He.path,He.controller.signal),[He.match],He.matches,He.key))[He.match.route.id];return{[He.key]:wt}}else return Promise.resolve({[He.key]:{type:"error",error:Br(404,{pathname:He.path})}})})),Ve=await Je,xe=(await dt).reduce((He,ht)=>Object.assign(He,ht),{});return{loaderResults:Ve,fetcherResults:xe}}function Qs(){Ce=!0,q.forEach((X,ee)=>{Re.has(ee)&&be.add(ee),Gi(ee)})}function Yi(X,ee,ge={}){k.fetchers.set(X,ee),ne({fetchers:new Map(k.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function ut(X,ee,ge,Le={}){let je=Ju(k.matches,ee);vi(X),ne({errors:{[je.route.id]:ge},fetchers:new Map(k.fetchers)},{flushSync:(Le&&Le.flushSync)===!0})}function ni(X){return W.set(X,(W.get(X)||0)+1),Q.has(X)&&Q.delete(X),k.fetchers.get(X)||oz}function vi(X){let ee=k.fetchers.get(X);Re.has(X)&&!(ee&&ee.state==="loading"&&K.has(X))&&Gi(X),q.delete(X),K.delete(X),pe.delete(X),Q.delete(X),be.delete(X),k.fetchers.delete(X)}function zl(X){let ee=(W.get(X)||0)-1;ee<=0?(W.delete(X),Q.add(X)):W.set(X,ee),ne({fetchers:new Map(k.fetchers)})}function Gi(X){let ee=Re.get(X);ee&&(ee.abort(),Re.delete(X))}function Dn(X){for(let ee of X){let ge=ni(ee),Le=Dc(ge.data);k.fetchers.set(ee,Le)}}function jh(){let X=[],ee=!1;for(let ge of pe){let Le=k.fetchers.get(ge);Ot(Le,`Expected fetcher: ${ge}`),Le.state==="loading"&&(pe.delete(ge),X.push(ge),ee=!0)}return Dn(X),ee}function Hl(X){let ee=[];for(let[ge,Le]of K)if(Le<X){let je=k.fetchers.get(ge);Ot(je,`Expected fetcher: ${ge}`),je.state==="loading"&&(Gi(ge),K.delete(ge),ee.push(ge))}return Dn(ee),ee.length>0}function Vl(X,ee){let ge=k.blockers.get(X)||Ig;return ve.get(X)!==ee&&ve.set(X,ee),ge}function du(X){k.blockers.delete(X),ve.delete(X)}function Go(X,ee){let ge=k.blockers.get(X)||Ig;Ot(ge.state==="unblocked"&&ee.state==="blocked"||ge.state==="blocked"&&ee.state==="blocked"||ge.state==="blocked"&&ee.state==="proceeding"||ge.state==="blocked"&&ee.state==="unblocked"||ge.state==="proceeding"&&ee.state==="unblocked",`Invalid blocker state transition: ${ge.state} -> ${ee.state}`);let Le=new Map(k.blockers);Le.set(X,ee),ne({blockers:Le})}function Cr({currentLocation:X,nextLocation:ee,historyAction:ge}){if(ve.size===0)return;ve.size>1&&xs(!1,"A router only supports one blocker at a time");let Le=Array.from(ve.entries()),[je,Je]=Le[Le.length-1],dt=k.blockers.get(je);if(!(dt&&dt.state==="proceeding")&&Je({currentLocation:X,nextLocation:ee,historyAction:ge}))return je}function La(X){let ee=Br(404,{pathname:X}),ge=o||r,{matches:Le,route:je}=RL(ge);return{notFoundMatches:Le,route:je,error:ee}}function pu(X,ee,ge){if(y=X,x=ee,C=ge||null,!M&&k.navigation===Mx){M=!0;let Le=Sr(k.location,k.matches);Le!=null&&ne({restoreScrollPosition:Le})}return()=>{y=null,x=null,C=null}}function Ta(X,ee){return C&&C(X,ee.map(Le=>_G(Le,k.loaderData)))||X.key}function io(X,ee){if(y&&x){let ge=Ta(X,ee);y[ge]=x()}}function Sr(X,ee){if(y){let ge=Ta(X,ee),Le=y[ge];if(typeof Le=="number")return Le}return null}function Aa(X,ee,ge){if(c)if(X){if(Object.keys(X[0].params).length>0)return{active:!0,matches:uy(ee,ge,a,!0)}}else return{active:!0,matches:uy(ee,ge,a,!0)||[]};return{active:!1,matches:null}}async function Pa(X,ee,ge){if(!c)return{type:"success",matches:X};let Le=X;for(;;){let je=o==null,Je=o||r,dt=n;try{await c({path:ee,matches:Le,patch:(He,ht)=>{ge.aborted||CL(He,ht,Je,dt,s)}})}catch(He){return{type:"error",error:He,partialMatches:Le}}finally{je&&!ge.aborted&&(r=[...r])}if(ge.aborted)return{type:"aborted"};let Ve=Ac(Je,ee,a);if(Ve)return{type:"success",matches:Ve};let xe=uy(Je,ee,a,!0);if(!xe||Le.length===xe.length&&Le.every((He,ht)=>He.route.id===xe[ht].route.id))return{type:"success",matches:null};Le=xe}}function Uh(X){n={},o=Ty(X,s,void 0,n)}function Kh(X,ee){let ge=o==null;CL(X,ee,o||r,n,s),ge&&(r=[...r],ne({}))}return P={get basename(){return a},get future(){return p},get state(){return k},get routes(){return r},get window(){return t},initialize:ue,subscribe:me,enableScrollRestoration:pu,navigate:ze,fetch:Rt,revalidate:Be,createHref:X=>e.history.createHref(X),encodeLocation:X=>e.history.encodeLocation(X),getFetcher:ni,deleteFetcher:zl,dispose:Me,getBlocker:Vl,deleteBlocker:du,patchRoutes:Kh,_internalFetchControllers:Re,_internalSetRoutes:Uh},P}function cz(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function Tb(e,t,i,s,n,r){let o,a;if(n){o=[];for(let c of t)if(o.push(c),c.route.id===n){a=c;break}}else o=t,a=t[t.length-1];let l=KM(s||".",UM(o),Po(e.pathname,i)||e.pathname,r==="path");if(s==null&&(l.search=e.search,l.hash=e.hash),(s==null||s===""||s===".")&&a){let c=$M(l.search);if(a.route.index&&!c)l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index";else if(!a.route.index&&c){let p=new URLSearchParams(l.search),g=p.getAll("index");p.delete("index"),g.filter(y=>y).forEach(y=>p.append("index",y));let f=p.toString();l.search=f?`?${f}`:""}}return i!=="/"&&(l.pathname=l.pathname==="/"?i:aa([i,l.pathname])),Yc(l)}function fL(e,t,i){if(!i||!cz(i))return{path:t};if(i.formMethod&&!wz(i.formMethod))return{path:t,error:Br(405,{method:i.formMethod})};let s=()=>({path:t,error:Br(400,{type:"invalid-body"})}),r=(i.formMethod||"get").toUpperCase(),o=dP(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!Co(r))return s();let g=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((f,[y,C])=>`${f}${y}=${C}
`,""):String(i.body);return{path:t,submission:{formMethod:r,formAction:o,formEncType:i.formEncType,formData:void 0,json:void 0,text:g}}}else if(i.formEncType==="application/json"){if(!Co(r))return s();try{let g=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:r,formAction:o,formEncType:i.formEncType,formData:void 0,json:g,text:void 0}}}catch{return s()}}}Ot(typeof FormData=="function","FormData is not available in this environment");let a,l;if(i.formData)a=Pb(i.formData),l=i.formData;else if(i.body instanceof FormData)a=Pb(i.body),l=i.body;else if(i.body instanceof URLSearchParams)a=i.body,l=wL(a);else if(i.body==null)a=new URLSearchParams,l=new FormData;else try{a=new URLSearchParams(i.body),l=wL(a)}catch{return s()}let c={formMethod:r,formAction:o,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:l,json:void 0,text:void 0};if(Co(c.formMethod))return{path:t,submission:c};let p=xl(t);return e&&p.search&&$M(p.search)&&a.append("index",""),p.search=`?${a}`,{path:Yc(p),submission:c}}function mL(e,t,i=!1){let s=e.findIndex(n=>n.route.id===t);return s>=0?e.slice(0,i?s+1:s):e}function vL(e,t,i,s,n,r,o,a,l,c,p,g,f,y){let C=y?cr(y[1])?y[1].error:y[1].data:void 0,x=e.createURL(t.location),M=e.createURL(n),b=i;r&&t.errors?b=mL(i,Object.keys(t.errors)[0],!0):y&&cr(y[1])&&(b=mL(i,y[0]));let R=y?y[1].statusCode:void 0,I=R&&R>=400,P=b.filter((_,B)=>{let{route:H}=_;if(H.lazy)return!0;if(H.loader==null)return!1;if(r)return Ab(H,t.loaderData,t.errors);if(uz(t.loaderData,t.matches[B],_))return!0;let V=t.matches[B],U=_;return yL(_,{currentUrl:x,currentParams:V.params,nextUrl:M,nextParams:U.params,...s,actionResult:C,actionStatus:R,defaultShouldRevalidate:I?!1:o||x.pathname+x.search===M.pathname+M.search||x.search!==M.search||hz(V,U)})}),k=[];return c.forEach((_,B)=>{if(r||!i.some(te=>te.route.id===_.routeId)||l.has(B))return;let H=Ac(g,_.path,f);if(!H){k.push({key:B,routeId:_.routeId,path:_.path,matches:null,match:null,controller:null});return}let V=t.fetchers.get(B),U=Wg(H,_.path),$=!1;p.has(B)?$=!1:a.has(B)?(a.delete(B),$=!0):V&&V.state!=="idle"&&V.data===void 0?$=o:$=yL(U,{currentUrl:x,currentParams:t.matches[t.matches.length-1].params,nextUrl:M,nextParams:i[i.length-1].params,...s,actionResult:C,actionStatus:R,defaultShouldRevalidate:I?!1:o}),$&&k.push({key:B,routeId:_.routeId,path:_.path,matches:H,match:U,controller:new AbortController})}),[P,k]}function Ab(e,t,i){if(e.lazy)return!0;if(!e.loader)return!1;let s=t!=null&&t[e.id]!==void 0,n=i!=null&&i[e.id]!==void 0;return!s&&n?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!s&&!n}function uz(e,t,i){let s=!t||i.route.id!==t.route.id,n=!e.hasOwnProperty(i.route.id);return s||n}function hz(e,t){let i=e.route.path;return e.pathname!==t.pathname||i!=null&&i.endsWith("*")&&e.params["*"]!==t.params["*"]}function yL(e,t){if(e.route.shouldRevalidate){let i=e.route.shouldRevalidate(t);if(typeof i=="boolean")return i}return t.defaultShouldRevalidate}function CL(e,t,i,s,n){let r;if(e){let l=s[e];Ot(l,`No route found to patch children into: routeId = ${e}`),l.children||(l.children=[]),r=l.children}else r=i;let o=t.filter(l=>!r.some(c=>hP(l,c))),a=Ty(o,n,[e||"_","patch",String((r==null?void 0:r.length)||"0")],s);r.push(...a)}function hP(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((i,s)=>{var n;return(n=t.children)==null?void 0:n.some(r=>hP(i,r))}):!1}async function dz(e,t,i){if(!e.lazy)return;let s=await e.lazy();if(!e.lazy)return;let n=i[e.id];Ot(n,"No route found in manifest");let r={};for(let o in s){let l=n[o]!==void 0&&o!=="hasErrorBoundary";xs(!l,`Route "${n.id}" has a static property "${o}" defined but its lazy function is also returning a value for this property. The lazy route property "${o}" will be ignored.`),!l&&!NG.has(o)&&(r[o]=s[o])}Object.assign(n,r),Object.assign(n,{...t(n),lazy:void 0})}async function pz({matches:e}){let t=e.filter(s=>s.shouldLoad);return(await Promise.all(t.map(s=>s.resolve()))).reduce((s,n,r)=>Object.assign(s,{[t[r].route.id]:n}),{})}async function gz(e,t,i,s,n,r,o,a,l,c){let p=r.map(y=>y.route.lazy?dz(y.route,l,a):void 0),g=r.map((y,C)=>{let x=p[C],M=n.some(R=>R.route.id===y.route.id);return{...y,shouldLoad:M,resolve:async R=>(R&&s.method==="GET"&&(y.route.lazy||y.route.loader)&&(M=!0),M?fz(t,s,y,x,R,c):Promise.resolve({type:"data",result:void 0}))}}),f=await e({matches:g,request:s,params:r[0].params,fetcherKey:o,context:c});try{await Promise.all(p)}catch{}return f}async function fz(e,t,i,s,n,r){let o,a,l=c=>{let p,g=new Promise((C,x)=>p=x);a=()=>p(),t.signal.addEventListener("abort",a);let f=C=>typeof c!="function"?Promise.reject(new Error(`You cannot call the handler for a route which defines a boolean "${e}" [routeId: ${i.route.id}]`)):c({request:t,params:i.params,context:r},...C!==void 0?[C]:[]),y=(async()=>{try{return{type:"data",result:await(n?n(x=>f(x)):f())}}catch(C){return{type:"error",result:C}}})();return Promise.race([y,g])};try{let c=i.route[e];if(s)if(c){let p,[g]=await Promise.all([l(c).catch(f=>{p=f}),s]);if(p!==void 0)throw p;o=g}else if(await s,c=i.route[e],c)o=await l(c);else if(e==="action"){let p=new URL(t.url),g=p.pathname+p.search;throw Br(405,{method:t.method,pathname:g,routeId:i.route.id})}else return{type:"data",result:void 0};else if(c)o=await l(c);else{let p=new URL(t.url),g=p.pathname+p.search;throw Br(404,{pathname:g})}}catch(c){return{type:"error",result:c}}finally{a&&t.signal.removeEventListener("abort",a)}return o}async function mz(e){var s,n,r,o;let{result:t,type:i}=e;if(pP(t)){let a;try{let l=t.headers.get("Content-Type");l&&/\bapplication\/json\b/.test(l)?t.body==null?a=null:a=await t.json():a=await t.text()}catch(l){return{type:"error",error:l}}return i==="error"?{type:"error",error:new Py(t.status,t.statusText,a),statusCode:t.status,headers:t.headers}:{type:"data",data:a,statusCode:t.status,headers:t.headers}}if(i==="error"){if(DL(t)){if(t.data instanceof Error)return{type:"error",error:t.data,statusCode:(s=t.init)==null?void 0:s.status};t=new Py(((n=t.init)==null?void 0:n.status)||500,void 0,t.data)}return{type:"error",error:t,statusCode:wC(t)?t.status:void 0}}return DL(t)?{type:"data",data:t.data,statusCode:(r=t.init)==null?void 0:r.status,headers:(o=t.init)!=null&&o.headers?new Headers(t.init.headers):void 0}:{type:"data",data:t}}function vz(e,t,i,s,n){let r=e.headers.get("Location");if(Ot(r,"Redirects returned/thrown from loaders/actions must have a Location header"),!YM.test(r)){let o=s.slice(0,s.findIndex(a=>a.route.id===i)+1);r=Tb(new URL(t.url),o,n,r),e.headers.set("Location",r)}return e}function SL(e,t,i){if(YM.test(e)){let s=e,n=s.startsWith("//")?new URL(t.protocol+s):new URL(s),r=Po(n.pathname,i)!=null;if(n.origin===t.origin&&r)return n.pathname+n.search+n.hash}return e}function Td(e,t,i,s){let n=e.createURL(dP(t)).toString(),r={signal:i};if(s&&Co(s.formMethod)){let{formMethod:o,formEncType:a}=s;r.method=o.toUpperCase(),a==="application/json"?(r.headers=new Headers({"Content-Type":a}),r.body=JSON.stringify(s.json)):a==="text/plain"?r.body=s.text:a==="application/x-www-form-urlencoded"&&s.formData?r.body=Pb(s.formData):r.body=s.formData}return new Request(n,r)}function Pb(e){let t=new URLSearchParams;for(let[i,s]of e.entries())t.append(i,typeof s=="string"?s:s.name);return t}function wL(e){let t=new FormData;for(let[i,s]of e.entries())t.append(i,s);return t}function yz(e,t,i,s=!1,n=!1){let r={},o=null,a,l=!1,c={},p=i&&cr(i[1])?i[1].error:void 0;return e.forEach(g=>{if(!(g.route.id in t))return;let f=g.route.id,y=t[f];if(Ot(!nh(y),"Cannot handle redirect results in processLoaderData"),cr(y)){let C=y.error;if(p!==void 0&&(C=p,p=void 0),o=o||{},n)o[f]=C;else{let x=Ju(e,f);o[x.route.id]==null&&(o[x.route.id]=C)}s||(r[f]=uP),l||(l=!0,a=wC(y.error)?y.error.status:500),y.headers&&(c[f]=y.headers)}else r[f]=y.data,y.statusCode&&y.statusCode!==200&&!l&&(a=y.statusCode),y.headers&&(c[f]=y.headers)}),p!==void 0&&i&&(o={[i[0]]:p},r[i[0]]=void 0),{loaderData:r,errors:o,statusCode:a||200,loaderHeaders:c}}function xL(e,t,i,s,n,r){let{loaderData:o,errors:a}=yz(t,i,s);return n.forEach(l=>{let{key:c,match:p,controller:g}=l,f=r[c];if(Ot(f,"Did not find corresponding fetcher result"),!(g&&g.signal.aborted))if(cr(f)){let y=Ju(e.matches,p==null?void 0:p.route.id);a&&a[y.route.id]||(a={...a,[y.route.id]:f.error}),e.fetchers.delete(c)}else if(nh(f))Ot(!1,"Unhandled fetcher revalidation redirect");else{let y=Dc(f.data);e.fetchers.set(c,y)}}),{loaderData:o,errors:a}}function bL(e,t,i,s){let n=Object.entries(t).filter(([,r])=>r!==uP).reduce((r,[o,a])=>(r[o]=a,r),{});for(let r of i){let o=r.route.id;if(!t.hasOwnProperty(o)&&e.hasOwnProperty(o)&&r.route.loader&&(n[o]=e[o]),s&&s.hasOwnProperty(o))break}return n}function ML(e){return e?cr(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function Ju(e,t){return(t?e.slice(0,e.findIndex(s=>s.route.id===t)+1):[...e]).reverse().find(s=>s.route.hasErrorBoundary===!0)||e[0]}function RL(e){let t=e.length===1?e[0]:e.find(i=>i.index||!i.path||i.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Br(e,{pathname:t,routeId:i,method:s,type:n,message:r}={}){let o="Unknown Server Error",a="Unknown @remix-run/router error";return e===400?(o="Bad Request",s&&t&&i?a=`You made a ${s} request to "${t}" but did not provide a \`loader\` for route "${i}", so there is no way to handle the request.`:n==="invalid-body"&&(a="Unable to encode submission body")):e===403?(o="Forbidden",a=`Route "${i}" does not match URL "${t}"`):e===404?(o="Not Found",a=`No route matches URL "${t}"`):e===405&&(o="Method Not Allowed",s&&t&&i?a=`You made a ${s.toUpperCase()} request to "${t}" but did not provide an \`action\` for route "${i}", so there is no way to handle the request.`:s&&(a=`Invalid request method "${s.toUpperCase()}"`)),new Py(e||500,o,new Error(a),!0)}function Bv(e){let t=Object.entries(e);for(let i=t.length-1;i>=0;i--){let[s,n]=t[i];if(nh(n))return{key:s,result:n}}}function dP(e){let t=typeof e=="string"?xl(e):e;return Yc({...t,hash:""})}function Cz(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Sz(e){return pP(e.result)&&nz.has(e.result.status)}function cr(e){return e.type==="error"}function nh(e){return(e&&e.type)==="redirect"}function DL(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function pP(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function wz(e){return sz.has(e.toUpperCase())}function Co(e){return tz.has(e.toUpperCase())}function $M(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Wg(e,t){let i=typeof t=="string"?xl(t).search:t.search;if(e[e.length-1].route.index&&$M(i||""))return e[e.length-1];let s=aP(e);return s[s.length-1]}function EL(e){let{formMethod:t,formAction:i,formEncType:s,text:n,formData:r,json:o}=e;if(!(!t||!i||!s)){if(n!=null)return{formMethod:t,formAction:i,formEncType:s,formData:void 0,json:void 0,text:n};if(r!=null)return{formMethod:t,formAction:i,formEncType:s,formData:r,json:void 0,text:void 0};if(o!==void 0)return{formMethod:t,formAction:i,formEncType:s,formData:void 0,json:o,text:void 0}}}function Rx(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function xz(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function Lg(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function bz(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Dc(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function Mz(e,t){try{let i=e.sessionStorage.getItem(cP);if(i){let s=JSON.parse(i);for(let[n,r]of Object.entries(s||{}))r&&Array.isArray(r)&&t.set(n,new Set(r||[]))}}catch{}}function Rz(e,t){if(t.size>0){let i={};for(let[s,n]of t)i[s]=[...n];try{e.sessionStorage.setItem(cP,JSON.stringify(i))}catch(s){xs(!1,`Failed to save applied view transitions in sessionStorage (${s}).`)}}}function Dz(){let e,t,i=new Promise((s,n)=>{e=async r=>{s(r);try{await i}catch{}},t=async r=>{n(r);try{await i}catch{}}});return{promise:i,resolve:e,reject:t}}var Rh=T.createContext(null);Rh.displayName="DataRouter";var qf=T.createContext(null);qf.displayName="DataRouterState";var ZM=T.createContext({isTransitioning:!1});ZM.displayName="ViewTransition";var gP=T.createContext(new Map);gP.displayName="Fetchers";var Ez=T.createContext(null);Ez.displayName="Await";var ma=T.createContext(null);ma.displayName="Navigation";var xC=T.createContext(null);xC.displayName="Location";var va=T.createContext({outlet:null,matches:[],isDataRoute:!1});va.displayName="Route";var XM=T.createContext(null);XM.displayName="RouteError";function Iz(e,{relative:t}={}){Ot(Jf(),"useHref() may be used only in the context of a <Router> component.");let{basename:i,navigator:s}=T.useContext(ma),{hash:n,pathname:r,search:o}=em(e,{relative:t}),a=r;return i!=="/"&&(a=r==="/"?i:aa([i,r])),s.createHref({pathname:a,search:o,hash:n})}function Jf(){return T.useContext(xC)!=null}function Dh(){return Ot(Jf(),"useLocation() may be used only in the context of a <Router> component."),T.useContext(xC).location}var fP="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function mP(e){T.useContext(ma).static||T.useLayoutEffect(e)}function Lz(){let{isDataRoute:e}=T.useContext(va);return e?jz():Tz()}function Tz(){Ot(Jf(),"useNavigate() may be used only in the context of a <Router> component.");let e=T.useContext(Rh),{basename:t,navigator:i}=T.useContext(ma),{matches:s}=T.useContext(va),{pathname:n}=Dh(),r=JSON.stringify(UM(s)),o=T.useRef(!1);return mP(()=>{o.current=!0}),T.useCallback((l,c={})=>{if(xs(o.current,fP),!o.current)return;if(typeof l=="number"){i.go(l);return}let p=KM(l,JSON.parse(r),n,c.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:aa([t,p.pathname])),(c.replace?i.replace:i.push)(p,c.state,c)},[t,i,r,n,e])}var Az=T.createContext(null);function Pz(e){let t=T.useContext(va).outlet;return t&&T.createElement(Az.Provider,{value:e},t)}function em(e,{relative:t}={}){let{matches:i}=T.useContext(va),{pathname:s}=Dh(),n=JSON.stringify(UM(i));return T.useMemo(()=>KM(e,JSON.parse(n),s,t==="path"),[e,n,s,t])}function Fz(e,t,i,s){Ot(Jf(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:n}=T.useContext(ma),{matches:r}=T.useContext(va),o=r[r.length-1],a=o?o.params:{},l=o?o.pathname:"/",c=o?o.pathnameBase:"/",p=o&&o.route;{let b=p&&p.path||"";vP(l,!p||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${l}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let g=Dh(),f;f=g;let y=f.pathname||"/",C=y;if(c!=="/"){let b=c.replace(/^\//,"").split("/");C="/"+y.replace(/^\//,"").split("/").slice(b.length).join("/")}let x=Ac(e,{pathname:C});return xs(p||x!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),xs(x==null||x[x.length-1].route.element!==void 0||x[x.length-1].route.Component!==void 0||x[x.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`),Bz(x&&x.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:aa([c,n.encodeLocation?n.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?c:aa([c,n.encodeLocation?n.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),r,i,s)}function kz(){let e=Wz(),t=wC(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),i=e instanceof Error?e.stack:null,s="rgba(200,200,200, 0.5)",n={padding:"0.5rem",backgroundColor:s},r={padding:"2px 4px",backgroundColor:s},o=null;return console.error("Error handled by React Router default ErrorBoundary:",e),o=T.createElement(T.Fragment,null,T.createElement("p",null,"💿 Hey developer 👋"),T.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",T.createElement("code",{style:r},"ErrorBoundary")," or"," ",T.createElement("code",{style:r},"errorElement")," prop on your route.")),T.createElement(T.Fragment,null,T.createElement("h2",null,"Unexpected Application Error!"),T.createElement("h3",{style:{fontStyle:"italic"}},t),i?T.createElement("pre",{style:n},i):null,o)}var Nz=T.createElement(kz,null),Oz=class extends T.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?T.createElement(va.Provider,{value:this.props.routeContext},T.createElement(XM.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function _z({routeContext:e,match:t,children:i}){let s=T.useContext(Rh);return s&&s.static&&s.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=t.route.id),T.createElement(va.Provider,{value:e},i)}function Bz(e,t=[],i=null,s=null){if(e==null){if(!i)return null;if(i.errors)e=i.matches;else if(t.length===0&&!i.initialized&&i.matches.length>0)e=i.matches;else return null}let n=e,r=i==null?void 0:i.errors;if(r!=null){let l=n.findIndex(c=>c.route.id&&(r==null?void 0:r[c.route.id])!==void 0);Ot(l>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(r).join(",")}`),n=n.slice(0,Math.min(n.length,l+1))}let o=!1,a=-1;if(i)for(let l=0;l<n.length;l++){let c=n[l];if((c.route.HydrateFallback||c.route.hydrateFallbackElement)&&(a=l),c.route.id){let{loaderData:p,errors:g}=i,f=c.route.loader&&!p.hasOwnProperty(c.route.id)&&(!g||g[c.route.id]===void 0);if(c.route.lazy||f){o=!0,a>=0?n=n.slice(0,a+1):n=[n[0]];break}}}return n.reduceRight((l,c,p)=>{let g,f=!1,y=null,C=null;i&&(g=r&&c.route.id?r[c.route.id]:void 0,y=c.route.errorElement||Nz,o&&(a<0&&p===0?(vP("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,C=null):a===p&&(f=!0,C=c.route.hydrateFallbackElement||null)));let x=t.concat(n.slice(0,p+1)),M=()=>{let b;return g?b=y:f?b=C:c.route.Component?b=T.createElement(c.route.Component,null):c.route.element?b=c.route.element:b=l,T.createElement(_z,{match:c,routeContext:{outlet:l,matches:x,isDataRoute:i!=null},children:b})};return i&&(c.route.ErrorBoundary||c.route.errorElement||p===0)?T.createElement(Oz,{location:i.location,revalidation:i.revalidation,component:y,error:g,children:M(),routeContext:{outlet:null,matches:x,isDataRoute:!0}}):M()},null)}function QM(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Gz(e){let t=T.useContext(Rh);return Ot(t,QM(e)),t}function zz(e){let t=T.useContext(qf);return Ot(t,QM(e)),t}function Hz(e){let t=T.useContext(va);return Ot(t,QM(e)),t}function qM(e){let t=Hz(e),i=t.matches[t.matches.length-1];return Ot(i.route.id,`${e} can only be used on routes that contain a unique "id"`),i.route.id}function Vz(){return qM("useRouteId")}function Wz(){var s;let e=T.useContext(XM),t=zz("useRouteError"),i=qM("useRouteError");return e!==void 0?e:(s=t.errors)==null?void 0:s[i]}function jz(){let{router:e}=Gz("useNavigate"),t=qM("useNavigate"),i=T.useRef(!1);return mP(()=>{i.current=!0}),T.useCallback(async(n,r={})=>{xs(i.current,fP),i.current&&(typeof n=="number"?e.navigate(n):await e.navigate(n,{fromRouteId:t,...r}))},[e,t])}var IL={};function vP(e,t,i){!t&&!IL[e]&&(IL[e]=!0,xs(!1,i))}var LL={};function TL(e,t){!e&&!LL[t]&&(LL[t]=!0,console.warn(t))}function Uz(e){let t={hasErrorBoundary:e.hasErrorBoundary||e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&(e.element&&xs(!1,"You should not include both `Component` and `element` on your route - `Component` will be used."),Object.assign(t,{element:T.createElement(e.Component),Component:void 0})),e.HydrateFallback&&(e.hydrateFallbackElement&&xs(!1,"You should not include both `HydrateFallback` and `hydrateFallbackElement` on your route - `HydrateFallback` will be used."),Object.assign(t,{hydrateFallbackElement:T.createElement(e.HydrateFallback),HydrateFallback:void 0})),e.ErrorBoundary&&(e.errorElement&&xs(!1,"You should not include both `ErrorBoundary` and `errorElement` on your route - `ErrorBoundary` will be used."),Object.assign(t,{errorElement:T.createElement(e.ErrorBoundary),ErrorBoundary:void 0})),t}var Kz=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function Yz({router:e,flushSync:t}){let[i,s]=T.useState(e.state),[n,r]=T.useState(),[o,a]=T.useState({isTransitioning:!1}),[l,c]=T.useState(),[p,g]=T.useState(),[f,y]=T.useState(),C=T.useRef(new Map),x=T.useCallback((I,{deletedFetchers:P,flushSync:k,viewTransitionOpts:_})=>{I.fetchers.forEach((H,V)=>{H.data!==void 0&&C.current.set(V,H.data)}),P.forEach(H=>C.current.delete(H)),TL(k===!1||t!=null,'You provided the `flushSync` option to a router update, but you are not using the `<RouterProvider>` from `react-router/dom` so `ReactDOM.flushSync()` is unavailable.  Please update your app to `import { RouterProvider } from "react-router/dom"` and ensure you have `react-dom` installed as a dependency to use the `flushSync` option.');let B=e.window!=null&&e.window.document!=null&&typeof e.window.document.startViewTransition=="function";if(TL(_==null||B,"You provided the `viewTransition` option to a router update, but you do not appear to be running in a DOM environment as `window.startViewTransition` is not available."),!_||!B){t&&k?t(()=>s(I)):T.startTransition(()=>s(I));return}if(t&&k){t(()=>{p&&(l&&l.resolve(),p.skipTransition()),a({isTransitioning:!0,flushSync:!0,currentLocation:_.currentLocation,nextLocation:_.nextLocation})});let H=e.window.document.startViewTransition(()=>{t(()=>s(I))});H.finished.finally(()=>{t(()=>{c(void 0),g(void 0),r(void 0),a({isTransitioning:!1})})}),t(()=>g(H));return}p?(l&&l.resolve(),p.skipTransition(),y({state:I,currentLocation:_.currentLocation,nextLocation:_.nextLocation})):(r(I),a({isTransitioning:!0,flushSync:!1,currentLocation:_.currentLocation,nextLocation:_.nextLocation}))},[e.window,t,p,l]);T.useLayoutEffect(()=>e.subscribe(x),[e,x]),T.useEffect(()=>{o.isTransitioning&&!o.flushSync&&c(new Kz)},[o]),T.useEffect(()=>{if(l&&n&&e.window){let I=n,P=l.promise,k=e.window.document.startViewTransition(async()=>{T.startTransition(()=>s(I)),await P});k.finished.finally(()=>{c(void 0),g(void 0),r(void 0),a({isTransitioning:!1})}),g(k)}},[n,l,e.window]),T.useEffect(()=>{l&&n&&i.location.key===n.location.key&&l.resolve()},[l,p,i.location,n]),T.useEffect(()=>{!o.isTransitioning&&f&&(r(f.state),a({isTransitioning:!0,flushSync:!1,currentLocation:f.currentLocation,nextLocation:f.nextLocation}),y(void 0))},[o.isTransitioning,f]);let M=T.useMemo(()=>({createHref:e.createHref,encodeLocation:e.encodeLocation,go:I=>e.navigate(I),push:(I,P,k)=>e.navigate(I,{state:P,preventScrollReset:k==null?void 0:k.preventScrollReset}),replace:(I,P,k)=>e.navigate(I,{replace:!0,state:P,preventScrollReset:k==null?void 0:k.preventScrollReset})}),[e]),b=e.basename||"/",R=T.useMemo(()=>({router:e,navigator:M,static:!1,basename:b}),[e,M,b]);return T.createElement(T.Fragment,null,T.createElement(Rh.Provider,{value:R},T.createElement(qf.Provider,{value:i},T.createElement(gP.Provider,{value:C.current},T.createElement(ZM.Provider,{value:o},T.createElement(Qz,{basename:b,location:i.location,navigationType:i.historyAction,navigator:M},T.createElement($z,{routes:e.routes,future:e.future,state:i})))))),null)}var $z=T.memo(Zz);function Zz({routes:e,future:t,state:i}){return Fz(e,void 0,i,t)}function Xz(e){return Pz(e.context)}function Qz({basename:e="/",children:t=null,location:i,navigationType:s="POP",navigator:n,static:r=!1}){Ot(!Jf(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=e.replace(/^\/*/,"/"),a=T.useMemo(()=>({basename:o,navigator:n,static:r,future:{}}),[o,n,r]);typeof i=="string"&&(i=xl(i));let{pathname:l="/",search:c="",hash:p="",state:g=null,key:f="default"}=i,y=T.useMemo(()=>{let C=Po(l,o);return C==null?null:{location:{pathname:C,search:c,hash:p,state:g,key:f},navigationType:s}},[o,l,c,p,g,f,s]);return xs(y!=null,`<Router basename="${o}"> is not able to match the URL "${l}${c}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:T.createElement(ma.Provider,{value:a},T.createElement(xC.Provider,{children:t,value:y}))}var hy="get",dy="application/x-www-form-urlencoded";function bC(e){return e!=null&&typeof e.tagName=="string"}function qz(e){return bC(e)&&e.tagName.toLowerCase()==="button"}function Jz(e){return bC(e)&&e.tagName.toLowerCase()==="form"}function eH(e){return bC(e)&&e.tagName.toLowerCase()==="input"}function tH(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function iH(e,t){return e.button===0&&(!t||t==="_self")&&!tH(e)}var Gv=null;function sH(){if(Gv===null)try{new FormData(document.createElement("form"),0),Gv=!1}catch{Gv=!0}return Gv}var nH=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Dx(e){return e!=null&&!nH.has(e)?(xs(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${dy}"`),null):e}function rH(e,t){let i,s,n,r,o;if(Jz(e)){let a=e.getAttribute("action");s=a?Po(a,t):null,i=e.getAttribute("method")||hy,n=Dx(e.getAttribute("enctype"))||dy,r=new FormData(e)}else if(qz(e)||eH(e)&&(e.type==="submit"||e.type==="image")){let a=e.form;if(a==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=e.getAttribute("formaction")||a.getAttribute("action");if(s=l?Po(l,t):null,i=e.getAttribute("formmethod")||a.getAttribute("method")||hy,n=Dx(e.getAttribute("formenctype"))||Dx(a.getAttribute("enctype"))||dy,r=new FormData(a,e),!sH()){let{name:c,type:p,value:g}=e;if(p==="image"){let f=c?`${c}.`:"";r.append(`${f}x`,"0"),r.append(`${f}y`,"0")}else c&&r.append(c,g)}}else{if(bC(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');i=hy,s=null,n=dy,o=e}return r&&n==="text/plain"&&(o=r,r=void 0),{action:s,method:i.toLowerCase(),encType:n,formData:r,body:o}}function JM(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}async function oH(e,t){if(e.id in t)return t[e.id];try{let i=await import(e.module);return t[e.id]=i,i}catch(i){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(i),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function aH(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function lH(e,t,i){let s=await Promise.all(e.map(async n=>{let r=t.routes[n.route.id];if(r){let o=await oH(r,i);return o.links?o.links():[]}return[]}));return dH(s.flat(1).filter(aH).filter(n=>n.rel==="stylesheet"||n.rel==="preload").map(n=>n.rel==="stylesheet"?{...n,rel:"prefetch",as:"style"}:{...n,rel:"prefetch"}))}function AL(e,t,i,s,n,r){let o=(l,c)=>i[c]?l.route.id!==i[c].route.id:!0,a=(l,c)=>{var p;return i[c].pathname!==l.pathname||((p=i[c].route.path)==null?void 0:p.endsWith("*"))&&i[c].params["*"]!==l.params["*"]};return r==="assets"?t.filter((l,c)=>o(l,c)||a(l,c)):r==="data"?t.filter((l,c)=>{var g;let p=s.routes[l.route.id];if(!p||!p.hasLoader)return!1;if(o(l,c)||a(l,c))return!0;if(l.route.shouldRevalidate){let f=l.route.shouldRevalidate({currentUrl:new URL(n.pathname+n.search+n.hash,window.origin),currentParams:((g=i[0])==null?void 0:g.params)||{},nextUrl:new URL(e,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function cH(e,t){return uH(e.map(i=>{let s=t.routes[i.route.id];if(!s)return[];let n=[s.module];return s.imports&&(n=n.concat(s.imports)),n}).flat(1))}function uH(e){return[...new Set(e)]}function hH(e){let t={},i=Object.keys(e).sort();for(let s of i)t[s]=e[s];return t}function dH(e,t){let i=new Set;return new Set(t),e.reduce((s,n)=>{let r=JSON.stringify(hH(n));return i.has(r)||(i.add(r),s.push({key:r,link:n})),s},[])}function pH(e){let t=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return t.pathname==="/"?t.pathname="_root.data":t.pathname=`${t.pathname.replace(/\/$/,"")}.data`,t}function gH(){let e=T.useContext(Rh);return JM(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function fH(){let e=T.useContext(qf);return JM(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var e0=T.createContext(void 0);e0.displayName="FrameworkContext";function yP(){let e=T.useContext(e0);return JM(e,"You must render this element inside a <HydratedRouter> element"),e}function mH(e,t){let i=T.useContext(e0),[s,n]=T.useState(!1),[r,o]=T.useState(!1),{onFocus:a,onBlur:l,onMouseEnter:c,onMouseLeave:p,onTouchStart:g}=t,f=T.useRef(null);T.useEffect(()=>{if(e==="render"&&o(!0),e==="viewport"){let x=b=>{b.forEach(R=>{o(R.isIntersecting)})},M=new IntersectionObserver(x,{threshold:.5});return f.current&&M.observe(f.current),()=>{M.disconnect()}}},[e]),T.useEffect(()=>{if(s){let x=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(x)}}},[s]);let y=()=>{n(!0)},C=()=>{n(!1),o(!1)};return i?e!=="intent"?[r,f,{}]:[r,f,{onFocus:Tg(a,y),onBlur:Tg(l,C),onMouseEnter:Tg(c,y),onMouseLeave:Tg(p,C),onTouchStart:Tg(g,y)}]:[!1,f,{}]}function Tg(e,t){return i=>{e&&e(i),i.defaultPrevented||t(i)}}function vH({page:e,...t}){let{router:i}=gH(),s=T.useMemo(()=>Ac(i.routes,e,i.basename),[i.routes,e,i.basename]);return s?T.createElement(CH,{page:e,matches:s,...t}):null}function yH(e){let{manifest:t,routeModules:i}=yP(),[s,n]=T.useState([]);return T.useEffect(()=>{let r=!1;return lH(e,t,i).then(o=>{r||n(o)}),()=>{r=!0}},[e,t,i]),s}function CH({page:e,matches:t,...i}){let s=Dh(),{manifest:n,routeModules:r}=yP(),{loaderData:o,matches:a}=fH(),l=T.useMemo(()=>AL(e,t,a,n,s,"data"),[e,t,a,n,s]),c=T.useMemo(()=>AL(e,t,a,n,s,"assets"),[e,t,a,n,s]),p=T.useMemo(()=>{if(e===s.pathname+s.search+s.hash)return[];let y=new Set,C=!1;if(t.forEach(M=>{var R;let b=n.routes[M.route.id];!b||!b.hasLoader||(!l.some(I=>I.route.id===M.route.id)&&M.route.id in o&&((R=r[M.route.id])!=null&&R.shouldRevalidate)||b.hasClientLoader?C=!0:y.add(M.route.id))}),y.size===0)return[];let x=pH(e);return C&&y.size>0&&x.searchParams.set("_routes",t.filter(M=>y.has(M.route.id)).map(M=>M.route.id).join(",")),[x.pathname+x.search]},[o,s,n,l,t,e,r]),g=T.useMemo(()=>cH(c,n),[c,n]),f=yH(c);return T.createElement(T.Fragment,null,p.map(y=>T.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...i})),g.map(y=>T.createElement("link",{key:y,rel:"modulepreload",href:y,...i})),f.map(({key:y,link:C})=>T.createElement("link",{key:y,...C})))}function SH(...e){return t=>{e.forEach(i=>{typeof i=="function"?i(t):i!=null&&(i.current=t)})}}var CP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{CP&&(window.__reactRouterVersion="7.1.3")}catch{}function wH(e,t){return lz({basename:t==null?void 0:t.basename,future:t==null?void 0:t.future,history:PG({window:t==null?void 0:t.window}),hydrationData:xH(),routes:e,mapRouteProperties:Uz,dataStrategy:t==null?void 0:t.dataStrategy,patchRoutesOnNavigation:t==null?void 0:t.patchRoutesOnNavigation,window:t==null?void 0:t.window}).initialize()}function xH(){let e=window==null?void 0:window.__staticRouterHydrationData;return e&&e.errors&&(e={...e,errors:bH(e.errors)}),e}function bH(e){if(!e)return null;let t=Object.entries(e),i={};for(let[s,n]of t)if(n&&n.__type==="RouteErrorResponse")i[s]=new Py(n.status,n.statusText,n.data,n.internal===!0);else if(n&&n.__type==="Error"){if(n.__subType){let r=window[n.__subType];if(typeof r=="function")try{let o=new r(n.message);o.stack="",i[s]=o}catch{}}if(i[s]==null){let r=new Error(n.message);r.stack="",i[s]=r}}else i[s]=n;return i}var SP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Fy=T.forwardRef(function({onClick:t,discover:i="render",prefetch:s="none",relative:n,reloadDocument:r,replace:o,state:a,target:l,to:c,preventScrollReset:p,viewTransition:g,...f},y){let{basename:C}=T.useContext(ma),x=typeof c=="string"&&SP.test(c),M,b=!1;if(typeof c=="string"&&x&&(M=c,CP))try{let V=new URL(window.location.href),U=c.startsWith("//")?new URL(V.protocol+c):new URL(c),$=Po(U.pathname,C);U.origin===V.origin&&$!=null?c=$+U.search+U.hash:b=!0}catch{xs(!1,`<Link to="${c}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let R=Iz(c,{relative:n}),[I,P,k]=mH(s,f),_=EH(c,{replace:o,state:a,target:l,preventScrollReset:p,relative:n,viewTransition:g});function B(V){t&&t(V),V.defaultPrevented||_(V)}let H=T.createElement("a",{...f,...k,href:M||R,onClick:b||r?t:B,ref:SH(y,P),target:l,"data-discover":!x&&i==="render"?"true":void 0});return I&&!x?T.createElement(T.Fragment,null,H,T.createElement(vH,{page:R})):H});Fy.displayName="Link";var MH=T.forwardRef(function({"aria-current":t="page",caseSensitive:i=!1,className:s="",end:n=!1,style:r,to:o,viewTransition:a,children:l,...c},p){let g=em(o,{relative:c.relative}),f=Dh(),y=T.useContext(qf),{navigator:C,basename:x}=T.useContext(ma),M=y!=null&&PH(g)&&a===!0,b=C.encodeLocation?C.encodeLocation(g).pathname:g.pathname,R=f.pathname,I=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;i||(R=R.toLowerCase(),I=I?I.toLowerCase():null,b=b.toLowerCase()),I&&x&&(I=Po(I,x)||I);const P=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let k=R===b||!n&&R.startsWith(b)&&R.charAt(P)==="/",_=I!=null&&(I===b||!n&&I.startsWith(b)&&I.charAt(b.length)==="/"),B={isActive:k,isPending:_,isTransitioning:M},H=k?t:void 0,V;typeof s=="function"?V=s(B):V=[s,k?"active":null,_?"pending":null,M?"transitioning":null].filter(Boolean).join(" ");let U=typeof r=="function"?r(B):r;return T.createElement(Fy,{...c,"aria-current":H,className:V,ref:p,style:U,to:o,viewTransition:a},typeof l=="function"?l(B):l)});MH.displayName="NavLink";var RH=T.forwardRef(({discover:e="render",fetcherKey:t,navigate:i,reloadDocument:s,replace:n,state:r,method:o=hy,action:a,onSubmit:l,relative:c,preventScrollReset:p,viewTransition:g,...f},y)=>{let C=TH(),x=AH(a,{relative:c}),M=o.toLowerCase()==="get"?"get":"post",b=typeof a=="string"&&SP.test(a),R=I=>{if(l&&l(I),I.defaultPrevented)return;I.preventDefault();let P=I.nativeEvent.submitter,k=(P==null?void 0:P.getAttribute("formmethod"))||o;C(P||I.currentTarget,{fetcherKey:t,method:k,navigate:i,replace:n,state:r,relative:c,preventScrollReset:p,viewTransition:g})};return T.createElement("form",{ref:y,method:M,action:x,onSubmit:s?l:R,...f,"data-discover":!b&&e==="render"?"true":void 0})});RH.displayName="Form";function DH(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function wP(e){let t=T.useContext(Rh);return Ot(t,DH(e)),t}function EH(e,{target:t,replace:i,state:s,preventScrollReset:n,relative:r,viewTransition:o}={}){let a=Lz(),l=Dh(),c=em(e,{relative:r});return T.useCallback(p=>{if(iH(p,t)){p.preventDefault();let g=i!==void 0?i:Yc(l)===Yc(c);a(e,{replace:g,state:s,preventScrollReset:n,relative:r,viewTransition:o})}},[l,a,c,i,s,t,e,n,r,o])}var IH=0,LH=()=>`__${String(++IH)}__`;function TH(){let{router:e}=wP("useSubmit"),{basename:t}=T.useContext(ma),i=Vz();return T.useCallback(async(s,n={})=>{let{action:r,method:o,encType:a,formData:l,body:c}=rH(s,t);if(n.navigate===!1){let p=n.fetcherKey||LH();await e.fetch(p,i,n.action||r,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||o,formEncType:n.encType||a,flushSync:n.flushSync})}else await e.navigate(n.action||r,{preventScrollReset:n.preventScrollReset,formData:l,body:c,formMethod:n.method||o,formEncType:n.encType||a,replace:n.replace,state:n.state,fromRouteId:i,flushSync:n.flushSync,viewTransition:n.viewTransition})},[e,t,i])}function AH(e,{relative:t}={}){let{basename:i}=T.useContext(ma),s=T.useContext(va);Ot(s,"useFormAction must be used inside a RouteContext");let[n]=s.matches.slice(-1),r={...em(e||".",{relative:t})},o=Dh();if(e==null){r.search=o.search;let a=new URLSearchParams(r.search),l=a.getAll("index");if(l.some(p=>p==="")){a.delete("index"),l.filter(g=>g).forEach(g=>a.append("index",g));let p=a.toString();r.search=p?`?${p}`:""}}return(!e||e===".")&&n.route.index&&(r.search=r.search?r.search.replace(/^\?/,"?index&"):"?index"),i!=="/"&&(r.pathname=r.pathname==="/"?i:aa([i,r.pathname])),Yc(r)}function PH(e,t={}){let i=T.useContext(ZM);Ot(i!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=wP("useViewTransitionState"),n=em(e,{relative:t.relative});if(!i.isTransitioning)return!1;let r=Po(i.currentLocation.pathname,s)||i.currentLocation.pathname,o=Po(i.nextLocation.pathname,s)||i.nextLocation.pathname;return Ay(n.pathname,o)!=null||Ay(n.pathname,r)!=null}new TextEncoder;var tm=nP();const rh=Qf(tm);/**
 * react-router v7.1.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function FH(e){return T.createElement(Yz,{flushSync:tm.flushSync,...e})}var Ex={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var PL;function kH(){return PL||(PL=1,function(e){(function(){var t={}.hasOwnProperty;function i(){for(var r="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(r=n(r,s(a)))}return r}function s(r){if(typeof r=="string"||typeof r=="number")return r;if(typeof r!="object")return"";if(Array.isArray(r))return i.apply(null,r);if(r.toString!==Object.prototype.toString&&!r.toString.toString().includes("[native code]"))return r.toString();var o="";for(var a in r)t.call(r,a)&&r[a]&&(o=n(o,a));return o}function n(r,o){return o?r?r+" "+o:r+o:r}e.exports?(i.default=i,e.exports=i):window.classNames=i})()}(Ex)),Ex.exports}var NH=kH();const Yt=Qf(NH);function Fb(){return Fb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)({}).hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Fb.apply(null,arguments)}function xP(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.includes(s))continue;i[s]=e[s]}return i}function FL(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function OH(e){var t=_H(e,"string");return typeof t=="symbol"?t:String(t)}function _H(e,t){if(typeof e!="object"||e===null)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var s=i.call(e,t);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function BH(e,t,i){var s=T.useRef(e!==void 0),n=T.useState(t),r=n[0],o=n[1],a=e!==void 0,l=s.current;return s.current=a,!a&&l&&r!==t&&o(t),[a?e:r,T.useCallback(function(c){for(var p=arguments.length,g=new Array(p>1?p-1:0),f=1;f<p;f++)g[f-1]=arguments[f];i&&i.apply(void 0,[c].concat(g)),o(c)},[i])]}function bP(e,t){return Object.keys(t).reduce(function(i,s){var n,r=i,o=r[FL(s)],a=r[s],l=xP(r,[FL(s),s].map(OH)),c=t[s],p=BH(a,o,e[c]),g=p[0],f=p[1];return Fb({},l,(n={},n[s]=g,n[c]=f,n))},e)}function kb(e,t){return kb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,s){return i.__proto__=s,i},kb(e,t)}function GH(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,kb(e,t)}const zH=["xxl","xl","lg","md","sm","xs"],HH="xs",t0=T.createContext({prefixes:{},breakpoints:zH,minBreakpoint:HH});function mi(e,t){const{prefixes:i}=T.useContext(t0);return e||i[t]||t}function VH(){const{breakpoints:e}=T.useContext(t0);return e}function WH(){const{minBreakpoint:e}=T.useContext(t0);return e}function i0(e){return e&&e.ownerDocument||document}function jH(e){var t=i0(e);return t&&t.defaultView||window}function UH(e,t){return jH(e).getComputedStyle(e,t)}var KH=/([A-Z])/g;function YH(e){return e.replace(KH,"-$1").toLowerCase()}var $H=/^ms-/;function zv(e){return YH(e).replace($H,"-ms-")}var ZH=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function XH(e){return!!(e&&ZH.test(e))}function ul(e,t){var i="",s="";if(typeof t=="string")return e.style.getPropertyValue(zv(t))||UH(e).getPropertyValue(zv(t));Object.keys(t).forEach(function(n){var r=t[n];!r&&r!==0?e.style.removeProperty(zv(n)):XH(n)?s+=n+"("+r+") ":i+=zv(n)+": "+r+";"}),s&&(i+="transform: "+s+";"),e.style.cssText+=";"+i}var Ix={exports:{}},Lx,kL;function QH(){if(kL)return Lx;kL=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Lx=e,Lx}var Tx,NL;function qH(){if(NL)return Tx;NL=1;var e=QH();function t(){}function i(){}return i.resetWarningCache=t,Tx=function(){function s(o,a,l,c,p,g){if(g!==e){var f=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw f.name="Invariant Violation",f}}s.isRequired=s;function n(){return s}var r={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:n,element:s,elementType:s,instanceOf:n,node:s,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:i,resetWarningCache:t};return r.PropTypes=r,r},Tx}var OL;function JH(){return OL||(OL=1,Ix.exports=qH()()),Ix.exports}var e2=JH();const hl=Qf(e2),_L={disabled:!1},MP=De.createContext(null);var t2=function(t){return t.scrollTop},jg="unmounted",Lc="exited",wo="entering",rl="entered",yf="exiting",bl=function(e){GH(t,e);function t(s,n){var r;r=e.call(this,s,n)||this;var o=n,a=o&&!o.isMounting?s.enter:s.appear,l;return r.appearStatus=null,s.in?a?(l=Lc,r.appearStatus=wo):l=rl:s.unmountOnExit||s.mountOnEnter?l=jg:l=Lc,r.state={status:l},r.nextCallback=null,r}t.getDerivedStateFromProps=function(n,r){var o=n.in;return o&&r.status===jg?{status:Lc}:null};var i=t.prototype;return i.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},i.componentDidUpdate=function(n){var r=null;if(n!==this.props){var o=this.state.status;this.props.in?o!==wo&&o!==rl&&(r=wo):(o===wo||o===rl)&&(r=yf)}this.updateStatus(!1,r)},i.componentWillUnmount=function(){this.cancelNextCallback()},i.getTimeouts=function(){var n=this.props.timeout,r,o,a;return r=o=a=n,n!=null&&typeof n!="number"&&(r=n.exit,o=n.enter,a=n.appear!==void 0?n.appear:o),{exit:r,enter:o,appear:a}},i.updateStatus=function(n,r){if(n===void 0&&(n=!1),r!==null)if(this.cancelNextCallback(),r===wo){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:rh.findDOMNode(this);o&&t2(o)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Lc&&this.setState({status:jg})},i.performEnter=function(n){var r=this,o=this.props.enter,a=this.context?this.context.isMounting:n,l=this.props.nodeRef?[a]:[rh.findDOMNode(this),a],c=l[0],p=l[1],g=this.getTimeouts(),f=a?g.appear:g.enter;if(!n&&!o||_L.disabled){this.safeSetState({status:rl},function(){r.props.onEntered(c)});return}this.props.onEnter(c,p),this.safeSetState({status:wo},function(){r.props.onEntering(c,p),r.onTransitionEnd(f,function(){r.safeSetState({status:rl},function(){r.props.onEntered(c,p)})})})},i.performExit=function(){var n=this,r=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:rh.findDOMNode(this);if(!r||_L.disabled){this.safeSetState({status:Lc},function(){n.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:yf},function(){n.props.onExiting(a),n.onTransitionEnd(o.exit,function(){n.safeSetState({status:Lc},function(){n.props.onExited(a)})})})},i.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},i.safeSetState=function(n,r){r=this.setNextCallback(r),this.setState(n,r)},i.setNextCallback=function(n){var r=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,r.nextCallback=null,n(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},i.onTransitionEnd=function(n,r){this.setNextCallback(r);var o=this.props.nodeRef?this.props.nodeRef.current:rh.findDOMNode(this),a=n==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var l=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],c=l[0],p=l[1];this.props.addEndListener(c,p)}n!=null&&setTimeout(this.nextCallback,n)},i.render=function(){var n=this.state.status;if(n===jg)return null;var r=this.props,o=r.children;r.in,r.mountOnEnter,r.unmountOnExit,r.appear,r.enter,r.exit,r.timeout,r.addEndListener,r.onEnter,r.onEntering,r.onEntered,r.onExit,r.onExiting,r.onExited,r.nodeRef;var a=xP(r,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return De.createElement(MP.Provider,{value:null},typeof o=="function"?o(n,a):De.cloneElement(De.Children.only(o),a))},t}(De.Component);bl.contextType=MP;bl.propTypes={};function Ad(){}bl.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Ad,onEntering:Ad,onEntered:Ad,onExit:Ad,onExiting:Ad,onExited:Ad};bl.UNMOUNTED=jg;bl.EXITED=Lc;bl.ENTERING=wo;bl.ENTERED=rl;bl.EXITING=yf;function i2(e){return e.code==="Escape"||e.keyCode===27}function s2(){const e=T.version.split(".");return{major:+e[0],minor:+e[1],patch:+e[2]}}function MC(e){if(!e||typeof e=="function")return null;const{major:t}=s2();return t>=19?e.props.ref:e.ref}const RC=!!(typeof window<"u"&&window.document&&window.document.createElement);var Nb=!1,Ob=!1;try{var Ax={get passive(){return Nb=!0},get once(){return Ob=Nb=!0}};RC&&(window.addEventListener("test",Ax,Ax),window.removeEventListener("test",Ax,!0))}catch{}function n2(e,t,i,s){if(s&&typeof s!="boolean"&&!Ob){var n=s.once,r=s.capture,o=i;!Ob&&n&&(o=i.__once||function a(l){this.removeEventListener(t,a,r),i.call(this,l)},i.__once=o),e.addEventListener(t,o,Nb?s:r)}e.addEventListener(t,i,s)}function r2(e,t,i,s){var n=s&&typeof s!="boolean"?s.capture:s;e.removeEventListener(t,i,n),i.__once&&e.removeEventListener(t,i.__once,n)}function ky(e,t,i,s){return n2(e,t,i,s),function(){r2(e,t,i,s)}}function o2(e,t,i,s){if(s===void 0&&(s=!0),e){var n=document.createEvent("HTMLEvents");n.initEvent(t,i,s),e.dispatchEvent(n)}}function a2(e){var t=ul(e,"transitionDuration")||"",i=t.indexOf("ms")===-1?1e3:1;return parseFloat(t)*i}function l2(e,t,i){i===void 0&&(i=5);var s=!1,n=setTimeout(function(){s||o2(e,"transitionend",!0)},t+i),r=ky(e,"transitionend",function(){s=!0},{once:!0});return function(){clearTimeout(n),r()}}function c2(e,t,i,s){i==null&&(i=a2(e)||0);var n=l2(e,i,s),r=ky(e,"transitionend",t);return function(){n(),r()}}function BL(e,t){const i=ul(e,t)||"",s=i.indexOf("ms")===-1?1e3:1;return parseFloat(i)*s}function s0(e,t){const i=BL(e,"transitionDuration"),s=BL(e,"transitionDelay"),n=c2(e,r=>{r.target===e&&(n(),t(r))},i+s)}function Ag(...e){return e.filter(t=>t!=null).reduce((t,i)=>{if(typeof i!="function")throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return t===null?i:function(...n){t.apply(this,n),i.apply(this,n)}},null)}function RP(e){e.offsetHeight}const GL=e=>!e||typeof e=="function"?e:t=>{e.current=t};function u2(e,t){const i=GL(e),s=GL(t);return n=>{i&&i(n),s&&s(n)}}function h2(e,t){return T.useMemo(()=>u2(e,t),[e,t])}function d2(e){return e&&"setState"in e?rh.findDOMNode(e):e??null}const n0=De.forwardRef(({onEnter:e,onEntering:t,onEntered:i,onExit:s,onExiting:n,onExited:r,addEndListener:o,children:a,childRef:l,...c},p)=>{const g=T.useRef(null),f=h2(g,l),y=_=>{f(d2(_))},C=_=>B=>{_&&g.current&&_(g.current,B)},x=T.useCallback(C(e),[e]),M=T.useCallback(C(t),[t]),b=T.useCallback(C(i),[i]),R=T.useCallback(C(s),[s]),I=T.useCallback(C(n),[n]),P=T.useCallback(C(r),[r]),k=T.useCallback(C(o),[o]);return fe.jsx(bl,{ref:p,...c,onEnter:x,onEntered:b,onEntering:M,onExit:R,onExited:P,onExiting:I,addEndListener:k,nodeRef:g,children:typeof a=="function"?(_,B)=>a(_,{...B,ref:y}):De.cloneElement(a,{ref:y})})}),p2={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]};function g2(e,t){const i=`offset${e[0].toUpperCase()}${e.slice(1)}`,s=t[i],n=p2[e];return s+parseInt(ul(t,n[0]),10)+parseInt(ul(t,n[1]),10)}const f2={[Lc]:"collapse",[yf]:"collapsing",[wo]:"collapsing",[rl]:"collapse show"},m2=De.forwardRef(({onEnter:e,onEntering:t,onEntered:i,onExit:s,onExiting:n,className:r,children:o,dimension:a="height",in:l=!1,timeout:c=300,mountOnEnter:p=!1,unmountOnExit:g=!1,appear:f=!1,getDimensionValue:y=g2,...C},x)=>{const M=typeof a=="function"?a():a,b=T.useMemo(()=>Ag(_=>{_.style[M]="0"},e),[M,e]),R=T.useMemo(()=>Ag(_=>{const B=`scroll${M[0].toUpperCase()}${M.slice(1)}`;_.style[M]=`${_[B]}px`},t),[M,t]),I=T.useMemo(()=>Ag(_=>{_.style[M]=null},i),[M,i]),P=T.useMemo(()=>Ag(_=>{_.style[M]=`${y(M,_)}px`,RP(_)},s),[s,y,M]),k=T.useMemo(()=>Ag(_=>{_.style[M]=null},n),[M,n]);return fe.jsx(n0,{ref:x,addEndListener:s0,...C,"aria-expanded":C.role?l:null,onEnter:b,onEntering:R,onEntered:I,onExit:P,onExiting:k,childRef:MC(o),in:l,timeout:c,mountOnEnter:p,unmountOnExit:g,appear:f,children:(_,B)=>De.cloneElement(o,{...B,className:Yt(r,o.props.className,f2[_],M==="width"&&"collapse-horizontal")})})});function v2(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e},[e]),t}function DC(e){const t=v2(e);return T.useCallback(function(...i){return t.current&&t.current(...i)},[t])}const y2=e=>T.forwardRef((t,i)=>fe.jsx("div",{...t,ref:i,className:Yt(t.className,e)}));function C2(e){const t=T.useRef(e);return T.useEffect(()=>{t.current=e},[e]),t}function ol(e){const t=C2(e);return T.useCallback(function(...i){return t.current&&t.current(...i)},[t])}function S2(){const e=T.useRef(!0),t=T.useRef(()=>e.current);return T.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),t.current}function w2(e){const t=T.useRef(null);return T.useEffect(()=>{t.current=e}),t.current}const x2=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",b2=typeof document<"u",zL=b2||x2?T.useLayoutEffect:T.useEffect,M2=["as","disabled"];function R2(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;i[s]=e[s]}return i}function D2(e){return!e||e.trim()==="#"}function DP({tagName:e,disabled:t,href:i,target:s,rel:n,role:r,onClick:o,tabIndex:a=0,type:l}){e||(i!=null||s!=null||n!=null?e="a":e="button");const c={tagName:e};if(e==="button")return[{type:l||"button",disabled:t},c];const p=f=>{if((t||e==="a"&&D2(i))&&f.preventDefault(),t){f.stopPropagation();return}o==null||o(f)},g=f=>{f.key===" "&&(f.preventDefault(),p(f))};return e==="a"&&(i||(i="#"),t&&(i=void 0)),[{role:r??"button",disabled:void 0,tabIndex:t?void 0:a,href:i,target:e==="a"?s:void 0,"aria-disabled":t||void 0,rel:e==="a"?n:void 0,onClick:p,onKeyDown:g},c]}const EP=T.forwardRef((e,t)=>{let{as:i,disabled:s}=e,n=R2(e,M2);const[r,{tagName:o}]=DP(Object.assign({tagName:i,disabled:s},n));return fe.jsx(o,Object.assign({},n,r,{ref:t}))});EP.displayName="Button";const E2=["onKeyDown"];function I2(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;i[s]=e[s]}return i}function L2(e){return!e||e.trim()==="#"}const IP=T.forwardRef((e,t)=>{let{onKeyDown:i}=e,s=I2(e,E2);const[n]=DP(Object.assign({tagName:"a"},s)),r=ol(o=>{n.onKeyDown(o),i==null||i(o)});return L2(s.href)||s.role==="button"?fe.jsx("a",Object.assign({ref:t},s,n,{onKeyDown:r})):fe.jsx("a",Object.assign({ref:t},s,{onKeyDown:i}))});IP.displayName="Anchor";const T2={[wo]:"show",[rl]:"show"},LP=T.forwardRef(({className:e,children:t,transitionClasses:i={},onEnter:s,...n},r)=>{const o={in:!1,timeout:300,mountOnEnter:!1,unmountOnExit:!1,appear:!1,...n},a=T.useCallback((l,c)=>{RP(l),s==null||s(l,c)},[s]);return fe.jsx(n0,{ref:r,addEndListener:s0,...o,onEnter:a,childRef:MC(t),children:(l,c)=>T.cloneElement(t,{...c,className:Yt("fade",e,t.props.className,T2[l],i[l])})})});LP.displayName="Fade";const A2={"aria-label":hl.string,onClick:hl.func,variant:hl.oneOf(["white"])},r0=T.forwardRef(({className:e,variant:t,"aria-label":i="Close",...s},n)=>fe.jsx("button",{ref:n,type:"button",className:Yt("btn-close",t&&`btn-close-${t}`,e),"aria-label":i,...s}));r0.displayName="CloseButton";r0.propTypes=A2;const TP=T.createContext(null);TP.displayName="CardHeaderContext";function P2(e,t){return T.Children.toArray(e).some(i=>T.isValidElement(i)&&i.type===t)}function F2({as:e,bsPrefix:t,className:i,...s}){t=mi(t,"col");const n=VH(),r=WH(),o=[],a=[];return n.forEach(l=>{const c=s[l];delete s[l];let p,g,f;typeof c=="object"&&c!=null?{span:p,offset:g,order:f}=c:p=c;const y=l!==r?`-${l}`:"";p&&o.push(p===!0?`${t}${y}`:`${t}${y}-${p}`),f!=null&&a.push(`order${y}-${f}`),g!=null&&a.push(`offset${y}-${g}`)}),[{...s,className:Yt(i,...o,...a)},{as:e,bsPrefix:t,spans:o}]}const AP=T.forwardRef((e,t)=>{const[{className:i,...s},{as:n="div",bsPrefix:r,spans:o}]=F2(e);return fe.jsx(n,{...s,ref:t,className:Yt(i,!o.length&&r)})});AP.displayName="Col";const PP=T.forwardRef(({bsPrefix:e,fluid:t=!1,as:i="div",className:s,...n},r)=>{const o=mi(e,"container"),a=typeof t=="string"?`-${t}`:"-fluid";return fe.jsx(i,{ref:r,...n,className:Yt(s,t?`${o}${a}`:o)})});PP.displayName="Container";var k2=Function.prototype.bind.call(Function.prototype.call,[].slice);function Yu(e,t){return k2(e.querySelectorAll(t))}function N2(){const[,e]=T.useReducer(t=>t+1,0);return e}function HL(e,t){if(e.contains)return e.contains(t);if(e.compareDocumentPosition)return e===t||!!(e.compareDocumentPosition(t)&16)}const Ny=T.createContext(null),o0=(e,t=null)=>e!=null?String(e):t||null,a0=T.createContext(null);a0.displayName="NavContext";const O2="data-rr-ui-",_2="rrUi";function EC(e){return`${O2}${e}`}function B2(e){return`${_2}${e}`}const FP=T.createContext(RC?window:void 0);FP.Provider;function l0(){return T.useContext(FP)}const G2=typeof global<"u"&&global.navigator&&global.navigator.product==="ReactNative",z2=typeof document<"u",H2=z2||G2?T.useLayoutEffect:T.useEffect,fp=T.createContext(null);fp.displayName="NavbarContext";const V2={type:hl.string,tooltip:hl.bool,as:hl.elementType},IC=T.forwardRef(({as:e="div",className:t,type:i="valid",tooltip:s=!1,...n},r)=>fe.jsx(e,{...n,ref:r,className:Yt(t,`${i}-${s?"tooltip":"feedback"}`)}));IC.displayName="Feedback";IC.propTypes=V2;const yl=T.createContext({}),c0=T.forwardRef(({id:e,bsPrefix:t,className:i,type:s="checkbox",isValid:n=!1,isInvalid:r=!1,as:o="input",...a},l)=>{const{controlId:c}=T.useContext(yl);return t=mi(t,"form-check-input"),fe.jsx(o,{...a,ref:l,type:s,id:e||c,className:Yt(i,t,n&&"is-valid",r&&"is-invalid")})});c0.displayName="FormCheckInput";const Oy=T.forwardRef(({bsPrefix:e,className:t,htmlFor:i,...s},n)=>{const{controlId:r}=T.useContext(yl);return e=mi(e,"form-check-label"),fe.jsx("label",{...s,ref:n,htmlFor:i||r,className:Yt(t,e)})});Oy.displayName="FormCheckLabel";const kP=T.forwardRef(({id:e,bsPrefix:t,bsSwitchPrefix:i,inline:s=!1,reverse:n=!1,disabled:r=!1,isValid:o=!1,isInvalid:a=!1,feedbackTooltip:l=!1,feedback:c,feedbackType:p,className:g,style:f,title:y="",type:C="checkbox",label:x,children:M,as:b="input",...R},I)=>{t=mi(t,"form-check"),i=mi(i,"form-switch");const{controlId:P}=T.useContext(yl),k=T.useMemo(()=>({controlId:e||P}),[P,e]),_=!M&&x!=null&&x!==!1||P2(M,Oy),B=fe.jsx(c0,{...R,type:C==="switch"?"checkbox":C,ref:I,isValid:o,isInvalid:a,disabled:r,as:b});return fe.jsx(yl.Provider,{value:k,children:fe.jsx("div",{style:f,className:Yt(g,_&&t,s&&`${t}-inline`,n&&`${t}-reverse`,C==="switch"&&i),children:M||fe.jsxs(fe.Fragment,{children:[B,_&&fe.jsx(Oy,{title:y,children:x}),c&&fe.jsx(IC,{type:p,tooltip:l,children:c})]})})})});kP.displayName="FormCheck";const _y=Object.assign(kP,{Input:c0,Label:Oy}),NP=T.forwardRef(({bsPrefix:e,type:t,size:i,htmlSize:s,id:n,className:r,isValid:o=!1,isInvalid:a=!1,plaintext:l,readOnly:c,as:p="input",...g},f)=>{const{controlId:y}=T.useContext(yl);return e=mi(e,"form-control"),fe.jsx(p,{...g,type:t,size:s,ref:f,readOnly:c,id:n||y,className:Yt(r,l?`${e}-plaintext`:e,i&&`${e}-${i}`,t==="color"&&`${e}-color`,o&&"is-valid",a&&"is-invalid")})});NP.displayName="FormControl";const W2=Object.assign(NP,{Feedback:IC}),OP=T.forwardRef(({className:e,bsPrefix:t,as:i="div",...s},n)=>(t=mi(t,"form-floating"),fe.jsx(i,{ref:n,className:Yt(e,t),...s})));OP.displayName="FormFloating";const u0=T.forwardRef(({controlId:e,as:t="div",...i},s)=>{const n=T.useMemo(()=>({controlId:e}),[e]);return fe.jsx(yl.Provider,{value:n,children:fe.jsx(t,{...i,ref:s})})});u0.displayName="FormGroup";const _P=T.forwardRef(({as:e="label",bsPrefix:t,column:i=!1,visuallyHidden:s=!1,className:n,htmlFor:r,...o},a)=>{const{controlId:l}=T.useContext(yl);t=mi(t,"form-label");let c="col-form-label";typeof i=="string"&&(c=`${c} ${c}-${i}`);const p=Yt(n,t,s&&"visually-hidden",i&&c);return r=r||l,i?fe.jsx(AP,{ref:a,as:"label",className:p,htmlFor:r,...o}):fe.jsx(e,{ref:a,className:p,htmlFor:r,...o})});_P.displayName="FormLabel";const BP=T.forwardRef(({bsPrefix:e,className:t,id:i,...s},n)=>{const{controlId:r}=T.useContext(yl);return e=mi(e,"form-range"),fe.jsx("input",{...s,type:"range",ref:n,className:Yt(t,e),id:i||r})});BP.displayName="FormRange";const GP=T.forwardRef(({bsPrefix:e,size:t,htmlSize:i,className:s,isValid:n=!1,isInvalid:r=!1,id:o,...a},l)=>{const{controlId:c}=T.useContext(yl);return e=mi(e,"form-select"),fe.jsx("select",{...a,size:i,ref:l,className:Yt(s,e,t&&`${e}-${t}`,n&&"is-valid",r&&"is-invalid"),id:o||c})});GP.displayName="FormSelect";const zP=T.forwardRef(({bsPrefix:e,className:t,as:i="small",muted:s,...n},r)=>(e=mi(e,"form-text"),fe.jsx(i,{...n,ref:r,className:Yt(t,e,s&&"text-muted")})));zP.displayName="FormText";const HP=T.forwardRef((e,t)=>fe.jsx(_y,{...e,ref:t,type:"switch"}));HP.displayName="Switch";const j2=Object.assign(HP,{Input:_y.Input,Label:_y.Label}),VP=T.forwardRef(({bsPrefix:e,className:t,children:i,controlId:s,label:n,...r},o)=>(e=mi(e,"form-floating"),fe.jsxs(u0,{ref:o,className:Yt(t,e),controlId:s,...r,children:[i,fe.jsx("label",{htmlFor:s,children:n})]})));VP.displayName="FloatingLabel";const U2={_ref:hl.any,validated:hl.bool,as:hl.elementType},h0=T.forwardRef(({className:e,validated:t,as:i="form",...s},n)=>fe.jsx(i,{...s,ref:n,className:Yt(e,t&&"was-validated")}));h0.displayName="Form";h0.propTypes=U2;const Px=Object.assign(h0,{Group:u0,Control:W2,Floating:OP,Check:_y,Switch:j2,Label:_P,Text:zP,Range:BP,Select:GP,FloatingLabel:VP}),VL=e=>!e||typeof e=="function"?e:t=>{e.current=t};function K2(e,t){const i=VL(e),s=VL(t);return n=>{i&&i(n),s&&s(n)}}function LC(e,t){return T.useMemo(()=>K2(e,t),[e,t])}const WP=T.createContext(null),Y2=["as","active","eventKey"];function $2(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;i[s]=e[s]}return i}function jP({key:e,onClick:t,active:i,id:s,role:n,disabled:r}){const o=T.useContext(Ny),a=T.useContext(a0),l=T.useContext(WP);let c=i;const p={role:n};if(a){!n&&a.role==="tablist"&&(p.role="tab");const g=a.getControllerId(e??null),f=a.getControlledId(e??null);p[EC("event-key")]=e,p.id=g||s,c=i==null&&e!=null?a.activeKey===e:i,(c||!(l!=null&&l.unmountOnExit)&&!(l!=null&&l.mountOnEnter))&&(p["aria-controls"]=f)}return p.role==="tab"&&(p["aria-selected"]=c,c||(p.tabIndex=-1),r&&(p.tabIndex=-1,p["aria-disabled"]=!0)),p.onClick=ol(g=>{r||(t==null||t(g),e!=null&&o&&!g.isPropagationStopped()&&o(e,g))}),[p,{isActive:c}]}const UP=T.forwardRef((e,t)=>{let{as:i=EP,active:s,eventKey:n}=e,r=$2(e,Y2);const[o,a]=jP(Object.assign({key:o0(n,r.href),active:s},r));return o[EC("active")]=a.isActive,fe.jsx(i,Object.assign({},r,o,{ref:t}))});UP.displayName="NavItem";const Z2=["as","onSelect","activeKey","role","onKeyDown"];function X2(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;i[s]=e[s]}return i}const WL=()=>{},jL=EC("event-key"),KP=T.forwardRef((e,t)=>{let{as:i="div",onSelect:s,activeKey:n,role:r,onKeyDown:o}=e,a=X2(e,Z2);const l=N2(),c=T.useRef(!1),p=T.useContext(Ny),g=T.useContext(WP);let f,y;g&&(r=r||"tablist",n=g.activeKey,f=g.getControlledId,y=g.getControllerId);const C=T.useRef(null),x=I=>{const P=C.current;if(!P)return null;const k=Yu(P,`[${jL}]:not([aria-disabled=true])`),_=P.querySelector("[aria-selected=true]");if(!_||_!==document.activeElement)return null;const B=k.indexOf(_);if(B===-1)return null;let H=B+I;return H>=k.length&&(H=0),H<0&&(H=k.length-1),k[H]},M=(I,P)=>{I!=null&&(s==null||s(I,P),p==null||p(I,P))},b=I=>{if(o==null||o(I),!g)return;let P;switch(I.key){case"ArrowLeft":case"ArrowUp":P=x(-1);break;case"ArrowRight":case"ArrowDown":P=x(1);break;default:return}P&&(I.preventDefault(),M(P.dataset[B2("EventKey")]||null,I),c.current=!0,l())};T.useEffect(()=>{if(C.current&&c.current){const I=C.current.querySelector(`[${jL}][aria-selected=true]`);I==null||I.focus()}c.current=!1});const R=LC(t,C);return fe.jsx(Ny.Provider,{value:M,children:fe.jsx(a0.Provider,{value:{role:r,activeKey:o0(n),getControlledId:f||WL,getControllerId:y||WL},children:fe.jsx(i,Object.assign({},a,{onKeyDown:b,ref:R,role:r}))})})});KP.displayName="Nav";const Q2=Object.assign(KP,{Item:UP});function Fx(e){e===void 0&&(e=i0());try{var t=e.activeElement;return!t||!t.nodeName?null:t}catch{return e.body}}function q2(e){const t=T.useRef(e);return t.current=e,t}function J2(e){const t=q2(e);T.useEffect(()=>()=>t.current(),[])}function eV(e=document){const t=e.defaultView;return Math.abs(t.innerWidth-e.documentElement.clientWidth)}const UL=EC("modal-open");class d0{constructor({ownerDocument:t,handleContainerOverflow:i=!0,isRTL:s=!1}={}){this.handleContainerOverflow=i,this.isRTL=s,this.modals=[],this.ownerDocument=t}getScrollbarWidth(){return eV(this.ownerDocument)}getElement(){return(this.ownerDocument||document).body}setModalAttributes(t){}removeModalAttributes(t){}setContainerStyle(t){const i={overflow:"hidden"},s=this.isRTL?"paddingLeft":"paddingRight",n=this.getElement();t.style={overflow:n.style.overflow,[s]:n.style[s]},t.scrollBarWidth&&(i[s]=`${parseInt(ul(n,s)||"0",10)+t.scrollBarWidth}px`),n.setAttribute(UL,""),ul(n,i)}reset(){[...this.modals].forEach(t=>this.remove(t))}removeContainerStyle(t){const i=this.getElement();i.removeAttribute(UL),Object.assign(i.style,t.style)}add(t){let i=this.modals.indexOf(t);return i!==-1||(i=this.modals.length,this.modals.push(t),this.setModalAttributes(t),i!==0)||(this.state={scrollBarWidth:this.getScrollbarWidth(),style:{}},this.handleContainerOverflow&&this.setContainerStyle(this.state)),i}remove(t){const i=this.modals.indexOf(t);i!==-1&&(this.modals.splice(i,1),!this.modals.length&&this.handleContainerOverflow&&this.removeContainerStyle(this.state),this.removeModalAttributes(t))}isTopModal(t){return!!this.modals.length&&this.modals[this.modals.length-1]===t}}const kx=(e,t)=>RC?e==null?(t||i0()).body:(typeof e=="function"&&(e=e()),e&&"current"in e&&(e=e.current),e&&("nodeType"in e||e.getBoundingClientRect)?e:null):null;function tV(e,t){const i=l0(),[s,n]=T.useState(()=>kx(e,i==null?void 0:i.document));if(!s){const r=kx(e);r&&n(r)}return T.useEffect(()=>{},[t,s]),T.useEffect(()=>{const r=kx(e);r!==s&&n(r)},[e,s]),s}function iV({children:e,in:t,onExited:i,mountOnEnter:s,unmountOnExit:n}){const r=T.useRef(null),o=T.useRef(t),a=ol(i);T.useEffect(()=>{t?o.current=!0:a(r.current)},[t,a]);const l=LC(r,e.ref),c=T.cloneElement(e,{ref:l});return t?c:n||!o.current&&s?null:c}const sV=["onEnter","onEntering","onEntered","onExit","onExiting","onExited","addEndListener","children"];function nV(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;i[s]=e[s]}return i}function rV(e){let{onEnter:t,onEntering:i,onEntered:s,onExit:n,onExiting:r,onExited:o,addEndListener:a,children:l}=e,c=nV(e,sV);const p=T.useRef(null),g=LC(p,MC(l)),f=P=>k=>{P&&p.current&&P(p.current,k)},y=T.useCallback(f(t),[t]),C=T.useCallback(f(i),[i]),x=T.useCallback(f(s),[s]),M=T.useCallback(f(n),[n]),b=T.useCallback(f(r),[r]),R=T.useCallback(f(o),[o]),I=T.useCallback(f(a),[a]);return Object.assign({},c,{nodeRef:p},t&&{onEnter:y},i&&{onEntering:C},s&&{onEntered:x},n&&{onExit:M},r&&{onExiting:b},o&&{onExited:R},a&&{addEndListener:I},{children:typeof l=="function"?(P,k)=>l(P,Object.assign({},k,{ref:g})):T.cloneElement(l,{ref:g})})}const oV=["component"];function aV(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;i[s]=e[s]}return i}const lV=T.forwardRef((e,t)=>{let{component:i}=e,s=aV(e,oV);const n=rV(s);return fe.jsx(i,Object.assign({ref:t},n))});function cV({in:e,onTransition:t}){const i=T.useRef(null),s=T.useRef(!0),n=ol(t);return zL(()=>{if(!i.current)return;let r=!1;return n({in:e,element:i.current,initial:s.current,isStale:()=>r}),()=>{r=!0}},[e,n]),zL(()=>(s.current=!1,()=>{s.current=!0}),[]),i}function uV({children:e,in:t,onExited:i,onEntered:s,transition:n}){const[r,o]=T.useState(!t);t&&r&&o(!1);const a=cV({in:!!t,onTransition:c=>{const p=()=>{c.isStale()||(c.in?s==null||s(c.element,c.initial):(o(!0),i==null||i(c.element)))};Promise.resolve(n(c)).then(p,g=>{throw c.in||o(!0),g})}}),l=LC(a,e.ref);return r&&!t?null:T.cloneElement(e,{ref:l})}function KL(e,t,i){return e?fe.jsx(lV,Object.assign({},i,{component:e})):t?fe.jsx(uV,Object.assign({},i,{transition:t})):fe.jsx(iV,Object.assign({},i))}const hV=["show","role","className","style","children","backdrop","keyboard","onBackdropClick","onEscapeKeyDown","transition","runTransition","backdropTransition","runBackdropTransition","autoFocus","enforceFocus","restoreFocus","restoreFocusOptions","renderDialog","renderBackdrop","manager","container","onShow","onHide","onExit","onExited","onExiting","onEnter","onEntering","onEntered"];function dV(e,t){if(e==null)return{};var i={};for(var s in e)if({}.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;i[s]=e[s]}return i}let Nx;function pV(e){return Nx||(Nx=new d0({ownerDocument:e==null?void 0:e.document})),Nx}function gV(e){const t=l0(),i=e||pV(t),s=T.useRef({dialog:null,backdrop:null});return Object.assign(s.current,{add:()=>i.add(s.current),remove:()=>i.remove(s.current),isTopModal:()=>i.isTopModal(s.current),setDialogRef:T.useCallback(n=>{s.current.dialog=n},[]),setBackdropRef:T.useCallback(n=>{s.current.backdrop=n},[])})}const YP=T.forwardRef((e,t)=>{let{show:i=!1,role:s="dialog",className:n,style:r,children:o,backdrop:a=!0,keyboard:l=!0,onBackdropClick:c,onEscapeKeyDown:p,transition:g,runTransition:f,backdropTransition:y,runBackdropTransition:C,autoFocus:x=!0,enforceFocus:M=!0,restoreFocus:b=!0,restoreFocusOptions:R,renderDialog:I,renderBackdrop:P=Ne=>fe.jsx("div",Object.assign({},Ne)),manager:k,container:_,onShow:B,onHide:H=()=>{},onExit:V,onExited:U,onExiting:$,onEnter:te,onEntering:Ce,onEntered:be}=e,Re=dV(e,hV);const oe=l0(),Se=tV(_),K=gV(k),pe=S2(),q=w2(i),[W,Q]=T.useState(!i),ve=T.useRef(null);T.useImperativeHandle(t,()=>K,[K]),RC&&!q&&i&&(ve.current=Fx(oe==null?void 0:oe.document)),i&&W&&Q(!1);const se=ol(()=>{if(K.add(),Ee.current=ky(document,"keydown",me),ne.current=ky(document,"focus",()=>setTimeout(ue),!0),B&&B(),x){var Ne,qe;const ft=Fx((Ne=(qe=K.dialog)==null?void 0:qe.ownerDocument)!=null?Ne:oe==null?void 0:oe.document);K.dialog&&ft&&!HL(K.dialog,ft)&&(ve.current=ft,K.dialog.focus())}}),ye=ol(()=>{if(K.remove(),Ee.current==null||Ee.current(),ne.current==null||ne.current(),b){var Ne;(Ne=ve.current)==null||Ne.focus==null||Ne.focus(R),ve.current=null}});T.useEffect(()=>{!i||!Se||se()},[i,Se,se]),T.useEffect(()=>{W&&ye()},[W,ye]),J2(()=>{ye()});const ue=ol(()=>{if(!M||!pe()||!K.isTopModal())return;const Ne=Fx(oe==null?void 0:oe.document);K.dialog&&Ne&&!HL(K.dialog,Ne)&&K.dialog.focus()}),Me=ol(Ne=>{Ne.target===Ne.currentTarget&&(c==null||c(Ne),a===!0&&H())}),me=ol(Ne=>{l&&i2(Ne)&&K.isTopModal()&&(p==null||p(Ne),Ne.defaultPrevented||H())}),ne=T.useRef(),Ee=T.useRef(),ze=(...Ne)=>{Q(!0),U==null||U(...Ne)};if(!Se)return null;const Be=Object.assign({role:s,ref:K.setDialogRef,"aria-modal":s==="dialog"?!0:void 0},Re,{style:r,className:n,tabIndex:-1});let $e=I?I(Be):fe.jsx("div",Object.assign({},Be,{children:T.cloneElement(o,{role:"document"})}));$e=KL(g,f,{unmountOnExit:!0,mountOnEnter:!0,appear:!0,in:!!i,onExit:V,onExiting:$,onExited:ze,onEnter:te,onEntering:Ce,onEntered:be,children:$e});let tt=null;return a&&(tt=P({ref:K.setBackdropRef,onClick:Me}),tt=KL(y,C,{in:!!i,appear:!0,mountOnEnter:!0,unmountOnExit:!0,children:tt})),fe.jsx(fe.Fragment,{children:rh.createPortal(fe.jsxs(fe.Fragment,{children:[tt,$e]}),Se)})});YP.displayName="Modal";const fV=Object.assign(YP,{Manager:d0});function mV(e,t){return e.classList?e.classList.contains(t):(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")!==-1}function vV(e,t){e.classList?e.classList.add(t):mV(e,t)||(typeof e.className=="string"?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}function YL(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function yV(e,t){e.classList?e.classList.remove(t):typeof e.className=="string"?e.className=YL(e.className,t):e.setAttribute("class",YL(e.className&&e.className.baseVal||"",t))}const Pd={FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",STICKY_CONTENT:".sticky-top",NAVBAR_TOGGLER:".navbar-toggler"};class $P extends d0{adjustAndStore(t,i,s){const n=i.style[t];i.dataset[t]=n,ul(i,{[t]:`${parseFloat(ul(i,t))+s}px`})}restore(t,i){const s=i.dataset[t];s!==void 0&&(delete i.dataset[t],ul(i,{[t]:s}))}setContainerStyle(t){super.setContainerStyle(t);const i=this.getElement();if(vV(i,"modal-open"),!t.scrollBarWidth)return;const s=this.isRTL?"paddingLeft":"paddingRight",n=this.isRTL?"marginLeft":"marginRight";Yu(i,Pd.FIXED_CONTENT).forEach(r=>this.adjustAndStore(s,r,t.scrollBarWidth)),Yu(i,Pd.STICKY_CONTENT).forEach(r=>this.adjustAndStore(n,r,-t.scrollBarWidth)),Yu(i,Pd.NAVBAR_TOGGLER).forEach(r=>this.adjustAndStore(n,r,t.scrollBarWidth))}removeContainerStyle(t){super.removeContainerStyle(t);const i=this.getElement();yV(i,"modal-open");const s=this.isRTL?"paddingLeft":"paddingRight",n=this.isRTL?"marginLeft":"marginRight";Yu(i,Pd.FIXED_CONTENT).forEach(r=>this.restore(s,r)),Yu(i,Pd.STICKY_CONTENT).forEach(r=>this.restore(n,r)),Yu(i,Pd.NAVBAR_TOGGLER).forEach(r=>this.restore(n,r))}}let Ox;function CV(e){return Ox||(Ox=new $P(e)),Ox}const ZP=T.createContext({onHide(){}}),SV=T.forwardRef(({closeLabel:e="Close",closeVariant:t,closeButton:i=!1,onHide:s,children:n,...r},o)=>{const a=T.useContext(ZP),l=DC(()=>{a==null||a.onHide(),s==null||s()});return fe.jsxs("div",{ref:o,...r,children:[n,i&&fe.jsx(r0,{"aria-label":e,variant:t,onClick:l})]})}),XP=T.forwardRef(({className:e,bsPrefix:t,as:i="div",...s},n)=>(t=mi(t,"nav-item"),fe.jsx(i,{ref:n,className:Yt(e,t),...s})));XP.displayName="NavItem";const QP=T.forwardRef(({bsPrefix:e,className:t,as:i=IP,active:s,eventKey:n,disabled:r=!1,...o},a)=>{e=mi(e,"nav-link");const[l,c]=jP({key:o0(n,o.href),active:s,disabled:r,...o});return fe.jsx(i,{...o,...l,ref:a,disabled:r,className:Yt(t,e,r&&"disabled",c.isActive&&"active")})});QP.displayName="NavLink";const qP=T.forwardRef((e,t)=>{const{as:i="div",bsPrefix:s,variant:n,fill:r=!1,justify:o=!1,navbar:a,navbarScroll:l,className:c,activeKey:p,...g}=bP(e,{activeKey:"onSelect"}),f=mi(s,"nav");let y,C,x=!1;const M=T.useContext(fp),b=T.useContext(TP);return M?(y=M.bsPrefix,x=a??!0):b&&({cardHeaderBsPrefix:C}=b),fe.jsx(Q2,{as:i,ref:t,activeKey:p,className:Yt(c,{[f]:!x,[`${y}-nav`]:x,[`${y}-nav-scroll`]:x&&l,[`${C}-${n}`]:!!C,[`${f}-${n}`]:!!n,[`${f}-fill`]:r,[`${f}-justified`]:o}),...g})});qP.displayName="Nav";const Pg=Object.assign(qP,{Item:XP,Link:QP}),JP=T.forwardRef(({bsPrefix:e,className:t,as:i,...s},n)=>{e=mi(e,"navbar-brand");const r=i||(s.href?"a":"span");return fe.jsx(r,{...s,ref:n,className:Yt(t,e)})});JP.displayName="NavbarBrand";const eF=T.forwardRef(({children:e,bsPrefix:t,...i},s)=>{t=mi(t,"navbar-collapse");const n=T.useContext(fp);return fe.jsx(m2,{in:!!(n&&n.expanded),...i,children:fe.jsx("div",{ref:s,className:t,children:e})})});eF.displayName="NavbarCollapse";const tF=T.forwardRef(({bsPrefix:e,className:t,children:i,label:s="Toggle navigation",as:n="button",onClick:r,...o},a)=>{e=mi(e,"navbar-toggler");const{onToggle:l,expanded:c}=T.useContext(fp)||{},p=DC(g=>{r&&r(g),l&&l()});return n==="button"&&(o.type="button"),fe.jsx(n,{...o,ref:a,onClick:p,"aria-label":s,className:Yt(t,e,!c&&"collapsed"),children:i||fe.jsx("span",{className:`${e}-icon`})})});tF.displayName="NavbarToggle";const _b=new WeakMap,$L=(e,t)=>{if(!e||!t)return;const i=_b.get(t)||new Map;_b.set(t,i);let s=i.get(e);return s||(s=t.matchMedia(e),s.refCount=0,i.set(s.media,s)),s};function wV(e,t=typeof window>"u"?void 0:window){const i=$L(e,t),[s,n]=T.useState(()=>i?i.matches:!1);return H2(()=>{let r=$L(e,t);if(!r)return n(!1);let o=_b.get(t);const a=()=>{n(r.matches)};return r.refCount++,r.addListener(a),a(),()=>{r.removeListener(a),r.refCount--,r.refCount<=0&&(o==null||o.delete(r.media)),r=void 0}},[e]),s}function xV(e){const t=Object.keys(e);function i(a,l){return a===l?l:a?`${a} and ${l}`:l}function s(a){return t[Math.min(t.indexOf(a)+1,t.length-1)]}function n(a){const l=s(a);let c=e[l];return typeof c=="number"?c=`${c-.2}px`:c=`calc(${c} - 0.2px)`,`(max-width: ${c})`}function r(a){let l=e[a];return typeof l=="number"&&(l=`${l}px`),`(min-width: ${l})`}function o(a,l,c){let p;typeof a=="object"?(p=a,c=l,l=!0):(l=l||!0,p={[a]:l});let g=T.useMemo(()=>Object.entries(p).reduce((f,[y,C])=>((C==="up"||C===!0)&&(f=i(f,r(y))),(C==="down"||C===!0)&&(f=i(f,n(y))),f),""),[JSON.stringify(p)]);return wV(g,c)}return o}const bV=xV({xs:0,sm:576,md:768,lg:992,xl:1200,xxl:1400}),iF=T.forwardRef(({className:e,bsPrefix:t,as:i="div",...s},n)=>(t=mi(t,"offcanvas-body"),fe.jsx(i,{ref:n,className:Yt(e,t),...s})));iF.displayName="OffcanvasBody";const MV={[wo]:"show",[rl]:"show"},sF=T.forwardRef(({bsPrefix:e,className:t,children:i,in:s=!1,mountOnEnter:n=!1,unmountOnExit:r=!1,appear:o=!1,...a},l)=>(e=mi(e,"offcanvas"),fe.jsx(n0,{ref:l,addEndListener:s0,in:s,mountOnEnter:n,unmountOnExit:r,appear:o,...a,childRef:MC(i),children:(c,p)=>T.cloneElement(i,{...p,className:Yt(t,i.props.className,(c===wo||c===yf)&&`${e}-toggling`,MV[c])})})));sF.displayName="OffcanvasToggling";const nF=T.forwardRef(({bsPrefix:e,className:t,closeLabel:i="Close",closeButton:s=!1,...n},r)=>(e=mi(e,"offcanvas-header"),fe.jsx(SV,{ref:r,...n,className:Yt(t,e),closeLabel:i,closeButton:s})));nF.displayName="OffcanvasHeader";const RV=y2("h5"),rF=T.forwardRef(({className:e,bsPrefix:t,as:i=RV,...s},n)=>(t=mi(t,"offcanvas-title"),fe.jsx(i,{ref:n,className:Yt(e,t),...s})));rF.displayName="OffcanvasTitle";function DV(e){return fe.jsx(sF,{...e})}function EV(e){return fe.jsx(LP,{...e})}const oF=T.forwardRef(({bsPrefix:e,className:t,children:i,"aria-labelledby":s,placement:n="start",responsive:r,show:o=!1,backdrop:a=!0,keyboard:l=!0,scroll:c=!1,onEscapeKeyDown:p,onShow:g,onHide:f,container:y,autoFocus:C=!0,enforceFocus:x=!0,restoreFocus:M=!0,restoreFocusOptions:b,onEntered:R,onExit:I,onExiting:P,onEnter:k,onEntering:_,onExited:B,backdropClassName:H,manager:V,renderStaticNode:U=!1,...$},te)=>{const Ce=T.useRef();e=mi(e,"offcanvas");const[be,Re]=T.useState(!1),oe=DC(f),Se=bV(r||"xs","up");T.useEffect(()=>{Re(r?o&&!Se:o)},[o,r,Se]);const K=T.useMemo(()=>({onHide:oe}),[oe]);function pe(){return V||(c?(Ce.current||(Ce.current=new $P({handleContainerOverflow:!1})),Ce.current):CV())}const q=(se,...ye)=>{se&&(se.style.visibility="visible"),k==null||k(se,...ye)},W=(se,...ye)=>{se&&(se.style.visibility=""),B==null||B(...ye)},Q=T.useCallback(se=>fe.jsx("div",{...se,className:Yt(`${e}-backdrop`,H)}),[H,e]),ve=se=>fe.jsx("div",{...se,...$,className:Yt(t,r?`${e}-${r}`:e,`${e}-${n}`),"aria-labelledby":s,children:i});return fe.jsxs(fe.Fragment,{children:[!be&&(r||U)&&ve({}),fe.jsx(ZP.Provider,{value:K,children:fe.jsx(fV,{show:be,ref:te,backdrop:a,container:y,keyboard:l,autoFocus:C,enforceFocus:x&&!c,restoreFocus:M,restoreFocusOptions:b,onEscapeKeyDown:p,onShow:g,onHide:oe,onEnter:q,onEntering:_,onEntered:R,onExit:I,onExiting:P,onExited:W,manager:pe(),transition:DV,backdropTransition:EV,renderBackdrop:Q,renderDialog:ve})})]})});oF.displayName="Offcanvas";const IV=Object.assign(oF,{Body:iF,Header:nF,Title:rF}),aF=T.forwardRef(({onHide:e,...t},i)=>{const s=T.useContext(fp),n=DC(()=>{s==null||s.onToggle==null||s.onToggle(),e==null||e()});return fe.jsx(IV,{ref:i,show:!!(s!=null&&s.expanded),...t,renderStaticNode:!0,onHide:n})});aF.displayName="NavbarOffcanvas";const lF=T.forwardRef(({className:e,bsPrefix:t,as:i="span",...s},n)=>(t=mi(t,"navbar-text"),fe.jsx(i,{ref:n,className:Yt(e,t),...s})));lF.displayName="NavbarText";const cF=T.forwardRef((e,t)=>{const{bsPrefix:i,expand:s=!0,variant:n="light",bg:r,fixed:o,sticky:a,className:l,as:c="nav",expanded:p,onToggle:g,onSelect:f,collapseOnSelect:y=!1,...C}=bP(e,{expanded:"onToggle"}),x=mi(i,"navbar"),M=T.useCallback((...I)=>{f==null||f(...I),y&&p&&(g==null||g(!1))},[f,y,p,g]);C.role===void 0&&c!=="nav"&&(C.role="navigation");let b=`${x}-expand`;typeof s=="string"&&(b=`${b}-${s}`);const R=T.useMemo(()=>({onToggle:()=>g==null?void 0:g(!p),bsPrefix:x,expanded:!!p,expand:s}),[x,p,s,g]);return fe.jsx(fp.Provider,{value:R,children:fe.jsx(Ny.Provider,{value:M,children:fe.jsx(c,{ref:t,...C,className:Yt(l,x,s&&b,n&&`${x}-${n}`,r&&`bg-${r}`,a&&`sticky-${a}`,o&&`fixed-${o}`)})})})});cF.displayName="Navbar";const _x=Object.assign(cF,{Brand:JP,Collapse:eF,Offcanvas:aF,Text:lF,Toggle:tF}),LV=T.createContext(null),Bx={didCatch:!1,error:null};class TV extends T.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=Bx}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var i,s,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];(i=(s=this.props).onReset)===null||i===void 0||i.call(s,{args:r,reason:"imperative-api"}),this.setState(Bx)}}componentDidCatch(t,i){var s,n;(s=(n=this.props).onError)===null||s===void 0||s.call(n,t,i)}componentDidUpdate(t,i){const{didCatch:s}=this.state,{resetKeys:n}=this.props;if(s&&i.error!==null&&AV(t.resetKeys,n)){var r,o;(r=(o=this.props).onReset)===null||r===void 0||r.call(o,{next:n,prev:t.resetKeys,reason:"keys"}),this.setState(Bx)}}render(){const{children:t,fallbackRender:i,FallbackComponent:s,fallback:n}=this.props,{didCatch:r,error:o}=this.state;let a=t;if(r){const l={error:o,resetErrorBoundary:this.resetErrorBoundary};if(typeof i=="function")a=i(l);else if(s)a=T.createElement(s,l);else if(n!==void 0)a=n;else throw o}return T.createElement(LV.Provider,{value:{didCatch:r,error:o,resetErrorBoundary:this.resetErrorBoundary}},a)}}function AV(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((i,s)=>!Object.is(i,t[s]))}function uF(e,t){const i=T.useRef(t);T.useEffect(function(){t!==i.current&&e.attributionControl!=null&&(i.current!=null&&e.attributionControl.removeAttribution(i.current),t!=null&&e.attributionControl.addAttribution(t)),i.current=t},[e,t])}const PV=1;function FV(e){return Object.freeze({__version:PV,map:e})}function kV(e,t){return Object.freeze({...e,...t})}const hF=T.createContext(null),dF=hF.Provider;function pF(){const e=T.useContext(hF);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function NV(e){function t(i,s){const{instance:n,context:r}=e(i).current;return T.useImperativeHandle(s,()=>n),i.children==null?null:De.createElement(dF,{value:r},i.children)}return T.forwardRef(t)}function OV(e){function t(i,s){const[n,r]=T.useState(!1),{instance:o}=e(i,r).current;T.useImperativeHandle(s,()=>o),T.useEffect(function(){n&&o.update()},[o,n,i.children]);const a=o._contentNode;return a?tm.createPortal(i.children,a):null}return T.forwardRef(t)}function _V(e){function t(i,s){const{instance:n}=e(i).current;return T.useImperativeHandle(s,()=>n),null}return T.forwardRef(t)}function gF(e,t){const i=T.useRef();T.useEffect(function(){return t!=null&&e.instance.on(t),i.current=t,function(){i.current!=null&&e.instance.off(i.current),i.current=null}},[e,t])}function p0(e,t){const i=e.pane??t.pane;return i?{...e,pane:i}:e}function BV(e,t){return function(s,n){const r=pF(),o=e(p0(s,r),r);return uF(r.map,s.attribution),gF(o.current,s.eventHandlers),t(o.current,r,s,n),o}}var Ug={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var GV=Ug.exports,ZL;function zV(){return ZL||(ZL=1,function(e,t){(function(i,s){s(t)})(GV,function(i){var s="1.9.4";function n(h){var m,S,D,N;for(S=1,D=arguments.length;S<D;S++){N=arguments[S];for(m in N)h[m]=N[m]}return h}var r=Object.create||function(){function h(){}return function(m){return h.prototype=m,new h}}();function o(h,m){var S=Array.prototype.slice;if(h.bind)return h.bind.apply(h,S.call(arguments,1));var D=S.call(arguments,2);return function(){return h.apply(m,D.length?D.concat(S.call(arguments)):arguments)}}var a=0;function l(h){return"_leaflet_id"in h||(h._leaflet_id=++a),h._leaflet_id}function c(h,m,S){var D,N,z,Y;return Y=function(){D=!1,N&&(z.apply(S,N),N=!1)},z=function(){D?N=arguments:(h.apply(S,arguments),setTimeout(Y,m),D=!0)},z}function p(h,m,S){var D=m[1],N=m[0],z=D-N;return h===D&&S?h:((h-N)%z+z)%z+N}function g(){return!1}function f(h,m){if(m===!1)return h;var S=Math.pow(10,m===void 0?6:m);return Math.round(h*S)/S}function y(h){return h.trim?h.trim():h.replace(/^\s+|\s+$/g,"")}function C(h){return y(h).split(/\s+/)}function x(h,m){Object.prototype.hasOwnProperty.call(h,"options")||(h.options=h.options?r(h.options):{});for(var S in m)h.options[S]=m[S];return h.options}function M(h,m,S){var D=[];for(var N in h)D.push(encodeURIComponent(S?N.toUpperCase():N)+"="+encodeURIComponent(h[N]));return(!m||m.indexOf("?")===-1?"?":"&")+D.join("&")}var b=/\{ *([\w_ -]+) *\}/g;function R(h,m){return h.replace(b,function(S,D){var N=m[D];if(N===void 0)throw new Error("No value provided for variable "+S);return typeof N=="function"&&(N=N(m)),N})}var I=Array.isArray||function(h){return Object.prototype.toString.call(h)==="[object Array]"};function P(h,m){for(var S=0;S<h.length;S++)if(h[S]===m)return S;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function _(h){return window["webkit"+h]||window["moz"+h]||window["ms"+h]}var B=0;function H(h){var m=+new Date,S=Math.max(0,16-(m-B));return B=m+S,window.setTimeout(h,S)}var V=window.requestAnimationFrame||_("RequestAnimationFrame")||H,U=window.cancelAnimationFrame||_("CancelAnimationFrame")||_("CancelRequestAnimationFrame")||function(h){window.clearTimeout(h)};function $(h,m,S){if(S&&V===H)h.call(m);else return V.call(window,o(h,m))}function te(h){h&&U.call(window,h)}var Ce={__proto__:null,extend:n,create:r,bind:o,get lastId(){return a},stamp:l,throttle:c,wrapNum:p,falseFn:g,formatNum:f,trim:y,splitWords:C,setOptions:x,getParamString:M,template:R,isArray:I,indexOf:P,emptyImageUrl:k,requestFn:V,cancelFn:U,requestAnimFrame:$,cancelAnimFrame:te};function be(){}be.extend=function(h){var m=function(){x(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=m.__super__=this.prototype,D=r(S);D.constructor=m,m.prototype=D;for(var N in this)Object.prototype.hasOwnProperty.call(this,N)&&N!=="prototype"&&N!=="__super__"&&(m[N]=this[N]);return h.statics&&n(m,h.statics),h.includes&&(Re(h.includes),n.apply(null,[D].concat(h.includes))),n(D,h),delete D.statics,delete D.includes,D.options&&(D.options=S.options?r(S.options):{},n(D.options,h.options)),D._initHooks=[],D.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var z=0,Y=D._initHooks.length;z<Y;z++)D._initHooks[z].call(this)}},m},be.include=function(h){var m=this.prototype.options;return n(this.prototype,h),h.options&&(this.prototype.options=m,this.mergeOptions(h.options)),this},be.mergeOptions=function(h){return n(this.prototype.options,h),this},be.addInitHook=function(h){var m=Array.prototype.slice.call(arguments,1),S=typeof h=="function"?h:function(){this[h].apply(this,m)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function Re(h){if(!(typeof L>"u"||!L||!L.Mixin)){h=I(h)?h:[h];for(var m=0;m<h.length;m++)h[m]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var oe={on:function(h,m,S){if(typeof h=="object")for(var D in h)this._on(D,h[D],m);else{h=C(h);for(var N=0,z=h.length;N<z;N++)this._on(h[N],m,S)}return this},off:function(h,m,S){if(!arguments.length)delete this._events;else if(typeof h=="object")for(var D in h)this._off(D,h[D],m);else{h=C(h);for(var N=arguments.length===1,z=0,Y=h.length;z<Y;z++)N?this._off(h[z]):this._off(h[z],m,S)}return this},_on:function(h,m,S,D){if(typeof m!="function"){console.warn("wrong listener type: "+typeof m);return}if(this._listens(h,m,S)===!1){S===this&&(S=void 0);var N={fn:m,ctx:S};D&&(N.once=!0),this._events=this._events||{},this._events[h]=this._events[h]||[],this._events[h].push(N)}},_off:function(h,m,S){var D,N,z;if(this._events&&(D=this._events[h],!!D)){if(arguments.length===1){if(this._firingCount)for(N=0,z=D.length;N<z;N++)D[N].fn=g;delete this._events[h];return}if(typeof m!="function"){console.warn("wrong listener type: "+typeof m);return}var Y=this._listens(h,m,S);if(Y!==!1){var ie=D[Y];this._firingCount&&(ie.fn=g,this._events[h]=D=D.slice()),D.splice(Y,1)}}},fire:function(h,m,S){if(!this.listens(h,S))return this;var D=n({},m,{type:h,target:this,sourceTarget:m&&m.sourceTarget||this});if(this._events){var N=this._events[h];if(N){this._firingCount=this._firingCount+1||1;for(var z=0,Y=N.length;z<Y;z++){var ie=N[z],ce=ie.fn;ie.once&&this.off(h,ce,ie.ctx),ce.call(ie.ctx||this,D)}this._firingCount--}}return S&&this._propagateEvent(D),this},listens:function(h,m,S,D){typeof h!="string"&&console.warn('"string" type argument expected');var N=m;typeof m!="function"&&(D=!!m,N=void 0,S=void 0);var z=this._events&&this._events[h];if(z&&z.length&&this._listens(h,N,S)!==!1)return!0;if(D){for(var Y in this._eventParents)if(this._eventParents[Y].listens(h,m,S,D))return!0}return!1},_listens:function(h,m,S){if(!this._events)return!1;var D=this._events[h]||[];if(!m)return!!D.length;S===this&&(S=void 0);for(var N=0,z=D.length;N<z;N++)if(D[N].fn===m&&D[N].ctx===S)return N;return!1},once:function(h,m,S){if(typeof h=="object")for(var D in h)this._on(D,h[D],m,!0);else{h=C(h);for(var N=0,z=h.length;N<z;N++)this._on(h[N],m,S,!0)}return this},addEventParent:function(h){return this._eventParents=this._eventParents||{},this._eventParents[l(h)]=h,this},removeEventParent:function(h){return this._eventParents&&delete this._eventParents[l(h)],this},_propagateEvent:function(h){for(var m in this._eventParents)this._eventParents[m].fire(h.type,n({layer:h.target,propagatedFrom:h.target},h),!0)}};oe.addEventListener=oe.on,oe.removeEventListener=oe.clearAllEventListeners=oe.off,oe.addOneTimeEventListener=oe.once,oe.fireEvent=oe.fire,oe.hasEventListeners=oe.listens;var Se=be.extend(oe);function K(h,m,S){this.x=S?Math.round(h):h,this.y=S?Math.round(m):m}var pe=Math.trunc||function(h){return h>0?Math.floor(h):Math.ceil(h)};K.prototype={clone:function(){return new K(this.x,this.y)},add:function(h){return this.clone()._add(q(h))},_add:function(h){return this.x+=h.x,this.y+=h.y,this},subtract:function(h){return this.clone()._subtract(q(h))},_subtract:function(h){return this.x-=h.x,this.y-=h.y,this},divideBy:function(h){return this.clone()._divideBy(h)},_divideBy:function(h){return this.x/=h,this.y/=h,this},multiplyBy:function(h){return this.clone()._multiplyBy(h)},_multiplyBy:function(h){return this.x*=h,this.y*=h,this},scaleBy:function(h){return new K(this.x*h.x,this.y*h.y)},unscaleBy:function(h){return new K(this.x/h.x,this.y/h.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=pe(this.x),this.y=pe(this.y),this},distanceTo:function(h){h=q(h);var m=h.x-this.x,S=h.y-this.y;return Math.sqrt(m*m+S*S)},equals:function(h){return h=q(h),h.x===this.x&&h.y===this.y},contains:function(h){return h=q(h),Math.abs(h.x)<=Math.abs(this.x)&&Math.abs(h.y)<=Math.abs(this.y)},toString:function(){return"Point("+f(this.x)+", "+f(this.y)+")"}};function q(h,m,S){return h instanceof K?h:I(h)?new K(h[0],h[1]):h==null?h:typeof h=="object"&&"x"in h&&"y"in h?new K(h.x,h.y):new K(h,m,S)}function W(h,m){if(h)for(var S=m?[h,m]:h,D=0,N=S.length;D<N;D++)this.extend(S[D])}W.prototype={extend:function(h){var m,S;if(!h)return this;if(h instanceof K||typeof h[0]=="number"||"x"in h)m=S=q(h);else if(h=Q(h),m=h.min,S=h.max,!m||!S)return this;return!this.min&&!this.max?(this.min=m.clone(),this.max=S.clone()):(this.min.x=Math.min(m.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(m.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(h){return q((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,h)},getBottomLeft:function(){return q(this.min.x,this.max.y)},getTopRight:function(){return q(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(h){var m,S;return typeof h[0]=="number"||h instanceof K?h=q(h):h=Q(h),h instanceof W?(m=h.min,S=h.max):m=S=h,m.x>=this.min.x&&S.x<=this.max.x&&m.y>=this.min.y&&S.y<=this.max.y},intersects:function(h){h=Q(h);var m=this.min,S=this.max,D=h.min,N=h.max,z=N.x>=m.x&&D.x<=S.x,Y=N.y>=m.y&&D.y<=S.y;return z&&Y},overlaps:function(h){h=Q(h);var m=this.min,S=this.max,D=h.min,N=h.max,z=N.x>m.x&&D.x<S.x,Y=N.y>m.y&&D.y<S.y;return z&&Y},isValid:function(){return!!(this.min&&this.max)},pad:function(h){var m=this.min,S=this.max,D=Math.abs(m.x-S.x)*h,N=Math.abs(m.y-S.y)*h;return Q(q(m.x-D,m.y-N),q(S.x+D,S.y+N))},equals:function(h){return h?(h=Q(h),this.min.equals(h.getTopLeft())&&this.max.equals(h.getBottomRight())):!1}};function Q(h,m){return!h||h instanceof W?h:new W(h,m)}function ve(h,m){if(h)for(var S=m?[h,m]:h,D=0,N=S.length;D<N;D++)this.extend(S[D])}ve.prototype={extend:function(h){var m=this._southWest,S=this._northEast,D,N;if(h instanceof ye)D=h,N=h;else if(h instanceof ve){if(D=h._southWest,N=h._northEast,!D||!N)return this}else return h?this.extend(ue(h)||se(h)):this;return!m&&!S?(this._southWest=new ye(D.lat,D.lng),this._northEast=new ye(N.lat,N.lng)):(m.lat=Math.min(D.lat,m.lat),m.lng=Math.min(D.lng,m.lng),S.lat=Math.max(N.lat,S.lat),S.lng=Math.max(N.lng,S.lng)),this},pad:function(h){var m=this._southWest,S=this._northEast,D=Math.abs(m.lat-S.lat)*h,N=Math.abs(m.lng-S.lng)*h;return new ve(new ye(m.lat-D,m.lng-N),new ye(S.lat+D,S.lng+N))},getCenter:function(){return new ye((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ye(this.getNorth(),this.getWest())},getSouthEast:function(){return new ye(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(h){typeof h[0]=="number"||h instanceof ye||"lat"in h?h=ue(h):h=se(h);var m=this._southWest,S=this._northEast,D,N;return h instanceof ve?(D=h.getSouthWest(),N=h.getNorthEast()):D=N=h,D.lat>=m.lat&&N.lat<=S.lat&&D.lng>=m.lng&&N.lng<=S.lng},intersects:function(h){h=se(h);var m=this._southWest,S=this._northEast,D=h.getSouthWest(),N=h.getNorthEast(),z=N.lat>=m.lat&&D.lat<=S.lat,Y=N.lng>=m.lng&&D.lng<=S.lng;return z&&Y},overlaps:function(h){h=se(h);var m=this._southWest,S=this._northEast,D=h.getSouthWest(),N=h.getNorthEast(),z=N.lat>m.lat&&D.lat<S.lat,Y=N.lng>m.lng&&D.lng<S.lng;return z&&Y},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(h,m){return h?(h=se(h),this._southWest.equals(h.getSouthWest(),m)&&this._northEast.equals(h.getNorthEast(),m)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function se(h,m){return h instanceof ve?h:new ve(h,m)}function ye(h,m,S){if(isNaN(h)||isNaN(m))throw new Error("Invalid LatLng object: ("+h+", "+m+")");this.lat=+h,this.lng=+m,S!==void 0&&(this.alt=+S)}ye.prototype={equals:function(h,m){if(!h)return!1;h=ue(h);var S=Math.max(Math.abs(this.lat-h.lat),Math.abs(this.lng-h.lng));return S<=(m===void 0?1e-9:m)},toString:function(h){return"LatLng("+f(this.lat,h)+", "+f(this.lng,h)+")"},distanceTo:function(h){return me.distance(this,ue(h))},wrap:function(){return me.wrapLatLng(this)},toBounds:function(h){var m=180*h/40075017,S=m/Math.cos(Math.PI/180*this.lat);return se([this.lat-m,this.lng-S],[this.lat+m,this.lng+S])},clone:function(){return new ye(this.lat,this.lng,this.alt)}};function ue(h,m,S){return h instanceof ye?h:I(h)&&typeof h[0]!="object"?h.length===3?new ye(h[0],h[1],h[2]):h.length===2?new ye(h[0],h[1]):null:h==null?h:typeof h=="object"&&"lat"in h?new ye(h.lat,"lng"in h?h.lng:h.lon,h.alt):m===void 0?null:new ye(h,m,S)}var Me={latLngToPoint:function(h,m){var S=this.projection.project(h),D=this.scale(m);return this.transformation._transform(S,D)},pointToLatLng:function(h,m){var S=this.scale(m),D=this.transformation.untransform(h,S);return this.projection.unproject(D)},project:function(h){return this.projection.project(h)},unproject:function(h){return this.projection.unproject(h)},scale:function(h){return 256*Math.pow(2,h)},zoom:function(h){return Math.log(h/256)/Math.LN2},getProjectedBounds:function(h){if(this.infinite)return null;var m=this.projection.bounds,S=this.scale(h),D=this.transformation.transform(m.min,S),N=this.transformation.transform(m.max,S);return new W(D,N)},infinite:!1,wrapLatLng:function(h){var m=this.wrapLng?p(h.lng,this.wrapLng,!0):h.lng,S=this.wrapLat?p(h.lat,this.wrapLat,!0):h.lat,D=h.alt;return new ye(S,m,D)},wrapLatLngBounds:function(h){var m=h.getCenter(),S=this.wrapLatLng(m),D=m.lat-S.lat,N=m.lng-S.lng;if(D===0&&N===0)return h;var z=h.getSouthWest(),Y=h.getNorthEast(),ie=new ye(z.lat-D,z.lng-N),ce=new ye(Y.lat-D,Y.lng-N);return new ve(ie,ce)}},me=n({},Me,{wrapLng:[-180,180],R:6371e3,distance:function(h,m){var S=Math.PI/180,D=h.lat*S,N=m.lat*S,z=Math.sin((m.lat-h.lat)*S/2),Y=Math.sin((m.lng-h.lng)*S/2),ie=z*z+Math.cos(D)*Math.cos(N)*Y*Y,ce=2*Math.atan2(Math.sqrt(ie),Math.sqrt(1-ie));return this.R*ce}}),ne=6378137,Ee={R:ne,MAX_LATITUDE:85.0511287798,project:function(h){var m=Math.PI/180,S=this.MAX_LATITUDE,D=Math.max(Math.min(S,h.lat),-S),N=Math.sin(D*m);return new K(this.R*h.lng*m,this.R*Math.log((1+N)/(1-N))/2)},unproject:function(h){var m=180/Math.PI;return new ye((2*Math.atan(Math.exp(h.y/this.R))-Math.PI/2)*m,h.x*m/this.R)},bounds:function(){var h=ne*Math.PI;return new W([-h,-h],[h,h])}()};function ze(h,m,S,D){if(I(h)){this._a=h[0],this._b=h[1],this._c=h[2],this._d=h[3];return}this._a=h,this._b=m,this._c=S,this._d=D}ze.prototype={transform:function(h,m){return this._transform(h.clone(),m)},_transform:function(h,m){return m=m||1,h.x=m*(this._a*h.x+this._b),h.y=m*(this._c*h.y+this._d),h},untransform:function(h,m){return m=m||1,new K((h.x/m-this._b)/this._a,(h.y/m-this._d)/this._c)}};function Be(h,m,S,D){return new ze(h,m,S,D)}var $e=n({},me,{code:"EPSG:3857",projection:Ee,transformation:function(){var h=.5/(Math.PI*Ee.R);return Be(h,.5,-h,.5)}()}),tt=n({},$e,{code:"EPSG:900913"});function Ne(h){return document.createElementNS("http://www.w3.org/2000/svg",h)}function qe(h,m){var S="",D,N,z,Y,ie,ce;for(D=0,z=h.length;D<z;D++){for(ie=h[D],N=0,Y=ie.length;N<Y;N++)ce=ie[N],S+=(N?"L":"M")+ce.x+" "+ce.y;S+=m?xe.svg?"z":"x":""}return S||"M0 0"}var ft=document.documentElement.style,Rt="ActiveXObject"in window,Dt=Rt&&!document.addEventListener,xt="msLaunchUri"in navigator&&!("documentMode"in document),Mt=Ve("webkit"),Ri=Ve("android"),Ki=Ve("android 2")||Ve("android 3"),Qs=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Yi=Ri&&Ve("Google")&&Qs<537&&!("AudioNode"in window),ut=!!window.opera,ni=!xt&&Ve("chrome"),vi=Ve("gecko")&&!Mt&&!ut&&!Rt,zl=!ni&&Ve("safari"),Gi=Ve("phantom"),Dn="OTransition"in ft,jh=navigator.platform.indexOf("Win")===0,Hl=Rt&&"transition"in ft,Vl="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Ki,du="MozPerspective"in ft,Go=!window.L_DISABLE_3D&&(Hl||Vl||du)&&!Dn&&!Gi,Cr=typeof orientation<"u"||Ve("mobile"),La=Cr&&Mt,pu=Cr&&Vl,Ta=!window.PointerEvent&&window.MSPointerEvent,io=!!(window.PointerEvent||Ta),Sr="ontouchstart"in window||!!window.TouchEvent,Aa=!window.L_NO_TOUCH&&(Sr||io),Pa=Cr&&ut,Uh=Cr&&vi,Kh=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,X=function(){var h=!1;try{var m=Object.defineProperty({},"passive",{get:function(){h=!0}});window.addEventListener("testPassiveEventSupport",g,m),window.removeEventListener("testPassiveEventSupport",g,m)}catch{}return h}(),ee=function(){return!!document.createElement("canvas").getContext}(),ge=!!(document.createElementNS&&Ne("svg").createSVGRect),Le=!!ge&&function(){var h=document.createElement("div");return h.innerHTML="<svg/>",(h.firstChild&&h.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),je=!ge&&function(){try{var h=document.createElement("div");h.innerHTML='<v:shape adj="1"/>';var m=h.firstChild;return m.style.behavior="url(#default#VML)",m&&typeof m.adj=="object"}catch{return!1}}(),Je=navigator.platform.indexOf("Mac")===0,dt=navigator.platform.indexOf("Linux")===0;function Ve(h){return navigator.userAgent.toLowerCase().indexOf(h)>=0}var xe={ie:Rt,ielt9:Dt,edge:xt,webkit:Mt,android:Ri,android23:Ki,androidStock:Yi,opera:ut,chrome:ni,gecko:vi,safari:zl,phantom:Gi,opera12:Dn,win:jh,ie3d:Hl,webkit3d:Vl,gecko3d:du,any3d:Go,mobile:Cr,mobileWebkit:La,mobileWebkit3d:pu,msPointer:Ta,pointer:io,touch:Aa,touchNative:Sr,mobileOpera:Pa,mobileGecko:Uh,retina:Kh,passiveEvents:X,canvas:ee,svg:ge,vml:je,inlineSvg:Le,mac:Je,linux:dt},He=xe.msPointer?"MSPointerDown":"pointerdown",ht=xe.msPointer?"MSPointerMove":"pointermove",wt=xe.msPointer?"MSPointerUp":"pointerup",ei=xe.msPointer?"MSPointerCancel":"pointercancel",Li={touchstart:He,touchmove:ht,touchend:wt,touchcancel:ei},Bt={touchstart:ri,touchmove:In,touchend:In,touchcancel:In},kt={},yi=!1;function zo(h,m,S){return m==="touchstart"&&ka(),Bt[m]?(S=Bt[m].bind(this,S),h.addEventListener(Li[m],S,!1),S):(console.warn("wrong event specified:",m),g)}function Ho(h,m,S){if(!Li[m]){console.warn("wrong event specified:",m);return}h.removeEventListener(Li[m],S,!1)}function En(h){kt[h.pointerId]=h}function qs(h){kt[h.pointerId]&&(kt[h.pointerId]=h)}function Fa(h){delete kt[h.pointerId]}function ka(){yi||(document.addEventListener(He,En,!0),document.addEventListener(ht,qs,!0),document.addEventListener(wt,Fa,!0),document.addEventListener(ei,Fa,!0),yi=!0)}function In(h,m){if(m.pointerType!==(m.MSPOINTER_TYPE_MOUSE||"mouse")){m.touches=[];for(var S in kt)m.touches.push(kt[S]);m.changedTouches=[m],h(m)}}function ri(h,m){m.MSPOINTER_TYPE_TOUCH&&m.pointerType===m.MSPOINTER_TYPE_TOUCH&&Ti(m),In(h,m)}function Wl(h){var m={},S,D;for(D in h)S=h[D],m[D]=S&&S.bind?S.bind(h):S;return h=m,m.type="dblclick",m.detail=2,m.isTrusted=!1,m._simulated=!0,m}var Vt=200;function $i(h,m){h.addEventListener("dblclick",m);var S=0,D;function N(z){if(z.detail!==1){D=z.detail;return}if(!(z.pointerType==="mouse"||z.sourceCapabilities&&!z.sourceCapabilities.firesTouchEvents)){var Y=Ba(z);if(!(Y.some(function(ce){return ce instanceof HTMLLabelElement&&ce.attributes.for})&&!Y.some(function(ce){return ce instanceof HTMLInputElement||ce instanceof HTMLSelectElement}))){var ie=Date.now();ie-S<=Vt?(D++,D===2&&m(Wl(z))):D=1,S=ie}}}return h.addEventListener("click",N),{dblclick:m,simDblclick:N}}function so(h,m){h.removeEventListener("dblclick",m.dblclick),h.removeEventListener("click",m.simDblclick)}var no=Kl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ti=Kl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ln=ti==="webkitTransition"||ti==="OTransition"?ti+"End":"transitionend";function Ps(h){return typeof h=="string"?document.getElementById(h):h}function Na(h,m){var S=h.style[m]||h.currentStyle&&h.currentStyle[m];if((!S||S==="auto")&&document.defaultView){var D=document.defaultView.getComputedStyle(h,null);S=D?D[m]:null}return S==="auto"?null:S}function Ct(h,m,S){var D=document.createElement(h);return D.className=m||"",S&&S.appendChild(D),D}function Ci(h){var m=h.parentNode;m&&m.removeChild(h)}function Yh(h){for(;h.firstChild;)h.removeChild(h.firstChild)}function jl(h){var m=h.parentNode;m&&m.lastChild!==h&&m.appendChild(h)}function ro(h){var m=h.parentNode;m&&m.firstChild!==h&&m.insertBefore(h,m.firstChild)}function Ul(h,m){if(h.classList!==void 0)return h.classList.contains(m);var S=$h(h);return S.length>0&&new RegExp("(^|\\s)"+m+"(\\s|$)").test(S)}function vt(h,m){if(h.classList!==void 0)for(var S=C(m),D=0,N=S.length;D<N;D++)h.classList.add(S[D]);else if(!Ul(h,m)){var z=$h(h);Vp(h,(z?z+" ":"")+m)}}function gi(h,m){h.classList!==void 0?h.classList.remove(m):Vp(h,y((" "+$h(h)+" ").replace(" "+m+" "," ")))}function Vp(h,m){h.className.baseVal===void 0?h.className=m:h.className.baseVal=m}function $h(h){return h.correspondingElement&&(h=h.correspondingElement),h.className.baseVal===void 0?h.className:h.className.baseVal}function Fs(h,m){"opacity"in h.style?h.style.opacity=m:"filter"in h.style&&Tm(h,m)}function Tm(h,m){var S=!1,D="DXImageTransform.Microsoft.Alpha";try{S=h.filters.item(D)}catch{if(m===1)return}m=Math.round(m*100),S?(S.Enabled=m!==100,S.Opacity=m):h.style.filter+=" progid:"+D+"(opacity="+m+")"}function Kl(h){for(var m=document.documentElement.style,S=0;S<h.length;S++)if(h[S]in m)return h[S];return!1}function qn(h,m,S){var D=m||new K(0,0);h.style[no]=(xe.ie3d?"translate("+D.x+"px,"+D.y+"px)":"translate3d("+D.x+"px,"+D.y+"px,0)")+(S?" scale("+S+")":"")}function zi(h,m){h._leaflet_pos=m,xe.any3d?qn(h,m):(h.style.left=m.x+"px",h.style.top=m.y+"px")}function oo(h){return h._leaflet_pos||new K(0,0)}var Nt,Yl,Zh;if("onselectstart"in document)Nt=function(){pt(window,"selectstart",Ti)},Yl=function(){oi(window,"selectstart",Ti)};else{var Oa=Kl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);Nt=function(){if(Oa){var h=document.documentElement.style;Zh=h[Oa],h[Oa]="none"}},Yl=function(){Oa&&(document.documentElement.style[Oa]=Zh,Zh=void 0)}}function Xh(){pt(window,"dragstart",Ti)}function Qh(){oi(window,"dragstart",Ti)}var gu,fu;function $l(h){for(;h.tabIndex===-1;)h=h.parentNode;h.style&&(Jn(),gu=h,fu=h.style.outlineStyle,h.style.outlineStyle="none",pt(window,"keydown",Jn))}function Jn(){gu&&(gu.style.outlineStyle=fu,gu=void 0,fu=void 0,oi(window,"keydown",Jn))}function ao(h){do h=h.parentNode;while((!h.offsetWidth||!h.offsetHeight)&&h!==document.body);return h}function wr(h){var m=h.getBoundingClientRect();return{x:m.width/h.offsetWidth||1,y:m.height/h.offsetHeight||1,boundingClientRect:m}}var mu={__proto__:null,TRANSFORM:no,TRANSITION:ti,TRANSITION_END:Ln,get:Ps,getStyle:Na,create:Ct,remove:Ci,empty:Yh,toFront:jl,toBack:ro,hasClass:Ul,addClass:vt,removeClass:gi,setClass:Vp,getClass:$h,setOpacity:Fs,testProp:Kl,setTransform:qn,setPosition:zi,getPosition:oo,get disableTextSelection(){return Nt},get enableTextSelection(){return Yl},disableImageDrag:Xh,enableImageDrag:Qh,preventOutline:$l,restoreOutline:Jn,getSizedParentNode:ao,getScale:wr};function pt(h,m,S,D){if(m&&typeof m=="object")for(var N in m)jp(h,N,m[N],S);else{m=C(m);for(var z=0,Y=m.length;z<Y;z++)jp(h,m[z],S,D)}return this}var as="_leaflet_events";function oi(h,m,S,D){if(arguments.length===1)Wp(h),delete h[as];else if(m&&typeof m=="object")for(var N in m)qh(h,N,m[N],S);else if(m=C(m),arguments.length===2)Wp(h,function(ie){return P(m,ie)!==-1});else for(var z=0,Y=m.length;z<Y;z++)qh(h,m[z],S,D);return this}function Wp(h,m){for(var S in h[as]){var D=S.split(/\d/)[0];(!m||m(D))&&qh(h,D,null,null,S)}}var _a={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function jp(h,m,S,D){var N=m+l(S)+(D?"_"+l(D):"");if(h[as]&&h[as][N])return this;var z=function(ie){return S.call(D||h,ie||window.event)},Y=z;!xe.touchNative&&xe.pointer&&m.indexOf("touch")===0?z=zo(h,m,z):xe.touch&&m==="dblclick"?z=$i(h,z):"addEventListener"in h?m==="touchstart"||m==="touchmove"||m==="wheel"||m==="mousewheel"?h.addEventListener(_a[m]||m,z,xe.passiveEvents?{passive:!1}:!1):m==="mouseenter"||m==="mouseleave"?(z=function(ie){ie=ie||window.event,Cu(h,ie)&&Y(ie)},h.addEventListener(_a[m],z,!1)):h.addEventListener(m,Y,!1):h.attachEvent("on"+m,z),h[as]=h[as]||{},h[as][N]=z}function qh(h,m,S,D,N){N=N||m+l(S)+(D?"_"+l(D):"");var z=h[as]&&h[as][N];if(!z)return this;!xe.touchNative&&xe.pointer&&m.indexOf("touch")===0?Ho(h,m,z):xe.touch&&m==="dblclick"?so(h,z):"removeEventListener"in h?h.removeEventListener(_a[m]||m,z,!1):h.detachEvent("on"+m,z),h[as][N]=null}function xr(h){return h.stopPropagation?h.stopPropagation():h.originalEvent?h.originalEvent._stopped=!0:h.cancelBubble=!0,this}function Jh(h){return jp(h,"wheel",xr),this}function vu(h){return pt(h,"mousedown touchstart dblclick contextmenu",xr),h._leaflet_disable_click=!0,this}function Ti(h){return h.preventDefault?h.preventDefault():h.returnValue=!1,this}function er(h){return Ti(h),xr(h),this}function Ba(h){if(h.composedPath)return h.composedPath();for(var m=[],S=h.target;S;)m.push(S),S=S.parentNode;return m}function yu(h,m){if(!m)return new K(h.clientX,h.clientY);var S=wr(m),D=S.boundingClientRect;return new K((h.clientX-D.left)/S.x-m.clientLeft,(h.clientY-D.top)/S.y-m.clientTop)}var JS=xe.linux&&xe.chrome?window.devicePixelRatio:xe.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Am(h){return xe.edge?h.wheelDeltaY/2:h.deltaY&&h.deltaMode===0?-h.deltaY/JS:h.deltaY&&h.deltaMode===1?-h.deltaY*20:h.deltaY&&h.deltaMode===2?-h.deltaY*60:h.deltaX||h.deltaZ?0:h.wheelDelta?(h.wheelDeltaY||h.wheelDelta)/2:h.detail&&Math.abs(h.detail)<32765?-h.detail*20:h.detail?h.detail/-32765*60:0}function Cu(h,m){var S=m.relatedTarget;if(!S)return!0;try{for(;S&&S!==h;)S=S.parentNode}catch{return!1}return S!==h}var ed={__proto__:null,on:pt,off:oi,stopPropagation:xr,disableScrollPropagation:Jh,disableClickPropagation:vu,preventDefault:Ti,stop:er,getPropagationPath:Ba,getMousePosition:yu,getWheelDelta:Am,isExternalTarget:Cu,addListener:pt,removeListener:oi},td=Se.extend({run:function(h,m,S,D){this.stop(),this._el=h,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(D||.5,.2),this._startPos=oo(h),this._offset=m.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=$(this._animate,this),this._step()},_step:function(h){var m=+new Date-this._startTime,S=this._duration*1e3;m<S?this._runFrame(this._easeOut(m/S),h):(this._runFrame(1),this._complete())},_runFrame:function(h,m){var S=this._startPos.add(this._offset.multiplyBy(h));m&&S._round(),zi(this._el,S),this.fire("step")},_complete:function(){te(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(h){return 1-Math.pow(1-h,this._easeOutPower)}}),Tt=Se.extend({options:{crs:$e,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(h,m){m=x(this,m),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(h),this._initLayout(),this._onResize=o(this._onResize,this),this._initEvents(),m.maxBounds&&this.setMaxBounds(m.maxBounds),m.zoom!==void 0&&(this._zoom=this._limitZoom(m.zoom)),m.center&&m.zoom!==void 0&&this.setView(ue(m.center),m.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ti&&xe.any3d&&!xe.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),pt(this._proxy,Ln,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(h,m,S){if(m=m===void 0?this._zoom:this._limitZoom(m),h=this._limitCenter(ue(h),m,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=n({animate:S.animate},S.zoom),S.pan=n({animate:S.animate,duration:S.duration},S.pan));var D=this._zoom!==m?this._tryAnimatedZoom&&this._tryAnimatedZoom(h,m,S.zoom):this._tryAnimatedPan(h,S.pan);if(D)return clearTimeout(this._sizeTimer),this}return this._resetView(h,m,S.pan&&S.pan.noMoveStart),this},setZoom:function(h,m){return this._loaded?this.setView(this.getCenter(),h,{zoom:m}):(this._zoom=h,this)},zoomIn:function(h,m){return h=h||(xe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+h,m)},zoomOut:function(h,m){return h=h||(xe.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-h,m)},setZoomAround:function(h,m,S){var D=this.getZoomScale(m),N=this.getSize().divideBy(2),z=h instanceof K?h:this.latLngToContainerPoint(h),Y=z.subtract(N).multiplyBy(1-1/D),ie=this.containerPointToLatLng(N.add(Y));return this.setView(ie,m,{zoom:S})},_getBoundsCenterZoom:function(h,m){m=m||{},h=h.getBounds?h.getBounds():se(h);var S=q(m.paddingTopLeft||m.padding||[0,0]),D=q(m.paddingBottomRight||m.padding||[0,0]),N=this.getBoundsZoom(h,!1,S.add(D));if(N=typeof m.maxZoom=="number"?Math.min(m.maxZoom,N):N,N===1/0)return{center:h.getCenter(),zoom:N};var z=D.subtract(S).divideBy(2),Y=this.project(h.getSouthWest(),N),ie=this.project(h.getNorthEast(),N),ce=this.unproject(Y.add(ie).divideBy(2).add(z),N);return{center:ce,zoom:N}},fitBounds:function(h,m){if(h=se(h),!h.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(h,m);return this.setView(S.center,S.zoom,m)},fitWorld:function(h){return this.fitBounds([[-90,-180],[90,180]],h)},panTo:function(h,m){return this.setView(h,this._zoom,{pan:m})},panBy:function(h,m){if(h=q(h).round(),m=m||{},!h.x&&!h.y)return this.fire("moveend");if(m.animate!==!0&&!this.getSize().contains(h))return this._resetView(this.unproject(this.project(this.getCenter()).add(h)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new td,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),m.noMoveStart||this.fire("movestart"),m.animate!==!1){vt(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(h).round();this._panAnim.run(this._mapPane,S,m.duration||.25,m.easeLinearity)}else this._rawPanBy(h),this.fire("move").fire("moveend");return this},flyTo:function(h,m,S){if(S=S||{},S.animate===!1||!xe.any3d)return this.setView(h,m,S);this._stop();var D=this.project(this.getCenter()),N=this.project(h),z=this.getSize(),Y=this._zoom;h=ue(h),m=m===void 0?Y:m;var ie=Math.max(z.x,z.y),ce=ie*this.getZoomScale(Y,m),Ie=N.distanceTo(D)||1,We=1.42,rt=We*We;function bt(qt){var cc=qt?-1:1,pw=qt?ce:ie,gw=ce*ce-ie*ie+cc*rt*rt*Ie*Ie,Ua=2*pw*rt*Ie,Ka=gw/Ua,Ya=Math.sqrt(Ka*Ka+1)-Ka,fd=Ya<1e-9?-18:Math.log(Ya);return fd}function ls(qt){return(Math.exp(qt)-Math.exp(-qt))/2}function es(qt){return(Math.exp(qt)+Math.exp(-qt))/2}function tn(qt){return ls(qt)/es(qt)}var Ns=bt(0);function ac(qt){return ie*(es(Ns)/es(Ns+We*qt))}function hg(qt){return ie*(es(Ns)*tn(Ns+We*qt)-ls(Ns))/rt}function Zo(qt){return 1-Math.pow(1-qt,1.5)}var qm=Date.now(),ja=(bt(1)-Ns)/We,Dr=S.duration?1e3*S.duration:1e3*ja*.8;function lc(){var qt=(Date.now()-qm)/Dr,cc=Zo(qt)*ja;qt<=1?(this._flyToFrame=$(lc,this),this._move(this.unproject(D.add(N.subtract(D).multiplyBy(hg(cc)/Ie)),Y),this.getScaleZoom(ie/ac(cc),Y),{flyTo:!0})):this._move(h,m)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),lc.call(this),this},flyToBounds:function(h,m){var S=this._getBoundsCenterZoom(h,m);return this.flyTo(S.center,S.zoom,m)},setMaxBounds:function(h){return h=se(h),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),h.isValid()?(this.options.maxBounds=h,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(h){var m=this.options.minZoom;return this.options.minZoom=h,this._loaded&&m!==h&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(h):this},setMaxZoom:function(h){var m=this.options.maxZoom;return this.options.maxZoom=h,this._loaded&&m!==h&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(h):this},panInsideBounds:function(h,m){this._enforcingBounds=!0;var S=this.getCenter(),D=this._limitCenter(S,this._zoom,se(h));return S.equals(D)||this.panTo(D,m),this._enforcingBounds=!1,this},panInside:function(h,m){m=m||{};var S=q(m.paddingTopLeft||m.padding||[0,0]),D=q(m.paddingBottomRight||m.padding||[0,0]),N=this.project(this.getCenter()),z=this.project(h),Y=this.getPixelBounds(),ie=Q([Y.min.add(S),Y.max.subtract(D)]),ce=ie.getSize();if(!ie.contains(z)){this._enforcingBounds=!0;var Ie=z.subtract(ie.getCenter()),We=ie.extend(z).getSize().subtract(ce);N.x+=Ie.x<0?-We.x:We.x,N.y+=Ie.y<0?-We.y:We.y,this.panTo(this.unproject(N),m),this._enforcingBounds=!1}return this},invalidateSize:function(h){if(!this._loaded)return this;h=n({animate:!1,pan:!0},h===!0?{animate:!0}:h);var m=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),D=m.divideBy(2).round(),N=S.divideBy(2).round(),z=D.subtract(N);return!z.x&&!z.y?this:(h.animate&&h.pan?this.panBy(z):(h.pan&&this._rawPanBy(z),this.fire("move"),h.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:m,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(h){if(h=this._locateOptions=n({timeout:1e4,watch:!1},h),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var m=o(this._handleGeolocationResponse,this),S=o(this._handleGeolocationError,this);return h.watch?this._locationWatchId=navigator.geolocation.watchPosition(m,S,h):navigator.geolocation.getCurrentPosition(m,S,h),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(h){if(this._container._leaflet_id){var m=h.code,S=h.message||(m===1?"permission denied":m===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:m,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(h){if(this._container._leaflet_id){var m=h.coords.latitude,S=h.coords.longitude,D=new ye(m,S),N=D.toBounds(h.coords.accuracy*2),z=this._locateOptions;if(z.setView){var Y=this.getBoundsZoom(N);this.setView(D,z.maxZoom?Math.min(Y,z.maxZoom):Y)}var ie={latlng:D,bounds:N,timestamp:h.timestamp};for(var ce in h.coords)typeof h.coords[ce]=="number"&&(ie[ce]=h.coords[ce]);this.fire("locationfound",ie)}},addHandler:function(h,m){if(!m)return this;var S=this[h]=new m(this);return this._handlers.push(S),this.options[h]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),Ci(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(te(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var h;for(h in this._layers)this._layers[h].remove();for(h in this._panes)Ci(this._panes[h]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(h,m){var S="leaflet-pane"+(h?" leaflet-"+h.replace("Pane","")+"-pane":""),D=Ct("div",S,m||this._mapPane);return h&&(this._panes[h]=D),D},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var h=this.getPixelBounds(),m=this.unproject(h.getBottomLeft()),S=this.unproject(h.getTopRight());return new ve(m,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(h,m,S){h=se(h),S=q(S||[0,0]);var D=this.getZoom()||0,N=this.getMinZoom(),z=this.getMaxZoom(),Y=h.getNorthWest(),ie=h.getSouthEast(),ce=this.getSize().subtract(S),Ie=Q(this.project(ie,D),this.project(Y,D)).getSize(),We=xe.any3d?this.options.zoomSnap:1,rt=ce.x/Ie.x,bt=ce.y/Ie.y,ls=m?Math.max(rt,bt):Math.min(rt,bt);return D=this.getScaleZoom(ls,D),We&&(D=Math.round(D/(We/100))*(We/100),D=m?Math.ceil(D/We)*We:Math.floor(D/We)*We),Math.max(N,Math.min(z,D))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new K(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(h,m){var S=this._getTopLeftPoint(h,m);return new W(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(h){return this.options.crs.getProjectedBounds(h===void 0?this.getZoom():h)},getPane:function(h){return typeof h=="string"?this._panes[h]:h},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(h,m){var S=this.options.crs;return m=m===void 0?this._zoom:m,S.scale(h)/S.scale(m)},getScaleZoom:function(h,m){var S=this.options.crs;m=m===void 0?this._zoom:m;var D=S.zoom(h*S.scale(m));return isNaN(D)?1/0:D},project:function(h,m){return m=m===void 0?this._zoom:m,this.options.crs.latLngToPoint(ue(h),m)},unproject:function(h,m){return m=m===void 0?this._zoom:m,this.options.crs.pointToLatLng(q(h),m)},layerPointToLatLng:function(h){var m=q(h).add(this.getPixelOrigin());return this.unproject(m)},latLngToLayerPoint:function(h){var m=this.project(ue(h))._round();return m._subtract(this.getPixelOrigin())},wrapLatLng:function(h){return this.options.crs.wrapLatLng(ue(h))},wrapLatLngBounds:function(h){return this.options.crs.wrapLatLngBounds(se(h))},distance:function(h,m){return this.options.crs.distance(ue(h),ue(m))},containerPointToLayerPoint:function(h){return q(h).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(h){return q(h).add(this._getMapPanePos())},containerPointToLatLng:function(h){var m=this.containerPointToLayerPoint(q(h));return this.layerPointToLatLng(m)},latLngToContainerPoint:function(h){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ue(h)))},mouseEventToContainerPoint:function(h){return yu(h,this._container)},mouseEventToLayerPoint:function(h){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(h))},mouseEventToLatLng:function(h){return this.layerPointToLatLng(this.mouseEventToLayerPoint(h))},_initContainer:function(h){var m=this._container=Ps(h);if(m){if(m._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");pt(m,"scroll",this._onScroll,this),this._containerId=l(m)},_initLayout:function(){var h=this._container;this._fadeAnimated=this.options.fadeAnimation&&xe.any3d,vt(h,"leaflet-container"+(xe.touch?" leaflet-touch":"")+(xe.retina?" leaflet-retina":"")+(xe.ielt9?" leaflet-oldie":"")+(xe.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var m=Na(h,"position");m!=="absolute"&&m!=="relative"&&m!=="fixed"&&m!=="sticky"&&(h.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var h=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),zi(this._mapPane,new K(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(vt(h.markerPane,"leaflet-zoom-hide"),vt(h.shadowPane,"leaflet-zoom-hide"))},_resetView:function(h,m,S){zi(this._mapPane,new K(0,0));var D=!this._loaded;this._loaded=!0,m=this._limitZoom(m),this.fire("viewprereset");var N=this._zoom!==m;this._moveStart(N,S)._move(h,m)._moveEnd(N),this.fire("viewreset"),D&&this.fire("load")},_moveStart:function(h,m){return h&&this.fire("zoomstart"),m||this.fire("movestart"),this},_move:function(h,m,S,D){m===void 0&&(m=this._zoom);var N=this._zoom!==m;return this._zoom=m,this._lastCenter=h,this._pixelOrigin=this._getNewPixelOrigin(h),D?S&&S.pinch&&this.fire("zoom",S):((N||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(h){return h&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return te(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(h){zi(this._mapPane,this._getMapPanePos().subtract(h))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(h){this._targets={},this._targets[l(this._container)]=this;var m=h?oi:pt;m(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&m(window,"resize",this._onResize,this),xe.any3d&&this.options.transform3DLimit&&(h?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){te(this._resizeRequest),this._resizeRequest=$(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var h=this._getMapPanePos();Math.max(Math.abs(h.x),Math.abs(h.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(h,m){for(var S=[],D,N=m==="mouseout"||m==="mouseover",z=h.target||h.srcElement,Y=!1;z;){if(D=this._targets[l(z)],D&&(m==="click"||m==="preclick")&&this._draggableMoved(D)){Y=!0;break}if(D&&D.listens(m,!0)&&(N&&!Cu(z,h)||(S.push(D),N))||z===this._container)break;z=z.parentNode}return!S.length&&!Y&&!N&&this.listens(m,!0)&&(S=[this]),S},_isClickDisabled:function(h){for(;h&&h!==this._container;){if(h._leaflet_disable_click)return!0;h=h.parentNode}},_handleDOMEvent:function(h){var m=h.target||h.srcElement;if(!(!this._loaded||m._leaflet_disable_events||h.type==="click"&&this._isClickDisabled(m))){var S=h.type;S==="mousedown"&&$l(m),this._fireDOMEvent(h,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(h,m,S){if(h.type==="click"){var D=n({},h);D.type="preclick",this._fireDOMEvent(D,D.type,S)}var N=this._findEventTargets(h,m);if(S){for(var z=[],Y=0;Y<S.length;Y++)S[Y].listens(m,!0)&&z.push(S[Y]);N=z.concat(N)}if(N.length){m==="contextmenu"&&Ti(h);var ie=N[0],ce={originalEvent:h};if(h.type!=="keypress"&&h.type!=="keydown"&&h.type!=="keyup"){var Ie=ie.getLatLng&&(!ie._radius||ie._radius<=10);ce.containerPoint=Ie?this.latLngToContainerPoint(ie.getLatLng()):this.mouseEventToContainerPoint(h),ce.layerPoint=this.containerPointToLayerPoint(ce.containerPoint),ce.latlng=Ie?ie.getLatLng():this.layerPointToLatLng(ce.layerPoint)}for(Y=0;Y<N.length;Y++)if(N[Y].fire(m,ce,!0),ce.originalEvent._stopped||N[Y].options.bubblingMouseEvents===!1&&P(this._mouseEvents,m)!==-1)return}},_draggableMoved:function(h){return h=h.dragging&&h.dragging.enabled()?h:this,h.dragging&&h.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var h=0,m=this._handlers.length;h<m;h++)this._handlers[h].disable()},whenReady:function(h,m){return this._loaded?h.call(m||this,{target:this}):this.on("load",h,m),this},_getMapPanePos:function(){return oo(this._mapPane)||new K(0,0)},_moved:function(){var h=this._getMapPanePos();return h&&!h.equals([0,0])},_getTopLeftPoint:function(h,m){var S=h&&m!==void 0?this._getNewPixelOrigin(h,m):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(h,m){var S=this.getSize()._divideBy(2);return this.project(h,m)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(h,m,S){var D=this._getNewPixelOrigin(S,m);return this.project(h,m)._subtract(D)},_latLngBoundsToNewLayerBounds:function(h,m,S){var D=this._getNewPixelOrigin(S,m);return Q([this.project(h.getSouthWest(),m)._subtract(D),this.project(h.getNorthWest(),m)._subtract(D),this.project(h.getSouthEast(),m)._subtract(D),this.project(h.getNorthEast(),m)._subtract(D)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(h){return this.latLngToLayerPoint(h).subtract(this._getCenterLayerPoint())},_limitCenter:function(h,m,S){if(!S)return h;var D=this.project(h,m),N=this.getSize().divideBy(2),z=new W(D.subtract(N),D.add(N)),Y=this._getBoundsOffset(z,S,m);return Math.abs(Y.x)<=1&&Math.abs(Y.y)<=1?h:this.unproject(D.add(Y),m)},_limitOffset:function(h,m){if(!m)return h;var S=this.getPixelBounds(),D=new W(S.min.add(h),S.max.add(h));return h.add(this._getBoundsOffset(D,m))},_getBoundsOffset:function(h,m,S){var D=Q(this.project(m.getNorthEast(),S),this.project(m.getSouthWest(),S)),N=D.min.subtract(h.min),z=D.max.subtract(h.max),Y=this._rebound(N.x,-z.x),ie=this._rebound(N.y,-z.y);return new K(Y,ie)},_rebound:function(h,m){return h+m>0?Math.round(h-m)/2:Math.max(0,Math.ceil(h))-Math.max(0,Math.floor(m))},_limitZoom:function(h){var m=this.getMinZoom(),S=this.getMaxZoom(),D=xe.any3d?this.options.zoomSnap:1;return D&&(h=Math.round(h/D)*D),Math.max(m,Math.min(S,h))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){gi(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(h,m){var S=this._getCenterOffset(h)._trunc();return(m&&m.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,m),!0)},_createAnimProxy:function(){var h=this._proxy=Ct("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(h),this.on("zoomanim",function(m){var S=no,D=this._proxy.style[S];qn(this._proxy,this.project(m.center,m.zoom),this.getZoomScale(m.zoom,1)),D===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){Ci(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var h=this.getCenter(),m=this.getZoom();qn(this._proxy,this.project(h,m),this.getZoomScale(m,1))},_catchTransitionEnd:function(h){this._animatingZoom&&h.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(h,m,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(m-this._zoom)>this.options.zoomAnimationThreshold)return!1;var D=this.getZoomScale(m),N=this._getCenterOffset(h)._divideBy(1-1/D);return S.animate!==!0&&!this.getSize().contains(N)?!1:($(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(h,m,!0)},this),!0)},_animateZoom:function(h,m,S,D){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=h,this._animateToZoom=m,vt(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:h,zoom:m,noUpdate:D}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(o(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&gi(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Vo(h,m){return new Tt(h,m)}var Js=be.extend({options:{position:"topright"},initialize:function(h){x(this,h)},getPosition:function(){return this.options.position},setPosition:function(h){var m=this._map;return m&&m.removeControl(this),this.options.position=h,m&&m.addControl(this),this},getContainer:function(){return this._container},addTo:function(h){this.remove(),this._map=h;var m=this._container=this.onAdd(h),S=this.getPosition(),D=h._controlCorners[S];return vt(m,"leaflet-control"),S.indexOf("bottom")!==-1?D.insertBefore(m,D.firstChild):D.appendChild(m),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(Ci(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(h){this._map&&h&&h.screenX>0&&h.screenY>0&&this._map.getContainer().focus()}}),Wo=function(h){return new Js(h)};Tt.include({addControl:function(h){return h.addTo(this),this},removeControl:function(h){return h.remove(),this},_initControlPos:function(){var h=this._controlCorners={},m="leaflet-",S=this._controlContainer=Ct("div",m+"control-container",this._container);function D(N,z){var Y=m+N+" "+m+z;h[N+z]=Ct("div",Y,S)}D("top","left"),D("top","right"),D("bottom","left"),D("bottom","right")},_clearControlPos:function(){for(var h in this._controlCorners)Ci(this._controlCorners[h]);Ci(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Up=Js.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(h,m,S,D){return S<D?-1:D<S?1:0}},initialize:function(h,m,S){x(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var D in h)this._addLayer(h[D],D);for(D in m)this._addLayer(m[D],D,!0)},onAdd:function(h){this._initLayout(),this._update(),this._map=h,h.on("zoomend",this._checkDisabledLayers,this);for(var m=0;m<this._layers.length;m++)this._layers[m].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(h){return Js.prototype.addTo.call(this,h),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var h=0;h<this._layers.length;h++)this._layers[h].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(h,m){return this._addLayer(h,m),this._map?this._update():this},addOverlay:function(h,m){return this._addLayer(h,m,!0),this._map?this._update():this},removeLayer:function(h){h.off("add remove",this._onLayerChange,this);var m=this._getLayer(l(h));return m&&this._layers.splice(this._layers.indexOf(m),1),this._map?this._update():this},expand:function(){vt(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var h=this._map.getSize().y-(this._container.offsetTop+50);return h<this._section.clientHeight?(vt(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=h+"px"):gi(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return gi(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var h="leaflet-control-layers",m=this._container=Ct("div",h),S=this.options.collapsed;m.setAttribute("aria-haspopup",!0),vu(m),Jh(m);var D=this._section=Ct("section",h+"-list");S&&(this._map.on("click",this.collapse,this),pt(m,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var N=this._layersLink=Ct("a",h+"-toggle",m);N.href="#",N.title="Layers",N.setAttribute("role","button"),pt(N,{keydown:function(z){z.keyCode===13&&this._expandSafely()},click:function(z){Ti(z),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=Ct("div",h+"-base",D),this._separator=Ct("div",h+"-separator",D),this._overlaysList=Ct("div",h+"-overlays",D),m.appendChild(D)},_getLayer:function(h){for(var m=0;m<this._layers.length;m++)if(this._layers[m]&&l(this._layers[m].layer)===h)return this._layers[m]},_addLayer:function(h,m,S){this._map&&h.on("add remove",this._onLayerChange,this),this._layers.push({layer:h,name:m,overlay:S}),this.options.sortLayers&&this._layers.sort(o(function(D,N){return this.options.sortFunction(D.layer,N.layer,D.name,N.name)},this)),this.options.autoZIndex&&h.setZIndex&&(this._lastZIndex++,h.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Yh(this._baseLayersList),Yh(this._overlaysList),this._layerControlInputs=[];var h,m,S,D,N=0;for(S=0;S<this._layers.length;S++)D=this._layers[S],this._addItem(D),m=m||D.overlay,h=h||!D.overlay,N+=D.overlay?0:1;return this.options.hideSingleBase&&(h=h&&N>1,this._baseLayersList.style.display=h?"":"none"),this._separator.style.display=m&&h?"":"none",this},_onLayerChange:function(h){this._handlingClick||this._update();var m=this._getLayer(l(h.target)),S=m.overlay?h.type==="add"?"overlayadd":"overlayremove":h.type==="add"?"baselayerchange":null;S&&this._map.fire(S,m)},_createRadioElement:function(h,m){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+h+'"'+(m?' checked="checked"':"")+"/>",D=document.createElement("div");return D.innerHTML=S,D.firstChild},_addItem:function(h){var m=document.createElement("label"),S=this._map.hasLayer(h.layer),D;h.overlay?(D=document.createElement("input"),D.type="checkbox",D.className="leaflet-control-layers-selector",D.defaultChecked=S):D=this._createRadioElement("leaflet-base-layers_"+l(this),S),this._layerControlInputs.push(D),D.layerId=l(h.layer),pt(D,"click",this._onInputClick,this);var N=document.createElement("span");N.innerHTML=" "+h.name;var z=document.createElement("span");m.appendChild(z),z.appendChild(D),z.appendChild(N);var Y=h.overlay?this._overlaysList:this._baseLayersList;return Y.appendChild(m),this._checkDisabledLayers(),m},_onInputClick:function(){if(!this._preventClick){var h=this._layerControlInputs,m,S,D=[],N=[];this._handlingClick=!0;for(var z=h.length-1;z>=0;z--)m=h[z],S=this._getLayer(m.layerId).layer,m.checked?D.push(S):m.checked||N.push(S);for(z=0;z<N.length;z++)this._map.hasLayer(N[z])&&this._map.removeLayer(N[z]);for(z=0;z<D.length;z++)this._map.hasLayer(D[z])||this._map.addLayer(D[z]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var h=this._layerControlInputs,m,S,D=this._map.getZoom(),N=h.length-1;N>=0;N--)m=h[N],S=this._getLayer(m.layerId).layer,m.disabled=S.options.minZoom!==void 0&&D<S.options.minZoom||S.options.maxZoom!==void 0&&D>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var h=this._section;this._preventClick=!0,pt(h,"click",Ti),this.expand();var m=this;setTimeout(function(){oi(h,"click",Ti),m._preventClick=!1})}}),id=function(h,m,S){return new Up(h,m,S)},Zl=Js.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(h){var m="leaflet-control-zoom",S=Ct("div",m+" leaflet-bar"),D=this.options;return this._zoomInButton=this._createButton(D.zoomInText,D.zoomInTitle,m+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(D.zoomOutText,D.zoomOutTitle,m+"-out",S,this._zoomOut),this._updateDisabled(),h.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(h){h.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(h){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(h.shiftKey?3:1))},_zoomOut:function(h){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(h.shiftKey?3:1))},_createButton:function(h,m,S,D,N){var z=Ct("a",S,D);return z.innerHTML=h,z.href="#",z.title=m,z.setAttribute("role","button"),z.setAttribute("aria-label",m),vu(z),pt(z,"click",er),pt(z,"click",N,this),pt(z,"click",this._refocusOnMap,this),z},_updateDisabled:function(){var h=this._map,m="leaflet-disabled";gi(this._zoomInButton,m),gi(this._zoomOutButton,m),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||h._zoom===h.getMinZoom())&&(vt(this._zoomOutButton,m),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||h._zoom===h.getMaxZoom())&&(vt(this._zoomInButton,m),this._zoomInButton.setAttribute("aria-disabled","true"))}});Tt.mergeOptions({zoomControl:!0}),Tt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Zl,this.addControl(this.zoomControl))});var Pm=function(h){return new Zl(h)},ks=Js.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(h){var m="leaflet-control-scale",S=Ct("div",m),D=this.options;return this._addScales(D,m+"-line",S),h.on(D.updateWhenIdle?"moveend":"move",this._update,this),h.whenReady(this._update,this),S},onRemove:function(h){h.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(h,m,S){h.metric&&(this._mScale=Ct("div",m,S)),h.imperial&&(this._iScale=Ct("div",m,S))},_update:function(){var h=this._map,m=h.getSize().y/2,S=h.distance(h.containerPointToLatLng([0,m]),h.containerPointToLatLng([this.options.maxWidth,m]));this._updateScales(S)},_updateScales:function(h){this.options.metric&&h&&this._updateMetric(h),this.options.imperial&&h&&this._updateImperial(h)},_updateMetric:function(h){var m=this._getRoundNum(h),S=m<1e3?m+" m":m/1e3+" km";this._updateScale(this._mScale,S,m/h)},_updateImperial:function(h){var m=h*3.2808399,S,D,N;m>5280?(S=m/5280,D=this._getRoundNum(S),this._updateScale(this._iScale,D+" mi",D/S)):(N=this._getRoundNum(m),this._updateScale(this._iScale,N+" ft",N/m))},_updateScale:function(h,m,S){h.style.width=Math.round(this.options.maxWidth*S)+"px",h.innerHTML=m},_getRoundNum:function(h){var m=Math.pow(10,(Math.floor(h)+"").length-1),S=h/m;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,m*S}}),Xl=function(h){return new ks(h)},Kp='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',Ga=Js.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(xe.inlineSvg?Kp+" ":"")+"Leaflet</a>"},initialize:function(h){x(this,h),this._attributions={}},onAdd:function(h){h.attributionControl=this,this._container=Ct("div","leaflet-control-attribution"),vu(this._container);for(var m in h._layers)h._layers[m].getAttribution&&this.addAttribution(h._layers[m].getAttribution());return this._update(),h.on("layeradd",this._addAttribution,this),this._container},onRemove:function(h){h.off("layeradd",this._addAttribution,this)},_addAttribution:function(h){h.layer.getAttribution&&(this.addAttribution(h.layer.getAttribution()),h.layer.once("remove",function(){this.removeAttribution(h.layer.getAttribution())},this))},setPrefix:function(h){return this.options.prefix=h,this._update(),this},addAttribution:function(h){return h?(this._attributions[h]||(this._attributions[h]=0),this._attributions[h]++,this._update(),this):this},removeAttribution:function(h){return h?(this._attributions[h]&&(this._attributions[h]--,this._update()),this):this},_update:function(){if(this._map){var h=[];for(var m in this._attributions)this._attributions[m]&&h.push(m);var S=[];this.options.prefix&&S.push(this.options.prefix),h.length&&S.push(h.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});Tt.mergeOptions({attributionControl:!0}),Tt.addInitHook(function(){this.options.attributionControl&&new Ga().addTo(this)});var ew=function(h){return new Ga(h)};Js.Layers=Up,Js.Zoom=Zl,Js.Scale=ks,Js.Attribution=Ga,Wo.layers=id,Wo.zoom=Pm,Wo.scale=Xl,Wo.attribution=ew;var Tn=be.extend({initialize:function(h){this._map=h},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Tn.addTo=function(h,m){return h.addHandler(m,this),this};var Yp={Events:oe},Ql=xe.touch?"touchstart mousedown":"mousedown",tr=Se.extend({options:{clickTolerance:3},initialize:function(h,m,S,D){x(this,D),this._element=h,this._dragStartTarget=m||h,this._preventOutline=S},enable:function(){this._enabled||(pt(this._dragStartTarget,Ql,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(tr._dragging===this&&this.finishDrag(!0),oi(this._dragStartTarget,Ql,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(h){if(this._enabled&&(this._moved=!1,!Ul(this._element,"leaflet-zoom-anim"))){if(h.touches&&h.touches.length!==1){tr._dragging===this&&this.finishDrag();return}if(!(tr._dragging||h.shiftKey||h.which!==1&&h.button!==1&&!h.touches)&&(tr._dragging=this,this._preventOutline&&$l(this._element),Xh(),Nt(),!this._moving)){this.fire("down");var m=h.touches?h.touches[0]:h,S=ao(this._element);this._startPoint=new K(m.clientX,m.clientY),this._startPos=oo(this._element),this._parentScale=wr(S);var D=h.type==="mousedown";pt(document,D?"mousemove":"touchmove",this._onMove,this),pt(document,D?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(h){if(this._enabled){if(h.touches&&h.touches.length>1){this._moved=!0;return}var m=h.touches&&h.touches.length===1?h.touches[0]:h,S=new K(m.clientX,m.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,Ti(h),this._moved||(this.fire("dragstart"),this._moved=!0,vt(document.body,"leaflet-dragging"),this._lastTarget=h.target||h.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),vt(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=h,this._updatePosition())}},_updatePosition:function(){var h={originalEvent:this._lastEvent};this.fire("predrag",h),zi(this._element,this._newPos),this.fire("drag",h)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(h){gi(document.body,"leaflet-dragging"),this._lastTarget&&(gi(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),oi(document,"mousemove touchmove",this._onMove,this),oi(document,"mouseup touchend touchcancel",this._onUp,this),Qh(),Yl();var m=this._moved&&this._moving;this._moving=!1,tr._dragging=!1,m&&this.fire("dragend",{noInertia:h,distance:this._newPos.distanceTo(this._startPos)})}});function $p(h,m,S){var D,N=[1,4,2,8],z,Y,ie,ce,Ie,We,rt,bt;for(z=0,We=h.length;z<We;z++)h[z]._code=za(h[z],m);for(ie=0;ie<4;ie++){for(rt=N[ie],D=[],z=0,We=h.length,Y=We-1;z<We;Y=z++)ce=h[z],Ie=h[Y],ce._code&rt?Ie._code&rt||(bt=nd(Ie,ce,rt,m,S),bt._code=za(bt,m),D.push(bt)):(Ie._code&rt&&(bt=nd(Ie,ce,rt,m,S),bt._code=za(bt,m),D.push(bt)),D.push(ce));h=D}return h}function Fm(h,m){var S,D,N,z,Y,ie,ce,Ie,We;if(!h||h.length===0)throw new Error("latlngs not passed");An(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var rt=ue([0,0]),bt=se(h),ls=bt.getNorthWest().distanceTo(bt.getSouthWest())*bt.getNorthEast().distanceTo(bt.getNorthWest());ls<1700&&(rt=Zp(h));var es=h.length,tn=[];for(S=0;S<es;S++){var Ns=ue(h[S]);tn.push(m.project(ue([Ns.lat-rt.lat,Ns.lng-rt.lng])))}for(ie=ce=Ie=0,S=0,D=es-1;S<es;D=S++)N=tn[S],z=tn[D],Y=N.y*z.x-z.y*N.x,ce+=(N.x+z.x)*Y,Ie+=(N.y+z.y)*Y,ie+=Y*3;ie===0?We=tn[0]:We=[ce/ie,Ie/ie];var ac=m.unproject(q(We));return ue([ac.lat+rt.lat,ac.lng+rt.lng])}function Zp(h){for(var m=0,S=0,D=0,N=0;N<h.length;N++){var z=ue(h[N]);m+=z.lat,S+=z.lng,D++}return ue([m/D,S/D])}var tw={__proto__:null,clipPolygon:$p,polygonCenter:Fm,centroid:Zp};function sd(h,m){if(!m||!h.length)return h.slice();var S=m*m;return h=nw(h,S),h=sw(h,S),h}function km(h,m,S){return Math.sqrt(Ha(h,m,S,!0))}function iw(h,m,S){return Ha(h,m,S)}function sw(h,m){var S=h.length,D=typeof Uint8Array<"u"?Uint8Array:Array,N=new D(S);N[0]=N[S-1]=1,Xp(h,N,m,0,S-1);var z,Y=[];for(z=0;z<S;z++)N[z]&&Y.push(h[z]);return Y}function Xp(h,m,S,D,N){var z=0,Y,ie,ce;for(ie=D+1;ie<=N-1;ie++)ce=Ha(h[ie],h[D],h[N],!0),ce>z&&(Y=ie,z=ce);z>S&&(m[Y]=1,Xp(h,m,S,D,Y),Xp(h,m,S,Y,N))}function nw(h,m){for(var S=[h[0]],D=1,N=0,z=h.length;D<z;D++)rw(h[D],h[N])>m&&(S.push(h[D]),N=D);return N<z-1&&S.push(h[z-1]),S}var Qp;function Nm(h,m,S,D,N){var z=D?Qp:za(h,S),Y=za(m,S),ie,ce,Ie;for(Qp=Y;;){if(!(z|Y))return[h,m];if(z&Y)return!1;ie=z||Y,ce=nd(h,m,ie,S,N),Ie=za(ce,S),ie===z?(h=ce,z=Ie):(m=ce,Y=Ie)}}function nd(h,m,S,D,N){var z=m.x-h.x,Y=m.y-h.y,ie=D.min,ce=D.max,Ie,We;return S&8?(Ie=h.x+z*(ce.y-h.y)/Y,We=ce.y):S&4?(Ie=h.x+z*(ie.y-h.y)/Y,We=ie.y):S&2?(Ie=ce.x,We=h.y+Y*(ce.x-h.x)/z):S&1&&(Ie=ie.x,We=h.y+Y*(ie.x-h.x)/z),new K(Ie,We,N)}function za(h,m){var S=0;return h.x<m.min.x?S|=1:h.x>m.max.x&&(S|=2),h.y<m.min.y?S|=4:h.y>m.max.y&&(S|=8),S}function rw(h,m){var S=m.x-h.x,D=m.y-h.y;return S*S+D*D}function Ha(h,m,S,D){var N=m.x,z=m.y,Y=S.x-N,ie=S.y-z,ce=Y*Y+ie*ie,Ie;return ce>0&&(Ie=((h.x-N)*Y+(h.y-z)*ie)/ce,Ie>1?(N=S.x,z=S.y):Ie>0&&(N+=Y*Ie,z+=ie*Ie)),Y=h.x-N,ie=h.y-z,D?Y*Y+ie*ie:new K(N,z)}function An(h){return!I(h[0])||typeof h[0][0]!="object"&&typeof h[0][0]<"u"}function Om(h){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),An(h)}function _m(h,m){var S,D,N,z,Y,ie,ce,Ie;if(!h||h.length===0)throw new Error("latlngs not passed");An(h)||(console.warn("latlngs are not flat! Only the first ring will be used"),h=h[0]);var We=ue([0,0]),rt=se(h),bt=rt.getNorthWest().distanceTo(rt.getSouthWest())*rt.getNorthEast().distanceTo(rt.getNorthWest());bt<1700&&(We=Zp(h));var ls=h.length,es=[];for(S=0;S<ls;S++){var tn=ue(h[S]);es.push(m.project(ue([tn.lat-We.lat,tn.lng-We.lng])))}for(S=0,D=0;S<ls-1;S++)D+=es[S].distanceTo(es[S+1])/2;if(D===0)Ie=es[0];else for(S=0,z=0;S<ls-1;S++)if(Y=es[S],ie=es[S+1],N=Y.distanceTo(ie),z+=N,z>D){ce=(z-D)/N,Ie=[ie.x-ce*(ie.x-Y.x),ie.y-ce*(ie.y-Y.y)];break}var Ns=m.unproject(q(Ie));return ue([Ns.lat+We.lat,Ns.lng+We.lng])}var Bm={__proto__:null,simplify:sd,pointToSegmentDistance:km,closestPointOnSegment:iw,clipSegment:Nm,_getEdgeIntersection:nd,_getBitCode:za,_sqClosestPointOnSegment:Ha,isFlat:An,_flat:Om,polylineCenter:_m},qp={project:function(h){return new K(h.lng,h.lat)},unproject:function(h){return new ye(h.y,h.x)},bounds:new W([-180,-90],[180,90])},Jp={R:6378137,R_MINOR:6356752314245179e-9,bounds:new W([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(h){var m=Math.PI/180,S=this.R,D=h.lat*m,N=this.R_MINOR/S,z=Math.sqrt(1-N*N),Y=z*Math.sin(D),ie=Math.tan(Math.PI/4-D/2)/Math.pow((1-Y)/(1+Y),z/2);return D=-S*Math.log(Math.max(ie,1e-10)),new K(h.lng*m*S,D)},unproject:function(h){for(var m=180/Math.PI,S=this.R,D=this.R_MINOR/S,N=Math.sqrt(1-D*D),z=Math.exp(-h.y/S),Y=Math.PI/2-2*Math.atan(z),ie=0,ce=.1,Ie;ie<15&&Math.abs(ce)>1e-7;ie++)Ie=N*Math.sin(Y),Ie=Math.pow((1-Ie)/(1+Ie),N/2),ce=Math.PI/2-2*Math.atan(z*Ie)-Y,Y+=ce;return new ye(Y*m,h.x*m/S)}},ow={__proto__:null,LonLat:qp,Mercator:Jp,SphericalMercator:Ee},aw=n({},me,{code:"EPSG:3395",projection:Jp,transformation:function(){var h=.5/(Math.PI*Jp.R);return Be(h,.5,-h,.5)}()}),Gm=n({},me,{code:"EPSG:4326",projection:qp,transformation:Be(1/180,1,-1/180,.5)}),lw=n({},Me,{projection:qp,transformation:Be(1,0,-1,0),scale:function(h){return Math.pow(2,h)},zoom:function(h){return Math.log(h)/Math.LN2},distance:function(h,m){var S=m.lng-h.lng,D=m.lat-h.lat;return Math.sqrt(S*S+D*D)},infinite:!0});Me.Earth=me,Me.EPSG3395=aw,Me.EPSG3857=$e,Me.EPSG900913=tt,Me.EPSG4326=Gm,Me.Simple=lw;var ir=Se.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(h){return h.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(h){return h&&h.removeLayer(this),this},getPane:function(h){return this._map.getPane(h?this.options[h]||h:this.options.pane)},addInteractiveTarget:function(h){return this._map._targets[l(h)]=this,this},removeInteractiveTarget:function(h){return delete this._map._targets[l(h)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(h){var m=h.target;if(m.hasLayer(this)){if(this._map=m,this._zoomAnimated=m._zoomAnimated,this.getEvents){var S=this.getEvents();m.on(S,this),this.once("remove",function(){m.off(S,this)},this)}this.onAdd(m),this.fire("add"),m.fire("layeradd",{layer:this})}}});Tt.include({addLayer:function(h){if(!h._layerAdd)throw new Error("The provided object is not a Layer.");var m=l(h);return this._layers[m]?this:(this._layers[m]=h,h._mapToAdd=this,h.beforeAdd&&h.beforeAdd(this),this.whenReady(h._layerAdd,h),this)},removeLayer:function(h){var m=l(h);return this._layers[m]?(this._loaded&&h.onRemove(this),delete this._layers[m],this._loaded&&(this.fire("layerremove",{layer:h}),h.fire("remove")),h._map=h._mapToAdd=null,this):this},hasLayer:function(h){return l(h)in this._layers},eachLayer:function(h,m){for(var S in this._layers)h.call(m,this._layers[S]);return this},_addLayers:function(h){h=h?I(h)?h:[h]:[];for(var m=0,S=h.length;m<S;m++)this.addLayer(h[m])},_addZoomLimit:function(h){(!isNaN(h.options.maxZoom)||!isNaN(h.options.minZoom))&&(this._zoomBoundLayers[l(h)]=h,this._updateZoomLevels())},_removeZoomLimit:function(h){var m=l(h);this._zoomBoundLayers[m]&&(delete this._zoomBoundLayers[m],this._updateZoomLevels())},_updateZoomLevels:function(){var h=1/0,m=-1/0,S=this._getZoomSpan();for(var D in this._zoomBoundLayers){var N=this._zoomBoundLayers[D].options;h=N.minZoom===void 0?h:Math.min(h,N.minZoom),m=N.maxZoom===void 0?m:Math.max(m,N.maxZoom)}this._layersMaxZoom=m===-1/0?void 0:m,this._layersMinZoom=h===1/0?void 0:h,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var jo=ir.extend({initialize:function(h,m){x(this,m),this._layers={};var S,D;if(h)for(S=0,D=h.length;S<D;S++)this.addLayer(h[S])},addLayer:function(h){var m=this.getLayerId(h);return this._layers[m]=h,this._map&&this._map.addLayer(h),this},removeLayer:function(h){var m=h in this._layers?h:this.getLayerId(h);return this._map&&this._layers[m]&&this._map.removeLayer(this._layers[m]),delete this._layers[m],this},hasLayer:function(h){var m=typeof h=="number"?h:this.getLayerId(h);return m in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(h){var m=Array.prototype.slice.call(arguments,1),S,D;for(S in this._layers)D=this._layers[S],D[h]&&D[h].apply(D,m);return this},onAdd:function(h){this.eachLayer(h.addLayer,h)},onRemove:function(h){this.eachLayer(h.removeLayer,h)},eachLayer:function(h,m){for(var S in this._layers)h.call(m,this._layers[S]);return this},getLayer:function(h){return this._layers[h]},getLayers:function(){var h=[];return this.eachLayer(h.push,h),h},setZIndex:function(h){return this.invoke("setZIndex",h)},getLayerId:function(h){return l(h)}}),Su=function(h,m){return new jo(h,m)},lo=jo.extend({addLayer:function(h){return this.hasLayer(h)?this:(h.addEventParent(this),jo.prototype.addLayer.call(this,h),this.fire("layeradd",{layer:h}))},removeLayer:function(h){return this.hasLayer(h)?(h in this._layers&&(h=this._layers[h]),h.removeEventParent(this),jo.prototype.removeLayer.call(this,h),this.fire("layerremove",{layer:h})):this},setStyle:function(h){return this.invoke("setStyle",h)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var h=new ve;for(var m in this._layers){var S=this._layers[m];h.extend(S.getBounds?S.getBounds():S.getLatLng())}return h}}),zm=function(h,m){return new lo(h,m)},Va=be.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(h){x(this,h)},createIcon:function(h){return this._createIcon("icon",h)},createShadow:function(h){return this._createIcon("shadow",h)},_createIcon:function(h,m){var S=this._getIconUrl(h);if(!S){if(h==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var D=this._createImg(S,m&&m.tagName==="IMG"?m:null);return this._setIconStyles(D,h),(this.options.crossOrigin||this.options.crossOrigin==="")&&(D.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),D},_setIconStyles:function(h,m){var S=this.options,D=S[m+"Size"];typeof D=="number"&&(D=[D,D]);var N=q(D),z=q(m==="shadow"&&S.shadowAnchor||S.iconAnchor||N&&N.divideBy(2,!0));h.className="leaflet-marker-"+m+" "+(S.className||""),z&&(h.style.marginLeft=-z.x+"px",h.style.marginTop=-z.y+"px"),N&&(h.style.width=N.x+"px",h.style.height=N.y+"px")},_createImg:function(h,m){return m=m||document.createElement("img"),m.src=h,m},_getIconUrl:function(h){return xe.retina&&this.options[h+"RetinaUrl"]||this.options[h+"Url"]}});function Hm(h){return new Va(h)}var ql=Va.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(h){return typeof ql.imagePath!="string"&&(ql.imagePath=this._detectIconPath()),(this.options.imagePath||ql.imagePath)+Va.prototype._getIconUrl.call(this,h)},_stripUrl:function(h){var m=function(S,D,N){var z=D.exec(S);return z&&z[N]};return h=m(h,/^url\((['"])?(.+)\1\)$/,2),h&&m(h,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var h=Ct("div","leaflet-default-icon-path",document.body),m=Na(h,"background-image")||Na(h,"backgroundImage");if(document.body.removeChild(h),m=this._stripUrl(m),m)return m;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),eg=Tn.extend({initialize:function(h){this._marker=h},addHooks:function(){var h=this._marker._icon;this._draggable||(this._draggable=new tr(h,h,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),vt(h,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&gi(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(h){var m=this._marker,S=m._map,D=this._marker.options.autoPanSpeed,N=this._marker.options.autoPanPadding,z=oo(m._icon),Y=S.getPixelBounds(),ie=S.getPixelOrigin(),ce=Q(Y.min._subtract(ie).add(N),Y.max._subtract(ie).subtract(N));if(!ce.contains(z)){var Ie=q((Math.max(ce.max.x,z.x)-ce.max.x)/(Y.max.x-ce.max.x)-(Math.min(ce.min.x,z.x)-ce.min.x)/(Y.min.x-ce.min.x),(Math.max(ce.max.y,z.y)-ce.max.y)/(Y.max.y-ce.max.y)-(Math.min(ce.min.y,z.y)-ce.min.y)/(Y.min.y-ce.min.y)).multiplyBy(D);S.panBy(Ie,{animate:!1}),this._draggable._newPos._add(Ie),this._draggable._startPos._add(Ie),zi(m._icon,this._draggable._newPos),this._onDrag(h),this._panRequest=$(this._adjustPan.bind(this,h))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(h){this._marker.options.autoPan&&(te(this._panRequest),this._panRequest=$(this._adjustPan.bind(this,h)))},_onDrag:function(h){var m=this._marker,S=m._shadow,D=oo(m._icon),N=m._map.layerPointToLatLng(D);S&&zi(S,D),m._latlng=N,h.latlng=N,h.oldLatLng=this._oldLatLng,m.fire("move",h).fire("drag",h)},_onDragEnd:function(h){te(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",h)}}),co=ir.extend({options:{icon:new ql,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(h,m){x(this,m),this._latlng=ue(h)},onAdd:function(h){this._zoomAnimated=this._zoomAnimated&&h.options.markerZoomAnimation,this._zoomAnimated&&h.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(h){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&h.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(h){var m=this._latlng;return this._latlng=ue(h),this.update(),this.fire("move",{oldLatLng:m,latlng:this._latlng})},setZIndexOffset:function(h){return this.options.zIndexOffset=h,this.update()},getIcon:function(){return this.options.icon},setIcon:function(h){return this.options.icon=h,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var h=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(h)}return this},_initIcon:function(){var h=this.options,m="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=h.icon.createIcon(this._icon),D=!1;S!==this._icon&&(this._icon&&this._removeIcon(),D=!0,h.title&&(S.title=h.title),S.tagName==="IMG"&&(S.alt=h.alt||"")),vt(S,m),h.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,h.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&pt(S,"focus",this._panOnFocus,this);var N=h.icon.createShadow(this._shadow),z=!1;N!==this._shadow&&(this._removeShadow(),z=!0),N&&(vt(N,m),N.alt=""),this._shadow=N,h.opacity<1&&this._updateOpacity(),D&&this.getPane().appendChild(this._icon),this._initInteraction(),N&&z&&this.getPane(h.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&oi(this._icon,"focus",this._panOnFocus,this),Ci(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&Ci(this._shadow),this._shadow=null},_setPos:function(h){this._icon&&zi(this._icon,h),this._shadow&&zi(this._shadow,h),this._zIndex=h.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(h){this._icon&&(this._icon.style.zIndex=this._zIndex+h)},_animateZoom:function(h){var m=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center).round();this._setPos(m)},_initInteraction:function(){if(this.options.interactive&&(vt(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),eg)){var h=this.options.draggable;this.dragging&&(h=this.dragging.enabled(),this.dragging.disable()),this.dragging=new eg(this),h&&this.dragging.enable()}},setOpacity:function(h){return this.options.opacity=h,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var h=this.options.opacity;this._icon&&Fs(this._icon,h),this._shadow&&Fs(this._shadow,h)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var h=this._map;if(h){var m=this.options.icon.options,S=m.iconSize?q(m.iconSize):q(0,0),D=m.iconAnchor?q(m.iconAnchor):q(0,0);h.panInside(this._latlng,{paddingTopLeft:D,paddingBottomRight:S.subtract(D)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function cw(h,m){return new co(h,m)}var Uo=ir.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(h){this._renderer=h.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(h){return x(this,h),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&h&&Object.prototype.hasOwnProperty.call(h,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),rd=Uo.extend({options:{fill:!0,radius:10},initialize:function(h,m){x(this,m),this._latlng=ue(h),this._radius=this.options.radius},setLatLng:function(h){var m=this._latlng;return this._latlng=ue(h),this.redraw(),this.fire("move",{oldLatLng:m,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(h){return this.options.radius=this._radius=h,this.redraw()},getRadius:function(){return this._radius},setStyle:function(h){var m=h&&h.radius||this._radius;return Uo.prototype.setStyle.call(this,h),this.setRadius(m),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var h=this._radius,m=this._radiusY||h,S=this._clickTolerance(),D=[h+S,m+S];this._pxBounds=new W(this._point.subtract(D),this._point.add(D))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(h){return h.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Vm(h,m){return new rd(h,m)}var od=rd.extend({initialize:function(h,m,S){if(typeof m=="number"&&(m=n({},S,{radius:m})),x(this,m),this._latlng=ue(h),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(h){return this._mRadius=h,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var h=[this._radius,this._radiusY||this._radius];return new ve(this._map.layerPointToLatLng(this._point.subtract(h)),this._map.layerPointToLatLng(this._point.add(h)))},setStyle:Uo.prototype.setStyle,_project:function(){var h=this._latlng.lng,m=this._latlng.lat,S=this._map,D=S.options.crs;if(D.distance===me.distance){var N=Math.PI/180,z=this._mRadius/me.R/N,Y=S.project([m+z,h]),ie=S.project([m-z,h]),ce=Y.add(ie).divideBy(2),Ie=S.unproject(ce).lat,We=Math.acos((Math.cos(z*N)-Math.sin(m*N)*Math.sin(Ie*N))/(Math.cos(m*N)*Math.cos(Ie*N)))/N;(isNaN(We)||We===0)&&(We=z/Math.cos(Math.PI/180*m)),this._point=ce.subtract(S.getPixelOrigin()),this._radius=isNaN(We)?0:ce.x-S.project([Ie,h-We]).x,this._radiusY=ce.y-Y.y}else{var rt=D.unproject(D.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(rt).x}this._updateBounds()}});function wu(h,m,S){return new od(h,m,S)}var en=Uo.extend({options:{smoothFactor:1,noClip:!1},initialize:function(h,m){x(this,m),this._setLatLngs(h)},getLatLngs:function(){return this._latlngs},setLatLngs:function(h){return this._setLatLngs(h),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(h){for(var m=1/0,S=null,D=Ha,N,z,Y=0,ie=this._parts.length;Y<ie;Y++)for(var ce=this._parts[Y],Ie=1,We=ce.length;Ie<We;Ie++){N=ce[Ie-1],z=ce[Ie];var rt=D(h,N,z,!0);rt<m&&(m=rt,S=D(h,N,z))}return S&&(S.distance=Math.sqrt(m)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return _m(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(h,m){return m=m||this._defaultShape(),h=ue(h),m.push(h),this._bounds.extend(h),this.redraw()},_setLatLngs:function(h){this._bounds=new ve,this._latlngs=this._convertLatLngs(h)},_defaultShape:function(){return An(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(h){for(var m=[],S=An(h),D=0,N=h.length;D<N;D++)S?(m[D]=ue(h[D]),this._bounds.extend(m[D])):m[D]=this._convertLatLngs(h[D]);return m},_project:function(){var h=new W;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,h),this._bounds.isValid()&&h.isValid()&&(this._rawPxBounds=h,this._updateBounds())},_updateBounds:function(){var h=this._clickTolerance(),m=new K(h,h);this._rawPxBounds&&(this._pxBounds=new W([this._rawPxBounds.min.subtract(m),this._rawPxBounds.max.add(m)]))},_projectLatlngs:function(h,m,S){var D=h[0]instanceof ye,N=h.length,z,Y;if(D){for(Y=[],z=0;z<N;z++)Y[z]=this._map.latLngToLayerPoint(h[z]),S.extend(Y[z]);m.push(Y)}else for(z=0;z<N;z++)this._projectLatlngs(h[z],m,S)},_clipPoints:function(){var h=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(h))){if(this.options.noClip){this._parts=this._rings;return}var m=this._parts,S,D,N,z,Y,ie,ce;for(S=0,N=0,z=this._rings.length;S<z;S++)for(ce=this._rings[S],D=0,Y=ce.length;D<Y-1;D++)ie=Nm(ce[D],ce[D+1],h,D,!0),ie&&(m[N]=m[N]||[],m[N].push(ie[0]),(ie[1]!==ce[D+1]||D===Y-2)&&(m[N].push(ie[1]),N++))}},_simplifyPoints:function(){for(var h=this._parts,m=this.options.smoothFactor,S=0,D=h.length;S<D;S++)h[S]=sd(h[S],m)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(h,m){var S,D,N,z,Y,ie,ce=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(S=0,z=this._parts.length;S<z;S++)for(ie=this._parts[S],D=0,Y=ie.length,N=Y-1;D<Y;N=D++)if(!(!m&&D===0)&&km(h,ie[N],ie[D])<=ce)return!0;return!1}});function uw(h,m){return new en(h,m)}en._flat=Om;var uo=en.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fm(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(h){var m=en.prototype._convertLatLngs.call(this,h),S=m.length;return S>=2&&m[0]instanceof ye&&m[0].equals(m[S-1])&&m.pop(),m},_setLatLngs:function(h){en.prototype._setLatLngs.call(this,h),An(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return An(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var h=this._renderer._bounds,m=this.options.weight,S=new K(m,m);if(h=new W(h.min.subtract(S),h.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(h))){if(this.options.noClip){this._parts=this._rings;return}for(var D=0,N=this._rings.length,z;D<N;D++)z=$p(this._rings[D],h,!0),z.length&&this._parts.push(z)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(h){var m=!1,S,D,N,z,Y,ie,ce,Ie;if(!this._pxBounds||!this._pxBounds.contains(h))return!1;for(z=0,ce=this._parts.length;z<ce;z++)for(S=this._parts[z],Y=0,Ie=S.length,ie=Ie-1;Y<Ie;ie=Y++)D=S[Y],N=S[ie],D.y>h.y!=N.y>h.y&&h.x<(N.x-D.x)*(h.y-D.y)/(N.y-D.y)+D.x&&(m=!m);return m||en.prototype._containsPoint.call(this,h,!0)}});function hw(h,m){return new uo(h,m)}var br=lo.extend({initialize:function(h,m){x(this,m),this._layers={},h&&this.addData(h)},addData:function(h){var m=I(h)?h:h.features,S,D,N;if(m){for(S=0,D=m.length;S<D;S++)N=m[S],(N.geometries||N.geometry||N.features||N.coordinates)&&this.addData(N);return this}var z=this.options;if(z.filter&&!z.filter(h))return this;var Y=Jl(h,z);return Y?(Y.feature=hd(h),Y.defaultOptions=Y.options,this.resetStyle(Y),z.onEachFeature&&z.onEachFeature(h,Y),this.addLayer(Y)):this},resetStyle:function(h){return h===void 0?this.eachLayer(this.resetStyle,this):(h.options=n({},h.defaultOptions),this._setLayerStyle(h,this.options.style),this)},setStyle:function(h){return this.eachLayer(function(m){this._setLayerStyle(m,h)},this)},_setLayerStyle:function(h,m){h.setStyle&&(typeof m=="function"&&(m=m(h.feature)),h.setStyle(m))}});function Jl(h,m){var S=h.type==="Feature"?h.geometry:h,D=S?S.coordinates:null,N=[],z=m&&m.pointToLayer,Y=m&&m.coordsToLatLng||ld,ie,ce,Ie,We;if(!D&&!S)return null;switch(S.type){case"Point":return ie=Y(D),ad(z,h,ie,m);case"MultiPoint":for(Ie=0,We=D.length;Ie<We;Ie++)ie=Y(D[Ie]),N.push(ad(z,h,ie,m));return new lo(N);case"LineString":case"MultiLineString":return ce=xu(D,S.type==="LineString"?0:1,Y),new en(ce,m);case"Polygon":case"MultiPolygon":return ce=xu(D,S.type==="Polygon"?1:2,Y),new uo(ce,m);case"GeometryCollection":for(Ie=0,We=S.geometries.length;Ie<We;Ie++){var rt=Jl({geometry:S.geometries[Ie],type:"Feature",properties:h.properties},m);rt&&N.push(rt)}return new lo(N);case"FeatureCollection":for(Ie=0,We=S.features.length;Ie<We;Ie++){var bt=Jl(S.features[Ie],m);bt&&N.push(bt)}return new lo(N);default:throw new Error("Invalid GeoJSON object.")}}function ad(h,m,S,D){return h?h(m,S):new co(S,D&&D.markersInheritOptions&&D)}function ld(h){return new ye(h[1],h[0],h[2])}function xu(h,m,S){for(var D=[],N=0,z=h.length,Y;N<z;N++)Y=m?xu(h[N],m-1,S):(S||ld)(h[N]),D.push(Y);return D}function cd(h,m){return h=ue(h),h.alt!==void 0?[f(h.lng,m),f(h.lat,m),f(h.alt,m)]:[f(h.lng,m),f(h.lat,m)]}function ud(h,m,S,D){for(var N=[],z=0,Y=h.length;z<Y;z++)N.push(m?ud(h[z],An(h[z])?0:m-1,S,D):cd(h[z],D));return!m&&S&&N.length>0&&N.push(N[0].slice()),N}function ec(h,m){return h.feature?n({},h.feature,{geometry:m}):hd(m)}function hd(h){return h.type==="Feature"||h.type==="FeatureCollection"?h:{type:"Feature",properties:{},geometry:h}}var tg={toGeoJSON:function(h){return ec(this,{type:"Point",coordinates:cd(this.getLatLng(),h)})}};co.include(tg),od.include(tg),rd.include(tg),en.include({toGeoJSON:function(h){var m=!An(this._latlngs),S=ud(this._latlngs,m?1:0,!1,h);return ec(this,{type:(m?"Multi":"")+"LineString",coordinates:S})}}),uo.include({toGeoJSON:function(h){var m=!An(this._latlngs),S=m&&!An(this._latlngs[0]),D=ud(this._latlngs,S?2:m?1:0,!0,h);return m||(D=[D]),ec(this,{type:(S?"Multi":"")+"Polygon",coordinates:D})}}),jo.include({toMultiPoint:function(h){var m=[];return this.eachLayer(function(S){m.push(S.toGeoJSON(h).geometry.coordinates)}),ec(this,{type:"MultiPoint",coordinates:m})},toGeoJSON:function(h){var m=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(m==="MultiPoint")return this.toMultiPoint(h);var S=m==="GeometryCollection",D=[];return this.eachLayer(function(N){if(N.toGeoJSON){var z=N.toGeoJSON(h);if(S)D.push(z.geometry);else{var Y=hd(z);Y.type==="FeatureCollection"?D.push.apply(D,Y.features):D.push(Y)}}}),S?ec(this,{geometries:D,type:"GeometryCollection"}):{type:"FeatureCollection",features:D}}});function Wm(h,m){return new br(h,m)}var sr=Wm,Ko=ir.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(h,m,S){this._url=h,this._bounds=se(m),x(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(vt(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){Ci(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(h){return this.options.opacity=h,this._image&&this._updateOpacity(),this},setStyle:function(h){return h.opacity&&this.setOpacity(h.opacity),this},bringToFront:function(){return this._map&&jl(this._image),this},bringToBack:function(){return this._map&&ro(this._image),this},setUrl:function(h){return this._url=h,this._image&&(this._image.src=h),this},setBounds:function(h){return this._bounds=se(h),this._map&&this._reset(),this},getEvents:function(){var h={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var h=this._url.tagName==="IMG",m=this._image=h?this._url:Ct("img");if(vt(m,"leaflet-image-layer"),this._zoomAnimated&&vt(m,"leaflet-zoom-animated"),this.options.className&&vt(m,this.options.className),m.onselectstart=g,m.onmousemove=g,m.onload=o(this.fire,this,"load"),m.onerror=o(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(m.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),h){this._url=m.src;return}m.src=this._url,m.alt=this.options.alt},_animateZoom:function(h){var m=this._map.getZoomScale(h.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,h.zoom,h.center).min;qn(this._image,S,m)},_reset:function(){var h=this._image,m=new W(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=m.getSize();zi(h,m.min),h.style.width=S.x+"px",h.style.height=S.y+"px"},_updateOpacity:function(){Fs(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var h=this.options.errorOverlayUrl;h&&this._url!==h&&(this._url=h,this._image.src=h)},getCenter:function(){return this._bounds.getCenter()}}),jm=function(h,m,S){return new Ko(h,m,S)},ig=Ko.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var h=this._url.tagName==="VIDEO",m=this._image=h?this._url:Ct("video");if(vt(m,"leaflet-image-layer"),this._zoomAnimated&&vt(m,"leaflet-zoom-animated"),this.options.className&&vt(m,this.options.className),m.onselectstart=g,m.onmousemove=g,m.onloadeddata=o(this.fire,this,"load"),h){for(var S=m.getElementsByTagName("source"),D=[],N=0;N<S.length;N++)D.push(S[N].src);this._url=S.length>0?D:[m.src];return}I(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(m.style,"objectFit")&&(m.style.objectFit="fill"),m.autoplay=!!this.options.autoplay,m.loop=!!this.options.loop,m.muted=!!this.options.muted,m.playsInline=!!this.options.playsInline;for(var z=0;z<this._url.length;z++){var Y=Ct("source");Y.src=this._url[z],m.appendChild(Y)}}});function Um(h,m,S){return new ig(h,m,S)}var sg=Ko.extend({_initImage:function(){var h=this._image=this._url;vt(h,"leaflet-image-layer"),this._zoomAnimated&&vt(h,"leaflet-zoom-animated"),this.options.className&&vt(h,this.options.className),h.onselectstart=g,h.onmousemove=g}});function ng(h,m,S){return new sg(h,m,S)}var Mr=ir.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(h,m){h&&(h instanceof ye||I(h))?(this._latlng=ue(h),x(this,m)):(x(this,h),this._source=m),this.options.content&&(this._content=this.options.content)},openOn:function(h){return h=arguments.length?h:this._source._map,h.hasLayer(this)||h.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(h){return this._map?this.close():(arguments.length?this._source=h:h=this._source,this._prepareOpen(),this.openOn(h._map)),this},onAdd:function(h){this._zoomAnimated=h._zoomAnimated,this._container||this._initLayout(),h._fadeAnimated&&Fs(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),h._fadeAnimated&&Fs(this._container,1),this.bringToFront(),this.options.interactive&&(vt(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(h){h._fadeAnimated?(Fs(this._container,0),this._removeTimeout=setTimeout(o(Ci,void 0,this._container),200)):Ci(this._container),this.options.interactive&&(gi(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(h){return this._latlng=ue(h),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(h){return this._content=h,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var h={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&jl(this._container),this},bringToBack:function(){return this._map&&ro(this._container),this},_prepareOpen:function(h){var m=this._source;if(!m._map)return!1;if(m instanceof lo){m=null;var S=this._source._layers;for(var D in S)if(S[D]._map){m=S[D];break}if(!m)return!1;this._source=m}if(!h)if(m.getCenter)h=m.getCenter();else if(m.getLatLng)h=m.getLatLng();else if(m.getBounds)h=m.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(h),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var h=this._contentNode,m=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof m=="string")h.innerHTML=m;else{for(;h.hasChildNodes();)h.removeChild(h.firstChild);h.appendChild(m)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var h=this._map.latLngToLayerPoint(this._latlng),m=q(this.options.offset),S=this._getAnchor();this._zoomAnimated?zi(this._container,h.add(S)):m=m.add(h).add(S);var D=this._containerBottom=-m.y,N=this._containerLeft=-Math.round(this._containerWidth/2)+m.x;this._container.style.bottom=D+"px",this._container.style.left=N+"px"}},_getAnchor:function(){return[0,0]}});Tt.include({_initOverlay:function(h,m,S,D){var N=m;return N instanceof h||(N=new h(D).setContent(m)),S&&N.setLatLng(S),N}}),ir.include({_initOverlay:function(h,m,S,D){var N=S;return N instanceof h?(x(N,D),N._source=this):(N=m&&!D?m:new h(D,this),N.setContent(S)),N}});var dd=Mr.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(h){return h=arguments.length?h:this._source._map,!h.hasLayer(this)&&h._popup&&h._popup.options.autoClose&&h.removeLayer(h._popup),h._popup=this,Mr.prototype.openOn.call(this,h)},onAdd:function(h){Mr.prototype.onAdd.call(this,h),h.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Uo||this._source.on("preclick",xr))},onRemove:function(h){Mr.prototype.onRemove.call(this,h),h.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Uo||this._source.off("preclick",xr))},getEvents:function(){var h=Mr.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(h.preclick=this.close),this.options.keepInView&&(h.moveend=this._adjustPan),h},_initLayout:function(){var h="leaflet-popup",m=this._container=Ct("div",h+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=Ct("div",h+"-content-wrapper",m);if(this._contentNode=Ct("div",h+"-content",S),vu(m),Jh(this._contentNode),pt(m,"contextmenu",xr),this._tipContainer=Ct("div",h+"-tip-container",m),this._tip=Ct("div",h+"-tip",this._tipContainer),this.options.closeButton){var D=this._closeButton=Ct("a",h+"-close-button",m);D.setAttribute("role","button"),D.setAttribute("aria-label","Close popup"),D.href="#close",D.innerHTML='<span aria-hidden="true">&#215;</span>',pt(D,"click",function(N){Ti(N),this.close()},this)}},_updateLayout:function(){var h=this._contentNode,m=h.style;m.width="",m.whiteSpace="nowrap";var S=h.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),m.width=S+1+"px",m.whiteSpace="",m.height="";var D=h.offsetHeight,N=this.options.maxHeight,z="leaflet-popup-scrolled";N&&D>N?(m.height=N+"px",vt(h,z)):gi(h,z),this._containerWidth=this._container.offsetWidth},_animateZoom:function(h){var m=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center),S=this._getAnchor();zi(this._container,m.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var h=this._map,m=parseInt(Na(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+m,D=this._containerWidth,N=new K(this._containerLeft,-S-this._containerBottom);N._add(oo(this._container));var z=h.layerPointToContainerPoint(N),Y=q(this.options.autoPanPadding),ie=q(this.options.autoPanPaddingTopLeft||Y),ce=q(this.options.autoPanPaddingBottomRight||Y),Ie=h.getSize(),We=0,rt=0;z.x+D+ce.x>Ie.x&&(We=z.x+D-Ie.x+ce.x),z.x-We-ie.x<0&&(We=z.x-ie.x),z.y+S+ce.y>Ie.y&&(rt=z.y+S-Ie.y+ce.y),z.y-rt-ie.y<0&&(rt=z.y-ie.y),(We||rt)&&(this.options.keepInView&&(this._autopanning=!0),h.fire("autopanstart").panBy([We,rt]))}},_getAnchor:function(){return q(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),tc=function(h,m){return new dd(h,m)};Tt.mergeOptions({closePopupOnClick:!0}),Tt.include({openPopup:function(h,m,S){return this._initOverlay(dd,h,m,S).openOn(this),this},closePopup:function(h){return h=arguments.length?h:this._popup,h&&h.close(),this}}),ir.include({bindPopup:function(h,m){return this._popup=this._initOverlay(dd,this._popup,h,m),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(h){return this._popup&&(this instanceof lo||(this._popup._source=this),this._popup._prepareOpen(h||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(h){return this._popup&&this._popup.setContent(h),this},getPopup:function(){return this._popup},_openPopup:function(h){if(!(!this._popup||!this._map)){er(h);var m=h.layer||h.target;if(this._popup._source===m&&!(m instanceof Uo)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(h.latlng);return}this._popup._source=m,this.openPopup(h.latlng)}},_movePopup:function(h){this._popup.setLatLng(h.latlng)},_onKeyPress:function(h){h.originalEvent.keyCode===13&&this._openPopup(h)}});var ic=Mr.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(h){Mr.prototype.onAdd.call(this,h),this.setOpacity(this.options.opacity),h.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(h){Mr.prototype.onRemove.call(this,h),h.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var h=Mr.prototype.getEvents.call(this);return this.options.permanent||(h.preclick=this.close),h},_initLayout:function(){var h="leaflet-tooltip",m=h+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ct("div",m),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+l(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(h){var m,S,D=this._map,N=this._container,z=D.latLngToContainerPoint(D.getCenter()),Y=D.layerPointToContainerPoint(h),ie=this.options.direction,ce=N.offsetWidth,Ie=N.offsetHeight,We=q(this.options.offset),rt=this._getAnchor();ie==="top"?(m=ce/2,S=Ie):ie==="bottom"?(m=ce/2,S=0):ie==="center"?(m=ce/2,S=Ie/2):ie==="right"?(m=0,S=Ie/2):ie==="left"?(m=ce,S=Ie/2):Y.x<z.x?(ie="right",m=0,S=Ie/2):(ie="left",m=ce+(We.x+rt.x)*2,S=Ie/2),h=h.subtract(q(m,S,!0)).add(We).add(rt),gi(N,"leaflet-tooltip-right"),gi(N,"leaflet-tooltip-left"),gi(N,"leaflet-tooltip-top"),gi(N,"leaflet-tooltip-bottom"),vt(N,"leaflet-tooltip-"+ie),zi(N,h)},_updatePosition:function(){var h=this._map.latLngToLayerPoint(this._latlng);this._setPosition(h)},setOpacity:function(h){this.options.opacity=h,this._container&&Fs(this._container,h)},_animateZoom:function(h){var m=this._map._latLngToNewLayerPoint(this._latlng,h.zoom,h.center);this._setPosition(m)},_getAnchor:function(){return q(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),bu=function(h,m){return new ic(h,m)};Tt.include({openTooltip:function(h,m,S){return this._initOverlay(ic,h,m,S).openOn(this),this},closeTooltip:function(h){return h.close(),this}}),ir.include({bindTooltip:function(h,m){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ic,this._tooltip,h,m),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(h){if(!(!h&&this._tooltipHandlersAdded)){var m=h?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[m](S),this._tooltipHandlersAdded=!h}},openTooltip:function(h){return this._tooltip&&(this instanceof lo||(this._tooltip._source=this),this._tooltip._prepareOpen(h)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(h){return this._tooltip&&this._tooltip.setContent(h),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(h){var m=typeof h.getElement=="function"&&h.getElement();m&&(pt(m,"focus",function(){this._tooltip._source=h,this.openTooltip()},this),pt(m,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(h){var m=typeof h.getElement=="function"&&h.getElement();m&&m.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(h){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var m=this;this._map.once("moveend",function(){m._openOnceFlag=!1,m._openTooltip(h)});return}this._tooltip._source=h.layer||h.target,this.openTooltip(this._tooltip.options.sticky?h.latlng:void 0)}},_moveTooltip:function(h){var m=h.latlng,S,D;this._tooltip.options.sticky&&h.originalEvent&&(S=this._map.mouseEventToContainerPoint(h.originalEvent),D=this._map.containerPointToLayerPoint(S),m=this._map.layerPointToLatLng(D)),this._tooltip.setLatLng(m)}});var pd=Va.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(h){var m=h&&h.tagName==="DIV"?h:document.createElement("div"),S=this.options;if(S.html instanceof Element?(Yh(m),m.appendChild(S.html)):m.innerHTML=S.html!==!1?S.html:"",S.bgPos){var D=q(S.bgPos);m.style.backgroundPosition=-D.x+"px "+-D.y+"px"}return this._setIconStyles(m,"icon"),m},createShadow:function(){return null}});function Km(h){return new pd(h)}Va.Default=ql;var Yo=ir.extend({options:{tileSize:256,opacity:1,updateWhenIdle:xe.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(h){x(this,h)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(h){h._addZoomLimit(this)},onRemove:function(h){this._removeAllTiles(),Ci(this._container),h._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(jl(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ro(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(h){return this.options.opacity=h,this._updateOpacity(),this},setZIndex:function(h){return this.options.zIndex=h,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var h=this._clampZoom(this._map.getZoom());h!==this._tileZoom&&(this._tileZoom=h,this._updateLevels()),this._update()}return this},getEvents:function(){var h={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),h.move=this._onMove),this._zoomAnimated&&(h.zoomanim=this._animateZoom),h},createTile:function(){return document.createElement("div")},getTileSize:function(){var h=this.options.tileSize;return h instanceof K?h:new K(h,h)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(h){for(var m=this.getPane().children,S=-h(-1/0,1/0),D=0,N=m.length,z;D<N;D++)z=m[D].style.zIndex,m[D]!==this._container&&z&&(S=h(S,+z));isFinite(S)&&(this.options.zIndex=S+h(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!xe.ielt9){Fs(this._container,this.options.opacity);var h=+new Date,m=!1,S=!1;for(var D in this._tiles){var N=this._tiles[D];if(!(!N.current||!N.loaded)){var z=Math.min(1,(h-N.loaded)/200);Fs(N.el,z),z<1?m=!0:(N.active?S=!0:this._onOpaqueTile(N),N.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),m&&(te(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this))}},_onOpaqueTile:g,_initContainer:function(){this._container||(this._container=Ct("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var h=this._tileZoom,m=this.options.maxZoom;if(h!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===h?(this._levels[S].el.style.zIndex=m-Math.abs(h-S),this._onUpdateLevel(S)):(Ci(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var D=this._levels[h],N=this._map;return D||(D=this._levels[h]={},D.el=Ct("div","leaflet-tile-container leaflet-zoom-animated",this._container),D.el.style.zIndex=m,D.origin=N.project(N.unproject(N.getPixelOrigin()),h).round(),D.zoom=h,this._setZoomTransform(D,N.getCenter(),N.getZoom()),g(D.el.offsetWidth),this._onCreateLevel(D)),this._level=D,D}},_onUpdateLevel:g,_onRemoveLevel:g,_onCreateLevel:g,_pruneTiles:function(){if(this._map){var h,m,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(h in this._tiles)m=this._tiles[h],m.retain=m.current;for(h in this._tiles)if(m=this._tiles[h],m.current&&!m.active){var D=m.coords;this._retainParent(D.x,D.y,D.z,D.z-5)||this._retainChildren(D.x,D.y,D.z,D.z+2)}for(h in this._tiles)this._tiles[h].retain||this._removeTile(h)}},_removeTilesAtZoom:function(h){for(var m in this._tiles)this._tiles[m].coords.z===h&&this._removeTile(m)},_removeAllTiles:function(){for(var h in this._tiles)this._removeTile(h)},_invalidateAll:function(){for(var h in this._levels)Ci(this._levels[h].el),this._onRemoveLevel(Number(h)),delete this._levels[h];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(h,m,S,D){var N=Math.floor(h/2),z=Math.floor(m/2),Y=S-1,ie=new K(+N,+z);ie.z=+Y;var ce=this._tileCoordsToKey(ie),Ie=this._tiles[ce];return Ie&&Ie.active?(Ie.retain=!0,!0):(Ie&&Ie.loaded&&(Ie.retain=!0),Y>D?this._retainParent(N,z,Y,D):!1)},_retainChildren:function(h,m,S,D){for(var N=2*h;N<2*h+2;N++)for(var z=2*m;z<2*m+2;z++){var Y=new K(N,z);Y.z=S+1;var ie=this._tileCoordsToKey(Y),ce=this._tiles[ie];if(ce&&ce.active){ce.retain=!0;continue}else ce&&ce.loaded&&(ce.retain=!0);S+1<D&&this._retainChildren(N,z,S+1,D)}},_resetView:function(h){var m=h&&(h.pinch||h.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),m,m)},_animateZoom:function(h){this._setView(h.center,h.zoom,!0,h.noUpdate)},_clampZoom:function(h){var m=this.options;return m.minNativeZoom!==void 0&&h<m.minNativeZoom?m.minNativeZoom:m.maxNativeZoom!==void 0&&m.maxNativeZoom<h?m.maxNativeZoom:h},_setView:function(h,m,S,D){var N=Math.round(m);this.options.maxZoom!==void 0&&N>this.options.maxZoom||this.options.minZoom!==void 0&&N<this.options.minZoom?N=void 0:N=this._clampZoom(N);var z=this.options.updateWhenZooming&&N!==this._tileZoom;(!D||z)&&(this._tileZoom=N,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),N!==void 0&&this._update(h),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(h,m)},_setZoomTransforms:function(h,m){for(var S in this._levels)this._setZoomTransform(this._levels[S],h,m)},_setZoomTransform:function(h,m,S){var D=this._map.getZoomScale(S,h.zoom),N=h.origin.multiplyBy(D).subtract(this._map._getNewPixelOrigin(m,S)).round();xe.any3d?qn(h.el,N,D):zi(h.el,N)},_resetGrid:function(){var h=this._map,m=h.options.crs,S=this._tileSize=this.getTileSize(),D=this._tileZoom,N=this._map.getPixelWorldBounds(this._tileZoom);N&&(this._globalTileRange=this._pxBoundsToTileRange(N)),this._wrapX=m.wrapLng&&!this.options.noWrap&&[Math.floor(h.project([0,m.wrapLng[0]],D).x/S.x),Math.ceil(h.project([0,m.wrapLng[1]],D).x/S.y)],this._wrapY=m.wrapLat&&!this.options.noWrap&&[Math.floor(h.project([m.wrapLat[0],0],D).y/S.x),Math.ceil(h.project([m.wrapLat[1],0],D).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(h){var m=this._map,S=m._animatingZoom?Math.max(m._animateToZoom,m.getZoom()):m.getZoom(),D=m.getZoomScale(S,this._tileZoom),N=m.project(h,this._tileZoom).floor(),z=m.getSize().divideBy(D*2);return new W(N.subtract(z),N.add(z))},_update:function(h){var m=this._map;if(m){var S=this._clampZoom(m.getZoom());if(h===void 0&&(h=m.getCenter()),this._tileZoom!==void 0){var D=this._getTiledPixelBounds(h),N=this._pxBoundsToTileRange(D),z=N.getCenter(),Y=[],ie=this.options.keepBuffer,ce=new W(N.getBottomLeft().subtract([ie,-ie]),N.getTopRight().add([ie,-ie]));if(!(isFinite(N.min.x)&&isFinite(N.min.y)&&isFinite(N.max.x)&&isFinite(N.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ie in this._tiles){var We=this._tiles[Ie].coords;(We.z!==this._tileZoom||!ce.contains(new K(We.x,We.y)))&&(this._tiles[Ie].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(h,S);return}for(var rt=N.min.y;rt<=N.max.y;rt++)for(var bt=N.min.x;bt<=N.max.x;bt++){var ls=new K(bt,rt);if(ls.z=this._tileZoom,!!this._isValidTile(ls)){var es=this._tiles[this._tileCoordsToKey(ls)];es?es.current=!0:Y.push(ls)}}if(Y.sort(function(Ns,ac){return Ns.distanceTo(z)-ac.distanceTo(z)}),Y.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var tn=document.createDocumentFragment();for(bt=0;bt<Y.length;bt++)this._addTile(Y[bt],tn);this._level.el.appendChild(tn)}}}},_isValidTile:function(h){var m=this._map.options.crs;if(!m.infinite){var S=this._globalTileRange;if(!m.wrapLng&&(h.x<S.min.x||h.x>S.max.x)||!m.wrapLat&&(h.y<S.min.y||h.y>S.max.y))return!1}if(!this.options.bounds)return!0;var D=this._tileCoordsToBounds(h);return se(this.options.bounds).overlaps(D)},_keyToBounds:function(h){return this._tileCoordsToBounds(this._keyToTileCoords(h))},_tileCoordsToNwSe:function(h){var m=this._map,S=this.getTileSize(),D=h.scaleBy(S),N=D.add(S),z=m.unproject(D,h.z),Y=m.unproject(N,h.z);return[z,Y]},_tileCoordsToBounds:function(h){var m=this._tileCoordsToNwSe(h),S=new ve(m[0],m[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(h){return h.x+":"+h.y+":"+h.z},_keyToTileCoords:function(h){var m=h.split(":"),S=new K(+m[0],+m[1]);return S.z=+m[2],S},_removeTile:function(h){var m=this._tiles[h];m&&(Ci(m.el),delete this._tiles[h],this.fire("tileunload",{tile:m.el,coords:this._keyToTileCoords(h)}))},_initTile:function(h){vt(h,"leaflet-tile");var m=this.getTileSize();h.style.width=m.x+"px",h.style.height=m.y+"px",h.onselectstart=g,h.onmousemove=g,xe.ielt9&&this.options.opacity<1&&Fs(h,this.options.opacity)},_addTile:function(h,m){var S=this._getTilePos(h),D=this._tileCoordsToKey(h),N=this.createTile(this._wrapCoords(h),o(this._tileReady,this,h));this._initTile(N),this.createTile.length<2&&$(o(this._tileReady,this,h,null,N)),zi(N,S),this._tiles[D]={el:N,coords:h,current:!0},m.appendChild(N),this.fire("tileloadstart",{tile:N,coords:h})},_tileReady:function(h,m,S){m&&this.fire("tileerror",{error:m,tile:S,coords:h});var D=this._tileCoordsToKey(h);S=this._tiles[D],S&&(S.loaded=+new Date,this._map._fadeAnimated?(Fs(S.el,0),te(this._fadeFrame),this._fadeFrame=$(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),m||(vt(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:h})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),xe.ielt9||!this._map._fadeAnimated?$(this._pruneTiles,this):setTimeout(o(this._pruneTiles,this),250)))},_getTilePos:function(h){return h.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(h){var m=new K(this._wrapX?p(h.x,this._wrapX):h.x,this._wrapY?p(h.y,this._wrapY):h.y);return m.z=h.z,m},_pxBoundsToTileRange:function(h){var m=this.getTileSize();return new W(h.min.unscaleBy(m).floor(),h.max.unscaleBy(m).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var h in this._tiles)if(!this._tiles[h].loaded)return!1;return!0}});function sc(h){return new Yo(h)}var $o=Yo.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(h,m){this._url=h,m=x(this,m),m.detectRetina&&xe.retina&&m.maxZoom>0?(m.tileSize=Math.floor(m.tileSize/2),m.zoomReverse?(m.zoomOffset--,m.minZoom=Math.min(m.maxZoom,m.minZoom+1)):(m.zoomOffset++,m.maxZoom=Math.max(m.minZoom,m.maxZoom-1)),m.minZoom=Math.max(0,m.minZoom)):m.zoomReverse?m.minZoom=Math.min(m.maxZoom,m.minZoom):m.maxZoom=Math.max(m.minZoom,m.maxZoom),typeof m.subdomains=="string"&&(m.subdomains=m.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(h,m){return this._url===h&&m===void 0&&(m=!0),this._url=h,m||this.redraw(),this},createTile:function(h,m){var S=document.createElement("img");return pt(S,"load",o(this._tileOnLoad,this,m,S)),pt(S,"error",o(this._tileOnError,this,m,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(h),S},getTileUrl:function(h){var m={r:xe.retina?"@2x":"",s:this._getSubdomain(h),x:h.x,y:h.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-h.y;this.options.tms&&(m.y=S),m["-y"]=S}return R(this._url,n(m,this.options))},_tileOnLoad:function(h,m){xe.ielt9?setTimeout(o(h,this,null,m),0):h(null,m)},_tileOnError:function(h,m,S){var D=this.options.errorTileUrl;D&&m.getAttribute("src")!==D&&(m.src=D),h(S,m)},_onTileRemove:function(h){h.tile.onload=null},_getZoomForUrl:function(){var h=this._tileZoom,m=this.options.maxZoom,S=this.options.zoomReverse,D=this.options.zoomOffset;return S&&(h=m-h),h+D},_getSubdomain:function(h){var m=Math.abs(h.x+h.y)%this.options.subdomains.length;return this.options.subdomains[m]},_abortLoading:function(){var h,m;for(h in this._tiles)if(this._tiles[h].coords.z!==this._tileZoom&&(m=this._tiles[h].el,m.onload=g,m.onerror=g,!m.complete)){m.src=k;var S=this._tiles[h].coords;Ci(m),delete this._tiles[h],this.fire("tileabort",{tile:m,coords:S})}},_removeTile:function(h){var m=this._tiles[h];if(m)return m.el.setAttribute("src",k),Yo.prototype._removeTile.call(this,h)},_tileReady:function(h,m,S){if(!(!this._map||S&&S.getAttribute("src")===k))return Yo.prototype._tileReady.call(this,h,m,S)}});function rg(h,m){return new $o(h,m)}var Mu=$o.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(h,m){this._url=h;var S=n({},this.defaultWmsParams);for(var D in m)D in this.options||(S[D]=m[D]);m=x(this,m);var N=m.detectRetina&&xe.retina?2:1,z=this.getTileSize();S.width=z.x*N,S.height=z.y*N,this.wmsParams=S},onAdd:function(h){this._crs=this.options.crs||h.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var m=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[m]=this._crs.code,$o.prototype.onAdd.call(this,h)},getTileUrl:function(h){var m=this._tileCoordsToNwSe(h),S=this._crs,D=Q(S.project(m[0]),S.project(m[1])),N=D.min,z=D.max,Y=(this._wmsVersion>=1.3&&this._crs===Gm?[N.y,N.x,z.y,z.x]:[N.x,N.y,z.x,z.y]).join(","),ie=$o.prototype.getTileUrl.call(this,h);return ie+M(this.wmsParams,ie,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Y},setParams:function(h,m){return n(this.wmsParams,h),m||this.redraw(),this}});function Ym(h,m){return new Mu(h,m)}$o.WMS=Mu,rg.wms=Ym;var Rr=ir.extend({options:{padding:.1},initialize:function(h){x(this,h),l(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),vt(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var h={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(h.zoomanim=this._onAnimZoom),h},_onAnimZoom:function(h){this._updateTransform(h.center,h.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(h,m){var S=this._map.getZoomScale(m,this._zoom),D=this._map.getSize().multiplyBy(.5+this.options.padding),N=this._map.project(this._center,m),z=D.multiplyBy(-S).add(N).subtract(this._map._getNewPixelOrigin(h,m));xe.any3d?qn(this._container,z,S):zi(this._container,z)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var h in this._layers)this._layers[h]._reset()},_onZoomEnd:function(){for(var h in this._layers)this._layers[h]._project()},_updatePaths:function(){for(var h in this._layers)this._layers[h]._update()},_update:function(){var h=this.options.padding,m=this._map.getSize(),S=this._map.containerPointToLayerPoint(m.multiplyBy(-h)).round();this._bounds=new W(S,S.add(m.multiplyBy(1+h*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),og=Rr.extend({options:{tolerance:0},getEvents:function(){var h=Rr.prototype.getEvents.call(this);return h.viewprereset=this._onViewPreReset,h},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Rr.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var h=this._container=document.createElement("canvas");pt(h,"mousemove",this._onMouseMove,this),pt(h,"click dblclick mousedown mouseup contextmenu",this._onClick,this),pt(h,"mouseout",this._handleMouseOut,this),h._leaflet_disable_events=!0,this._ctx=h.getContext("2d")},_destroyContainer:function(){te(this._redrawRequest),delete this._ctx,Ci(this._container),oi(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var h;this._redrawBounds=null;for(var m in this._layers)h=this._layers[m],h._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Rr.prototype._update.call(this);var h=this._bounds,m=this._container,S=h.getSize(),D=xe.retina?2:1;zi(m,h.min),m.width=D*S.x,m.height=D*S.y,m.style.width=S.x+"px",m.style.height=S.y+"px",xe.retina&&this._ctx.scale(2,2),this._ctx.translate(-h.min.x,-h.min.y),this.fire("update")}},_reset:function(){Rr.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(h){this._updateDashArray(h),this._layers[l(h)]=h;var m=h._order={layer:h,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=m),this._drawLast=m,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(h){this._requestRedraw(h)},_removePath:function(h){var m=h._order,S=m.next,D=m.prev;S?S.prev=D:this._drawLast=D,D?D.next=S:this._drawFirst=S,delete h._order,delete this._layers[l(h)],this._requestRedraw(h)},_updatePath:function(h){this._extendRedrawBounds(h),h._project(),h._update(),this._requestRedraw(h)},_updateStyle:function(h){this._updateDashArray(h),this._requestRedraw(h)},_updateDashArray:function(h){if(typeof h.options.dashArray=="string"){var m=h.options.dashArray.split(/[, ]+/),S=[],D,N;for(N=0;N<m.length;N++){if(D=Number(m[N]),isNaN(D))return;S.push(D)}h.options._dashArray=S}else h.options._dashArray=h.options.dashArray},_requestRedraw:function(h){this._map&&(this._extendRedrawBounds(h),this._redrawRequest=this._redrawRequest||$(this._redraw,this))},_extendRedrawBounds:function(h){if(h._pxBounds){var m=(h.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new W,this._redrawBounds.extend(h._pxBounds.min.subtract([m,m])),this._redrawBounds.extend(h._pxBounds.max.add([m,m]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var h=this._redrawBounds;if(h){var m=h.getSize();this._ctx.clearRect(h.min.x,h.min.y,m.x,m.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var h,m=this._redrawBounds;if(this._ctx.save(),m){var S=m.getSize();this._ctx.beginPath(),this._ctx.rect(m.min.x,m.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var D=this._drawFirst;D;D=D.next)h=D.layer,(!m||h._pxBounds&&h._pxBounds.intersects(m))&&h._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(h,m){if(this._drawing){var S,D,N,z,Y=h._parts,ie=Y.length,ce=this._ctx;if(ie){for(ce.beginPath(),S=0;S<ie;S++){for(D=0,N=Y[S].length;D<N;D++)z=Y[S][D],ce[D?"lineTo":"moveTo"](z.x,z.y);m&&ce.closePath()}this._fillStroke(ce,h)}}},_updateCircle:function(h){if(!(!this._drawing||h._empty())){var m=h._point,S=this._ctx,D=Math.max(Math.round(h._radius),1),N=(Math.max(Math.round(h._radiusY),1)||D)/D;N!==1&&(S.save(),S.scale(1,N)),S.beginPath(),S.arc(m.x,m.y/N,D,0,Math.PI*2,!1),N!==1&&S.restore(),this._fillStroke(S,h)}},_fillStroke:function(h,m){var S=m.options;S.fill&&(h.globalAlpha=S.fillOpacity,h.fillStyle=S.fillColor||S.color,h.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(h.setLineDash&&h.setLineDash(m.options&&m.options._dashArray||[]),h.globalAlpha=S.opacity,h.lineWidth=S.weight,h.strokeStyle=S.color,h.lineCap=S.lineCap,h.lineJoin=S.lineJoin,h.stroke())},_onClick:function(h){for(var m=this._map.mouseEventToLayerPoint(h),S,D,N=this._drawFirst;N;N=N.next)S=N.layer,S.options.interactive&&S._containsPoint(m)&&(!(h.type==="click"||h.type==="preclick")||!this._map._draggableMoved(S))&&(D=S);this._fireEvent(D?[D]:!1,h)},_onMouseMove:function(h){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var m=this._map.mouseEventToLayerPoint(h);this._handleMouseHover(h,m)}},_handleMouseOut:function(h){var m=this._hoveredLayer;m&&(gi(this._container,"leaflet-interactive"),this._fireEvent([m],h,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(h,m){if(!this._mouseHoverThrottled){for(var S,D,N=this._drawFirst;N;N=N.next)S=N.layer,S.options.interactive&&S._containsPoint(m)&&(D=S);D!==this._hoveredLayer&&(this._handleMouseOut(h),D&&(vt(this._container,"leaflet-interactive"),this._fireEvent([D],h,"mouseover"),this._hoveredLayer=D)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,h),this._mouseHoverThrottled=!0,setTimeout(o(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(h,m,S){this._map._fireDOMEvent(m,S||m.type,h)},_bringToFront:function(h){var m=h._order;if(m){var S=m.next,D=m.prev;if(S)S.prev=D;else return;D?D.next=S:S&&(this._drawFirst=S),m.prev=this._drawLast,this._drawLast.next=m,m.next=null,this._drawLast=m,this._requestRedraw(h)}},_bringToBack:function(h){var m=h._order;if(m){var S=m.next,D=m.prev;if(D)D.next=S;else return;S?S.prev=D:D&&(this._drawLast=D),m.prev=null,m.next=this._drawFirst,this._drawFirst.prev=m,this._drawFirst=m,this._requestRedraw(h)}}});function ag(h){return xe.canvas?new og(h):null}var nc=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(h){return document.createElement("<lvml:"+h+' class="lvml">')}}catch{}return function(h){return document.createElement("<"+h+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),$m={_initContainer:function(){this._container=Ct("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Rr.prototype._update.call(this),this.fire("update"))},_initPath:function(h){var m=h._container=nc("shape");vt(m,"leaflet-vml-shape "+(this.options.className||"")),m.coordsize="1 1",h._path=nc("path"),m.appendChild(h._path),this._updateStyle(h),this._layers[l(h)]=h},_addPath:function(h){var m=h._container;this._container.appendChild(m),h.options.interactive&&h.addInteractiveTarget(m)},_removePath:function(h){var m=h._container;Ci(m),h.removeInteractiveTarget(m),delete this._layers[l(h)]},_updateStyle:function(h){var m=h._stroke,S=h._fill,D=h.options,N=h._container;N.stroked=!!D.stroke,N.filled=!!D.fill,D.stroke?(m||(m=h._stroke=nc("stroke")),N.appendChild(m),m.weight=D.weight+"px",m.color=D.color,m.opacity=D.opacity,D.dashArray?m.dashStyle=I(D.dashArray)?D.dashArray.join(" "):D.dashArray.replace(/( *, *)/g," "):m.dashStyle="",m.endcap=D.lineCap.replace("butt","flat"),m.joinstyle=D.lineJoin):m&&(N.removeChild(m),h._stroke=null),D.fill?(S||(S=h._fill=nc("fill")),N.appendChild(S),S.color=D.fillColor||D.color,S.opacity=D.fillOpacity):S&&(N.removeChild(S),h._fill=null)},_updateCircle:function(h){var m=h._point.round(),S=Math.round(h._radius),D=Math.round(h._radiusY||S);this._setPath(h,h._empty()?"M0 0":"AL "+m.x+","+m.y+" "+S+","+D+" 0,"+65535*360)},_setPath:function(h,m){h._path.v=m},_bringToFront:function(h){jl(h._container)},_bringToBack:function(h){ro(h._container)}},nr=xe.vml?nc:Ne,Wa=Rr.extend({_initContainer:function(){this._container=nr("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=nr("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){Ci(this._container),oi(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Rr.prototype._update.call(this);var h=this._bounds,m=h.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(m))&&(this._svgSize=m,S.setAttribute("width",m.x),S.setAttribute("height",m.y)),zi(S,h.min),S.setAttribute("viewBox",[h.min.x,h.min.y,m.x,m.y].join(" ")),this.fire("update")}},_initPath:function(h){var m=h._path=nr("path");h.options.className&&vt(m,h.options.className),h.options.interactive&&vt(m,"leaflet-interactive"),this._updateStyle(h),this._layers[l(h)]=h},_addPath:function(h){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(h._path),h.addInteractiveTarget(h._path)},_removePath:function(h){Ci(h._path),h.removeInteractiveTarget(h._path),delete this._layers[l(h)]},_updatePath:function(h){h._project(),h._update()},_updateStyle:function(h){var m=h._path,S=h.options;m&&(S.stroke?(m.setAttribute("stroke",S.color),m.setAttribute("stroke-opacity",S.opacity),m.setAttribute("stroke-width",S.weight),m.setAttribute("stroke-linecap",S.lineCap),m.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?m.setAttribute("stroke-dasharray",S.dashArray):m.removeAttribute("stroke-dasharray"),S.dashOffset?m.setAttribute("stroke-dashoffset",S.dashOffset):m.removeAttribute("stroke-dashoffset")):m.setAttribute("stroke","none"),S.fill?(m.setAttribute("fill",S.fillColor||S.color),m.setAttribute("fill-opacity",S.fillOpacity),m.setAttribute("fill-rule",S.fillRule||"evenodd")):m.setAttribute("fill","none"))},_updatePoly:function(h,m){this._setPath(h,qe(h._parts,m))},_updateCircle:function(h){var m=h._point,S=Math.max(Math.round(h._radius),1),D=Math.max(Math.round(h._radiusY),1)||S,N="a"+S+","+D+" 0 1,0 ",z=h._empty()?"M0 0":"M"+(m.x-S)+","+m.y+N+S*2+",0 "+N+-S*2+",0 ";this._setPath(h,z)},_setPath:function(h,m){h._path.setAttribute("d",m)},_bringToFront:function(h){jl(h._path)},_bringToBack:function(h){ro(h._path)}});xe.vml&&Wa.include($m);function gd(h){return xe.svg||xe.vml?new Wa(h):null}Tt.include({getRenderer:function(h){var m=h.options.renderer||this._getPaneRenderer(h.options.pane)||this.options.renderer||this._renderer;return m||(m=this._renderer=this._createRenderer()),this.hasLayer(m)||this.addLayer(m),m},_getPaneRenderer:function(h){if(h==="overlayPane"||h===void 0)return!1;var m=this._paneRenderers[h];return m===void 0&&(m=this._createRenderer({pane:h}),this._paneRenderers[h]=m),m},_createRenderer:function(h){return this.options.preferCanvas&&ag(h)||gd(h)}});var Zm=uo.extend({initialize:function(h,m){uo.prototype.initialize.call(this,this._boundsToLatLngs(h),m)},setBounds:function(h){return this.setLatLngs(this._boundsToLatLngs(h))},_boundsToLatLngs:function(h){return h=se(h),[h.getSouthWest(),h.getNorthWest(),h.getNorthEast(),h.getSouthEast()]}});function dw(h,m){return new Zm(h,m)}Wa.create=nr,Wa.pointsToPath=qe,br.geometryToLayer=Jl,br.coordsToLatLng=ld,br.coordsToLatLngs=xu,br.latLngToCoords=cd,br.latLngsToCoords=ud,br.getFeature=ec,br.asFeature=hd,Tt.mergeOptions({boxZoom:!0});var rc=Tn.extend({initialize:function(h){this._map=h,this._container=h._container,this._pane=h._panes.overlayPane,this._resetStateTimeout=0,h.on("unload",this._destroy,this)},addHooks:function(){pt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){oi(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){Ci(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(h){if(!h.shiftKey||h.which!==1&&h.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),Nt(),Xh(),this._startPoint=this._map.mouseEventToContainerPoint(h),pt(document,{contextmenu:er,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(h){this._moved||(this._moved=!0,this._box=Ct("div","leaflet-zoom-box",this._container),vt(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(h);var m=new W(this._point,this._startPoint),S=m.getSize();zi(this._box,m.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(Ci(this._box),gi(this._container,"leaflet-crosshair")),Yl(),Qh(),oi(document,{contextmenu:er,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(h){if(!(h.which!==1&&h.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(o(this._resetState,this),0);var m=new ve(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(m).fire("boxzoomend",{boxZoomBounds:m})}},_onKeyDown:function(h){h.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Tt.addInitHook("addHandler","boxZoom",rc),Tt.mergeOptions({doubleClickZoom:!0});var Xm=Tn.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(h){var m=this._map,S=m.getZoom(),D=m.options.zoomDelta,N=h.originalEvent.shiftKey?S-D:S+D;m.options.doubleClickZoom==="center"?m.setZoom(N):m.setZoomAround(h.containerPoint,N)}});Tt.addInitHook("addHandler","doubleClickZoom",Xm),Tt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var lg=Tn.extend({addHooks:function(){if(!this._draggable){var h=this._map;this._draggable=new tr(h._mapPane,h._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),h.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),h.on("zoomend",this._onZoomEnd,this),h.whenReady(this._onZoomEnd,this))}vt(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){gi(this._map._container,"leaflet-grab"),gi(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var h=this._map;if(h._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var m=se(this._map.options.maxBounds);this._offsetLimit=Q(this._map.latLngToContainerPoint(m.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(m.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;h.fire("movestart").fire("dragstart"),h.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(h){if(this._map.options.inertia){var m=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(m),this._prunePositions(m)}this._map.fire("move",h).fire("drag",h)},_prunePositions:function(h){for(;this._positions.length>1&&h-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var h=this._map.getSize().divideBy(2),m=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=m.subtract(h).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(h,m){return h-(h-m)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var h=this._draggable._newPos.subtract(this._draggable._startPos),m=this._offsetLimit;h.x<m.min.x&&(h.x=this._viscousLimit(h.x,m.min.x)),h.y<m.min.y&&(h.y=this._viscousLimit(h.y,m.min.y)),h.x>m.max.x&&(h.x=this._viscousLimit(h.x,m.max.x)),h.y>m.max.y&&(h.y=this._viscousLimit(h.y,m.max.y)),this._draggable._newPos=this._draggable._startPos.add(h)}},_onPreDragWrap:function(){var h=this._worldWidth,m=Math.round(h/2),S=this._initialWorldOffset,D=this._draggable._newPos.x,N=(D-m+S)%h+m-S,z=(D+m+S)%h-m-S,Y=Math.abs(N+S)<Math.abs(z+S)?N:z;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Y},_onDragEnd:function(h){var m=this._map,S=m.options,D=!S.inertia||h.noInertia||this._times.length<2;if(m.fire("dragend",h),D)m.fire("moveend");else{this._prunePositions(+new Date);var N=this._lastPos.subtract(this._positions[0]),z=(this._lastTime-this._times[0])/1e3,Y=S.easeLinearity,ie=N.multiplyBy(Y/z),ce=ie.distanceTo([0,0]),Ie=Math.min(S.inertiaMaxSpeed,ce),We=ie.multiplyBy(Ie/ce),rt=Ie/(S.inertiaDeceleration*Y),bt=We.multiplyBy(-rt/2).round();!bt.x&&!bt.y?m.fire("moveend"):(bt=m._limitOffset(bt,m.options.maxBounds),$(function(){m.panBy(bt,{duration:rt,easeLinearity:Y,noMoveStart:!0,animate:!0})}))}}});Tt.addInitHook("addHandler","dragging",lg),Tt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var cg=Tn.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(h){this._map=h,this._setPanDelta(h.options.keyboardPanDelta),this._setZoomDelta(h.options.zoomDelta)},addHooks:function(){var h=this._map._container;h.tabIndex<=0&&(h.tabIndex="0"),pt(h,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),oi(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var h=document.body,m=document.documentElement,S=h.scrollTop||m.scrollTop,D=h.scrollLeft||m.scrollLeft;this._map._container.focus(),window.scrollTo(D,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(h){var m=this._panKeys={},S=this.keyCodes,D,N;for(D=0,N=S.left.length;D<N;D++)m[S.left[D]]=[-1*h,0];for(D=0,N=S.right.length;D<N;D++)m[S.right[D]]=[h,0];for(D=0,N=S.down.length;D<N;D++)m[S.down[D]]=[0,h];for(D=0,N=S.up.length;D<N;D++)m[S.up[D]]=[0,-1*h]},_setZoomDelta:function(h){var m=this._zoomKeys={},S=this.keyCodes,D,N;for(D=0,N=S.zoomIn.length;D<N;D++)m[S.zoomIn[D]]=h;for(D=0,N=S.zoomOut.length;D<N;D++)m[S.zoomOut[D]]=-h},_addHooks:function(){pt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){oi(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(h){if(!(h.altKey||h.ctrlKey||h.metaKey)){var m=h.keyCode,S=this._map,D;if(m in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(D=this._panKeys[m],h.shiftKey&&(D=q(D).multiplyBy(3)),S.options.maxBounds&&(D=S._limitOffset(q(D),S.options.maxBounds)),S.options.worldCopyJump){var N=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(D)));S.panTo(N)}else S.panBy(D)}else if(m in this._zoomKeys)S.setZoom(S.getZoom()+(h.shiftKey?3:1)*this._zoomKeys[m]);else if(m===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;er(h)}}});Tt.addInitHook("addHandler","keyboard",cg),Tt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ai=Tn.extend({addHooks:function(){pt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){oi(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(h){var m=Am(h),S=this._map.options.wheelDebounceTime;this._delta+=m,this._lastMousePos=this._map.mouseEventToContainerPoint(h),this._startTime||(this._startTime=+new Date);var D=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o(this._performZoom,this),D),er(h)},_performZoom:function(){var h=this._map,m=h.getZoom(),S=this._map.options.zoomSnap||0;h._stop();var D=this._delta/(this._map.options.wheelPxPerZoomLevel*4),N=4*Math.log(2/(1+Math.exp(-Math.abs(D))))/Math.LN2,z=S?Math.ceil(N/S)*S:N,Y=h._limitZoom(m+(this._delta>0?z:-z))-m;this._delta=0,this._startTime=null,Y&&(h.options.scrollWheelZoom==="center"?h.setZoom(m+Y):h.setZoomAround(this._lastMousePos,m+Y))}});Tt.addInitHook("addHandler","scrollWheelZoom",ai);var ug=600;Tt.mergeOptions({tapHold:xe.touchNative&&xe.safari&&xe.mobile,tapTolerance:15});var Ru=Tn.extend({addHooks:function(){pt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){oi(this._map._container,"touchstart",this._onDown,this)},_onDown:function(h){if(clearTimeout(this._holdTimeout),h.touches.length===1){var m=h.touches[0];this._startPos=this._newPos=new K(m.clientX,m.clientY),this._holdTimeout=setTimeout(o(function(){this._cancel(),this._isTapValid()&&(pt(document,"touchend",Ti),pt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",m))},this),ug),pt(document,"touchend touchcancel contextmenu",this._cancel,this),pt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function h(){oi(document,"touchend",Ti),oi(document,"touchend touchcancel",h)},_cancel:function(){clearTimeout(this._holdTimeout),oi(document,"touchend touchcancel contextmenu",this._cancel,this),oi(document,"touchmove",this._onMove,this)},_onMove:function(h){var m=h.touches[0];this._newPos=new K(m.clientX,m.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(h,m){var S=new MouseEvent(h,{bubbles:!0,cancelable:!0,view:window,screenX:m.screenX,screenY:m.screenY,clientX:m.clientX,clientY:m.clientY});S._simulated=!0,m.target.dispatchEvent(S)}});Tt.addInitHook("addHandler","tapHold",Ru),Tt.mergeOptions({touchZoom:xe.touch,bounceAtZoomLimits:!0});var oc=Tn.extend({addHooks:function(){vt(this._map._container,"leaflet-touch-zoom"),pt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){gi(this._map._container,"leaflet-touch-zoom"),oi(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(h){var m=this._map;if(!(!h.touches||h.touches.length!==2||m._animatingZoom||this._zooming)){var S=m.mouseEventToContainerPoint(h.touches[0]),D=m.mouseEventToContainerPoint(h.touches[1]);this._centerPoint=m.getSize()._divideBy(2),this._startLatLng=m.containerPointToLatLng(this._centerPoint),m.options.touchZoom!=="center"&&(this._pinchStartLatLng=m.containerPointToLatLng(S.add(D)._divideBy(2))),this._startDist=S.distanceTo(D),this._startZoom=m.getZoom(),this._moved=!1,this._zooming=!0,m._stop(),pt(document,"touchmove",this._onTouchMove,this),pt(document,"touchend touchcancel",this._onTouchEnd,this),Ti(h)}},_onTouchMove:function(h){if(!(!h.touches||h.touches.length!==2||!this._zooming)){var m=this._map,S=m.mouseEventToContainerPoint(h.touches[0]),D=m.mouseEventToContainerPoint(h.touches[1]),N=S.distanceTo(D)/this._startDist;if(this._zoom=m.getScaleZoom(N,this._startZoom),!m.options.bounceAtZoomLimits&&(this._zoom<m.getMinZoom()&&N<1||this._zoom>m.getMaxZoom()&&N>1)&&(this._zoom=m._limitZoom(this._zoom)),m.options.touchZoom==="center"){if(this._center=this._startLatLng,N===1)return}else{var z=S._add(D)._divideBy(2)._subtract(this._centerPoint);if(N===1&&z.x===0&&z.y===0)return;this._center=m.unproject(m.project(this._pinchStartLatLng,this._zoom).subtract(z),this._zoom)}this._moved||(m._moveStart(!0,!1),this._moved=!0),te(this._animRequest);var Y=o(m._move,m,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=$(Y,this,!0),Ti(h)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,te(this._animRequest),oi(document,"touchmove",this._onTouchMove,this),oi(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Tt.addInitHook("addHandler","touchZoom",oc),Tt.BoxZoom=rc,Tt.DoubleClickZoom=Xm,Tt.Drag=lg,Tt.Keyboard=cg,Tt.ScrollWheelZoom=ai,Tt.TapHold=Ru,Tt.TouchZoom=oc,i.Bounds=W,i.Browser=xe,i.CRS=Me,i.Canvas=og,i.Circle=od,i.CircleMarker=rd,i.Class=be,i.Control=Js,i.DivIcon=pd,i.DivOverlay=Mr,i.DomEvent=ed,i.DomUtil=mu,i.Draggable=tr,i.Evented=Se,i.FeatureGroup=lo,i.GeoJSON=br,i.GridLayer=Yo,i.Handler=Tn,i.Icon=Va,i.ImageOverlay=Ko,i.LatLng=ye,i.LatLngBounds=ve,i.Layer=ir,i.LayerGroup=jo,i.LineUtil=Bm,i.Map=Tt,i.Marker=co,i.Mixin=Yp,i.Path=Uo,i.Point=K,i.PolyUtil=tw,i.Polygon=uo,i.Polyline=en,i.Popup=dd,i.PosAnimation=td,i.Projection=ow,i.Rectangle=Zm,i.Renderer=Rr,i.SVG=Wa,i.SVGOverlay=sg,i.TileLayer=$o,i.Tooltip=ic,i.Transformation=ze,i.Util=Ce,i.VideoOverlay=ig,i.bind=o,i.bounds=Q,i.canvas=ag,i.circle=wu,i.circleMarker=Vm,i.control=Wo,i.divIcon=Km,i.extend=n,i.featureGroup=zm,i.geoJSON=Wm,i.geoJson=sr,i.gridLayer=sc,i.icon=Hm,i.imageOverlay=jm,i.latLng=ue,i.latLngBounds=se,i.layerGroup=Su,i.map=Vo,i.marker=cw,i.point=q,i.polygon=hw,i.polyline=uw,i.popup=tc,i.rectangle=dw,i.setOptions=x,i.stamp=l,i.svg=gd,i.svgOverlay=ng,i.tileLayer=rg,i.tooltip=bu,i.transformation=Be,i.version=s,i.videoOverlay=Um;var Qm=window.L;i.noConflict=function(){return window.L=Qm,this},window.L=i})}(Ug,Ug.exports)),Ug.exports}var im=zV();const HV=Qf(im);function g0(e,t,i){return Object.freeze({instance:e,context:t,container:i})}function f0(e,t){return t==null?function(s,n){const r=T.useRef();return r.current||(r.current=e(s,n)),r}:function(s,n){const r=T.useRef();r.current||(r.current=e(s,n));const o=T.useRef(s),{instance:a}=r.current;return T.useEffect(function(){o.current!==s&&(t(a,s,o.current),o.current=s)},[a,s,n]),r}}function VV(e,t){T.useEffect(function(){return(t.layerContainer??t.map).addLayer(e.instance),function(){var r;(r=t.layerContainer)==null||r.removeLayer(e.instance),t.map.removeLayer(e.instance)}},[t,e])}function fF(e){return function(i){const s=pF(),n=e(p0(i,s),s);return uF(s.map,i.attribution),gF(n.current,i.eventHandlers),VV(n.current,s),n}}function WV(e,t){const i=f0(e,t),s=fF(i);return NV(s)}function jV(e,t){const i=f0(e),s=BV(i,t);return OV(s)}function UV(e,t){const i=f0(e,t),s=fF(i);return _V(s)}function KV(e,t,i){const{opacity:s,zIndex:n}=t;s!=null&&s!==i.opacity&&e.setOpacity(s),n!=null&&n!==i.zIndex&&e.setZIndex(n)}function Bb(){return Bb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(e[s]=i[s])}return e},Bb.apply(this,arguments)}function YV({bounds:e,boundsOptions:t,center:i,children:s,className:n,id:r,placeholder:o,style:a,whenReady:l,zoom:c,...p},g){const[f]=T.useState({className:n,id:r,style:a}),[y,C]=T.useState(null);T.useImperativeHandle(g,()=>(y==null?void 0:y.map)??null,[y]);const x=T.useCallback(b=>{if(b!==null&&y===null){const R=new im.Map(b,p);i!=null&&c!=null?R.setView(i,c):e!=null&&R.fitBounds(e,t),l!=null&&R.whenReady(l),C(FV(R))}},[]);T.useEffect(()=>()=>{y==null||y.map.remove()},[y]);const M=y?De.createElement(dF,{value:y},s):o??null;return De.createElement("div",Bb({},f,{ref:x}),M)}const $V=T.forwardRef(YV),ZV=WV(function({position:t,...i},s){const n=new im.Marker(t,i);return g0(n,kV(s,{overlayContainer:n}))},function(t,i,s){i.position!==s.position&&t.setLatLng(i.position),i.icon!=null&&i.icon!==s.icon&&t.setIcon(i.icon),i.zIndexOffset!=null&&i.zIndexOffset!==s.zIndexOffset&&t.setZIndexOffset(i.zIndexOffset),i.opacity!=null&&i.opacity!==s.opacity&&t.setOpacity(i.opacity),t.dragging!=null&&i.draggable!==s.draggable&&(i.draggable===!0?t.dragging.enable():t.dragging.disable())}),XV=jV(function(t,i){const s=new im.Popup(t,i.overlayContainer);return g0(s,i)},function(t,i,{position:s},n){T.useEffect(function(){const{instance:o}=t;function a(c){c.popup===o&&(o.update(),n(!0))}function l(c){c.popup===o&&n(!1)}return i.map.on({popupopen:a,popupclose:l}),i.overlayContainer==null?(s!=null&&o.setLatLng(s),o.openOn(i.map)):i.overlayContainer.bindPopup(o),function(){var p;i.map.off({popupopen:a,popupclose:l}),(p=i.overlayContainer)==null||p.unbindPopup(),i.map.removeLayer(o)}},[t,i,n,s])}),QV=UV(function({url:t,...i},s){const n=new im.TileLayer(t,p0(i,s));return g0(n,s)},function(t,i,s){KV(t,i,s);const{url:n}=i;n!=null&&n!==s.url&&t.setUrl(n)});var mp=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const s=t?this.allAsyncListeners:this.allSyncListeners;let n=s.get(e);return!n&&i&&(n=new Set,s.set(e,n)),n}noRegisteredListenersExist(){return this.allSyncListeners.size===0&&this.allAsyncListeners.size===0&&this.globalSyncListeners.size===0&&this.globalAsyncListeners.size===0}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const s=this.getListeners(e,i,!1);s&&(s.delete(t),s.size===0&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){const t=e;this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){const i=e.type;if(t&&"event"in e){const a=e.event;a instanceof Event&&(e.eventPath=a.composedPath())}const s=(a,l)=>a.forEach(c=>{if(!l.has(c))return;const p=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>c(e)):()=>c(e);t?this.dispatchAsync(p):p()}),n=this.getListeners(i,t,!1)??new Set,r=new Set(n);r.size>0&&s(r,n),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(a=>{const l=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>a(i,e)):()=>a(i,e);t?this.dispatchAsync(l):l()})}dispatchAsync(e){if(this.asyncFunctionsQueue.push(e),!this.scheduled){const t=()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)};this.frameworkOverrides?this.frameworkOverrides.wrapIncoming(t):t(),this.scheduled=!0}}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}},mF=(e=>(e.CommunityCoreModule="@ag-grid-community/core",e.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",e.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",e.CsvExportModule="@ag-grid-community/csv-export",e.EnterpriseCoreModule="@ag-grid-enterprise/core",e.RowGroupingModule="@ag-grid-enterprise/row-grouping",e.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",e.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",e.MenuModule="@ag-grid-enterprise/menu",e.SetFilterModule="@ag-grid-enterprise/set-filter",e.MultiFilterModule="@ag-grid-enterprise/multi-filter",e.StatusBarModule="@ag-grid-enterprise/status-bar",e.SideBarModule="@ag-grid-enterprise/side-bar",e.RangeSelectionModule="@ag-grid-enterprise/range-selection",e.MasterDetailModule="@ag-grid-enterprise/master-detail",e.RichSelectModule="@ag-grid-enterprise/rich-select",e.GridChartsModule="@ag-grid-enterprise/charts",e.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",e.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",e.ExcelExportModule="@ag-grid-enterprise/excel-export",e.ClipboardModule="@ag-grid-enterprise/clipboard",e.SparklinesModule="@ag-grid-enterprise/sparklines",e.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",e.AngularModule="@ag-grid-community/angular",e.ReactModule="@ag-grid-community/react",e.VueModule="@ag-grid-community/vue",e))(mF||{}),XL={};function m0(e,t){XL[t]||(e(),XL[t]=!0)}function Do(e,...t){console.log("AG Grid: "+e,...t)}function we(e,...t){m0(()=>console.warn("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function Ut(e,...t){m0(()=>console.error("AG Grid: "+e,...t),e+(t==null?void 0:t.join("")))}function v0(e){return!!(e&&e.constructor&&e.call&&e.apply)}function qV(e){JV(e,400)}var Gx=[],zx=!1;function QL(e){Gx.push(e),!zx&&(zx=!0,window.setTimeout(()=>{const t=Gx.slice();Gx.length=0,zx=!1,t.forEach(i=>i())},0))}function JV(e,t=0){e.length>0&&window.setTimeout(()=>e.forEach(i=>i()),t)}function Cn(e,t){let i;return function(...s){const n=this;window.clearTimeout(i),i=window.setTimeout(function(){e.apply(n,s)},t)}}function qL(e,t){let i=0;return function(...s){const n=this,r=new Date().getTime();r-i<t||(i=r,e.apply(n,s))}}function eW(e,t,i=100,s){const n=new Date().getTime();let r=null,o=!1;const a=()=>{const l=new Date().getTime()-n>i;(e()||l)&&(t(),o=!0,r!=null&&(window.clearInterval(r),r=null),l&&s&&we(s))};a(),o||(r=window.setInterval(a,10))}function tW(...e){return t=>e.reduce((i,s)=>s(i),t)}function dl(e){return e==null||e===""?null:e}function Ae(e,t=!1){return e!=null&&(e!==""||t)}function Pt(e){return!Ae(e)}function hr(e){return e==null||e.length===0}function Gb(e){return e!=null&&typeof e.toString=="function"?e.toString():null}function ch(e){if(e===void 0)return;if(e===null||e==="")return null;if(typeof e=="number")return isNaN(e)?void 0:e;const t=parseInt(e,10);return isNaN(t)?void 0:t}function zb(e){if(e!==void 0)return e===null||e===""?!1:Hb(e)}function Hb(e){return typeof e=="boolean"?e:typeof e=="string"?e.toUpperCase()==="TRUE"||e=="":!1}function Cf(e,t){const i=e?JSON.stringify(e):null,s=t?JSON.stringify(t):null;return i===s}function iW(e,t,i=!1){const s=e==null,n=t==null;if(e&&e.toNumber&&(e=e.toNumber()),t&&t.toNumber&&(t=t.toNumber()),s&&n)return 0;if(s)return-1;if(n)return 1;function r(o,a){return o>a?1:o<a?-1:0}if(typeof e!="string"||!i)return r(e,t);try{return e.localeCompare(t)}catch{return r(e,t)}}function py(e){if(e instanceof Set||e instanceof Map){const t=[];return e.forEach(i=>t.push(i)),t}return Object.values(e)}function vF(e,t){return e.get("rowModelType")===t}function xi(e){return vF(e,"clientSide")}function ya(e){return vF(e,"serverSide")}function Ts(e,t){return e.get("domLayout")===t}function By(e){return Hy(e)!==void 0}function Gy(e){return!e.get("suppressAsyncEvents")}function yF(e){return typeof e.get("getRowHeight")=="function"}function sW(e,t){return t?!e.get("enableStrictPivotColumnOrder"):e.get("maintainColumnOrder")}function $c(e,t,i=!1,s){if(s==null&&(s=e.environment.getDefaultRowHeight()),yF(e)){if(i)return{height:s,estimated:!0};const o={node:t,data:t.data},a=e.getCallback("getRowHeight")(o);if(Vb(a))return a===0&&we("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,a),estimated:!1}}if(t.detail&&e.get("masterDetail"))return nW(e);const n=e.get("rowHeight");return{height:n&&Vb(n)?n:s,estimated:!1}}function nW(e){if(e.get("detailRowAutoHeight"))return{height:1,estimated:!1};const t=e.get("detailRowHeight");return Vb(t)?{height:t,estimated:!1}:{height:300,estimated:!1}}function uh(e){const{environment:t}=e,i=e.get("rowHeight");if(!i||Pt(i))return t.getDefaultRowHeight();const s=t.refreshRowHeightVariable();return s!==-1?s:(we("row height must be a number if not using standard row model"),t.getDefaultRowHeight())}function Vb(e){return!isNaN(e)&&typeof e=="number"&&isFinite(e)}function Sf(e,t,i){const s=t[e.getDomDataKey()];return s?s[i]:void 0}function vh(e,t,i,s){const n=e.getDomDataKey();let r=t[n];Pt(r)&&(r={},t[n]=r),r[i]=s}function Wi(e){let t=null;const i=e.get("getDocument");return i&&Ae(i)?t=i():e.eGridDiv&&(t=e.eGridDiv.ownerDocument),t&&Ae(t)?t:document}function CF(e){return Wi(e).defaultView||window}function wf(e){return e.eGridDiv.getRootNode()}function _i(e){return wf(e).activeElement}function SF(e){const t=Wi(e),i=_i(e);return i===null||i===t.body}function Qd(e){return e.get("ensureDomOrder")?!1:e.get("animateRows")}function TC(e){return!(e.get("paginateChildRows")||e.get("groupHideOpenParents")||Ts(e,"print"))}function na(e){const t=e.get("autoGroupColumnDef");return!(t!=null&&t.comparator)&&!e.get("treeData")}function Wb(e){const t=e.get("groupAggFiltering");if(typeof t=="function")return e.getCallback("groupAggFiltering");if(t===!0)return()=>!0}function wF(e){const t=e.get("grandTotalRow");if(t)return t;if(e.get("groupIncludeTotalFooter"))return"bottom"}function xF(e){const t=e.get("groupTotalRow");if(typeof t=="function")return e.getCallback("groupTotalRow");if(t)return()=>t;const i=e.get("groupIncludeFooter");if(typeof i=="function"){const s=e.getCallback("groupIncludeFooter");return n=>s(n)?"bottom":void 0}return()=>i?"bottom":void 0}function bF(e){return e.exists("groupDisplayType")?e.get("groupDisplayType")==="multipleColumns":e.get("groupHideOpenParents")}function AC(e,t){return t?!1:e.get("groupDisplayType")==="groupRows"}function vp(e){const t=e.getCallback("getRowId");return t===void 0?t:i=>{let s=t(i);return typeof s!="string"&&(we("The getRowId callback must return a string. The ID ",s," is being cast to a string."),s=String(s)),s}}function ap(e){return(e==null?void 0:e.checkboxes)??!0}function zy(e){return(e==null?void 0:e.mode)==="multiRow"&&(e.headerCheckbox??!0)}function rW(e){return(e==null?void 0:e.hideDisabledCheckboxes)??!1}function oW(e){return typeof e.get("rowSelection")!="string"}function aW(e){return e.get("cellSelection")!==void 0}function lW(e){const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?(t==null?void 0:t.suppressMultiRanges)??!1:!1:e.get("suppressMultiRangeSelection")}function Cl(e){const t=e.get("cellSelection");return t!==void 0?!!t:e.get("enableRangeSelection")}function cW(e){var s;const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?((s=t.handle)==null?void 0:s.mode)==="range":!1:e.get("enableRangeHandle")}function JL(e){var s;const t=e.get("cellSelection");return t!==void 0?typeof t!="boolean"?((s=t.handle)==null?void 0:s.mode)==="fill":!1:e.get("enableFillHandle")}function MF(e){const t=e.get("rowSelection")??"single";if(typeof t=="string"){const i=e.get("suppressRowClickSelection"),s=e.get("suppressRowDeselection");return i&&s?!1:i?"enableDeselection":s?"enableSelection":!0}return t.mode==="singleRow"||t.mode==="multiRow"?t.enableClickSelection??!1:!1}function uW(e){const t=MF(e);return t===!0||t==="enableSelection"}function eT(e){const t=MF(e);return t===!0||t==="enableDeselection"}function y0(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("isRowSelectable"):t==null?void 0:t.isRowSelectable}function Hy(e){const t=e.get("rowSelection");if(typeof t=="string")switch(t){case"multiple":return"multiRow";case"single":return"singleRow";default:return}return t==null?void 0:t.mode}function RF(e){return Hy(e)==="multiRow"}function hW(e){const t=e.get("rowSelection");return typeof t=="string"?e.get("rowMultiSelectWithClick"):(t==null?void 0:t.enableSelectionWithoutKeys)??!1}function C0(e){const t=e.get("rowSelection");if(typeof t=="string"){const i=e.get("groupSelectsChildren"),s=e.get("groupSelectsFiltered");return i&&s?"filteredDescendants":i?"descendants":"self"}return(t==null?void 0:t.mode)==="multiRow"?t.groupSelects:void 0}function yh(e){const t=C0(e);return t==="descendants"||t==="filteredDescendants"}function Hx(e){return e.isModuleRegistered("@ag-grid-enterprise/set-filter")&&!e.get("suppressSetFilterByDefault")}function At(e){if(!(!e||!e.length))return e[e.length-1]}function Jc(e,t,i){return e==null&&t==null?!0:e!=null&&t!=null&&e.length===t.length&&e.every((s,n)=>i?i(s,t[n]):t[n]===s)}function dW(e){return e.sort((t,i)=>t-i)}function DF(e,t){const i=e.indexOf(t);i>=0&&(e[i]=e[e.length-1],e.pop())}function Sn(e,t){const i=e.indexOf(t);i>=0&&e.splice(i,1)}function pW(e,t){for(let i=0;i<t.length;i++)DF(e,t[i])}function gW(e,t){for(let i=0;i<t.length;i++)Sn(e,t[i])}function Vy(e,t,i){e.splice(i,0,t)}function EF(e,t,i){gW(e,t),t.slice().reverse().forEach(s=>Vy(e,s,i))}function hh(e,t){return e.indexOf(t)>-1}function fW(e){return(e==null?void 0:e.flatMap(t=>t))??[]}function tT(e,t){t==null||e==null||t.forEach(i=>e.push(i))}var IF="__ag_Grid_Stop_Propagation",mW=["touchstart","touchend","touchmove","touchcancel","scroll"],Vx={};function lp(e){e[IF]=!0}function pl(e){return e[IF]===!0}var LF=(()=>{const e={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return i=>{if(typeof Vx[i]=="boolean")return Vx[i];const s=document.createElement(e[i]||"div");return i="on"+i,Vx[i]=i in s}})();function jb(e,t,i){let s=t;for(;s;){const n=Sf(e,s,i);if(n)return n;s=s.parentElement}return null}function vW(e,t){return!t||!e?!1:CW(t).indexOf(e)>=0}function yW(e){const t=[];let i=e.target;for(;i;)t.push(i),i=i.parentElement;return t}function CW(e){const t=e;return t.path?t.path:t.composedPath?t.composedPath():yW(t)}function SW(e,t,i,s){const r=hh(mW,i)?{passive:!0}:void 0;e&&e.addEventListener&&e.addEventListener(t,i,s,r)}var de=class{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.propertyListenerId=0,this.lastChangeSetIdLookup={},this.isAlive=()=>!this.destroyed}preWireBeans(e){this.frameworkOverrides=e.frameworkOverrides,this.stubContext=e.context,this.eventService=e.eventService,this.gos=e.gos,this.localeService=e.localeService}getFrameworkOverrides(){return this.frameworkOverrides}destroy(){for(let e=0;e<this.destroyFunctions.length;e++)this.destroyFunctions[e]();this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchLocalEvent({type:"destroyed"})}addEventListener(e,t,i){this.localEventService||(this.localEventService=new mp),this.localEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.localEventService&&this.localEventService.removeEventListener(e,t,i)}dispatchLocalEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedElementListeners(e,t){return this._setupListeners(e,t)}addManagedEventListeners(e){return this._setupListeners(this.eventService,e)}addManagedListeners(e,t){return this._setupListeners(e,t)}_setupListeners(e,t){const i=[];for(const s in t){const n=t[s];n&&i.push(this._setupListener(e,s,n))}return i}_setupListener(e,t,i){if(this.destroyed)return()=>null;e instanceof HTMLElement?SW(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);const s=()=>(e.removeEventListener(t,i),null);return this.destroyFunctions.push(s),()=>(s(),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==s),null)}setupGridOptionListener(e,t){this.gos.addPropertyEventListener(e,t);const i=()=>(this.gos.removePropertyEventListener(e,t),null);return this.destroyFunctions.push(i),()=>(i(),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==i),null)}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,s=n=>{if(n.changeSet){if(n.changeSet&&n.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=n.changeSet.id}const r={type:"gridPropertyChanged",changeSet:n.changeSet,source:n.source};t(r)};e.forEach(n=>this.setupGridOptionListener(n,s))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.stubContext).createBean(e,i)}destroyBean(e,t){return(t||this.stubContext).destroyBean(e)}destroyBeans(e,t){return(t||this.stubContext).destroyBeans(e)}};function fn(e){return e instanceof gy}var gy=class extends de{constructor(e,t,i,s){super(),this.isColumn=!1,this.expandable=!1,this.instanceId=PF(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=s}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0),super.destroy()}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return this.children?this.children.some(e=>e.isVisible()):!1}isPadding(){return this.padding}setExpanded(e){this.expanded=e===void 0?!1:e,this.dispatchLocalEvent({type:"expandedChanged"})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){this.children&&this.children.forEach(t=>{Zc(t)?e.push(t):fn(t)&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const s=this.findChildrenRemovingPadding();for(let r=0,o=s.length;r<o;r++){const a=s[r];if(!a.isVisible())continue;const l=a.getColumnGroupShow();l==="open"?(e=!0,i=!0):l==="closed"?(t=!0,i=!0):(e=!0,t=!0)}const n=e&&t&&i;this.expandable!==n&&(this.expandable=n,this.dispatchLocalEvent({type:"expandableChanged"}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach(s=>{fn(s)&&s.isPadding()?t(s.children):e.push(s)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}},TF="ag-Grid-ControlsColumn",wW=class extends de{constructor(){super(...arguments),this.beanName="controlsColService"}createControlsCols(){const{gos:e}=this,t=e.get("rowSelection");if(!t||typeof t!="object")return[];const i=ap(t),s=zy(t);if(i||s){const n=e.get("selectionColumnDef"),o={maxWidth:50,resizable:!1,suppressHeaderMenuButton:!0,sortable:!1,suppressMovable:!0,lockPosition:e.get("enableRtl")?"right":"left",comparator(l,c,p,g){const f=p.isSelected(),y=g.isSelected();return f&&y?0:f?1:-1},editable:!1,suppressFillHandle:!0,...n,colId:`${TF}`},a=new b0(o,null,o.colId,!1);return this.createBean(a),[a]}return[]}},PC="ag-Grid-AutoColumn";function S0(e){const t=[],i=s=>{for(let n=0;n<s.length;n++){const r=s[n];Zc(r)?t.push(r):fn(r)&&i(r.getChildren())}};return i(e),t}function nl(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}function Tc(e,t,i){const s={};if(!t)return;Sl(null,t,r=>{s[r.getInstanceId()]=r}),i&&Sl(null,i,r=>{s[r.getInstanceId()]=null});const n=Object.values(s).filter(r=>r!=null);e.destroyBeans(n)}function Ub(e){return e.getId().startsWith(PC)}function sm(e){return e.getColId().startsWith(TF)}function fy(e){let t=[];return e instanceof Array?e.some(s=>typeof s!="string")?we("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:typeof e=="string"?t=e.split(","):we("colDef.type should be of type 'string' | 'string[]'"),t}var w0=class{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=i=>{this.frameworkOverrides.wrapOutgoing(()=>e(i))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(i,s)=>{this.frameworkOverrides.wrapOutgoing(()=>e(i,s))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){return this.wrappedListeners.get(e)??e}unwrapGlobal(e){return this.wrappedGlobalListeners.get(e)??e}},x0=new Set(["__proto__","constructor","prototype"]);function bo(e,t){if(e!=null){if(Array.isArray(e)){for(let i=0;i<e.length;i++)t(i.toString(),e[i]);return}for(const[i,s]of Object.entries(e))t(i,s)}}function AF(e){const t={},i=Object.keys(e);for(let s=0;s<i.length;s++){if(x0.has(i[s]))continue;const n=i[s],r=e[n];t[n]=r}return t}function Kb(e,t){if(!e)return;const i=e,s={};return Object.keys(i).forEach(n=>{if(t&&t.indexOf(n)>=0||x0.has(n))return;const r=i[n];$b(r)&&r.constructor===Object?s[n]=Kb(r):s[n]=r}),s}function Yb(e){if(!e)return[];const t=Object;if(typeof t.values=="function")return t.values(e);const i=[];for(const s in e)e.hasOwnProperty(s)&&e.propertyIsEnumerable(s)&&i.push(e[s]);return i}function mn(e,t,i=!0,s=!1){Ae(t)&&bo(t,(n,r)=>{if(x0.has(n))return;let o=e[n];o!==r&&(s&&o==null&&r!=null&&typeof r=="object"&&r.constructor===Object&&(o={},e[n]=o),$b(r)&&$b(o)&&!Array.isArray(o)?mn(o,r,i,s):(i||r!==void 0)&&(e[n]=r))})}function qg(e,t,i){if(!t||!e)return;if(!i)return e[t];const s=t.split(".");let n=e;for(let r=0;r<s.length;r++){if(n==null)return;n=n[s[r]]}return n}function $b(e){return typeof e=="object"&&e!==null}var xW={resizable:!0,sortable:!0},bW=0;function PF(){return bW++}function Zc(e){return e instanceof b0}var b0=class extends de{constructor(e,t,i,s){super(),this.isColumn=!0,this.instanceId=PF(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.columnEventService=new mp,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=s,this.setState(e)}wireBeans(e){this.columnHoverService=e.columnHoverService}getInstanceId(){return this.instanceId}setState(e){e.sort!==void 0?(e.sort==="asc"||e.sort==="desc")&&(this.sort=e.sort):(e.initialSort==="asc"||e.initialSort==="desc")&&(this.sort=e.initialSort);const t=e.sortIndex,i=e.initialSortIndex;t!==void 0?t!==null&&(this.sortIndex=t):i!==null&&(this.sortIndex=i);const s=e.hide,n=e.initialHide;s!==void 0?this.visible=!s:this.visible=!n,e.pinned!==void 0?this.setPinned(e.pinned):this.setPinned(e.initialPinned);const r=e.flex,o=e.initialFlex;r!==void 0?this.flex=r:o!==void 0&&(this.flex=o)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.columnEventService.dispatchEvent(this.createColumnEvent("colDefChanged",i))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}postConstruct(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gos.get("suppressFieldDotNotation");this.fieldContainsDots=Ae(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=Ae(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=e.minWidth??this.gos.environment.getDefaultColumnMinWidth(),this.maxWidth=e.maxWidth??Number.MAX_SAFE_INTEGER}initTooltip(){this.tooltipEnabled=Ae(this.colDef.tooltipField)||Ae(this.colDef.tooltipValueGetter)||Ae(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}calculateColInitialWidth(e){let t;const i=ch(e.width),s=ch(e.initialWidth);return i!=null?t=i:s!=null?t=s:t=200,Math.max(Math.min(t,this.maxWidth),this.minWidth)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){if(Pt(this.colDef)||Pt(this.colDef.showRowGroup))return!1;const t=this.colDef.showRowGroup===!0,i=this.colDef.showRowGroup===e;return t||i}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}getHighlighted(){return this.highlighted}addEventListener(e,t){var s;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.columnEventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new w0(this.frameworkOverrides));const i=((s=this.frameworkEventListenerService)==null?void 0:s.wrap(t))??t;this.columnEventService.addEventListener(e,i)}removeEventListener(e,t){var s;const i=((s=this.frameworkEventListenerService)==null?void 0:s.unwrap(t))??t;this.columnEventService.removeEventListener(e,i)}createColumnFunctionCallbackParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if(typeof this.colDef.suppressNavigable=="boolean")return this.colDef.suppressNavigable;if(typeof this.colDef.suppressNavigable=="function"){const t=this.createColumnFunctionCallbackParams(e),i=this.colDef.suppressNavigable;return i(t)}return!1}isCellEditable(e){if(e.group){if(this.gos.get("treeData")){if(!e.data&&!this.gos.get("enableGroupEdit"))return!1}else if(!this.gos.get("enableGroupEdit"))return!1}return this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){const t=this.gos.get("rowSelection");if(t&&typeof t!="string"){const i=sm(this)&&ap(t);return this.isColumnFunc(e,i)}else return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){return this.colDef[e]??xW[e]}isColumnFunc(e,t){if(typeof t=="boolean")return t;if(typeof t=="function"){const i=this.createColumnFunctionCallbackParams(e);return t(i)}return!1}setHighlighted(e){this.highlighted!==e&&(this.highlighted=e,this.columnEventService.dispatchEvent(this.createColumnEvent("headerHighlightChanged","uiColumnMoved")))}setMoving(e,t){this.moving=e,this.columnEventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gos.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.columnEventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return this.sort==="asc"}isSortDescending(){return this.sort==="desc"}isSortNone(){return Pt(this.sort)}isSorting(){return Ae(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.columnEventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.columnEventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,i){this.filterActive!==e&&(this.filterActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const s=this.createColumnEvent("filterChanged",t);i&&mn(s,i),this.columnEventService.dispatchEvent(s)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){e===!0||e==="left"?this.pinned="left":e==="right"?this.pinned="right":this.pinned=null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.columnEventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return this.pinned==="left"||this.pinned==="right"}isPinnedLeft(){return this.pinned==="left"}isPinnedRight(){return this.pinned==="right"}getPinned(){return this.pinned}setVisible(e,t){const i=e===!0;this.visible!==i&&(this.visible=i,this.columnEventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){return!this.getColDef().suppressSpanHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getDefinition(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gos.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(Pt(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(Pt(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){e=Math.max(e,this.minWidth),e=Math.min(e,this.maxWidth),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&t!=="flex"&&t!=="gridInitializing"&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.columnEventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.columnEventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return this.colDef.enablePivot===!0}isAllowValue(){return this.colDef.enableValue===!0}isAllowRowGroup(){return this.colDef.enableRowGroup===!0}dispatchStateUpdatedEvent(e){this.columnEventService.dispatchEvent({type:"columnStateUpdated",key:e})}},MW={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}},RW=class{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=Gb(e);let i=0;for(;;){let s;if(e?(s=e,i!==0&&(s+="_"+i)):t?(s=t,i!==0&&(s+="_"+i)):s=i,!this.existingKeys[s])return this.existingKeys[s]=!0,String(s);i++}}},DW=class extends de{constructor(){super(...arguments),this.beanName="columnFactory"}wireBeans(e){this.dataTypeService=e.dataTypeService}createColumnTree(e,t,i,s){const n=new RW,{existingCols:r,existingGroups:o,existingColKeys:a}=this.extractExistingTreeData(i);n.addExistingKeys(a);const l=this.recursivelyCreateColumns(e,0,t,r,n,o,s),c=this.findMaxDept(l,0),p=this.balanceColumnTree(l,0,c,n);return Sl(null,p,(f,y)=>{fn(f)&&f.setupExpandable(),f.setOriginalParent(y)}),{columnTree:p,treeDept:c}}extractExistingTreeData(e){const t=[],i=[],s=[];return e&&Sl(null,e,n=>{if(fn(n)){const r=n;i.push(r)}else{const r=n;s.push(r.getId()),t.push(r)}}),{existingCols:t,existingGroups:i,existingColKeys:s}}balanceTreeForAutoCols(e,t){const i=[],s=this.findDepth(t);return e.forEach(n=>{let r=n;for(let o=s-1;o>=0;o--){const a=new gy(null,`FAKE_PATH_${n.getId()}}_${o}`,!0,o);this.createBean(a),a.setChildren([r]),r.setOriginalParent(a),r=a}s===0&&n.setOriginalParent(null),i.push(r)}),[i,s]}findDepth(e){let t=0,i=e;for(;i&&i[0]&&fn(i[0]);)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,s){const n=[];for(let r=0;r<e.length;r++){const o=e[r];if(fn(o)){const a=o,l=this.balanceColumnTree(a.getChildren(),t+1,i,s);a.setChildren(l),n.push(a)}else{let a,l;for(let c=i-1;c>=t;c--){const p=s.getUniqueKey(null,null),g=this.createMergedColGroupDef(null),f=new gy(g,p,!0,t);this.createBean(f),l&&l.setChildren([f]),l=f,a||(a=l)}if(a&&l)if(n.push(a),e.some(p=>fn(p))){l.setChildren([o]);continue}else{l.setChildren(e);break}n.push(o)}}return n}findMaxDept(e,t){let i=t;for(let s=0;s<e.length;s++){const n=e[s];if(fn(n)){const r=n,o=this.findMaxDept(r.getChildren(),t+1);i<o&&(i=o)}}return i}recursivelyCreateColumns(e,t,i,s,n,r,o){if(!e)return[];const a=new Array(e.length);for(let l=0;l<a.length;l++){const c=e[l];this.isColumnGroup(c)?a[l]=this.createColumnGroup(i,c,t,s,n,r,o):a[l]=this.createColumn(i,c,s,n,o)}return a}createColumnGroup(e,t,i,s,n,r,o){const a=this.createMergedColGroupDef(t),l=n.getUniqueKey(a.groupId||null,null),c=new gy(a,l,!1,i);this.createBean(c);const p=this.findExistingGroup(t,r);p&&r.splice(p.idx,1);const g=p==null?void 0:p.group;g&&c.setExpanded(g.isExpanded());const f=this.recursivelyCreateColumns(a.children,i+1,e,s,n,r,o);return c.setChildren(f),c}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gos.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,s,n){var a;const r=this.findExistingColumn(t,i);r&&(i==null||i.splice(r.idx,1));let o=r==null?void 0:r.column;if(o){const l=this.addColumnDefaultAndTypes(t,o.getColId());o.setColDef(l,t,n),this.applyColumnState(o,l,n)}else{const l=s.getUniqueKey(t.colId,t.field),c=this.addColumnDefaultAndTypes(t,l);o=new b0(c,t,l,e),this.createBean(o)}return(a=this.dataTypeService)==null||a.addColumnListeners(o),o}applyColumnState(e,t,i){const s=ch(t.flex);if(s!==void 0&&e.setFlex(s),e.getFlex()<=0){const a=ch(t.width);if(a!=null)e.setActualWidth(a,i);else{const l=e.getActualWidth();e.setActualWidth(l,i)}}t.sort!==void 0&&(t.sort=="asc"||t.sort=="desc"?e.setSort(t.sort,i):e.setSort(void 0,i));const r=ch(t.sortIndex);r!==void 0&&e.setSortIndex(r);const o=zb(t.hide);o!==void 0&&e.setVisible(!o,i),t.pinned!==void 0&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){const s=t[i].getUserProvidedColDef();if(!s)continue;if(e.colId!=null){if(t[i].getId()===e.colId)return{idx:i,column:t[i]};continue}if(e.field!=null){if(s.field===e.field)return{idx:i,column:t[i]};continue}if(s===e)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(e.groupId!=null)for(let s=0;s<t.length;s++){const n=t[s];if(n.getColGroupDef()&&n.getId()===e.groupId)return{idx:s,group:n}}}addColumnDefaultAndTypes(e,t){var a;const i={},s=this.gos.get("defaultColDef");mn(i,s,!1,!0);const n=this.updateColDefAndGetColumnType(i,e,t);n&&this.assignColumnTypes(n,i),mn(i,e,!1,!0);const r=this.gos.get("autoGroupColumnDef"),o=na(this.gos);return e.rowGroup&&r&&o&&mn(i,{sort:r.sort,initialSort:r.initialSort},!1,!0),(a=this.dataTypeService)==null||a.validateColDef(i),i}updateColDefAndGetColumnType(e,t,i){var r;const s=(r=this.dataTypeService)==null?void 0:r.updateColDefAndGetColumnType(e,t,i),n=t.type??s??e.type;return e.type=n,n?fy(n):void 0}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},MW),s=this.gos.get("columnTypes")||{};bo(s,(n,r)=>{n in i?we(`the column type '${n}' is a default column type and cannot be overridden.`):(r.type&&we("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[n]=r)}),e.forEach(n=>{const r=i[n.trim()];r?mn(t,r,!1,!0):we("colDef.type '"+n+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return e.children!==void 0}};function Sl(e,t,i){if(t)for(let s=0;s<t.length;s++){const n=t[s];fn(n)&&Sl(n,n.getChildren(),i),i(n,e)}}var EW=class extends de{constructor(){super(...arguments),this.beanName="columnModel",this.pivotMode=!1,this.autoHeightActiveAtLeastOnce=!1,this.ready=!1,this.changeEventsDispatching=!1,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}wireBeans(e){this.context=e.context,this.ctrlsService=e.ctrlsService,this.columnFactory=e.columnFactory,this.columnSizeService=e.columnSizeService,this.visibleColsService=e.visibleColsService,this.columnViewportService=e.columnViewportService,this.pivotResultColsService=e.pivotResultColsService,this.columnAnimationService=e.columnAnimationService,this.autoColService=e.autoColService,this.controlsColService=e.controlsColService,this.valueCache=e.valueCache,this.columnDefFactory=e.columnDefFactory,this.columnApplyStateService=e.columnApplyStateService,this.columnGroupStateService=e.columnGroupStateService,this.eventDispatcher=e.columnEventDispatcher,this.columnMoveService=e.columnMoveService,this.columnAutosizeService=e.columnAutosizeService,this.funcColsService=e.funcColsService,this.quickFilterService=e.quickFilterService,this.showRowGroupColsService=e.showRowGroupColsService,this.environment=e.environment}postConstruct(){const e=this.gos.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.refreshAll(eh(t.source))),this.addManagedPropertyListener("rowSelection",t=>{this.onSelectionOptionsChanged(t.currentValue,t.previousValue,eh(t.source))}),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(eh(t.source))),this.addManagedPropertyListeners(["defaultColDef","defaultColGroupDef","columnTypes","suppressFieldDotNotation"],t=>this.recreateColumnDefs(eh(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gos.get("pivotMode"),eh(t.source))),this.addManagedEventListeners({firstDataRendered:()=>this.onFirstDataRendered()})}createColsFromColDefs(e){var c,p,g;const t=this.colDefs?this.columnApplyStateService.compareColumnStatesAndDispatchEvents(e):void 0;this.valueCache.expire();const i=(c=this.colDefCols)==null?void 0:c.list,s=(p=this.colDefCols)==null?void 0:p.tree,n=this.columnFactory.createColumnTree(this.colDefs,!0,s,e);Tc(this.context,(g=this.colDefCols)==null?void 0:g.tree,n.columnTree);const r=n.columnTree,o=n.treeDept,a=S0(r),l={};a.forEach(f=>l[f.getId()]=f),this.colDefCols={tree:r,treeDepth:o,list:a,map:l},this.funcColsService.extractCols(e,i),this.ready=!0,this.refreshCols(!0),this.visibleColsService.refresh(e),this.columnViewportService.checkViewportColumns(),this.eventDispatcher.everythingChanged(e),t&&(this.changeEventsDispatching=!0,t(),this.changeEventsDispatching=!1),this.eventDispatcher.newColumnsLoaded(e),e==="gridInitializing"&&this.columnSizeService.applyAutosizeStrategy()}refreshCols(e){var n,r,o;if(!this.colDefCols)return;const t=(n=this.cols)==null?void 0:n.tree;this.saveColOrder(),this.selectCols(),this.createAutoCols(),this.addAutoCols(),this.createControlsCols(),this.addControlsCols();const i=sW(this.gos,this.showingPivotResult);(!e||i)&&this.restoreColOrder(),this.positionLockedCols(),(r=this.showRowGroupColsService)==null||r.refresh(),(o=this.quickFilterService)==null||o.refreshQuickFilterCols(),this.setColSpanActive(),this.setAutoHeightActive(),this.visibleColsService.clear(),this.columnViewportService.clear(),!Jc(t,this.cols.tree)&&this.eventDispatcher.gridColumns()}selectCols(){const e=this.pivotResultColsService.getPivotResultCols();if(this.showingPivotResult=e!=null,e){const{map:t,list:i,tree:s,treeDepth:n}=e;this.cols={list:i.slice(),map:{...t},tree:s.slice(),treeDepth:n},e.list.some(o=>{var a;return((a=this.cols)==null?void 0:a.map[o.getColId()])!==void 0})||(this.lastPivotOrder=null)}else{const{map:t,list:i,tree:s,treeDepth:n}=this.colDefCols;this.cols={list:i.slice(),map:{...t},tree:s.slice(),treeDepth:n}}}getColsToShow(){const e=this.isPivotMode()&&!this.isShowingPivotResult(),t=this.funcColsService.getValueColumns();return this.cols.list.filter(s=>{const n=Ub(s);if(e){const r=t&&hh(t,s);return n||r}else return n||s.isVisible()})}addAutoCols(){this.autoCols!=null&&(this.cols.list=this.autoCols.list.concat(this.cols.list),this.cols.tree=this.autoCols.tree.concat(this.cols.tree),iT(this.cols))}createAutoCols(){var C;const e=AC(this.gos,this.pivotMode),t=this.pivotMode?this.gos.get("pivotSuppressAutoColumn"):this.isSuppressAutoCol(),i=this.funcColsService.getRowGroupColumns(),n=!(i.length>0||this.gos.get("treeData"))||t||e,r=()=>{this.autoCols&&(Tc(this.context,this.autoCols.tree),this.autoCols=null)};if(n||!this.autoColService){r();return}const o=this.autoColService.createAutoCols(i)??[],a=nT(o,((C=this.autoCols)==null?void 0:C.list)||null),l=this.cols.treeDepth,p=(this.autoCols?this.autoCols.treeDepth:-1)==l;if(a&&p)return;r();const[g,f]=this.columnFactory.balanceTreeForAutoCols(o,this.cols.tree);this.autoCols={list:o,tree:g,treeDepth:f,map:{}};const y=x=>{if(!x)return null;const M=x.filter(b=>!Ub(b));return[...o,...M]};this.lastOrder=y(this.lastOrder),this.lastPivotOrder=y(this.lastPivotOrder)}createControlsCols(){var c,p,g;const e=()=>{var f;Tc(this.context,(f=this.controlsCols)==null?void 0:f.tree),this.controlsCols=null};this.controlsColService||e();const t=this.cols.treeDepth,s=(((c=this.controlsCols)==null?void 0:c.treeDepth)??-1)==t,n=((p=this.controlsColService)==null?void 0:p.createControlsCols())??[];if(nT(n,((g=this.controlsCols)==null?void 0:g.list)??[])&&s)return;e();const[o,a]=this.columnFactory.balanceTreeForAutoCols(n,this.cols.tree);this.controlsCols={list:n,tree:o,treeDepth:a,map:{}};const l=f=>{if(!f)return null;const y=f.filter(C=>!sm(C));return[...n,...y]};this.lastOrder=l(this.lastOrder),this.lastPivotOrder=l(this.lastPivotOrder)}addControlsCols(){this.controlsCols!=null&&(this.cols.list=this.controlsCols.list.concat(this.cols.list),this.cols.tree=this.controlsCols.tree.concat(this.cols.tree),iT(this.cols))}refreshAll(e){this.isReady()&&(this.refreshCols(!1),this.visibleColsService.refresh(e))}setColsVisible(e,t=!1,i){this.columnApplyStateService.applyColumnState({state:e.map(s=>({colId:typeof s=="string"?s:s.getColId(),hide:!t}))},i)}setColsPinned(e,t,i){if(!this.cols||hr(e))return;if(Ts(this.gos,"print")){we("Changing the column pinning status is not allowed with domLayout='print'");return}this.columnAnimationService.start();let s;t===!0||t==="left"?s="left":t==="right"?s="right":s=null;const n=[];e.forEach(r=>{if(!r)return;const o=this.getCol(r);o&&o.getPinned()!==s&&(o.setPinned(s),n.push(o))}),n.length&&(this.visibleColsService.refresh(i),this.eventDispatcher.columnPinned(n,i)),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let s;fn(e)?s=e.getId():s=e||"",this.columnGroupStateService.setColumnGroupState([{groupId:s,open:t}],i)}getProvidedColGroup(e){var i;let t=null;return Sl(null,(i=this.cols)==null?void 0:i.tree,s=>{fn(s)&&s.getId()===e&&(t=s)}),t}isColGroupLocked(e){const t=this.gos.get("groupLockGroupColumns");if(!e.isRowGroupActive()||t===0)return!1;if(t===-1)return!0;const s=this.funcColsService.getRowGroupColumns().findIndex(n=>n.getColId()===e.getColId());return t>s}isSuppressAutoCol(){return this.gos.get("groupDisplayType")==="custom"?!0:this.gos.get("treeDataDisplayType")==="custom"}setAutoHeightActive(){this.autoHeightActive=this.cols.list.some(e=>e.isVisible()&&e.isAutoHeight()),this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,xi(this.gos)||ya(this.gos)||we("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}restoreColOrder(){const e=this.showingPivotResult?this.lastPivotOrder:this.lastOrder;if(!e)return;const t=new Map(e.map((l,c)=>[l,c]));if(!this.cols.list.some(l=>t.has(l)))return;const s=new Map(this.cols.list.map(l=>[l,!0])),n=e.filter(l=>s.has(l)),r=new Map(n.map(l=>[l,!0])),o=this.cols.list.filter(l=>!r.has(l)),a=n.slice();o.forEach(l=>{let c=l.getOriginalParent();if(!c){a.push(l);return}const p=[];for(;!p.length&&c;)c.getLeafColumns().forEach(C=>{const x=a.indexOf(C)>=0,M=p.indexOf(C)<0;x&&M&&p.push(C)}),c=c.getOriginalParent();if(!p.length){a.push(l);return}const g=p.map(y=>a.indexOf(y)),f=Math.max(...g);Vy(a,l,f+1)}),this.cols.list=a}sortColsLikeKeys(e){if(this.cols==null)return;let t=[];const i={};e.forEach(n=>{if(i[n])return;const r=this.cols.map[n];r&&(t.push(r),i[n]=!0)});let s=0;if(this.cols.list.forEach(n=>{const r=n.getColId();if(i[r]!=null)return;r.startsWith(PC)?Vy(t,n,s++):t.push(n)}),t=this.columnMoveService.placeLockedColumns(t),!this.columnMoveService.doesMovePassMarryChildren(t)){we("Applying column order broke a group where columns should be married together. Applying new order has been discarded.");return}this.cols.list=t}sortColsLikeCols(e){!e||e.length<=1||e.filter(i=>this.cols.list.indexOf(i)<0).length>0||e.sort((i,s)=>{const n=this.cols.list.indexOf(i),r=this.cols.list.indexOf(s);return n-r})}resetColDefIntoCol(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const s=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(s,i,t),!0}queueResizeOperations(){this.shouldQueueResizeOperations=!0}isShouldQueueResizeOperations(){return this.shouldQueueResizeOperations}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}pushResizeOperation(e){this.resizeOperationQueue.push(e)}moveInCols(e,t,i){var s;EF((s=this.cols)==null?void 0:s.list,e,t),this.visibleColsService.refresh(i)}positionLockedCols(){this.cols.list=this.columnMoveService.placeLockedColumns(this.cols.list)}saveColOrder(){var e,t;this.showingPivotResult?this.lastPivotOrder=(e=this.cols)==null?void 0:e.list:this.lastOrder=(t=this.cols)==null?void 0:t.list}getColumnDefs(){if(!this.colDefCols)return;const e=this.colDefCols.list.slice();this.showingPivotResult?e.sort((s,n)=>this.lastOrder.indexOf(s)-this.lastOrder.indexOf(n)):this.lastOrder&&e.sort((s,n)=>this.cols.list.indexOf(s)-this.cols.list.indexOf(n));const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns();return this.columnDefFactory.buildColumnDefs(e,t,i)}isShowingPivotResult(){return this.showingPivotResult}isChangeEventsDispatching(){return this.changeEventsDispatching}isColSpanActive(){return this.colSpanActive}isProvidedColGroupsPresent(){var e;return((e=this.colDefCols)==null?void 0:e.treeDepth)>0}setColSpanActive(){this.colSpanActive=this.cols.list.some(e=>e.getColDef().colSpan!=null)}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}getHeaderRowCount(){return this.cols?this.cols.treeDepth+1:-1}isReady(){return this.ready}isPivotMode(){return this.pivotMode}setPivotMode(e,t){e===this.pivotMode||!this.isPivotSettingAllowed(this.pivotMode)||(this.pivotMode=e,this.ready&&(this.refreshCols(!1),this.visibleColsService.refresh(t),this.eventDispatcher.pivotModeChanged()))}isPivotSettingAllowed(e){return e&&this.gos.get("treeData")?(we("Pivot mode not available with treeData."),!1):!0}isPivotActive(){const e=this.funcColsService.getPivotColumns();return this.pivotMode&&!hr(e)}recreateColumnDefs(e){this.cols&&(this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e),this.createColsFromColDefs(e))}setColumnDefs(e,t){this.colDefs=e,this.createColsFromColDefs(t)}destroy(){var e,t,i;Tc(this.context,(e=this.colDefCols)==null?void 0:e.tree),Tc(this.context,(t=this.autoCols)==null?void 0:t.tree),Tc(this.context,(i=this.controlsCols)==null?void 0:i.tree),super.destroy()}getColTree(){return this.cols.tree}getColDefColTree(){return this.colDefCols.tree}getColDefCols(){var e;return(e=this.colDefCols)!=null&&e.list?this.colDefCols.list:null}getCols(){var e;return((e=this.cols)==null?void 0:e.list)??[]}getAllCols(){var i,s,n;const e=this.pivotResultColsService.getPivotResultCols(),t=e==null?void 0:e.list;return[((i=this.colDefCols)==null?void 0:i.list)??[],((s=this.autoCols)==null?void 0:s.list)??[],((n=this.controlsCols)==null?void 0:n.list)??[],t??[]].flat()}getColsForKeys(e){return e?e.map(t=>this.getCol(t)).filter(t=>t!=null):[]}getColDefCol(e){var t;return(t=this.colDefCols)!=null&&t.list?this.getColFromCollection(e,this.colDefCols):null}getCol(e){return e==null?null:this.getColFromCollection(e,this.cols)}getColFromCollection(e,t){if(t==null)return null;const{map:i,list:s}=t;if(typeof e=="string"&&i[e])return i[e];for(let n=0;n<s.length;n++)if(sT(s[n],e))return s[n];return this.getAutoCol(e)}getAutoCol(e){var t;return((t=this.autoCols)==null?void 0:t.list.find(i=>sT(i,e)))??null}getAutoCols(){var e;return((e=this.autoCols)==null?void 0:e.list)??null}setColHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&(e.isColumn?this.eventDispatcher.headerHeight(e):this.eventDispatcher.groupHeaderHeight(e))}getGroupRowsHeight(){const e=[],t=this.ctrlsService.getHeaderRowContainerCtrls();for(const i of t){if(!i)continue;const s=i.getGroupRowCount()||0;for(let n=0;n<s;n++){const r=i.getGroupRowCtrlAtIndex(n),o=e[n];if(r){const a=this.getColumnGroupHeaderRowHeight(r);(o==null||a>o)&&(e[n]=a)}}}return e}getColumnGroupHeaderRowHeight(e){const t=this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight();let i=0;const s=e.getHeaderCtrls();for(const n of s){const r=n.getColumn();if(r.isAutoHeaderHeight()){const o=r.getAutoHeaderHeight();o!=null&&o>i&&(i=o)}}return Math.max(t,i)}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),i=this.visibleColsService.getAllCols().filter(s=>s.isAutoHeaderHeight()).map(s=>s.getAutoHeaderHeight()||0);return Math.max(e,...i)}getHeaderHeight(){return this.gos.get("headerHeight")??this.environment.getDefaultHeaderHeight()}getFloatingFiltersHeight(){return this.gos.get("floatingFiltersHeight")??this.getHeaderHeight()}getGroupHeaderHeight(){return this.gos.get("groupHeaderHeight")??this.getHeaderHeight()}getPivotHeaderHeight(){return this.gos.get("pivotHeaderHeight")??this.getHeaderHeight()}getPivotGroupHeaderHeight(){return this.gos.get("pivotGroupHeaderHeight")??this.getGroupHeaderHeight()}onFirstDataRendered(){const e=this.gos.get("autoSizeStrategy");if((e==null?void 0:e.type)!=="fitCellContents")return;const{colIds:t,skipHeader:i}=e;setTimeout(()=>{t?this.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"autosizeColumns"}):this.columnAutosizeService.autoSizeAllColumns("autosizeColumns",i)})}onAutoGroupColumnDefChanged(e){this.autoCols&&this.autoColService.updateAutoCols(this.autoCols.list,e)}onSelectionOptionsChanged(e,t,i){const s=t&&typeof t!="string"?ap(t):void 0,n=e&&typeof e!="string"?ap(e):void 0,r=s!==n,o=t&&typeof t!="string"?zy(t):void 0,a=e&&typeof e!="string"?zy(e):void 0;(r||o!==a)&&this.refreshAll(i)}};function eh(e){return e==="gridOptionsUpdated"?"gridOptionsChanged":e}function iT(e){e.map={},e.list.forEach(t=>e.map[t.getId()]=t)}function sT(e,t){const i=e===t,s=e.getColDef()===t,n=e.getColId()==t;return i||s||n}function nT(e,t){return Jc(e,t,(i,s)=>i.getColId()===s.getColId())}var IW=class extends de{constructor(){super(...arguments),this.beanName="columnAutosizeService",this.timesDelayed=0}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.animationFrameService=e.animationFrameService,this.autoWidthCalculator=e.autoWidthCalculator,this.eventDispatcher=e.columnEventDispatcher,this.ctrlsService=e.ctrlsService,this.renderStatusService=e.renderStatusService}autoSizeCols(e){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeCols(e));return}const{colKeys:t,skipHeader:i,skipHeaderGroups:s,stopAtGroup:n,source:r="api"}=e;if(this.animationFrameService.flushAllFrames(),this.timesDelayed<5&&this.renderStatusService&&!this.renderStatusService.areHeaderCellsRendered()){this.timesDelayed++,setTimeout(()=>this.autoSizeCols(e));return}this.timesDelayed=0;const o=[];let a=-1;const l=i??this.gos.get("skipHeaderOnAutoSize"),c=s??l;for(;a!==0;){a=0;const p=[];t.forEach(g=>{if(!g)return;const f=this.columnModel.getCol(g);if(!f||o.indexOf(f)>=0)return;const y=this.autoWidthCalculator.getPreferredWidthForColumn(f,l);if(y>0){const C=this.normaliseColumnWidth(f,y);f.setActualWidth(C,r),o.push(f),a++}p.push(f)}),p.length&&this.visibleColsService.refresh(r)}c||this.autoSizeColumnGroupsByColumns(t,r,n),this.eventDispatcher.columnResized(o,!0,"autosizeColumns")}autoSizeColumn(e,t,i){e&&this.autoSizeCols({colKeys:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const s=new Set;this.columnModel.getColsForKeys(e).forEach(a=>{let l=a.getParent();for(;l&&l!=i;)l.isPadding()||s.add(l),l=l.getParent()});let r;const o=[];for(const a of s){for(const l of this.ctrlsService.getHeaderRowContainerCtrls())if(r=l.getHeaderCtrlForColumn(a),r)break;r&&r.resizeLeafColumnsToFit(t)}return o}autoSizeAllColumns(e,t){if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.autoSizeAllColumns(e,t));return}const i=this.visibleColsService.getAllCols();this.autoSizeCols({colKeys:i,skipHeader:t,source:e})}normaliseColumnWidth(e,t){const i=e.getMinWidth();t<i&&(t=i);const s=e.getMaxWidth();return e.isGreaterThanMax(t)&&(t=s),t}},LW=class extends de{constructor(){super(...arguments),this.beanName="funcColsService",this.rowGroupCols=[],this.valueCols=[],this.pivotCols=[]}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.aggFuncService=e.aggFuncService,this.visibleColsService=e.visibleColsService}getModifyColumnsNoEventsCallbacks(){return{addGroupCol:e=>this.rowGroupCols.push(e),removeGroupCol:e=>Sn(this.rowGroupCols,e),addPivotCol:e=>this.pivotCols.push(e),removePivotCol:e=>Sn(this.pivotCols,e),addValueCol:e=>this.valueCols.push(e),removeValueCol:e=>Sn(this.valueCols,e)}}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(t===!0)return this.rowGroupCols.slice(0);const i=this.columnModel.getColDefCol(t);return i?[i]:null}sortRowGroupColumns(e){this.rowGroupCols.sort(e)}sortPivotColumns(e){this.pivotCols.sort(e)}getValueColumns(){return this.valueCols?this.valueCols:[]}getPivotColumns(){return this.pivotCols?this.pivotCols:[]}getRowGroupColumns(){return this.rowGroupCols?this.rowGroupCols:[]}isRowGroupEmpty(){return hr(this.rowGroupCols)}setColumnAggFunc(e,t,i){if(!e)return;const s=this.columnModel.getColDefCol(e);s&&(s.setAggFunc(t),this.eventDispatcher.columnChanged("columnValueChanged",[s],i))}setRowGroupColumns(e,t){this.setColList(e,this.rowGroupCols,"columnRowGroupChanged",!0,!0,(i,s)=>this.setRowGroupActive(i,s,t),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gos.get("suppressRowGroupHidesColumns")&&this.columnModel.setColsVisible([t],!1,i),!e&&!this.gos.get("suppressMakeColumnVisibleAfterUnGroup")&&this.columnModel.setColsVisible([t],!0,i))}addRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!0,!0,i=>this.setRowGroupActive(!0,i,t),"columnRowGroupChanged",t)}removeRowGroupColumns(e,t){this.updateColList(e,this.rowGroupCols,!1,!0,i=>this.setRowGroupActive(!1,i,t),"columnRowGroupChanged",t)}addPivotColumns(e,t){this.updateColList(e,this.pivotCols,!0,!1,i=>i.setPivotActive(!0,t),"columnPivotChanged",t)}setPivotColumns(e,t){this.setColList(e,this.pivotCols,"columnPivotChanged",!0,!1,(i,s)=>{s.setPivotActive(i,t)},t)}removePivotColumns(e,t){this.updateColList(e,this.pivotCols,!1,!1,i=>i.setPivotActive(!1,t),"columnPivotChanged",t)}setValueColumns(e,t){this.setColList(e,this.valueCols,"columnValueChanged",!1,!1,(i,s)=>this.setValueActive(i,s,t),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc()&&this.aggFuncService)){const s=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(s)}}addValueColumns(e,t){this.updateColList(e,this.valueCols,!0,!1,i=>this.setValueActive(!0,i,t),"columnValueChanged",t)}removeValueColumns(e,t){this.updateColList(e,this.valueCols,!1,!1,i=>this.setValueActive(!1,i,t),"columnValueChanged",t)}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;const s=this.rowGroupCols[e],n=this.rowGroupCols.slice(e,t);this.rowGroupCols.splice(e,1),this.rowGroupCols.splice(t,0,s),this.eventDispatcher.rowGroupChanged(n,i)}setColList(e,t,i,s,n,r,o){if(!this.columnModel.getCols())return;const a=new Map;t.forEach((c,p)=>a.set(c,p)),t.length=0,Ae(e)&&e.forEach(c=>{const p=this.columnModel.getColDefCol(c);p&&t.push(p)}),t.forEach((c,p)=>{const g=a.get(c);if(g===void 0){a.set(c,0);return}s&&g!==p||a.delete(c)}),(this.columnModel.getColDefCols()||[]).forEach(c=>{const p=t.indexOf(c)>=0;r(p,c)}),n&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(o),this.eventDispatcher.columnChanged(i,[...a.keys()],o)}updateColList(e,t,i,s,n,r,o){if(!e||hr(e))return;let a=!1;const l=new Set;e.forEach(c=>{if(!c)return;const p=this.columnModel.getColDefCol(c);if(p){if(l.add(p),i){if(t.indexOf(p)>=0)return;t.push(p)}else{const g=t.indexOf(p);if(g<0)return;for(let f=g+1;f<t.length;f++)l.add(t[f]);Sn(t,p)}n(p),a=!0}}),a&&(s&&this.columnModel.refreshCols(!1),this.visibleColsService.refresh(o),this.eventDispatcher.genericColumnEvent(r,Array.from(l),o))}extractCols(e,t){this.extractRowGroupCols(e,t),this.extractPivotCols(e,t),this.extractValueCols(e,t)}extractValueCols(e,t){this.valueCols=this.extractColsCommon(t,this.valueCols,(i,s)=>i.setValueActive(s,e),()=>{},()=>{},i=>{const s=i.aggFunc;if(s===null||s==="")return null;if(s!==void 0)return!!s},i=>i.initialAggFunc!=null&&i.initialAggFunc!=""),this.valueCols.forEach(i=>{const s=i.getColDef();s.aggFunc!=null&&s.aggFunc!=""?i.setAggFunc(s.aggFunc):i.getAggFunc()||i.setAggFunc(s.initialAggFunc)})}extractRowGroupCols(e,t){this.rowGroupCols=this.extractColsCommon(t,this.rowGroupCols,(i,s)=>i.setRowGroupActive(s,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractPivotCols(e,t){this.pivotCols=this.extractColsCommon(t,this.pivotCols,(i,s)=>i.setPivotActive(s,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}extractColsCommon(e=[],t=[],i,s,n,r,o){const a=[],l=[];(this.columnModel.getColDefCols()||[]).forEach(f=>{const y=e.indexOf(f)<0,C=f.getColDef(),x=zb(r(C)),M=zb(o(C)),b=ch(s(C)),R=ch(n(C));let I;x!==void 0?I=x:b!==void 0?b===null?I=!1:I=b>=0:y?M!==void 0?I=M:R!==void 0?I=R!=null&&R>=0:I=!1:I=t.indexOf(f)>=0,I&&((y?b!=null||R!=null:b!=null)?a.push(f):l.push(f))});const p=f=>{const y=s(f.getColDef()),C=n(f.getColDef());return y??C};a.sort((f,y)=>{const C=p(f),x=p(y);return C===x?0:C<x?-1:1});const g=[].concat(a);return t.forEach(f=>{l.indexOf(f)>=0&&g.push(f)}),l.forEach(f=>{g.indexOf(f)<0&&g.push(f)}),t.forEach(f=>{g.indexOf(f)<0&&i(f,!1)}),g.forEach(f=>{t.indexOf(f)<0&&i(f,!0)}),g}generateColumnStateForRowGroupAndPivotIndexes(e,t){const i={},s=(n,r,o,a,l,c)=>{const p=this.columnModel.getColDefCols();if(!r.length||!p)return[];const g=Object.keys(n),f=new Set(g),y=new Set(g),C=new Set(r.map(_=>{const B=_.getColId();return y.delete(B),B}).concat(g)),x=[],M={};let b=0;for(let _=0;_<p.length;_++){const B=p[_].getColId();C.has(B)&&(x.push(B),M[B]=b++)}let R=1e3,I=!1,P=0;const k=_=>{const B=M[_];for(let H=P;H<B;H++){const V=x[H];y.has(V)&&(n[V][l]=R++,y.delete(V))}P=B};r.forEach(_=>{const B=_.getColId();if(f.has(B))k(B),n[B][l]=R++;else{const H=_.getColDef();(H[l]===null||H[l]===void 0&&H[c]==null)&&(I||(H[o]||H[o]===void 0&&H[a]?k(B):(y.forEach($=>{n[$][l]=R+M[$]}),R+=x.length,I=!0)),i[B]||(i[B]={colId:B}),i[B][l]=R++)}})};return s(e,this.rowGroupCols,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),s(t,this.pivotCols,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}},TW=class extends de{constructor(){super(...arguments),this.beanName="columnApplyStateService"}wireBeans(e){this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher,this.sortController=e.sortController,this.columnGetStateService=e.columnGetStateService,this.funcColsService=e.funcColsService,this.visibleColsService=e.visibleColsService,this.columnAnimationService=e.columnAnimationService,this.pivotResultColsService=e.pivotResultColsService}applyColumnState(e,t){const i=this.columnModel.getColDefCols()||[];if(hr(i))return!1;if(e&&e.state&&!e.state.forEach)return we("applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const s=this.funcColsService.getModifyColumnsNoEventsCallbacks(),n=(a,l,c)=>{const p=this.compareColumnStatesAndDispatchEvents(t),g=l.slice(),f={},y={},C=[],x=[];let M=0;const b=this.funcColsService.getRowGroupColumns().slice(),R=this.funcColsService.getPivotColumns().slice();a.forEach(_=>{const B=_.colId||"";if(B.startsWith(PC)){C.push(_),x.push(_);return}const V=c(B);V?(this.syncColumnWithStateItem(V,_,e.defaultState,f,y,!1,t,s),Sn(g,V)):(x.push(_),M+=1)});const I=_=>this.syncColumnWithStateItem(_,null,e.defaultState,f,y,!1,t,s);g.forEach(I),this.funcColsService.sortRowGroupColumns(rT.bind(this,f,b)),this.funcColsService.sortPivotColumns(rT.bind(this,y,R)),this.columnModel.refreshCols(!1);const k=(this.columnModel.getAutoCols()||[]).slice();return C.forEach(_=>{const B=this.columnModel.getAutoCol(_.colId);Sn(k,B),this.syncColumnWithStateItem(B,_,e.defaultState,null,null,!0,t,s)}),k.forEach(I),this.orderLiveColsLikeState(e),this.visibleColsService.refresh(t),this.eventDispatcher.everythingChanged(t),p(),{unmatchedAndAutoStates:x,unmatchedCount:M}};this.columnAnimationService.start();let{unmatchedAndAutoStates:r,unmatchedCount:o}=n(e.state||[],i,a=>this.columnModel.getColDefCol(a));if(r.length>0||Ae(e.defaultState)){const a=this.pivotResultColsService.getPivotResultCols(),l=a==null?void 0:a.list;o=n(r,l||[],c=>this.pivotResultColsService.getPivotResultCol(c)).unmatchedCount}return this.columnAnimationService.finish(),o===0}resetColumnState(e){const t=this.columnModel.getColDefCols();if(hr(t))return;const i=this.columnModel.getColDefColTree(),s=S0(i),n=[];let r=1e3,o=1e3,a=[];const l=this.columnModel.getAutoCols();l&&(a=a.concat(l)),s&&(a=a.concat(s)),a.forEach(c=>{const p=this.getColumnStateFromColDef(c);Pt(p.rowGroupIndex)&&p.rowGroup&&(p.rowGroupIndex=r++),Pt(p.pivotIndex)&&p.pivot&&(p.pivotIndex=o++),n.push(p)}),this.applyColumnState({state:n,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(C,x)=>C??x??null,i=e.getColDef(),s=t(i.sort,i.initialSort),n=t(i.sortIndex,i.initialSortIndex),r=t(i.hide,i.initialHide),o=t(i.pinned,i.initialPinned),a=t(i.width,i.initialWidth),l=t(i.flex,i.initialFlex);let c=t(i.rowGroupIndex,i.initialRowGroupIndex),p=t(i.rowGroup,i.initialRowGroup);c==null&&(p==null||p==!1)&&(c=null,p=null);let g=t(i.pivotIndex,i.initialPivotIndex),f=t(i.pivot,i.initialPivot);g==null&&(f==null||f==!1)&&(g=null,f=null);const y=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:s,sortIndex:n,hide:r,pinned:o,width:a,flex:l,rowGroup:p,rowGroupIndex:c,pivot:f,pivotIndex:g,aggFunc:y}}syncColumnWithStateItem(e,t,i,s,n,r,o,a){if(!e)return;const l=(P,k)=>{const _={value1:void 0,value2:void 0};let B=!1;return t&&(t[P]!==void 0&&(_.value1=t[P],B=!0),Ae(k)&&t[k]!==void 0&&(_.value2=t[k],B=!0)),!B&&i&&(i[P]!==void 0&&(_.value1=i[P]),Ae(k)&&i[k]!==void 0&&(_.value2=i[k])),_},c=l("hide").value1;c!==void 0&&e.setVisible(!c,o);const p=l("pinned").value1;p!==void 0&&e.setPinned(p);const g=e.getColDef().minWidth??this.gos.environment.getDefaultColumnMinWidth(),f=l("flex").value1;if(f!==void 0&&e.setFlex(f),f==null){const P=l("width").value1;P!=null&&g!=null&&P>=g&&e.setActualWidth(P,o)}const y=l("sort").value1;y!==void 0&&(y==="desc"||y==="asc"?e.setSort(y,o):e.setSort(void 0,o));const C=l("sortIndex").value1;if(C!==void 0&&e.setSortIndex(C),r||!e.isPrimary())return;const x=l("aggFunc").value1;x!==void 0&&(typeof x=="string"?(e.setAggFunc(x),e.isValueActive()||(e.setValueActive(!0,o),a.addValueCol(e))):(Ae(x)&&we("stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,o),a.removeValueCol(e))));const{value1:M,value2:b}=l("rowGroup","rowGroupIndex");(M!==void 0||b!==void 0)&&(typeof b=="number"||M?(e.isRowGroupActive()||(e.setRowGroupActive(!0,o),a.addGroupCol(e)),s&&typeof b=="number"&&(s[e.getId()]=b)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,o),a.removeGroupCol(e)));const{value1:R,value2:I}=l("pivot","pivotIndex");(R!==void 0||I!==void 0)&&(typeof I=="number"||R?(e.isPivotActive()||(e.setPivotActive(!0,o),a.addPivotCol(e)),n&&typeof I=="number"&&(n[e.getId()]=I)):e.isPivotActive()&&(e.setPivotActive(!1,o),a.removePivotCol(e)))}orderLiveColsLikeState(e){if(!e.applyOrder||!e.state)return;const t=[];e.state.forEach(i=>{i.colId!=null&&t.push(i.colId)}),this.columnModel.sortColsLikeKeys(t)}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.funcColsService.getRowGroupColumns().slice(),pivotColumns:this.funcColsService.getPivotColumns().slice(),valueColumns:this.funcColsService.getValueColumns().slice()},i=this.columnGetStateService.getColumnState(),s={};return i.forEach(n=>{s[n.colId]=n}),()=>{const n=this.columnModel.getAllCols(),r=(x,M,b,R)=>{const I=M.map(R),P=b.map(R);if(Jc(I,P))return;const _=new Set(M);b.forEach(H=>{_.delete(H)||_.add(H)});const B=[..._];this.eventService.dispatchEvent({type:x,columns:B,column:B.length===1?B[0]:null,source:e})},o=x=>{const M=[];return n.forEach(b=>{const R=s[b.getColId()];R&&x(R,b)&&M.push(b)}),M},a=x=>x.getColId();r("columnRowGroupChanged",t.rowGroupColumns,this.funcColsService.getRowGroupColumns(),a),r("columnPivotChanged",t.pivotColumns,this.funcColsService.getPivotColumns(),a);const c=o((x,M)=>{const b=x.aggFunc!=null,R=b!=M.isValueActive(),I=b&&x.aggFunc!=M.getAggFunc();return R||I});c.length>0&&this.eventDispatcher.columnChanged("columnValueChanged",c,e);const p=(x,M)=>x.width!=M.getActualWidth();this.eventDispatcher.columnResized(o(p),!0,e);const g=(x,M)=>x.pinned!=M.getPinned();this.eventDispatcher.columnPinned(o(g),e);const f=(x,M)=>x.hide==M.isVisible();this.eventDispatcher.columnVisible(o(f),e);const C=o((x,M)=>x.sort!=M.getSort()||x.sortIndex!=M.getSortIndex());C.length>0&&this.sortController.dispatchSortChangedEvents(e,C),this.normaliseColumnMovedEventForColumnState(i,e)}}normaliseColumnMovedEventForColumnState(e,t){const i=this.columnGetStateService.getColumnState(),s={};i.forEach(l=>s[l.colId]=l);const n={};e.forEach(l=>{s[l.colId]&&(n[l.colId]=!0)});const r=e.filter(l=>n[l.colId]),o=i.filter(l=>n[l.colId]),a=[];o.forEach((l,c)=>{const p=r&&r[c];if(p&&p.colId!==l.colId){const g=this.columnModel.getCol(p.colId);g&&a.push(g)}}),a.length&&this.eventDispatcher.columnMoved({movedColumns:a,source:t,finished:!0})}},rT=(e,t,i,s)=>{const n=e[i.getId()],r=e[s.getId()],o=n!=null,a=r!=null;if(o&&a)return n-r;if(o)return-1;if(a)return 1;const l=t.indexOf(i),c=t.indexOf(s),p=l>=0,g=c>=0;return p&&g?l-c:p?-1:1},AW=class extends de{constructor(){super(...arguments),this.beanName="columnMoveService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher}moveColumnByIndex(e,t,i){const s=this.columnModel.getCols();if(!s)return;const n=s[e];this.moveColumns([n],t,i)}moveColumns(e,t,i,s=!0){const n=this.columnModel.getCols();if(!n)return;if(t>n.length-e.length){we("tried to insert columns in invalid location, toIndex = ",t),we("remember that you should not count the moving columns when calculating the new index");return}this.columnAnimationService.start();const r=this.columnModel.getColsForKeys(e);this.doesMovePassRules(r,t)&&(this.columnModel.moveInCols(r,t,i),this.eventDispatcher.columnMoved({movedColumns:r,source:i,toIndex:t,finished:s})),this.columnAnimationService.finish()}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){const s=this.columnModel.getCols().slice();return EF(s,e,t),s}doesMovePassLockedPositions(e){const t=r=>r?r==="left"||r===!0?-1:1:0,i=this.gos.get("enableRtl");let s=i?1:-1,n=!0;return e.forEach(r=>{const o=t(r.getColDef().lockPosition);i?o>s&&(n=!1):o<s&&(n=!1),s=o}),n}doesMovePassMarryChildren(e){let t=!0;const i=this.columnModel.getColTree();return Sl(null,i,s=>{if(!fn(s))return;const n=s,r=n.getColGroupDef();if(!(r&&r.marryChildren))return;const a=[];n.getLeafColumns().forEach(f=>{const y=e.indexOf(f);a.push(y)});const l=Math.max.apply(Math,a),c=Math.min.apply(Math,a),p=l-c,g=n.getLeafColumns().length-1;p>g&&(t=!1)}),t}placeLockedColumns(e){const t=[],i=[],s=[];return e.forEach(r=>{const o=r.getColDef().lockPosition;o==="right"?s.push(r):o==="left"||o===!0?t.push(r):i.push(r)}),this.gos.get("enableRtl")?[...s,...i,...t]:[...t,...i,...s]}},PW=/[&<>"']/g,FW={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function la(e,t){if(e==null)return null;const i=e.toString().toString();return t?i:i.replace(PW,s=>FW[s])}function kW(e){if(!e||e==null)return null;const t=/([a-z])([A-Z])/g,i=/([A-Z]+)([A-Z])([a-z])/g;return e.replace(t,"$1 $2").replace(i,"$1 $2$3").replace(/\./g," ").split(" ").map(n=>n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")).join(" ")}var NW=class extends de{constructor(){super(...arguments),this.beanName="columnNameService"}wireBeans(e){this.expressionService=e.expressionService,this.funcColsService=e.funcColsService,this.columnModel=e.columnModel}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const s=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,s):s}getDisplayNameForProvidedColumnGroup(e,t,i){const s=t?t.getColGroupDef():null;return s?this.getHeaderName(s,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,s,n){const r=e.headerValueGetter;if(r){const o=this.gos.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:s,location:n});return typeof r=="function"?r(o):typeof r=="string"?this.expressionService.evaluate(r,o):(we("headerValueGetter must be a function or a string"),"")}else{if(e.headerName!=null)return e.headerName;if(e.field)return kW(e.field)}return""}wrapHeaderNameWithAggFunc(e,t){if(this.gos.get("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn,s=Ae(i);let n=null,r;if(s){const o=this.funcColsService.getValueColumns(),a=this.gos.get("removePivotHeaderRowWhenSingleValueColumn")&&o.length===1,l=e.getColDef().pivotTotalColumnIds!==void 0;if(a&&!l)return t;n=i?i.getAggFunc():null,r=!0}else{const o=e.isValueActive(),a=this.columnModel.isPivotMode()||!this.funcColsService.isRowGroupEmpty();o&&a?(n=e.getAggFunc(),r=!0):r=!1}if(r){const o=typeof n=="string"?n:"func";return`${this.localeService.getLocaleTextFunc()(o,o)}(${t})`}return t}},OW=class extends de{constructor(){super(...arguments),this.beanName="pivotResultColsService"}wireBeans(e){this.context=e.context,this.columnModel=e.columnModel,this.columnFactory=e.columnFactory,this.visibleColsService=e.visibleColsService}destroy(){var e;Tc(this.context,(e=this.pivotResultCols)==null?void 0:e.tree),super.destroy()}isPivotResultColsPresent(){return this.pivotResultCols!=null}lookupPivotResultCol(e,t){if(this.pivotResultCols==null)return null;const i=this.columnModel.getColDefCol(t);let s=null;return this.pivotResultCols.list.forEach(n=>{const r=n.getColDef().pivotKeys,o=n.getColDef().pivotValueColumn;Jc(r,e)&&o===i&&(s=n)}),s}getPivotResultCols(){return this.pivotResultCols}getPivotResultCol(e){return this.pivotResultCols?this.columnModel.getColFromCollection(e,this.pivotResultCols):null}setPivotResultCols(e,t){var i,s;if(this.columnModel.isReady()&&!(e==null&&this.pivotResultCols==null)){if(e){this.processPivotResultColDef(e);const n=this.columnFactory.createColumnTree(e,!1,((i=this.pivotResultCols)==null?void 0:i.tree)||this.previousPivotResultCols||void 0,t);Tc(this.context,(s=this.pivotResultCols)==null?void 0:s.tree,n.columnTree);const r=n.columnTree,o=n.treeDept,a=S0(r),l={};this.pivotResultCols={tree:r,treeDepth:o,list:a,map:l},this.pivotResultCols.list.forEach(p=>this.pivotResultCols.map[p.getId()]=p);const c=!!this.previousPivotResultCols;this.previousPivotResultCols=null,this.columnModel.refreshCols(!c)}else this.previousPivotResultCols=this.pivotResultCols?this.pivotResultCols.tree:null,this.pivotResultCols=null,this.columnModel.refreshCols(!1);this.visibleColsService.refresh(t)}}processPivotResultColDef(e){const t=this.gos.get("processPivotResultColDef"),i=this.gos.get("processPivotResultColGroupDef");if(!t&&!i)return;const s=n=>{n.forEach(r=>{if(Ae(r.children)){const a=r;i&&i(a),s(a.children)}else t&&t(r)})};e&&s(e)}},_W=class extends de{constructor(){super(...arguments),this.beanName="columnSizeService"}wireBeans(e){this.columnModel=e.columnModel,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}setColumnWidths(e,t,i,s){const n=[];e.forEach(r=>{const o=this.columnModel.getColDefCol(r.key)||this.columnModel.getCol(r.key);if(!o)return;if(n.push({width:r.newWidth,ratios:[1],columns:[o]}),this.gos.get("colResizeDefault")==="shift"&&(t=!t),t){const l=this.visibleColsService.getColAfter(o);if(!l)return;const c=o.getActualWidth()-r.newWidth,p=l.getActualWidth()+c;n.push({width:p,ratios:[1],columns:[l]})}}),n.length!==0&&this.resizeColumnSets({resizeSets:n,finished:i,source:s})}resizeColumnSets(e){const{resizeSets:t,finished:i,source:s}=e;if(!(!t||t.every(p=>this.checkMinAndMaxWidthsForSet(p)))){if(i){const p=t&&t.length>0?t[0].columns:null;this.eventDispatcher.columnResized(p,i,s)}return}const r=[],o=[];t.forEach(p=>{const{width:g,columns:f,ratios:y}=p,C={},x={};f.forEach(R=>o.push(R));let M=!0,b=0;for(;M;){if(b++,b>1e3){Ut("infinite loop in resizeColumnSets");break}M=!1;const R=[];let I=0,P=g;f.forEach((_,B)=>{if(x[_.getId()])P-=C[_.getId()];else{R.push(_);const V=y[B];I+=V}});const k=1/I;R.forEach((_,B)=>{const H=B===R.length-1;let V;H?V=P:(V=Math.round(y[B]*g*k),P-=V);const U=_.getMinWidth(),$=_.getMaxWidth();V<U?(V=U,x[_.getId()]=!0,M=!0):$>0&&V>$&&(V=$,x[_.getId()]=!0,M=!0),C[_.getId()]=V})}f.forEach(R=>{const I=C[R.getId()];R.getActualWidth()!==I&&(R.setActualWidth(I,s),r.push(R))})});const a=r.length>0;let l=[];a&&(l=this.refreshFlexedColumns({resizingCols:o,skipSetLeft:!0}),this.visibleColsService.setLeftValues(s),this.visibleColsService.updateBodyWidths(),this.columnViewportService.checkViewportColumns());const c=o.concat(l);(a||i)&&this.eventDispatcher.columnResized(c,i,s,l)}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let s=0,n=0,r=!0;t.forEach(l=>{const c=l.getMinWidth();s+=c||0;const p=l.getMaxWidth();p>0?n+=p:r=!1});const o=i>=s,a=!r||i<=n;return o&&a}refreshFlexedColumns(e={}){const t=e.source?e.source:"flex";if(e.viewportWidth!=null&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];const i=this.visibleColsService.getCenterCols();let s=-1;if(e.resizingCols){const f=new Set(e.resizingCols);for(let y=i.length-1;y>=0;y--)if(f.has(i[y])){s=y;break}}let n=0,r=[],o=0,a=0;for(let f=0;f<i.length;f++)i[f].getFlex()&&f>s?(r.push(i[f]),a+=i[f].getFlex(),o+=i[f].getMinWidth()):n+=i[f].getActualWidth();if(!r.length)return[];let l=[];n+o>this.flexViewportWidth&&(r.forEach(f=>f.setActualWidth(f.getMinWidth(),t)),l=r,r=[]);const c=[];let p;e:for(;;){p=this.flexViewportWidth-n;const f=p/a;for(let y=0;y<r.length;y++){const C=r[y],x=f*C.getFlex();let M=0;const b=C.getMinWidth(),R=C.getMaxWidth();if(x<b?M=b:x>R&&(M=R),M){C.setActualWidth(M,t),DF(r,C),a-=C.getFlex(),l.push(C),n+=C.getActualWidth();continue e}c[y]=Math.floor(x)}break}let g=p;return r.forEach((f,y)=>{const C=y<r.length-1?Math.min(c[y],g):Math.max(c[y],g);f.setActualWidth(C,t),l.push(f),g-=c[y]}),e.skipSetLeft||this.visibleColsService.setLeftValues(t),e.updateBodyWidths&&this.visibleColsService.updateBodyWidths(),e.fireResizedEvent&&this.eventDispatcher.columnResized(l,!0,t,r),r}sizeColumnsToFit(e,t="sizeColumnsToFit",i,s){var f;if(this.columnModel.isShouldQueueResizeOperations()){this.columnModel.pushResizeOperation(()=>this.sizeColumnsToFit(e,t,i,s));return}const n={};s&&((f=s==null?void 0:s.columnLimits)==null||f.forEach(({key:y,...C})=>{n[typeof y=="string"?y:y.getColId()]=C}));const r=this.visibleColsService.getAllCols(),o=e===nl(r);if(e<=0||!r.length||o)return;const a=[],l=[];r.forEach(y=>{y.getColDef().suppressSizeToFit===!0?l.push(y):a.push(y)});const c=a.slice(0);let p=!1;const g=y=>{Sn(a,y),l.push(y)};for(a.forEach(y=>{y.resetActualWidth(t);const C=n==null?void 0:n[y.getId()],x=(C==null?void 0:C.minWidth)??(s==null?void 0:s.defaultMinWidth),M=(C==null?void 0:C.maxWidth)??(s==null?void 0:s.defaultMaxWidth),b=y.getActualWidth();typeof x=="number"&&b<x?y.setActualWidth(x,t,!0):typeof M=="number"&&b>M&&y.setActualWidth(M,t,!0)});!p;){p=!0;const y=e-nl(l);if(y<=0)a.forEach(C=>{var M;const x=((M=n==null?void 0:n[C.getId()])==null?void 0:M.minWidth)??(s==null?void 0:s.defaultMinWidth);if(typeof x=="number"){C.setActualWidth(x,t,!0);return}C.setMinimum(t)});else{const C=y/nl(a);let x=y;for(let M=a.length-1;M>=0;M--){const b=a[M],R=n==null?void 0:n[b.getId()],I=(R==null?void 0:R.minWidth)??(s==null?void 0:s.defaultMinWidth),P=(R==null?void 0:R.maxWidth)??(s==null?void 0:s.defaultMaxWidth),k=b.getMinWidth(),_=b.getMaxWidth(),B=typeof I=="number"&&I>k?I:k,H=typeof P=="number"&&P<_?P:_;let V=Math.round(b.getActualWidth()*C);V<B?(V=B,g(b),p=!1):V>H?(V=H,g(b),p=!1):M===0&&(V=x),b.setActualWidth(V,t,!0),x-=V}}}c.forEach(y=>{y.fireColumnWidthChangedEvent(t)}),this.visibleColsService.setLeftValues(t),this.visibleColsService.updateBodyWidths(),!i&&this.eventDispatcher.columnResized(c,!0,t)}applyAutosizeStrategy(){const e=this.gos.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if(t==="fitGridWidth"){const{columnLimits:i,defaultMinWidth:s,defaultMaxWidth:n}=e,r=i==null?void 0:i.map(({colId:o,minWidth:a,maxWidth:l})=>({key:o,minWidth:a,maxWidth:l}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:s,defaultMaxWidth:n,columnLimits:r})}else t==="fitProvidedWidth"&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}};function FF(e,t){return e+"_"+t}function qi(e){return e instanceof kF}var kF=class extends de{constructor(e,t,i,s){super(),this.isColumn=!1,this.displayedChildren=[],this.autoHeaderHeight=null,this.parent=null,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=s}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return FF(this.groupId,this.partId)}isEmptyGroup(){return this.displayedChildren.length===0}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!e||e.length===0?!1:e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{qi(e)&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gos.get("enableRtl")){const t=At(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.dispatchLocalEvent({type:"leftChanged"}))}getPinned(){return this.pinned}getGroupId(){return this.groupId}getPartId(){return this.partId}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}isAutoHeaderHeight(){var e;return!!((e=this.getColGroupDef())!=null&&e.autoHeaderHeight)}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{Zc(t)?e.push(t):qi(t)&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{Zc(t)?e.push(t):qi(t)&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return!this.isPadding()||!e||!e.isPadding()?0:1+e.getPaddingLevel()}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;e!=null&&e.isPadding();)e=e.getParent();if(!(e?e.getProvidedColumnGroup().isExpandable():!1)){this.displayedChildren=this.children,this.dispatchLocalEvent({type:"displayedChildrenChanged"});return}this.children.forEach(i=>{if(qi(i)&&(!i.displayedChildren||!i.displayedChildren.length))return;switch(i.getColumnGroupShow()){case"open":e.getProvidedColumnGroup().isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.getProvidedColumnGroup().isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i);break}}),this.dispatchLocalEvent({type:"displayedChildrenChanged"})}},NF=class{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return typeof t!="number"?i=0:i=t+1,this.existingIds[e]=i,i}},BW=class extends de{constructor(){super(...arguments),this.beanName="visibleColsService",this.colsAndGroupsMap={},this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.columnViewportService=e.columnViewportService,this.eventDispatcher=e.columnEventDispatcher}refresh(e,t=!1){t||this.buildTrees(),this.updateOpenClosedVisibilityInColumnGroups(),this.columnsLeft=Wx(this.treeLeft),this.columnsCenter=Wx(this.treeCenter),this.columnsRight=Wx(this.treeRight),this.joinColsAriaOrder(),this.joinCols(),this.setLeftValues(e),this.autoHeightCols=this.columns.filter(i=>i.isAutoHeight()),this.columnSizeService.refreshFlexedColumns(),this.updateBodyWidths(),this.columnViewportService.checkViewportColumns(!1),this.setFirstRightAndLastLeftPinned(e),this.eventDispatcher.visibleCols(e)}updateBodyWidths(){const e=nl(this.columnsCenter),t=nl(this.columnsLeft),i=nl(this.columnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventService.dispatchEvent({type:"columnContainerWidthChanged"}),this.eventService.dispatchEvent({type:"displayedColumnsWidthChanged"}))}setLeftValues(e){this.setLeftValuesOfCols(e),this.setLeftValuesOfGroups()}setFirstRightAndLastLeftPinned(e){let t,i;this.gos.get("enableRtl")?(t=this.columnsLeft?this.columnsLeft[0]:null,i=this.columnsRight?At(this.columnsRight):null):(t=this.columnsLeft?At(this.columnsLeft):null,i=this.columnsRight?this.columnsRight[0]:null),this.columnModel.getCols().forEach(s=>{s.setLastLeftPinned(s===t,e),s.setFirstRightPinned(s===i,e)})}buildTrees(){const e=this.columnModel.getColsToShow(),t=e.filter(r=>r.getPinned()=="left"),i=e.filter(r=>r.getPinned()=="right"),s=e.filter(r=>r.getPinned()!="left"&&r.getPinned()!="right"),n=new NF;this.treeLeft=this.createGroups({columns:t,idCreator:n,pinned:"left",oldDisplayedGroups:this.treeLeft}),this.treeRight=this.createGroups({columns:i,idCreator:n,pinned:"right",oldDisplayedGroups:this.treeRight}),this.treeCenter=this.createGroups({columns:s,idCreator:n,pinned:null,oldDisplayedGroups:this.treeCenter}),this.updateColsAndGroupsMap()}clear(){this.columnsLeft=[],this.columnsRight=[],this.columnsCenter=[],this.columns=[],this.ariaOrderColumns=[]}joinColsAriaOrder(){const e=this.columnModel.getCols(),t=[],i=[],s=[];for(const n of e){const r=n.getPinned();r?r===!0||r==="left"?t.push(n):s.push(n):i.push(n)}this.ariaOrderColumns=t.concat(i).concat(s)}getAriaColIndex(e){let t;return qi(e)?t=e.getLeafColumns()[0]:t=e,this.ariaOrderColumns.indexOf(t)+1}getAllAutoHeightCols(){return this.autoHeightCols}setLeftValuesOfGroups(){[this.treeLeft,this.treeRight,this.treeCenter].forEach(e=>{e.forEach(t=>{qi(t)&&t.checkLeft()})})}setLeftValuesOfCols(e){if(!this.columnModel.getColDefCols())return;const i=this.columnModel.getCols().slice(0),s=this.gos.get("enableRtl");[this.columnsLeft,this.columnsRight,this.columnsCenter].forEach(n=>{if(s){let r=nl(n);n.forEach(o=>{r-=o.getActualWidth(),o.setLeft(r,e)})}else{let r=0;n.forEach(o=>{o.setLeft(r,e),r+=o.getActualWidth()})}pW(i,n)}),i.forEach(n=>{n.setLeft(null,e)})}joinCols(){this.gos.get("enableRtl")?this.columns=this.columnsRight.concat(this.columnsCenter).concat(this.columnsLeft):this.columns=this.columnsLeft.concat(this.columnsCenter).concat(this.columnsRight)}getColsCenter(){return this.columnsCenter}getAllTrees(){return this.treeLeft&&this.treeRight&&this.treeCenter?this.treeLeft.concat(this.treeCenter).concat(this.treeRight):null}getTreeLeft(){return this.treeLeft}getTreeRight(){return this.treeRight}getTreeCenter(){return this.treeCenter}getAllCols(){return this.columns}isColDisplayed(e){return this.getAllCols().indexOf(e)>=0}getLeftColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsLeft):this.columnsLeft}getRightColsForRow(e){return this.columnModel.isColSpanActive()?this.getColsForRow(e,this.columnsRight):this.columnsRight}getColsForRow(e,t,i,s){const n=[];let r=null;for(let o=0;o<t.length;o++){const a=t[o],l=t.length-o,c=Math.min(a.getColSpan(e),l),p=[a];if(c>1){const f=c-1;for(let y=1;y<=f;y++)p.push(t[o+y]);o+=f}let g;i?(g=!1,p.forEach(f=>{i(f)&&(g=!0)})):g=!0,g&&(n.length===0&&r&&(s&&s(a))&&n.push(r),n.push(a)),r=a}return n}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}getCenterCols(){return this.columnsCenter}getLeftCols(){return this.columnsLeft}getRightCols(){return this.columnsRight}getColBefore(e){const t=this.getAllCols(),i=t.indexOf(e);return i>0?t[i-1]:null}getGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),s=e.getDisplayedLeafColumns(),n=t==="After"?At(s):s[0],r=`getCol${t}`;for(;;){const o=this[r](n);if(!o)return null;const a=this.getColGroupAtLevel(o,i);if(a!==e)return a}}getColGroupAtLevel(e,t){let i=e.getParent(),s,n;for(;s=i.getProvidedColumnGroup().getLevel(),n=i.getPaddingLevel(),!(s+n<=t);)i=i.getParent();return i}isPinningLeft(){return this.columnsLeft.length>0}isPinningRight(){return this.columnsRight.length>0}updateColsAndGroupsMap(){this.colsAndGroupsMap={};const e=t=>{this.colsAndGroupsMap[t.getUniqueId()]=t};th(this.treeCenter,!1,e),th(this.treeLeft,!1,e),th(this.treeRight,!1,e)}isVisible(e){return this.colsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllTrees();th(e,!1,t=>{qi(t)&&t.calculateDisplayedColumns()})}getFirstColumn(){const e=this.gos.get("enableRtl"),t=["getLeftCols","getCenterCols","getRightCols"];e&&t.reverse();for(let i=0;i<t.length;i++){const s=this[t[i]]();if(s.length)return e?At(s):s[0]}return null}getColumnGroup(e,t){if(!e)return null;if(qi(e))return e;const i=this.getAllTrees(),s=typeof t=="number";let n=null;return th(i,!1,r=>{if(qi(r)){const o=r;let a;s?a=e===o.getGroupId()&&t===o.getPartId():a=e===o.getGroupId(),a&&(n=o)}}),n}getColAfter(e){const t=this.getAllCols(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}isBodyWidthDirty(){return this.bodyWidthDirty}setBodyWidthDirty(){this.bodyWidthDirty=!0}getColsLeftWidth(){return nl(this.columnsLeft)}getDisplayedColumnsRightWidth(){return nl(this.columnsRight)}isColAtEdge(e,t){const i=this.getAllCols();if(!i.length)return!1;const s=t==="first";let n;if(qi(e)){const r=e.getDisplayedLeafColumns();if(!r.length)return!1;n=s?r[0]:At(r)}else n=e;return(s?i[0]:At(i))===n}createGroups(e){const{columns:t,idCreator:i,pinned:s,oldDisplayedGroups:n,isStandaloneStructure:r}=e,o=this.mapOldGroupsById(n),a=[];let l=t;for(;l.length;){const c=l;l=[];let p=0;const g=f=>{const y=p;p=f;const C=c[y],M=(qi(C)?C.getProvidedColumnGroup():C).getOriginalParent();if(M==null){for(let R=y;R<f;R++)a.push(c[R]);return}const b=this.createColGroup(M,i,o,s,r);for(let R=y;R<f;R++)b.addChild(c[R]);l.push(b)};for(let f=1;f<c.length;f++){const y=c[f],x=(qi(y)?y.getProvidedColumnGroup():y).getOriginalParent(),M=c[p],R=(qi(M)?M.getProvidedColumnGroup():M).getOriginalParent();x!==R&&g(f)}p<c.length&&g(c.length)}return r||this.setupParentsIntoCols(a,null),a}createColGroup(e,t,i,s,n){const r=e.getGroupId(),o=t.getInstanceIdForKey(r),a=FF(r,o);let l=i[a];return l&&l.getProvidedColumnGroup()!==e&&(l=null),Ae(l)?l.reset():(l=new kF(e,r,o,s),n||this.createBean(l)),l}mapOldGroupsById(e){const t={},i=s=>{s.forEach(n=>{if(qi(n)){const r=n;t[n.getUniqueId()]=r,i(r.getChildren())}})};return e&&i(e),t}setupParentsIntoCols(e,t){e.forEach(i=>{if(i.setParent(t),qi(i)){const s=i;this.setupParentsIntoCols(s.getChildren(),s)}})}};function th(e,t,i){if(e)for(let s=0;s<e.length;s++){const n=e[s];if(qi(n)){const r=t?n.getDisplayedChildren():n.getChildren();th(r,t,i)}i(n)}}function Wx(e){const t=[];return th(e,!0,i=>{Zc(i)&&t.push(i)}),t}var OF=["columnEverythingChanged","newColumnsLoaded","columnPivotModeChanged","pivotMaxColumnsExceeded","columnRowGroupChanged","expandOrCollapseAll","columnPivotChanged","gridColumnsChanged","columnValueChanged","columnMoved","columnVisible","columnPinned","columnGroupOpened","columnResized","displayedColumnsChanged","virtualColumnsChanged","columnHeaderMouseOver","columnHeaderMouseLeave","columnHeaderClicked","columnHeaderContextMenu","asyncTransactionsFlushed","rowGroupOpened","rowDataUpdated","pinnedRowDataChanged","rangeSelectionChanged","cellSelectionChanged","chartCreated","chartRangeSelectionChanged","chartOptionsChanged","chartDestroyed","toolPanelVisibleChanged","toolPanelSizeChanged","modelUpdated","cutStart","cutEnd","pasteStart","pasteEnd","fillStart","fillEnd","cellSelectionDeleteStart","cellSelectionDeleteEnd","rangeDeleteStart","rangeDeleteEnd","undoStarted","undoEnded","redoStarted","redoEnded","cellClicked","cellDoubleClicked","cellMouseDown","cellContextMenu","cellValueChanged","cellEditRequest","rowValueChanged","headerFocused","cellFocused","rowSelected","selectionChanged","tooltipShow","tooltipHide","cellKeyDown","cellMouseOver","cellMouseOut","filterChanged","filterModified","filterOpened","advancedFilterBuilderVisibleChanged","sortChanged","virtualRowRemoved","rowClicked","rowDoubleClicked","gridReady","gridPreDestroyed","gridSizeChanged","viewportChanged","firstDataRendered","dragStarted","dragStopped","dragCancelled","rowEditingStarted","rowEditingStopped","cellEditingStarted","cellEditingStopped","bodyScroll","bodyScrollEnd","paginationChanged","componentStateChanged","storeRefreshed","stateUpdated","columnMenuVisibleChanged","contextMenuVisibleChanged","rowDragEnter","rowDragMove","rowDragLeave","rowDragEnd","rowDragCancel"],GW=["scrollbarWidthChanged","keyShortcutChangedCellStart","keyShortcutChangedCellEnd","pinnedHeightChanged","cellFocusCleared","fullWidthRowFocused","checkboxChanged","heightScaleChanged","suppressMovableColumns","suppressMenuHide","suppressFieldDotNotation","columnPanelItemDragStart","columnPanelItemDragEnd","bodyHeightChanged","columnContainerWidthChanged","displayedColumnsWidthChanged","scrollVisibilityChanged","scrollGapChanged","columnHoverChanged","flashCells","paginationPixelOffsetChanged","displayedRowsChanged","leftPinnedWidthChanged","rightPinnedWidthChanged","rowContainerHeightChanged","headerHeightChanged","columnGroupHeaderHeightChanged","columnHeaderHeightChanged","gridStylesChanged","storeUpdated","filterDestroyed","rowDataUpdateStarted","rowCountReady","advancedFilterEnabledChanged","dataTypesInferred","fieldValueChanged","fieldPickerValueSelected","richSelectListRowSelected","sideBarUpdated","alignedGridScroll","alignedGridColumn","gridOptionsChanged","chartTitleEdit","recalculateRowBounds","stickyTopOffsetChanged","overlayExclusiveChanged"],zW=[...OF,...GW],HW={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipShowMode:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,dragAndDropImageComponent:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0,suppressSetFilterByDefault:!0},Hs=class{};Hs.STRING_PROPERTIES=["overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu","tooltipShowMode","grandTotalRow"];Hs.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","dragAndDropImageComponentParams","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","theme","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy","cellSelection","selectionColumnDef"];Hs.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"];Hs.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex","pivotMaxGeneratedColumns"];Hs.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressColumnMoveAnimation","suppressMoveWhenColumnDragging","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressFocusAfterRefresh","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents","applyQuickFilterBeforePivotOrAgg","suppressServerSideFullWidthLoadingRow","suppressAdvancedFilterEval","loading","maintainColumnOrder","enableStrictPivotColumnOrder","suppressSetFilterByDefault"];Hs.OTHER_PROPERTIES=["suppressStickyTotalRow","loadThemeGoogleFonts","rowSelection"];Hs.FUNCTION_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","dragAndDropImageComponent","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher","getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","focusGridInnerElement","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering","chartMenuItems","groupTotalRow"];Hs.ALL_PROPERTIES=[...Hs.ARRAY_PROPERTIES,...Hs.OBJECT_PROPERTIES,...Hs.STRING_PROPERTIES,...Hs.NUMBER_PROPERTIES,...Hs.FUNCTION_PROPERTIES,...Hs.BOOLEAN_PROPERTIES,...Hs.OTHER_PROPERTIES];var xf=Hs,jr=class{static getCallbackForEvent(t){return!t||t.length<2?t:"on"+t[0].toUpperCase()+t.substring(1)}};jr.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY";jr.PUBLIC_EVENTS=OF;jr.EVENT_CALLBACKS=zW.map(e=>jr.getCallbackForEvent(e));jr.BOOLEAN_PROPERTIES=xf.BOOLEAN_PROPERTIES;jr.ALL_PROPERTIES=xf.ALL_PROPERTIES;jr.ALL_PROPERTIES_AND_CALLBACKS=[...jr.ALL_PROPERTIES,...jr.EVENT_CALLBACKS];jr.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(jr.ALL_PROPERTIES_AND_CALLBACKS);var bf=jr;function VW(e,t){typeof e!="object"&&(e={});const i={...e};return bf.ALL_PROPERTIES_AND_CALLBACKS.forEach(n=>{const r=t[n];typeof r<"u"&&r!==bf.VUE_OMITTED_PROPERTY&&(i[n]=r)}),i}function WW(e,t){if(!e)return;const i={};let s=!1;if(Object.keys(e).filter(o=>bf.ALL_PROPERTIES_AND_CALLBACKS_SET.has(o)).forEach(o=>{i[o]=e[o],s=!0}),!s)return;const n={type:"gridOptionsChanged",options:i};t.dispatchEvent(n);const r={type:"componentStateChanged"};bo(i,(o,a)=>{r[o]=a}),t.dispatchEvent(r)}var yp=class extends de{};function nm(e,t,i){return i&&e.addDestroyFunc(()=>t.destroyBean(i)),i??e}var rm=class{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.addCssClass(s));return}if(this.cssClassStates[e]!==!0&&e.length){const s=this.getGui();s&&s.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1){t.forEach(s=>this.removeCssClass(s));return}if(this.cssClassStates[e]!==!1&&e.length){const s=this.getGui();s&&s.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return t?t.classList.contains(e):!1}addOrRemoveCssClass(e,t){if(!e)return;if(e.indexOf(" ")>=0){const s=(e||"").split(" ");if(s.length>1){s.forEach(n=>this.addOrRemoveCssClass(n,t));return}}if(this.cssClassStates[e]!==t&&e.length){const s=this.getGui();s&&s.classList.toggle(e,t),this.cssClassStates[e]=t}}};function Ml(e,t,i){i==null||typeof i=="string"&&i==""?_F(e,t):Ca(e,t,i)}function Ca(e,t,i){e.setAttribute(BF(t),i.toString())}function _F(e,t){e.removeAttribute(BF(t))}function BF(e){return`aria-${e}`}function Fo(e,t){t?e.setAttribute("role",t):e.removeAttribute("role")}function jW(e){let t;return e==="asc"?t="ascending":e==="desc"?t="descending":e==="mixed"?t="other":t="none",t}function UW(e){return e.getAttribute("aria-label")}function cp(e,t){Ml(e,"label",t)}function Mf(e,t){Ml(e,"labelledby",t)}function GF(e,t){Ml(e,"live",t)}function KW(e,t){Ml(e,"atomic",t)}function YW(e,t){Ml(e,"relevant",t)}function $W(e,t){Ml(e,"disabled",t)}function zF(e,t){Ml(e,"hidden",t)}function Wy(e,t){Ca(e,"expanded",t)}function ZW(e,t){Ca(e,"setsize",t)}function XW(e,t){Ca(e,"posinset",t)}function QW(e,t){Ca(e,"rowcount",t)}function qW(e,t){Ca(e,"rowindex",t)}function JW(e,t){Ca(e,"colcount",t)}function HF(e,t){Ca(e,"colindex",t)}function ej(e,t){Ca(e,"colspan",t)}function tj(e,t){Ca(e,"sort",t)}function ij(e){_F(e,"sort")}function jy(e,t){Ml(e,"selected",t)}function sj(e,t){Ml(e,"controls",t.id),Mf(t,e.id)}function M0(e,t){return t===void 0?e("ariaIndeterminate","indeterminate"):t===!0?e("ariaChecked","checked"):e("ariaUnchecked","unchecked")}var jx,Hv,Ux,Kx,Yx,$x,Zb,Xb,Zx;function ua(){return jx===void 0&&(jx=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),jx}function VF(){if(Hv===void 0)if(ua()){const e=navigator.userAgent.match(/version\/(\d+)/i);e&&(Hv=e[1]!=null?parseFloat(e[1]):0)}else Hv=0;return Hv}function R0(){if(Ux===void 0){const e=window;Ux=!!e.chrome&&(!!e.chrome.webstore||!!e.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return Ux}function D0(){return Kx===void 0&&(Kx=/(firefox)/i.test(navigator.userAgent)),Kx}function WF(){return Yx===void 0&&(Yx=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),Yx}function eu(){return $x===void 0&&($x=/iPad|iPhone|iPod/.test(navigator.platform)||navigator.platform==="MacIntel"&&navigator.maxTouchPoints>1),$x}function oT(){return!ua()||VF()>=15}function Qb(e){if(!e)return null;const t=e.tabIndex,i=e.getAttribute("tabIndex");return t===-1&&(i===null||i===""&&!D0())?null:t.toString()}function nj(){if(Zx!==void 0)return Zx;if(!document.body)return-1;let e=1e6;const t=D0()?6e6:1e9,i=document.createElement("div");for(document.body.appendChild(i);;){const s=e*2;if(i.style.height=s+"px",s>t||i.clientHeight!==s)break;e=s}return document.body.removeChild(i),Zx=e,e}function rj(){var e,t;return((e=document.body)==null?void 0:e.clientWidth)??(window.innerHeight||((t=document.documentElement)==null?void 0:t.clientWidth)||-1)}function oj(){var e,t;return((e=document.body)==null?void 0:e.clientHeight)??(window.innerHeight||((t=document.documentElement)==null?void 0:t.clientHeight)||-1)}function aj(){return Xb==null&&jF(),Xb}function jF(){const e=document.body,t=document.createElement("div");t.style.width=t.style.height="100px",t.style.opacity="0",t.style.overflow="scroll",t.style.msOverflowStyle="scrollbar",t.style.position="absolute",e.appendChild(t);let i=t.offsetWidth-t.clientWidth;i===0&&t.clientWidth===0&&(i=null),t.parentNode&&t.parentNode.removeChild(t),i!=null&&(Xb=i,Zb=i===0)}function UF(){return Zb==null&&jF(),Zb}var Vv,lj="[tabindex], input, select, button, textarea, [href]",KF="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function E0(e){const t=Element.prototype.matches||Element.prototype.msMatchesSelector,s=t.call(e,"input, select, button, textarea"),n=t.call(e,KF),r=ha(e);return s&&!n&&r}function Ni(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-hidden",!t),s||zF(e,!t)}function cj(e,t,i={}){const{skipAriaHidden:s}=i;e.classList.toggle("ag-invisible",!t),s||zF(e,!t)}function Rf(e,t){const i="disabled",s=t?n=>n.setAttribute(i,""):n=>n.removeAttribute(i);s(e),XF(e.querySelectorAll("input"),n=>s(n))}function qd(e,t,i){let s=0;for(;e;){if(e.classList.contains(t))return!0;if(e=e.parentElement,typeof i=="number"){if(++s>i)break}else if(e===i)break}return!1}function Eh(e){const{height:t,width:i,borderTopWidth:s,borderRightWidth:n,borderBottomWidth:r,borderLeftWidth:o,paddingTop:a,paddingRight:l,paddingBottom:c,paddingLeft:p,marginTop:g,marginRight:f,marginBottom:y,marginLeft:C,boxSizing:x}=window.getComputedStyle(e);return{height:parseFloat(t||"0"),width:parseFloat(i||"0"),borderTopWidth:parseFloat(s||"0"),borderRightWidth:parseFloat(n||"0"),borderBottomWidth:parseFloat(r||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(l||"0"),paddingBottom:parseFloat(c||"0"),paddingLeft:parseFloat(p||"0"),marginTop:parseFloat(g||"0"),marginRight:parseFloat(f||"0"),marginBottom:parseFloat(y||"0"),marginLeft:parseFloat(C||"0"),boxSizing:x}}function I0(e){const t=Eh(e);return t.boxSizing==="border-box"?t.height-t.paddingTop-t.paddingBottom:t.height}function om(e){const t=Eh(e);return t.boxSizing==="border-box"?t.width-t.paddingLeft-t.paddingRight:t.width}function YF(e){const{height:t,marginBottom:i,marginTop:s}=Eh(e);return Math.floor(t+i+s)}function Uy(e){const{width:t,marginLeft:i,marginRight:s}=Eh(e);return Math.floor(t+i+s)}function $F(e){const t=e.getBoundingClientRect(),{borderTopWidth:i,borderLeftWidth:s,borderRightWidth:n,borderBottomWidth:r}=Eh(e);return{top:t.top+(i||0),left:t.left+(s||0),right:t.right+(n||0),bottom:t.bottom+(r||0)}}function Ky(){if(typeof Vv=="boolean")return Vv;const e=document.createElement("div");return e.style.direction="rtl",e.style.width="1px",e.style.height="1px",e.style.position="fixed",e.style.top="0px",e.style.overflow="hidden",e.dir="rtl",e.innerHTML=`<div style="width: 2px">
            <span style="display: inline-block; width: 1px"></span>
            <span style="display: inline-block; width: 1px"></span>
        </div>`,document.body.appendChild(e),e.scrollLeft=1,Vv=Math.floor(e.scrollLeft)===0,document.body.removeChild(e),Vv}function Yy(e,t){let i=e.scrollLeft;return t&&(i=Math.abs(i),R0()&&!Ky()&&(i=e.scrollWidth-e.getBoundingClientRect().width-i)),i}function $y(e,t,i){i&&(Ky()?t*=-1:(ua()||R0())&&(t=e.scrollWidth-e.getBoundingClientRect().width-t)),e.scrollLeft=t}function pr(e){for(;e&&e.firstChild;)e.removeChild(e.firstChild)}function Ch(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ZF(e){return!!e.offsetParent}function ha(e){const t=e;return t.checkVisibility?t.checkVisibility({checkVisibilityCSS:!0}):!(!ZF(e)||window.getComputedStyle(e).visibility!=="visible")}function Df(e){const t=document.createElement("div");return t.innerHTML=(e||"").trim(),t.firstChild}function uj(e){return e.clientWidth<e.scrollWidth}function hj(e){return e.clientHeight<e.scrollHeight}function Zy(e,t){t==="flex"?(e.style.removeProperty("width"),e.style.removeProperty("minWidth"),e.style.removeProperty("maxWidth"),e.style.flex="1 1 auto"):To(e,t)}function To(e,t){t=L0(t),e.style.width=t.toString(),e.style.maxWidth=t.toString(),e.style.minWidth=t.toString()}function Jg(e,t){t=L0(t),e.style.height=t.toString(),e.style.maxHeight=t.toString(),e.style.minHeight=t.toString()}function L0(e){return typeof e=="number"?`${e}px`:e}function T0(e){return e instanceof Node||e instanceof HTMLElement}function dj(e){if(e==null)return[];const t=[];return XF(e,i=>t.push(i)),t}function pj(e,t){if(e)for(let i=0;i<e.length;i++){const s=e[i];t(s.name,s.value)}}function Ur(e,t,i){i==null||i===""?e.removeAttribute(t):e.setAttribute(t,i.toString())}function XF(e,t){if(e!=null)for(let i=0;i<e.length;i++)t(e[i])}var up=class{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}},gj=1e3,fj=1e3,aT=100,QF=class $u extends de{constructor(t,i,s,n){super(),this.parentComp=t,this.tooltipShowDelayOverride=i,this.tooltipHideDelayOverride=s,this.shouldDisplayTooltip=n,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=0,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}wireBeans(t){this.popupService=t.popupService,this.userComponentFactory=t.userComponentFactory}postConstruct(){this.gos.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gos.get("tooltipMouseTrack");const t=this.parentComp.getGui();this.tooltipTrigger===0&&this.addManagedListeners(t,{mouseenter:this.onMouseEnter.bind(this),mouseleave:this.onMouseLeave.bind(this)}),this.tooltipTrigger===1&&this.addManagedListeners(t,{focusin:this.onFocusIn.bind(this),focusout:this.onFocusOut.bind(this)}),this.addManagedListeners(t,{mousemove:this.onMouseMove.bind(this)}),this.interactionEnabled||this.addManagedListeners(t,{mousedown:this.onMouseDown.bind(this),keydown:this.onKeyDown.bind(this)})}getGridOptionsTooltipDelay(t){const i=this.gos.get(t);return i<0&&we(`${t} should not be lower than 0`),Math.max(200,i)}getTooltipDelay(t){return t==="show"?this.tooltipShowDelayOverride??this.getGridOptionsTooltipDelay("tooltipShowDelay"):this.tooltipHideDelayOverride??this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const t=this.gos.get("tooltipTrigger");return!t||t==="hover"?0:1}onMouseEnter(t){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!eu()&&($u.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(t)},aT):this.prepareToShowTooltip(t))}onMouseMove(t){this.lastMouseEvent&&(this.lastMouseEvent=t),this.tooltipMouseTrack&&this.state===2&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(t){var r;const i=t.relatedTarget,s=this.parentComp.getGui(),n=(r=this.tooltipComp)==null?void 0:r.getGui();this.isInteractingWithTooltip||s.contains(i)||this.interactionEnabled&&(n!=null&&n.contains(i))||this.setToDoNothing()}onKeyDown(){this.isInteractingWithTooltip&&(this.isInteractingWithTooltip=!1),this.setToDoNothing()}prepareToShowTooltip(t){if(this.state!=0||$u.isLocked)return;let i=0;t&&(i=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=t||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),i),this.state=1}isLastTooltipHiddenRecently(){const t=new Date().getTime(),i=$u.lastTooltipHideTime;return t-i<gj}setToDoNothing(t){!t&&this.state===2&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.onDocumentKeyDownCallback&&(this.onDocumentKeyDownCallback(),this.onDocumentKeyDownCallback=void 0),this.clearTimeouts(),this.state=0,this.lastMouseEvent=null}showTooltip(){const t={...this.parentComp.getTooltipParams()};if(!Ae(t.value)||this.shouldDisplayTooltip&&!this.shouldDisplayTooltip()){this.setToDoNothing();return}this.state=2,this.tooltipInstanceCount++;const i=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(t).newAgStackInstance().then(i)}hideTooltip(t){!t&&this.isInteractingWithTooltip||(this.tooltipComp&&(this.destroyTooltipComp(),$u.lastTooltipHideTime=new Date().getTime()),this.eventService.dispatchEvent({type:"tooltipHide",parentGui:this.parentComp.getGui()}),t&&(this.isInteractingWithTooltip=!1),this.setToDoNothing(!0))}newTooltipComponentCallback(t,i){if(this.state!==2||this.tooltipInstanceCount!==t){this.destroyBean(i);return}const n=i.getGui();this.tooltipComp=i,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),this.tooltipTrigger===0&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const r=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:n,ariaLabel:r("ariaLabelTooltip","Tooltip")});if(o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===1){const a=()=>this.setToDoNothing();[this.onBodyScrollEventCallback,this.onColumnMovedEventCallback]=this.addManagedEventListeners({bodyScroll:a,columnMoved:a})}this.interactionEnabled&&([this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener]=this.addManagedElementListeners(n,{mouseenter:this.onTooltipMouseEnter.bind(this),mouseleave:this.onTooltipMouseLeave.bind(this)}),[this.onDocumentKeyDownCallback]=this.addManagedElementListeners(Wi(this.gos),{keydown:a=>{n.contains(a==null?void 0:a.target)||this.onKeyDown()}}),this.tooltipTrigger===1&&([this.tooltipFocusInListener,this.tooltipFocusOutListener]=this.addManagedElementListeners(n,{focusin:this.onTooltipFocusIn.bind(this),focusout:this.onTooltipFocusOut.bind(this)}))),this.eventService.dispatchEvent({type:"tooltipShow",tooltipGui:n,parentGui:this.parentComp.getGui()}),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,this.lockService())}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}isTooltipFocused(){var s;const t=(s=this.tooltipComp)==null?void 0:s.getGui(),i=_i(this.gos);return!!t&&t.contains(i)}onTooltipFocusOut(t){const i=this.parentComp.getGui();this.isTooltipFocused()||(this.isInteractingWithTooltip=!1,i.contains(t.relatedTarget)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const t={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent({...t,mouseEvent:this.lastMouseEvent}):this.popupService.positionPopupByComponent({...t,eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5})}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const t=this.tooltipPopupDestroyFunc,i=this.tooltipComp,s=this.tooltipTrigger===0?fj:0;window.setTimeout(()=>{t(),this.destroyBean(i)},s),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(t=>{t&&t()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){$u.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},aT)}unlockService(){$u.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){this.showTooltipTimeoutId&&(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){this.hideTooltipTimeoutId&&(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){this.interactiveTooltipTimeoutId&&(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}};QF.isLocked=!1;var mj=QF,Cp=class extends de{constructor(e,t){super(),this.ctrl=e,t&&(this.beans=t)}wireBeans(e){this.beans=e}postConstruct(){this.refreshToolTip()}setBrowserTooltip(e){const t="title",i=this.ctrl.getGui();i&&(e!=null&&e!=""?i.setAttribute(t,e):i.removeAttribute(t))}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var t,i,s,n;if(this.tooltipManager!=null)return;const e={getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()};this.tooltipManager=this.createBean(new mj(e,(i=(t=this.ctrl).getTooltipShowDelayOverride)==null?void 0:i.call(t),(n=(s=this.ctrl).getTooltipHideDelayOverride)==null?void 0:n.call(s),this.ctrl.shouldDisplayTooltip),this.beans.context)}refreshToolTip(){this.browserTooltips=this.beans.gos.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?(this.setBrowserTooltip(this.tooltip),this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context))):(this.setBrowserTooltip(null),this.createTooltipFeatureIfNeeded())}getTooltipParams(){var n,r,o,a,l;const e=this.ctrl,t=(n=e.getColumn)==null?void 0:n.call(e),i=(r=e.getColDef)==null?void 0:r.call(e),s=(o=e.getRowNode)==null?void 0:o.call(e);return{location:e.getLocation(),colDef:i,column:t,rowIndex:(a=e.getRowIndex)==null?void 0:a.call(e),node:s,data:s==null?void 0:s.data,value:this.getTooltipText(),valueFormatted:(l=e.getValueFormatted)==null?void 0:l.call(e),hideTooltipCallback:()=>{var c;return(c=this.tooltipManager)==null?void 0:c.hideTooltip(!0)}}}getTooltipText(){return this.tooltip}destroy(){this.tooltipManager&&(this.tooltipManager=this.destroyBean(this.tooltipManager,this.beans.context)),super.destroy()}},vj=new up,st=null,di=class qF extends de{constructor(t,i){super(),this.suppressDataRefValidation=!1,this.displayed=!0,this.visible=!0,this.compId=vj.next(),this.cssClassManager=new rm(()=>this.eGui),this.componentSelectors=new Map((i??[]).map(s=>[s.selector,s])),t&&this.setTemplate(t)}preWireBeans(t){super.preWireBeans(t)}preConstruct(){this.usingBrowserTooltips=this.gos.get("enableBrowserTooltips"),this.wireTemplate(this.getGui())}wireTemplate(t,i){t&&this.gos&&(this.applyElementsToComponent(t),this.createChildComponentsFromTags(t,i))}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(t){const{newTooltipText:i,showDelayOverride:s,hideDelayOverride:n,location:r,shouldDisplayTooltip:o}=t||{};this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.tooltipText!==i&&(this.tooltipText=i);const a=()=>this.tooltipText;i!=null&&(this.tooltipFeature=this.createBean(new Cp({getTooltipValue:a,getGui:()=>this.getGui(),getLocation:()=>r??"UNKNOWN",getColDef:t==null?void 0:t.getColDef,getColumn:t==null?void 0:t.getColumn,getTooltipShowDelayOverride:s!=null?()=>s:void 0,getTooltipHideDelayOverride:n!=null?()=>n:void 0,shouldDisplayTooltip:o})))}getDataRefAttribute(t){return t.getAttribute?t.getAttribute("data-ref"):null}applyElementsToComponent(t,i,s,n=null){if(i===void 0&&(i=this.getDataRefAttribute(t)),i){const r=this[i];if(r===st)this[i]=n??t;else{const o=s&&s[i];!this.suppressDataRefValidation&&!o&&we(`Issue with data-ref: ${i} on ${this.constructor.name} with ${r}`)}}}createChildComponentsFromTags(t,i){dj(t.childNodes).forEach(n=>{if(!(n instanceof HTMLElement))return;const r=this.createComponentFromElement(n,o=>{o.getGui()&&this.copyAttributesFromNode(n,o.getGui())},i);if(r){if(r.addItems&&n.children.length){this.createChildComponentsFromTags(n,i);const o=Array.prototype.slice.call(n.children);r.addItems(o)}this.swapComponentForNode(r,t,n)}else n.childNodes&&this.createChildComponentsFromTags(n,i)})}createComponentFromElement(t,i,s){const n=t.nodeName,r=this.getDataRefAttribute(t),o=n.indexOf("AG-")===0,a=o?this.componentSelectors.get(n):null;let l=null;if(a){qF.elementGettingCreated=t;const c=s&&r?s[r]:void 0;l=new a.component(c),l.setParentComponent(this),this.createBean(l,null,i)}else o&&we(`Missing selector: ${n}`);return this.applyElementsToComponent(t,r,s,l),l}copyAttributesFromNode(t,i){pj(t.attributes,(s,n)=>i.setAttribute(s,n))}swapComponentForNode(t,i,s){const n=t.getGui();i.replaceChild(n,s),i.insertBefore(document.createComment(s.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,t))}activateTabIndex(t){const i=this.gos.get("tabIndex");t||(t=[]),t.length||t.push(this.getGui()),t.forEach(s=>s.setAttribute("tabindex",i.toString()))}setTemplate(t,i,s){const n=Df(t);this.setTemplateFromElement(n,i,s)}setTemplateFromElement(t,i,s,n=!1){if(this.eGui=t,this.suppressDataRefValidation=n,i)for(let r=0;r<i.length;r++){const o=i[r];this.componentSelectors.set(o.selector,o)}this.wireTemplate(t,s)}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(t){this.parentComponent=t}getParentComponent(){return this.parentComponent}setGui(t){this.eGui=t}queryForHtmlElement(t){return this.eGui.querySelector(t)}getContainerAndElement(t,i){let s=i;return t==null?null:(s||(s=this.eGui),T0(t)?{element:t,parent:s}:{element:t.getGui(),parent:s})}prependChild(t,i){const{element:s,parent:n}=this.getContainerAndElement(t,i)||{};!s||!n||n.insertAdjacentElement("afterbegin",s)}appendChild(t,i){const{element:s,parent:n}=this.getContainerAndElement(t,i)||{};!s||!n||n.appendChild(s)}isDisplayed(){return this.displayed}setVisible(t,i={}){if(t!==this.visible){this.visible=t;const{skipAriaHidden:s}=i;cj(this.eGui,t,{skipAriaHidden:s})}}setDisplayed(t,i={}){if(t!==this.displayed){this.displayed=t;const{skipAriaHidden:s}=i;Ni(this.eGui,t,{skipAriaHidden:s});const n={type:"displayChanged",visible:this.displayed};this.dispatchLocalEvent(n)}}destroy(){this.parentComponent&&(this.parentComponent=void 0),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),super.destroy()}addGuiEventListener(t,i,s){this.eGui.addEventListener(t,i,s),this.addDestroyFunc(()=>this.eGui.removeEventListener(t,i))}addCssClass(t){this.cssClassManager.addCssClass(t)}removeCssClass(t){this.cssClassManager.removeCssClass(t)}containsCssClass(t){return this.cssClassManager.containsCssClass(t)}addOrRemoveCssClass(t,i){this.cssClassManager.addOrRemoveCssClass(t,i)}},JF={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus",chartsMenuEdit:"chart",chartsMenuAdvancedSettings:"settings",chartsMenuAdd:"plus",checkboxChecked:"checkbox-checked",checkboxIndeterminate:"checkbox-indeterminate",checkboxUnchecked:"checkbox-unchecked",radioButtonOn:"radio-button-on",radioButtonOff:"radio-button-off"},yj=(()=>{const e=new Set(Object.values(JF));return e.add("eye"),e})();function Cj(e,t,i){const s=ur(e,t,i);if(s){const{className:r}=s;if(typeof r=="string"&&r.indexOf("ag-icon")>-1||typeof r=="object"&&r["ag-icon"])return s}const n=document.createElement("span");return n.appendChild(s),n}function ur(e,t,i,s){let n=null;const r=i&&i.getColDef().icons;if(r&&(n=r[e]),t&&!n){const o=t.get("icons");o&&(n=o[e])}if(n){let o;if(typeof n=="function")o=n();else if(typeof n=="string")o=n;else throw new Error("icon from grid options needs to be a string or a function");if(typeof o=="string")return Df(o);if(T0(o))return o;we("iconRenderer should return back a string or a dom object")}else{const o=document.createElement("span");let a=JF[e]??(yj.has(e)?e:void 0);return a||(we(`Did not find icon ${e}`),a=""),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),Fo(o,"presentation"),o}}var Sj=class extends di{constructor(){super(...arguments),this.dragSource=null,this.eIcon=st,this.eLabel=st}postConstruct(){const e=t=>Cj(t,this.gos,null);this.dropIconMap={pinned:e("columnMovePin"),hide:e("columnMoveHide"),move:e("columnMoveMove"),left:e("columnMoveLeft"),right:e("columnMoveRight"),group:e("columnMoveGroup"),aggregate:e("columnMoveValue"),pivot:e("columnMovePivot"),notAllowed:e("dropNotAllowed")}}init(e){this.dragSource=e.dragSource,this.setTemplate(`<div class="ag-dnd-ghost ag-unselectable">
                <span data-ref="eIcon" class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>
                <div data-ref="eLabel" class="ag-dnd-ghost-label"></div>
            </div>`)}destroy(){this.dragSource=null,super.destroy()}setIcon(e,t=!1){var s,n;pr(this.eIcon);let i=null;e||(e=(s=this.dragSource)!=null&&s.getDefaultIconName?(n=this.dragSource)==null?void 0:n.getDefaultIconName():"notAllowed"),i=this.dropIconMap[e],this.eIcon.classList.toggle("ag-shake-left-to-right",t),!(i===this.dropIconMap.hide&&this.gos.get("suppressDragLeaveHidesColumns"))&&i&&this.eIcon.appendChild(i)}setLabel(e){this.eLabel.textContent=la(e)}};function ek(e,t,i){if(i===0)return!1;const s=Math.abs(e.clientX-t.clientX),n=Math.abs(e.clientY-t.clientY);return Math.max(s,n)<=i}var Bc=class{constructor(e,t=!1){this.DOUBLE_TAP_MILLIS=500,this.destroyFuncs=[],this.touching=!1,this.localEventService=new mp,this.eElement=e,this.preventMouseClick=t;const i=this.onTouchStart.bind(this),s=this.onTouchMove.bind(this),n=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",i,{passive:!0}),this.eElement.addEventListener("touchmove",s,{passive:!0}),this.eElement.addEventListener("touchend",n,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",i,{passive:!0}),this.eElement.removeEventListener("touchmove",s,{passive:!0}),this.eElement.removeEventListener("touchend",n,{passive:!1})})}getActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}onTouchStart(e){if(this.touching)return;this.touchStart=e.touches[0],this.touching=!0,this.moved=!1;const t=this.touchStart;window.setTimeout(()=>{const i=this.touchStart===t;if(this.touching&&i&&!this.moved){this.moved=!0;const s={type:"longTap",touchStart:this.touchStart,touchEvent:e};this.localEventService.dispatchEvent(s)}},500)}onTouchMove(e){if(!this.touching)return;const t=this.getActiveTouch(e.touches);if(!t)return;!ek(t,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(e){if(this.touching){if(!this.moved){const t={type:"tap",touchStart:this.touchStart};this.localEventService.dispatchEvent(t),this.checkForDoubleTap()}this.preventMouseClick&&e.cancelable&&e.preventDefault(),this.touching=!1}}checkForDoubleTap(){const e=new Date().getTime();if(this.lastTapTime&&this.lastTapTime>0)if(e-this.lastTapTime>this.DOUBLE_TAP_MILLIS){const i={type:"doubleTap",touchStart:this.touchStart};this.localEventService.dispatchEvent(i),this.lastTapTime=null}else this.lastTapTime=e;else this.lastTapTime=e}destroy(){this.destroyFuncs.forEach(e=>e())}};function Fg(e,t){return`<span data-ref="eSort${e}" class="ag-sort-indicator-icon ag-sort-${t} ag-hidden" aria-hidden="true"></span>`}var wj=`<span class="ag-sort-indicator-container">
        ${Fg("Order","order")}
        ${Fg("Asc","ascending-icon")}
        ${Fg("Desc","descending-icon")}
        ${Fg("Mixed","mixed-icon")}
        ${Fg("None","none-icon")}
    </span>`,A0=class extends di{constructor(e){super(),this.eSortOrder=st,this.eSortAsc=st,this.eSortDesc=st,this.eSortMixed=st,this.eSortNone=st,e||this.setTemplate(wj)}wireBeans(e){this.sortController=e.sortController}attachCustomElements(e,t,i,s,n){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=s,this.eSortNone=n}setupSort(e,t=!1){if(this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),!this.column.isSortable()&&!this.column.getColDef().showRowGroup)return;this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e);const i=this.updateIcons.bind(this),s=this.onSortChanged.bind(this);this.addManagedPropertyListener("unSortIcon",i),this.addManagedEventListeners({newColumnsLoaded:i,sortChanged:s,columnRowGroupChanged:s}),this.onSortChanged()}addInIcon(e,t,i){if(t==null)return;const s=ur(e,this.gos,i);s&&t.appendChild(s)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc){const t=e==="asc";Ni(this.eSortAsc,t,{skipAriaHidden:!0})}if(this.eSortDesc){const t=e==="desc";Ni(this.eSortDesc,t,{skipAriaHidden:!0})}if(this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gos.get("unSortIcon"),i=e==null;Ni(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;na(this.gos)&&e&&(this.addManagedEventListeners({sortChanged:this.updateMultiSortIndicator.bind(this),columnRowGroupChanged:this.updateMultiSortIndicator.bind(this)}),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e=this.sortController.getDisplaySortForColumn(this.column)==="mixed";Ni(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){if(!this.eSortOrder)return;const e=this.sortController.getColumnsWithSortingOrdered(),t=this.sortController.getDisplaySortIndexForColumn(this.column)??-1,i=e.some(n=>this.sortController.getDisplaySortIndexForColumn(n)??!1),s=t>=0&&i;Ni(this.eSortOrder,s,{skipAriaHidden:!0}),t>=0?this.eSortOrder.textContent=(t+1).toString():pr(this.eSortOrder)}},xj={selector:"AG-SORT-INDICATOR",component:A0},bj=`<div class="ag-cell-label-container" role="presentation">
        <span data-ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>
        <span data-ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>
        <div data-ref="eLabel" class="ag-header-cell-label" role="presentation">
            <span data-ref="eText" class="ag-header-cell-text"></span>
            <span data-ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>
            <ag-sort-indicator data-ref="eSortIndicator"></ag-sort-indicator>
        </div>
    </div>`,qb=class extends di{constructor(){super(...arguments),this.eFilter=st,this.eFilterButton=st,this.eSortIndicator=st,this.eMenu=st,this.eLabel=st,this.eText=st,this.eSortOrder=st,this.eSortAsc=st,this.eSortDesc=st,this.eSortMixed=st,this.eSortNone=st,this.lastMovingChanged=0}wireBeans(e){this.sortController=e.sortController,this.menuService=e.menuService,this.funcColsService=e.funcColsService}destroy(){super.destroy()}refresh(e){const t=this.params;return this.params=e,this.workOutTemplate()!=this.currentTemplate||this.workOutShowMenu()!=this.currentShowMenu||this.workOutSort()!=this.currentSort||this.shouldSuppressMenuHide()!=this.currentSuppressMenuHide||t.enableFilterButton!=e.enableFilterButton||t.enableFilterIcon!=e.enableFilterIcon?!1:(this.setDisplayName(e),!0)}workOutTemplate(){let e=this.params.template??bj;return e=e&&e.trim?e.trim():e,e}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate,[xj]),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=la(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,i){if(t==null)return;const s=ur(e,this.gos,i);s&&t.appendChild(s)}setupTap(){const{gos:e}=this;if(e.get("suppressTouch"))return;const t=new Bc(this.getGui(),!0),i=this.shouldSuppressMenuHide(),s=i&&Ae(this.eMenu),n=s?new Bc(this.eMenu,!0):t;if(this.params.enableMenu){const r=s?"tap":"longTap",o=a=>this.params.showColumnMenuAfterMouseClick(a.touchStart);this.addManagedListeners(n,{[r]:o})}if(this.params.enableSorting){const r=o=>{var l,c;const a=o.touchStart.target;i&&((l=this.eMenu)!=null&&l.contains(a)||(c=this.eFilterButton)!=null&&c.contains(a))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")};this.addManagedListeners(t,{tap:r})}if(this.params.enableFilterButton){const r=new Bc(this.eFilterButton,!0);this.addManagedListeners(r,{tap:()=>this.params.showFilter(this.eFilterButton)}),this.addDestroyFunc(()=>r.destroy())}this.addDestroyFunc(()=>t.destroy()),s&&this.addDestroyFunc(()=>n.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu){Ch(this.eMenu),this.eMenu=void 0;return}const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedElementListeners(this.eMenu,{click:()=>this.params.showColumnMenu(this.eMenu)}),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){const t=this.params.column,i=this.menuService.isLegacyMenuEnabled();if(e&&!i){if(this.menuService.isFilterMenuInHeaderEnabled(t))return this.params.showFilter(this.eFilterButton??this.eMenu??this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(this.eMenu??this.eFilterButton??this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.createBean(new A0(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListeners(this.params.column,{movingChanged:()=>{this.lastMovingChanged=new Date().getTime()}}),this.eLabel&&this.addManagedElementListeners(this.eLabel,{click:t=>{const i=this.params.column.isMoving(),n=new Date().getTime()-this.lastMovingChanged<50;if(!(i||n)){const a=this.gos.get("multiSortKey")==="ctrl"?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(a)}}});const e=()=>{const t=this.params.column.getSort();if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",t==="asc"),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",t==="desc"),this.addOrRemoveCssClass("ag-header-cell-sorted-none",!t),this.params.column.getColDef().showRowGroup){const i=this.funcColsService.getSourceColumnsForGroupColumn(this.params.column),n=!(i==null?void 0:i.every(r=>this.params.column.getSort()==r.getSort()));this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",n)}};this.addManagedEventListeners({sortChanged:e,columnRowGroupChanged:e})}setupFilterIcon(){this.eFilter&&this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){if(!this.eFilterButton)return;this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedElementListeners(this.eFilterButton,{click:()=>this.params.showFilter(this.eFilterButton)}):this.eFilterButton=void 0}configureFilter(e,t,i){if(!e)return Ch(t),!1;const s=this.params.column;return this.addInIcon("filter",t,s),this.addManagedListeners(s,{filterChanged:i}),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();Ni(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){return e?this.eFilterButton??this.eMenu??this.getGui():this.eMenu??this.eFilterButton??this.getGui()}},Mj=class extends di{constructor(){super(`<div class="ag-header-group-cell-label" role="presentation">
            <span data-ref="agLabel" class="ag-header-group-text" role="presentation"></span>
            <span data-ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>
            <span data-ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>
        </div>`),this.agOpened=st,this.agClosed=st,this.agLabel=st}wireBeans(e){this.columnModel=e.columnModel}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&we("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened",this.agOpened),this.addInIcon("columnGroupClosed",this.agClosed);const e=n=>{if(pl(n))return;const r=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),r,"uiColumnExpanded")};this.addTouchAndClickListeners(this.agClosed,e),this.addTouchAndClickListeners(this.agOpened,e);const t=n=>{lp(n)};this.addManagedElementListeners(this.agClosed,{dblclick:t}),this.addManagedElementListeners(this.agOpened,{dblclick:t}),this.addManagedElementListeners(this.getGui(),{dblclick:e}),this.updateIconVisibility();const i=this.params.columnGroup.getProvidedColumnGroup(),s=this.updateIconVisibility.bind(this);this.addManagedListeners(i,{expandedChanged:s,expandableChanged:s})}addTouchAndClickListeners(e,t){const i=new Bc(e,!0);this.addManagedListeners(i,{tap:t}),this.addDestroyFunc(()=>i.destroy()),this.addManagedElementListeners(e,{click:t})}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const t=this.params.columnGroup.isExpanded();Ni(this.agOpened,t),Ni(this.agClosed,!t)}else Ni(this.agOpened,!1),Ni(this.agClosed,!1)}addInIcon(e,t){const i=ur(e,this.gos,null);i&&t.appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable()){Ni(this.agOpened,!1),Ni(this.agClosed,!1);return}}setupLabel(){var i;const{displayName:e,columnGroup:t}=this.params;if(Ae(e)){const s=la(e,!0);this.agLabel.textContent=s}this.addOrRemoveCssClass("ag-sticky-label",!((i=t.getColGroupDef())!=null&&i.suppressStickyLabel))}},Rj="↑",Dj="↓",Ej=class extends di{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}wireBeans(e){this.filterManager=e.filterManager}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),s=e.formatValue(i),n=Ae(s)?s:i,r=t>=0;r?this.eDelta.textContent=Rj+n:this.eDelta.textContent=Dj+n,this.eDelta.classList.toggle("ag-value-change-delta-up",r),this.eDelta.classList.toggle("ag-value-change-delta-down",!r)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),pr(this.eDelta)}refresh(e,t=!1){var s;const i=e.value;if(i===this.lastValue||(Ae(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:Ae(e.value)?this.eValue.textContent=i:pr(this.eValue),(s=this.filterManager)!=null&&s.isSuppressFlashingCellsBecauseFiltering()))return!1;if(typeof i=="number"&&typeof this.lastValue=="number"){const n=i-this.lastValue;this.showDelta(e,n)}return this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0}},Ij=class extends di{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}wireBeans(e){this.filterManager=e.filterManager}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){var s;let i=e.value;return Pt(i)&&(i=""),i===this.lastValue||(s=this.filterManager)!=null&&s.isSuppressFlashingCellsBecauseFiltering()?!1:(t||this.addSlideAnimation(),this.lastValue=i,Ae(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:Ae(e.value)?this.eCurrent.textContent=i:pr(this.eCurrent),!0)}},le=class{};le.BACKSPACE="Backspace";le.TAB="Tab";le.ENTER="Enter";le.ESCAPE="Escape";le.SPACE=" ";le.LEFT="ArrowLeft";le.UP="ArrowUp";le.RIGHT="ArrowRight";le.DOWN="ArrowDown";le.DELETE="Delete";le.F2="F2";le.PAGE_UP="PageUp";le.PAGE_DOWN="PageDown";le.PAGE_HOME="Home";le.PAGE_END="End";le.A="KeyA";le.C="KeyC";le.D="KeyD";le.V="KeyV";le.X="KeyX";le.Y="KeyY";le.Z="KeyZ";var Lj=class extends di{constructor(e,t,i){super(t,i),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:s,disabled:n}=this.config;n!=null&&this.setDisabled(n),e!=null&&this.setLabelSeparator(e),t!=null&&this.setLabel(t),i!=null&&this.setLabelWidth(i),this.setLabelAlignment(s||this.labelAlignment),this.refreshLabel()}refreshLabel(){pr(this.eLabel),typeof this.label=="string"?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),this.label===""?(Ni(this.eLabel,!1),Fo(this.eLabel,"presentation")):(Ni(this.eLabel,!0),Fo(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e?this:(this.labelSeparator=e,this.label!=null&&this.refreshLabel(),this)}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e?this:(this.label=e,this.refreshLabel(),this)}setLabelAlignment(e){const i=this.getGui().classList;return i.toggle("ag-label-align-left",e==="left"),i.toggle("ag-label-align-right",e==="right"),i.toggle("ag-label-align-top",e==="top"),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return this.label==null?this:(Zy(this.eLabel,e),this)}setDisabled(e){e=!!e;const t=this.getGui();return Rf(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}},tk=class extends Lj{constructor(e,t,i,s){super(e,t,i),this.className=s}postConstruct(){super.postConstruct();const{width:e,value:t,onValueChange:i}=this.config;e!=null&&this.setWidth(e),t!=null&&this.setValue(t),i!=null&&this.onValueChange(i),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}setLabel(e){return super.setLabel(e),this.refreshAriaLabelledBy(),this}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId(),i=this.getLabel();i==null||i==""||UW(e)!==null?Mf(e,""):Mf(e,t??"")}setAriaLabel(e){return cp(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListeners(this,{fieldValueChanged:()=>e(this.getValue())}),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return To(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e?this:(this.previousValue=this.value,this.value=e,t||this.dispatchLocalEvent({type:"fieldValueChanged"}),this)}},oh=class extends tk{constructor(e,t,i="text",s="input"){super(e,(e==null?void 0:e.template)??`
            <div role="presentation">
                <div data-ref="eLabel" class="ag-input-field-label"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">
                    <${s} data-ref="eInput" class="ag-input-field-input"></${s}>
                </div>
            </div>`,[],t),this.inputType=i,this.displayFieldTag=s,this.eLabel=st,this.eWrapper=st,this.eInput=st}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{inputName:e,inputWidth:t}=this.config;e!=null&&this.setInputName(e),t!=null&&this.setInputWidth(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedElementListeners(this.eInput,{input:e=>this.setValue(e.target.value)})}setInputType(){this.displayFieldTag==="input"&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return Zy(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){const t=this.eInput;return t.maxLength=e,this}setInputPlaceholder(e){return Ur(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return cp(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Rf(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){if(e===!0)Ur(this.eInput,"autocomplete",null);else{const t=typeof e=="string"?e:"off";Ur(this.eInput,"autocomplete",t)}return this}},P0=class extends oh{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}postConstruct(){super.postConstruct();const{readOnly:e,passive:t}=this.config;typeof e=="boolean"&&this.setReadOnly(e),typeof t=="boolean"&&this.setPassive(t)}addInputListeners(){this.addManagedElementListeners(this.eInput,{click:this.onCheckboxClick.bind(this)}),this.addManagedElementListeners(this.eLabel,{click:this.toggle.bind(this)})}getNextValue(){return this.selected===void 0?!0:!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){const t=this.getInputElement();return t.name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected=typeof e=="boolean"?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=e===void 0,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchLocalEvent({type:"fieldValueChanged",selected:e,previousValue:t,event:i});const s=this.getInputElement();this.eventService.dispatchEvent({type:"checkboxChanged",id:s.id,name:s.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",e===!0),this.eWrapper.classList.toggle("ag-indeterminate",e==null)}},F0={selector:"AG-CHECKBOX",component:P0},Tj=class extends di{constructor(){super(`
            <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[F0]),this.eCheckbox=st}init(e){this.refresh(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),GF(t,"polite"),this.addManagedListeners(t,{click:i=>{if(lp(i),this.eCheckbox.isDisabled())return;const s=this.eCheckbox.getValue();this.onCheckboxChanged(s)},dblclick:i=>{lp(i)}}),this.addManagedElementListeners(this.params.eGridCell,{keydown:i=>{if(i.key===le.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===_i(this.gos)&&this.eCheckbox.toggle();const s=this.eCheckbox.getValue();this.onCheckboxChanged(s),i.preventDefault()}}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var a;let t,i=!0;if(e.node.group&&e.column)if(typeof e.value=="boolean")t=e.value;else{const l=e.column.getColId();l.startsWith(PC)?t=e.value==null||e.value===""?void 0:e.value==="true":e.node.aggData&&e.node.aggData[l]!==void 0?t=e.value??void 0:i=!1}else t=e.value??void 0;if(!i){this.eCheckbox.setDisplayed(!1);return}this.eCheckbox.setValue(t);const s=e.disabled!=null?e.disabled:!((a=e.column)!=null&&a.isCellEditable(e.node));this.eCheckbox.setDisabled(s);const n=this.localeService.getLocaleTextFunc(),r=M0(n,t),o=s?r:`${n("ariaToggleCellValue","Press SPACE to toggle cell value")} (${r})`;this.eCheckbox.setInputAriaLabel(o)}onCheckboxChanged(e){const{column:t,node:i,value:s}=this.params;this.eventService.dispatchEvent({type:"cellEditingStarted",column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s});const n=this.params.node.setDataValue(this.params.column,e,"edit");this.eventService.dispatchEvent({type:"cellEditingStopped",column:t,colDef:t==null?void 0:t.getColDef(),data:i.data,node:i,rowIndex:i.rowIndex,rowPinned:i.rowPinned,value:s,oldValue:s,newValue:e,valueChanged:n}),n||this.updateCheckbox(this.params)}},Aj=class extends di{constructor(){super(`<div class="ag-loading">
            <span class="ag-loading-icon" data-ref="eLoadingIcon"></span>
            <span class="ag-loading-text" data-ref="eLoadingText"></span>
        </div>`),this.eLoadingIcon=st,this.eLoadingText=st}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=ur("groupLoading",this.gos,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}},Pj=class extends di{constructor(){super('<div class="ag-skeleton-container"></div>')}init(e){const t=`ag-cell-skeleton-renderer-${this.getCompId()}`;this.getGui().setAttribute("id",t),this.addDestroyFunc(()=>Mf(e.eParentOfValue)),Mf(e.eParentOfValue,t),e.node.failedLoad?this.setupFailed():this.setupLoading(e)}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.getGui().innerText=e("loadingError","ERR");const t=e("ariaSkeletonCellLoadingFailed","Row failed to load");cp(this.getGui(),t)}setupLoading(e){const i=Wi(this.gos).createElement("div");i.classList.add("ag-skeleton-effect");const s=e.node.rowIndex;if(s!=null){const o=75+25*(s%2===0?Math.sin(s):Math.cos(s));i.style.width=`${o}%`}this.getGui().appendChild(i);const r=this.localeService.getLocaleTextFunc()("ariaSkeletonCellLoading","Row data is loading");cp(this.getGui(),r)}refresh(e){return!1}destroy(){super.destroy()}},ik=class extends di{constructor(){super()}destroy(){super.destroy()}},Fj=class extends ik{init(){var t;const e=dl((t=this.gos.get("overlayLoadingTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??'<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>'),!e){const i=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=i("loadingOoo","Loading...")})}}},kj=class extends ik{init(){var t;const e=dl((t=this.gos.get("overlayNoRowsTemplate"))==null?void 0:t.trim());if(this.setTemplate(e??'<span class="ag-overlay-no-rows-center"></span>'),!e){const i=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=i("noRowsToShow","No Rows To Show")})}}},Sp=class extends di{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}},Nj=class extends Sp{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=la(t,!0)}};function sk(e){const{inputValue:t,allSuggestions:i,hideIrrelevant:s,filterByPercentageOfBestMatch:n,addSequentialWeight:r}=e;let o=i.map((c,p)=>({value:c,relevance:_j(t.toLowerCase(),c.toLocaleLowerCase(),r),idx:p}));if(o.sort((c,p)=>p.relevance-c.relevance),s&&(o=o.filter(c=>c.relevance!==0)),o.length>0&&n&&n>0){const p=o[0].relevance*n;o=o.filter(g=>p-g.relevance<0)}const a=[],l=[];for(const c of o)a.push(c.value),l.push(c.idx);return{values:a,indices:l}}function Oj(e){const t=[],i=e.length;for(let s=1;s<=i;s++)for(let n=0;n<=i-s;n++){const r=n+s-1;t.push(e.slice(n,r+1))}return t}function _j(e,t,i=!1){const s=e.replace(/\s/g,""),n=t.replace(/\s/g,""),r=s.length,o=n.length,a=new Array(r+1).fill(null).map(()=>new Array(o+1).fill(0));for(let g=0;g<=r;g+=1)a[g][0]=g;for(let g=0;g<=o;g+=1)a[0][g]=g;for(let g=1;g<=r;g++)for(let f=1;f<=o;f++)s[g-1]===n[f-1]?a[g][f]=a[g-1][f-1]:a[g][f]=1+Math.min(a[g][f-1],Math.min(a[g-1][f],a[g-1][f-1]));const l=a[r][o];let p=Math.max(r,o)-l;if(i){const g=Oj(s);for(let f=0;f<g.length;f++){const y=g[f];n.indexOf(y)!==-1&&(p+=1,p*=y.length)}}return p}var Bj=class extends de{constructor(){super(...arguments),this.beanName="userComponentRegistry",this.agGridDefaults={agDragAndDropImage:Sj,agColumnHeader:qb,agColumnGroupHeader:Mj,agSortIndicator:A0,agAnimateShowChangeCellRenderer:Ej,agAnimateSlideCellRenderer:Ij,agLoadingCellRenderer:Aj,agSkeletonCellRenderer:Pj,agCheckboxCellRenderer:Tj,agLoadingOverlay:Fj,agNoRowsOverlay:kj,agTooltipComponent:Nj},this.agGridDefaultParams={},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:"@ag-grid-enterprise/set-filter",agSetColumnFloatingFilter:"@ag-grid-enterprise/set-filter",agMultiColumnFilter:"@ag-grid-enterprise/multi-filter",agMultiColumnFloatingFilter:"@ag-grid-enterprise/multi-filter",agGroupColumnFilter:"@ag-grid-enterprise/row-grouping",agGroupColumnFloatingFilter:"@ag-grid-enterprise/row-grouping",agGroupCellRenderer:"@ag-grid-enterprise/row-grouping",agGroupRowRenderer:"@ag-grid-enterprise/row-grouping",agRichSelect:"@ag-grid-enterprise/rich-select",agRichSelectCellEditor:"@ag-grid-enterprise/rich-select",agDetailCellRenderer:"@ag-grid-enterprise/master-detail",agSparklineCellRenderer:"@ag-grid-enterprise/sparklines"},this.jsComps={}}postConstruct(){const e=this.gos.get("components");e!=null&&bo(e,(t,i)=>this.registerJsComponent(t,i))}registerDefaultComponent(e,t,i){this.agGridDefaults[e]=t,i&&(this.agGridDefaultParams[e]=i)}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const i=(a,l,c)=>({componentFromFramework:l,component:a,params:c}),s=this.getFrameworkOverrides().frameworkComponent(t,this.gos.get("components"));if(s!=null)return i(s,!0);const n=this.jsComps[t];if(n){const a=this.getFrameworkOverrides().isFrameworkComponent(n);return i(n,a)}const r=this.agGridDefaults[t];if(r)return i(r,!1,this.agGridDefaultParams[t]);const o=this.enterpriseAgDefaultCompsModule[t];return o?this.gos.assertModuleRegistered(o,`AG Grid '${e}' component: ${t}`):m0(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){const i=[...Object.keys(this.agGridDefaults).filter(n=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(n)),...Object.keys(this.jsComps)],s=sk({inputValue:t,allSuggestions:i,hideIrrelevant:!0,filterByPercentageOfBestMatch:.8}).values;we(`Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),s.length>0&&we(`         Did you mean: [${s.slice(0,3)}]?`),we(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}},Vi=class Kg{constructor(t){this.status=0,this.resolution=null,this.waiters=[],t(i=>this.onDone(i),i=>this.onReject(i))}static all(t){return t.length?new Kg(i=>{let s=t.length;const n=new Array(s);t.forEach((r,o)=>{r.then(a=>{n[o]=a,s--,s===0&&i(n)})})}):Kg.resolve()}static resolve(t=null){return new Kg(i=>i(t))}then(t){return new Kg(i=>{this.status===1?i(t(this.resolution)):this.waiters.push(s=>i(t(s)))})}onDone(t){this.status=1,this.resolution=t,this.waiters.forEach(i=>i(t))}onReject(t){}},Gj={propertyName:"dateComponent",cellRenderer:!1},zj={propertyName:"dragAndDropImageComponent",cellRenderer:!1},Hj={propertyName:"headerComponent",cellRenderer:!1},Vj={propertyName:"headerGroupComponent",cellRenderer:!1},lT={propertyName:"cellRenderer",cellRenderer:!0},Wj={propertyName:"cellRenderer",cellRenderer:!1},jj={propertyName:"loadingCellRenderer",cellRenderer:!0},Uj={propertyName:"cellEditor",cellRenderer:!1},cT={propertyName:"innerRenderer",cellRenderer:!0},Kj={propertyName:"loadingOverlayComponent",cellRenderer:!1},Yj={propertyName:"noRowsOverlayComponent",cellRenderer:!1},$j={propertyName:"tooltipComponent",cellRenderer:!1},k0={propertyName:"filter",cellRenderer:!1},Zj={propertyName:"floatingFilterComponent",cellRenderer:!1},Xj={propertyName:"toolPanel",cellRenderer:!1},Qj={propertyName:"statusPanel",cellRenderer:!1},qj={propertyName:"fullWidthCellRenderer",cellRenderer:!0},Jj={propertyName:"loadingCellRenderer",cellRenderer:!0},eU={propertyName:"groupRowRenderer",cellRenderer:!0},tU={propertyName:"detailCellRenderer",cellRenderer:!0},iU={propertyName:"menuItem",cellRenderer:!1},nk=class rk extends de{constructor(){super(...arguments),this.beanName="userComponentFactory"}wireBeans(t){this.agComponentUtils=t.agComponentUtils,this.componentMetadataProvider=t.componentMetadataProvider,this.userComponentRegistry=t.userComponentRegistry,this.frameworkComponentWrapper=t.frameworkComponentWrapper,this.gridOptions=t.gridOptions}getDragAndDropImageCompDetails(t){return this.getCompDetails(this.gridOptions,zj,"agDragAndDropImage",t,!0)}getHeaderCompDetails(t,i){return this.getCompDetails(t,Hj,"agColumnHeader",i)}getHeaderGroupCompDetails(t){const i=t.columnGroup.getColGroupDef();return this.getCompDetails(i,Vj,"agColumnGroupHeader",t)}getFullWidthCellRendererDetails(t){return this.getCompDetails(this.gridOptions,qj,null,t,!0)}getFullWidthLoadingCellRendererDetails(t){return this.getCompDetails(this.gridOptions,Jj,"agLoadingCellRenderer",t,!0)}getFullWidthGroupCellRendererDetails(t){return this.getCompDetails(this.gridOptions,eU,"agGroupRowRenderer",t,!0)}getFullWidthDetailCellRendererDetails(t){return this.getCompDetails(this.gridOptions,tU,"agDetailCellRenderer",t,!0)}getInnerRendererDetails(t,i){return this.getCompDetails(t,cT,null,i)}getFullWidthGroupRowInnerCellRenderer(t,i){return this.getCompDetails(t,cT,null,i)}getCellRendererDetails(t,i){return this.getCompDetails(t,lT,null,i)}getEditorRendererDetails(t,i){return this.getCompDetails(t,Wj,null,i)}getLoadingCellRendererDetails(t,i){return this.getCompDetails(t,jj,"agSkeletonCellRenderer",i,!0)}getCellEditorDetails(t,i){return this.getCompDetails(t,Uj,"agCellEditor",i,!0)}getFilterDetails(t,i,s){return this.getCompDetails(t,k0,s,i,!0)}getDateCompDetails(t){return this.getCompDetails(this.gridOptions,Gj,"agDateInput",t,!0)}getLoadingOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,Kj,"agLoadingOverlay",t,!0)}getNoRowsOverlayCompDetails(t){return this.getCompDetails(this.gridOptions,Yj,"agNoRowsOverlay",t,!0)}getTooltipCompDetails(t){return this.getCompDetails(t.colDef,$j,"agTooltipComponent",t,!0)}getSetFilterCellRendererDetails(t,i){return this.getCompDetails(t,lT,null,i)}getFloatingFilterCompDetails(t,i,s){return this.getCompDetails(t,Zj,s,i)}getToolPanelCompDetails(t,i){return this.getCompDetails(t,Xj,null,i,!0)}getStatusPanelCompDetails(t,i){return this.getCompDetails(t,Qj,null,i,!0)}getMenuItemCompDetails(t,i){return this.getCompDetails(t,iU,"agMenuItem",i,!0)}getCompDetails(t,i,s,n,r=!1){const{propertyName:o,cellRenderer:a}=i;let{compName:l,jsComp:c,fwComp:p,paramsFromSelector:g,popupFromSelector:f,popupPositionFromSelector:y}=rk.getCompKeys(this.frameworkOverrides,t,i,n),C;const x=I=>{const P=this.userComponentRegistry.retrieve(o,I);P&&(c=P.componentFromFramework?void 0:P.component,p=P.componentFromFramework?P.component:void 0,C=P.params)};if(l!=null&&x(l),c==null&&p==null&&s!=null&&x(s),c&&a&&!this.agComponentUtils.doesImplementIComponent(c)&&(c=this.agComponentUtils.adaptFunction(o,c)),!c&&!p){r&&Ut(`Could not find component ${l}, did you forget to configure this component?`);return}const M=this.mergeParamsWithApplicationProvidedParams(t,i,n,g,C),b=c==null,R=c||p;return{componentFromFramework:b,componentClass:R,params:M,type:i,popupFromSelector:f,popupPositionFromSelector:y,newAgStackInstance:()=>this.newAgStackInstance(R,b,M,i)}}static getCompKeys(t,i,s,n){const{propertyName:r}=s;let o,a,l,c,p,g;if(i){const f=i,y=f[r+"Selector"],C=y?y(n):null,x=M=>{typeof M=="string"?o=M:M!=null&&M!==!0&&(t.isFrameworkComponent(M)?l=M:a=M)};C?(x(C.component),c=C.params,p=C.popup,g=C.popupPosition):x(f[r])}return{compName:o,jsComp:a,fwComp:l,paramsFromSelector:c,popupFromSelector:p,popupPositionFromSelector:g}}newAgStackInstance(t,i,s,n){const r=n.propertyName,o=!i;let a;if(o)a=new t;else{const c=this.componentMetadataProvider.retrieve(r);a=this.frameworkComponentWrapper.wrap(t,c.mandatoryMethodList,c.optionalMethodList,n)}const l=this.initComponent(a,s);return l==null?Vi.resolve(a):l.then(()=>a)}mergeParamsWithApplicationProvidedParams(t,i,s,n=null,r){const o=this.gos.getGridCommonParams();mn(o,s),r&&mn(o,r);const a=t,l=a&&a[i.propertyName+"Params"];if(typeof l=="function"){const c=l(s);mn(o,c)}else typeof l=="object"&&mn(o,l);return mn(o,n),o}initComponent(t,i){if(this.createBean(t),t.init!=null)return t.init(i)}};function ef(e){const t=e;return t!=null&&t.getFrameworkComponentInstance!=null?t.getFrameworkComponentInstance():e}var FC=class jt{static register(t){jt.__register(t,!0,void 0)}static registerModules(t){jt.__registerModules(t,!0,void 0)}static __register(t,i,s){jt.runVersionChecks(t),s!==void 0?(jt.areGridScopedModules=!0,jt.gridModulesMap[s]===void 0&&(jt.gridModulesMap[s]={}),jt.gridModulesMap[s][t.moduleName]=t):jt.globalModulesMap[t.moduleName]=t,jt.setModuleBased(i)}static __unRegisterGridModules(t){delete jt.gridModulesMap[t]}static __registerModules(t,i,s){jt.setModuleBased(i),t&&t.forEach(n=>jt.__register(n,i,s))}static isValidModuleVersion(t){const[i,s]=t.version.split(".")||[],[n,r]=jt.currentModuleVersion.split(".")||[];return i===n&&s===r}static runVersionChecks(t){jt.currentModuleVersion||(jt.currentModuleVersion=t.version);const i=s=>`You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. ${s} Please update all modules to the same version.`;if(t.version?jt.isValidModuleVersion(t)||Ut(i(`'${t.moduleName}' is version ${t.version} but the other modules are version ${jt.currentModuleVersion}.`)):Ut(i(`'${t.moduleName}' is incompatible.`)),t.validate){const s=t.validate();s.isValid||Ut(`${s.message}`)}}static setModuleBased(t){jt.moduleBased===void 0?jt.moduleBased=t:jt.moduleBased!==t&&(Ut("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),Ut("Please see https://www.ag-grid.com/javascript-grid/modules/ for more information."))}static __setIsBundled(){jt.isBundled=!0}static __assertRegistered(t,i,s){var r;if(this.__isRegistered(t,s))return!0;let n;if(jt.isBundled)n=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:
        
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>
        
For more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(jt.moduleBased||jt.moduleBased===void 0){const o=(r=Object.entries(mF).find(([a,l])=>l===t))==null?void 0:r[0];n=`AG Grid: unable to use ${i} as the ${o} is not registered${jt.areGridScopedModules?` for gridId: ${s}`:""}. Check if you have registered the module:
           
    import { ModuleRegistry } from '@ag-grid-community/core';
    import { ${o} } from '${t}';
    
    ModuleRegistry.registerModules([ ${o} ]);

For more info see: https://www.ag-grid.com/javascript-grid/modules/`}else n=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:
            
    import 'ag-grid-enterprise';`;return Ut(n),!1}static __isRegistered(t,i){var s;return!!jt.globalModulesMap[t]||!!((s=jt.gridModulesMap[i])!=null&&s[t])}static __getRegisteredModules(t){return[...py(jt.globalModulesMap),...py(jt.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){return py(jt.gridModulesMap[t]??{})||[]}static __isPackageBased(){return!jt.moduleBased}};FC.globalModulesMap={};FC.gridModulesMap={};FC.areGridScopedModules=!1;var ra=FC,sU=class{constructor(e){this.beans={},this.createdBeans=[],this.destroyed=!1,!(!e||!e.beanClasses)&&(this.beanDestroyComparator=e.beanDestroyComparator,this.init(e))}init(e){var t;Object.entries(e.providedBeanInstances).forEach(([i,s])=>{this.beans[i]=s}),e.beanClasses.forEach(i=>{const s=new i;s.beanName?this.beans[s.beanName]=s:console.error(`Bean ${i.name} is missing beanName`),this.createdBeans.push(s)}),(t=e.derivedBeans)==null||t.forEach(i=>{const{beanName:s,bean:n}=i(this);this.beans[s]=n,this.createdBeans.push(n)}),e.beanInitComparator&&this.createdBeans.sort(e.beanInitComparator),this.initBeans(this.createdBeans)}getBeanInstances(){return Object.values(this.beans)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.initBeans([e],t),e}initBeans(e,t){e.forEach(i=>{var s,n;(s=i.preWireBeans)==null||s.call(i,this.beans),(n=i.wireBeans)==null||n.call(i,this.beans)}),e.forEach(i=>{var s;return(s=i.preConstruct)==null?void 0:s.call(i)}),t&&e.forEach(t),e.forEach(i=>{var s;return(s=i.postConstruct)==null?void 0:s.call(i)})}getBeans(){return this.beans}getBean(e){return this.beans[e]}destroy(){if(this.destroyed)return;this.destroyed=!0;const e=this.getBeanInstances();this.beanDestroyComparator&&e.sort(this.beanDestroyComparator),this.destroyBeans(e),this.beans={},this.createdBeans=[]}destroyBean(e){var t;(t=e==null?void 0:e.destroy)==null||t.call(e)}destroyBeans(e){if(e)for(let t=0;t<e.length;t++)this.destroyBean(e[t]);return[]}isDestroyed(){return this.destroyed}},nU=class extends sU{init(e){this.gridId=e.gridId,this.beans.context=this,super.init(e)}destroy(){super.destroy(),ra.__unRegisterGridModules(this.gridId)}getGridId(){return this.gridId}},ok=(e=>(e[e.Left=0]="Left",e[e.Right=1]="Right",e))(ok||{}),rU=class extends de{constructor(){super(...arguments),this.beanName="dragAndDropService",this.dragSourceAndParamsList=[],this.dropTargets=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.dragService=e.dragService,this.mouseEventService=e.mouseEventService,this.environment=e.environment,this.userComponentFactory=e.userComponentFactory}addDragSource(e,t=!1){const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),onDragCancel:this.onDragCancel.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}getDragAndDropImageComponent(){const{dragAndDropImageComp:e}=this;return!e||!e.comp?null:e.comp}removeDragSource(e){const t=this.dragSourceAndParamsList.find(i=>i.dragSource===e);t&&(this.dragService.removeDragSource(t.params),Sn(this.dragSourceAndParamsList,t))}destroy(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0,this.clearDragAndDropProperties(),super.destroy()}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){var i,s;this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),(s=(i=this.dragSource).onDragStarted)==null||s.call(i),this.createDragAndDropImageComponent()}onDragStop(e){var t,i,s;if((i=(t=this.dragSource)==null?void 0:t.onDragStopped)==null||i.call(t),(s=this.lastDropTarget)!=null&&s.onDragStop){const n=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(n)}this.clearDragAndDropProperties()}onDragCancel(){var e,t,i;(t=(e=this.dragSource)==null?void 0:e.onDragCancelled)==null||t.call(e),(i=this.lastDropTarget)!=null&&i.onDragCancel&&this.lastDropTarget.onDragCancel(this.createDropTargetEvent(this.lastDropTarget,this.eventLastTime,null,null,!1)),this.clearDragAndDropProperties()}clearDragAndDropProperties(){this.eventLastTime=null,this.dragging=!1,this.lastDropTarget=void 0,this.dragItem=null,this.dragSource=null,this.removeDragAndDropImageComponent()}onDragging(e,t=!1){var o,a,l,c;const i=this.getHorizontalDirection(e),s=this.getVerticalDirection(e);this.eventLastTime=e,this.positionDragAndDropImageComp(e);const n=this.dropTargets.filter(p=>this.isMouseOnDropTarget(e,p)),r=this.findCurrentDropTarget(e,n);if(r!==this.lastDropTarget){if(this.leaveLastTargetIfExists(e,i,s,t),this.lastDropTarget!==null&&r===null&&((a=(o=this.dragSource)==null?void 0:o.onGridExit)==null||a.call(o,this.dragItem)),this.lastDropTarget===null&&r!==null&&((c=(l=this.dragSource)==null?void 0:l.onGridEnter)==null||c.call(l,this.dragItem)),this.enterDragTargetIfExists(r,e,i,s,t),r&&this.dragAndDropImageComp){const{comp:p,promise:g}=this.dragAndDropImageComp;p?p.setIcon(r.getIconName?r.getIconName():null):g.then(f=>{f&&f.setIcon(r.getIconName?r.getIconName():null)})}this.lastDropTarget=r}else if(r&&r.onDragging){const p=this.createDropTargetEvent(r,e,i,s,t);r.onDragging(p)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(const i of t){const{width:s,height:n,left:r,right:o,top:a,bottom:l}=i.getBoundingClientRect();if(s===0||n===0)return!1;const c=e.clientX>=r&&e.clientX<o,p=e.clientY>=a&&e.clientY<l;if(!c||!p)return!1}return!0}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let s=!1;for(const o of i)if(this.allContainersIntersect(e,o)){s=!0;break}const{eElement:n,type:r}=this.dragSource;return t.targetContainsSource&&!t.getContainer().contains(n)?!1:s&&t.isInterestedIn(r,n)}findCurrentDropTarget(e,t){const i=t.length;if(i===0)return null;if(i===1)return t[0];const n=wf(this.gos).elementsFromPoint(e.clientX,e.clientY);for(const r of n)for(const o of t)if(fW(this.getAllContainersFromDropTarget(o)).indexOf(r)!==-1)return o;return null}enterDragTargetIfExists(e,t,i,s,n){if(e&&e.onDragEnter){const r=this.createDropTargetEvent(e,t,i,s,n);e.onDragEnter(r)}}leaveLastTargetIfExists(e,t,i,s){if(!this.lastDropTarget)return;if(this.lastDropTarget.onDragLeave){const r=this.createDropTargetEvent(this.lastDropTarget,e,t,i,s);this.lastDropTarget.onDragLeave(r)}const n=this.getDragAndDropImageComponent();n&&n.setIcon(null)}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===e.getContainer())||null}isDropZoneWithinThisGrid(e){const i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:s}=e;return i.contains(s)}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?0:1}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?0:1}createDropTargetEvent(e,t,i,s,n){const r=e.getContainer(),o=r.getBoundingClientRect(),{dragItem:a,dragSource:l}=this,c=t.clientX-o.left,p=t.clientY-o.top;return this.gos.addGridCommonParams({event:t,x:c,y:p,vDirection:s,hDirection:i,dragSource:l,fromNudge:n,dragItem:a,dropZoneTarget:r})}positionDragAndDropImageComp(e){const t=this.getDragAndDropImageComponent();if(!t)return;const i=t.getGui(),n=i.getBoundingClientRect().height,r=rj()-2,o=oj()-2;if(!i.offsetParent)return;const l=$F(i.offsetParent),{clientY:c,clientX:p}=e;let g=c-l.top-n/2,f=p-l.left-10;const y=Wi(this.gos),C=y.defaultView||window,x=C.pageYOffset||y.documentElement.scrollTop,M=C.pageXOffset||y.documentElement.scrollLeft;r>0&&f+i.clientWidth>r+M&&(f=r+M-i.clientWidth),f<0&&(f=0),o>0&&g+i.clientHeight>o+x&&(g=o+x-i.clientHeight),g<0&&(g=0),i.style.left=`${f}px`,i.style.top=`${g}px`}removeDragAndDropImageComponent(){if(this.dragAndDropImageComp){const{comp:e}=this.dragAndDropImageComp;if(e){const t=e.getGui();this.dragAndDropImageParent&&this.dragAndDropImageParent.removeChild(t),this.destroyBean(e)}}this.dragAndDropImageComp=null}createDragAndDropImageComponent(){const{dragSource:e}=this;if(!e)return;const i=this.userComponentFactory.getDragAndDropImageCompDetails({dragSource:e}).newAgStackInstance();this.dragAndDropImageComp={promise:i},i.then(s=>{!s||!this.isAlive()||(this.processDragAndDropImageComponent(s),this.dragAndDropImageComp.comp=s)})}processDragAndDropImageComponent(e){const{dragSource:t,mouseEventService:i,environment:s}=this;if(!t)return;const n=e.getGui();n.style.setProperty("position","absolute"),n.style.setProperty("z-index","9999"),i.stampTopLevelGridCompWithGridInstance(n),s.applyThemeClasses(n),e.setIcon(null);let{dragItemName:r}=t;v0(r)&&(r=r()),e.setLabel(r||""),n.style.top="20px",n.style.left="20px";const o=Wi(this.gos);let a=null,l=null;try{a=o.fullscreenElement}catch{}finally{a||(a=wf(this.gos));const c=a.querySelector("body");c?l=c:a instanceof ShadowRoot?l=a:a instanceof Document?l=a==null?void 0:a.documentElement:l=a}this.dragAndDropImageParent=l,l?l.appendChild(n):we("Could not find document body, it is needed for drag and drop.")}},oU=class{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=e.scrollAxis.indexOf("x")!==-1,this.scrollVertically=e.scrollAxis.indexOf("y")!==-1,this.scrollByTick=e.scrollByTick!=null?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const s=this.scrollContainer.getBoundingClientRect(),n=this.scrollByTick;this.tickLeft=e.clientX<s.left+n,this.tickRight=e.clientX>s.right-n,this.tickUp=e.clientY<s.top+n&&!i,this.tickDown=e.clientY>s.bottom-n&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){this.tickingInterval===null&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){this.tickCount++;const e=this.tickCount>20?200:this.tickCount>10?80:40;if(this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}},aU=class extends de{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.sortController=e.sortController,this.filterManager=e.filterManager,this.selectionService=e.selectionService,this.mouseEventService=e.mouseEventService,this.ctrlsService=e.ctrlsService,this.funcColsService=e.funcColsService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){xi(this.gos)&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(this,e=>{const t=e.gridBodyCtrl;this.autoScrollService=new oU({scrollContainer:t.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>t.getScrollFeature().getVScrollPosition().top,setVerticalPosition:i=>t.getScrollFeature().setVerticalScrollPosition(i),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===2}getIconName(){return this.gos.get("rowDragManaged")&&this.shouldPreventRowMove()?"notAllowed":"move"}shouldPreventRowMove(){var s;return!!(this.funcColsService.getRowGroupColumns().length||((s=this.filterManager)==null?void 0:s.isAnyFilterPresent())||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=e.dragItem.rowNode;if(this.gos.get("rowDragMultiRow")){const s=[...this.selectionService.getSelectedNodes()].sort((n,r)=>n.rowIndex==null||r.rowIndex==null?0:this.getRowIndexNumber(n)-this.getRowIndexNumber(r));if(s.indexOf(t)!==-1)return s}return[t]}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent("rowDragEnter",e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gos.getDomDataKey()}onEnterOrDragging(e){this.dispatchGridEvent("rowDragMove",e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gos.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const i=this.isFromThisGrid(e),s=this.gos.get("rowDragManaged"),n=e.dragItem.rowNodes;s&&this.shouldPreventRowMove()||(this.gos.get("suppressMoveWhenRowDragging")||!i?this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clientSideRowModel.highlightRowAtPixel(n[0],t):this.moveRows(n,t))}getRowIndexNumber(e){const t=e.getRowIndexString();return parseInt(At(t.split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&t.highlighted===1,s=this.mouseEventService.getNormalisedPosition(e).y,n=e.dragItem.rowNodes;let r=i?1:0;if(this.isFromThisGrid(e))n.forEach(o=>{o.rowTop<s&&(r-=1)}),this.moveRows(n,s,r);else{const o=vp(this.gos);let a=this.clientSideRowModel.getRowIndexAtPixel(s)+1;this.clientSideRowModel.getHighlightPosition(s)===0&&a--,this.clientSideRowModel.updateRowData({add:n.filter(l=>!this.clientSideRowModel.getRowNode((o==null?void 0:o({data:l.data,level:0,rowPinned:l.rowPinned}))??l.data.id)).map(l=>l.data),addIndex:a})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){var n;this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),(n=this.rangeService)==null||n.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer()){we("addRowDropZone - A container target needs to be provided");return}if(this.dragAndDropService.findExternalZone(e)){we("addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");return}let t={getContainer:e.getContainer};e.fromGrid?t=e:(e.onDragEnter&&(t.onDragEnter=s=>{e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",s))}),e.onDragLeave&&(t.onDragLeave=s=>{e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",s))}),e.onDragging&&(t.onDragging=s=>{e.onDragging(this.draggingToRowDragEvent("rowDragMove",s))}),e.onDragStop&&(t.onDragStop=s=>{e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",s))}),e.onDragCancel&&(t.onDragCancel=s=>{e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",s))}));const i={isInterestedIn:s=>s===2,getIconName:()=>"move",external:!0,...t};this.dragAndDropService.addDropTarget(i),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(i))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),s=this.onDragLeave.bind(this),n=this.onDragging.bind(this),r=this.onDragStop.bind(this),o=this.onDragCancel.bind(this);let a;return e?a={getContainer:t,onDragEnter:e.onDragEnter?l=>{i(l),e.onDragEnter(this.draggingToRowDragEvent("rowDragEnter",l))}:i,onDragLeave:e.onDragLeave?l=>{s(l),e.onDragLeave(this.draggingToRowDragEvent("rowDragLeave",l))}:s,onDragging:e.onDragging?l=>{n(l),e.onDragging(this.draggingToRowDragEvent("rowDragMove",l))}:n,onDragStop:e.onDragStop?l=>{r(l),e.onDragStop(this.draggingToRowDragEvent("rowDragEnd",l))}:r,onDragCancel:e.onDragCancel?l=>{o(l),e.onDragCancel(this.draggingToRowDragEvent("rowDragCancel",l))}:o,fromGrid:!0}:a={getContainer:t,onDragEnter:i,onDragLeave:s,onDragging:n,onDragStop:r,onDragCancel:o,fromGrid:!0},a}draggingToRowDragEvent(e,t){const i=this.mouseEventService.getNormalisedPosition(t).y,s=i>this.pageBoundsService.getCurrentPageHeight();let n=-1,r;s||(n=this.rowModel.getRowIndexAtPixel(i),r=this.rowModel.getRow(n));let o;switch(t.vDirection){case 1:o="down";break;case 0:o="up";break;default:o=null;break}return this.gos.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:n,overNode:r,y:i,vDirection:o})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent("rowDragLeave",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&this.clearRowHighlight()}onDragStop(e){this.dispatchGridEvent("rowDragEnd",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}onDragCancel(e){this.dispatchGridEvent("rowDragCancel",e),this.stopDragging(e),this.gos.get("rowDragManaged")&&(this.gos.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&this.dragAndDropService.isDropZoneWithinThisGrid(e)&&this.clearRowHighlight()}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}},lU=class extends de{constructor(){super(...arguments),this.beanName="dragService",this.dragEndFunctions=[],this.dragSources=[]}wireBeans(e){this.mouseEventService=e.mouseEventService}destroy(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0,super.destroy()}removeListener(e){const t=e.dragSource.eElement,i=e.mouseDownListener;if(t.removeEventListener("mousedown",i),e.touchEnabled){const s=e.touchStartListener;t.removeEventListener("touchstart",s,{passive:!0})}}removeDragSource(e){const t=this.dragSources.find(i=>i.dragSource===e);t&&(this.removeListener(t),Sn(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:s,stopPropagationForTouch:n}=e;i.addEventListener("mousedown",t);let r=null;const o=this.gos.get("suppressTouch");s&&!o&&(r=a=>{E0(a.target)||(n&&a.stopPropagation(),this.onTouchStart(e,a))},i.addEventListener("touchstart",r,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:r,touchEnabled:!!s})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const s=l=>this.onTouchMove(l,e.eElement),n=l=>this.onTouchUp(l,e.eElement),r=l=>{l.cancelable&&l.preventDefault()},o=t.target,a=[{target:wf(this.gos),type:"touchmove",listener:r,options:{passive:!1}},{target:o,type:"touchmove",listener:s,options:{passive:!0}},{target:o,type:"touchend",listener:n,options:{passive:!0}},{target:o,type:"touchcancel",listener:n,options:{passive:!0}}];this.addTemporaryEvents(a),e.dragStartPixels===0&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,t.button!==0))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const s=c=>this.onMouseMove(c,e.eElement),n=c=>this.onMouseUp(c,e.eElement),r=c=>c.preventDefault(),o=c=>{c.key===le.ESCAPE&&this.cancelDrag(e.eElement)},a=wf(this.gos),l=[{target:a,type:"mousemove",listener:s},{target:a,type:"mouseup",listener:n},{target:a,type:"contextmenu",listener:r},{target:a,type:"keydown",listener:o}];this.addTemporaryEvents(l),e.dragStartPixels===0&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:i,type:s,listener:n,options:r}=t;i.addEventListener(s,n,r)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:i,type:s,listener:n,options:r}=t;i.removeEventListener(s,n,r)})})}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams,s=Ae(i)?i:4;return ek(e,t,s)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){var s;if(!this.dragging){if(this.isEventNearStartEvent(e,t))return;if(this.dragging=!0,this.eventService.dispatchEvent({type:"dragStarted",target:i}),this.currentDragParams.onDragStart(t),!this.currentDragParams){this.dragging=!1;return}this.currentDragParams.onDragging(t)}(s=this.currentDragParams)==null||s.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);i&&this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){var i;ua()&&((i=Wi(this.gos).getSelection())==null||i.removeAllRanges()),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){const t=this.gos.get("enableCellTextSelection"),i=e.type==="mousemove";return t&&i&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const t=e.target,i=t==null?void 0:t.tagName.toLocaleLowerCase();return!!(i!=null&&i.match("^a$|textarea|input|select|button"))}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:"dragStopped",target:t})),this.resetDragProperties()}cancelDrag(e){var t,i;this.eventService.dispatchEvent({type:"dragCancelled",target:e}),(i=(t=this.currentDragParams)==null?void 0:t.onDragCancel)==null||i.call(t),this.resetDragProperties()}resetDragProperties(){this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(e=>e()),this.dragEndFunctions.length=0}},Jb=class extends di{constructor(e,t,i,s,n,r){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=s,this.dragStartPixels=n,this.suppressVisibilityChange=r,this.dragSource=null}wireBeans(e){this.beans=e}isCustomGui(){return this.customGui!=null}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(ur("rowDrag",this.gos,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gos.get("rowDragManaged")?new uU(this,this.beans,this.rowNode,this.column):new cU(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e,void 0,void 0,!0),this.addDragSource(t)}getSelectedNodes(){if(!this.gos.get("rowDragMultiRow"))return[this.rowNode];const t=this.beans.selectionService.getSelectedNodes();return t.indexOf(this.rowNode)!==-1?t:[this.rowNode]}checkCompatibility(){const e=this.gos.get("rowDragManaged");this.gos.get("treeData")&&e&&we("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gos.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.getGui();this.gos.get("enableCellTextSelection")&&(this.removeMouseDownListener(),this.mouseDownListener=this.addManagedElementListeners(t,{mousedown:s=>{s==null||s.preventDefault()}})[0]);const i=this.localeService.getLocaleTextFunc();this.dragSource={type:2,eElement:t,dragItemName:()=>{var o;const s=this.getDragItem(),n=((o=s.rowNodes)==null?void 0:o.length)||1,r=this.getRowDragText(this.column);return r?r(s,n):n===1?this.cellValueFn():`${n} ${i("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gos.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}destroy(){this.removeDragSource(),this.removeMouseDownListener(),super.destroy()}removeDragSource(){this.dragSource&&(this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}removeMouseDownListener(){this.mouseDownListener&&(this.mouseDownListener(),this.mouseDownListener=void 0)}},ak=class extends de{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let i=!0,s=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),s=v0(this.column.getColDef().rowDrag)),s?(this.parent.setDisplayed(!0,t),this.parent.setVisible(i,t)):(this.parent.setDisplayed(i,t),this.parent.setVisible(!0,t))}}},cU=class extends ak{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this));const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:e}),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gos.get("suppressRowDrag");this.setDisplayedOrVisible(e)}},uU=class extends ak{constructor(e,t,i,s){super(e,i,s),this.beans=t}postConstruct(){const e=this.workOutVisibility.bind(this);this.addManagedListeners(this.beans.eventService,{sortChanged:e,filterChanged:e,columnRowGroupChanged:e,newColumnsLoaded:e}),this.addManagedListeners(this.rowNode,{dataChanged:e,cellChanged:e}),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=t&&t.shouldPreventRowMove(),s=this.gos.get("suppressRowDrag"),n=this.beans.dragAndDropService.hasExternalDropZones(),r=i&&!n||s;this.setDisplayedOrVisible(r)}},hU=new Set(["localEventService","__objectId","sticky","__autoHeights","checkAutoHeightsDebounced"]),am=class Ec{constructor(t){this.rowIndex=null,this.key=null,this.sourceRowIndex=-1,this.childrenMapped={},this.treeNode=null,this.treeNodeFlags=0,this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=Ec.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,i){var r;const s=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const n=this.createDataChangedEvent(t,s,i);(r=this.localEventService)==null||r.dispatchEvent(n)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,i,s){return{type:"dataChanged",node:this,oldData:i,newData:t,update:s}}getRowIndexString(){return this.rowIndex==null?(Ut("Could not find rowIndex, this means tasks are being executed on a rowNode that has been removed from the grid."),null):this.rowPinned==="top"?Ec.ID_PREFIX_TOP_PINNED+this.rowIndex:this.rowPinned==="bottom"?Ec.ID_PREFIX_BOTTOM_PINNED+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new Ec(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,i){var o;const s=Ae(this.id)?this.createDaemonNode():null,n=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(i),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,s);const r=this.createDataChangedEvent(t,n,!1);(o=this.localEventService)==null||o.dispatchEvent(r)}checkRowSelectable(){const t=y0(this.beans.gos);this.setRowSelectable(t?t(this):!0)}setRowSelectable(t,i){if(this.selectable!==t){if(this.selectable=t,this.dispatchRowEvent("selectableChanged"),i)return;if(yh(this.beans.gos)){const n=this.calculateSelectedFromChildren();this.setSelectedParams({newValue:n??!1,source:"selectableChanged"});return}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){var s;const i=vp(this.beans.gos);if(i)if(this.data){const n=((s=this.parent)==null?void 0:s.getRoute())??[];this.id=i({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level,rowPinned:this.rowPinned}),this.id.startsWith(Ec.ID_PREFIX_ROW_GROUP)&&Ut(`Row IDs cannot start with ${Ec.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`)}else this.id=void 0;else this.id=t}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.dispatchRowEvent("topChanged"),this.setDisplayed(t!==null))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setHovered(t){this.hovered=t}isHovered(){return this.hovered}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.dispatchRowEvent("masterChanged"))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.checkRowSelectable(),this.dispatchRowEvent("groupChanged"))}setRowHeight(t,i=!1){this.rowHeight=t,this.rowHeightEstimated=i,this.dispatchRowEvent("heightChanged")}setRowAutoHeight(t,i){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[i.getId()]=t,t!=null&&(this.checkAutoHeightsDebounced==null&&(this.checkAutoHeightsDebounced=Cn(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){var a;let t=!1,i=!0,s=0;const n=this.__autoHeights;if(n==null||(this.beans.visibleColsService.getAllAutoHeightCols().forEach(l=>{let c=n[l.getId()];if(c==null)if(this.beans.columnModel.isColSpanActive()){let p=[];switch(l.getPinned()){case"left":p=this.beans.visibleColsService.getLeftColsForRow(this);break;case"right":p=this.beans.visibleColsService.getRightColsForRow(this);break;case null:p=this.beans.columnViewportService.getColsWithinViewport(this);break}if(p.includes(l)){t=!0;return}c=-1}else{t=!0;return}else i=!1;c>s&&(s=c)}),t)||((i||s<10)&&(s=$c(this.beans.gos,this).height),s==this.rowHeight))return;this.setRowHeight(s);const o=this.beans.rowModel;(a=o.onRowHeightChangedDebounced)==null||a.call(o)}setExpanded(t,i,s){if(this.expanded===t)return;this.expanded=t,this.dispatchRowEvent("expandedChanged");const n={...this.createGlobalRowEvent("rowGroupOpened"),expanded:t,event:i||null};this.beans.rowNodeEventThrottle.dispatchExpanded(n,s),this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gos.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}setDataValue(t,i,s){const r=typeof t!="string"?t:this.beans.columnModel.getCol(t)??this.beans.columnModel.getColDefCol(t),o=this.beans.valueService.getValueForDisplay(r,this);if(this.beans.gos.get("readOnlyEdit"))return this.beans.eventService.dispatchEvent({type:"cellEditRequest",event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:r,colDef:r.getColDef(),data:this.data,node:this,oldValue:o,newValue:i,value:i,source:s}),!1;const a=this.beans.valueService.setValue(this,r,i,s);return this.dispatchCellChangedEvent(r,i,o),this.checkRowSelectable(),a}setGroupValue(t,i){const s=this.beans.columnModel.getCol(t);Pt(this.groupData)&&(this.groupData={});const n=s.getColId(),r=this.groupData[n];r!==i&&(this.groupData[n]=i,this.dispatchCellChangedEvent(s,i,r))}setAggData(t){const i=this.aggData;if(this.aggData=t,this.localEventService){const s=n=>{const r=this.aggData?this.aggData[n]:void 0,o=i?i[n]:void 0;if(r===o)return;const a=this.beans.columnModel.getCol(n);a&&this.dispatchCellChangedEvent(a,r,o)};for(const n in i)s(n);for(const n in t)(!i||!(n in i))&&s(n)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(ya(this.beans.gos)){const s=this.beans.gos.get("treeData"),n=this.beans.gos.get("isServerSideGroup");t=!this.stub&&!this.footer&&(s?!!n&&n(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.dispatchRowEvent("hasChildrenChanged"))}hasChildren(){return this.__hasChildren==null&&this.updateHasChildren(),this.__hasChildren}dispatchCellChangedEvent(t,i,s){var r;const n={type:"cellChanged",node:this,column:t,newValue:i,oldValue:s};(r=this.localEventService)==null||r.dispatchEvent(n)}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return this.footer?!1:this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(i=>i.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){var s;let t=!1,i=!1;if(!((s=this.childrenAfterGroup)!=null&&s.length))return this.selectable?this.selected:null;for(let n=0;n<this.childrenAfterGroup.length;n++){const r=this.childrenAfterGroup[n];let o=r.isSelected();if(!r.selectable){const a=r.calculateSelectedFromChildren();if(a===null)continue;o=a}switch(o){case!0:t=!0;break;case!1:i=!0;break;default:return}}if(!(t&&i))return t?!0:i?!1:this.selectable?this.selected:null}setSelectedInitialValue(t){this.selected=t}dispatchRowEvent(t){var i;(i=this.localEventService)==null||i.dispatchEvent({type:t,node:this})}selectThisNode(t,i,s="api"){const n=!this.selectable&&t,r=this.selected===t;if(n||r)return!1;this.selected=t,this.dispatchRowEvent("rowSelected");const o=this.sibling;return o&&o.footer&&o.localEventService&&o.dispatchRowEvent("rowSelected"),this.beans.eventService.dispatchEvent({...this.createGlobalRowEvent("rowSelected"),event:i||null,source:s}),!0}setSelected(t,i=!1,s="api"){if(typeof s=="boolean"){we("since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.");return}this.setSelectedParams({newValue:t,clearSelection:i,rangeSelect:!1,source:s})}setSelectedParams(t){return this.rowPinned?(we("cannot select pinned rows"),0):this.id===void 0?(we("cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected({...t,nodes:[this.footer?this.sibling:this]})}isRowPinned(){return!!this.rowPinned}addEventListener(t,i){var n;this.localEventService||(this.localEventService=new mp),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.localEventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new w0(this.beans.frameworkOverrides));const s=((n=this.frameworkEventListenerService)==null?void 0:n.wrap(i))??i;this.localEventService.addEventListener(t,s)}removeEventListener(t,i){var n;if(!this.localEventService)return;const s=((n=this.frameworkEventListenerService)==null?void 0:n.unwrap(i))??i;this.localEventService.removeEventListener(t,s),this.localEventService.noRegisteredListenersExist()&&(this.localEventService=null)}onMouseEnter(){this.dispatchRowEvent("mouseEnter")}onMouseLeave(){this.dispatchRowEvent("mouseLeave")}isFullWidthCell(){if(we("since version v32.2.0, rowNode.isFullWidthCell() has been deprecated. Instead check `rowNode.detail` followed by the user provided `isFullWidthRow` grid option."),this.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this}):!1}getRoute(){if(this.level===-1)return[];if(this.key==null)return;const t=[];let i=this;for(;i&&i.key!=null;)t.push(i.key),i=i.parent;return t.reverse()}createFooter(){if(this.sibling)return;const t=new Ec(this.beans);Object.keys(this).forEach(i=>{hU.has(i)||(t[i]=this[i])}),t.footer=!0,t.setRowTop(null),t.setRowIndex(null),t.oldRowTop=null,t.id="rowGroupFooter_"+this.id,t.sibling=this,this.sibling=t}destroyFooter(){this.sibling&&(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.dispatchRowEvent("firstChildChanged"))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.dispatchRowEvent("lastChildChanged"))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.dispatchRowEvent("childIndexChanged"))}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.dispatchRowEvent("displayedChanged"))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.dispatchRowEvent("draggingChanged"))}setHighlighted(t){this.highlighted!==t&&(this.highlighted=t,this.dispatchRowEvent("rowHighlightChanged"))}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.dispatchRowEvent("allChildrenCountChanged"))}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.dispatchRowEvent("rowIndexChanged"))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.dispatchRowEvent("uiLevelChanged"))}};am.ID_PREFIX_ROW_GROUP="row-group-";am.ID_PREFIX_TOP_PINNED="t-";am.ID_PREFIX_BOTTOM_PINNED="b-";am.OBJECT_ID_SEQUENCE=0;var gl=am,dU=class extends de{constructor(){super(...arguments),this.beanName="filterManager",this.advancedFilterModelUpdateQueue=[]}wireBeans(e){this.columnModel=e.columnModel,this.dataTypeService=e.dataTypeService,this.quickFilterService=e.quickFilterService,this.advancedFilterService=e.advancedFilterService,this.columnFilterService=e.columnFilterService}postConstruct(){const e=this.refreshFiltersForAggregations.bind(this),t=this.updateAdvancedFilterColumns.bind(this);this.addManagedEventListeners({columnValueChanged:e,columnPivotChanged:e,columnPivotModeChanged:e,newColumnsLoaded:t,columnVisible:t,advancedFilterEnabledChanged:({enabled:i})=>this.onAdvancedFilterEnabledChanged(i),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",i=>this.setAdvancedFilterModel(i.currentValue)),this.quickFilterService&&this.addManagedListeners(this.quickFilterService,{quickFilterChanged:()=>this.onFilterChanged({source:"quickFilter"})})}isExternalFilterPresentCallback(){const e=this.gos.getCallback("isExternalFilterPresent");return typeof e=="function"?e({}):!1}doesExternalFilterPass(e){const t=this.gos.get("doesExternalFilterPass");return typeof t=="function"?t(e):!1}setFilterModel(e,t="api"){var i;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}(i=this.columnFilterService)==null||i.setFilterModel(e,t)}getFilterModel(){var e;return((e=this.columnFilterService)==null?void 0:e.getFilterModel())??{}}isColumnFilterPresent(){var e;return!!((e=this.columnFilterService)!=null&&e.isColumnFilterPresent())}isAggregateFilterPresent(){var e;return!!((e=this.columnFilterService)!=null&&e.isAggregateFilterPresent())}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var t,i;e?(t=this.columnFilterService)!=null&&t.disableColumnFilters()&&this.onFilterChanged({source:"advancedFilter"}):(i=this.advancedFilterService)!=null&&i.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return!!((e=this.advancedFilterService)!=null&&e.isEnabled())}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}resetQuickFilterCache(){var e;(e=this.quickFilterService)==null||e.resetQuickFilterCache()}refreshFiltersForAggregations(){Wb(this.gos)&&this.onFilterChanged()}onFilterChanged(e={}){const{source:t,additionalEventAttributes:i,columns:s=[]}=e;this.externalFilterPresent=this.isExternalFilterPresentCallback(),(this.columnFilterService?this.columnFilterService.updateBeforeFilterChanged(e):Vi.resolve()).then(()=>{var r;const n={source:t,type:"filterChanged",columns:s};i&&mn(n,i),this.eventService.dispatchEvent(n),(r=this.columnFilterService)==null||r.updateAfterFilterChanged()})}isSuppressFlashingCellsBecauseFiltering(){var e;return!!((e=this.columnFilterService)!=null&&e.isSuppressFlashingCellsBecauseFiltering())}isQuickFilterPresent(){var e;return!!((e=this.quickFilterService)!=null&&e.isQuickFilterPresent())}updateAggFiltering(){this.aggFiltering=!!Wb(this.gos)}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&this.shouldApplyQuickFilterAfterAgg()}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!this.shouldApplyQuickFilterAfterAgg()}shouldApplyQuickFilterAfterAgg(){return(this.aggFiltering||this.columnModel.isPivotMode())&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.columnFilterService.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.columnFilterService.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}isFilterActive(e){var t;return!!((t=this.columnFilterService)!=null&&t.isFilterActive(e))}getOrCreateFilterWrapper(e){var t;return((t=this.columnFilterService)==null?void 0:t.getOrCreateFilterWrapper(e))??null}getDefaultFloatingFilter(e){return this.columnFilterService.getDefaultFloatingFilter(e)}createFilterParams(e,t){return this.columnFilterService.createFilterParams(e,t)}isFilterAllowed(e){var t;return this.isAdvancedFilterEnabled()?!1:!!((t=this.columnFilterService)!=null&&t.isFilterAllowed(e))}getFloatingFilterCompDetails(e,t){var i;return(i=this.columnFilterService)==null?void 0:i.getFloatingFilterCompDetails(e,t)}getCurrentFloatingFilterParentModel(e){var t;return(t=this.columnFilterService)==null?void 0:t.getCurrentFloatingFilterParentModel(e)}destroyFilter(e,t="api"){var i;(i=this.columnFilterService)==null||i.destroyFilter(e,t)}areFilterCompsDifferent(e,t){var i;return!!((i=this.columnFilterService)!=null&&i.areFilterCompsDifferent(e,t))}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){var t;if(this.isAdvancedFilterEnabled()){if((t=this.dataTypeService)!=null&&t.isPendingInference()){this.advancedFilterModelUpdateQueue.push(e);return}this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}toggleAdvancedFilterBuilder(e,t){this.isAdvancedFilterEnabled()&&this.advancedFilterService.getCtrl().toggleFilterBuilder({source:t,force:e})}updateAdvancedFilterColumns(){this.isAdvancedFilterEnabled()&&this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){var e;return this.isAdvancedFilterEnabled()?!1:!!((e=this.columnFilterService)!=null&&e.hasFloatingFilters())}getFilterInstance(e,t){var i;if(this.isAdvancedFilterEnabled()){this.warnAdvancedFilters();return}return(i=this.columnFilterService)==null?void 0:i.getFilterInstance(e,t)}getColumnFilterInstance(e){var t;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve(void 0)):((t=this.columnFilterService)==null?void 0:t.getColumnFilterInstance(e))??Promise.resolve(void 0)}warnAdvancedFilters(){we("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){var t;(t=this.advancedFilterService)==null||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){var t;return(t=this.columnFilterService)==null?void 0:t.getColumnFilterModel(e)}setColumnFilterModel(e,t){var i;return this.isAdvancedFilterEnabled()?(this.warnAdvancedFilters(),Promise.resolve()):((i=this.columnFilterService)==null?void 0:i.setColumnFilterModel(e,t))??Promise.resolve()}setColDefPropertiesForDataType(e,t,i){var s;(s=this.columnFilterService)==null||s.setColDefPropertiesForDataType(e,t,i)}},pU=class extends di{constructor(e,t){super('<div class="ag-filter"></div>'),this.column=e,this.source=t,this.filterWrapper=null}wireBeans(e){this.filterManager=e.filterManager,this.columnModel=e.columnModel}postConstruct(){this.createFilter(!0),this.addManagedEventListeners({filterDestroyed:this.onFilterDestroyed.bind(this)})}hasFilter(){return!!this.filterWrapper}getFilter(){var e;return((e=this.filterWrapper)==null?void 0:e.filterPromise)??null}afterInit(){var e,t;return((t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null?void 0:t.then(()=>{}))??Vi.resolve()}afterGuiAttached(e){var t,i;(i=(t=this.filterWrapper)==null?void 0:t.filterPromise)==null||i.then(s=>{var n;(n=s==null?void 0:s.afterGuiAttached)==null||n.call(s,e)})}afterGuiDetached(){var e,t;(t=(e=this.filterWrapper)==null?void 0:e.filterPromise)==null||t.then(i=>{var s;(s=i==null?void 0:i.afterGuiDetached)==null||s.call(i)})}createFilter(e){var s,n;const{column:t,source:i}=this;this.filterWrapper=((s=this.filterManager)==null?void 0:s.getOrCreateFilterWrapper(t))??null,(n=this.filterWrapper)!=null&&n.filterPromise&&this.filterWrapper.filterPromise.then(r=>{const o=r.getGui();Ae(o)||we(`getGui method from filter returned ${o}; it should be a DOM element.`),this.appendChild(o),e&&this.eventService.dispatchEvent({type:"filterOpened",column:t,source:i,eGui:this.getGui()})})}onFilterDestroyed(e){(e.source==="api"||e.source==="paramsUpdated")&&e.column.getId()===this.column.getId()&&this.columnModel.getColDefCol(this.column)&&(pr(this.getGui()),this.createFilter())}destroy(){this.filterWrapper=null,super.destroy()}},lk="ag-resizer-wrapper",xc=(e,t)=>`<div data-ref="${e}Resizer" class="ag-resizer ag-resizer-${t}"></div>`,gU=`<div class="${lk}">
        ${xc("eTopLeft","topLeft")}
        ${xc("eTop","top")}
        ${xc("eTopRight","topRight")}
        ${xc("eRight","right")}
        ${xc("eBottomRight","bottomRight")}
        ${xc("eBottom","bottom")}
        ${xc("eBottomLeft","bottomLeft")}
        ${xc("eLeft","left")}
    </div>`,fU=class extends de{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}wireBeans(e){this.popupService=e.popupService,this.resizeObserverService=e.resizeObserverService,this.dragService=e.dragService}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,s=e/2-this.getHeight()/2;this.offsetElement(i,s)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:s,minHeight:n,height:r,x:o,y:a}=this.config;this.offsetParent||this.setOffsetParent();let l=0,c=0;const p=ha(this.element);if(p){const g=this.findBoundaryElement(),f=window.getComputedStyle(g);if(f.minWidth!=null){const y=g.offsetWidth-this.element.offsetWidth;c=parseInt(f.minWidth,10)-y}if(f.minHeight!=null){const y=g.offsetHeight-this.element.offsetHeight;l=parseInt(f.minHeight,10)-y}}if(this.minHeight=n||l,this.minWidth=i||c,s&&this.setWidth(s),r&&this.setHeight(r),(!s||!r)&&this.refreshSize(),e)this.center();else if(o||a)this.offsetElement(o,a);else if(p&&t){let g=this.boundaryEl,f=!0;if(g||(g=this.findBoundaryElement(),f=!1),g){const y=parseFloat(g.style.top),C=parseFloat(g.style.left);f?this.offsetElement(isNaN(C)?0:C,isNaN(y)?0:y):this.setPosition(C,y)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),typeof e=="boolean"){if(e===!1)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const s=!!e[t],n=this.getResizerElement(t),r={dragStartPixels:0,eElement:n,onDragStart:o=>this.onResizeStart(o,t),onDragging:this.onResize.bind(this),onDragStop:o=>this.onResizeEnd(o,t)};(s||!this.isAlive()&&!s)&&(s?(this.dragService.addDragSource(r),this.resizeListeners.push(r),n.style.pointerEvents="all"):n.style.pointerEvents="none",this.resizable[t]=s)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;t!==-1&&(this.element.style.width=`${t}px`),e!==-1&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)Jg(i,e),e=YF(i),s=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const n=this.getAvailableHeight();n&&e>n&&(e=n)}this.getHeight()!==e&&(s?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?Jg(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height=typeof e=="number"?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const s=this.element.getBoundingClientRect(),n=this.offsetParent.getBoundingClientRect(),r=e?this.position.y:s.top,o=e?0:n.top;let a=0;if(t){const c=this.element.parentElement;if(c){const{bottom:p}=c.getBoundingClientRect();a=p-s.bottom}}return i+o-r-a}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let s=!1;if(typeof e=="string"&&e.indexOf("%")!==-1)To(t,e),e=Uy(t),s=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:n}=this.offsetParent,r=i?this.position.x:this.element.getBoundingClientRect().left;n&&e+r>n&&(e=n-r)}this.getWidth()!==e&&(s?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?To(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width=typeof e=="number"?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:i}=this.config,s=i?this.boundaryEl:this.element;s&&(this.popupService.positionPopup({ePopup:s,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(s.style.left),parseFloat(s.style.top)))}constrainSizeToAvailableHeight(e){if(!this.config.forcePopupParentAsOffsetParent)return;const t=()=>{const i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)};e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),t):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:s,anywhereWithin:n,topBuffer:r}=e,o=t.clientX-this.dragStartPosition.x,a=t.clientY-this.dragStartPosition.y,l=this.shouldSkipX(t,!!i,!!n,o)?0:o,c=this.shouldSkipY(t,!!s,r,a)?0:a;return{movementX:l,movementY:c}}shouldSkipX(e,t,i,s){const n=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.x:n.left;let l=a<=0&&r.left>=e.clientX||r.right<=e.clientX&&r.right<=o.right;return l?!0:(t?l=s<0&&e.clientX>a+r.left||s>0&&e.clientX<a+r.left:i?l=s<0&&e.clientX>o.right||s>0&&e.clientX<a+r.left:l=s<0&&e.clientX>o.right||s>0&&e.clientX<o.right,l)}shouldSkipY(e,t,i=0,s){const n=this.element.getBoundingClientRect(),r=this.offsetParent.getBoundingClientRect(),o=this.boundaryEl.getBoundingClientRect(),a=this.config.popup?this.position.y:n.top;let l=a<=0&&r.top>=e.clientY||r.bottom<=e.clientY&&r.bottom<=o.bottom;return l?!0:(t?l=s<0&&e.clientY>a+r.top+i||s>0&&e.clientY<a+r.top:l=s<0&&e.clientY>o.bottom||s>0&&e.clientY<o.bottom,l)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[data-ref=eTopLeftResizer]")},top:{element:e.querySelector("[data-ref=eTopResizer]")},topRight:{element:e.querySelector("[data-ref=eTopRightResizer]")},right:{element:e.querySelector("[data-ref=eRightResizer]")},bottomRight:{element:e.querySelector("[data-ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[data-ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[data-ref=eBottomLeftResizer]")},left:{element:e.querySelector("[data-ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const i=new DOMParser().parseFromString(gU,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${lk}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:s}=this.config;!i&&!s&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let s=0;s<e.length;s++){const n=e[s],r=!!n.style.flex&&n.style.flex!=="0 0 auto";if(n===this.element)continue;let o=this.minHeight||0,a=this.minWidth||0;if(r){const l=window.getComputedStyle(n);l.minHeight&&(o=parseInt(l.minHeight,10)),l.minWidth&&(a=parseInt(l.minWidth,10))}else o=n.offsetHeight,a=n.offsetWidth;t+=o,i+=a}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let s=0;s<i.length;s++){const n=i[s];n!==t&&(e?n.style.height=`${n.offsetHeight}px`:n.style.width=`${n.offsetWidth}px`,n.style.flex="0 0 auto",n===this.element&&(t=i[s+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:s,isRight:n,isBottom:r,isLeft:o}=this.currentResizer,a=n||o,l=r||s,{movementX:c,movementY:p}=this.calculateMouseMovement({e,isLeft:o,isTop:s}),g=this.position.x,f=this.position.y;let y=0,C=0;if(a&&c){const x=o?-1:1,M=this.getWidth(),b=M+c*x;let R=!1;o&&(y=M-b,(g+y<=0||b<=this.minWidth)&&(R=!0,y=0)),R||this.setWidth(b)}if(l&&p){const x=s?-1:1,M=this.getHeight(),b=M+p*x;let R=!1;s?(C=M-b,(f+C<=0||b<=this.minHeight)&&(R=!0,C=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&M<b&&this.getMinSizeOfSiblings().height+b>this.element.parentElement.offsetHeight&&(R=!0),R||this.setHeight(b)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&y||C)&&this.offsetElement(g+y,f+C)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchLocalEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let s;this.config.calculateTopBuffer&&(s=this.config.calculateTopBuffer());const{movementX:n,movementY:r}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:s});this.offsetElement(t+n,i+r),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.config.forcePopupParentAsOffsetParent?this.offsetParent=this.popupService.getPopupParent():this.offsetParent=this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if(window.getComputedStyle(e).position!=="static")return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}},ck=class uk extends de{constructor(t,i={}){super(),this.eFocusableElement=t,this.callbacks=i,this.callbacks={shouldStopEventPropagation:()=>!1,onTabKeyDown:s=>{if(s.defaultPrevented)return;const n=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,s.shiftKey);n&&(n.focus(),s.preventDefault())},...i}}wireBeans(t){this.focusService=t.focusService}postConstruct(){this.eFocusableElement.classList.add(uk.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedElementListeners(this.eFocusableElement,{focusin:this.callbacks.onFocusIn}),this.callbacks.onFocusOut&&this.addManagedElementListeners(this.eFocusableElement,{focusout:this.callbacks.onFocusOut})}addKeyDownListeners(t){this.addManagedElementListeners(t,{keydown:i=>{if(!(i.defaultPrevented||pl(i))){if(this.callbacks.shouldStopEventPropagation(i)){lp(i);return}i.key===le.TAB?this.callbacks.onTabKeyDown(i):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(i)}}})}};ck.FOCUS_MANAGED_CLASS="ag-focus-managed";var Ih=ck,hk={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};function N0(e,t){return Xy(e)?(e.debounceMs!=null&&we("debounceMs is ignored when apply button is present"),0):e.debounceMs!=null?e.debounceMs:t}function Xy(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}var mU=class extends di{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.eFilterBody=st,this.buttonListeners=[]}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.resetTemplate(),this.createManagedBean(new Ih(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new fU(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i=`
            <form class="ag-filter-wrapper">
                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" data-ref="eFilterBody">
                    ${this.createBodyTemplate()}
                </div>
            </form>`;this.setTemplate(i,this.getAgComponents(),e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=Xy(e),this.resetButtonsPanel(e)}updateParams(e){this.providedFilterParams=e,this.applyActive=Xy(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(e,t){const{buttons:i,readOnly:s}=t??{},{buttons:n,readOnly:r}=e;if(s===r&&Cf(i,n))return;const o=n&&n.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(pr(this.eButtonsPanel),this.buttonListeners.forEach(c=>c()),this.buttonListeners=[]):o&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!o){this.eButtonsPanel&&Ch(this.eButtonsPanel);return}const a=document.createDocumentFragment(),l=c=>{let p,g;switch(c){case"apply":p=this.translate("applyFilter"),g=C=>this.onBtApply(!1,!1,C);break;case"clear":p=this.translate("clearFilter"),g=()=>this.onBtClear();break;case"reset":p=this.translate("resetFilter"),g=()=>this.onBtReset();break;case"cancel":p=this.translate("cancelFilter"),g=C=>{this.onBtCancel(C)};break;default:we("Unknown button type specified");return}const y=Df(`<button
                    type="${c==="apply"?"submit":"button"}"
                    data-ref="${c}FilterButton"
                    class="ag-button ag-standard-button ag-filter-apply-panel-button"
                >${p}
                </button>`);this.buttonListeners.push(...this.addManagedElementListeners(y,{click:g})),a.append(y)};n.forEach(c=>l(c)),this.eButtonsPanel.append(a),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=N0(this.providedFilterParams,this.getDefaultDebounceMs()),t=Cn(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(e!=null?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),t==null||t()};e!=null?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});const{closeOnApply:s}=this.providedFilterParams;s&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const t=e,i=t&&t.key;let s;(i==="Enter"||i==="Space")&&(s={keyboardEvent:t}),this.hidePopup(s),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const i=this.isModelValid(this.getModelFromUi()),s=this.queryForHtmlElement('[data-ref="applyFilterButton"]');s&&Rf(s,!i)}e&&!t||t==="immediately"?this.onBtApply(e):(!this.applyActive&&!t||t==="debounce")&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e==null?void 0:e.container)}refreshFilterResizer(e){if(!this.positionableFeature||e==="toolPanel")return;const t=e==="floatingFilter"||e==="columnFilter",{positionableFeature:i,gos:s}=this;t?(i.restoreLastSize(),i.setResizable(s.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}refresh(e){const t=this.providedFilterParams;return this.providedFilterParams=e,this.resetButtonsPanel(e,t),!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,hk[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}},vU=class extends P0{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedEventListeners({checkboxChanged:this.onChange.bind(this)})}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}},yU=class extends di{constructor(e="default",t=!1){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.unFocusable=t,this.activeClass="ag-active-item",this.options=[],this.itemEls=[]}postConstruct(){const e=this.getGui();this.addManagedElementListeners(e,{mouseleave:()=>this.clearHighlighted()}),!this.unFocusable&&this.addManagedElementListeners(e,{keydown:this.handleKeyDown.bind(this)})}handleKeyDown(e){const t=e.key;switch(t){case le.ENTER:if(!this.highlightedEl)this.setValue(this.getValue());else{const i=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(i)}break;case le.DOWN:case le.UP:e.preventDefault(),this.navigate(t);break;case le.PAGE_DOWN:case le.PAGE_UP:case le.PAGE_HOME:case le.PAGE_END:e.preventDefault(),this.navigateToPage(t);break}}navigate(e){const t=e===le.DOWN;let i;if(!this.highlightedEl)i=this.itemEls[t?0:this.itemEls.length-1];else{let n=this.itemEls.indexOf(this.highlightedEl)+(t?1:-1);n=Math.min(Math.max(n,0),this.itemEls.length-1),i=this.itemEls[n]}this.highlightItem(i)}navigateToPage(e){if(!this.highlightedEl||this.itemEls.length===0)return;const t=this.itemEls.indexOf(this.highlightedEl),i=this.options.length-1,s=this.itemEls[0].clientHeight,n=Math.floor(this.getGui().clientHeight/s);let r=-1;e===le.PAGE_HOME?r=0:e===le.PAGE_END?r=i:e===le.PAGE_DOWN?r=Math.min(t+n,i):e===le.PAGE_UP&&(r=Math.max(t-n,0)),r!==-1&&this.highlightItem(this.itemEls[r])}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:i}=e,s=i||t;return this.options.push({value:t,text:s}),this.renderOption(t,s),this.updateIndices(),this}clearOptions(){this.options=[],this.reset(!0),this.itemEls.forEach(e=>{Ch(e)}),this.itemEls=[]}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,i)=>{XW(t,i+1),ZW(t,e.length)})}renderOption(e,t){const i=Wi(this.gos),s=i.createElement("div");Fo(s,"option"),s.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`);const n=i.createElement("span");s.appendChild(n),n.textContent=t,this.unFocusable||(s.tabIndex=-1),this.itemEls.push(s),this.addManagedListeners(s,{mouseover:()=>this.highlightItem(s),mousedown:r=>{r.preventDefault(),r.stopPropagation(),this.setValue(e)}}),this.createManagedBean(new Cp({getTooltipValue:()=>t,getGui:()=>s,getLocation:()=>"UNKNOWN",shouldDisplayTooltip:()=>n.scrollWidth>n.clientWidth})),this.getGui().appendChild(s)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(e==null)return this.reset(t),this;const i=this.options.findIndex(s=>s.value===e);if(i!==-1){const s=this.options[i];this.value=s.value,this.displayValue=s.text,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);e!==-1&&this.highlightItem(this.itemEls[e])}reset(e){this.value=null,this.displayValue=null,this.clearHighlighted(),e||this.fireChangeEvent()}highlightItem(e){if(!ha(e))return;this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(this.activeClass),jy(this.highlightedEl,!0);const t=this.getGui(),{scrollTop:i,clientHeight:s}=t,{offsetTop:n,offsetHeight:r}=e;(n+r>i+s||n<i)&&this.highlightedEl.scrollIntoView({block:"nearest"}),this.unFocusable||this.highlightedEl.focus()}clearHighlighted(){!this.highlightedEl||!ha(this.highlightedEl)||(this.highlightedEl.classList.remove(this.activeClass),jy(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchLocalEvent({type:"fieldValueChanged"}),this.fireItemSelected()}fireItemSelected(){this.dispatchLocalEvent({type:"selectedItem"})}},CU=class extends tk{constructor(e){if(super(e,(e==null?void 0:e.template)||`
            <div class="ag-picker-field" role="presentation">
                <div data-ref="eLabel"></div>
                <div data-ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">
                    <div data-ref="eDisplayField" class="ag-picker-field-display"></div>
                    <div data-ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>
                </div>
            </div>`,(e==null?void 0:e.agComponents)||[],e==null?void 0:e.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.eLabel=st,this.eWrapper=st,this.eDisplayField=st,this.eIcon=st,this.ariaRole=e==null?void 0:e.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:s,minPickerWidth:n,maxPickerWidth:r}=e;t!=null&&(this.pickerGap=t),this.variableWidth=!!s,i!=null&&this.setPickerMaxHeight(i),n!=null&&this.setPickerMinWidth(n),r!=null&&this.setPickerMaxWidth(r)}wireBeans(e){this.popupService=e.popupService}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedElementListeners(t,{keydown:this.onKeyDown.bind(this)}),this.addManagedElementListeners(this.eLabel,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)}),this.addManagedElementListeners(this.eWrapper,{mousedown:this.onLabelOrWrapperMouseDown.bind(this)});const{pickerIcon:i,inputWidth:s}=this.config;if(i){const n=ur(i,this.gos);n&&this.eIcon.appendChild(n)}s!=null&&this.setInputWidth(s)}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gos.get("tabIndex").toString()),Wy(e,!1),this.ariaRole&&Fo(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&(e==null?void 0:e.target)===t)return;e.preventDefault(),this.getFocusableElement().focus()}if(this.skipClick){this.skipClick=!1;return}this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case le.UP:case le.DOWN:case le.ENTER:case le.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case le.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker());break}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.pickerComponent.getGui();this.gos.get("suppressScrollWhenPopupsAreOpen")||([this.destroyMouseWheelFunc]=this.addManagedEventListeners({bodyScroll:()=>{this.hidePicker()}}));const t=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:i,pickerAriaLabelValue:s,modalPicker:n=!0}=this.config,r={modal:n,eChild:e,closeOnEsc:!0,closedCallback:()=>{const f=SF(this.gos);this.beforeHidePicker(),f&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:t(i,s),anchorToElement:this.eWrapper};e.style.position="absolute";const o=this.popupService.addPopup(r),{maxPickerHeight:a,minPickerWidth:l,maxPickerWidth:c,variableWidth:p}=this;p?(l&&(e.style.minWidth=l),e.style.width=L0(Uy(this.eWrapper)),c&&(e.style.maxWidth=c)):Zy(e,c??Uy(this.eWrapper));const g=a??`${I0(this.popupService.getPopupParent())}px`;return e.style.setProperty("max-height",g),this.alignPickerToComponent(),o.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gos.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){if(!this.isAlive())return;const t=this.getAriaElement();Wy(t,e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e)}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;(t=this.pickerComponent)!=null&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){this.pickerComponent&&this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return Zy(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return typeof e=="number"&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return typeof e=="number"&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}},O0=class extends CU{constructor(e){super({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox",...e})}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gos.get("tabIndex");const{options:e,value:t,placeholder:i}=this.config;e!=null&&this.addOptions(e),t!=null&&this.setValue(t,!0),i&&t==null&&(this.eDisplayField.textContent=i),this.addManagedElementListeners(this.eWrapper,{focusout:this.onWrapperFocusOut.bind(this)})}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}createListComponent(){this.listComponent=this.createBean(new yU("select",!0)),this.listComponent.setParentComponent(this);const e=this.listComponent.getAriaElement(),t=`ag-select-list-${this.listComponent.getCompId()}`;e.setAttribute("id",t),sj(this.getAriaElement(),e),this.listComponent.addManagedListeners(this.listComponent,{selectedItem:()=>{this.hidePicker(),this.dispatchLocalEvent({type:"selectedItem"})}}),this.listComponent.addManagedListeners(this.listComponent,{fieldValueChanged:()=>{this.listComponent&&(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())}})}createPickerComponent(){return this.listComponent}onKeyDown(e){var i;const{key:t}=e;switch(t===le.TAB&&this.hidePicker(),t){case le.ENTER:case le.UP:case le.DOWN:case le.PAGE_UP:case le.PAGE_DOWN:case le.PAGE_HOME:case le.PAGE_END:e.preventDefault(),this.isPickerDisplayed?(i=this.listComponent)==null||i.handleKeyDown(e):super.onKeyDown(e);break;case le.ESCAPE:super.onKeyDown(e);break;case le.SPACE:this.isPickerDisplayed?e.preventDefault():super.onKeyDown(e);break}}showPicker(){this.listComponent&&(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){return this.listComponent.addOption(e),this}clearOptions(){var e;return(e=this.listComponent)==null||e.clearOptions(),this}setValue(e,t,i){if(this.value===e||!this.listComponent)return this;if(i||this.listComponent.setValue(e,!0),this.listComponent.getValue()===this.getValue())return this;let n=this.listComponent.getDisplayValue();return n==null&&this.config.placeholder&&(n=this.config.placeholder),this.eDisplayField.textContent=n,this.setTooltip({newTooltipText:n??null,shouldDisplayTooltip:()=>this.eDisplayField.scrollWidth>this.eDisplayField.clientWidth}),super.setValue(e,t)}destroy(){this.listComponent&&(this.listComponent=this.destroyBean(this.listComponent)),super.destroy()}},SU={selector:"AG-SELECT",component:O0},dk=class{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){this.filterOptions&&this.filterOptions.forEach(e=>{if(typeof e=="string")return;const t=[["displayKey"],["displayName"],["predicate","test"]],i=s=>s.some(n=>e[n]!=null)?!0:(we(`ignoring FilterOptionDef as it doesn't contain one of '${s}'`),!1);if(!t.every(i)){this.filterOptions=this.filterOptions.filter(s=>s===e)||[];return}this.customFilterOptions[e.displayKey]=e})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const t=this.filterOptions[0];typeof t=="string"?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:we("invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else we("no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}},pk=class extends mU{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(e){const t=this.optionsFactory.getCustomOption(e);if(t){const{numberOfInputs:s}=t;return s??1}return e&&["empty","notBlank","blank"].indexOf(e)>=0?0:e==="inRange"?2:1}onFloatingFilterChanged(e,t){this.setTypeFromFloatingFilter(e),this.setValueFromFloatingFilter(t),this.onUiChanged(!0)}setTypeFromFloatingFilter(e){this.eTypes.forEach((t,i)=>{i===0?t.setValue(e,!0):t.setValue(this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const e=this.getUiCompleteConditions();return e.length===0?null:this.maxNumConditions>1&&e.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),conditions:e}:e[0]}getConditionTypes(){return this.eTypes.map(e=>e.getValue())}getConditionType(e){return this.eTypes[e].getValue()}getJoinOperator(){return this.eJoinOperatorsOr.length===0?this.defaultJoinOperator:this.eJoinOperatorsOr[0].getValue()===!0?"OR":"AND"}areModelsEqual(e,t){if(!e&&!t)return!0;if(!e&&t||e&&!t)return!1;const i=!e.operator,s=!t.operator;if(!i&&s||i&&!s)return!1;let r;if(i){const o=e,a=t;r=this.areSimpleModelsEqual(o,a)}else{const o=e,a=t;r=o.operator===a.operator&&Jc(o.conditions,a.conditions,(l,c)=>this.areSimpleModelsEqual(l,c))}return r}shouldRefresh(e){var r;const t=this.getModel(),i=t?t.conditions??[t]:null,s=((r=e.filterOptions)==null?void 0:r.map(o=>typeof o=="string"?o:o.displayKey))??this.getDefaultFilterOptions();return!(!(!i||i.every(o=>s.find(a=>a===o.type)!==void 0))||typeof e.maxNumConditions=="number"&&i&&i.length>e.maxNumConditions)}refresh(e){return!this.shouldRefresh(e)||!super.refresh(e)?!1:(this.setParams(e),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),!0)}setModelIntoUi(e){if(e.operator){const i=e;let s=i.conditions;s==null&&(s=[],we("Filter model is missing 'conditions'"));const n=this.validateAndUpdateConditions(s),r=this.getNumConditions();if(n<r)this.removeConditionsAndOperators(n);else if(n>r)for(let a=r;a<n;a++)this.createJoinOperatorPanel(),this.createOption();const o=i.operator==="OR";this.eJoinOperatorsAnd.forEach(a=>a.setValue(!o,!0)),this.eJoinOperatorsOr.forEach(a=>a.setValue(o,!0)),s.forEach((a,l)=>{this.eTypes[l].setValue(a.type,!0),this.setConditionIntoUi(a,l)})}else{const i=e;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(i.type,!0),this.setConditionIntoUi(i,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),Vi.resolve()}validateAndUpdateConditions(e){let t=e.length;return t>this.maxNumConditions&&(e.splice(this.maxNumConditions),we('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),t=this.maxNumConditions),t}doesFilterPass(e){const t=this.getModel();if(t==null)return!0;const{operator:i}=t,s=[];if(i){const r=t;s.push(...r.conditions??[])}else s.push(t);return s[i&&i==="OR"?"some":"every"](r=>this.individualConditionPasses(e,r))}setParams(e){super.setParams(e),this.setNumConditions(e),this.defaultJoinOperator=this.getDefaultJoinOperator(e.defaultJoinOperator),this.filterPlaceholder=e.filterPlaceholder,this.optionsFactory=new dk,this.optionsFactory.init(e,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(e){this.maxNumConditions=e.maxNumConditions??2,this.maxNumConditions<1&&(we('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=e.numAlwaysVisibleConditions??1,this.numAlwaysVisibleConditions<1&&(we('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(we('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const e=this.createManagedBean(new O0);this.eTypes.push(e),e.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(e.getGui());const t=this.createValueElement();this.eConditionBodies.push(t),this.eFilterBody.appendChild(t),this.putOptionsIntoDropdown(e),this.resetType(e);const i=this.getNumConditions()-1;this.forEachPositionInput(i,s=>this.resetInput(s)),this.addChangedListeners(e,i)}createJoinOperatorPanel(){const e=document.createElement("div");this.eJoinOperatorPanels.push(e),e.classList.add("ag-filter-condition");const t=this.createJoinOperator(this.eJoinOperatorsAnd,e,"and"),i=this.createJoinOperator(this.eJoinOperatorsOr,e,"or");this.eFilterBody.appendChild(e);const s=this.eJoinOperatorPanels.length-1,n=this.joinOperatorId++;this.resetJoinOperatorAnd(t,s,n),this.resetJoinOperatorOr(i,s,n),this.isReadOnly()||(t.onValueChange(this.listener),i.onValueChange(this.listener))}createJoinOperator(e,t,i){const s=this.createManagedBean(new vU);return e.push(s),s.addCssClass("ag-filter-condition-operator"),s.addCssClass(`ag-filter-condition-operator-${i}`),t.appendChild(s.getGui()),s}getDefaultJoinOperator(e){return e==="AND"||e==="OR"?e:"AND"}createFilterListOptions(){const e=this.optionsFactory.getFilterOptions();this.filterListOptions=e.map(t=>typeof t=="string"?this.createBoilerplateListOption(t):this.createCustomListOption(t))}putOptionsIntoDropdown(e){this.filterListOptions.forEach(t=>{e.addOption(t)}),e.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(e){return{value:e,text:this.translate(e)}}createCustomListOption(e){const{displayKey:t}=e,i=this.optionsFactory.getCustomOption(e.displayKey);return{value:t,text:i?this.localeService.getLocaleTextFunc()(i.displayKey,i.displayName):this.translate(t)}}createBodyTemplate(){return""}getAgComponents(){return[]}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const e=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,e)}updateNumConditions(){let e=-1,t=!0;for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)?e=i:t=!1;if(this.shouldAddNewConditionAtEnd(t))this.createJoinOperatorPanel(),this.createOption();else{const i=this.lastUiCompletePosition??this.getNumConditions()-2;if(e<i){this.removeConditionsAndOperators(i+1);const s=e+1,n=i-s;n>0&&this.removeConditionsAndOperators(s,n),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=e}updateConditionStatusesAndValues(e,t){this.eTypes.forEach((s,n)=>{const r=this.isConditionDisabled(n,e);s.setDisabled(r||this.filterListOptions.length<=1),n===1&&(Rf(this.eJoinOperatorPanels[0],r),this.eJoinOperatorsAnd[0].setDisabled(r),this.eJoinOperatorsOr[0].setDisabled(r))}),this.eConditionBodies.forEach((s,n)=>{Ni(s,this.isConditionBodyVisible(n))});const i=(t??this.getJoinOperator())==="OR";this.eJoinOperatorsAnd.forEach(s=>{s.setValue(!i,!0)}),this.eJoinOperatorsOr.forEach(s=>{s.setValue(i,!0)}),this.forEachInput((s,n,r,o)=>{this.setElementDisplayed(s,n<o),this.setElementDisabled(s,this.isConditionDisabled(r,e))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(e){return e&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(e,t){if(e>=this.getNumConditions())return;this.removeComponents(this.eTypes,e,t),this.removeElements(this.eConditionBodies,e,t),this.removeValueElements(e,t);const i=Math.max(e-1,0);this.removeElements(this.eJoinOperatorPanels,i,t),this.removeComponents(this.eJoinOperatorsAnd,i,t),this.removeComponents(this.eJoinOperatorsOr,i,t)}removeElements(e,t,i){this.removeItems(e,t,i).forEach(n=>Ch(n))}removeComponents(e,t,i){this.removeItems(e,t,i).forEach(n=>{Ch(n.getGui()),this.destroyBean(n)})}removeItems(e,t,i){return i==null?e.splice(t):e.splice(t,i)}afterGuiAttached(e){if(super.afterGuiAttached(e),this.resetPlaceholder(),!(e!=null&&e.suppressFocus))if(this.isReadOnly())this.eFilterBody.focus();else{const t=this.getInputs(0)[0];if(!t)return;t instanceof oh&&t.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const e=this.getModel();this.resetUiToActiveModel(e);let t=-1,i=-1,s=!1;const n=this.getJoinOperator();for(let o=this.getNumConditions()-1;o>=0;o--)if(this.isConditionUiComplete(o))t===-1&&(t=o,i=o);else{const a=o>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(o-1),l=o<t;(a||l)&&(this.removeConditionsAndOperators(o,1),s=!0,l&&i--)}let r=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),r=!0),this.shouldAddNewConditionAtEnd(i===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),r=!0),r&&this.updateConditionStatusesAndValues(i,n),s&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=i}getPlaceholderText(e,t){let i=this.translate(e);if(v0(this.filterPlaceholder)){const s=this.filterPlaceholder,n=this.eTypes[t].getValue(),r=this.translate(n);i=s({filterOptionKey:n,filterOption:r,placeholder:i})}else typeof this.filterPlaceholder=="string"&&(i=this.filterPlaceholder);return i}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc();this.forEachInput((t,i,s,n)=>{if(!(t instanceof oh))return;const r=i===0&&n>1?"inRangeStart":i===0?"filterOoo":"inRangeEnd",o=i===0&&n>1?e("ariaFilterFromValue","Filter from value"):i===0?e("ariaFilterValue","Filter Value"):e("ariaFilterToValue","Filter to Value");t.setInputPlaceholder(this.getPlaceholderText(r,s)),t.setInputAriaLabel(o)})}setElementValue(e,t,i){e instanceof oh&&e.setValue(t!=null?String(t):null,!0)}setElementDisplayed(e,t){e instanceof di&&Ni(e.getGui(),t)}setElementDisabled(e,t){e instanceof di&&Rf(e.getGui(),t)}attachElementOnChange(e,t){e instanceof oh&&e.onValueChange(t)}forEachInput(e){this.getConditionTypes().forEach((t,i)=>{this.forEachPositionTypeInput(i,t,e)})}forEachPositionInput(e,t){const i=this.getConditionType(e);this.forEachPositionTypeInput(e,i,t)}forEachPositionTypeInput(e,t,i){const s=this.getNumberOfInputs(t),n=this.getInputs(e);for(let r=0;r<n.length;r++){const o=n[r];o!=null&&i(o,r,e,s)}}isConditionDisabled(e,t){return this.isReadOnly()?!0:e===0?!1:e>t+1}isConditionBodyVisible(e){const t=this.getConditionType(e);return this.getNumberOfInputs(t)>0}isConditionUiComplete(e){return!(e>=this.getNumConditions()||this.getConditionType(e)==="empty"||this.getValues(e).some(i=>i==null))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const e=[];for(let t=0;t<this.getNumConditions();t++)this.isConditionUiComplete(t)&&e.push(this.createCondition(t));return e}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let e=this.getNumConditions();e<this.numAlwaysVisibleConditions;e++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(e){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(t=>this.resetType(t)),this.eJoinOperatorsAnd.forEach((t,i)=>this.resetJoinOperatorAnd(t,i,this.joinOperatorId+i)),this.eJoinOperatorsOr.forEach((t,i)=>this.resetJoinOperatorOr(t,i,this.joinOperatorId+i)),this.joinOperatorId++,this.forEachInput(t=>this.resetInput(t)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,e||this.onUiChanged(),Vi.resolve()}resetType(e){const i=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");e.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(i).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("AND"),this.translate("andCondition"),i)}resetJoinOperatorOr(e,t,i){this.resetJoinOperator(e,t,this.isDefaultOperator("OR"),this.translate("orCondition"),i)}resetJoinOperator(e,t,i,s,n){this.updateJoinOperatorDisabled(e.setValue(i,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${n}`).setLabel(s),t)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t)),this.eJoinOperatorsOr.forEach((e,t)=>this.updateJoinOperatorDisabled(e,t))}updateJoinOperatorDisabled(e,t){e.setDisabled(this.isReadOnly()||t>0)}resetInput(e){this.setElementValue(e,null),this.setElementDisabled(e,this.isReadOnly())}setConditionIntoUi(e,t){const i=this.mapValuesFromModel(e);this.forEachInput((s,n,r)=>{r===t&&this.setElementValue(s,i[n]!=null?i[n]:null)})}setValueFromFloatingFilter(e){this.forEachInput((t,i,s)=>{this.setElementValue(t,i===0&&s===0?e:null,!0)})}isDefaultOperator(e){return e===this.defaultJoinOperator}addChangedListeners(e,t){this.isReadOnly()||(e.onValueChange(this.listener),this.forEachPositionInput(t,i=>{this.attachElementOnChange(i,this.listener)}))}individualConditionPasses(e,t){const i=this.getCellValue(e.node),s=this.mapValuesFromModel(t),n=this.optionsFactory.getCustomOption(t.type),r=this.evaluateCustomFilter(n,s,i);return r??(i==null?this.evaluateNullValue(t.type):this.evaluateNonNullValue(s,i,t,e))}evaluateCustomFilter(e,t,i){if(e==null)return;const{predicate:s}=e;if(s!=null&&!t.some(n=>n==null))return s(t,i)}isBlank(e){return e==null||typeof e=="string"&&e.trim().length===0}hasInvalidInputs(){return!1}},gk=class extends pk{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case"equals":if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case"notEqual":if(this.scalarFilterParams.includeBlanksInNotEqual)return!0;break;case"greaterThan":case"greaterThanOrEqual":if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case"lessThan":case"lessThanOrEqual":if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case"inRange":if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case"blank":return!0;case"notBlank":return!1}return!1}evaluateNonNullValue(e,t,i){const s=this.comparator(),n=e[0]!=null?s(e[0],t):0;switch(i.type){case"equals":return n===0;case"notEqual":return n!==0;case"greaterThan":return n>0;case"greaterThanOrEqual":return n>=0;case"lessThan":return n<0;case"lessThanOrEqual":return n<=0;case"inRange":{const r=s(e[1],t);return this.scalarFilterParams.inRangeInclusive?n>=0&&r<=0:n>0&&r<0}case"blank":return this.isBlank(t);case"notBlank":return!this.isBlank(t);default:return we('Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}},wU=65,xU=67,bU=86,MU=68,RU=90,DU=89;function fk(e){var i;return e.altKey||e.ctrlKey||e.metaKey?!1:((i=e.key)==null?void 0:i.length)===1}function eM(e,t,i,s,n){const r=s?s.getColDef().suppressKeyboardEvent:void 0;if(!r)return!1;const o=e.addGridCommonParams({event:t,editing:n,column:s,node:i,data:i.data,colDef:s.getColDef()});return!!(r&&r(o))}function EU(e,t,i,s){const n=s.getDefinition(),r=n&&n.suppressHeaderKeyboardEvent;if(!Ae(r))return!1;const o=e.addGridCommonParams({colDef:n,column:s,headerRowIndex:i,event:t});return!!r(o)}function IU(e){const{keyCode:t}=e;let i;switch(t){case wU:i=le.A;break;case xU:i=le.C;break;case bU:i=le.V;break;case MU:i=le.D;break;case RU:i=le.Z;break;case DU:i=le.Y;break;default:i=e.code}return i}function LU(e,t=!1){return e===le.DELETE?!0:!t&&e===le.BACKSPACE?WF():!1}var Lh=class extends oh{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=Ae(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`),t=i=>{fk(i)&&i.key&&!e.test(i.key)&&i.preventDefault()};this.addManagedListeners(this.eInput,{keydown:t,paste:i=>{var n;const s=(n=i.clipboardData)==null?void 0:n.getData("text");s&&s.split("").some(r=>!e.test(r))&&i.preventDefault()}})}},kC={selector:"AG-INPUT-TEXT-FIELD",component:Lh},_0=class extends Lh{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListeners(this.eInput,{blur:()=>{const n=parseFloat(this.eInput.value),r=isNaN(n)?"":this.normalizeValue(n.toString());this.value!==r&&this.setValue(r)},wheel:this.onWheel.bind(this)}),this.eInput.step="any";const{precision:e,min:t,max:i,step:s}=this.config;typeof e=="number"&&this.setPrecision(e),typeof t=="number"&&this.setMin(t),typeof i=="number"&&this.setMax(i),typeof s=="number"&&this.setStep(s)}onWheel(e){_i(this.gos)===this.eInput&&e.preventDefault()}normalizeValue(e){if(e==="")return"";this.precision!=null&&(e=this.adjustPrecision(e));const t=parseFloat(e);return this.min!=null&&t<this.min?e=this.min.toString():this.max!=null&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(this.precision==null)return e;if(t){const s=parseFloat(e).toFixed(this.precision);return parseFloat(s).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e?this:(this.min=e,Ur(this.eInput,"min",e),this)}setMax(e){return this.max===e?this:(this.max=e,Ur(this.eInput,"max",e),this)}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e?this:(this.step=e,Ur(this.eInput,"step",e),this)}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(Ae(i)){let s=this.isScientificNotation(i);if(s&&this.eInput.validity.valid)return e(i);if(!s){i=this.adjustPrecision(i);const n=this.normalizeValue(i);s=i!=n}if(s)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return typeof e=="string"&&e.includes("e")}},TU={selector:"AG-INPUT-NUMBER-FIELD",component:_0},mk=["equals","notEqual","greaterThan","greaterThanOrEqual","lessThan","lessThanOrEqual","inRange","blank","notBlank"],B0=class{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=e.operator!=null,i=this.localeService.getLocaleTextFunc();if(t){const s=e,r=(s.conditions??[]).map(a=>this.getModelAsString(a)),o=s.operator==="AND"?"andCondition":"orCondition";return r.join(` ${i(o,hk[o])} `)}else{if(e.type==="blank"||e.type==="notBlank")return i(e.type,e.type);{const s=e,n=this.optionsFactory.getCustomOption(s.type),{displayKey:r,displayName:o,numberOfInputs:a}=n||{};return r&&o&&a===0?(i(r,o),o):this.conditionToString(s,n)}}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){return this.valueFormatter?this.valueFormatter(e??null)??"":String(e)}},vk=class extends B0{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:e.filter!=null?this.formatValue(e.filter):`${e.type}`}};function tM(e){const{allowedCharPattern:t}=e??{};return t??null}var AU=class extends gk{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern!==e.allowedCharPattern?!1:super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(s))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new vk(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return mk}setElementValue(e,t,i){const s=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,s)}createValueElement(){const e=tM(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),Fo(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,s){const n=this.createManagedBean(s?new Lh({allowedCharPattern:s}):new _0);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,r)=>{s<r&&t.push(this.processValue(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return e==null||isNaN(e)?null:e}stringToFloat(e){if(typeof e=="number")return e;let t=dl(e);return t!=null&&t.trim()===""&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):t==null||t.trim()==="-"?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValues(e);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{if(!t.getInputElement().validity.valid){e=!0;return}}),e}},yk=["contains","notContains","equals","notEqual","startsWith","endsWith","blank","notBlank"],Ck=class extends B0{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type=="inRange"||i===2?`${e.filter}-${e.filterTo}`:e.filter!=null?`${e.filter}`:`${e.type}`}};function Sk(e){const t=e&&e.trim();return t===""?e:t}var PU=class extends pk{constructor(){super("textFilter"),this.defaultFormatter=e=>e,this.defaultLowercaseFormatter=e=>e==null?null:e.toString().toLowerCase(),this.defaultMatcher=({filterOption:e,value:t,filterText:i})=>{if(i==null)return!1;switch(e){case"contains":return t.indexOf(i)>=0;case"notContains":return t.indexOf(i)<0;case"equals":return t===i;case"notEqual":return t!=i;case"startsWith":return t.indexOf(i)===0;case"endsWith":{const s=t.lastIndexOf(i);return s>=0&&s===t.length-i.length}default:return!1}},this.eValuesFrom=[],this.eValuesTo=[]}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?this.defaultFormatter:this.defaultLowercaseFormatter),this.filterModelFormatter=new Ck(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(we("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:i,filterText:s})=>e(t,i,s)):this.textFilterParams.textMatcher||this.defaultMatcher}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},s=this.getValuesWithSideEffects(e,!0);return s.length>0&&(i.filter=s[0]),s.length>1&&(i.filterTo=s[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,(s,n,r,o)=>{if(n<o){let a=dl(s.getValue());t&&this.textFilterParams.trimInput&&(a=Sk(a)??null,s.setValue(a,!0)),i.push(a)}}),i}getDefaultFilterOptions(){return yk}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),Fo(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const s=this.createManagedBean(new Lh);s.addCssClass(`ag-filter-${i}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:s}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(s))}evaluateNullValue(e){return e?["notEqual","notContains","blank"].indexOf(e)>=0:!1}evaluateNonNullValue(e,t,i,s){const n=e.map(f=>this.formatter(f))||[],r=this.formatter(t),{api:o,colDef:a,column:l,context:c,textFormatter:p}=this.textFilterParams;if(i.type==="blank")return this.isBlank(t);if(i.type==="notBlank")return!this.isBlank(t);const g={api:o,colDef:a,column:l,context:c,node:s.node,data:s.data,filterOption:i.type,value:r,textFormatter:p};return n.some(f=>this.matcher({...g,filterText:f}))}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}};function wk(e){if(typeof e=="number")return e;if(typeof e=="string"){const t=parseInt(e);return isNaN(t)?void 0:t}}function Jo(e,t=Number.MAX_VALUE){return i=>{const s=wk(i);if(!(s==null||s<e||s>t))return s}}function tf(e,t){return e.toString().padStart(t,"0")}function FU(e,t){const i=[];for(let s=e;s<=t;s++)i.push(s);return i}function kU(e,t,i){return typeof e!="number"?"":e.toString().replace(".",i).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${t}`)}function Kr(e,t=!0,i="-"){if(!e)return null;let s=[e.getFullYear(),e.getMonth()+1,e.getDate()].map(n=>tf(n,2)).join(i);return t&&(s+=" "+[e.getHours(),e.getMinutes(),e.getSeconds()].map(n=>tf(n,2)).join(":")),s}var Xx=e=>{if(e>3&&e<21)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function sf(e,t="YYYY-MM-DD"){const i=tf(e.getFullYear(),4),s=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],r={YYYY:()=>i.slice(i.length-4,i.length),YY:()=>i.slice(i.length-2,i.length),Y:()=>`${e.getFullYear()}`,MMMM:()=>s[e.getMonth()],MMM:()=>s[e.getMonth()].slice(0,3),MM:()=>tf(e.getMonth()+1,2),Mo:()=>`${e.getMonth()+1}${Xx(e.getMonth()+1)}`,M:()=>`${e.getMonth()+1}`,Do:()=>`${e.getDate()}${Xx(e.getDate())}`,DD:()=>tf(e.getDate(),2),D:()=>`${e.getDate()}`,dddd:()=>n[e.getDay()],ddd:()=>n[e.getDay()].slice(0,3),dd:()=>n[e.getDay()].slice(0,2),do:()=>`${e.getDay()}${Xx(e.getDay())}`,d:()=>`${e.getDay()}`},o=new RegExp(Object.keys(r).join("|"),"g");return t.replace(o,a=>a in r?r[a]():a)}function Hn(e){if(!e)return null;const[t,i]=e.split(" ");if(!t)return null;const s=t.split("-").map(g=>parseInt(g,10));if(s.filter(g=>!isNaN(g)).length!==3)return null;const[n,r,o]=s,a=new Date(n,r-1,o);if(a.getFullYear()!==n||a.getMonth()!==r-1||a.getDate()!==o)return null;if(!i||i==="00:00:00")return a;const[l,c,p]=i.split(":").map(g=>parseInt(g,10));return l>=0&&l<24&&a.setHours(l),c>=0&&c<60&&a.setMinutes(c),p>=0&&p<60&&a.setSeconds(p),a}var xk=class{constructor(e,t,i,s,n){this.alive=!0,this.context=e,this.eParent=s,t.getDateCompDetails(i).newAgStackInstance().then(a=>{if(!this.alive){e.destroyBean(a);return}this.dateComp=a,a&&(s.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),this.disabled!=null&&this.setDateCompDisabled(this.disabled),n==null||n(this))})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){Ni(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&typeof this.dateComp.afterGuiAttached=="function"&&this.dateComp.afterGuiAttached(e)}updateParams(e){var i,s;let t=!1;(i=this.dateComp)!=null&&i.refresh&&typeof this.dateComp.refresh=="function"&&this.dateComp.refresh(e)!==null&&(t=!0),!t&&((s=this.dateComp)!=null&&s.onParamsUpdated)&&typeof this.dateComp.onParamsUpdated=="function"&&this.dateComp.onParamsUpdated(e)!==null&&we("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){this.dateComp!=null&&this.dateComp.setDisabled!=null&&this.dateComp.setDisabled(e)}},bk=["equals","notEqual","lessThan","greaterThan","inRange","blank","notBlank"],Mk=class extends B0{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:s}=t||{},n=i=="inRange"||s===2,r=Hn(e.dateFrom),o=Hn(e.dateTo),a=this.dateFilterParams.inRangeFloatingFilterDateFormat;if(n){const l=r!==null?sf(r,a):"null",c=o!==null?sf(o,a):"null";return`${l}-${c}`}return r!=null?sf(r,a):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}},uT=1e3,hT=1/0,NU=class extends gk{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=uT,this.maxValidYear=hT,this.minValidDate=null,this.maxValidDate=null}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:s}=e||{};return[t&&Hn(t)||null,i&&Hn(i)||null].slice(0,this.getNumberOfInputs(s))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){const i=t;return t==null||i<e?-1:i>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(i,s)=>{if(e[i]!=null)if(isNaN(e[i]))we(`DateFilter ${i} is not a number`);else return e[i]==null?s:Number(e[i]);return s};this.minValidYear=t("minValidYear",uT),this.maxValidYear=t("maxValidYear",hT),this.minValidYear>this.maxValidYear&&we("DateFilter minValidYear should be <= maxValidYear"),e.minValidDate?this.minValidDate=e.minValidDate instanceof Date?e.minValidDate:Hn(e.minValidDate):this.minValidDate=null,e.maxValidDate?this.maxValidDate=e.maxValidDate instanceof Date?e.maxValidDate:Hn(e.maxValidDate):this.maxValidDate=null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&we("DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new Mk(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new xk(this.context,this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return bk}createValueElement(){const t=Wi(this.gos).createElement("div");return t.classList.add("ag-filter-body"),this.createFromToElement(t,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(t,this.eConditionPanelsTo,this.dateConditionToComps,"to"),t}createFromToElement(e,t,i,s){const r=Wi(this.gos).createElement("div");r.classList.add(`ag-filter-${s}`),r.classList.add(`ag-filter-date-${s}`),t.push(r),e.appendChild(r),i.push(this.createDateCompWrapper(r))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach(n=>n.destroy())}isValidDateValue(e){if(e===null)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,s,n,r)=>{n!==e||!t||s>=r||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),i={},s=this.getValues(e);return s.length>0&&(i.dateFrom=Kr(s[0])),s.length>1&&(i.dateTo=Kr(s[1])),{dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t,...i}}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(s=>{s.setInputPlaceholder(t),s.setInputAriaLabel(i)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,s,n,r)=>{s<r&&t.push(i.getDate())}),t}translate(e){return e==="lessThan"?super.translate("before"):e==="greaterThan"?super.translate("after"):super.translate(e)}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e)??""}},G0=class extends de{constructor(e,t,i,s){super(),this.columnOrGroup=e,this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=s,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gos.get("enableRtl")&&this.colsSpanning?At(this.colsSpanning):this.columnOrGroup}postConstruct(){const e=this.onLeftChanged.bind(this);this.addManagedListeners(this.columnOrGroup,{leftChanged:e}),this.setLeftFirstTime(),this.addManagedEventListeners({displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}setLeftFirstTime(){const e=this.beans.gos.get("suppressColumnMoveAnimation"),t=Ae(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),s=this.modifyLeftForPrintLayout(e,i),n=this.modifyLeftForPrintLayout(e,t);this.setLeft(s),this.actualLeft=n,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===n&&this.setLeft(n)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!Ts(this.beans.gos,"print")||e.getPinned()==="left")return t;const s=this.beans.visibleColsService.getColsLeftWidth();if(e.getPinned()==="right"){const n=this.beans.visibleColsService.getBodyContainerWidth();return s+n+t}return s+t}setLeft(e){if(Ae(e)&&(this.eCell.style.left=`${e}px`),qi(this.columnOrGroup)){const t=this.columnOrGroup.getLeafColumns();if(!t.length)return;t.length>1&&ej(this.ariaEl,t.length)}}},OU="ag-column-first",_U="ag-column-last";function Rk(e,t,i,s){return Pt(e)?[]:GU(e.headerClass,e,t,i,s)}function Dk(e,t,i){e.addOrRemoveCssClass(OU,i.isColAtEdge(t,"first")),e.addOrRemoveCssClass(_U,i.isColAtEdge(t,"last"))}function BU(e,t,i,s){return t.addGridCommonParams({colDef:e,column:i,columnGroup:s})}function GU(e,t,i,s,n){if(Pt(e))return[];let r;if(typeof e=="function"){const o=BU(t,i,s,n);r=e(o)}else r=e;return typeof r=="string"?[r]:Array.isArray(r)?[...r]:[]}var zU=0,Ek=class Ik extends de{constructor(t,i,s){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=t,this.parentRowCtrl=s,this.beans=i,this.instanceId=t.getUniqueId()+"-"+zU++}wireBeans(t){this.pinnedWidthService=t.pinnedWidthService,this.focusService=t.focusService,this.userComponentFactory=t.userComponentFactory,this.ctrlsService=t.ctrlsService,this.dragAndDropService=t.dragAndDropService,this.menuService=t.menuService}postConstruct(){const t=this.refreshTabIndex.bind(this);this.addManagedPropertyListeners(["suppressHeaderFocus"],t),this.addManagedEventListeners({overlayExclusiveChanged:t})}shouldStopEventPropagation(t){const{headerRowIndex:i,column:s}=this.focusService.getFocusedHeader();return EU(this.gos,t,i,s)}getWrapperHasFocus(){return _i(this.gos)===this.eGui}setGui(t,i){this.eGui=t,this.addDomData(i),i.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),i.addManagedElementListeners(this.eGui,{focus:this.onGuiFocus.bind(this)}),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onGuiFocus(){this.eventService.dispatchEvent({type:"headerFocused",column:this.column})}setupAutoHeight(t){const{wrapperElement:i,checkMeasuringCallback:s,compBean:n}=t,{animationFrameService:r,resizeObserverService:o,columnModel:a,gos:l}=this.beans,c=x=>{if(!this.isAlive()||!n.isAlive())return;const{paddingTop:M,paddingBottom:b,borderBottomWidth:R,borderTopWidth:I}=Eh(this.getGui()),P=M+b+R+I,_=i.offsetHeight+P;if(x<5){const B=Wi(l),H=!B||!B.contains(i),V=_==0;if(H||V){r.requestAnimationFrame(()=>c(x+1));return}}a.setColHeaderHeight(this.column,_)};let p=!1,g;const f=()=>{const x=this.column.isAutoHeaderHeight();x&&!p&&y(),!x&&p&&C()},y=()=>{p=!0,c(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),g=o.observeResize(i,()=>c(0))},C=()=>{p=!1,g&&g(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),g=void 0};f(),n.addDestroyFunc(()=>C()),n.addManagedListeners(this.column,{widthChanged:()=>p&&c(0)}),n.addManagedEventListeners({sortChanged:()=>{p&&window.setTimeout(()=>c(0))}}),s&&s(f)}onDisplayedColumnsChanged(){const{comp:t,column:i,beans:s,eGui:n}=this;!t||!i||!n||(Dk(t,i,s.visibleColsService),HF(n,s.visibleColsService.getAriaColIndex(i)))}addResizeAndMoveKeyboardListeners(t){this.resizeFeature&&t.addManagedListeners(this.eGui,{keydown:this.onGuiKeyDown.bind(this),keyup:this.onGuiKeyUp.bind(this)})}refreshTabIndex(){const t=this.focusService.isHeaderFocusSuppressed();this.eGui&&Ur(this.eGui,"tabindex",t?null:"-1")}onGuiKeyDown(t){var o;const i=_i(this.gos),s=t.key===le.LEFT||t.key===le.RIGHT;if(this.isResizing&&(t.preventDefault(),t.stopImmediatePropagation()),i!==this.eGui||!t.shiftKey&&!t.altKey||((this.isResizing||s)&&(t.preventDefault(),t.stopImmediatePropagation()),!s))return;const n=t.key===le.LEFT!==this.gos.get("enableRtl"),r=ok[n?"Left":"Right"];if(t.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const a=this.getViewportAdjustedResizeDiff(t);this.resizeHeader(a,t.shiftKey),(o=this.resizeFeature)==null||o.toggleColumnResizing(!0)}else this.moveHeader(r)}getViewportAdjustedResizeDiff(t){let i=this.getResizeDiff(t);if(this.column.getPinned()){const n=this.pinnedWidthService.getPinnedLeftWidth(),r=this.pinnedWidthService.getPinnedRightWidth(),o=om(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(n+r+i>o)if(o>n+r)i=o-n-r;else return 0}return i}getResizeDiff(t){let i=t.key===le.LEFT!==this.gos.get("enableRtl");const s=this.column.getPinned(),n=this.gos.get("enableRtl");return s&&n!==(s==="right")&&(i=!i),(i?-1:1)*this.resizeMultiplier}onGuiKeyUp(){this.isResizing&&(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=window.setTimeout(()=>{var t;(t=this.resizeFeature)==null||t.toggleColumnResizing(!1)},150))}handleKeyDown(t){const i=this.getWrapperHasFocus();switch(t.key){case le.PAGE_DOWN:case le.PAGE_UP:case le.PAGE_HOME:case le.PAGE_END:i&&t.preventDefault()}}addDomData(t){const i=Ik.DOM_DATA_KEY_HEADER_CTRL;vh(this.gos,this.eGui,i,this),t.addDestroyFunc(()=>vh(this.gos,this.eGui,i,null))}getGui(){return this.eGui}focus(t){return this.eGui?(this.lastFocusEvent=t||null,this.eGui.focus(),!0):!1}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(t,i,s){const n=t??i;this.gos.get("preventDefaultOnContextMenu")&&n.preventDefault(),this.menuService.isHeaderContextMenuEnabled(s)&&this.menuService.showHeaderContextMenu(s,t,i),this.dispatchColumnMouseEvent("columnHeaderContextMenu",s)}dispatchColumnMouseEvent(t,i){this.eventService.dispatchEvent({type:t,column:i})}clearComponent(){this.removeDragSource(),this.resizeFeature=null,this.comp=null,this.eGui=null}destroy(){super.destroy(),this.column=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null}};Ek.DOM_DATA_KEY_HEADER_CTRL="headerCtrl";var NC=Ek,z0=class extends de{wireBeans(e){this.columnHoverService=e.columnHoverService}constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gos.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListeners(this.element,{mouseout:this.onMouseOut.bind(this),mouseover:this.onMouseOver.bind(this)})}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}},HU=class extends NC{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,s,n){this.comp=e,n=nm(this,this.beans.context,n),this.eButtonShowMainFilter=i,this.eFloatingFilterBody=s,this.setGui(t,n),this.setupActive(),this.setupWidth(n),this.setupLeft(n),this.setupHover(n),this.setupFocus(n),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(n),this.setupUi(),n.addManagedElementListeners(this.eButtonShowMainFilter,{click:this.showParentFilter.bind(this)}),this.setupFilterChangedListener(n),n.addManagedListeners(this.column,{colDefChanged:()=>this.onColDefChanged(n)}),n.addDestroyFunc(()=>{this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.clearComponent()})}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef(),t=!!e.filter,i=!!e.floatingFilter;this.active=t&&i}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=ur("filter",this.gos,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(e){e.createManagedBean(new Ih(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();cp(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(_i(this.gos)===this.eGui)return;const s=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(s){this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),s.focus();return}const n=this.findNextColumnWithFloatingFilter(e.shiftKey);n&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:n},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.visibleColsService;let i=this.column;do if(i=e?t.getColBefore(i):t.getColAfter(i),!i)break;while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case le.UP:case le.DOWN:t||e.preventDefault();case le.LEFT:case le.RIGHT:if(t)return;e.stopPropagation();case le.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case le.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),s=!!e.relatedTarget&&qd(e.relatedTarget,"ag-floating-filter");if(i&&s&&e.target===this.eGui){const r=this.lastFocusEvent,o=!!(r&&r.key===le.TAB);if(r&&o){const a=r.shiftKey;this.focusService.focusInto(this.eGui,a)}}const n=this.getRowIndex();this.beans.focusService.setFocusedHeader(n,this.column)}setupHover(e){e.createManagedBean(new z0([this.column],this.eGui));const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}setupLeft(e){const t=new G0(this.column,this.eGui,this.beans);e.createManagedBean(t)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){var t;if(!this.active)return;const e=(t=this.beans.filterManager)==null?void 0:t.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){const e=this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter;this.menuService.showFilterMenu({column:this.column,buttonElement:e,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(e){if(!this.active)return;const{filterManager:t}=this.beans,i=s=>{if((s==null?void 0:s.source)==="filterDestroyed"&&!this.isAlive())return;const n=this.comp.getFloatingFilterComp();n&&n.then(r=>{if(r){const o=t==null?void 0:t.getCurrentFloatingFilterParentModel(this.column),a=s?{...s,columns:s.columns??[],source:s.source==="api"?"api":"columnFilter"}:null;r.onParentModelChanged(o,a)}})};[this.destroySyncListener]=e.addManagedListeners(this.column,{filterChanged:i}),t!=null&&t.isFilterActive(this.column)&&i(null)}setupWidth(e){const t=()=>{const i=`${this.column.getActualWidth()}px`;this.comp.setWidth(i)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupFilterChangedListener(e){this.active&&([this.destroyFilterChangedListener]=e.addManagedListeners(this.column,{filterChanged:this.updateFilterButton.bind(this)}),this.updateFilterButton())}updateFilterButton(){var e;if(!this.suppressFilterButton&&this.comp){const t=!!((e=this.beans.filterManager)!=null&&e.isFilterAllowed(this.column));this.comp.setButtonWrapperDisplayed(t),this.highlightFilterButtonWhenActive&&t&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(e){var r;const t=this.active;this.setupActive();const i=!t&&this.active;t&&!this.active&&(this.destroySyncListener(),this.destroyFilterChangedListener());const s=this.active?(r=this.beans.filterManager)==null?void 0:r.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,n=this.comp.getFloatingFilterComp();!n||!s?this.updateCompDetails(e,s,i):n.then(o=>{var a;!o||(a=this.beans.filterManager)!=null&&a.areFilterCompsDifferent(this.userCompDetails??null,s)?this.updateCompDetails(e,s,i):this.updateFloatingFilterParams(s)})}updateCompDetails(e,t,i){this.isAlive()&&(this.setCompDetails(t),this.setupFilterButton(),this.setupUi(),i&&(this.setupSyncWithFilter(e),this.setupFilterChangedListener(e)))}updateFloatingFilterParams(e){var i;if(!e)return;const t=e.params;(i=this.comp.getFloatingFilterComp())==null||i.then(s=>{let n=!1;s!=null&&s.refresh&&typeof s.refresh=="function"&&s.refresh(t)!==null&&(n=!0),!n&&(s!=null&&s.onParamsUpdated)&&typeof s.onParamsUpdated=="function"&&s.onParamsUpdated(t)!==null&&we("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.destroySyncListener=null,this.destroyFilterChangedListener=null}};var ct="32.3.3";function VU(e){var t,i;return!!((t=e.filterManager)!=null&&t.isColumnFilterPresent())||!!((i=e.filterManager)!=null&&i.isAggregateFilterPresent())}function WU(e,t,i){var s;return(s=e.filterManager)==null?void 0:s.getFilterInstance(t,i)}function jU(e,t){var i;return((i=e.filterManager)==null?void 0:i.getColumnFilterInstance(t))??Promise.resolve(void 0)}function UU(e,t){var s;const i=e.columnModel.getColDefCol(t);if(i)return(s=e.filterManager)==null?void 0:s.destroyFilter(i,"api")}function KU(e,t){e.frameworkOverrides.wrapIncoming(()=>{var i;return(i=e.filterManager)==null?void 0:i.setFilterModel(t)})}function YU(e){var t;return((t=e.filterManager)==null?void 0:t.getFilterModel())??{}}function $U(e,t){var i;return((i=e.filterManager)==null?void 0:i.getColumnFilterModel(t))??null}function ZU(e,t,i){var s;return((s=e.filterManager)==null?void 0:s.setColumnFilterModel(t,i))??Promise.resolve()}function XU(e,t){const i=e.columnModel.getCol(t);if(!i){Ut(`column '${t}' not found`);return}e.menuService.showFilterMenu({column:i,containerType:"columnFilter",positionBy:"auto"})}function QU(e,t,i){if(t==null)return null;let s=null;const{compName:n,jsComp:r,fwComp:o}=nk.getCompKeys(e,t,k0);return n?s={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"}[n]:r==null&&o==null&&t.filter===!0&&(s=i()),s}var dT={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},pT=["january","february","march","april","may","june","july","august","september","october","november","december"],qU=class extends de{constructor(){super(...arguments),this.beanName="columnFilterService",this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[]}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.userComponentFactory=e.userComponentFactory,this.rowRenderer=e.rowRenderer,this.dataTypeService=e.dataTypeService,this.filterManager=e.filterManager}postConstruct(){var e,t;this.addManagedEventListeners({gridColumnsChanged:this.onColumnsChanged.bind(this),rowDataUpdated:()=>this.onNewRowsLoaded("rowDataUpdated"),dataTypesInferred:this.processFilterModelUpdateQueue.bind(this)}),this.initialFilterModel={...((t=(e=this.gos.get("initialState"))==null?void 0:e.filter)==null?void 0:t.filterModel)??{}}}setFilterModel(e,t="api"){var n;if((n=this.dataTypeService)!=null&&n.isPendingInference()){this.filterModelUpdateQueue.push({model:e,source:t});return}const i=[],s=this.getFilterModel(!0);if(e){const r=new Set(Object.keys(e));this.allColumnFilters.forEach((o,a)=>{const l=e[a];i.push(this.setModelOnFilterWrapper(o.filterPromise,l)),r.delete(a)}),r.forEach(o=>{const a=this.columnModel.getColDefCol(o)||this.columnModel.getCol(o);if(!a){we("setFilterModel() - no column found for colId: "+o);return}if(!a.isFilterAllowed()){we("setFilterModel() - unable to fully apply model, filtering disabled for colId: "+o);return}const l=this.getOrCreateFilterWrapper(a);if(!l){we("setFilterModel() - unable to fully apply model, unable to create filter for colId: "+o);return}i.push(this.setModelOnFilterWrapper(l.filterPromise,e[o]))})}else this.allColumnFilters.forEach(r=>{i.push(this.setModelOnFilterWrapper(r.filterPromise,null))});Vi.all(i).then(()=>{var a;const r=this.getFilterModel(!0),o=[];this.allColumnFilters.forEach((l,c)=>{const p=s?s[c]:null,g=r?r[c]:null;Cf(p,g)||o.push(l.column)}),o.length>0&&((a=this.filterManager)==null||a.onFilterChanged({columns:o,source:t}))})}setModelOnFilterWrapper(e,t){return new Vi(i=>{e.then(s=>{typeof s.setModel!="function"&&(we("filter missing setModel method, which is needed for setFilterModel"),i()),(s.setModel(t)||Vi.resolve()).then(()=>i())})})}getFilterModel(e){const t={},{allColumnFilters:i,initialFilterModel:s}=this;return i.forEach((n,r)=>{const o=this.getModelFromFilterWrapper(n);Ae(o)&&(t[r]=o)}),e||Object.entries(s).forEach(([n,r])=>{var o;Ae(r)&&!i.has(n)&&((o=this.columnModel.getCol(n))!=null&&o.isFilterAllowed())&&(t[n]=r)}),t}getModelFromFilterWrapper(e){const{filter:t}=e;return t?typeof t.getModel!="function"?(we("filter API missing getModel method, which is needed for getFilterModel"),null):t.getModel():this.getModelFromInitialState(e.column)}getModelFromInitialState(e){return this.initialFilterModel[e.getColId()]??null}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}disableColumnFilters(){return this.allColumnFilters.size?(this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"advancedFilterEnabled")),!0):!1}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){const e=r=>r?r.isFilterActive?r.isFilterActive():(we("Filter is missing isFilterActive() method"),!1):!1,t=!!Wb(this.gos),i=r=>{if(!r.isPrimary())return!0;const a=!this.columnModel.isPivotActive();return!r.isValueActive()||!a?!1:this.columnModel.isPivotMode()?!0:t},s=[],n=[];return this.forEachColumnFilter((r,o)=>{e(r)&&(i(o.column)?s.push(r):n.push(r))}).then(()=>{this.activeAggregateFilters=s,this.activeColumnFilters=n})}updateFilterFlagInColumns(e,t){return this.forEachColumnFilter((i,s)=>s.column.setFilterActive(i.isFilterActive(),e,t))}forEachColumnFilter(e){return Vi.all(Array.from(this.allColumnFilters.values()).map(t=>t.filterPromise.then(i=>e(i,t))))}doColumnFiltersPass(e,t,i){const{data:s,aggData:n}=e,r=i?this.activeAggregateFilters:this.activeColumnFilters,o=i?n:s;for(let a=0;a<r.length;a++){const l=r[a];if(!(l==null||l===t)){if(typeof l.doesFilterPass!="function")throw new Error("Filter is missing method doesFilterPass");if(!l.doesFilterPass({node:e,data:o}))return!1}}return!0}callOnFilterChangedOutsideRenderCycle(e){const t=()=>{var i;return(i=this.filterManager)==null?void 0:i.onFilterChanged(e)};this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}updateBeforeFilterChanged(e={}){const{filterInstance:t,additionalEventAttributes:i}=e;return this.updateDependentFilters(),this.updateActiveFilters().then(()=>this.updateFilterFlagInColumns("filterChanged",i).then(()=>{this.allColumnFilters.forEach(s=>{s.filterPromise&&s.filterPromise.then(n=>{n&&n!==t&&n.onAnyFilterChanged&&n.onAnyFilterChanged()})}),this.processingFilterChange=!0}))}updateAfterFilterChanged(){this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){return!(this.gos.get("allowShowChangeAfterFilter")??!1)&&this.processingFilterChange}onNewRowsLoaded(e){this.forEachColumnFilter(t=>{t.onNewRowsLoaded&&t.onNewRowsLoaded()}).then(()=>this.updateFilterFlagInColumns(e,{afterDataChange:!0})).then(()=>this.updateActiveFilters())}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,i)=>{const s=i?this.columnModel.getCol(i):e;return s?this.valueService.getValue(s,t,!0):void 0}}isFilterActive(e){const{filter:t}=this.cachedFilter(e)??{};return t?t.isFilterActive():this.getModelFromInitialState(e)!=null}getOrCreateFilterWrapper(e){if(!e.isFilterAllowed())return null;let t=this.cachedFilter(e);return t||(t=this.createFilterWrapper(e),this.setColumnFilterWrapper(e,t)),t}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){var i;let t;if(Hx(this.gos))t="agSetColumnFilter";else{const s=(i=this.dataTypeService)==null?void 0:i.getBaseDataType(e);s==="number"?t="agNumberColumnFilter":s==="date"||s==="dateString"?t="agDateColumnFilter":t="agTextColumnFilter"}return t}getDefaultFloatingFilter(e){var i;let t;if(Hx(this.gos))t="agSetColumnFloatingFilter";else{const s=(i=this.dataTypeService)==null?void 0:i.getBaseDataType(e);s==="number"?t="agNumberColumnFloatingFilter":s==="date"||s==="dateString"?t="agDateColumnFloatingFilter":t="agTextColumnFloatingFilter"}return t}createFilterInstance(e,t){const i=this.getDefaultFilter(e),s=e.getColDef();let n;const r={...this.createFilterParams(e,s),filterModifiedCallback:()=>this.filterModifiedCallbackFactory(n,e)(),filterChangedCallback:a=>this.filterChangedCallbackFactory(n,e)(a),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(n,a):!0},o=this.userComponentFactory.getFilterDetails(s,r,i);return o?{filterPromise:()=>{const a=o.newAgStackInstance();return a!=null&&a.then(l=>{n=l,t&&(t.filter=l)}),a},compDetails:o}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gos.addGridCommonParams({column:e,colDef:AF(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e){const t={column:e,filterPromise:null,compiledElement:null,compDetails:null},{filterPromise:i,compDetails:s}=this.createFilterInstance(e,t);return t.filterPromise=(i==null?void 0:i())??null,t.compDetails=s,t}onColumnsChanged(){var i;const e=[];this.allColumnFilters.forEach((s,n)=>{let r;s.column.isPrimary()?r=this.columnModel.getColDefCol(n):r=this.columnModel.getCol(n),!(r&&r===s.column)&&(e.push(s.column),this.disposeFilterWrapper(s,"columnChanged"),this.disposeColumnListener(n))});const t=e.every(s=>s.getColDef().filter==="agGroupColumnFilter");e.length>0&&!t?(i=this.filterManager)==null||i.onFilterChanged({columns:e,source:"api"}):this.updateDependentFilters()}updateDependentFilters(){const e=this.columnModel.getAutoCols();e==null||e.forEach(t=>{t.getColDef().filter==="agGroupColumnFilter"&&this.getOrCreateFilterWrapper(t)})}isFilterAllowed(e){if(!e.isFilterAllowed())return!1;const{filter:i}=this.allColumnFilters.get(e.getColId())??{};return i&&typeof(i==null?void 0:i.isFilterAllowed)=="function"?i.isFilterAllowed():!0}getFloatingFilterCompDetails(e,t){const i=l=>{var p;const c=(p=this.getOrCreateFilterWrapper(e))==null?void 0:p.filterPromise;c!=null&&c.then(g=>{l(ef(g))})},s=e.getColDef(),n={...this.createFilterParams(e,s),filterChangedCallback:()=>i(l=>this.filterChangedCallbackFactory(l,e)())},r=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(s,k0,n);let o=QU(this.frameworkOverrides,s,()=>this.getDefaultFloatingFilter(e));o==null&&(o="agReadOnlyFloatingFilter");const a={column:e,filterParams:r,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1};return this.userComponentFactory.getFloatingFilterCompDetails(s,a,o)}getCurrentFloatingFilterParentModel(e){return this.getModelFromFilterWrapper(this.cachedFilter(e)??{column:e})}destroyFilter(e,t="api"){var n;const i=e.getColId(),s=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],s&&(this.disposeFilterWrapper(s,t),(n=this.filterManager)==null||n.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(i=>{this.destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:"filterDestroyed",source:t,column:e.column})})}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:"filterModified",column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{const s=(i==null?void 0:i.source)??"columnFilter",n={filter:e,additionalEventAttributes:i,columns:[t],source:s};this.callOnFilterChangedOutsideRenderCycle(n)}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:s}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,s)){this.destroyFilter(i,"paramsUpdated");return}const n=i.getColDef().filterParams;if(!t.filterPromise){this.destroyFilter(i,"paramsUpdated");return}t.filterPromise.then(r=>{(r!=null&&r.refresh?r.refresh({...this.createFilterParams(i,i.getColDef()),filterModifiedCallback:this.filterModifiedCallbackFactory(r,i),filterChangedCallback:this.filterChangedCallbackFactory(r,i),doesRowPassOtherFilter:a=>this.filterManager?this.filterManager.doesRowPassOtherFilters(r,a):!0,...n}):!0)===!1&&this.destroyFilter(i,"paramsUpdated")})}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListeners(e,{colDefChanged:()=>this.checkDestroyFilter(i)})[0])}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:s}=t;return!(i===s||(i==null?void 0:i.render)&&(s==null?void 0:s.render)&&i.render===s.render)}hasFloatingFilters(){return this.columnModel.getCols().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){t&&this.getFilterInstanceImpl(e).then(i=>{const s=ef(i);t(s)})}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstanceImpl(e).then(i=>{t(ef(i))})})}getFilterInstanceImpl(e){var s;const t=this.columnModel.getColDefCol(e);return t?((s=this.getOrCreateFilterWrapper(t))==null?void 0:s.filterPromise)??Vi.resolve(null):Vi.resolve(void 0)}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:i})=>{this.setColumnFilterModel(e,t).then(()=>i())}),this.columnFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){var r;if((r=this.dataTypeService)!=null&&r.isPendingInference()){let o=()=>{};const a=new Promise(l=>{o=l});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:o}),a}const i=this.columnModel.getColDefCol(e),s=i?this.getOrCreateFilterWrapper(i):null;return s?(o=>new Promise(a=>{o.then(l=>a(l))}))(this.setModelOnFilterWrapper(s.filterPromise,t)):Promise.resolve()}getFilterWrapper(e){const t=this.columnModel.getColDefCol(e);return t?this.cachedFilter(t)??null:null}setColDefPropertiesForDataType(e,t,i){const s=Hx(this.gos),n=this.localeService.getLocaleTextFunc(),r=o=>{const{filterParams:a}=e;e.filterParams=typeof a=="object"?{...a,...o}:o};switch(t.baseDataType){case"number":{s&&r({comparator:(o,a)=>{const l=o==null?0:parseInt(o),c=a==null?0:parseInt(a);return l===c?0:l>c?1:-1}});break}case"boolean":{r(s?{valueFormatter:o=>Ae(o.value)?n(String(o.value),o.value?"True":"False"):n("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(o,a)=>a,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(o,a)=>a===!1,numberOfInputs:0}]});break}case"date":{s&&r({valueFormatter:o=>{const a=i(o);return Ae(a)?a:n("blanks","(Blanks)")},treeList:!0,treeListFormatter:(o,a)=>{if(a===1&&o!=null){const l=pT[Number(o)-1];return n(l,dT[l])}return o??n("blanks","(Blanks)")}});break}case"dateString":{const o=t.dateParser;r(s?{valueFormatter:a=>{const l=i(a);return Ae(l)?l:n("blanks","(Blanks)")},treeList:!0,treeListPathGetter:a=>{const l=o(a??void 0);return l?[String(l.getFullYear()),String(l.getMonth()+1),String(l.getDate())]:null},treeListFormatter:(a,l)=>{if(l===1&&a!=null){const c=pT[Number(a)-1];return n(c,dT[c])}return a??n("blanks","(Blanks)")}}:{comparator:(a,l)=>{const c=o(l);return l==null||c<a?-1:c>a?1:0}});break}case"object":{s?r({valueFormatter:o=>{const a=i(o);return Ae(a)?a:n("blanks","(Blanks)")}}):e.filterValueGetter=o=>i({column:o.column,node:o.node,value:this.valueService.getValue(o.column,o.node)});break}}}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};function JU(e){var t;return!!((t=e.filterManager)!=null&&t.isAnyFilterPresent())}function e4(e,t="api"){var i;(i=e.filterManager)==null||i.onFilterChanged({source:t})}var t4=class extends di{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eFloatingFilterText"></ag-input-text-field>
            </div>`,[kC]),this.eFloatingFilterText=st}wireBeans(e){this.columnNameService=e.columnNameService}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){if(e==null){this.eFloatingFilterText.setValue("");return}this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}},Lk=class extends di{wireBeans(e){this.columnNameService=e.columnNameService}getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e==null?void 0:e.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e){this.lastType=this.optionsFactory.getDefaultOption();return}const t=e.operator;let i;t?i=e.conditions[0]:i=e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){if(!e)return this.isTypeEditable(this.lastType);if(e.operator)return!1;const i=e;return this.isTypeEditable(i.type)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new dk,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return i==null||i==1}isTypeEditable(e){const t=["inRange","empty","blank","notBlank"];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}getAriaLabel(e){const t=this.columnNameService.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();return`${t} ${i("ariaFilterInput","Filter Input")}`}},i4=class extends Lk{constructor(){super(`
            <div class="ag-floating-filter-input" role="presentation">
                <ag-input-text-field data-ref="eReadOnlyText"></ag-input-text-field>
                <div data-ref="eDateWrapper" style="display: flex;"></div>
            </div>`,[kC]),this.eReadOnlyText=st,this.eDateWrapper=st}wireBeans(e){super.wireBeans(e),this.context=e.context,this.userComponentFactory=e.userComponentFactory}getDefaultFilterOptions(){return bk}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new Mk(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);if(this.setEditable(t),t){if(e){const i=e;this.dateComp.setDate(Hn(i.dateFrom))}else this.dateComp.setDate(null);this.eReadOnlyText.setValue("")}else this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null)}setEditable(e){Ni(this.eDateWrapper,e),Ni(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const e=this.dateComp.getDate(),t=Kr(e);this.params.parentFilterInstance(i=>{if(i){const s=Hn(t);i.onFloatingFilterChanged(this.getLastType()||null,s)}})}getDateComponentParams(){const e=N0(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:Cn(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new xk(this.context,this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper,e=>{e.setInputAriaLabel(this.getAriaLabel(this.params))}),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const e=this.gos.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}},s4=class extends di{constructor(){super(`
            <div class="ag-filter-filter">
                <ag-input-text-field class="ag-date-filter" data-ref="eDateInput"></ag-input-text-field>
            </div>`,[kC]),this.eDateInput=st}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.eDateInput.getInputElement();this.addManagedListeners(t,{mouseDown:()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||t.focus()},input:i=>{i.target===_i(this.gos)&&(this.eDateInput.isDisabled()||this.params.onDateChanged())}})}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&ua(),t.type=i?"date":"text";const{minValidYear:s,maxValidYear:n,minValidDate:r,maxValidDate:o}=e.filterParams||{};if(r&&s&&we("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),o&&n&&we("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),r&&o){const[a,l]=[r,o].map(c=>c instanceof Date?c:Hn(c));a&&l&&a.getTime()>l.getTime()&&we("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}r?r instanceof Date?t.min=sf(r):t.min=r:s&&(t.min=`${s}-01-01`),o?o instanceof Date?t.max=sf(o):t.max=o:n&&(t.max=`${n}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return Hn(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Kr(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setInputAriaLabel(e){this.eDateInput.setAriaLabel(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&e.filterParams.browserDatePicker!=null?e.filterParams.browserDatePicker:R0()||D0()||ua()&&VF()>=14.1}},Tk=class extends de{constructor(e){super(),this.params=e,this.eFloatingFilterTextInput=st,this.valueChangedListener=()=>{}}setupGui(e){var s;this.eFloatingFilterTextInput=this.createManagedBean(new Lh((s=this.params)==null?void 0:s.config));const t=this.eFloatingFilterTextInput.getGui();e.appendChild(t);const i=n=>this.valueChangedListener(n);this.addManagedListeners(t,{input:i,keydown:i})}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}},Ak=class extends Lk{constructor(){super(...arguments),this.eFloatingFilterInputContainer=st}postConstruct(){this.setTemplate(`
            <div class="ag-floating-filter-input" role="presentation" data-ref="eFloatingFilterInputContainer"></div>
        `)}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){this.params=e;const t=e.browserAutoComplete??!1;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:t}),this.applyActive=Xy(this.params.filterParams),!this.isReadOnly()){const i=N0(this.params.filterParams,this.getDefaultDebounceMs()),s=Cn(this.syncUpWithParentFilter.bind(this),i);this.floatingFilterInputService.setValueChangedListener(s)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();pr(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}syncUpWithParentFilter(e){const t=e.key===le.ENTER;if(this.applyActive&&!t)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=Sk(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(s=>{s&&s.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}},n4=class extends de{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new _0),this.eFloatingFilterTextInput=this.createManagedBean(new Lh),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,s=>this.valueChangedListener(s)),this.setupListeners(i,s=>this.valueChangedListener(s))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListeners(e,{input:t,keydown:t})}setParams(e){this.setAriaLabel(e.ariaLabel),e.autoComplete!==void 0&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}},r4=class extends Ak{init(e){var t;super.init(e),this.filterModelFormatter=new vk(this.localeService,this.optionsFactory,(t=e.filterParams)==null?void 0:t.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){tM(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return mk}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=tM(e.filterParams),this.allowedCharPattern?this.createManagedBean(new Tk({config:{allowedCharPattern:this.allowedCharPattern}})):this.createManagedBean(new n4)}},o4=class extends Ak{init(e){super.init(e),this.filterModelFormatter=new Ck(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return yk}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new Tk)}};function a4(e){var t;return!!((t=e.filterManager)!=null&&t.isQuickFilterPresent())}function l4(e){return e.gos.get("quickFilterText")}function c4(e){var t;(t=e.filterManager)==null||t.resetQuickFilterCache()}var u4=class extends de{constructor(){super(...arguments),this.beanName="quickFilterService",this.quickFilter=null,this.quickFilterParts=null}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.rowModel=e.rowModel,this.pivotResultColsService=e.pivotResultColsService}postConstruct(){const e=this.resetQuickFilterCache.bind(this);this.addManagedEventListeners({columnPivotModeChanged:e,newColumnsLoaded:e,columnRowGroupChanged:e,columnVisible:()=>{this.gos.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}}),this.addManagedPropertyListener("quickFilterText",t=>this.setQuickFilter(t.currentValue)),this.addManagedPropertyListeners(["includeHiddenColumnsInQuickFilter","applyQuickFilterBeforePivotOrAgg"],()=>this.onQuickFilterColumnConfigChanged()),this.quickFilter=this.parseQuickFilter(this.gos.get("quickFilterText")),this.parser=this.gos.get("quickFilterParser"),this.matcher=this.gos.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}refreshQuickFilterCols(){var n;const e=this.columnModel.isPivotMode(),t=this.columnModel.getAutoCols(),i=this.columnModel.getColDefCols();let s=(e&&!this.gos.get("applyQuickFilterBeforePivotOrAgg")?(n=this.pivotResultColsService.getPivotResultCols())==null?void 0:n.list:i)??[];t&&(s=s.concat(t)),this.colsForQuickFilter=this.gos.get("includeHiddenColumnsInQuickFilter")?s:s.filter(r=>r.isVisible()||r.isRowGroupActive())}isQuickFilterPresent(){return this.quickFilter!==null}doesRowPassQuickFilter(e){const t=this.gos.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;e?this.quickFilterParts=t?t(e):e.split(" "):this.quickFilterParts=null}parseQuickFilter(e){return Ae(e)?xi(this.gos)?e.toUpperCase():(we("Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(e!=null&&typeof e!="string"){we(`Grid option quickFilterText only supports string inputs, received: ${typeof e}`);return}const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}setQuickFilterParserAndMatcher(){const e=this.gos.get("quickFilterParser"),t=this.gos.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchLocalEvent({type:"quickFilterChanged"}))}onQuickFilterColumnConfigChanged(){this.refreshQuickFilterCols(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchLocalEvent({type:"quickFilterChanged"})}doesRowPassQuickFilterNoCache(e,t){return this.colsForQuickFilter.some(i=>{const s=this.getQuickFilterTextForColumn(i,e);return Ae(s)&&s.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);const{quickFilterParts:s,matcher:n}=this;return n(s,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0);const s=e.getColDef();if(s.getQuickFilterText){const n=this.gos.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:s});i=s.getQuickFilterText(n)}return Ae(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.colsForQuickFilter.forEach(i=>{const s=this.getQuickFilterTextForColumn(i,e);Ae(s)&&t.push(s)}),t.join(`
`)}},H0={version:ct,moduleName:"@ag-grid-community/filter-core",beans:[dU]},h4={version:ct,moduleName:"@ag-grid-community/filter-api",apiFunctions:{isAnyFilterPresent:JU,onFilterChanged:e4},dependantModules:[H0]},V0={version:ct,moduleName:"@ag-grid-community/column-filter",beans:[qU],dependantModules:[H0]},d4={version:ct,moduleName:"@ag-grid-community/column-filter-api",apiFunctions:{isColumnFilterPresent:VU,getFilterInstance:WU,getColumnFilterInstance:jU,destroyFilter:UU,setFilterModel:KU,getFilterModel:YU,getColumnFilterModel:$U,setColumnFilterModel:ZU,showColumnFilter:XU},dependantModules:[V0,h4]},Pk={version:ct,moduleName:"@ag-grid-community/floating-filter-core",controllers:[{name:"headerFilterCell",classImp:HU}],dependantModules:[V0]},p4={version:ct,moduleName:"@ag-grid-community/read-only-floating-filter",userComponents:[{name:"agReadOnlyFloatingFilter",classImp:t4}],dependantModules:[Pk]},g4={version:ct,moduleName:"@ag-grid-community/simple-filter",dependantModules:[V0],userComponents:[{name:"agTextColumnFilter",classImp:PU},{name:"agNumberColumnFilter",classImp:AU},{name:"agDateColumnFilter",classImp:NU},{name:"agDateInput",classImp:s4}]},f4={version:ct,moduleName:"@ag-grid-community/simple-floating-filter",dependantModules:[g4,Pk],userComponents:[{name:"agTextColumnFloatingFilter",classImp:o4},{name:"agNumberColumnFloatingFilter",classImp:r4},{name:"agDateColumnFloatingFilter",classImp:i4}]},Fk={version:ct,moduleName:"@ag-grid-community/quick-filter-core",beans:[u4],dependantModules:[H0]},m4={version:ct,moduleName:"@ag-grid-community/quick-filter-api",apiFunctions:{isQuickFilterPresent:a4,getQuickFilter:l4,resetQuickFilter:c4},dependantModules:[Fk]},v4={version:ct,moduleName:"@ag-grid-community/quick-filter",dependantModules:[Fk,m4]},y4={version:ct,moduleName:"@ag-grid-community/filter",dependantModules:[f4,p4,v4,d4]},iM=(e=>(e.COLUMN_GROUP="group",e.COLUMN="column",e.FLOATING_FILTER="filter",e))(iM||{}),C4=class extends de{constructor(){super(...arguments),this.beanName="headerNavigationService",this.currentHeaderRowWithoutSpan=-1}wireBeans(e){this.focusService=e.focusService,this.headerPositionUtils=e.headerPositionUtils,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.visibleColService=e.visibleColsService}postConstruct(){this.ctrlsService.whenReady(this,t=>{this.gridBodyCon=t.gridBodyCtrl});const e=Wi(this.gos);this.addManagedElementListeners(e,{mousedown:()=>this.setCurrentHeaderRowWithoutSpan(-1)})}getHeaderRowCount(){var e;return((e=this.ctrlsService.getHeaderRowContainerCtrl())==null?void 0:e.getRowCount())??0}getHeaderPositionForColumn(e,t){let i;if(typeof e=="string"?(i=this.columnModel.getCol(e),i||(i=this.visibleColService.getColumnGroup(e))):i=e,!i)return null;const s=this.ctrlsService.getHeaderRowContainerCtrl(),n=s==null?void 0:s.getAllCtrls(),r=At(n||[]).getType()==="filter",o=this.getHeaderRowCount()-1;let a=-1,l=i;for(;l;)a++,l=l.getParent();let c=a;return t&&r&&c===o-1&&c++,c===-1?null:{headerRowIndex:c,column:i}}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:s}=t,n=t.column,r=this.getHeaderRowCount(),o=e===0;let{headerRowIndex:a,column:l,headerRowIndexWithoutSpan:c}=o?this.headerPositionUtils.getColumnVisibleParent(n,s):this.headerPositionUtils.getColumnVisibleChild(n,s),p=!1;return a<0&&(a=0,l=n,p=!0),a>=r?(a=-1,this.setCurrentHeaderRowWithoutSpan(-1)):c!==void 0&&(this.currentHeaderRowWithoutSpan=c),!p&&!l?!1:this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a,column:l},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,i){const s=this.focusService.getFocusedHeader(),n=e===2,r=this.gos.get("enableRtl");let o,a;if(this.currentHeaderRowWithoutSpan!==-1?s.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=s.headerRowIndex,n!==r?(a="Before",o=this.headerPositionUtils.findHeader(s,a)):(a="After",o=this.headerPositionUtils.findHeader(s,a)),o||!t)return this.focusService.focusHeaderPosition({headerPosition:o,direction:a,fromTab:t,allowUserOverride:!0,event:i});if(t){const l=this.gos.getCallback("tabToNextHeader");if(l)return this.focusService.focusHeaderPositionFromUserFunc({userFunc:l,headerPosition:o,direction:a})}return this.focusNextHeaderRow(s,a,i)}focusNextHeaderRow(e,t,i){const s=e.headerRowIndex;let n=null,r;if(t==="Before"?s>0&&(r=s-1,this.currentHeaderRowWithoutSpan-=1,n=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"end")):(r=s+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),n=this.headerPositionUtils.findColAtEdgeForHeaderRow(r,"start")),!n)return!1;const{column:o,headerRowIndex:a}=this.headerPositionUtils.getHeaderIndexToFocus(n.column,n==null?void 0:n.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:o,headerRowIndex:a},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(qi(e)){const s=e.getDisplayedLeafColumns();i=t==="Before"?At(s):s[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}},S4=class extends de{wireBeans(e){this.animationFrameService=e.animationFrameService,this.headerNavigationService=e.headerNavigationService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService,this.filterManager=e.filterManager,this.menuService=e.menuService}setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new Ih(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedEventListeners({columnPivotModeChanged:this.onPivotModeChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this)}),this.onPivotModeChanged(),this.setupHeaderHeight();const s=this.onHeaderContextMenu.bind(this);this.addManagedElementListeners(this.eGui,{contextmenu:s}),this.mockContextMenuForIPad(s),this.ctrlsService.register("gridHeaderCtrl",this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],e),this.addManagedEventListeners({displayedColumnsChanged:e,columnHeaderHeightChanged:e,columnGroupHeaderHeightChanged:()=>this.animationFrameService.requestAnimationFrame(()=>e()),gridStylesChanged:e,advancedFilterEnabledChanged:e})}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){var r;const{columnModel:e}=this;let t=0;const i=this.columnModel.getGroupRowsHeight().reduce((o,a)=>o+a,0),s=this.columnModel.getColumnHeaderRowHeight();if((r=this.filterManager)!=null&&r.hasFloatingFilters()&&(t+=e.getFloatingFiltersHeight()),t+=i,t+=s,this.headerHeight===t)return;this.headerHeight=t;const n=`${t+1}px`;this.comp.setHeightAndMinHeight(n),this.eventService.dispatchEvent({type:"headerHeightChanged"})}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const t=this.visibleColsService.getAllCols().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gos.get("enableRtl"),i=e.shiftKey,s=i!==t?2:3;(this.headerNavigationService.navigateHorizontally(s,!0,e)||!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i,!0))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case le.LEFT:t=2;case le.RIGHT:{Ae(t)||(t=3),this.headerNavigationService.navigateHorizontally(t,!1,e)&&e.preventDefault();break}case le.UP:t=0;case le.DOWN:{Ae(t)||(t=1),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break}default:return}}onFocusOut(e){const{relatedTarget:t}=e;!t&&this.eGui.contains(_i(this.gos))||this.eGui.contains(t)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){var n;if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;const{target:s}=e??t;(s===this.eGui||s===((n=this.ctrlsService.getHeaderRowContainerCtrl())==null?void 0:n.getViewportElement()))&&this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!eu())return;const t=new Bc(this.eGui),i=s=>{e(void 0,s.touchStart,s.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}},W0=class extends de{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}wireBeans(e){this.visibleColsService=e.visibleColsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedEventListeners({columnContainerWidthChanged:e,displayedColumnsChanged:e,leftPinnedWidthChanged:e}),this.addSpacer&&this.addManagedEventListeners({rightPinnedWidthChanged:e,scrollVisibilityChanged:e,scrollbarWidthChanged:e}),this.setWidth()}setWidth(){const e=Ts(this.gos,"print"),t=this.visibleColsService.getBodyContainerWidth(),i=this.visibleColsService.getColsLeftWidth(),s=this.visibleColsService.getDisplayedColumnsRightWidth();let n;e?n=t+i+s:(n=t,this.addSpacer&&(this.gos.get("enableRtl")?i:s)===0&&this.scrollVisibleService.isVerticalScrollShowing()&&(n+=this.scrollVisibleService.getScrollbarWidth())),this.callback(n)}},w4=class extends de{constructor(e){super(),this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}wireBeans(e){this.funcColsService=e.funcColsService}onDragEnter(e){if(this.clearColumnsList(),this.gos.get("functionsReadOnly"))return;const t=e.dragItem.columns;t&&t.forEach(i=>{i.isPrimary()&&(i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i)))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?"pinned":"move":null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.funcColsService.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.funcColsService.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.funcColsService.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}onDragCancel(){this.clearColumnsList()}};function kk(e){const{isFromHeader:t,fromLeft:i,xPosition:s,fromEnter:n,fakeEvent:r,pinned:o,gos:a,columnModel:l,columnMoveService:c,visibleColsService:p}=e;let{allMovingColumns:g}=e;if(t){const k=[];g.forEach(_=>{var V;let B=null,H=_.getParent();for(;H!=null&&H.getDisplayedLeafColumns().length===1;)B=H,H=H.getParent();B!=null?(!!((V=B.getColGroupDef())!=null&&V.marryChildren)?B.getProvidedColumnGroup().getLeafColumns():B.getLeafColumns()).forEach(te=>{k.includes(te)||k.push(te)}):k.includes(_)||k.push(_)}),g=k}const f=g.slice();l.sortColsLikeCols(f);const y=R4({movingCols:f,draggingRight:i,xPosition:s,pinned:o,gos:a,columnModel:l,visibleColsService:p}),C=x4(f,l);if(y.length===0)return;const x=y[0];let M=C!==null&&!n;if(t&&(M=C!==null),M&&!r&&(!i&&x>=C||i&&x<=C))return;const b=p.getAllCols(),R=[];let I=null;for(let k=0;k<y.length;k++){const _=y[k],B=c.getProposedColumnOrder(f,_);if(!c.doesOrderPassRules(B))continue;const H=B.filter(U=>b.includes(U));if(I===null)I=H;else if(!Jc(H,I))break;const V=b4(B);R.push({move:_,fragCount:V})}if(R.length===0)return;R.sort((k,_)=>k.fragCount-_.fragCount);const P=R[0].move;if(!(P>l.getCols().length-g.length))return{columns:g,toIndex:P}}function j0(e){const{columns:t,toIndex:i}=kk(e)||{},{finished:s,columnMoveService:n}=e;return!t||i==null?null:(n.moveColumns(t,i,"uiColumnMoved",s),s?null:{columns:t,toIndex:i})}function x4(e,t){const i=t.getCols(),s=dW(e.map(l=>i.indexOf(l))),n=s[0];return At(s)-n!==s.length-1?null:n}function b4(e){function t(s){const n=[];let r=s.getOriginalParent();for(;r!=null;)n.push(r),r=r.getOriginalParent();return n}let i=0;for(let s=0;s<e.length-1;s++){let n=t(e[s]),r=t(e[s+1]);[n,r]=n.length>r.length?[n,r]:[r,n],n.forEach(o=>{r.indexOf(o)===-1&&i++})}return i}function M4(e,t){switch(t){case"left":return e.getLeftCols();case"right":return e.getRightCols();default:return e.getCenterCols()}}function R4(e){const{movingCols:t,draggingRight:i,xPosition:s,pinned:n,gos:r,columnModel:o,visibleColsService:a}=e;if(r.get("suppressMovableColumns")||t.some(I=>I.getColDef().suppressMovable))return[];const c=M4(a,n),p=o.getCols(),g=c.filter(I=>hh(t,I)),f=c.filter(I=>!hh(t,I)),y=p.filter(I=>!hh(t,I));let C=0,x=s;if(i){let I=0;g.forEach(P=>I+=P.getActualWidth()),x-=I}if(x>0){for(let I=0;I<f.length;I++){const P=f[I];if(x-=P.getActualWidth(),x<0)break;C++}i&&C++}let M;if(C>0){const I=f[C-1];M=y.indexOf(I)+1}else M=y.indexOf(f[0]),M===-1&&(M=0);const b=[M],R=(I,P)=>I-P;if(i){let I=M+1;const P=p.length-1;for(;I<=P;)b.push(I),I++;b.sort(R)}else{let I=M;const P=p.length-1;let k=p[I];for(;I<=P&&c.indexOf(k)<0;)I++,b.push(I),k=p[I];I=M-1;const _=0;for(;I>=_;)b.push(I),I--;b.sort(R).reverse()}return b}function Qy(e){var c;const{pinned:t,fromKeyboard:i,gos:s,ctrlsService:n,useHeaderRow:r,skipScrollPadding:o}=e;let a=(c=n.getHeaderRowContainerCtrl(t))==null?void 0:c.getViewportElement(),{x:l}=e;return a?(i&&(l-=a.getBoundingClientRect().left),s.get("enableRtl")&&(r&&(a=a.querySelector(".ag-header-row")),l=a.clientWidth-l),t==null&&!o&&(l+=n.get("center").getCenterViewportScrollLeft()),l):0}function Jd(e,t){for(const i of e)i.setMoving(t,"uiColumnMoved")}var gT=7,sM=100,Wv=sM/2,D4=5,E4=100,I4=class extends de{constructor(e){super(),this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.isCenterContainer=!Ae(e)}wireBeans(e){this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnMoveService=e.columnMoveService,this.dragAndDropService=e.dragAndDropService,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}getIconName(){var t;const e=((t=this.lastDraggingEvent)==null?void 0:t.dragItem.columns)??[];for(const i of e){const s=i.getPinned();if(i.getColDef().lockPinned){if(s==this.pinned)return"move";continue}if(s===this.pinned||!this.pinned)return"move";if(!s&&this.pinned)return"pinned"}return"notAllowed"}onDragEnter(e){const t=e.dragItem.columns;if(e.dragSource.type===0)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const s=e.dragItem.visibleState,n=(t||[]).filter(r=>s[r.getId()]);this.setColumnsVisible(n,!0,"uiColumnDragged")}this.gos.get("suppressMoveWhenColumnDragging")||this.attemptToPinColumns(t,this.pinned),this.onDragging(e,!0,!0)}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,s=!1){const n=this.gos.get("suppressMoveWhenColumnDragging");if(s&&!n){this.finishColumnMoving();return}if(this.lastDraggingEvent=e,!e||!s&&Pt(e.hDirection))return;const{pinned:r,gos:o,ctrlsService:a}=this,l=Qy({x:e.x,pinned:r,gos:o,ctrlsService:a});t||this.checkCenterForScrolling(l),n?this.handleColumnDragWhileSuppressingMovement(e,t,i,l,s):this.handleColumnDragWhileAllowingMovement(e,t,i,l,s)}onDragLeave(){this.ensureIntervalCleared(),this.clearHighlighted(),this.lastMovedInfo=null}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}onDragCancel(){this.clearHighlighted(),this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(!e)return;const s=e.filter(n=>!n.getColDef().lockVisible);this.columnModel.setColsVisible(s,t,i)}finishColumnMoving(){if(this.clearHighlighted(),!this.lastMovedInfo)return;const{columns:e,toIndex:t}=this.lastMovedInfo;this.columnMoveService.moveColumns(e,t,"uiColumnMoved",!0)}handleColumnDragWhileSuppressingMovement(e,t,i,s,n){const r=this.getAllMovingColumns(e,!0);if(n){const o=this.isAttemptingToPin(r);o&&this.attemptToPinColumns(r,void 0,!0);const{fromLeft:a,xPosition:l}=this.getNormalisedXPositionInfo(r,o)||{};if(a==null||l==null){this.finishColumnMoving();return}this.moveColumnsAfterHighlight({allMovingColumns:r,xPosition:l,fromEnter:t,fakeEvent:i,fromLeft:a})}else{if(!this.dragAndDropService.isDropZoneWithinThisGrid(e))return;this.highlightHoveredColumn(r,s)}}handleColumnDragWhileAllowingMovement(e,t,i,s,n){const r=this.getAllMovingColumns(e),o=this.normaliseDirection(e.hDirection)===1,a=e.dragSource.type===1,l=this.getMoveColumnParams({allMovingColumns:r,isFromHeader:a,xPosition:s,fromLeft:o,fromEnter:t,fakeEvent:i}),c=j0({...l,finished:n});c&&(this.lastMovedInfo=c)}getAllMovingColumns(e,t=!1){const i=e.dragSource.getDragItem();let s=null;t?(s=i.columnsInSplit,s||(s=i.columns)):s=i.columns;const n=r=>r.getColDef().lockPinned?r.getPinned()==this.pinned:!0;return s?s.filter(n):[]}getMoveColumnParams(e){const{allMovingColumns:t,isFromHeader:i,xPosition:s,fromLeft:n,fromEnter:r,fakeEvent:o}=e,{pinned:a,gos:l,columnModel:c,columnMoveService:p,visibleColsService:g}=this;return{allMovingColumns:t,isFromHeader:i,fromLeft:n,xPosition:s,pinned:a,fromEnter:r,fakeEvent:o,gos:l,columnModel:c,columnMoveService:p,visibleColsService:g}}findFirstAndLastMovingColumns(e){const t=e.length;let i,s;for(let n=0;n<=t;n++){if(!i){const r=e[n];r.getLeft()!=null&&(i=r)}if(!s){const r=e[t-1-n];r.getLeft()!=null&&(s=r)}if(i&&s)break}return{firstMovingCol:i,lastMovingCol:s}}highlightHoveredColumn(e,t){var p;const{gos:i,columnModel:s}=this,n=i.get("enableRtl"),r=s.getCols().filter(g=>g.isVisible()&&g.getPinned()===this.pinned);let o=null,a=null,l=null;for(const g of r){if(a=g.getActualWidth(),o=this.getNormalisedColumnLeft(g,0,n),o!=null){const f=o+a;if(o<=t&&f>=t){l=g;break}}o=null,a=null}if(l)e.indexOf(l)!==-1&&(l=null);else{for(let g=r.length-1;g>=0;g--){const f=r[g],y=r[g].getParent();if(!y){l=f;break}const C=y==null?void 0:y.getDisplayedLeafColumns();if(C.length){l=At(C);break}}if(!l)return;o=this.getNormalisedColumnLeft(l,0,n),a=l.getActualWidth()}if(((p=this.lastHighlightedColumn)==null?void 0:p.column)!==l&&this.clearHighlighted(),l==null||o==null||a==null)return;let c;t-o<a/2!==n?c=0:c=1,l.setHighlighted(c),this.lastHighlightedColumn={column:l,position:c}}getNormalisedXPositionInfo(e,t){const{gos:i,visibleColsService:s}=this,n=i.get("enableRtl"),{firstMovingCol:r,column:o,position:a}=this.getColumnMoveAndTargetInfo(e,t,n);if(!r||!o||a==null)return;const l=s.getAllCols(),c=l.indexOf(r),p=l.indexOf(o),g=a===0!==n,f=c<p||c===p&&!g;let y=0;if(g?f&&(y-=1):f||(y+=1),p+y===c)return;const C=l[p+y];if(!C)return;const x=this.getNormalisedColumnLeft(C,20,n);return{fromLeft:f,xPosition:x}}getColumnMoveAndTargetInfo(e,t,i){const s=this.lastHighlightedColumn||{},{firstMovingCol:n,lastMovingCol:r}=this.findFirstAndLastMovingColumns(e);if(!n||!r||s.column||!t)return{firstMovingCol:n,...s};const a=this.getPinDirection()==="left";return{firstMovingCol:n,position:a?1:0,column:a!==i?n:r}}normaliseDirection(e){if(this.gos.get("enableRtl"))switch(e){case 0:return 1;case 1:return 0}return e}getNormalisedColumnLeft(e,t,i){const{gos:s,ctrlsService:n}=this,r=e.getLeft();if(r==null)return null;const o=e.getActualWidth();return Qy({x:i?r+o-t:r+t,pinned:e.getPinned(),useHeaderRow:i,skipScrollPadding:!0,gos:s,ctrlsService:n})}isAttemptingToPin(e){const t=this.needToMoveLeft||this.needToMoveRight,i=this.failedMoveAttempts>gT;return t&&i||e.some(s=>s.getPinned()!==this.pinned)}moveColumnsAfterHighlight(e){const{allMovingColumns:t,xPosition:i,fromEnter:s,fakeEvent:n,fromLeft:r}=e,o=this.getMoveColumnParams({allMovingColumns:t,isFromHeader:!0,xPosition:i,fromLeft:r,fromEnter:s,fakeEvent:n}),{columns:a,toIndex:l}=kk(o)||{};a&&l!=null&&(this.lastMovedInfo={columns:a,toIndex:l}),this.finishColumnMoving()}clearHighlighted(){this.lastHighlightedColumn&&(this.lastHighlightedColumn.column.setHighlighted(null),this.lastHighlightedColumn=null)}checkCenterForScrolling(e){if(!this.isCenterContainer)return;const t=this.ctrlsService.get("center"),i=t.getCenterViewportScrollLeft(),s=i+t.getCenterWidth();this.gos.get("enableRtl")?(this.needToMoveRight=e<i+Wv,this.needToMoveLeft=e>s-Wv):(this.needToMoveLeft=e<i+Wv,this.needToMoveRight=e>s-Wv),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}ensureIntervalStarted(){var e;this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),E4),(e=this.dragAndDropService.getDragAndDropImageComponent())==null||e.setIcon(this.needToMoveLeft?"left":"right",!0))}ensureIntervalCleared(){var e;this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.failedMoveAttempts=0,(e=this.dragAndDropService.getDragAndDropImageComponent())==null||e.setIcon(this.getIconName()))}moveInterval(){var s,n;let e;this.intervalCount++,e=10+this.intervalCount*D4,e>sM&&(e=sM);let t=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),t!==0)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{if(this.failedMoveAttempts++,this.failedMoveAttempts<=gT+1)return;if((s=this.dragAndDropService.getDragAndDropImageComponent())==null||s.setIcon("pinned"),!this.gos.get("suppressMoveWhenColumnDragging")){const r=(n=this.lastDraggingEvent)==null?void 0:n.dragItem.columns;this.attemptToPinColumns(r,void 0,!0)}}}getPinDirection(){if(this.needToMoveLeft||this.pinned==="left")return"left";if(this.needToMoveRight||this.pinned==="right")return"right"}attemptToPinColumns(e,t,i=!1){const s=(e||[]).filter(n=>!n.getColDef().lockPinned);return s.length?(i&&(t=this.getPinDirection()),this.columnModel.setColsPinned(s,t,"uiColumnDragged"),i&&this.dragAndDropService.nudge(),s.length):0}destroy(){super.destroy(),this.lastDraggingEvent=null,this.clearHighlighted(),this.lastMovedInfo=null}},L4=class extends de{wireBeans(e){this.dragAndDropService=e.dragAndDropService,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(this,e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.left.getContainerElement()],[e.bottomLeft.getContainerElement()],[e.topLeft.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.right.getContainerElement()],[e.bottomRight.getContainerElement()],[e.topRight.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.center.getViewportElement()],[e.bottomCenter.getViewportElement()],[e.topCenter.getViewportElement()]];break}}),this.moveColumnFeature=this.createManagedBean(new I4(this.pinned)),this.bodyDropPivotTarget=this.createManagedBean(new w4(this.pinned)),this.dragAndDropService.addDropTarget(this),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this))}isInterestedIn(e){return e===1||e===0&&this.gos.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===0}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}onDragCancel(){this.currentDropListener.onDragCancel()}},T4=class extends de{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.pinnedWidthService=e.pinnedWidthService,this.ctrlsService=e.ctrlsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s,n){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=s,this.ctrl=n}postConstruct(){const e=[];let t,i;const s=()=>{if(Ni(this.eResize,t),!t)return;const o=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(o),i){const a=this.gos.get("skipHeaderOnAutoSize"),l=()=>{this.columnAutosizeService.autoSizeColumn(this.column,"uiColumnResized",a)};this.eResize.addEventListener("dblclick",l);const c=new Bc(this.eResize);c.addEventListener("doubleTap",l),e.push(()=>{this.eResize.removeEventListener("dblclick",l),c.removeEventListener("doubleTap",l),c.destroy()})}},n=()=>{e.forEach(o=>o()),e.length=0},r=()=>{const o=this.column.isResizable(),a=!this.gos.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(o!==t||a!==i)&&(t=o,i=a,n(),s())};r(),this.addDestroyFunc(n),this.ctrl.setRefreshFunction("resize",r)}onResizing(e,t){const{column:i,lastResizeAmount:s,resizeStartWidth:n}=this,r=this.normaliseResizeAmount(t),o=n+r,a=[{key:i,newWidth:o}];if(this.column.getPinned()){const l=this.pinnedWidthService.getPinnedLeftWidth(),c=this.pinnedWidthService.getPinnedRightWidth(),p=om(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(l+c+(r-s)>p)return}this.lastResizeAmount=r,this.columnSizeService.setColumnWidths(a,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1)}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i=this.pinned!=="left",s=this.pinned==="right";return this.gos.get("enableRtl")?i&&(t*=-1):s&&(t*=-1),t}},A4=class extends de{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}onSpaceKeyDown(e){const t=this.cbSelectAll;t.isDisplayed()&&!t.getGui().contains(_i(this.gos))&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new P0),this.cbSelectAll.addCssClass("ag-header-select-all"),Fo(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedEventListeners({newColumnsLoaded:this.onNewColumnsLoaded.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),selectionChanged:this.onSelectionChanged.bind(this),paginationChanged:this.onSelectionChanged.bind(this),modelUpdated:this.onModelChanged.bind(this)}),this.addManagedListeners(this.cbSelectAll,{fieldValueChanged:this.onCbSelectAll.bind(this)}),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){this.isAlive()&&this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}onSelectionChanged(){this.cbSelectAllVisible&&this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),s=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.cbSelectAllVisible?this.headerCellCtrl.setAriaDescriptionProperty("selectAll",`${s} (${i})`):this.headerCellCtrl.setAriaDescriptionProperty("selectAll",null),this.cbSelectAll.setInputAriaLabel(e("ariaHeaderSelection","Column with Header Selection")),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return RF(this.gos)?!0:(we(`${e} is only available if using 'multiRow' selection mode.`),!1)}checkRightRowModelType(e){return xi(this.gos)||ya(this.gos)?!0:(we(`${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${this.rowModel.getType()}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly();let s="uiSelectAll";i?s="uiSelectAllCurrentPage":t&&(s="uiSelectAllFiltered");const n={source:s,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(n):this.selectionService.deselectAllRowNodes(n)}isCheckboxSelection(){const e=this.gos.get("rowSelection"),t=typeof e=="object"&&zy(e)&&sm(this.column),i=this.column.getColDef().headerCheckboxSelection;let s=!1;return t?s=!0:typeof i=="function"?s=i(this.gos.addGridCommonParams({column:this.column,colDef:this.column.getColDef()})):s=!!i,s&&this.checkRightRowModelType(t?"headerCheckbox":"headerCheckboxSelection")&&this.checkSelectionType(t?"headerCheckbox":"headerCheckboxSelection")}isFilteredOnly(){const e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="filtered":!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){const e=this.gos.get("rowSelection");return typeof e=="object"?e.mode==="multiRow"&&e.selectAll==="currentPage":!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}},P4=class extends NC{constructor(e,t,i){super(e,t,i),this.refreshFunctions={},this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,s,n){this.comp=e,n=nm(this,this.beans.context,n),this.setGui(t,n),this.updateState(),this.setupWidth(n),this.setupMovingCss(n),this.setupMenuClass(n),this.setupSortableClass(n),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight({wrapperElement:s,checkMeasuringCallback:o=>this.setRefreshFunction("measuring",o),compBean:n}),this.addColumnHoverListener(n),this.setupFilterClass(n),this.setupClassesFromColDef(),this.setupTooltip(n),this.addActiveHeaderMouseListeners(n),this.setupSelectAll(n),this.setupUserComp(n),this.refreshAria(),this.resizeFeature=n.createManagedBean(new T4(this.getPinned(),this.column,i,e,this)),n.createManagedBean(new z0([this.column],t)),n.createManagedBean(new G0(this.column,t,this.beans)),n.createManagedBean(new Ih(t,{shouldStopEventPropagation:o=>this.shouldStopEventPropagation(o),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(n),n.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],()=>this.refresh(n)),n.addManagedListeners(this.column,{colDefChanged:()=>this.refresh(n)}),n.addManagedListeners(this.column,{headerHighlightChanged:this.onHeaderHighlightChanged.bind(this)});const r=()=>this.checkDisplayName(n);n.addManagedEventListeners({columnValueChanged:r,columnRowGroupChanged:r,columnPivotChanged:r,headerHeightChanged:this.onHeaderHeightChanged.bind(this)}),n.addDestroyFunc(()=>{this.refreshFunctions={},this.selectAllFeature=null,this.dragSourceElement=void 0,this.userCompDetails=null,this.userHeaderClasses.clear(),this.ariaDescriptionProperties.clear(),this.clearComponent()})}resizeHeader(e,t){if(!this.column.isResizable())return;const i=this.column.getActualWidth(),s=this.column.getMinWidth(),n=this.column.getMaxWidth(),r=Math.min(Math.max(i+e,s),n);this.beans.columnSizeService.setColumnWidths([{key:this.column,newWidth:r}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,beans:i,column:s,ctrlsService:n}=this,{gos:r,columnModel:o,columnMoveService:a,visibleColsService:l}=i,c=this.getPinned(),p=t.getBoundingClientRect().left,g=s.getActualWidth(),f=r.get("enableRtl"),C=Qy({x:e===0!==f?p-20:p+g+20,pinned:c,fromKeyboard:!0,gos:r,ctrlsService:n}),x=this.focusService.getFocusedHeader();j0({allMovingColumns:[s],isFromHeader:!0,fromLeft:e===1,xPosition:C,pinned:c,fromEnter:!1,fakeEvent:!1,gos:r,columnModel:o,columnMoveService:a,visibleColsService:l,finished:!0}),n.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(s,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&x&&this.restoreFocus(x)}restoreFocus(e){this.focusService.focusHeaderPosition({headerPosition:{...e,column:this.column}})}setupUserComp(e){const t=this.lookupUserCompDetails(e);this.setCompDetails(t)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(e){const t=this.createParams(e),i=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(i,t)}createParams(e){return this.gos.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:i=>{this.menuService.showColumnMenu({column:this.column,buttonElement:i,positionBy:"button"})},showColumnMenuAfterMouseClick:i=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:i,positionBy:"mouse"})},showFilter:i=>{this.menuService.showFilterMenu({column:this.column,buttonElement:i,containerType:"columnFilter",positionBy:"button"})},progressSort:i=>{this.beans.sortController.progressSort(this.column,!!i,"uiColumnSorted")},setSort:(i,s)=>{this.beans.sortController.setSortForColumn(this.column,i,!!s,"uiColumnSorted")},eGridHeader:this.getGui(),setTooltip:(i,s)=>{this.setupTooltip(e,i,s)}})}setupSelectAll(e){this.selectAllFeature=e.createManagedBean(new A4(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===le.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===le.ENTER&&this.onEnterKeyDown(e),e.key===le.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){if(e.ctrlKey||e.metaKey)this.showMenuOnKeyPress(e,!0);else if(this.sortable){const t=e.shiftKey;this.beans.sortController.progressSort(this.column,t,"uiColumnSorted")}}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();!i||!(i instanceof qb)||i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s=this.gos.get("tooltipShowMode")==="whenTruncated",n=this.eGui,r=this.column.getColDef();!i&&s&&!r.headerComponent&&(i=()=>{const l=n.querySelector(".ag-header-cell-text");return l?l.scrollWidth>l.clientWidth:!0});const o={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>n,getLocation:()=>"header",getTooltipValue:()=>t??this.column.getColDef().headerTooltip,shouldDisplayTooltip:i},a=e.createManagedBean(new Cp(o));this.setRefreshFunction("tooltip",()=>a.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),i=Rk(t,this.gos,this.column,null),s=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(n=>{s.has(n)?s.delete(n):this.comp.addOrRemoveCssClass(n,!0)}),s.forEach(n=>this.comp.addOrRemoveCssClass(n,!1))};this.setRefreshFunction("headerClasses",e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:i,displayName:s,dragAndDropService:n,gos:r}=this,{columnModel:o}=i;let a=!this.gos.get("suppressDragLeaveHidesColumns");const l=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>a?"hide":"notAllowed",getDragItem:()=>this.createDragItem(t),dragItemName:s,onDragStarted:()=>{a=!r.get("suppressDragLeaveHidesColumns"),Jd([t],!0)},onDragStopped:()=>Jd([t],!1),onDragCancelled:()=>Jd([t],!1),onGridEnter:c=>{var p;if(a){const g=((p=c==null?void 0:c.columns)==null?void 0:p.filter(f=>!f.getColDef().lockVisible))||[];o.setColsVisible(g,!0,"uiColumnMoved")}},onGridExit:c=>{var p;if(a){const g=((p=c==null?void 0:c.columns)==null?void 0:p.filter(f=>!f.getColDef().lockVisible))||[];o.setColsVisible(g,!1,"uiColumnMoved")}}};n.addDragSource(l,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}setRefreshFunction(e,t){this.refreshFunctions[e]=t}refresh(e){this.updateState(),this.refreshHeaderComp(e),this.refreshAria(),Object.values(this.refreshFunctions).forEach(t=>t())}refreshHeaderComp(e){const t=this.lookupUserCompDetails(e);(this.comp.getUserCompInstance()!=null&&this.userCompDetails.componentClass==t.componentClass?this.attemptHeaderCompRefresh(t.params):!1)?this.setDragSource(this.dragSourceElement):this.setCompDetails(t)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!t||!t.refresh?!1:t.refresh(e)}calculateDisplayName(){return this.beans.columnNameService.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(e){this.displayName!==this.calculateDisplayName()&&this.refresh(e)}workOutDraggable(){const e=this.column.getColDef();return!!(!this.gos.get("suppressMovableColumns")&&!e.suppressMovable&&!e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}setupWidth(e){const t=()=>{const i=this.column.getActualWidth();this.comp.setWidth(`${i}px`)};e.addManagedListeners(this.column,{widthChanged:t}),t()}setupMovingCss(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};e.addManagedListeners(this.column,{movingChanged:t}),t()}setupMenuClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};e.addManagedListeners(this.column,{menuVisibleChanged:t}),t()}setupSortableClass(e){const t=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};t(),this.setRefreshFunction("updateSortable",t),e.addManagedEventListeners({sortChanged:this.refreshAriaSort.bind(this)})}setupFilterClass(e){const t=()=>{const i=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",i),this.refreshAria()};e.addManagedListeners(this.column,{filterActiveChanged:t}),t()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.setRefreshFunction("wrapText",e)}onHeaderHighlightChanged(){const e=this.column.getHighlighted(),t=e===0,i=e===1;this.comp.addOrRemoveCssClass("ag-header-highlight-before",t),this.comp.addOrRemoveCssClass("ag-header-highlight-after",i)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:s}=this,n=this.beans.columnModel.getGroupRowsHeight(),r=n.reduce((g,f)=>g+=f,0)===0;if(i.addOrRemoveCssClass("ag-header-parent-hidden",r),!t.isSpanHeaderHeight()){e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),i.addOrRemoveCssClass("ag-header-span-total",!1);return}const{numberOfParents:o,isSpanningTotal:a}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",o>0);const{columnModel:l}=s,c=l.getColumnHeaderRowHeight();if(o===0){i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),e.style.setProperty("height",`${c}px`);return}i.addOrRemoveCssClass("ag-header-span-total",a);let p=0;for(let g=0;g<o;g++)p+=n[n.length-1-g];e.style.setProperty("top",`${-p}px`),e.style.setProperty("height",`${c+p}px`)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(jW(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){t!=null?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){if(!this.eGui.contains(_i(this.beans.gos)))return;const e=Array.from(this.ariaDescriptionProperties.keys()).sort((t,i)=>t==="filter"?-1:i.charCodeAt(0)-t.charCodeAt(0)).map(t=>this.ariaDescriptionProperties.get(t)).join(". ");this.beans.ariaAnnouncementService.announceValue(e,"columnHeader")}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(e){const t=()=>{if(!this.gos.get("columnHoverHighlight"))return;const i=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",i)};e.addManagedEventListeners({columnHoverChanged:t}),t()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column),s=n=>this.handleContextMenuMouseEvent(n,void 0,this.column);e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:s})}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof qb?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy()}},F4=class extends de{wireBeans(e){this.horizontalResizeService=e.horizontalResizeService,this.autoWidthCalculator=e.autoWidthCalculator,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.columnAutosizeService=e.columnAutosizeService}constructor(e,t,i,s){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=s}postConstruct(){if(!this.columnGroup.isResizable()){this.comp.setResizableDisplayed(!1);return}const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gos.get("suppressAutoSize")){const t=this.gos.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const i=[];this.columnGroup.getDisplayedLeafColumns().forEach(n=>{n.getColDef().suppressAutoSize||i.push(n.getColId())}),i.length>0&&this.columnAutosizeService.autoSizeCols({colKeys:i,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const s=this.normaliseDragChange(t),n=this.resizeStartWidth+s;this.resizeColumnsFromLocalValues(n,i,e)}getInitialValues(e){const t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),s=this.getSizeRatiosOfColumns(t,i),n={columnsToResize:t,resizeStartWidth:i,resizeRatios:s};let r=null;if(e&&(r=this.visibleColsService.getGroupAtDirection(this.columnGroup,"After")),r){const o=r.getDisplayedLeafColumns(),a=n.groupAfterColumns=o.filter(c=>c.isResizable()),l=n.groupAfterStartWidth=this.getInitialSizeOfColumns(a);n.groupAfterRatios=this.getSizeRatiosOfColumns(a,l)}else n.groupAfterColumns=void 0,n.groupAfterStartWidth=void 0,n.groupAfterRatios=void 0;return n}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:s,groupAfterColumns:n,groupAfterStartWidth:r,groupAfterRatios:o}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=s,this.resizeTakeFromCols=n,this.resizeTakeFromStartWidth=r,this.resizeTakeFromRatios=o}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){if(!this.resizeCols||!this.resizeRatios)return;const s={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:this.resizeTakeFromCols??void 0,groupAfterStartWidth:this.resizeTakeFromStartWidth??void 0,groupAfterRatios:this.resizeTakeFromRatios??void 0};this.resizeColumns(s,e,t,i)}resizeColumns(e,t,i,s=!0){const{columnsToResize:n,resizeStartWidth:r,resizeRatios:o,groupAfterColumns:a,groupAfterStartWidth:l,groupAfterRatios:c}=e,p=[];if(p.push({columns:n,ratios:o,width:t}),a){const g=t-r;p.push({columns:a,ratios:c,width:l-g})}this.columnSizeService.resizeColumnSets({resizeSets:p,finished:s,source:i}),s&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(i=>i.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gos.get("enableRtl")?this.pinned!=="left"&&(t*=-1):this.pinned==="right"&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}},k4=class extends de{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListeners(this.columnGroup,{displayedChildrenChanged:this.onDisplayedChildrenChanged.bind(this)}),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",e===0)}},N4=class extends NC{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const s=this.getGui();this.setDragSource(s)}},this.column=e}setComp(e,t,i,s,n){this.comp=e,n=nm(this,this.beans.context,n),this.setGui(t,n),this.displayName=this.beans.columnNameService.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(n),this.setupExpandable(n),this.setupTooltip(n),this.setupAutoHeight({wrapperElement:s,compBean:n}),this.setupUserComp(n),this.addHeaderMouseListeners(n),this.addManagedPropertyListener("groupHeaderHeight",this.refreshMaxHeaderHeight.bind(this)),this.refreshMaxHeaderHeight();const r=this.getParentRowCtrl().getPinned(),o=this.column.getProvidedColumnGroup().getLeafColumns();n.createManagedBean(new z0(o,t)),n.createManagedBean(new G0(this.column,t,this.beans)),n.createManagedBean(new k4(e,this.column)),this.resizeFeature=n.createManagedBean(new F4(e,i,r,this.column)),n.createManagedBean(new Ih(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addHighlightListeners(n,o),n.addManagedPropertyListener("suppressMovableColumns",this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners(n),n.addDestroyFunc(()=>this.clearComponent())}refreshMaxHeaderHeight(){const{gos:e,comp:t}=this,i=e.get("groupHeaderHeight");i!=null?i===0?t.setHeaderWrapperHidden(!0):t.setHeaderWrapperMaxHeight(i):(t.setHeaderWrapperHidden(!1),t.setHeaderWrapperMaxHeight(null))}addHighlightListeners(e,t){if(this.beans.gos.get("suppressMoveWhenColumnDragging"))for(const i of t)e.addManagedListeners(i,{headerHighlightChanged:this.onLeafColumnHighlightChanged.bind(this,i)})}onLeafColumnHighlightChanged(e){const t=this.column.getDisplayedLeafColumns(),i=t[0]===e,s=At(t)===e;if(!i&&!s)return;const n=e.getHighlighted(),r=!!this.getParentRowCtrl().findHeaderCellCtrl(l=>l.getColumnGroupChild().isMoving());let o=!1,a=!1;if(r){const l=this.beans.gos.get("enableRtl"),c=n===1,p=n===0;i&&(l?a=c:o=p),s&&(l?o=p:a=c)}this.comp.addOrRemoveCssClass("ag-header-highlight-before",o),this.comp.addOrRemoveCssClass("ag-header-highlight-after",a)}getColumn(){return this.column}resizeHeader(e,t){if(!this.resizeFeature)return;const i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:i,column:s,ctrlsService:n}=this,{gos:r,columnModel:o,columnMoveService:a,visibleColsService:l}=t,c=r.get("enableRtl"),p=e===0,g=this.getPinned(),f=i.getBoundingClientRect(),y=f.left,C=f.width,x=Qy({x:p!==c?y-20:y+C+20,pinned:g,fromKeyboard:!0,gos:r,ctrlsService:n}),M=s.getGroupId(),b=this.focusService.getFocusedHeader();j0({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,fromLeft:e===1,xPosition:x,pinned:g,fromEnter:!1,fakeEvent:!1,gos:r,columnModel:o,columnMoveService:a,visibleColsService:l,finished:!0});const R=s.getDisplayedLeafColumns(),I=p?R[0]:At(R);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(I,"auto"),(!this.isAlive()||this.beans.gos.get("ensureDomOrder"))&&b&&this.restoreFocus(M,s,b)}restoreFocus(e,t,i){const s=t.getLeafColumns();if(!s.length)return;const n=s[0].getParent();if(!n)return;const r=this.findGroupWidthId(n,e);r&&this.focusService.focusHeaderPosition({headerPosition:{...i,column:r}})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){this.resizeFeature&&this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(e){const t=this.gos.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:s=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),s,"gridInitializing")},setTooltip:(s,n)=>{this.setupTooltip(e,s,n)}}),i=this.userComponentFactory.getHeaderGroupCompDetails(t);this.comp.setUserCompDetails(i)}addHeaderMouseListeners(e){const t=n=>this.handleMouseOverChange(n.type==="mouseenter"),i=()=>this.dispatchColumnMouseEvent("columnHeaderClicked",this.column.getProvidedColumnGroup()),s=n=>this.handleContextMenuMouseEvent(n,void 0,this.column.getProvidedColumnGroup());e.addManagedListeners(this.getGui(),{mouseenter:t,mouseleave:t,click:i,contextmenu:s})}handleMouseOverChange(e){this.eventService.dispatchEvent({type:e?"columnHeaderMouseOver":"columnHeaderMouseLeave",column:this.column.getProvidedColumnGroup()})}setupTooltip(e,t,i){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature));const s=this.column.getColGroupDef(),n=this.gos.get("tooltipShowMode")==="whenTruncated",r=this.eGui;!i&&n&&!(s!=null&&s.headerGroupComponent)&&(i=()=>{const a=r.querySelector(".ag-header-group-text");return a?a.scrollWidth>a.clientWidth:!0});const o={getColumn:()=>this.column,getGui:()=>r,getLocation:()=>"headerGroup",getTooltipValue:()=>t??(s&&s.headerTooltip),shouldDisplayTooltip:i};s&&(o.getColDef=()=>s),e.createManagedBean(new Cp(o))}setupExpandable(e){const t=this.column.getProvidedColumnGroup();this.refreshExpanded();const i=this.refreshExpanded.bind(this);e.addManagedListeners(t,{expandedChanged:i,expandableChanged:i})}refreshExpanded(){const{column:e}=this;this.expandable=e.isExpandable();const t=e.isExpanded();this.expandable?this.comp.setAriaExpanded(t?"true":"false"):this.comp.setAriaExpanded(void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=Rk(e,this.gos,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(s=>s.isSpanHeaderHeight())&&t.push("ag-header-span-height")):(t.push("ag-header-group-cell-with-group"),e!=null&&e.wrapHeaderText&&t.push("ag-header-cell-wrap-text")),t.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(e){const i=this.column.getProvidedColumnGroup().getLeafColumns(),s=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());i.forEach(n=>{e.addManagedListeners(n,{movingChanged:s})}),s()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(!(!this.expandable||!t)&&e.key===le.ENTER){const i=this.column,s=!i.isExpanded();this.beans.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),s,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;const{beans:t,column:i,displayName:s,gos:n,dragAndDropService:r}=this,{columnModel:o}=t,a=i.getProvidedColumnGroup().getLeafColumns();let l=!n.get("suppressDragLeaveHidesColumns");const c=this.dragSource={type:1,eElement:e,getDefaultIconName:()=>l?"hide":"notAllowed",dragItemName:s,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{l=!n.get("suppressDragLeaveHidesColumns"),Jd(a,!0)},onDragStopped:()=>Jd(a,!1),onDragCancelled:()=>Jd(a,!1),onGridEnter:p=>{if(l){const{columns:g=[],visibleState:f}=p??{},y=g.filter(C=>!C.getColDef().lockVisible&&(!f||f[C.getColId()]));o.setColsVisible(y,!0,"uiColumnMoved")}},onGridExit:p=>{var g;if(l){const f=((g=p==null?void 0:p.columns)==null?void 0:g.filter(y=>!y.getColDef().lockVisible))||[];o.setColsVisible(f,!1,"uiColumnMoved")}}};r.addDragSource(c,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach(o=>i[o.getId()]=o.isVisible());const s=[];this.beans.visibleColsService.getAllCols().forEach(o=>{t.indexOf(o)>=0&&(s.push(o),Sn(t,o))}),t.forEach(o=>s.push(o));const n=[],r=e.getLeafColumns();for(const o of s)r.indexOf(o)!==-1&&n.push(o);return{columns:s,columnsInSplit:n,visibleState:i}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gos.get("suppressMovableColumns")}destroy(){super.destroy()}},O4=0,Qx=class extends de{constructor(e,t,i){super(),this.instanceId=O4++,this.rowIndex=e,this.pinned=t,this.type=i;const s=i=="group"?"ag-header-row-column-group":i=="filter"?"ag-header-row-column-filter":"ag-header-row-column";this.headerRowClass=`ag-header-row ${s}`}wireBeans(e){this.beans=e}postConstruct(){this.isPrintLayout=Ts(this.gos,"print"),this.isEnsureDomOrder=this.gos.get("ensureDomOrder")}areCellsRendered(){return this.comp?this.getHeaderCellCtrls().every(e=>e.getGui()!=null):!1}setComp(e,t,i=!0){this.comp=e,t=nm(this,this.beans.context,t),i&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners(t)}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(e){const t=this.onRowHeightChanged.bind(this);e.addManagedEventListeners({columnResized:this.onColumnResized.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:i=>this.onVirtualColumnsChanged(i.afterScroll),columnGroupHeaderHeightChanged:t,columnHeaderHeightChanged:t,gridStylesChanged:t,advancedFilterEnabledChanged:t}),e.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),e.addManagedPropertyListener("ensureDomOrder",i=>this.isEnsureDomOrder=i.currentValue),e.addManagedPropertyListeners(["headerHeight","pivotHeaderHeight","groupHeaderHeight","pivotGroupHeaderHeight","floatingFiltersHeight"],t)}getHeaderCellCtrl(e){if(this.headerCellCtrls)return py(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=Ts(this.gos,"print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{visibleColsService:e}=this.beans;return this.isPrintLayout?this.pinned!=null?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){const{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans,i=[],s=e.getGroupRowsHeight(),n=e.getColumnHeaderRowHeight();i.push(...s),i.push(n),t!=null&&t.hasFloatingFilters()&&i.push(e.getFloatingFiltersHeight());let r=0;for(let a=0;a<this.rowIndex;a++)r+=i[a];const o=i[this.rowIndex];return{topOffset:r,rowHeight:o}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls(),i=this.isEnsureDomOrder||this.isPrintLayout;this.comp.setHeaderCtrls(t,i,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const s of t)this.recycleAndCreateHeaderCtrls(s,e);const i=s=>{const{focusService:n,visibleColsService:r}=this.beans;return n.isHeaderWrapperFocused(s)?r.isVisible(s.getColumnGroupChild()):!1};if(e)for(const[s,n]of e)i(n)?this.headerCellCtrls.set(s,n):this.destroyBean(n);return this.getHeaderCellCtrls()}getHeaderCellCtrls(){var e;return Array.from(((e=this.headerCellCtrls)==null?void 0:e.values())??[])}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;const i=e.getUniqueId();let s;if(t&&(s=t.get(i),t.delete(i)),s&&s.getColumnGroupChild()!=e&&(this.destroyBean(s),s=void 0),s==null)switch(this.type){case"filter":{s=this.createBean(this.beans.ctrlsFactory.getInstance("headerFilterCell",e,this.beans,this));break}case"group":s=this.createBean(new N4(e,this.beans,this));break;default:s=this.createBean(new P4(e,this.beans,this));break}this.headerCellCtrls.set(i,s)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(this.pinned!=null)return[];let e=[];const t=this.getActualDepth(),{columnViewportService:i}=this.beans;return["left",null,"right"].forEach(s=>{const n=i.getHeadersToRender(s,t);e=e.concat(n)}),e}getActualDepth(){return this.type=="filter"?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnViewportService.getHeadersToRender(this.pinned,this.getActualDepth())}findHeaderCellCtrl(e){if(!this.headerCellCtrls)return;const t=this.getHeaderCellCtrls();let i;return typeof e=="function"?i=t.find(e):i=t.find(s=>s.getColumnGroupChild()==e),i}focusHeader(e,t){const i=this.findHeaderCellCtrl(e);return i?i.focus(t):!1}destroy(){var e;(e=this.headerCellCtrls)==null||e.forEach(t=>{this.destroyBean(t)}),this.headerCellCtrls=void 0,super.destroy()}},_4=class extends de{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}wireBeans(e){this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.focusService=e.focusService,this.filterManager=e.filterManager}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport);const i=this.onDisplayedColumnsChanged.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),displayedColumnsChanged:i,advancedFilterEnabledChanged:i});const s=`${typeof this.pinned=="string"?this.pinned:"center"}Header`;this.ctrlsService.register(s,this),this.columnModel.isReady()&&this.refresh()}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}refresh(e=!1){const t=new up,i=this.focusService.getFocusHeaderToUseAfterRefresh(),s=()=>{const a=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let l=0;l<a;l++){const c=this.createBean(new Qx(t.next(),this.pinned,"group"));this.groupsRowCtrls.push(c)}},n=()=>{const a=t.next(),l=!this.hidden&&(this.columnsRowCtrl==null||!e||this.columnsRowCtrl.getRowIndex()!==a);(l||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),l&&(this.columnsRowCtrl=this.createBean(new Qx(a,this.pinned,"column")))},r=()=>{var c;this.includeFloatingFilter=!!((c=this.filterManager)!=null&&c.hasFloatingFilters())&&!this.hidden;const a=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter){a();return}const l=t.next();if(this.filtersRowCtrl){const p=this.filtersRowCtrl.getRowIndex()!==l;(!e||p)&&a()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new Qx(l,this.pinned,"filter")))};s(),n(),r();const o=this.getAllCtrls();this.comp.setCtrls(o),this.restoreFocusOnHeader(i)}getHeaderCtrlForColumn(e){var t;if(Zc(e))return(t=this.columnsRowCtrl)==null?void 0:t.getHeaderCellCtrl(e);if(this.groupsRowCtrls.length!==0)for(let i=0;i<this.groupsRowCtrls.length;i++){const s=this.groupsRowCtrls[i].getHeaderCellCtrl(e);if(s)return s}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const i=this.getAllCtrls()[e];return i?i.getType():void 0}focusHeader(e,t,i){const n=this.getAllCtrls()[e];return n?n.focusHeader(t,i):!1}getViewportElement(){return this.eViewport}getGroupRowCount(){return this.groupsRowCtrls.length}getGroupRowCtrlAtIndex(e){return this.groupsRowCtrls[e]}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}setupDragAndDrop(e){const t=new L4(this.pinned,e);this.createManagedBean(t)}restoreFocusOnHeader(e){if(!e)return;const{column:t}=e;t.getPinned()==this.pinned&&this.focusService.focusHeaderPosition({headerPosition:e})}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){var t;const e=((t=this.filterManager)==null?void 0:t.hasFloatingFilters())&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){this.pinned==null&&this.createManagedBean(new W0(e=>this.comp.setCenterWidth(`${e}px`),!0))}setupPinnedWidth(){if(this.pinned==null)return;const e=this.pinned==="left",t=this.pinned==="right";this.hidden=!0;const i=()=>{const s=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(s==null)return;const n=s==0,r=this.hidden!==n,o=this.gos.get("enableRtl"),a=this.scrollVisibleService.getScrollbarWidth(),c=this.scrollVisibleService.isVerticalScrollShowing()&&(o&&e||!o&&t)?s+a:s;this.comp.setPinnedContainerWidth(`${c}px`),this.comp.setDisplayed(!n),r&&(this.hidden=n,this.refresh())};this.addManagedEventListeners({leftPinnedWidthChanged:i,rightPinnedWidthChanged:i,scrollVisibilityChanged:i,scrollbarWidthChanged:i})}},U0=class extends de{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:e==="autoHeight",normal:e==="normal",print:e==="print"},i=t.autoHeight?"ag-layout-auto-height":t.print?"ag-layout-print":"ag-layout-normal";this.view.updateLayoutClasses(i,t)}getDomLayout(){const e=this.gos.get("domLayout")??"normal";return["normal","print","autoHeight"].indexOf(e)===-1?(we(`${e} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):e}},B4=class extends di{constructor(){super(`
            <div class="ag-overlay" role="presentation">
                <div class="ag-overlay-panel" role="presentation">
                    <div class="ag-overlay-wrapper" data-ref="eOverlayWrapper" role="presentation"></div>
                </div>
            </div>`),this.eOverlayWrapper=st,this.activePromise=null,this.activeOverlay=null,this.updateListenerDestroyFunc=null,this.activeOverlayWrapperCssClass=null,this.elToFocusAfter=null}wireBeans(e){this.overlayService=e.overlayService,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}handleKeyDown(e){if(e.key!==le.TAB||e.defaultPrevented||pl(e)||this.focusService.findNextFocusableElement(this.eOverlayWrapper,!1,e.shiftKey))return;let i=!1;e.shiftKey?i=this.focusService.focusGridView(At(this.visibleColsService.getAllCols()),!0,!1):i=this.focusService.focusNextGridCoreContainer(!1),i&&e.preventDefault()}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList;i.toggle("ag-layout-auto-height",t.autoHeight),i.toggle("ag-layout-normal",t.normal),i.toggle("ag-layout-print",t.print)}postConstruct(){this.createManagedBean(new U0(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.setOverlayWrapperComp(this),this.addManagedElementListeners(this.getFocusableElement(),{keydown:this.handleKeyDown.bind(this)})}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i,s){if(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.elToFocusAfter=null,this.activePromise=e,!!e){if(this.setDisplayed(!0,{skipAriaHidden:!0}),i&&this.focusService.isGridFocused()){const n=_i(this.gos);n&&!SF(this.gos)&&(this.elToFocusAfter=n)}e.then(n=>{if(this.activePromise!==e){this.activeOverlay!==n&&(this.destroyBean(n),n=null);return}if(this.activePromise=null,!n)return;if(this.activeOverlay!==n&&(this.eOverlayWrapper.appendChild(n.getGui()),this.activeOverlay=n,s)){const o=n;this.updateListenerDestroyFunc=this.addManagedPropertyListener(s,({currentValue:a})=>{var l;(l=o.refresh)==null||l.call(o,this.gos.addGridCommonParams({...a??{}}))})}const r=this.focusService;i&&r.isGridFocused()&&r.focusInto(this.eOverlayWrapper)})}}updateOverlayWrapperPaddingTop(e){this.eOverlayWrapper.style.setProperty("padding-top",`${e}px`)}destroyActiveOverlay(){var s;this.activePromise=null;const e=this.activeOverlay;if(!e)return;let t=this.elToFocusAfter;this.activeOverlay=null,this.elToFocusAfter=null,t&&!this.focusService.isGridFocused()&&(t=null);const i=this.updateListenerDestroyFunc;i&&(i(),this.updateListenerDestroyFunc=null),this.destroyBean(e),pr(this.eOverlayWrapper),(s=t==null?void 0:t.focus)==null||s.call(t,{preventScroll:!0})}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.elToFocusAfter=null,this.destroyActiveOverlay(),this.overlayService.setOverlayWrapperComp(void 0),super.destroy()}},Nk=class extends di{constructor(e,t){super(),this.direction=t,this.eViewport=st,this.eContainer=st,this.hideTimeout=null,this.setTemplate(e)}wireBeans(e){this.animationFrameService=e.animationFrameService}postConstruct(){this.addManagedEventListeners({scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this)}),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",WF()||eu())}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.invisibleScrollbar=UF(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const e=this.getGui(),t=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0),i=()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1);this.addManagedListeners(e,{mouseenter:t,mousedown:t,touchstart:t,mouseleave:i,touchend:i})}onScrollVisibilityChanged(){this.invisibleScrollbar===void 0&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedEventListeners({bodyScroll:e=>{e.direction===this.direction&&(this.hideTimeout!==null&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))},bodyScrollEnd:()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)}})}attemptSettingScrollPosition(e){const t=this.getViewportElement();eW(()=>ha(t),()=>this.setScrollPosition(e),100)}getViewportElement(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}},G4=class extends Nk{constructor(){super(`<div class="ag-body-horizontal-scroll" aria-hidden="true">
            <div class="ag-horizontal-left-spacer" data-ref="eLeftSpacer"></div>
            <div class="ag-body-horizontal-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-horizontal-scroll-container" data-ref="eContainer"></div>
            </div>
            <div class="ag-horizontal-right-spacer" data-ref="eRightSpacer"></div>
        </div>`,"horizontal"),this.eLeftSpacer=st,this.eRightSpacer=st}wireBeans(e){super.wireBeans(e),this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e,pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this)}),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.register("fakeHScrollComp",this),this.createManagedBean(new W0(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){this.invisibleScrollbar===void 0&&(this.enableRtl=this.gos.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.visibleColsService.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,s=this.scrollVisibleService.getScrollbarWidth();i&&(t+=s),To(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=s);let n=this.visibleColsService.getColsLeftWidth();this.enableRtl&&e&&(n+=s),To(this.eLeftSpacer,n),this.eLeftSpacer.classList.toggle("ag-scroller-corner",n<=s)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gos.get("suppressHorizontalScroll"),s=e&&this.scrollVisibleService.getScrollbarWidth()||0,r=i?0:s===0&&t?16:s;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Jg(this.getGui(),r),Jg(this.eViewport,r),Jg(this.eContainer,r),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return Yy(this.getViewportElement(),this.enableRtl)}setScrollPosition(e){ha(this.getViewportElement())||this.attemptSettingScrollPosition(e),$y(this.getViewportElement(),e,this.enableRtl)}},Ok=class extends de{wireBeans(e){this.maxDivHeightScaler=e.rowContainerHeightService}constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedEventListeners({rowContainerHeightChanged:this.onHeightChanged.bind(this)})}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=e!=null?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}},z4=class extends Nk{wireBeans(e){super.wireBeans(e),this.ctrlsService=e.ctrlsService,this.scrollVisibleService=e.scrollVisibleService}constructor(){super(`<div class="ag-body-vertical-scroll" aria-hidden="true">
            <div class="ag-body-vertical-scroll-viewport" data-ref="eViewport">
                <div class="ag-body-vertical-scroll-container" data-ref="eContainer"></div>
            </div>
        </div>`,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new Ok(this.eContainer)),this.ctrlsService.register("fakeVScrollComp",this),this.addManagedEventListeners({rowContainerHeightChanged:this.onRowContainerHeightChanged.bind(this)})}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.scrollVisibleService.getScrollbarWidth()||0,s=i===0&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),To(this.getGui(),s),To(this.eViewport,s),To(this.eContainer,s),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,i=e.getGridBodyCtrl().getBodyViewportElement(),s=this.getScrollPosition(),n=i.scrollTop;s!=n&&this.setScrollPosition(n,!0)}getScrollPosition(){return this.getViewportElement().scrollTop}setScrollPosition(e,t){!t&&!ha(this.getViewportElement())&&this.attemptSettingScrollPosition(e),this.getViewportElement().scrollTop=e}},nM=(e=>(e.FakeHScrollbar="fakeHScrollComp",e.Header="centerHeader",e.PinnedTop="topCenter",e.PinnedBottom="bottomCenter",e.StickyTop="stickyTopCenter",e.StickyBottom="stickyBottomCenter",e))(nM||{}),H4=class extends de{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=Cn(()=>this.lastScrollSource[1]=null,500),this.resetLastVScrollDebounced=Cn(()=>this.lastScrollSource[0]=null,500)}wireBeans(e){this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.rowModel=e.rowModel,this.heightScaler=e.rowContainerHeightService,this.rowRenderer=e.rowRenderer,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.addManagedEventListeners({displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)}),this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){this.addHorizontalScrollListeners(),this.addVerticalScrollListeners()}addHorizontalScrollListeners(){this.addManagedElementListeners(this.centerRowsCtrl.getViewportElement(),{scroll:this.onHScroll.bind(this,"Viewport")});for(const e of Object.values(nM)){const t=this.ctrlsService.get(e);this.registerScrollPartner(t,this.onHScroll.bind(this,e))}}addVerticalScrollListeners(){const e=this.ctrlsService.get("fakeVScrollComp"),t=this.gos.get("debounceVerticalScrollbar"),i=t?Cn(this.onVScroll.bind(this,"Viewport"),100):this.onVScroll.bind(this,"Viewport"),s=t?Cn(this.onVScroll.bind(this,"fakeVScrollComp"),100):this.onVScroll.bind(this,"fakeVScrollComp");this.addManagedElementListeners(this.eBodyViewport,{scroll:i}),this.registerScrollPartner(e,s)}registerScrollPartner(e,t){e.onScrollCallback(t)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){this.centerRowsCtrl!=null&&(e===void 0&&(e=this.centerRowsCtrl.getCenterViewportScrollLeft()),this.setScrollLeftForAllContainersExceptCurrent(Math.abs(e)))}setScrollLeftForAllContainersExceptCurrent(e){for(const t of[...Object.values(nM),"Viewport"]){if(this.lastScrollSource[1]===t)continue;const i=this.getViewportForSource(t);$y(i,e,this.enableRtl)}}getViewportForSource(e){return e==="Viewport"?this.centerRowsCtrl.getViewportElement():this.ctrlsService.get(e).getViewportElement()}isControllingScroll(e,t){return this.lastScrollSource[t]==null?(t===0?this.lastScrollSource[0]=e:this.lastScrollSource[1]=e,!0):this.lastScrollSource[t]===e}onHScroll(e){if(!this.isControllingScroll(e,1))return;const t=this.centerRowsCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(1,i,!0))return;const s=Yy(this.getViewportForSource(e),this.enableRtl);this.doHorizontalScroll(s),this.resetLastHScrollDebounced()}onVScroll(e){if(!this.isControllingScroll(e,0))return;let t;e==="Viewport"?t=this.eBodyViewport.scrollTop:t=this.ctrlsService.get("fakeVScrollComp").getScrollPosition(),!this.shouldBlockScrollUpdate(0,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e==="Viewport"?this.ctrlsService.get("fakeVScrollComp").setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gos.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.get("fakeHScrollComp").getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(1),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowsCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:"bodyScroll",direction:e===1?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{this.eventService.dispatchEvent({...t,type:"bodyScrollEnd"})},100)}shouldBlockScrollUpdate(e,t,i=!1){return i&&!eu()?!1:e===0?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t)}shouldBlockVerticalScroll(e){const t=I0(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowsCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowsCtrl.getViewportElement();if(this.enableRtl&&Ky()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(0)}checkScrollLeft(){this.scrollLeft!==this.centerRowsCtrl.getCenterViewportScrollLeft()&&this.onHScroll("Viewport")}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){const s=this.centerRowsCtrl.getViewportElement().scrollWidth-this.centerRowsCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(1,e)&&(this.enableRtl&&Ky()?e=e>0?0:s:e=Math.min(Math.max(e,0),s)),$y(this.centerRowsCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowsCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowsCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowsCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowsCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const i=this.rowModel.getRowCount();let s=-1;for(let n=0;n<i;n++){const r=this.rowModel.getRow(n);if(typeof e=="function"){if(r&&e(r)){s=n;break}}else if(e===r||e===r.data){s=n;break}}s>=0&&this.ensureIndexVisible(s,t)}ensureIndexVisible(e,t){if(Ts(this.gos,"print"))return;const i=this.rowModel.getRowCount();if(typeof e!="number"||e<0||e>=i){we("Invalid row index for ensureIndexVisible: "+e);return}const n=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{var p;n||(p=this.paginationService)==null||p.goToPageWithIndex(e);const r=this.ctrlsService.getGridBodyCtrl(),o=r.getStickyTopHeight(),a=r.getStickyBottomHeight(),l=this.rowModel.getRow(e);let c;do{const g=l.rowTop,f=l.rowHeight,y=this.pageBoundsService.getPixelOffset(),C=l.rowTop-y,x=C+l.rowHeight,M=this.getVScrollPosition(),b=this.heightScaler.getDivStretchOffset(),R=M.top+b,I=M.bottom+b,P=I-R,k=this.heightScaler.getScrollPositionForPixel(C),_=this.heightScaler.getScrollPositionForPixel(x-P),B=Math.min((k+_)/2,C),H=R+o>C,V=I-a<x;let U=null;t==="top"?U=k:t==="bottom"?U=_:t==="middle"?U=B:H?U=k-o:V&&(U=_+a),U!==null&&(this.setVerticalScrollPosition(U),this.rowRenderer.redraw({afterScroll:!0})),c=g!==l.rowTop||f!==l.rowHeight}while(c);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){const i=this.columnModel.getCol(e);if(!i||i.isPinned()||!this.visibleColsService.isColDisplayed(i))return;const s=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming(()=>{s!==null&&this.centerRowsCtrl.setCenterViewportScrollLeft(s),this.centerRowsCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowsCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:s}=this.isColumnOutsideViewport(e),n=this.centerRowsCtrl.getCenterWidth()<e.getActualWidth(),r=this.centerRowsCtrl.getCenterWidth(),o=this.enableRtl;let a=(o?i:s)||n,l=o?s:i;t!=="auto"&&(a=t==="start",l=t==="end");const c=t==="middle";if(a||l||c){const{colLeft:p,colMiddle:g,colRight:f}=this.getColumnBounds(e);return c?g-r/2:a?o?f:p:o?p-r:f-r}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:s,colRight:n}=this.getColumnBounds(e),r=this.enableRtl,o=r?t>n:i<n,a=r?i<s:t>s;return{columnBeforeStart:o,columnAfterEnd:a}}getColumnBounds(e){const t=this.enableRtl,i=this.visibleColsService.getBodyContainerWidth(),s=e.getActualWidth(),n=e.getLeft(),r=t?-1:1,o=t?i-n:n,a=o+s*r,l=o+s/2*r;return{colLeft:o,colMiddle:l,colRight:a}}getViewportBounds(){const e=this.centerRowsCtrl.getCenterWidth(),t=this.centerRowsCtrl.getCenterViewportScrollLeft(),i=t,s=e+t;return{start:i,end:s,width:e}}},V4=class extends de{wireBeans(e){this.animationFrameService=e.animationFrameService,this.ctrlsService=e.ctrlsService,this.pinnedWidthService=e.pinnedWidthService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.columnViewportService=e.columnViewportService}constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.listenForResize()}),this.addManagedEventListeners({scrollbarWidthChanged:this.onScrollbarWidthChanged.bind(this)}),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const e=()=>{this.animationFrameService.requestAnimationFrame(()=>{this.onCenterViewportResized()})};this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.scrollVisibleService.onCentreViewportResized(),this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnSizeService.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=om(e);if(t<=50)return;let i=this.getPinnedColumnsOverflowingViewport(t-50);const s=this.gos.getCallback("processUnpinnedColumns");i.length&&(s&&(i=s({columns:i,viewportWidth:t})),this.columnModel.setColsPinned(i,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){const t=this.pinnedWidthService.getPinnedRightWidth(),i=this.pinnedWidthService.getPinnedLeftWidth(),s=t+i;if(s<e)return[];const n=[...this.visibleColsService.getLeftCols()],r=[...this.visibleColsService.getRightCols()];let o=0,a=0;const l=0,c=[];let p=s-l-e;for(;(a<n.length||o<r.length)&&p>0;){if(o<r.length){const g=r[o++];p-=g.getActualWidth(),c.push(g)}if(a<n.length&&p>0){const g=n[a++];p-=g.getActualWidth(),c.push(g)}}return c}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const e=this.gridBodyCtrl.getBodyViewportElement(),t=I0(e);this.bodyHeight!==t&&(this.bodyHeight=t,this.eventService.dispatchEvent({type:"bodyHeightChanged"}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnViewportService.setScrollPosition(e,t)}},W4=class extends de{wireBeans(e){this.dragService=e.dragService,this.rangeService=e.rangeService}constructor(e){super(),this.eContainer=e}postConstruct(){if(!this.rangeService)return;this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Cl(this.gos)?this.enableFeature():this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),Cl(this.gos)&&this.enableFeature()}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}},j4=class extends di{constructor(){super(`
            <div class="ag-selection-checkbox" role="presentation">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[F0]),this.eCheckbox=st}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.localeService.getLocaleTextFunc(),t=this.rowNode.isSelected(),i=M0(e,t),[s,n]=this.rowNode.selectable?["ariaRowToggleSelection","Press Space to toggle row selection"]:["ariaRowSelectionDisabled","Row Selection is disabled for this row"],r=e(s,n);this.eCheckbox.setValue(t,!0),this.eCheckbox.setInputAriaLabel(`${r} (${i})`)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListeners(this.eCheckbox.getInputElement(),{dblclick:s=>lp(s),click:s=>{lp(s);const n=C0(this.gos)==="filteredDescendants",r=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(r,n)?this.onClicked(!0,n,s||{})===0&&this.onClicked(!1,n,s):r?this.onClicked(!1,n,s):this.onClicked(!0,n,s||{})}}),this.addManagedListeners(this.rowNode,{rowSelected:this.onSelectionChanged.bind(this),dataChanged:this.onDataChanged.bind(this),selectableChanged:this.onSelectableChanged.bind(this)}),y0(this.gos)||typeof this.getIsVisible()=="function"){const s=this.showOrHideSelect.bind(this);this.addManagedEventListeners({displayedColumnsChanged:s}),this.addManagedListeners(this.rowNode,{dataChanged:s,cellChanged:s}),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(this.eCheckbox.getPreviousValue()===void 0||e===void 0)&&xi(this.gos)}showOrHideSelect(){var n,r,o;let e=this.rowNode.selectable;const t=this.getIsVisible();if(e)if(typeof t=="function"){const a=(n=this.overrides)==null?void 0:n.callbackParams;if(!this.column)e=t({...a,node:this.rowNode,data:this.rowNode.data});else{const l=this.column.createColumnFunctionCallbackParams(this.rowNode);e=t({...a,...l})}}else e=t??!1;const i=this.gos.get("rowSelection");if(i&&typeof i!="string"?!rW(i):(r=this.column)==null?void 0:r.getColDef().showDisabledCheckboxes){this.eCheckbox.setDisabled(!e),this.setVisible(!0),this.setDisplayed(!0);return}if((o=this.overrides)!=null&&o.removeHidden){this.setDisplayed(e);return}this.setVisible(e)}getIsVisible(){var t,i;if(this.overrides)return this.overrides.isVisible;const e=this.gos.get("rowSelection");return e&&typeof e!="string"?ap(e):(i=(t=this.column)==null?void 0:t.getColDef())==null?void 0:i.checkboxSelection}},U4=class extends di{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(ur("rowDrag",this.gos,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0);const i=()=>{try{const s=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",s),e.dataTransfer.setData("text/plain",s)}catch{}};if(t){const s=this.gos.addGridCommonParams({rowNode:this.rowNode,dragEvent:e});t(s)}else i()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}},K4=class extends de{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,s=>this.cellComp.addOrRemoveCssClass(s,!0),s=>this.cellComp.addOrRemoveCssClass(s,!1)),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if(typeof e.cellStyle=="function"){const i=this.beans.gos.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex}),s=e.cellStyle;t=s(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gos.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}},Y4=class extends de{constructor(e,t,i,s,n){super(),this.cellCtrl=e,this.beans=t,this.rowNode=s,this.rowCtrl=n}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case le.ENTER:this.onEnterKeyDown(e);break;case le.F2:this.onF2KeyDown(e);break;case le.ESCAPE:this.onEscapeKeyDown(e);break;case le.TAB:this.onTabKeyDown(e);break;case le.BACKSPACE:case le.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case le.DOWN:case le.UP:case le.RIGHT:case le.LEFT:this.onNavigationKeyDown(e,t);break}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:s,rowNode:n}=this,{gos:r,rangeService:o,eventService:a}=s;if(!i.isEditing()){if(a.dispatchEvent({type:"keyShortcutChangedCellStart"}),LU(e,r.get("enableCellEditingOnBackspace"))){if(o&&Cl(r))o.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"});else if(i.isCellEditable()){const l=i.getColumn(),c=this.beans.valueService.getDeleteValue(l,n);n.setDataValue(l,c,"cellClear")}}else i.startRowOrCellEdit(e,t);a.dispatchEvent({type:"keyShortcutChangedCellEnd"})}}onEnterKeyDown(e){if(this.cellCtrl.isEditing()||this.rowCtrl.isEditing())this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey);else if(this.beans.gos.get("enterNavigatesVertically")){const t=e.shiftKey?le.UP:le.DOWN;this.beans.navigationService.navigateToNextCell(null,t,this.cellCtrl.getCellPosition(),!1)}else this.cellCtrl.startRowOrCellEdit(le.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault()}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(le.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const s=e.key;s===" "?this.onSpaceKeyDown(e):this.cellCtrl.startRowOrCellEdit(s,e)&&e.preventDefault()}onSpaceKeyDown(e){const{gos:t}=this.beans;if(!this.cellCtrl.isEditing()&&By(t)){const i=this.rowNode.isSelected(),s=!i,n=C0(t)==="filteredDescendants",r=this.rowNode.setSelectedParams({newValue:s,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"});i===void 0&&r===0&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:n,event:e,source:"spaceKey"})}e.preventDefault()}destroy(){super.destroy()}},$4=class extends de{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!pl(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t);break}}onCellClicked(e){if(this.isDoubleClickOnIPad()){this.onCellDoubleClicked(e),e.preventDefault();return}const{eventService:t,rangeService:i,gos:s}=this.beans,n=e.ctrlKey||e.metaKey;i&&n&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const r=this.cellCtrl.createEvent(e,"cellClicked");t.dispatchEvent(r);const o=this.column.getColDef();o.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{o.onCellClicked(r)})},0),(s.get("singleClickEdit")||o.singleClickEdit)&&!s.get("suppressClickEdit")&&!(e.shiftKey&&(i==null?void 0:i.getCellRanges().length)!=0)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!eu()||LF("dblclick"))return!1;const e=new Date().getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const{column:t,beans:i,cellCtrl:s}=this,{eventService:n,frameworkOverrides:r,gos:o}=i,a=t.getColDef(),l=s.createEvent(e,"cellDoubleClicked");n.dispatchEvent(l),typeof a.onCellDoubleClicked=="function"&&window.setTimeout(()=>{r.wrapOutgoing(()=>{a.onCellDoubleClicked(l)})},0),!o.get("singleClickEdit")&&!o.get("suppressClickEdit")&&s.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:s}=e,n=e.target,{cellCtrl:r,beans:o}=this,{eventService:a,rangeService:l,focusService:c,gos:p}=o;if(this.isRightClickInExistingRange(e))return;const g=l&&l.getCellRanges().length!=0;if(!s||!g){const y=p.get("enableCellTextSelection")&&e.defaultPrevented,C=(ua()||y)&&!r.isEditing()&&!E0(n);r.focusCell(C)}if(s&&g&&!c.isCellFocused(r.getCellPosition())){e.preventDefault();const f=c.getFocusedCell();if(f){const{column:y,rowIndex:C,rowPinned:x}=f,M=o.rowRenderer.getRowByPosition({rowIndex:C,rowPinned:x}),b=M==null?void 0:M.getCellCtrl(y);b!=null&&b.isEditing()&&b.stopEditing(),c.setFocusedCell({column:y,rowIndex:C,rowPinned:x,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(n)){if(l){const f=this.cellCtrl.getCellPosition();if(s)l.extendLatestRangeToCell(f);else{const y=t||i;l.setRangeToCell(f,y)}}a.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseDown"))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),s=e.button===2||e.ctrlKey&&this.beans.gos.get("allowContextMenuWithControlKey");if(i&&s)return!0}return!1}containsWidget(e){return qd(e,"ag-selection-checkbox",3)}onMouseOut(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOut")),this.beans.columnHoverService.clearMouseOver())}onMouseOver(e){this.mouseStayingInsideCell(e)||(this.beans.eventService.dispatchEvent(this.cellCtrl.createEvent(e,"cellMouseOver")),this.beans.columnHoverService.setMouseOver([this.column]))}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),i=t.contains(e.target),s=t.contains(e.relatedTarget);return i&&s}destroy(){super.destroy()}},Z4=class extends de{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListeners(this.beans.eventService,{newColumnsLoaded:()=>this.onNewColumnsLoaded()})}setComp(e){this.eGui=e,this.setupColSpan(),this.setupRowSpan(),this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();Jc(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){this.column.getColDef().colSpan!=null&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListeners(this.beans.eventService,{displayedColumnsChanged:this.onDisplayColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onWidthChanged.bind(this)}))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(e===1)t.push(this.column);else{let i=this.column;const s=this.column.getPinned();for(let n=0;i&&n<e&&(t.push(i),i=this.beans.visibleColsService.getColAfter(i),!(!i||Pt(i)||s!==i.getPinned()));n++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return this.beans.gos.get("enableRtl")&&this.colsSpanning?e=At(this.colsSpanning):e=this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||this.column.getPinned()==="left")return e;const t=this.beans.visibleColsService.getColsLeftWidth();if(this.column.getPinned()==="right"){const i=this.beans.visibleColsService.getBodyContainerWidth();return t+i+(e||0)}return t+(e||0)}applyRowSpan(e){if(this.rowSpan===1&&!e)return;const i=uh(this.beans.gos)*this.rowSpan;this.eGui.style.height=`${i}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}},kg="ag-cell-range-selected",X4="ag-cell-range-chart",Q4="ag-cell-range-single-cell",q4="ag-cell-range-chart-category",J4="ag-cell-range-handle",e3="ag-cell-range-top",t3="ag-cell-range-right",i3="ag-cell-range-bottom",s3="ag-cell-range-left",n3=class{constructor(e,t){this.beans=e,this.rangeService=e.rangeService,this.selectionHandleFactory=e.selectionHandleFactory,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onCellSelectionChanged()}onCellSelectionChanged(){this.cellComp&&(this.rangeCount=this.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(kg,this.rangeCount!==0),this.cellComp.addOrRemoveCssClass(`${kg}-1`,this.rangeCount===1),this.cellComp.addOrRemoveCssClass(`${kg}-2`,this.rangeCount===2),this.cellComp.addOrRemoveCssClass(`${kg}-3`,this.rangeCount===3),this.cellComp.addOrRemoveCssClass(`${kg}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass(X4,this.hasChartRange),jy(this.eGui,this.rangeCount>0?!0:void 0),this.cellComp.addOrRemoveCssClass(Q4,this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),i=!t&&e.top,s=!t&&e.right,n=!t&&e.bottom,r=!t&&e.left;this.cellComp.addOrRemoveCssClass(e3,i),this.cellComp.addOrRemoveCssClass(t3,s),this.cellComp.addOrRemoveCssClass(i3,n),this.cellComp.addOrRemoveCssClass(s3,r)}isSingleCell(){const{rangeService:e}=this.beans;return this.rangeCount===1&&!!e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every(i=>hh([1,0],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gos.get("enableRtl");let t=!1,i=!1,s=!1,n=!1;const r=this.cellCtrl.getCellPosition().column,o=this.beans.visibleColsService;let a,l;e?(a=o.getColAfter(r),l=o.getColBefore(r)):(a=o.getColBefore(r),l=o.getColAfter(r));const c=this.rangeService.getCellRanges().filter(p=>this.rangeService.isCellInSpecificRange(this.cellCtrl.getCellPosition(),p));a||(n=!0),l||(i=!0);for(let p=0;p<c.length&&!(t&&i&&s&&n);p++){const g=c[p],f=this.rangeService.getRangeStartRow(g),y=this.rangeService.getRangeEndRow(g);!t&&this.beans.rowPositionUtils.sameRow(f,this.cellCtrl.getCellPosition())&&(t=!0),!s&&this.beans.rowPositionUtils.sameRow(y,this.cellCtrl.getCellPosition())&&(s=!0),!n&&a&&g.columns.indexOf(a)<0&&(n=!0),!i&&l&&g.columns.indexOf(l)<0&&(i=!0)}return{top:t,right:i,bottom:s,left:n}}refreshHandle(){if(this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass(J4,!!this.selectionHandle)}shouldHaveSelectionHandle(){const e=this.beans.gos,t=this.rangeService.getCellRanges(),i=t.length;if(this.rangeCount<1||i<1)return!1;const s=At(t),n=this.cellCtrl.getCellPosition(),r=JL(e)&&!this.cellCtrl.isSuppressFillHandle(),o=cW(e);let a=i===1&&!this.cellCtrl.isEditing()&&(r||o);if(this.hasChartRange){const c=t[0].type===1&&this.rangeService.isCellInSpecificRange(n,t[0]);this.cellComp.addOrRemoveCssClass(q4,c),a=s.type===0}return a&&s.endRow!=null&&this.rangeService.isContiguousRange(s)&&this.rangeService.isBottomRightCell(s,n)}addSelectionHandle(){const e=At(this.rangeService.getCellRanges()).type,i=JL(this.beans.gos)&&Pt(e)?0:1;this.selectionHandle&&this.selectionHandle.getType()!==i&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.selectionHandleFactory.createSelectionHandle(i)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}},r3="ag-cell",o3="ag-cell-auto-height",a3="ag-cell-normal-height",l3="ag-cell-focus",c3="ag-cell-first-right-pinned",u3="ag-cell-last-left-pinned",h3="ag-cell-not-inline-editing",d3="ag-column-hover",p3="ag-cell-wrap-text",g3=0,_k=class rM extends de{constructor(t,i,s,n){super(),this.column=t,this.rowNode=i,this.beans=s,this.rowCtrl=n,this.cellRangeFeature=void 0,this.cellPositionFeature=void 0,this.cellCustomStyleFeature=void 0,this.tooltipFeature=void 0,this.cellMouseListenerFeature=void 0,this.cellKeyboardListenerFeature=void 0,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],this.instanceId=t.getId()+"-"+g3++,this.colIdSanitised=la(this.column.getId()),this.createCellPosition(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}onFocusOut(){this.beans.focusService.clearRestoreFocus()}addFeatures(){this.cellPositionFeature=new Z4(this,this.beans),this.cellCustomStyleFeature=new K4(this,this.beans),this.cellMouseListenerFeature=new $4(this,this.beans,this.column),this.cellKeyboardListenerFeature=new Y4(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.column.isTooltipEnabled()&&this.enableTooltipFeature(),this.beans.rangeService&&Cl(this.beans.gos)&&(this.cellRangeFeature=new n3(this.beans,this))}removeFeatures(){const t=this.beans.context;this.cellPositionFeature=t.destroyBean(this.cellPositionFeature),this.cellCustomStyleFeature=t.destroyBean(this.cellCustomStyleFeature),this.cellMouseListenerFeature=t.destroyBean(this.cellMouseListenerFeature),this.cellKeyboardListenerFeature=t.destroyBean(this.cellKeyboardListenerFeature),this.cellRangeFeature=t.destroyBean(this.cellRangeFeature),this.disableTooltipFeature()}enableTooltipFeature(t,i){const s=()=>{const o=this.column.getColDef(),a=this.rowNode.data;if(o.tooltipField&&Ae(a))return qg(a,o.tooltipField,this.column.isTooltipFieldContainsDots());const l=o.tooltipValueGetter;return l?l(this.beans.gos.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},n=this.beans.gos.get("tooltipShowMode")==="whenTruncated";!i&&n&&!this.isCellRenderer()&&(i=()=>{const o=this.getGui(),a=o.children.length===0?o:o.querySelector(".ag-cell-value");return a?a.scrollWidth>a.clientWidth:!0});const r={getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:t!=null?()=>t:s,getValueFormatted:()=>this.valueFormatted,shouldDisplayTooltip:i};this.tooltipFeature=new Cp(r,this.beans)}disableTooltipFeature(){this.tooltipFeature=this.beans.context.destroyBean(this.tooltipFeature)}setComp(t,i,s,n,r,o){var a,l,c,p;this.cellComp=t,this.eGui=i,this.printLayout=n,o??(o=this),this.addDomData(o),this.addFeatures(),o.addDestroyFunc(()=>this.removeFeatures()),this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(s,o),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),(a=this.cellPositionFeature)==null||a.setComp(i),(l=this.cellCustomStyleFeature)==null||l.setComp(t),(c=this.tooltipFeature)==null||c.refreshToolTip(),(p=this.cellKeyboardListenerFeature)==null||p.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,i),r&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(g=>g()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t,i){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;const s=t.parentElement,n=$c(this.beans.gos,this.rowNode).height,r=l=>{if(this.editing||!this.isAlive()||!i.isAlive())return;const{paddingTop:c,paddingBottom:p,borderBottomWidth:g,borderTopWidth:f}=Eh(s),y=c+p+g+f,x=t.offsetHeight+y;if(l<5){const b=Wi(this.beans.gos),R=!b||!b.contains(t),I=x==0;if(R||I){window.setTimeout(()=>r(l+1),0);return}}const M=Math.max(x,n);this.rowNode.setRowAutoHeight(M,this.column)},o=()=>r(0);o();const a=this.beans.resizeObserverService.observeResize(t,o);i.addDestroyFunc(()=>{a(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){return this.column.getColDef().cellAriaRole??"gridcell"}isCellRenderer(){const t=this.column.getColDef();return t.cellRenderer!=null||t.cellRendererSelector!=null}getValueToDisplay(){return this.valueFormatted??this.value}showValue(t=!1){var f;const{beans:i,column:s,rowNode:n,cellRangeFeature:r,cellComp:o}=this,{userComponentFactory:a,animationFrameService:l}=i,c=this.getValueToDisplay();let p;if(n.stub&&((f=n.groupData)==null?void 0:f[this.column.getId()])==null){const y=this.createCellRendererParams();p=a.getLoadingCellRendererDetails(s.getColDef(),y)}else if(this.isCellRenderer()){const y=this.createCellRendererParams();p=a.getCellRendererDetails(s.getColDef(),y)}o.setRenderDetails(p,c,t),l.requestAnimationFrame(()=>r==null?void 0:r.refreshHandle())}setupControlComps(){const t=this.column.getColDef();this.includeSelection=this.isIncludeControl(this.isCheckboxSelection(t)),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gos.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return this.rowNode.rowPinned!=null?!1:typeof t=="function"||t===!0}isCheckboxSelection(t){const{rowSelection:i}=this.beans.gridOptions;return t.checkboxSelection||sm(this.column)&&i&&typeof i!="string"&&ap(i)}refreshShouldDestroy(){const t=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(this.isCheckboxSelection(t)),s=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),n=this.includeDndSource!=this.isIncludeControl(t.dndSource),r=this.isAutoHeight!=this.column.isAutoHeight();return i||s||n||r}startEditing(t=null,i=!1,s=null){const{editService:n}=this.beans;return!this.isCellEditable()||this.editing||!n?!0:this.cellComp?n.startEditing(this,t,i,s):(this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,i,s)}),!0)}setEditing(t,i){this.editCompDetails=i,this.editing!==t&&(this.editing=t)}stopRowOrCellEdit(t=!1){this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){this.editing&&this.stopEditingAndFocus()}stopEditing(t=!1){this.onCellEditorAttachedFuncs=[];const{editService:i}=this.beans;return!this.editing||!i?!1:i.stopEditing(this,t)}createCellRendererParams(){return this.beans.gos.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.beans.valueService.getValueForDisplay(this.column,this.rowNode),setValue:i=>this.beans.valueService.setValue(this.rowNode,this.column,i),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(i,s,n,r)=>this.registerRowDragger(i,s,r),setTooltip:(i,s)=>{var n;this.tooltipFeature&&this.disableTooltipFeature(),this.enableTooltipFeature(i,s),(n=this.tooltipFeature)==null||n.refreshToolTip()}})}setFocusOutOnEditor(){var t;this.editing&&((t=this.beans.editService)==null||t.setFocusOutOnEditor(this))}setFocusInOnEditor(){var t;this.editing&&((t=this.beans.editService)==null||t.setFocusInOnEditor(this))}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){var i;this.refreshShouldDestroy()?(i=this.rowCtrl)==null||i.recreateCell(this):this.refreshCell(t)}refreshCell(t){var p,g,f,y,C;if(this.suppressRefreshCell||this.editing)return;const i=this.column.getColDef(),s=t!=null&&!!t.newData,n=t!=null&&!!t.suppressFlash||!!i.suppressCellFlash,r=i.field==null&&i.valueGetter==null&&i.showRowGroup==null,o=t&&t.forceRefresh||r||s,a=!!this.cellComp,l=this.updateAndFormatValue(a),c=o||l;if(a){if(c){this.showValue(s);const x=(p=this.beans.filterManager)==null?void 0:p.isSuppressFlashingCellsBecauseFiltering();!n&&!x&&(this.beans.gos.get("enableCellChangeFlash")||i.enableCellChangeFlash)&&this.flashCell(),(g=this.cellCustomStyleFeature)==null||g.applyUserStyles(),(f=this.cellCustomStyleFeature)==null||f.applyClassesFromColDef()}(y=this.tooltipFeature)==null||y.refreshToolTip(),(C=this.cellCustomStyleFeature)==null||C.applyCellClassRules()}}stopEditingAndFocus(t=!1,i=!1){var s;(s=this.beans.editService)==null||s.stopEditingAndFocus(this,t,i)}flashCell(t){const i=(t==null?void 0:t.flashDuration)??(t==null?void 0:t.flashDelay),s=(t==null?void 0:t.fadeDuration)??(t==null?void 0:t.fadeDelay);this.animateCell("data-changed",i,s)}animateCell(t,i,s){if(!this.cellComp)return;const{gos:n}=this.beans;if(i||(i=n.get("cellFlashDuration")),i===0)return;Ae(s)||(s=n.get("cellFadeDuration"));const r=`ag-cell-${t}`,o=`ag-cell-${t}-animation`;this.cellComp.addOrRemoveCssClass(r,!0),this.cellComp.addOrRemoveCssClass(o,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(r,!1),this.cellComp.addOrRemoveCssClass(o,!0),this.eGui.style.transition=`background-color ${s}ms`,window.setTimeout(()=>{this.isAlive()&&(this.cellComp.addOrRemoveCssClass(o,!1),this.eGui.style.transition="")},s))},i)})}onFlashCells(t){if(!this.cellComp)return;const i=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[i]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){return this.callValueFormatter(t)??t}callValueFormatter(t){return this.beans.valueService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){const i=this.value,s=this.valueFormatted;return this.value=this.beans.valueService.getValueForDisplay(this.column,this.rowNode),this.valueFormatted=this.callValueFormatter(this.value),t?!this.valuesAreEqual(i,this.value)||this.valueFormatted!=s:!0}valuesAreEqual(t,i){const s=this.column.getColDef();return s.equals?s.equals(t,i):t===i}getComp(){return this.cellComp}getValue(){return this.value}addDomData(t){const i=this.getGui();vh(this.beans.gos,i,rM.DOM_DATA_KEY_CELL_CTRL,this),t.addDestroyFunc(()=>vh(this.beans.gos,i,rM.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,i){return this.beans.gos.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.processCharacter(t)}onKeyDown(t){var i;(i=this.cellKeyboardListenerFeature)==null||i.onKeyDown(t)}onMouseEvent(t,i){var s;(s=this.cellMouseListenerFeature)==null||s.onMouseEvent(t,i)}getGui(){return this.eGui}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var t;this.cellComp&&((t=this.cellPositionFeature)==null||t.onLeftChanged())}onDisplayedColumnsChanged(){this.eGui&&(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:t,column:i,beans:s}=this;Dk(t,i,s.visibleColsService)}refreshAriaColIndex(){const t=this.beans.visibleColsService.getAriaColIndex(this.column);HF(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var t;return(t=this.cellPositionFeature)==null?void 0:t.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}isPrintLayout(){return this.printLayout}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,i=null){return this.cellComp?this.beans.gos.get("editType")==="fullRow"?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,i):(this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,i)}),!0)}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onCellSelectionChanged(){this.cellComp&&this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}isRangeSelectionEnabled(){return this.cellRangeFeature!=null}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onCellSelectionChanged()}onSuppressCellFocusChanged(t){this.eGui&&Ur(this.eGui,"tabindex",t?void 0:-1)}onFirstRightPinnedChanged(){if(!this.cellComp)return;const t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass(c3,t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass(u3,t)}onCellFocused(t){if(this.beans.focusService.isCellFocusSuppressed())return;const i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp){i&&(t!=null&&t.forceBrowserFocus)&&(this.focusEventToRestore=t);return}if(this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass(l3,i),i&&t&&t.forceBrowserFocus){let n=this.cellComp.getFocusableElement();if(this.editing){const r=this.beans.focusService.findFocusableElements(n,null,!0);r.length&&(n=r[0])}n.focus({preventScroll:!!t.preventScrollOnBrowserFocus})}const s=this.beans.gos.get("editType")==="fullRow";!i&&!s&&this.editing&&this.stopRowOrCellEdit(),i&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:dl(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass(r3,!0),this.cellComp.addOrRemoveCssClass(h3,!0);const t=this.column.isAutoHeight()==!0;this.cellComp.addOrRemoveCssClass(o3,t),this.cellComp.addOrRemoveCssClass(a3,!t)}onColumnHover(){if(!this.cellComp||!this.beans.gos.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass(d3,t)}onColDefChanged(){var i;if(!this.cellComp)return;this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature()):this.disableTooltipFeature(),this.setWrapText(),this.editing?(i=this.beans.editService)==null||i.handleColDefChanged(this):this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){const t=this.column.getColDef().wrapText==!0;this.cellComp.addOrRemoveCssClass(p3,t)}dispatchCellContextMenuEvent(t){const i=this.column.getColDef(),s=this.createEvent(t,"cellContextMenu");this.beans.eventService.dispatchEvent(s),i.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{i.onCellContextMenu(s)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],this.onCellEditorAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const t=new j4;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const t=new U4(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,i,s){if(this.customRowDragComp){this.customRowDragComp.setDragElement(t,i);return}const n=this.createRowDragComp(t,i,s);n&&(this.customRowDragComp=n,this.addDestroyFunc(()=>{this.beans.context.destroyBean(n),this.customRowDragComp=null}))}createRowDragComp(t,i,s){const n=this.beans.gos.get("pagination"),r=this.beans.gos.get("rowDragManaged"),o=xi(this.beans.gos);if(r){if(!o){we("managed row dragging is only allowed in the Client Side Row Model");return}if(n){we("managed row dragging is not possible when doing pagination");return}}const a=new Jb(()=>this.value,this.rowNode,this.column,t,i,s);return this.beans.context.createBean(a),a}setSuppressRefreshCell(t){this.suppressRefreshCell=t}getEditCompDetails(){return this.editCompDetails}onCellEditorAttached(t){this.onCellEditorAttachedFuncs.push(t)}cellEditorAttached(){this.onCellEditorAttachedFuncs.forEach(t=>t()),this.onCellEditorAttachedFuncs=[]}};_k.DOM_DATA_KEY_CELL_CTRL="cellCtrl";var dh=_k,f3=0,Bk=class oM extends de{constructor(t,i,s,n,r){var o;super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=i,this.gos=i.gos,this.rowNode=t,this.paginationPage=((o=i.paginationService)==null?void 0:o.getCurrentPage())??0,this.useAnimationFrameForCreate=n,this.printLayout=r,this.suppressRowTransform=this.gos.get("suppressRowTransform"),this.instanceId=t.id+"-"+f3++,this.rowId=la(t.id),this.initRowBusinessKey(),this.rowFocused=i.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=i.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(s),this.rowStyles=this.processStylesFromGridOptions(),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gos.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if(typeof this.businessKeyForNodeFunc!="function")return;const t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=la(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}isSticky(){return this.rowNode.sticky}updateGui(t,i){t==="left"?this.leftGui=i:t==="right"?this.rightGui=i:t==="fullWidth"?this.fullWidthGui=i:this.centerGui=i}setComp(t,i,s,n){n=nm(this,this.beans.context,n);const r={rowComp:t,element:i,containerType:s,compBean:n};this.allRowGuis.push(r),this.updateGui(s,r),this.initialiseRowComp(r),this.rowType!=="FullWidthLoading"&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){this.allRowGuis=this.allRowGuis.filter(i=>i.containerType!==t),this.updateGui(t,void 0)}isCacheable(){return this.rowType==="FullWidthDetail"&&this.gos.get("keepDetailRows")}setCached(t){const i=t?"none":"";this.allRowGuis.forEach(s=>s.element.style.display=i)}initialiseRowComp(t){const i=this.gos;this.onSuppressCellFocusChanged(this.beans.gos.get("suppressCellFocus")),this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),By(i)&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const s=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(r=>s.addOrRemoveCssClass(r,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&Wy(t.element,this.rowNode.expanded==!0),this.setRowCompRowId(s),this.setRowCompRowBusinessKey(s),vh(i,t.element,oM.DOM_DATA_KEY_ROW_CTRL,this),t.compBean.addDestroyFunc(()=>vh(i,t.element,oM.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t),this.isFullWidth()&&this.setupFullWidth(t),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{this.isAlive()&&t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){this.businessKeySanitised!=null&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=la(this.rowNode.id),this.rowId!=null&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){const{containerType:i}=t;this.slideInAnimation[i]&&(QL(()=>{this.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&(QL(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)}addRowDraggerToRow(t){if(Cl(this.gos)){we("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `cellSelection: true`");return}const i=this.beans.localeService.getLocaleTextFunc(),s=new Jb(()=>`1 ${i("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),n=this.createBean(s,this.beans.context);this.rowDragComps.push(n),t.compBean.addDestroyFunc(()=>{this.rowDragComps=this.rowDragComps.filter(r=>r!==n),this.destroyBean(n,this.beans.context)})}setupFullWidth(t){const i=this.getPinnedForContainer(t.containerType);if(this.rowType=="FullWidthDetail"&&!this.gos.assertModuleRegistered("@ag-grid-enterprise/master-detail","cell renderer 'agDetailCellRenderer' (for master detail)"))return;const s=this.createFullWidthCompDetails(t.element,i);t.rowComp.showFullWidth(s)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var t,i;return this.gos.get("embedFullWidthRows")?this.allRowGuis.map(s=>{var n;return(n=s==null?void 0:s.rowComp)==null?void 0:n.getFullWidthCellRenderer()}):[(i=(t=this.fullWidthGui)==null?void 0:t.rowComp)==null?void 0:i.getFullWidthCellRenderer()]}getCellElement(t){const i=this.getCellCtrl(t);return i?i.getGui():null}executeProcessRowPostCreateFunc(){const t=this.gos.getCallback("processRowPostCreate");if(!t||!this.areAllContainersReady())return;const i={eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)};t(i)}areAllContainersReady(){const t=!!this.leftGui||!this.beans.visibleColsService.isPinningLeft(),i=!!this.centerGui,s=!!this.rightGui||!this.beans.visibleColsService.isPinningRight();return t&&i&&s}isNodeFullWidthCell(){if(this.rowNode.detail)return!0;const t=this.beans.gos.getCallback("isFullWidthRow");return t?t({rowNode:this.rowNode}):!1}setRowType(){const t=this.rowNode.stub&&!this.gos.get("suppressServerSideFullWidthLoadingRow")&&!this.gos.get("groupHideOpenParents"),i=this.isNodeFullWidthCell(),s=this.gos.get("masterDetail")&&this.rowNode.detail,n=this.beans.columnModel.isPivotMode(),o=!!this.rowNode.group&&!this.rowNode.footer&&AC(this.gos,n);t?this.rowType="FullWidthLoading":s?this.rowType="FullWidthDetail":i?this.rowType="FullWidth":o?this.rowType="FullWidthGroup":this.rowType="Normal"}updateColumnLists(t=!1,i=!1){if(this.isFullWidth())return;if(t||this.gos.get("suppressAnimationFrame")||this.printLayout){this.updateColumnListsImpl(i);return}this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{this.active&&this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0)}createCellCtrls(t,i,s=null){const n={list:[],map:{}},r=(o,a)=>{n.list.push(a),n.map[o]=a};return i.forEach(o=>{const a=o.getInstanceId();let l=t.map[a];l||(l=new dh(o,this.rowNode,this.beans,this)),r(a,l)}),t.list.forEach(o=>{const a=o.getColumn().getInstanceId();if(n.map[a]!=null)return;if(!this.isCellEligibleToBeRemoved(o,s)){r(a,o);return}o.destroy()}),n}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(i=>{const s=this.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(s,t)})}getCellCtrlsForContainer(t){switch(t){case"left":return this.leftCellCtrls.list;case"right":return this.rightCellCtrls.list;case"fullWidth":return[];case"center":return this.centerCellCtrls.list}}createAllCellCtrls(){const t=this.beans.columnViewportService,i=this.beans.visibleColsService;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i.getAllCols()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const s=t.getColsWithinViewport(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,s);const n=i.getLeftColsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const r=i.getRightColsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,r,"right")}}isCellEligibleToBeRemoved(t,i){if(t.getColumn().getPinned()!=i)return!0;const o=t.isEditing(),a=this.beans.focusService.isCellFocused(t.getCellPosition());if(o||a){const c=t.getColumn();return!(this.beans.visibleColsService.getAllCols().indexOf(c)>=0)}return!0}getDomOrder(){return this.gos.get("ensureDomOrder")||Ts(this.gos,"print")}listenOnDomOrder(t){const i=()=>{t.rowComp.setDomOrder(this.getDomOrder())};t.compBean.addManagedPropertyListeners(["domLayout","ensureDomOrder"],i)}setAnimateFlags(t){if(this.isSticky()||!t)return;const i=Ae(this.rowNode.oldRowTop),s=this.beans.visibleColsService.isPinningLeft(),n=this.beans.visibleColsService.isPinningRight();if(i){if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.slideInAnimation.fullWidth=!0;return}this.slideInAnimation.center=!0,this.slideInAnimation.left=s,this.slideInAnimation.right=n}else{if(this.isFullWidth()&&!this.gos.get("embedFullWidthRows")){this.fadeInAnimation.fullWidth=!0;return}this.fadeInAnimation.center=!0,this.fadeInAnimation.left=s,this.fadeInAnimation.right=n}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!=="Normal"}refreshFullWidth(){const t=(a,l)=>a?a.rowComp.refreshFullWidth(()=>this.createFullWidthCompDetails(a.element,l).params):!0,i=t(this.fullWidthGui,null),s=t(this.centerGui,null),n=t(this.leftGui,"left"),r=t(this.rightGui,"right");return i&&s&&n&&r}addListeners(){this.addManagedListeners(this.rowNode,{heightChanged:()=>this.onRowHeightChanged(),rowSelected:()=>this.onRowSelected(),rowIndexChanged:this.onRowIndexChanged.bind(this),topChanged:this.onTopChanged.bind(this),expandedChanged:this.updateExpandedCss.bind(this),hasChildrenChanged:this.updateExpandedCss.bind(this)}),this.rowNode.detail&&this.addManagedListeners(this.rowNode.parent,{dataChanged:this.onRowNodeDataChanged.bind(this)}),this.addManagedListeners(this.rowNode,{dataChanged:this.onRowNodeDataChanged.bind(this),cellChanged:this.postProcessCss.bind(this),rowHighlightChanged:this.onRowNodeHighlightChanged.bind(this),draggingChanged:this.postProcessRowDragging.bind(this),uiLevelChanged:this.onUiLevelChanged.bind(this)}),this.addManagedListeners(this.beans.eventService,{paginationPixelOffsetChanged:this.onPaginationPixelOffsetChanged.bind(this),heightScaleChanged:this.onTopChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),virtualColumnsChanged:this.onVirtualColumnsChanged.bind(this),cellFocused:this.onCellFocusChanged.bind(this),cellFocusCleared:this.onCellFocusChanged.bind(this),paginationChanged:this.onPaginationChanged.bind(this),modelUpdated:this.refreshFirstAndLastRowStyles.bind(this),columnMoved:()=>this.updateColumnLists()}),this.addDestroyFunc(()=>{this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context),this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature,this.beans.context))}),this.addManagedPropertyListeners(["rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules"],this.postProcessCss.bind(this)),this.addManagedPropertyListener("rowDragEntireRow",()=>{if(this.gos.get("rowDragEntireRow")){this.allRowGuis.forEach(i=>{this.addRowDraggerToRow(i)});return}this.rowDragComps=this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListeners(this.rowNode,{rowIndexChanged:()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())},cellChanged:t=>{this.getAllCellCtrls().forEach(i=>i.onCellChanged(t))}})}onRowNodeDataChanged(t){if(this.isFullWidth()!==!!this.isNodeFullWidthCell()){this.beans.rowRenderer.redrawRow(this.rowNode);return}if(this.isFullWidth()){this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode);return}this.getAllCellCtrls().forEach(s=>s.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(s=>{this.setRowCompRowId(s.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(s.rowComp)}),this.onRowSelected(),this.postProcessCss()}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const t=this.rowNode.highlighted;this.allRowGuis.forEach(i=>{const s=t===0,n=t===1;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",s),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",n)})}postProcessRowDragging(){const t=this.rowNode.dragging;this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){const t=this.rowNode.isExpandable(),i=this.rowNode.expanded==!0;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass("ag-row-group",t),s.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&i),s.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!i),Wy(s.element,t&&i)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:dl(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}findFullWidthRowGui(t){return this.allRowGuis.find(i=>i.element.contains(t))}onKeyboardNavigate(t){const i=this.findFullWidthRowGui(t.target);if(!((i?i.element:null)===t.target))return;const r=this.rowNode,o=this.beans.focusService.getFocusedCell(),a={rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:(o==null?void 0:o.column)??this.getColumnForFullWidth(i)};this.beans.navigationService.navigateToNextCell(t,t.key,a,!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||pl(t))return;const i=this.allRowGuis.find(l=>l.element.contains(t.target)),s=i?i.element:null,n=s===t.target,r=_i(this.gos);let o=!1;s&&r&&(o=s.contains(r)&&r.classList.contains("ag-cell"));let a=null;!n&&!o&&(a=this.beans.focusService.findNextFocusableElement(s,!1,t.shiftKey)),(this.isFullWidth()&&n||!a)&&this.beans.navigationService.onTabKeyDown(this,t)}getFullWidthElement(){return this.fullWidthGui?this.fullWidthGui.element:null}getRowYPosition(){var i;const t=(i=this.allRowGuis.find(s=>ha(s.element)))==null?void 0:i.element;return t?t.getBoundingClientRect().top:0}onSuppressCellFocusChanged(t){const i=this.isFullWidth()&&t?void 0:-1;this.allRowGuis.forEach(s=>{Ur(s.element,"tabindex",i)})}onFullWidthRowFocused(t){var r;const i=this.rowNode,s=t?this.isFullWidth()&&t.rowIndex===i.rowIndex&&t.rowPinned==i.rowPinned:!1,n=this.fullWidthGui?this.fullWidthGui.element:(r=this.centerGui)==null?void 0:r.element;n&&(n.classList.toggle("ag-full-width-focus",s),s&&(t!=null&&t.forceBrowserFocus)&&n.focus({preventScroll:!0}))}recreateCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),t.destroy(),this.updateColumnLists()}removeCellCtrl(t,i){const s={list:[],map:{}};return t.list.forEach(n=>{n!==i&&(s.list.push(n),s.map[n.getColumn().getInstanceId()]=n)}),s}onMouseEvent(t,i){switch(t){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i);break}}createRowEvent(t,i){return this.gos.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:i})}createRowEventWithSource(t,i){const s=this.createRowEvent(t,i);return s.source=this,s}onRowDblClick(t){pl(t)||this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowDoubleClicked",t))}getColumnForFullWidth(t){const{visibleColsService:i}=this.beans;switch(t==null?void 0:t.containerType){case"center":return i.getCenterCols()[0];case"left":return i.getLeftCols()[0];case"right":return i.getRightCols()[0];default:return i.getAllCols()[0]}}onRowMouseDown(t){if(this.lastMouseDownOnDragger=qd(t.target,"ag-row-drag",3),!this.isFullWidth())return;const i=this.rowNode;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges();const s=this.findFullWidthRowGui(t.target),n=s==null?void 0:s.element,r=t.target;let o=!0;n&&n.contains(r)&&E0(r)&&(o=!1),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:this.getColumnForFullWidth(s),rowPinned:i.rowPinned,forceBrowserFocus:o})}onRowClick(t){if(pl(t)||this.lastMouseDownOnDragger)return;const{gos:s}=this;this.beans.eventService.dispatchEvent(this.createRowEventWithSource("rowClicked",t));const n=t.ctrlKey||t.metaKey,r=t.shiftKey,o=this.rowNode.isSelected(),a=yh(s),l=eT(s),c=uW(s);if(a&&this.rowNode.group||this.isRowSelectionBlocked()||!c&&!o||!l&&o)return;const p=hW(s),g="rowClicked";if(o)p?this.rowNode.setSelectedParams({newValue:!1,event:t,source:g}):n?l&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:g}):c&&this.rowNode.setSelectedParams({newValue:!0,clearSelection:!r,rangeSelect:r,event:t,source:g});else{const f=p?!1:!n;this.rowNode.setSelectedParams({newValue:!0,clearSelection:f,rangeSelect:r,event:t,source:g})}}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!By(this.gos)}setupDetailRowAutoHeight(t){if(this.rowType!=="FullWidthDetail"||!this.gos.get("detailRowAutoHeight"))return;const i=()=>{const n=t.clientHeight;if(n!=null&&n>0){const r=()=>{this.rowNode.setRowHeight(n),(xi(this.gos)||ya(this.gos))&&this.beans.rowModel.onRowHeightChanged()};window.setTimeout(r,0)}},s=this.beans.resizeObserverService.observeResize(t,i);this.addDestroyFunc(s),i()}createFullWidthCompDetails(t,i){const{gos:s,rowNode:n}=this,r=s.addGridCommonParams({fullWidth:!0,data:n.data,node:n,value:n.key,valueFormatted:n.key,eGridCell:t,eParentOfValue:t,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(a,l,c,p)=>this.addFullWidthRowDragging(a,l,c,p),setTooltip:(a,l)=>this.refreshRowTooltip(a,l)}),o=this.beans.userComponentFactory;switch(this.rowType){case"FullWidthDetail":return o.getFullWidthDetailCellRendererDetails(r);case"FullWidthGroup":return o.getFullWidthGroupCellRendererDetails(r);case"FullWidthLoading":return o.getFullWidthLoadingCellRendererDetails(r);default:return o.getFullWidthCellRendererDetails(r)}}refreshRowTooltip(t,i){if(!this.fullWidthGui)return;const s={getGui:()=>this.fullWidthGui.element,getTooltipValue:()=>t,getLocation:()=>"fullWidthRow",shouldDisplayTooltip:i};this.tooltipFeature&&this.destroyBean(this.tooltipFeature,this.beans.context),this.tooltipFeature=this.createBean(new Cp(s,this.beans))}addFullWidthRowDragging(t,i,s="",n){if(!this.isFullWidth())return;const r=new Jb(()=>s,this.rowNode,void 0,t,i,n);this.createBean(r,this.beans.context),this.addDestroyFunc(()=>{this.destroyBean(r,this.beans.context)})}onUiLevelChanged(){const t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){const i="ag-row-level-"+t,s="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass(i,!0),n.rowComp.addOrRemoveCssClass(s,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.pageBoundsService.getLastRow()}refreshFirstAndLastRowStyles(){const t=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-row-last",i)))}stopEditing(t=!1){var i;this.stoppingRowEdit||(i=this.beans.rowEditService)==null||i.stopEditing(this,t)}setInlineEditingCss(){const t=this.editingRow||this.getAllCellCtrls().some(i=>i.isEditing());this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t}startRowEditing(t=null,i=null,s=null){var n;return this.editingRow?!0:((n=this.beans.rowEditService)==null?void 0:n.startEditing(this,t,i,s))??!0}getAllCellCtrls(){return this.leftCellCtrls.list.length===0&&this.rightCellCtrls.list.length===0?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(i=>{this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass(i,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,i){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,s=>s.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t==="left"||t==="right"?t:null}getInitialRowClasses(t){const i=this.getPinnedForContainer(t),s={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2===0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(s)}processStylesFromGridOptions(){const t=this.gos.get("rowStyle");if(t&&typeof t=="function"){we("rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");return}const i=this.gos.getCallback("getRowStyle");let s;if(i){const n={data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex};s=i(n)}return s||t?Object.assign({},t,s):this.emptyStyle}onRowSelected(t){const i=!!this.rowNode.isSelected();this.forEachGui(t,s=>{s.rowComp.addOrRemoveCssClass("ag-row-selected",i),jy(s.element,i),s.element.contains(_i(this.gos))&&(s===this.centerGui||s===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const t=this.rowNode.isSelected();if(t&&!eT(this.gos))return;const s=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(s,"rowSelection")}addHoverFunctionality(t){if(!this.active)return;const{element:i,compBean:s}=t,{rowNode:n,beans:r,gos:o}=this;s.addManagedListeners(i,{mouseenter:()=>n.onMouseEnter(),mouseleave:()=>n.onMouseLeave()}),s.addManagedListeners(n,{mouseEnter:()=>{!r.dragService.isDragging()&&!o.get("suppressRowHoverHighlight")&&(i.classList.add("ag-row-hover"),n.setHovered(!0))},mouseLeave:()=>{i.classList.remove("ag-row-hover"),n.setHovered(!1)}})}roundRowTopToBounds(t){const i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),s=this.applyPaginationOffset(i.top,!0)-100,n=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(s,t),n)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,i){t?i(t):this.allRowGuis.forEach(i)}onRowHeightChanged(t){if(this.rowNode.rowHeight==null)return;const i=this.rowNode.rowHeight,s=this.beans.environment.getDefaultRowHeight(),r=yF(this.gos)?$c(this.gos,this.rowNode).height:void 0,o=r?`${Math.min(s,r)-2}px`:void 0;this.forEachGui(t,a=>{a.element.style.height=`${i}px`,o&&a.element.style.setProperty("--ag-line-height",o)})}addEventListener(t,i){super.addEventListener(t,i)}removeEventListener(t,i){super.removeEventListener(t,i)}destroyFirstPass(t=!1){if(this.active=!1,!t&&Qd(this.gos)&&!this.isSticky())if(this.rowNode.rowTop!=null){const n=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(n)}else this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const i=this.createRowEvent("virtualRowRemoved");this.dispatchLocalEvent(i),this.beans.eventService.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const t=i=>(i.list.forEach(s=>s.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){var i;const t=((i=this.beans.paginationService)==null?void 0:i.getCurrentPage())??0;this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,i=!1){if(this.rowNode.isRowPinned()||this.rowNode.sticky)return t;const s=this.beans.pageBoundsService.getPixelOffset();return t+s*(i?1:-1)}setRowTop(t){if(!this.printLayout&&Ae(t)){const i=this.applyPaginationOffset(t),r=`${this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}px`;this.setRowTopStyle(r)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";const i=this.rowNode;let s;if(this.isSticky())s=i.stickyRowTop;else{const n=this.slideInAnimation[t]?this.roundRowTopToBounds(i.oldRowTop):i.rowTop,r=this.applyPaginationOffset(n);s=i.isRowPinned()?r:this.beans.rowContainerHeightService.getRealPixelPosition(r)}return s+"px"}setRowTopStyle(t){this.allRowGuis.forEach(i=>this.suppressRowTransform?i.rowComp.setTop(t):i.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let i=null;return this.getAllCellCtrls().forEach(s=>{s.getColumn()==t&&(i=s)}),i!=null||this.getAllCellCtrls().forEach(s=>{s.getColSpanningList().indexOf(t)>=0&&(i=s)}),i}onRowIndexChanged(){this.rowNode.rowIndex!=null&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){var o;const i=this.rowNode.getRowIndexString();if(i===null)return;const s=this.beans.headerNavigationService.getHeaderRowCount()+(((o=this.beans.filterManager)==null?void 0:o.getHeaderRowCount())??0),n=this.rowNode.rowIndex%2===0,r=s+this.rowNode.rowIndex+1;this.forEachGui(t,a=>{a.rowComp.setRowIndex(i),a.rowComp.addOrRemoveCssClass("ag-row-even",n),a.rowComp.addOrRemoveCssClass("ag-row-odd",!n),qW(a.element,r)})}setStoppingRowEdit(t){this.stoppingRowEdit=t}};Bk.DOM_DATA_KEY_ROW_CTRL="renderedRow";var ph=Bk,m3=class extends de{wireBeans(e){this.mouseEventService=e.mouseEventService,this.valueService=e.valueService,this.menuService=e.menuService,this.ctrlsService=e.ctrlsService,this.navigationService=e.navigationService,this.focusService=e.focusService,this.undoRedoService=e.undoRedoService,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.rangeService=e.rangeService,this.clipboardService=e.clipboardService}constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedElementListeners(this.element,{[e]:t})}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",LF("touchstart")?"touchstart":"mousedown"].forEach(i=>{const s=this.processMouseEvent.bind(this,i);this.addManagedElementListeners(this.element,{[i]:s})})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||pl(t))return;const i=this.getRowForEvent(t),s=this.mouseEventService.getRenderedCellForEvent(t);e==="contextmenu"?this.handleContextMenuMouseEvent(t,void 0,i,s):(s&&s.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!eu())return;const e=new Bc(this.element),t=i=>{const s=this.getRowForEvent(i.touchEvent),n=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(void 0,i.touchEvent,s,n)};this.addManagedListeners(e,{longTap:t}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){const i=Sf(this.gos,t,ph.DOM_DATA_KEY_ROW_CTRL);if(i)return i;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,s){const n=i?i.getRowNode():null,r=s?s.getColumn():null;let o=null;if(r){const c=e||t;s.dispatchCellContextMenuEvent(c??null),o=this.valueService.getValue(r,n)}const a=this.ctrlsService.getGridBodyCtrl(),l=s?s.getGui():a.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:n,column:r,value:o,anchorToElement:l})}getControlsForEventTarget(e){return{cellCtrl:jb(this.gos,e,dh.DOM_DATA_KEY_CELL_CTRL),rowCtrl:jb(this.gos,e,ph.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:s}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):s&&s.isFullWidth()&&this.processFullWidthRowKeyboardEvent(s,e,t))}processCellKeyboardEvent(e,t,i){const s=e.getRowNode(),n=e.getColumn(),r=e.isEditing();!eM(this.gos,i,s,n,r)&&t==="keydown"&&(!r&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),fk(i)&&e.processCharacter(i)),t==="keydown"&&this.eventService.dispatchEvent(e.createEvent(i,"cellKeyDown"))}processFullWidthRowKeyboardEvent(e,t,i){const s=e.getRowNode(),n=this.focusService.getFocusedCell(),r=n&&n.column;if(!eM(this.gos,i,s,r,!1)){const a=i.key;if(t==="keydown")switch(a){case le.PAGE_HOME:case le.PAGE_END:case le.PAGE_UP:case le.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case le.UP:case le.DOWN:e.onKeyboardNavigate(i);break;case le.TAB:e.onTabKeyDown(i);break}}t==="keydown"&&this.eventService.dispatchEvent(e.createRowEvent("cellKeyDown",i))}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;const i=IU(e);if(i===le.A)return this.onCtrlAndA(e);if(i===le.C)return this.onCtrlAndC(e);if(i===le.D)return this.onCtrlAndD(e);if(i===le.V)return this.onCtrlAndV(e);if(i===le.X)return this.onCtrlAndX(e);if(i===le.Y)return this.onCtrlAndY();if(i===le.Z)return this.onCtrlAndZ(e)}onCtrlAndA(e){const{pinnedRowModel:t,rowModel:i,rangeService:s}=this;if(s&&i.isRowsToRender()){const[n,r]=[t.isEmpty("top"),t.isEmpty("bottom")],o=n?null:"top";let a,l;r?(a=null,l=i.getRowCount()-1):(a="bottom",l=t.getPinnedBottomRowCount()-1);const c=this.visibleColsService.getAllCols();if(hr(c))return;s.setCellRange({rowStartIndex:0,rowStartPinned:o,rowEndIndex:l,rowEndPinned:a,columnStart:c[0],columnEnd:At(c)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gos.get("enableCellTextSelection")||this.gos.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t!=null&&t.isEditing()||i!=null&&i.isEditing()||this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gos.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gos.get("undoRedoCellEditing")||!this.undoRedoService||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){var e;(e=this.undoRedoService)==null||e.redo("ui")}},v3=class extends de{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({leftPinnedWidthChanged:this.onPinnedLeftWidthChanged.bind(this)})}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth(),t=e>0;Ni(this.element,t),To(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}},y3=class extends de{wireBeans(e){this.pinnedWidthService=e.pinnedWidthService}constructor(e){super(),this.element=e}postConstruct(){this.addManagedEventListeners({rightPinnedWidthChanged:this.onPinnedRightWidthChanged.bind(this)})}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth(),t=e>0;Ni(this.element,t),To(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}},jv=e=>e.getTopRowCtrls(),Uv=e=>e.getStickyTopRowCtrls(),Kv=e=>e.getStickyBottomRowCtrls(),Yv=e=>e.getBottomRowCtrls(),$v=e=>e.getCentreRowCtrls(),C3={center:{type:"center",container:"ag-center-cols-container",viewport:"ag-center-cols-viewport",getRowCtrls:$v},left:{type:"left",container:"ag-pinned-left-cols-container",pinnedType:"left",getRowCtrls:$v},right:{type:"right",container:"ag-pinned-right-cols-container",pinnedType:"right",getRowCtrls:$v},fullWidth:{type:"fullWidth",container:"ag-full-width-container",fullWidth:!0,getRowCtrls:$v},topCenter:{type:"center",container:"ag-floating-top-container",viewport:"ag-floating-top-viewport",getRowCtrls:jv},topLeft:{type:"left",container:"ag-pinned-left-floating-top",pinnedType:"left",getRowCtrls:jv},topRight:{type:"right",container:"ag-pinned-right-floating-top",pinnedType:"right",getRowCtrls:jv},topFullWidth:{type:"fullWidth",container:"ag-floating-top-full-width-container",fullWidth:!0,getRowCtrls:jv},stickyTopCenter:{type:"center",container:"ag-sticky-top-container",viewport:"ag-sticky-top-viewport",getRowCtrls:Uv},stickyTopLeft:{type:"left",container:"ag-pinned-left-sticky-top",pinnedType:"left",getRowCtrls:Uv},stickyTopRight:{type:"right",container:"ag-pinned-right-sticky-top",pinnedType:"right",getRowCtrls:Uv},stickyTopFullWidth:{type:"fullWidth",container:"ag-sticky-top-full-width-container",fullWidth:!0,getRowCtrls:Uv},stickyBottomCenter:{type:"center",container:"ag-sticky-bottom-container",viewport:"ag-sticky-bottom-viewport",getRowCtrls:Kv},stickyBottomLeft:{type:"left",container:"ag-pinned-left-sticky-bottom",pinnedType:"left",getRowCtrls:Kv},stickyBottomRight:{type:"right",container:"ag-pinned-right-sticky-bottom",pinnedType:"right",getRowCtrls:Kv},stickyBottomFullWidth:{type:"fullWidth",container:"ag-sticky-bottom-full-width-container",fullWidth:!0,getRowCtrls:Kv},bottomCenter:{type:"center",container:"ag-floating-bottom-container",viewport:"ag-floating-bottom-viewport",getRowCtrls:Yv},bottomLeft:{type:"left",container:"ag-pinned-left-floating-bottom",pinnedType:"left",getRowCtrls:Yv},bottomRight:{type:"right",container:"ag-pinned-right-floating-bottom",pinnedType:"right",getRowCtrls:Yv},bottomFullWidth:{type:"fullWidth",container:"ag-floating-bottom-full-width-container",fullWidth:!0,getRowCtrls:Yv}};function Ud(e){return C3[e]}var S3=["topCenter","topLeft","topRight"],w3=["bottomCenter","bottomLeft","bottomRight"],x3=["center","left","right"],b3=["center","left","right","fullWidth"],M3=["stickyTopCenter","stickyBottomCenter","center","topCenter","bottomCenter"],R3=["left","bottomLeft","topLeft","stickyTopLeft","stickyBottomLeft"],D3=["right","bottomRight","topRight","stickyTopRight","stickyBottomRight"],Gk=["stickyTopCenter","stickyTopLeft","stickyTopRight"],zk=["stickyBottomCenter","stickyBottomLeft","stickyBottomRight"],E3=[...Gk,"stickyTopFullWidth",...zk,"stickyBottomFullWidth"],I3=[...S3,...w3,...x3,...Gk,...zk],L3=class extends de{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.options=Ud(e)}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService,this.columnViewportService=e.columnViewportService,this.resizeObserverService=e.resizeObserverService,this.rowRenderer=e.rowRenderer}postConstruct(){this.enableRtl=this.gos.get("enableRtl"),this.forContainers(["center"],()=>{this.viewportSizeFeature=this.createManagedBean(new V4(this)),this.addManagedEventListeners({stickyTopOffsetChanged:this.onStickyTopOffsetChanged.bind(this)})})}onStickyTopOffsetChanged(e){this.comp.setOffsetTop(`${e.offset}px`)}registerWithCtrlsService(){this.options.fullWidth||this.ctrlsService.register(this.name,this)}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new m3(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder();const s=()=>this.onPinnedWidthChanged();this.forContainers(R3,()=>{this.pinnedWidthFeature=this.createManagedBean(new v3(this.eContainer)),this.addManagedEventListeners({leftPinnedWidthChanged:s})}),this.forContainers(D3,()=>{this.pinnedWidthFeature=this.createManagedBean(new y3(this.eContainer)),this.addManagedEventListeners({rightPinnedWidthChanged:s})}),this.forContainers(b3,()=>this.createManagedBean(new Ok(this.eContainer,this.name==="center"?i:void 0))),this.forContainers(I3,()=>this.createManagedBean(new W4(this.eContainer))),this.forContainers(M3,()=>this.createManagedBean(new W0(n=>this.comp.setContainerWidth(`${n}px`)))),this.visible=this.isContainerVisible(),this.addListeners(),this.registerWithCtrlsService()}onScrollCallback(e){this.addManagedElementListeners(this.getViewportElement(),{scroll:e})}addListeners(){this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this),displayedRowsChanged:e=>this.onDisplayedRowsChanged(e.afterScroll)}),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if(E3.indexOf(this.name)>=0){this.comp.setDomOrder(!0);return}const t=()=>{const i=this.gos.get("ensureDomOrder"),s=Ts(this.gos,"print");this.comp.setDomOrder(i||s)};this.addManagedPropertyListener("domLayout",t),t()}onDisplayedColumnsChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers(["center"],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnViewportService.setScrollPosition(t,i,e)}hasHorizontalScrollGap(){return this.eContainer.clientWidth-this.eViewport.clientWidth<0}hasVerticalScrollGap(){return this.eContainer.clientHeight-this.eViewport.clientHeight<0}getCenterWidth(){return om(this.eViewport)}getCenterViewportScrollLeft(){return Yy(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return ZF(this.eViewport)}getViewportScrollLeft(){return Yy(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gos.get("alwaysShowHorizontalScroll")||uj(this.eViewport)}getViewportElement(){return this.eViewport}setHorizontalScroll(e){this.comp.setHorizontalScroll(e)}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){$y(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!(this.options.pinnedType!=null)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){const t=this.options.getRowCtrls(this.rowRenderer);if(!this.visible||t.length===0){this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});return}const i=Ts(this.gos,"print"),n=this.gos.get("embedFullWidthRows")||i,r=t.filter(o=>{const a=o.isFullWidth();return this.options.fullWidth?!n&&a:n||!a});this.comp.setRowCtrls({rowCtrls:r,useFlushSync:e})}},T3="ag-force-vertical-scroll",A3="ag-selectable",P3="ag-column-moving",F3=class extends de{constructor(){super(...arguments),this.stickyTopHeight=0,this.stickyBottomHeight=0}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.scrollVisibleService=e.scrollVisibleService,this.menuService=e.menuService,this.headerNavigationService=e.headerNavigationService,this.dragAndDropService=e.dragAndDropService,this.pinnedRowModel=e.pinnedRowModel,this.rowRenderer=e.rowRenderer,this.popupService=e.popupService,this.mouseEventService=e.mouseEventService,this.rowModel=e.rowModel,this.filterManager=e.filterManager,this.environment=e.environment}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,s,n,r,o){var a;this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=s,this.eBottom=n,this.eStickyTop=r,this.eStickyBottom=o,this.eCenterColsViewport=i.querySelector(`.${Ud("center").viewport}`),this.eFullWidthContainer=i.querySelector(`.${Ud("fullWidth").container}`),this.eStickyTopFullWidthContainer=r.querySelector(`.${Ud("stickyTopFullWidth").container}`),this.eStickyBottomFullWidthContainer=o.querySelector(`.${Ud("stickyBottomFullWidth").container}`),this.setCellTextSelection(this.gos.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",l=>this.setCellTextSelection(l.currentValue)),this.createManagedBean(new U0(this.comp)),this.bodyScrollFeature=this.createManagedBean(new H4(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([s,i,n,r,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.updateScrollingClasses(),(a=this.filterManager)==null||a.setupAdvancedFilterHeaderComp(s),this.ctrlsService.register("gridBodyCtrl",this)}getComp(){return this.comp}addEventListeners(){const e=this.setFloatingHeights.bind(this);this.addManagedEventListeners({gridColumnsChanged:this.onGridColumnsChanged.bind(this),scrollVisibilityChanged:this.onScrollVisibilityChanged.bind(this),scrollGapChanged:this.onScrollGapChanged.bind(this),pinnedRowDataChanged:e,pinnedHeightChanged:e,headerHeightChanged:this.onHeaderHeightChanged.bind(this)})}addFocusListeners(e){e.forEach(t=>{this.addManagedElementListeners(t,{focusin:i=>{const{target:s}=i,n=qd(s,"ag-root",t);t.classList.toggle("ag-has-focus",!n)},focusout:i=>{const{target:s,relatedTarget:n}=i,r=t.contains(n),o=qd(n,"ag-root",t);qd(s,"ag-root",t)||(!r||o)&&t.classList.remove("ag-has-focus")}})})}setColumnMovingCss(e){this.comp.setColumnMovingCss(P3,e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss(A3,e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyWidth(e),this.setStickyBottomOffsetBottom();const t=e&&this.scrollVisibleService.getScrollbarWidth()||0,i=UF()?16:0,s=`calc(100% + ${t+i}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(s)),this.updateScrollingClasses()}onScrollGapChanged(){this.updateScrollingClasses()}updateScrollingClasses(){this.eGridBody.classList.toggle("ag-body-vertical-content-no-gap",!this.scrollVisibleService.hasVerticalScrollGap()),this.eGridBody.classList.toggle("ag-body-horizontal-content-no-gap",!this.scrollVisibleService.hasHorizontalScrollGap())}onGridColumnsChanged(){const e=this.columnModel.getCols();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedElementListeners(this.eGridBody,{dragstart:e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1}})}addStopEditingWhenGridLosesFocus(){if(!this.gos.get("stopEditingWhenCellsLoseFocus"))return;const e=i=>{const s=i.relatedTarget;if(Qb(s)===null){this.rowRenderer.stopEditing();return}let n=t.some(r=>r.contains(s))&&this.mouseEventService.isElementInThisGrid(s);if(!n){const r=this.popupService;n=r.getActivePopups().some(o=>o.contains(s))||r.isElementWithinCustomPopup(s)}n||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop,this.eStickyBottom];t.forEach(i=>this.addManagedElementListeners(i,{focusout:e}))}updateRowCount(){var s;const e=this.headerNavigationService.getHeaderRowCount()+(((s=this.filterManager)==null?void 0:s.getHeaderRowCount())??0),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1,i=t===-1?-1:e+t;this.comp.setRowCount(i)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){const t=e?"scroll":"hidden";this.comp.setPinnedTopBottomOverflowY(t)}isVerticalScrollShowing(){const e=this.gos.get("alwaysShowVerticalScroll"),t=e?T3:null,i=Ts(this.gos,"normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&hj(this.eBodyViewport)}setupRowAnimationCssClass(){let e=this.environment.hasMeasuredSizes();const t=()=>{const i=e&&Qd(this.gos)&&!this.rowContainerHeightService.isStretching(),s=i?"ag-row-animation":"ag-row-no-animation";this.comp.setRowAnimationCssOnBodyViewport(s,i)};t(),this.addManagedEventListeners({heightScaleChanged:t}),this.addManagedPropertyListener("animateRows",t),this.addManagedEventListeners({gridStylesChanged:()=>{!e&&this.environment.hasMeasuredSizes()&&(e=!0,t())}})}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedElementListeners(this.eBodyViewport,{contextmenu:e}),this.mockContextMenuForIPad(e),this.addManagedElementListeners(this.eBodyViewport,{wheel:this.onBodyViewportWheel.bind(this)}),this.addManagedElementListeners(this.eStickyTop,{wheel:this.onStickyWheel.bind(this)}),this.addManagedElementListeners(this.eStickyBottom,{wheel:this.onStickyWheel.bind(this)}),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){this.addManagedElementListeners(this.eFullWidthContainer,{wheel:e=>this.onFullWidthContainerWheel(e)})}onFullWidthContainerWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e;(s||Math.abs(t)>Math.abs(i))&&this.mouseEventService.isEventFromThisGrid(e)&&this.scrollGridBodyToMatchEvent(e)}onStickyWheel(e){const{deltaX:t,deltaY:i,shiftKey:s}=e,n=s||Math.abs(t)>Math.abs(i),r=e.target;n?(this.eStickyTopFullWidthContainer.contains(r)||this.eStickyBottomFullWidthContainer.contains(r))&&this.scrollGridBodyToMatchEvent(e):(e.preventDefault(),this.scrollVertically(i))}scrollGridBodyToMatchEvent(e){const{deltaX:t,deltaY:i}=e;e.preventDefault(),this.eCenterColsViewport.scrollBy({left:t||i})}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gos.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:s}=e||t;(s===this.eBodyViewport||s===this.ctrlsService.get("center").getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!eu())return;const t=new Bc(this.eBodyViewport),i=s=>{e(void 0,s.touchStart,s.touchEvent)};this.addManagedListeners(t,{longTap:i}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){this.gos.get("suppressScrollWhenPopupsAreOpen")&&this.popupService.hasAnchoredPopup()&&e.preventDefault()}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new aU(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(this.rowDragFeature))}getRowDragFeature(){return this.rowDragFeature}setFloatingHeights(){const{pinnedRowModel:e}=this,t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop(),this.setStickyBottomOffsetBottom()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyBottomHeight(e=0){this.comp.setStickyBottomHeight(`${e}px`),this.stickyBottomHeight=e}getStickyBottomHeight(){return this.stickyBottomHeight}setStickyWidth(e){if(!e)this.comp.setStickyTopWidth("100%"),this.comp.setStickyBottomWidth("100%");else{const t=this.scrollVisibleService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`),this.comp.setStickyBottomWidth(`calc(100% - ${t}px)`)}}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){var n;const t=this.ctrlsService.get("gridHeaderCtrl").getHeaderHeight()+(((n=this.filterManager)==null?void 0:n.getHeaderHeight())??0),i=this.pinnedRowModel.getPinnedTopTotalHeight();let s=0;t>0&&(s+=t),i>0&&(s+=i),s>0&&(s+=1),this.comp.setStickyTopTop(`${s}px`)}setStickyBottomOffsetBottom(){const e=this.pinnedRowModel.getPinnedBottomTotalHeight(),i=this.scrollVisibleService.isHorizontalScrollShowing()&&this.scrollVisibleService.getScrollbarWidth()||0,s=e+i;this.comp.setStickyBottomBottom(`${s}px`)}sizeColumnsToFit(e,t){const s=this.isVerticalScrollShowing()?this.scrollVisibleService.getScrollbarWidth():0,r=om(this.eGridBody)-s;if(r>0){this.columnSizeService.sizeColumnsToFit(r,"sizeColumnsToFit",!1,e);return}t===void 0?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):t===100?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):t===500?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):we("tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}};function Ng(e){return e.map(t=>`<ag-row-container name="${t}"></ag-row-container>`).join("")}`${Ng(["topLeft","topCenter","topRight","topFullWidth"])}${Ng(["left","center","right","fullWidth"])}${Ng(["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"])}${Ng(["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"])}${Ng(["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"])}`;var k3=class extends de{constructor(){super(...arguments),this.beanName="scrollVisibleService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnAnimationService=e.columnAnimationService}postConstruct(){this.getScrollbarWidth(),this.addManagedEventListeners({displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),displayedColumnsWidthChanged:this.onDisplayedColumnsWidthChanged.bind(this)})}onDisplayedColumnsChanged(){this.updateScrollVisible()}onDisplayedColumnsWidthChanged(){this.updateScrollVisible()}onCentreViewportResized(){this.updateScrollGap()}updateScrollVisible(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateScrollVisibleImpl())}):this.updateScrollVisibleImpl()}updateScrollVisibleImpl(){const e=this.ctrlsService.get("center");if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t),this.updateScrollGap()}updateScrollGap(){const e=this.ctrlsService.get("center"),t=e.hasHorizontalScrollGap(),i=e.hasVerticalScrollGap();(this.horizontalScrollGap!==t||this.verticalScrollGap!==i)&&(this.horizontalScrollGap=t,this.verticalScrollGap=i,this.eventService.dispatchEvent({type:"scrollGapChanged"}))}setScrollsVisible(e){(this.horizontalScrollShowing!==e.horizontalScrollShowing||this.verticalScrollShowing!==e.verticalScrollShowing)&&(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:"scrollVisibilityChanged"}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}hasHorizontalScrollGap(){return this.horizontalScrollGap}hasVerticalScrollGap(){return this.verticalScrollGap}getScrollbarWidth(){if(this.scrollbarWidth==null){const e=this.gos.get("scrollbarWidth"),i=typeof e=="number"&&e>=0?e:aj();i!=null&&(this.scrollbarWidth=i,this.eventService.dispatchEvent({type:"scrollbarWidthChanged"}))}return this.scrollbarWidth}},fT="__ag_grid_instance",Hk=class Vk extends de{constructor(){super(...arguments),this.beanName="mouseEventService",this.gridInstanceId=Vk.gridInstanceSequence.next()}wireBeans(t){this.ctrlsService=t.ctrlsService}stampTopLevelGridCompWithGridInstance(t){t[fT]=this.gridInstanceId}getRenderedCellForEvent(t){return jb(this.gos,t.target,dh.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(t){return this.isElementInThisGrid(t.target)}isElementInThisGrid(t){let i=t;for(;i;){const s=i[fT];if(Ae(s))return s===this.gridInstanceId;i=i.parentElement}return!1}getCellPositionForEvent(t){const i=this.getRenderedCellForEvent(t);return i?i.getCellPosition():null}getNormalisedPosition(t){const i=Ts(this.gos,"normal"),s=t;let n,r;if(s.clientX!=null||s.clientY!=null?(n=s.clientX,r=s.clientY):(n=s.x,r=s.y),i){const o=this.ctrlsService.getGridBodyCtrl(),a=o.getScrollFeature().getVScrollPosition(),l=o.getScrollFeature().getHScrollPosition();n+=l.left,r+=a.top}return{x:n,y:r}}};Hk.gridInstanceSequence=new up;var N3=Hk,O3=class extends de{constructor(){super(),this.beanName="navigationService",this.onPageDown=qL(this.onPageDown,100),this.onPageUp=qL(this.onPageUp,100)}wireBeans(e){this.mouseEventService=e.mouseEventService,this.pageBoundsService=e.pageBoundsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.ctrlsService=e.ctrlsService,this.rowRenderer=e.rowRenderer,this.headerNavigationService=e.headerNavigationService,this.rowPositionUtils=e.rowPositionUtils,this.cellNavigationService=e.cellNavigationService,this.pinnedRowModel=e.pinnedRowModel,this.scrollVisibleService=e.scrollVisibleService,this.rangeService=e.rangeService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const i=e.key,s=e.altKey,n=e.ctrlKey||e.metaKey,r=!!this.rangeService&&e.shiftKey,o=this.mouseEventService.getCellPositionForEvent(e);let a=!1;switch(i){case le.PAGE_HOME:case le.PAGE_END:!n&&!s&&(this.onHomeOrEndKey(i),a=!0);break;case le.LEFT:case le.RIGHT:case le.UP:case le.DOWN:if(!o)return!1;n&&!s&&!r&&(this.onCtrlUpDownLeftRight(i,o),a=!0);break;case le.PAGE_DOWN:case le.PAGE_UP:!n&&!s&&(a=this.handlePageUpDown(i,o,t));break}return a&&e.preventDefault(),a}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),t?(e===le.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0):!1}navigateTo(e){var o;const{scrollIndex:t,scrollType:i,scrollColumn:s,focusIndex:n,focusColumn:r}=e;Ae(s)&&!s.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(s),Ae(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(n),this.focusService.setFocusedCell({rowIndex:n,column:r,rowPinned:null,forceBrowserFocus:!0}),(o=this.rangeService)==null||o.setRangeToCell({rowIndex:n,rowPinned:null,column:r})}onPageDown(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.getViewportHeight(),n=this.pageBoundsService.getPixelOffset(),r=i.top+s,o=this.rowModel.getRowIndexAtPixel(r+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o):this.navigateToNextPage(e,o)}onPageUp(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),s=this.pageBoundsService.getPixelOffset(),n=i.top,r=this.rowModel.getRowIndexAtPixel(n+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,r,!0):this.navigateToNextPage(e,r,!0)}navigateToNextPage(e,t,i=!1){const s=this.getViewportHeight(),n=this.pageBoundsService.getFirstRow(),r=this.pageBoundsService.getLastRow(),o=this.pageBoundsService.getPixelOffset(),a=this.rowModel.getRow(e.rowIndex),l=i?(a==null?void 0:a.rowHeight)-s-o:s-o,c=(a==null?void 0:a.rowTop)+l;let p=this.rowModel.getRowIndexAtPixel(c+o);if(p===e.rowIndex){const f=i?-1:1;t=p=e.rowIndex+f}let g;i?(g="bottom",p<n&&(p=n),t<n&&(t=n)):(g="top",p>r&&(p=r),t>r&&(t=r)),this.isRowTallerThanView(p)&&(t=p,g="top"),this.navigateTo({scrollIndex:t,scrollType:g,scrollColumn:null,focusIndex:p,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const s=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:s,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){const i=t?-1:1,s=this.getViewportHeight(),n=this.pageBoundsService.getLastRow();let r=0,o=e.rowIndex;for(;o>=0&&o<=n;){const a=this.rowModel.getRow(o);if(a){const l=a.rowHeight??0;if(r+l>s)break;r+=l}o+=i}return Math.max(0,Math.min(o,n))}getViewportHeight(){const e=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),t=this.scrollVisibleService.getScrollbarWidth();let i=e.bottom-e.top;return this.ctrlsService.get("center").isHorizontalScrollShowing()&&(i-=t),i}isRowTallerThanView(e){const t=this.rowModel.getRow(e);if(!t)return!1;const i=t.rowHeight;return typeof i!="number"?!1:i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:s}=i,n=i.column;this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:n,focusIndex:s,focusColumn:n})}onHomeOrEndKey(e){const t=e===le.PAGE_HOME,i=this.visibleColsService.getAllCols(),s=t?i[0]:At(i),n=t?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow();this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:s,focusIndex:n,focusColumn:s})}onTabKeyDown(e,t){const i=t.shiftKey,s=this.tabToNextCellCommon(e,i,t);if(s!==!1){s?t.preventDefault():s===null&&this.focusService.allowFocusForNextGridCoreContainer(i);return}if(i){const{rowIndex:n,rowPinned:r}=e.getRowPosition();(r?n===0:n===this.pageBoundsService.getFirstRow())&&(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof dh&&e.focusCell(!0),(!i&&this.focusService.focusOverlay(!1)||this.focusService.focusNextGridCoreContainer(i))&&t.preventDefault()}tabToNextCell(e,t){const i=this.focusService.getFocusedCell();if(!i)return!1;let s=this.getCellByPosition(i);return!s&&(s=this.rowRenderer.getRowByPosition(i),!s||!s.isFullWidth())?!1:!!this.tabToNextCellCommon(s,e,t)}tabToNextCellCommon(e,t,i){let s=e.isEditing();if(!s&&e instanceof dh){const o=e.getRowCtrl();o&&(s=o.isEditing())}let n;return s?this.gos.get("editType")==="fullRow"?n=this.moveToNextEditingRow(e,t,i):n=this.moveToNextEditingCell(e,t,i):n=this.moveToNextCellNotEditing(e,t),n===null?n:n||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,i=null){const s=e.getCellPosition();e.getGui().focus(),e.stopEditing();const n=this.findNextCellToFocusOn(s,t,!0);return n===!1?null:n==null?!1:(n.startEditing(null,!0,i),n.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){const s=e.getCellPosition(),n=this.findNextCellToFocusOn(s,t,!0);if(n===!1)return null;if(n==null)return!1;const r=n.getCellPosition(),o=this.isCellEditable(s),a=this.isCellEditable(r),l=r&&s.rowIndex===r.rowIndex&&s.rowPinned===r.rowPinned;return o&&e.setFocusOutOnEditor(),l||(e.getRowCtrl().stopEditing(),n.getRowCtrl().startRowEditing(void 0,void 0,i)),a?(n.setFocusInOnEditor(),n.focusCell()):n.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.visibleColsService.getAllCols();let s;e instanceof ph?s={...e.getRowPosition(),column:t?i[0]:At(i)}:s=e.getCellPosition();const n=this.findNextCellToFocusOn(s,t,!1);if(n===!1)return null;if(n instanceof dh)n.focusCell(!0);else if(n)return this.tryToFocusFullWidthRow(n.getRowPosition(),t);return Ae(n)}findNextCellToFocusOn(e,t,i){var n;let s=e;for(;;){e!==s&&(e=s),t||(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextTabbedCell(s,t);const r=this.gos.getCallback("tabToNextCell");if(Ae(r)){const c=r({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:s||null});if(c===!0||c===null)c===null&&we("Returning `null` from tabToNextCell is deprecated. Return `true` to stay on the current cell, or `false` to let the browser handle the tab behaviour."),s=e;else{if(c===!1)return!1;s={rowIndex:c.rowIndex,column:c.column,rowPinned:c.rowPinned}}}if(!s)return null;if(s.rowIndex<0){const l=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:l+s.rowIndex,column:s.column},fromCell:!0}),null}const o=this.gos.get("editType")==="fullRow";if(i&&!o&&!this.isCellEditable(s))continue;this.ensureCellVisible(s);const a=this.getCellByPosition(s);if(!a){const l=this.rowRenderer.getRowByPosition(s);if(!l||!l.isFullWidth()||i)continue;return l}if(!a.isSuppressNavigable())return(n=this.rangeService)==null||n.setRangeToCell(s),a}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return t?e.column.isCellEditable(t):!1}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return e.rowPinned==="top"?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):e.rowPinned==="bottom"?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.rowModel.getRow(e.rowIndex)}navigateToNextCell(e,t,i,s){let n=i,r=!1;for(;n&&(n===i||!this.isValidNavigateCell(n));)this.gos.get("enableRtl")?t===le.LEFT&&(n=this.getLastCellOfColSpan(n)):t===le.RIGHT&&(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextCellToFocus(t,n),r=Pt(n);if(r&&e&&e.key===le.UP&&(n={rowIndex:-1,rowPinned:null,column:i.column}),s){const a=this.gos.getCallback("navigateToNextCell");if(Ae(a)){const c=a({key:t,previousCellPosition:i,nextCellPosition:n||null,event:e});Ae(c)?n={rowPinned:c.rowPinned,rowIndex:c.rowIndex,column:c.column}:n=null}}if(!n)return;if(n.rowIndex<0){const a=this.headerNavigationService.getHeaderRowCount();this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:a+n.rowIndex,column:i.column},event:e||void 0,fromCell:!0});return}const o=this.getNormalisedPosition(n);o?this.focusPosition(o):this.tryToFocusFullWidthRow(n)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t){const i=this.visibleColsService.getAllCols(),s=this.rowRenderer.getRowByPosition(e);if(!s||!s.isFullWidth())return!1;const n=this.focusService.getFocusedCell(),r={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?At(i):i[0])};this.focusPosition(r);const o=t??(n!=null&&this.rowPositionUtils.before(r,n));return this.eventService.dispatchEvent({type:"fullWidthRowFocused",rowIndex:r.rowIndex,rowPinned:r.rowPinned,column:r.column,isFullWidthCell:!0,fromBelow:o}),!0}focusPosition(e){var t;this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),(t=this.rangeService)==null||t.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const i=t.getColSpanningList();return i.length===1?e:{rowIndex:e.rowIndex,column:At(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=TC(this.gos),i=this.rowModel.getRow(e.rowIndex);!(t&&(i==null?void 0:i.sticky))&&Pt(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}},_3=class extends de{constructor(){super(...arguments),this.beanName="horizontalResizeService"}wireBeans(e){this.dragService=e.dragService,this.ctrlsService=e.ctrlsService}addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),onDragCancel:this.onDragStop.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&t.shiftKey===!0;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.get("gridCtrl");e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}},B3=class extends de{constructor(){super(...arguments),this.beanName="filterMenuFactory"}wireBeans(e){this.popupService=e.popupService,this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.menuService=e.menuService}hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,s=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:s})},i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let s=-1,n="left";const r=this.menuService.isLegacyMenuEnabled();!r&&this.gos.get("enableRtl")&&(s=1,n="right");const o=r?void 0:4*s,a=r?void 0:4;this.showPopup(e,l=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:l,nudgeX:o,nudgeY:a,alignSide:n,keepWithinBounds:!0,position:"under",column:e})},i,t,r)}showPopup(e,t,i,s,n){const r=e?this.createBean(new pU(e,"COLUMN_MENU")):void 0;if(this.activeMenu=r,!(r!=null&&r.hasFilter())||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const o=document.createElement("div");Fo(o,"presentation"),o.classList.add("ag-menu"),n||o.classList.add("ag-filter-menu"),[this.tabListener]=this.addManagedElementListeners(o,{keydown:C=>this.trapFocusWithin(C,o)}),o.appendChild(r==null?void 0:r.getGui());let a;const l=()=>r==null?void 0:r.afterGuiDetached(),c=this.menuService.isColumnMenuAnchoringEnabled()?s??this.ctrlsService.getGridBodyCtrl().getGui():void 0,p=C=>{e.setMenuVisible(!1,"contextMenu");const x=C instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),x&&s&&ha(s)){const M=this.focusService.findTabbableParent(s);M&&M.focus()}l(),this.destroyBean(this.activeMenu),this.dispatchVisibleChangedEvent(!1,i,e)},g=this.localeService.getLocaleTextFunc(),f=n&&i!=="columnFilter"?g("ariaLabelColumnMenu","Column Menu"):g("ariaLabelColumnFilter","Column Filter"),y=this.popupService.addPopup({modal:!0,eChild:o,closeOnEsc:!0,closedCallback:p,positionCallback:()=>t(o),anchorToElement:c,ariaLabel:f});y&&(this.hidePopup=a=y.hideFunc),r.afterInit().then(()=>{t(o),r.afterGuiAttached({container:i,hidePopup:a})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==le.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventService.dispatchEvent({type:"columnMenuVisibleChanged",visible:e,switchingTab:!1,key:t,column:i??null,columnGroup:null})}isMenuEnabled(e){return e.isFilterAllowed()&&(e.getColDef().menuTabs??["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}destroy(){this.destroyBean(this.activeMenu),super.destroy()}},G3=class extends de{constructor(){super(...arguments),this.beanName="resizeObserverService"}observeResize(e,t){const s=CF(this.gos).ResizeObserver,n=s?new s(t):null;return n==null||n.observe(e),()=>n==null?void 0:n.disconnect()}},z3=class extends de{constructor(){super(...arguments),this.beanName="animationFrameService",this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}setScrollTop(e){var i;const t=this.gos.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&e===0){const s=((i=this.paginationService)==null?void 0:i.getCurrentPage())??0;s!==this.lastPage&&(this.lastPage=s,this.scrollGoingDown=!0)}this.lastScrollTop=e}postConstruct(){this.useAnimationFrame=!this.gos.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){this.useAnimationFrame===!1&&we(`AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);const s={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],s),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((i,s)=>i.index!==s.index?t*(s.index-i.index):s.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,s=this.createTasksP2,n=s.list,r=this.destroyTasks,o=new Date().getTime();let a=new Date().getTime()-o;const l=e<=0,c=this.ctrlsService.getGridBodyCtrl();for(;l||a<e;){if(!c.getScrollFeature().scrollGridIfNeeded()){let g;if(i.length)this.sortTaskList(t),g=i.pop().task;else if(n.length)this.sortTaskList(s),g=n.pop().task;else if(r.length)g=r.pop();else{this.cancelledTasks.clear();break}this.cancelledTasks.has(g)||g()}a=new Date().getTime()-o}i.length||n.length||r.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){this.useAnimationFrame&&this.executeFrame(-1)}schedule(){this.useAnimationFrame&&(this.ticking||(this.ticking=!0,this.requestFrame()))}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=CF(this.gos);t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{if(!this.isOn()){window.setTimeout(e,0);return}t||(t=!0,this.addDestroyTask(()=>{t=!1,e()}))}}},H3=class extends de{constructor(){super(...arguments),this.beanName="expansionService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.isClientSideRowModel=xi(this.gos)}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode(i=>{i.id&&t.has(i.id)&&(i.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode(({expanded:t,id:i})=>{t&&i&&e.push(i)}),e}expandAll(e){this.isClientSideRowModel&&this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i,s){e&&(i&&e.parent&&e.parent.level!==-1&&this.setRowNodeExpanded(e.parent,t,i,s),e.setExpanded(t,void 0,s))}onGroupExpandedOrCollapsed(){this.isClientSideRowModel&&this.rowModel.refreshModel({step:"map"})}},V3=class extends de{constructor(){super(...arguments),this.beanName="menuService"}wireBeans(e){this.valueService=e.valueService,this.filterMenuFactory=e.filterMenuFactory,this.ctrlsService=e.ctrlsService,this.animationFrameService=e.animationFrameService,this.filterManager=e.filterManager,this.rowRenderer=e.rowRenderer,this.columnChooserFactory=e.columnChooserFactory,this.contextMenuFactory=e.contextMenuFactory,this.enterpriseMenuFactory=e.enterpriseMenuFactory}postConstruct(){this.activeMenuFactory=this.enterpriseMenuFactory??this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}getContextMenuPosition(e,t){const i=this.getRowCtrl(e),s=this.getCellGui(i,t);if(!s)return i?{x:0,y:i.getRowYPosition()}:{x:0,y:0};const n=s.getBoundingClientRect();return{x:n.x+n.width/2,y:n.y+n.height/2}}showContextMenu(e){var r;const t=e.rowNode,i=e.column;let{anchorToElement:s,value:n}=e;t&&i&&n==null&&(n=this.valueService.getValueForDisplay(i,t)),s==null&&(s=this.getContextMenuAnchorElement(t,i)),(r=this.contextMenuFactory)==null||r.onContextMenu(e.mouseEvent??null,e.touchEvent??null,t??null,i??null,n,s)}showColumnChooser(e){var t;(t=this.columnChooserFactory)==null||t.showColumnChooser(e)}hidePopupMenu(){var e;(e=this.contextMenuFactory)==null||e.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var e;(e=this.columnChooserFactory)==null||e.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(i??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){var t;return!e.getColDef().suppressHeaderFilterButton&&!!((t=this.filterManager)!=null&&t.isFilterAllowed(e))}isHeaderContextMenuEnabled(e){const t=e&&Zc(e)?e.getColDef():e==null?void 0:e.getColGroupDef();return!(t!=null&&t.suppressHeaderContextMenu)&&this.getColumnMenuType()==="new"}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(eu()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){var t;return!!((t=this.filterManager)!=null&&t.isFilterAllowed(e))&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return this.getColumnMenuType()==="new"}isLegacyMenuEnabled(){return this.getColumnMenuType()==="legacy"}isFloatingFilterButtonEnabled(e){var s;const t=e.getColDef(),i=(s=t.floatingFilterComponentParams)==null?void 0:s.suppressFilterButton;return i!=null&&we("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),t.suppressFloatingFilterButton==null?!i:!t.suppressFloatingFilterButton}getColumnMenuType(){return this.gos.get("columnMenu")}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gos.get("suppressMenuHide");return this.isLegacyMenuEnabled()?this.gos.exists("suppressMenuHide")?e:!1:e}showColumnMenuCommon(e,t,i,s){const{positionBy:n}=t,r=t.column;if(n==="button"){const{buttonElement:o}=t;e.showMenuAfterButtonClick(r,o,i,s)}else if(n==="mouse"){const{mouseEvent:o}=t;e.showMenuAfterMouseEvent(r,o,i,s)}else r&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(r,"auto"),this.animationFrameService.requestAnimationFrame(()=>{var a;const o=(a=this.ctrlsService.getHeaderRowContainerCtrl(r.getPinned()))==null?void 0:a.getHeaderCtrlForColumn(r);o&&e.showMenuAfterButtonClick(r,o.getAnchorElementForMenu(s),i,!0)}))}getRowCtrl(e){const{rowIndex:t,rowPinned:i}=e||{};if(t!=null)return this.rowRenderer.getRowByPosition({rowIndex:t,rowPinned:i})||void 0}getCellGui(e,t){if(!e||!t)return;const i=e.getCellCtrl(t);return(i==null?void 0:i.getGui())||void 0}getContextMenuAnchorElement(e,t){const i=this.ctrlsService.getGridBodyCtrl().getGridBodyElement(),s=this.getRowCtrl(e);if(!s)return i;const n=this.getCellGui(s,t);return n||(s.isFullWidth()?s.getFullWidthElement():i)}},W3=class extends oh{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}},j3={selector:"AG-INPUT-TEXT-AREA",component:W3},U3=class extends Sp{constructor(){super(`<div class="ag-large-text">
        <ag-input-text-area data-ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>
        </div>`,[j3]),this.eTextArea=st}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),Ae(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===le.LEFT||t===le.UP||t===le.RIGHT||t===le.DOWN||e.shiftKey&&t===le.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return!Ae(e)&&!Ae(this.params.value)?this.params.value:this.params.parseValue(e)}},K3=class extends Sp{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){vh(this.gos,this.getGui(),"popupEditorWrapper",!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params,i=s=>{eM(this.gos,s,t.node,t.column,!0)||t.onKeyDown(s)};this.addManagedElementListeners(e,{keydown:i})}},Y3=class extends Sp{constructor(){super(`<div class="ag-cell-edit-wrapper">
                <ag-select class="ag-cell-editor" data-ref="eSelect"></ag-select>
            </div>`,[SU]),this.eSelect=st,this.startedByEnter=!1}wireBeans(e){this.valueService=e.valueService}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueService:i,gos:s}=this,{values:n,value:r,eventKey:o}=e;if(Pt(n)){we("no values found for select cellEditor");return}this.startedByEnter=o!=null?o===le.ENTER:!1;let a=!1;n.forEach(g=>{const f={value:g},y=i.formatValue(e.column,null,g),C=y!=null;f.text=C?y:g,t.addOption(f),a=a||r===g}),a?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:l,valueListMaxWidth:c,valueListMaxHeight:p}=e;l!=null&&t.setPickerGap(l),p!=null&&t.setPickerMaxHeight(p),c!=null&&t.setPickerMaxWidth(c),s.get("editType")!=="fullRow"&&this.addManagedListeners(this.eSelect,{selectedItem:()=>e.stopEditing()})}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}},OC=class extends Sp{constructor(e){super(`
            <div class="ag-cell-edit-wrapper">
                ${e.getTemplate()}
            </div>`,e.getAgComponents()),this.cellEditorInput=e,this.eInput=st}init(e){this.params=e;const{cellStartedEdit:t,eventKey:i,suppressPreventDefault:s}=e,n=this.eInput;this.cellEditorInput.init(n,e);let r,o=!0;t?(this.focusAfterAttached=!0,i===le.BACKSPACE||i===le.DELETE?r="":i&&i.length===1?s?o=!1:r=i:(r=this.cellEditorInput.getStartValue(),i!==le.F2&&(this.highlightAllOnFocus=!0))):(this.focusAfterAttached=!1,r=this.cellEditorInput.getStartValue()),o&&r!=null&&n.setStartValue(r),this.addManagedElementListeners(n.getGui(),{keydown:a=>{const{key:l}=a;(l===le.PAGE_UP||l===le.PAGE_DOWN)&&a.preventDefault()}})}afterGuiAttached(){var s,n;const e=this.localeService.getLocaleTextFunc(),t=this.eInput;if(t.setInputAriaLabel(e("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;ua()||t.getFocusableElement().focus();const i=t.getInputElement();this.highlightAllOnFocus?i.select():(n=(s=this.cellEditorInput).setCaret)==null||n.call(s)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}},$3=class{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" data-ref="eInput"></ag-input-text-field>'}getAgComponents(){return[kC]}init(e,t){this.eInput=e,this.params=t,t.maxLength!=null&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return!Ae(e)&&!Ae(this.params.value)?this.params.value:this.params.parseValue(e)}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=Ae(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}},Wk=class extends OC{constructor(){super(new $3)}},Z3=class{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" data-ref="eInput"></ag-input-number-field>'}getAgComponents(){return[TU]}init(e,t){this.eInput=e,this.params=t,t.max!=null&&e.setMax(t.max),t.min!=null&&e.setMin(t.min),t.precision!=null&&e.setPrecision(t.precision),t.step!=null&&e.setStep(t.step);const i=e.getInputElement();t.preventStepping?e.addManagedElementListeners(i,{keydown:this.preventStepping}):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===le.UP||e.key===le.DOWN)&&e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!Ae(e)&&!Ae(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(t==null)return t;if(typeof t=="string"){if(t==="")return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}setCaret(){ua()&&this.eInput.getInputElement().focus({preventScroll:!0})}},X3=class extends OC{constructor(){super(new Z3)}},Q3=class extends Lh{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct();const e=ua();this.addManagedListeners(this.eInput,{wheel:this.onWheel.bind(this),mousedown:()=>{this.isDisabled()||e||this.eInput.focus()}}),this.eInput.step="any"}onWheel(e){_i(this.gos)===this.eInput&&e.preventDefault()}setMin(e){const t=e instanceof Date?Kr(e??null,!1)??void 0:e;return this.min===t?this:(this.min=t,Ur(this.eInput,"min",t),this)}setMax(e){const t=e instanceof Date?Kr(e??null,!1)??void 0:e;return this.max===t?this:(this.max=t,Ur(this.eInput,"max",t),this)}setStep(e){return this.step===e?this:(this.step=e,Ur(this.eInput,"step",e),this)}getDate(){if(this.eInput.validity.valid)return Hn(this.getValue())??void 0}setDate(e,t){this.setValue(Kr(e??null,!1),t)}},jk={selector:"AG-INPUT-DATE-FIELD",component:Q3},q3=class{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[jk]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return!Ae(e)&&!Ae(this.params.value)?this.params.value:e??null}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Kr(e,!1)}},J3=class extends OC{constructor(){super(new q3)}},eK=class{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" data-ref="eInput"></ag-input-date-field>'}getAgComponents(){return[jk]}init(e,t){this.eInput=e,this.params=t,t.min!=null&&e.setMin(t.min),t.max!=null&&e.setMax(t.max),t.step!=null&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return!Ae(e)&&!Ae(this.params.value)?this.params.value:this.params.parseValue(e??"")}getStartValue(){return Kr(this.parseDate(this.params.value??void 0)??null,!1)}parseDate(e){const t=this.getDataTypeService();return t?t.getDateParserFunction(this.params.column)(e):Hn(e)??void 0}formatDate(e){const t=this.getDataTypeService();return t?t.getDateFormatterFunction(this.params.column)(e):Kr(e??null,!1)??void 0}},tK=class extends OC{wireBeans(e){this.dataTypeService=e.dataTypeService}constructor(){super(new eK(()=>this.dataTypeService))}},iK=class extends Sp{constructor(){super(`
            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">
                <ag-checkbox role="presentation" data-ref="eCheckbox"></ag-checkbox>
            </div>`,[F0]),this.eCheckbox=st}init(e){this.params=e;const t=e.value??void 0;this.eCheckbox.setValue(t),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(t),this.addManagedListeners(this.eCheckbox,{fieldValueChanged:s=>this.setAriaLabel(s.selected)})}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),i=M0(t,e),s=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${s} (${i})`)}},Yg=class{constructor(e){this.cellValueChanges=e}},qx=class extends Yg{constructor(e,t,i,s){super(e),this.initialRange=t,this.finalRange=i,this.ranges=s}},sK=10,mT=class{constructor(e){this.actionStack=[],this.maxStackSize=e||sK,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(e){e.cellValueChanges&&e.cellValueChanges.length>0&&(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(e))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}},nK=class extends de{constructor(){super(...arguments),this.beanName="undoRedoService",this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=this.activeCellEdit!==null&&this.cellPositionUtils.equals(this.activeCellEdit,t),s=this.activeRowEdit!==null&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||s||this.isPasting||this.isRangeInAction))return;const{rowPinned:r,rowIndex:o,column:a,oldValue:l,value:c}=e,p={rowPinned:r,rowIndex:o,columnId:a.getColId(),newValue:c,oldValue:l};this.cellValueChanges.push(p)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}wireBeans(e){this.focusService=e.focusService,this.ctrlsService=e.ctrlsService,this.cellPositionUtils=e.cellPositionUtils,this.rowPositionUtils=e.rowPositionUtils,this.columnModel=e.columnModel,this.rangeService=e.rangeService}postConstruct(){if(!this.gos.get("undoRedoCellEditing"))return;const e=this.gos.get("undoRedoCellEditingLimit");if(e<=0)return;this.undoStack=new mT(e),this.redoStack=new mT(e),this.addListeners();const t=this.clearStacks.bind(this);this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this),modelUpdated:i=>{i.keepUndoRedoStack||this.clearStacks()},columnPivotModeChanged:t,newColumnsLoaded:t,columnGroupOpened:t,columnRowGroupChanged:t,columnMoved:t,columnPinned:t,columnVisible:t,rowDragEnd:t}),this.ctrlsService.whenReady(this,i=>{this.gridBodyCtrl=i.gridBodyCtrl})}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:"undoStarted",source:e});const t=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:"undoEnded",source:e,operationPerformed:t})}redo(e){this.eventService.dispatchEvent({type:"redoStarted",source:e});const t=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:"redoEnded",source:e,operationPerformed:t})}undoRedo(e,t,i,s,n){if(!e)return!1;const r=e.pop();return!r||!r.cellValueChanges?!1:(this.processAction(r,o=>o[s],n),r instanceof qx?this.processRange(this.rangeService,r.ranges||[r[i]]):this.processCell(r.cellValueChanges),t.push(r),!0)}processAction(e,t,i){e.cellValueChanges.forEach(s=>{const{rowIndex:n,rowPinned:r,columnId:o}=s,a={rowIndex:n,rowPinned:r},l=this.rowPositionUtils.getRowNode(a);l.displayed&&l.setDataValue(o,t(s),i)})}processRange(e,t){let i;e.removeAllCellRanges(!0),t.forEach((s,n)=>{if(!s)return;const r=s.startRow,o=s.endRow;n===t.length-1&&(i={rowPinned:r.rowPinned,rowIndex:r.rowIndex,columnId:s.startColumn.getColId()},this.setLastFocusedCell(i));const a={rowStartIndex:r.rowIndex,rowStartPinned:r.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:s.startColumn,columns:s.columns};e.addCellRange(a)})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:s}=t,n={rowIndex:i,rowPinned:s},r=this.rowPositionUtils.getRowNode(n),o={rowPinned:t.rowPinned,rowIndex:r.rowIndex,columnId:t.columnId};this.setLastFocusedCell(o,this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:i,columnId:s,rowPinned:n}=e,r=this.gridBodyCtrl.getScrollFeature(),o=this.columnModel.getCol(s);if(!o)return;r.ensureIndexVisible(i),r.ensureColumnVisible(o);const a={rowIndex:i,column:o,rowPinned:n};this.focusService.setFocusedCell({...a,forceBrowserFocus:!0}),t==null||t.setRangeToCell(a)}addListeners(){this.addManagedEventListeners({rowEditingStarted:e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}},rowEditingStopped:()=>{const e=new Yg(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null},cellEditingStarted:e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}},cellEditingStopped:e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new Yg(this.cellValueChanges);this.pushActionsToUndoStack(i)}},pasteStart:()=>{this.isPasting=!0},pasteEnd:()=>{const e=new Yg(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1},fillStart:()=>{this.isRangeInAction=!0},fillEnd:e=>{const t=new qx(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1},keyShortcutChangedCellStart:()=>{this.isRangeInAction=!0},keyShortcutChangedCellEnd:()=>{let e;this.rangeService&&Cl(this.gos)?e=new qx(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):e=new Yg(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1}})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}};function rK(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition()}function oK(e){return e.ctrlsService.getGridBodyCtrl().getScrollFeature().getHScrollPosition()}function Uk(e,t,i="auto"){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(t,i),"ensureVisible")}function Kk(e,t,i){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureIndexVisible(t,i),"ensureVisible")}function aK(e,t,i=null){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureNodeVisible(t,i),"ensureVisible")}function lK(e){var t;(t=e.undoRedoService)==null||t.undo("api")}function cK(e){var t;(t=e.undoRedoService)==null||t.redo("api")}function uK(e,t={}){return e.rowRenderer.getCellEditorInstances(t).map(ef)}function hK(e){return e.rowRenderer.getEditingCells()}function dK(e,t=!1){e.rowRenderer.stopEditing(t)}function pK(e,t){const i=e.columnModel.getCol(t.colKey);if(!i){we(`no column found for ${t.colKey}`);return}const s={rowIndex:t.rowIndex,rowPinned:t.rowPinned||null,column:i};t.rowPinned==null&&Kk(e,t.rowIndex),Uk(e,t.colKey);const r=e.navigationService.getCellByPosition(s);if(!r)return;const{focusService:o,gos:a}=e,l=()=>{const p=_i(a),g=r.getGui();return p!==g&&!!(g!=null&&g.contains(p))},c=a.get("stopEditingWhenCellsLoseFocus")&&l();(c||!o.isCellFocused(s))&&o.setFocusedCell({...s,forceBrowserFocus:c,preventScrollOnBrowserFocus:!0}),r.startRowOrCellEdit(t.key)}function gK(e){var t;return((t=e.undoRedoService)==null?void 0:t.getCurrentUndoStackSize())??0}function fK(e){var t;return((t=e.undoRedoService)==null?void 0:t.getCurrentRedoStackSize())??0}var mK=class extends de{constructor(){super(...arguments),this.beanName="editService"}wireBeans(e){this.navigationService=e.navigationService,this.userComponentFactory=e.userComponentFactory,this.valueService=e.valueService}startEditing(e,t=null,i=!1,s=null){var c;const n=this.createCellEditorParams(e,t,i),r=e.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(r,n),a=(o==null?void 0:o.popupFromSelector)!=null?o.popupFromSelector:!!r.cellEditorPopup,l=(o==null?void 0:o.popupPositionFromSelector)!=null?o.popupPositionFromSelector:r.cellEditorPopupPosition;return e.setEditing(!0,o),e.getComp().setEditDetails(o,a,l,this.gos.get("reactiveCustomComponents")),this.eventService.dispatchEvent(e.createEvent(s,"cellEditingStarted")),!((c=o==null?void 0:o.params)!=null&&c.suppressPreventDefault)}stopEditing(e,t){const i=e.getComp(),{newValue:s,newValueExists:n}=this.takeValueFromCellEditor(t,i),r=e.getRowNode(),o=e.getColumn(),a=this.valueService.getValueForDisplay(o,r);let l=!1;return n&&(l=this.saveNewValue(e,a,s,r,o)),e.setEditing(!1,void 0),i.setEditDetails(),e.updateAndFormatValue(!1),e.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.eventService.dispatchEvent({...e.createEvent(null,"cellEditingStopped"),oldValue:a,newValue:s,valueChanged:l}),l}handleColDefChanged(e){const t=e.getCellEditor();if(t!=null&&t.refresh){const{eventKey:i,cellStartedEdit:s}=e.getEditCompDetails().params,n=this.createCellEditorParams(e,i,s),r=e.getColumn().getColDef(),o=this.userComponentFactory.getCellEditorDetails(r,n);t.refresh(o.params)}}setFocusOutOnEditor(e){const t=e.getComp().getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(e){const t=e.getComp(),i=t.getCellEditor();i!=null&&i.focusIn?i.focusIn():(e.focusCell(!0),e.onCellEditorAttached(()=>{var s,n;return(n=(s=t.getCellEditor())==null?void 0:s.focusIn)==null?void 0:n.call(s)}))}stopEditingAndFocus(e,t=!1,i=!1){e.stopRowOrCellEdit(),e.focusCell(!0),t||this.navigateAfterEdit(i,e.getCellPosition())}createPopupEditorWrapper(e){return new K3(e)}takeValueFromCellEditor(e,t){const i={newValueExists:!1};if(e)return i;const s=t.getCellEditor();return!s||s.isCancelAfterEnd&&s.isCancelAfterEnd()?i:{newValue:s.getValue(),newValueExists:!0}}saveNewValue(e,t,i,s,n){if(i===t)return!1;e.setSuppressRefreshCell(!0);const r=s.setDataValue(n,i,"edit");return e.setSuppressRefreshCell(!1),r}createCellEditorParams(e,t,i){const s=e.getColumn(),n=e.getRowNode();return this.gos.addGridCommonParams({value:this.valueService.getValueForDisplay(s,n),eventKey:t,column:s,colDef:s.getColDef(),rowIndex:e.getCellPosition().rowIndex,node:n,data:n.data,cellStartedEdit:i,onKeyDown:e.onKeyDown.bind(e),stopEditing:e.stopEditingAndFocus.bind(e),eGridCell:e.getGui(),parseValue:r=>this.valueService.parseValue(s,n,r,e.getValue()),formatValue:e.formatValue.bind(e)})}navigateAfterEdit(e,t){if(this.gos.get("enterNavigatesVerticallyAfterEdit")){const s=e?le.UP:le.DOWN;this.navigationService.navigateToNextCell(null,s,t,!1)}}},vK=class extends de{constructor(){super(...arguments),this.beanName="rowEditService"}startEditing(e,t=null,i=null,s=null){let n=!0;return e.getAllCellCtrls().reduce((o,a)=>{const l=a===i;return l?n=a.startEditing(t,l,s):a.startEditing(null,l,s),o?!0:a.isEditing()},!1)&&this.setEditing(e,!0),n}stopEditing(e,t=!1){const i=e.getAllCellCtrls(),s=e.isEditing();e.setStoppingRowEdit(!0);let n=!1;for(const r of i){const o=r.stopEditing(t);s&&!t&&!n&&o&&(n=!0)}n&&this.eventService.dispatchEvent(e.createRowEvent("rowValueChanged")),s&&this.setEditing(e,!1),e.setStoppingRowEdit(!1)}setEditing(e,t){e.setEditingRow(t),e.forEachGui(void 0,s=>s.rowComp.addOrRemoveCssClass("ag-row-editing",t));const i=t?e.createRowEvent("rowEditingStarted"):e.createRowEvent("rowEditingStopped");this.eventService.dispatchEvent(i)}},Th={version:ct,moduleName:"@ag-grid-community/edit-core",beans:[mK]},yK={version:ct,moduleName:"@ag-grid-community/edit-api",apiFunctions:{undoCellEditing:lK,redoCellEditing:cK,getCellEditorInstances:uK,getEditingCells:hK,stopEditing:dK,startEditingCell:pK,getCurrentUndoSize:gK,getCurrentRedoSize:fK},dependantModules:[Th]},CK={version:ct,moduleName:"@ag-grid-community/undo-redo-edit",beans:[nK],dependantModules:[Th]},SK={version:ct,moduleName:"@ag-grid-community/full-row-edit",beans:[vK],dependantModules:[Th]},Yk={version:ct,moduleName:"@ag-grid-community/default-editor",userComponents:[{name:"agCellEditor",classImp:Wk}],dependantModules:[Th]},wK={version:ct,moduleName:"@ag-grid-community/data-type-editors",userComponents:[{name:"agTextCellEditor",classImp:Wk},{name:"agNumberCellEditor",classImp:X3,params:{suppressPreventDefault:!0}},{name:"agDateCellEditor",classImp:J3},{name:"agDateStringCellEditor",classImp:tK},{name:"agCheckboxCellEditor",classImp:iK}],dependantModules:[Yk]},xK={version:ct,moduleName:"@ag-grid-community/select-editor",userComponents:[{name:"agSelectCellEditor",classImp:Y3}],dependantModules:[Th]},bK={version:ct,moduleName:"@ag-grid-community/large-text-editor",userComponents:[{name:"agLargeTextCellEditor",classImp:U3}],dependantModules:[Th]},MK={version:ct,moduleName:"@ag-grid-community/all-editors",dependantModules:[Yk,wK,xK,bK]},RK={version:ct,moduleName:"@ag-grid-community/editing",dependantModules:[Th,CK,SK,MK,yK]},DK=class extends de{constructor(){super(...arguments),this.beanName="autoWidthCalculator"}wireBeans(e){this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowContainerCtrl=e.center})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const s=this.rowRenderer.getAllCellsForColumn(e);return t||s.push(i),this.addElementsToContainerAndGetWidth(s)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();e.forEach(r=>this.cloneItemIntoDummy(r,t)),i.appendChild(t);const s=t.offsetWidth;i.removeChild(t);const n=this.getAutoSizePadding();return s+n}getAutoSizePadding(){return this.gos.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{const s=i.getHtmlElementForColumnHeader(e);s!=null&&(t=s)}),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const s=document.createElement("div"),n=s.classList;["ag-header-cell","ag-header-group-cell"].some(a=>i.classList.contains(a))?(n.add("ag-header","ag-header-row"),s.style.position="static"):n.add("ag-row");let o=e.parentElement;for(;o;){if(["ag-header-row","ag-row"].some(l=>o.classList.contains(l))){for(let l=0;l<o.classList.length;l++){const c=o.classList[l];c!="ag-row-position-absolute"&&n.add(c)}break}o=o.parentElement}s.appendChild(i),t.appendChild(s)}},EK=class extends de{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyTopRowCtrls=[],this.stickyBottomRowCtrls=[],this.extraTopHeight=0,this.extraBottomHeight=0}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.ctrlsService=e.ctrlsService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.isClientSide=xi(this.gos),this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl}),this.resetStickyContainers()}getStickyTopRowCtrls(){return this.stickyTopRowCtrls}getStickyBottomRowCtrls(){return this.stickyBottomRowCtrls}setOffsetTop(e){this.extraTopHeight!==e&&(this.extraTopHeight=e,this.eventService.dispatchEvent({type:"stickyTopOffsetChanged",offset:e}))}setOffsetBottom(e){this.extraBottomHeight!==e&&(this.extraBottomHeight=e)}resetOffsets(){this.setOffsetBottom(0),this.setOffsetTop(0)}getExtraTopHeight(){return this.extraTopHeight}getExtraBottomHeight(){return this.extraBottomHeight}getLastPixelOfGroup(e){return this.isClientSide?this.getClientSideLastPixelOfGroup(e):this.getServerSideLastPixelOfGroup(e)}getFirstPixelOfGroup(e){return e.footer?e.sibling.rowTop+e.sibling.rowHeight-1:e.hasChildren()?e.rowTop-1:0}getServerSideLastPixelOfGroup(e){var t,i;if(this.isClientSide)throw new Error("This func should only be called in server side row model.");if(e.isExpandable()||e.footer){if(e.master)return e.detailNode.rowTop+e.detailNode.rowHeight;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let n=(t=e.childStore)==null?void 0:t.getStoreBounds();return e.footer&&(n=(i=e.sibling.childStore)==null?void 0:i.getStoreBounds()),((n==null?void 0:n.heightPx)??0)+((n==null?void 0:n.topPx)??0)}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}getClientSideLastPixelOfGroup(e){if(!this.isClientSide)throw new Error("This func should only be called in client side row model.");if(e.isExpandable()||e.footer){if(e.footer&&e.rowIndex===0)return Number.MAX_SAFE_INTEGER;if(!e.sibling||Math.abs(e.sibling.rowIndex-e.rowIndex)===1){let s=e.footer?e.sibling:e;for(;s.isExpandable()&&s.expanded;)if(s.master)s=s.detailNode;else if(s.childrenAfterSort){if(s.childrenAfterSort.length===0)break;s=At(s.childrenAfterSort)}return s.rowTop+s.rowHeight}return e.footer?e.rowTop+e.rowHeight:e.sibling.rowTop+e.sibling.rowHeight}return Number.MAX_SAFE_INTEGER}updateStickyRows(e){const t=e==="top";let i=0;if(!this.canRowsBeSticky())return this.refreshNodesAndContainerHeight(e,new Set,i);const s=t?this.rowRenderer.getFirstVisibleVerticalPixel()-this.extraTopHeight:this.rowRenderer.getLastVisibleVerticalPixel()-this.extraTopHeight,n=new Set,r=c=>{if(n.add(c),t){const p=this.getLastPixelOfGroup(c),g=s+i+c.rowHeight;p<g?c.stickyRowTop=i+(p-g):c.stickyRowTop=i}else{const p=this.getFirstPixelOfGroup(c),g=s-(i+c.rowHeight);p>g?c.stickyRowTop=i-(p-g):c.stickyRowTop=i}i=0,n.forEach(p=>{const g=p.stickyRowTop+p.rowHeight;i<g&&(i=g)})},o=this.areFooterRowsStickySuppressed(),a=this.gos.get("suppressGroupRowsSticky"),l=c=>{if(!c.displayed)return!1;if(c.footer){if(o===!0||o==="grand"&&c.level===-1||o==="group"&&c.level>-1)return!1;const p=c.sibling.rowIndex?c.sibling.rowIndex+1===c.rowIndex:!1;return e==="bottom"&&p?!1:!n.has(c)}return c.isExpandable()?a===!0||e==="bottom"?!1:!n.has(c)&&c.expanded:!1};for(let c=0;c<100;c++){let p=s+i;t||(p=s-i);const g=this.rowModel.getRowIndexAtPixel(p),f=this.rowModel.getRow(g);if(f==null)break;const C=this.getStickyAncestors(f).find(M=>(t?M.rowIndex<g:M.rowIndex>g)&&l(M));if(C){r(C);continue}if((t?f.rowTop<p:f.rowTop+f.rowHeight>p)&&l(f)){r(f);continue}break}return t||n.forEach(c=>{c.stickyRowTop=i-(c.stickyRowTop+c.rowHeight)}),this.refreshNodesAndContainerHeight(e,n,i)}areFooterRowsStickySuppressed(){const e=this.gos.get("suppressStickyTotalRow");if(e===!0)return!0;const t=!!this.gos.get("groupIncludeFooter")||e==="group",i=!!this.gos.get("groupIncludeTotalFooter")||e==="grand";return t&&i?!0:i?"grand":t?"group":!1}canRowsBeSticky(){const e=TC(this.gos),t=this.areFooterRowsStickySuppressed(),i=this.gos.get("suppressGroupRowsSticky");return e&&(!t||!i)}getStickyAncestors(e){const t=[];let i=e.footer?e.sibling:e.parent;for(;i;)i.sibling&&t.push(i.sibling),t.push(i),i=i.parent;return t.reverse()}checkStickyRows(){const e=this.updateStickyRows("top"),t=this.updateStickyRows("bottom");return e||t}destroyStickyCtrls(){this.resetStickyContainers()}resetStickyContainers(){this.refreshNodesAndContainerHeight("top",new Set,0),this.refreshNodesAndContainerHeight("bottom",new Set,0)}refreshStickyNode(e){const t=new Set;if(this.stickyTopRowCtrls.some(i=>i.getRowNode()===e)){for(let i=0;i<this.stickyTopRowCtrls.length;i++){const s=this.stickyTopRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("top",t,this.topContainerHeight)&&this.checkStickyRows();return}for(let i=0;i<this.stickyBottomRowCtrls.length;i++){const s=this.stickyBottomRowCtrls[i].getRowNode();s!==e&&t.add(s)}this.refreshNodesAndContainerHeight("bottom",t,this.bottomContainerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t,i){const s=e==="top",n=s?this.stickyTopRowCtrls:this.stickyBottomRowCtrls,r={},o=[];for(let f=0;f<n.length;f++){const y=n[f].getRowNode();if(!t.has(y)){r[y.id]=n[f],y.sticky=!1;continue}o.push(n[f])}const a=new Set;for(let f=0;f<o.length;f++)a.add(o[f].getRowNode());const l=[];t.forEach(f=>{a.has(f)||(f.sticky=!0,l.push(this.createRowCon(f,!1,!1)))});let c=!!l.length||o.length!==n.length;s?this.topContainerHeight!==i&&(this.topContainerHeight=i,this.gridBodyCtrl.setStickyTopHeight(i),c=!0):this.bottomContainerHeight!==i&&(this.bottomContainerHeight=i,this.gridBodyCtrl.setStickyBottomHeight(i),c=!0),this.destroyRowCtrls(r,!1);const p=[...o,...l];p.sort((f,y)=>y.getRowNode().rowIndex-f.getRowNode().rowIndex),s||p.reverse(),p.forEach(f=>f.setRowTop(f.getRowNode().stickyRowTop));let g=0;return s?(t.forEach(f=>{f.rowIndex<this.pageBoundsService.getFirstRow()&&(g+=f.rowHeight)}),g>this.topContainerHeight&&(g=this.topContainerHeight),this.setOffsetTop(g)):(t.forEach(f=>{f.rowIndex>this.pageBoundsService.getLastRow()&&(g+=f.rowHeight)}),g>this.bottomContainerHeight&&(g=this.bottomContainerHeight),this.setOffsetBottom(g)),c?(s?this.stickyTopRowCtrls=p:this.stickyBottomRowCtrls=p,!0):!1}ensureRowHeightsValid(){let e=!1;const t=i=>{const s=i.getRowNode();if(s.rowHeightEstimated){const n=$c(this.gos,s);s.setRowHeight(n.height),e=!0}};return this.stickyTopRowCtrls.forEach(t),this.stickyBottomRowCtrls.forEach(t),e}},IK=class extends de{constructor(){super(...arguments),this.beanName="rowRenderer",this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(r=>r.onCellSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(r=>r.updateRangeBordersIfRangeCount())},i=()=>{this.eventService.addEventListener("cellSelectionChanged",e),this.eventService.addEventListener("columnMoved",t),this.eventService.addEventListener("columnPinned",t),this.eventService.addEventListener("columnVisible",t)},s=()=>{this.eventService.removeEventListener("cellSelectionChanged",e),this.eventService.removeEventListener("columnMoved",t),this.eventService.removeEventListener("columnPinned",t),this.eventService.removeEventListener("columnVisible",t)};this.addDestroyFunc(()=>s()),this.addManagedPropertyListeners(["enableRangeSelection","cellSelection"],()=>{Cl(this.gos)?i():s()}),Cl(this.gos)&&i()}}wireBeans(e){this.animationFrameService=e.animationFrameService,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.pinnedRowModel=e.pinnedRowModel,this.rowModel=e.rowModel,this.focusService=e.focusService,this.beans=e,this.rowContainerHeightService=e.rowContainerHeightService,this.ctrlsService=e.ctrlsService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridBodyCtrl=e.gridBodyCtrl,this.initialise()})}initialise(){this.addManagedEventListeners({paginationChanged:this.onPageLoaded.bind(this),pinnedRowDataChanged:this.onPinnedRowDataChanged.bind(this),displayedColumnsChanged:this.onDisplayedColumnsChanged.bind(this),bodyScroll:this.onBodyScroll.bind(this),bodyHeightChanged:this.redraw.bind(this,{})}),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListener("suppressCellFocus",e=>this.onSuppressCellFocusChanged(e.currentValue)),this.addManagedPropertyListeners(["groupSuppressBlankHeader","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","suppressStickyTotalRow","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection","rowSelection"],()=>this.redrawRows()),TC(this.gos)&&(xi(this.gos)||ya(this.gos))&&(this.stickyRowFeature=this.createManagedBean(new EK(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this)))),this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=Ts(this.gos,"print"),this.embedFullWidthRows=this.printLayout||this.gos.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gos.get("keepDetailRows")){const e=this.getKeepDetailRowsCount(),t=e??3;this.cachedRowCtrls=new LK(t)}}getKeepDetailRowsCount(){return this.gos.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyTopRowCtrls():[]}getStickyBottomRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyBottomRowCtrls():[]}updateAllRowCtrls(){const e=Yb(this.rowCtrlsByRowIndex),t=Yb(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];t.length>0||i.length>0?this.allRowCtrls=[...e,...t,...i]:this.allRowCtrls=e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}onSuppressCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onSuppressCellFocusChanged(e)),this.getFullWidthRowCtrls().forEach(t=>t.onSuppressCellFocusChanged(e))}registerCellEventListeners(){this.addManagedEventListeners({cellFocused:e=>{this.onCellFocusChanged(e)},cellFocusCleared:()=>this.onCellFocusChanged(),flashCells:e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))},columnHoverChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())},displayedColumnsChanged:()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())},displayedColumnsWidthChanged:()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedEventListeners({gridColumnsChanged:this.refreshListenersToColumnsForCellComps.bind(this)}),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getCols().forEach(t=>{const i=l=>{this.getAllCellCtrls().forEach(c=>{c.getColumn()===t&&l(c)})},s=()=>{i(l=>l.onLeftChanged())},n=()=>{i(l=>l.onWidthChanged())},r=()=>{i(l=>l.onFirstRightPinnedChanged())},o=()=>{i(l=>l.onLastLeftPinnedChanged())},a=()=>{i(l=>l.onColDefChanged())};t.addEventListener("leftChanged",s),t.addEventListener("widthChanged",n),t.addEventListener("firstRightPinnedChanged",r),t.addEventListener("lastLeftPinnedChanged",o),t.addEventListener("colDefChanged",a),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",s),t.removeEventListener("widthChanged",n),t.removeEventListener("firstRightPinnedChanged",r),t.removeEventListener("lastLeftPinnedChanged",o),t.removeEventListener("colDefChanged",a)})})}onDomLayoutChanged(){const e=Ts(this.gos,"print"),t=e||this.gos.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){const t={recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0};this.redrawAfterModelUpdate(t)}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach(i=>{const s=i.getCellElement(e);s&&t.push(s)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,"top"),this.refreshFloatingRows(this.bottomRowCtrls,"bottom")}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){const{pinnedRowModel:i,beans:s,printLayout:n}=this,r=Object.fromEntries(e.map(a=>[a.getRowNode().id,a]));i.forEachPinnedRow(t,(a,l)=>{const c=e[l];c&&i.getPinnedRowById(c.getRowNode().id,t)===void 0&&(c.destroyFirstPass(),c.destroySecondPass()),a.id in r?(e[l]=r[a.id],delete r[a.id]):e[l]=new ph(a,s,!1,!1,n)});const o=t==="top"?i.getPinnedTopRowCount():i.getPinnedBottomRowCount();e.length=o}onPinnedRowDataChanged(){const e={recycleRows:!0};this.redrawAfterModelUpdate(e)}redrawRow(e,t=!1){var i;if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else if((i=this.cachedRowCtrls)!=null&&i.has(e)){this.cachedRowCtrls.removeRow(e);return}else{const s=n=>{const r=n[e.rowIndex];r&&r.getRowNode()===e&&(r.destroyFirstPass(),r.destroySecondPass(),n[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":s(this.topRowCtrls);break;case"bottom":s(this.bottomRowCtrls);break;default:s(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(e!=null){e==null||e.forEach(i=>this.redrawRow(i,!0)),this.dispatchDisplayedRowsChanged(!1);return}this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e!=null&&e.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(t==null)return null;const i=_i(this.gos),s=Sf(this.gos,i,dh.DOM_DATA_KEY_CELL_CTRL),n=Sf(this.gos,i,ph.DOM_DATA_KEY_ROW_CTRL);return s||n?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,s=e.animate&&Qd(this.gos),n=i?this.getRowsToRecycle():null;if(i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature){this.stickyRowFeature.checkStickyRows();const r=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();r&&this.updateContainerHeights(r)}this.recycleRows(n,s),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),t!=null&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){var s;const t=e.newData||e.newPage,i=this.gos.get("suppressScrollOnNewData");t&&!i&&(this.gridBodyCtrl.getScrollFeature().scrollToTop(),(s=this.stickyRowFeature)==null||s.resetOffsets())}updateContainerHeights(e=0){if(this.printLayout){this.rowContainerHeightService.setModelHeight(null);return}let t=this.pageBoundsService.getCurrentPageHeight();t===0&&(t=1),this.rowContainerHeightService.setModelHeight(t+e)}getLockOnRefresh(){var e,t;if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0,(t=(e=this.frameworkOverrides).getLockOnRefresh)==null||t.call(e)}releaseLockOnRefresh(){var e,t;this.refreshInProgress=!1,(t=(e=this.frameworkOverrides).releaseLockOnRefresh)==null||t.call(e)}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&this.focusService.restoreFocusedCell(e,()=>{this.onCellFocusChanged(this.gos.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"cellFocused"}))})}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let s=0;s<i;s++){const n=t[s].getAllCellCtrls(),r=n.length;for(let o=0;o<r;o++)e.push(n[o])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyTopRowCtrls()||[],t=this.stickyRowFeature&&this.stickyRowFeature.getStickyBottomRowCtrls()||[],i=[...this.topRowCtrls,...this.bottomRowCtrls,...e,...t];for(const s in this.rowCtrlsByRowIndex)i.push(this.rowCtrlsByRowIndex[s]);return i}addRenderedRowListener(e,t,i){const s=this.rowCtrlsByRowIndex[t];s&&s.addEventListener(e,i)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};for(const i of this.getCellCtrls(e.rowNodes,e.columns))i.refreshOrDestroyCell(t);this.refreshFullWidth(e.rowNodes)}refreshFullWidth(e){if(!e)return;let t=null;this.stickyRowFeature&&oT()&&(t=this.getCellToRestoreFocusToAfterRefresh()||null);for(const i of this.getRowCtrls(e)){if(!i.isFullWidth())continue;i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0)}this.dispatchDisplayedRowsChanged(!1),t&&this.restoreFocusedCell(t)}getCellRendererInstances(e){var n;const t=this.getCellCtrls(e.rowNodes,e.columns).map(r=>r.getCellRenderer()).filter(r=>r!=null);if((n=e.columns)!=null&&n.length)return t;const i=[],s=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(r=>{if(s&&!this.isRowInMap(r.getRowNode(),s)||!r.isFullWidth())return;const o=r.getFullWidthCellRenderers();for(let a=0;a<o.length;a++){const l=o[a];l!=null&&i.push(l)}}),[...i,...t]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{const s=i.getCellEditor();s&&t.push(s)}),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){const i=t.getCellPosition();e.push(i)}}),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(i=>{const s=i.id;switch(i.rowPinned){case"top":t.top[s]=i;break;case"bottom":t.bottom[s]=i;break;default:t.normal[s]=i;break}}),t}isRowInMap(e,t){const i=e.id;switch(e.rowPinned){case"top":return t.top[i]!=null;case"bottom":return t.bottom[i]!=null;default:return t.normal[i]!=null}}getRowCtrls(e){const t=this.mapRowNodes(e),i=this.getAllRowCtrls();return!e||!t?i:i.filter(s=>{const n=s.getRowNode();return this.isRowInMap(n,t)})}getCellCtrls(e,t){let i;Ae(t)&&(i={},t.forEach(n=>{const r=this.columnModel.getCol(n);Ae(r)&&(i[r.getId()]=!0)}));const s=[];return this.getRowCtrls(e).forEach(n=>{n.getAllCellCtrls().forEach(r=>{const o=r.getColumn().getId();i&&!i[o]||s.push(r)})}),s}destroy(){this.removeAllRowComps(!0),super.destroy()}removeAllRowComps(e=!1){const t=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(t,e),this.stickyRowFeature&&this.stickyRowFeature.destroyStickyCtrls()}getRowsToRecycle(){const e=[];bo(this.rowCtrlsByRowIndex,(i,s)=>{s.getRowNode().id==null&&e.push(i)}),this.removeRowCtrls(e);const t={};return bo(this.rowCtrlsByRowIndex,(i,s)=>{const n=s.getRowNode();t[n.id]=s}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(i=>{const s=this.rowCtrlsByRowIndex[i];s&&(s.destroyFirstPass(t),s.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]})}onBodyScroll(e){e.direction==="vertical"&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let i;this.stickyRowFeature&&oT()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const s=this.firstRenderedRow,n=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let r=!1;if(this.stickyRowFeature){r=this.stickyRowFeature.checkStickyRows();const a=this.stickyRowFeature.getExtraTopHeight()+this.stickyRowFeature.getExtraBottomHeight();a&&this.updateContainerHeights(a)}const o=this.firstRenderedRow!==s||this.lastRenderedRow!==n;if(!(t&&!r&&!o)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!r),i!=null)){const a=this.getCellToRestoreFocusToAfterRefresh();i!=null&&a==null&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach(r=>i[r]=!0);const n=Object.keys(this.rowCtrlsByRowIndex).filter(r=>!i[r]);this.removeRowCtrls(n,t)}calculateIndexesToDraw(e){const t=FU(this.firstRenderedRow,this.lastRenderedRow),i=(n,r)=>{const o=r.getRowNode().rowIndex;o!=null&&(o<this.firstRenderedRow||o>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(r)&&t.push(o)};bo(this.rowCtrlsByRowIndex,i),bo(e,i),t.sort((n,r)=>n-r);const s=[];for(let n=0;n<t.length;n++){const r=t[n],o=this.rowModel.getRow(r);o&&!o.sticky&&s.push(r)}return s}recycleRows(e,t=!1,i=!1){const s=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(s,!t),s.forEach(n=>{this.createOrUpdateRowCtrl(n,e,t,i)}),e&&(i&&!this.gos.get("suppressAnimationFrame")&&!this.printLayout?this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}):this.destroyRowCtrls(e,t)),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventService.dispatchEvent({type:"displayedRowsChanged",afterScroll:e})}onDisplayedColumnsChanged(){const e=this.visibleColsService.isPinningLeft(),t=this.visibleColsService.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const i=t.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const s=i.getRowNode();return!(t!=null&&!this.isRowInMap(s,t))})}createOrUpdateRowCtrl(e,t,i,s){let n,r=this.rowCtrlsByRowIndex[e];if(r||(n=this.rowModel.getRow(e),Ae(n)&&Ae(t)&&t[n.id]&&n.alreadyRendered&&(r=t[n.id],t[n.id]=null)),!r)if(n||(n=this.rowModel.getRow(e)),Ae(n))r=this.createRowCon(n,i,s);else return;return n&&(n.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=r,r}destroyRowCtrls(e,t){const i=[];bo(e,(s,n)=>{if(n){if(this.cachedRowCtrls&&n.isCacheable()){this.cachedRowCtrls.addRow(n);return}if(n.destroyFirstPass(!t),t){const r=n.instanceId;this.zombieRowCtrls[r]=n,i.push(()=>{n.destroySecondPass(),delete this.zombieRowCtrls[r]})}else n.destroySecondPass()}}),t&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),qV(i))}getRowBuffer(){return this.gos.get("rowBuffer")}getRowBufferInPixels(){const e=this.getRowBuffer(),t=uh(this.gos);return e*t}workOutFirstAndLastRowsToRender(){this.rowContainerHeightService.updateOffset();let e,t;if(!this.rowModel.isRowsToRender())e=0,t=-1;else if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.pageBoundsService.getFirstRow(),t=this.pageBoundsService.getLastRow();else{const a=this.getRowBufferInPixels(),l=this.ctrlsService.getGridBodyCtrl(),c=this.gos.get("suppressRowVirtualisation");let p=!1,g,f;do{const b=this.pageBoundsService.getPixelOffset(),{pageFirstPixel:R,pageLastPixel:I}=this.pageBoundsService.getCurrentPagePixelRange(),P=this.rowContainerHeightService.getDivStretchOffset(),k=l.getScrollFeature().getVScrollPosition(),_=k.top,B=k.bottom;c?(g=R+P,f=I+P):(g=Math.max(_+b-a,R)+P,f=Math.min(B+b+a,I)+P),this.firstVisibleVPixel=Math.max(_+b,R)+P,this.lastVisibleVPixel=Math.min(B+b,I)+P,p=this.ensureAllRowsInRangeHaveHeightsCalculated(g,f)}while(p);let y=this.rowModel.getRowIndexAtPixel(g),C=this.rowModel.getRowIndexAtPixel(f);const x=this.pageBoundsService.getFirstRow(),M=this.pageBoundsService.getLastRow();y<x&&(y=x),C>M&&(C=M),e=y,t=C}const i=Ts(this.gos,"normal"),s=this.gos.get("suppressMaxRenderedRowRestriction"),n=Math.max(this.getRowBuffer(),500);i&&!s&&t-e>n&&(t=e+n);const r=e!==this.firstRenderedRow,o=t!==this.lastRenderedRow;(r||o)&&(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:"viewportChanged",firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){this.dataFirstRenderedFired||(this.dataFirstRenderedFired=!0,window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent({type:"firstDataRendered",firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow})}))}ensureAllRowsInRangeHaveHeightsCalculated(e,t){var r,o;const i=(r=this.pinnedRowModel)==null?void 0:r.ensureRowHeightsValid(),s=(o=this.stickyRowFeature)==null?void 0:o.ensureRowHeightsValid(),n=this.rowModel.ensureRowHeightsValid(e,t,this.pageBoundsService.getFirstRow(),this.pageBoundsService.getLastRow());return(n||s)&&this.eventService.dispatchEvent({type:"recalculateRowBounds"}),s||n||i?(this.updateContainerHeights(),!0):!1}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getLastVisibleVerticalPixel(){return this.lastVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const s=e.getRowNode(),n=this.focusService.isRowNodeFocused(s),r=e.isEditing(),o=s.detail;return n||r||o?!!this.isRowPresent(s):!1}isRowPresent(e){return this.rowModel.isRowPresent(e)?this.paginationService?this.paginationService.isRowPresent(e):!0:!1}createRowCon(e,t,i){const s=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(s)return s;const n=this.gos.get("suppressAnimationFrame"),r=i&&!n&&!this.printLayout;return new ph(e,this.beans,t,r,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.values(e).map(t=>t.getRowNode())}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null,t||(t=this.getStickyBottomRowCtrls().find(s=>s.getRowNode().rowIndex===i)||null));break}return t}isRangeInRenderedViewport(e,t){if(e==null||t==null)return!1;const s=e>this.lastRenderedRow;return!(t<this.firstRenderedRow)&&!s}},LK=class{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(e==null||e.id==null)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return this.entriesMap[e.id]!=null}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],Sn(this.entriesList,i)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],Sn(this.entriesList,e)}getEntries(){return this.entriesList}},TK=class extends de{constructor(){super(...arguments),this.beanName="pinnedRowModel",this.nextId=0,this.pinnedTopRows=new vT,this.pinnedBottomRows=new vT}wireBeans(e){this.beans=e}postConstruct(){this.setPinnedRowData(this.gos.get("pinnedTopRowData"),"top"),this.setPinnedRowData(this.gos.get("pinnedBottomRowData"),"bottom"),this.addManagedPropertyListener("pinnedTopRowData",e=>this.setPinnedRowData(e.currentValue,"top")),this.addManagedPropertyListener("pinnedBottomRowData",e=>this.setPinnedRowData(e.currentValue,"bottom")),this.addManagedEventListeners({gridStylesChanged:this.onGridStylesChanges.bind(this)})}isEmpty(e){return(e==="top"?this.pinnedTopRows:this.pinnedBottomRows).isEmpty()}isRowsToRender(e){return!this.isEmpty(e)}onGridStylesChanges(e){if(e.rowHeightChanged){const t=i=>{i.setRowHeight(i.rowHeight,!0)};this.pinnedBottomRows.forEach(t),this.pinnedTopRows.forEach(t)}}ensureRowHeightsValid(){var s,n;let e=!1,t=0;const i=r=>{if(r.rowHeightEstimated){const o=$c(this.gos,r);r.setRowTop(t),r.setRowHeight(o.height),t+=o.height,e=!0}};return(s=this.pinnedBottomRows)==null||s.forEach(i),t=0,(n=this.pinnedTopRows)==null||n.forEach(i),this.eventService.dispatchEvent({type:"pinnedHeightChanged"}),e}setPinnedRowData(e,t){this.updateNodesFromRowData(e,t),this.eventService.dispatchEvent({type:"pinnedRowDataChanged"})}updateNodesFromRowData(e,t){const i=t==="top"?this.pinnedTopRows:this.pinnedBottomRows;if(e===void 0){i.clear();return}const s=vp(this.gos),n=t==="top"?gl.ID_PREFIX_TOP_PINNED:gl.ID_PREFIX_BOTTOM_PINNED,r=i.getIds(),o=[],a=new Set;let l=0,c=-1;for(const p of e){const g=(s==null?void 0:s({data:p,level:0,rowPinned:t}))??n+this.nextId++;if(a.has(g)){we("Duplicate ID",g,"found for pinned row with data",p,"When `getRowId` is defined, it must return unique IDs for all pinned rows. Use the `rowPinned` parameter.");continue}c++,a.add(g),o.push(g);const f=i.getById(g);if(f!==void 0)f.data!==p&&f.setData(p),l+=this.setRowTopAndRowIndex(f,l,c),r.delete(g);else{const y=new gl(this.beans);y.id=g,y.data=p,y.rowPinned=t,l+=this.setRowTopAndRowIndex(y,l,c),i.push(y)}}r.forEach(p=>{var g;(g=i.getById(p))==null||g.clearRowTopAndRowIndex()}),i.removeAllById(r),i.setOrder(o)}setRowTopAndRowIndex(e,t,i){return e.setRowTop(t),e.setRowHeight($c(this.gos,e).height),e.setRowIndex(i),e.rowHeight}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getPinnedTopRowCount(){return this.pinnedTopRows.getSize()}getPinnedBottomRowCount(){return this.pinnedBottomRows.getSize()}getPinnedTopRow(e){return this.pinnedTopRows.getByIndex(e)}getPinnedBottomRow(e){return this.pinnedBottomRows.getByIndex(e)}getPinnedRowById(e,t){return t==="top"?this.pinnedTopRows.getById(e):this.pinnedBottomRows.getById(e)}forEachPinnedRow(e,t){return e==="top"?this.pinnedTopRows.forEach(t):this.pinnedBottomRows.forEach(t)}getTotalHeight(e){const t=e.getSize();if(t===0)return 0;const i=e.getByIndex(t-1);return i===void 0?0:i.rowTop+i.rowHeight}},vT=class{constructor(){this.cache={},this.ordering=[]}getById(e){return this.cache[e]}getByIndex(e){const t=this.ordering[e];return this.cache[t]}push(e){this.cache[e.id]=e,this.ordering.push(e.id)}removeAllById(e){for(const t of e)delete this.cache[t];this.ordering=this.ordering.filter(t=>!e.has(t))}setOrder(e){this.ordering=e}forEach(e){this.ordering.forEach((t,i)=>{const s=this.cache[t];s&&e(s,i)})}clear(){this.ordering.length=0,this.cache={}}isEmpty(){return this.ordering.length===0}getSize(){return this.ordering.length}getIds(){return new Set(this.ordering)}},AK=class extends de{constructor(e){super(),this.state="needsLoading",this.version=0,this.id=e}getId(){return this.id}load(){this.state="loading",this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state="needsLoading"}getState(){return this.state}pageLoadFailed(e){this.isRequestMostRecentAndLive(e)&&(this.state="failed",this.processServerFail()),this.dispatchLoadCompleted(!1)}success(e,t){this.successCommon(e,t)}pageLoaded(e,t,i){this.successCommon(e,{rowData:t,rowCount:i})}isRequestMostRecentAndLive(e){const t=e===this.version,i=this.isAlive();return t&&i}successCommon(e,t){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(e)&&(this.state="loaded",this.processServerResult(t))}dispatchLoadCompleted(e=!0){const t={type:"loadComplete",success:e,block:this};this.dispatchLocalEvent(t)}},PK=class extends de{constructor(){super(...arguments),this.beanName="rowNodeBlockLoader",this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gos.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=Cn(this.performCheckBlocksToLoad.bind(this),e))}getMaxConcurrentDatasourceRequests(){const e=this.gos.get("maxConcurrentDatasourceRequests");if(e==null)return 2;if(!(e<=0))return e}addBlock(e){this.blocks.push(e),e.addEventListener("loadComplete",this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){Sn(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchLocalEvent({type:"blockLoaded"}),this.activeBlockLoadsCount==0&&this.dispatchLocalEvent({type:"blockLoaderFinished"})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),this.maxConcurrentRequests!=null&&this.activeBlockLoadsCount>=this.maxConcurrentRequests){this.gos.get("debug")&&Do("RowNodeBlockLoader - checkBlockToLoad: max loads exceeded");return}const e=this.getAvailableLoadingCount(),t=this.blocks.filter(i=>i.getState()==="needsLoading").slice(0,e);this.registerLoads(t.length),t.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(ya(this.gos))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(t=>{const{id:i,state:s}=t.getBlockStateJson();e[i]=s}),e}printCacheStatus(){this.gos.get("debug")&&Do(`RowNodeBlockLoader - printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return this.maxConcurrentRequests!==void 0?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}},FK={version:ct,moduleName:"@ag-grid-community/row-node-block",beans:[PK]},kK=class{constructor(){this.root=null,this.end=null,this.cachedRange=[]}init(e){this.rowModel=e}reset(){this.root=null,this.end=null,this.cachedRange.length=0}setRoot(e){this.root=e,this.end=null,this.cachedRange.length=0}setEndRange(e){this.end=e,this.cachedRange.length=0}getRange(){if(this.cachedRange.length===0){const e=this.getRoot(),t=this.getEnd();if(e==null||t==null)return this.cachedRange;this.cachedRange=this.rowModel.getNodesInRangeForSelection(e,t)}return this.cachedRange}isInRange(e){return this.root===null?!1:this.getRange().some(t=>t.id===e.id)}getRoot(){var e;return this.root&&((e=this.root)==null?void 0:e.key)===null&&(this.root=this.rowModel.getRowNode(this.root.id)??null),this.root}getEnd(){var e;return this.end&&((e=this.end)==null?void 0:e.key)===null&&(this.end=this.rowModel.getRowNode(this.end.id)??null),this.end}truncate(e){const t=this.getRange();if(t.length===0)return{keep:[],discard:[]};const i=t[0].id===this.root.id,s=t.findIndex(n=>n.id===e.id);if(s>-1){const n=t.slice(0,s),r=t.slice(s+1);return this.setEndRange(e),i?{keep:n,discard:r}:{keep:r,discard:n}}else return{keep:t,discard:[]}}extend(e,t=!1){const i=this.getRoot();if(i==null){const n=this.getRange().slice();return t&&e.depthFirstSearch(r=>!r.group&&n.push(r)),n.push(e),this.setRoot(e),{keep:n,discard:[]}}if(this.rowModel.getNodesInRangeForSelection(i,e).find(n=>{var r;return n.id===((r=this.end)==null?void 0:r.id)}))return this.setEndRange(e),{keep:this.getRange(),discard:[]};{const n=this.getRange().slice();return this.setEndRange(e),{keep:this.getRange(),discard:n}}}},NK=class extends de{constructor(){super(...arguments),this.beanName="stylingService"}wireBeans(e){this.expressionService=e.expressionService}processAllCellClasses(e,t,i,s){this.processClassRules(void 0,e.cellClassRules,t,i,s),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,s,n){if(t==null&&e==null)return;const r={},o={},a=(l,c)=>{l.split(" ").forEach(p=>{p.trim()!=""&&c(p)})};if(t){const l=Object.keys(t);for(let c=0;c<l.length;c++){const p=l[c],g=t[p];let f;typeof g=="string"?f=this.expressionService.evaluate(g,i):typeof g=="function"&&(f=g(i)),a(p,y=>{f?r[y]=!0:o[y]=!0})}}e&&n&&Object.keys(e).forEach(l=>a(l,c=>{r[c]||(o[c]=!0)})),n&&Object.keys(o).forEach(n),Object.keys(r).forEach(s)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let s;return typeof i=="function"?s=i(t):s=i,typeof s=="string"&&(s=[s]),s||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(n=>{i(n)})}},my=(e=>(e.TAB_GUARD="ag-tab-guard",e.TAB_GUARD_TOP="ag-tab-guard-top",e.TAB_GUARD_BOTTOM="ag-tab-guard-bottom",e))(my||{}),$k=class extends de{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1,this.allowFocus=!1;const{comp:t,eTopGuard:i,eBottomGuard:s,focusTrapActive:n,forceFocusOutWhenTabGuardsAreEmpty:r,isFocusableContainer:o,focusInnerElement:a,onFocusIn:l,onFocusOut:c,shouldStopEventPropagation:p,onTabKeyDown:g,handleKeyDown:f,eFocusableElement:y}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=s,this.providedFocusInnerElement=a,this.eFocusableElement=y,this.focusTrapActive=!!n,this.forceFocusOutWhenTabGuardsAreEmpty=!!r,this.isFocusableContainer=!!o,this.providedFocusIn=l,this.providedFocusOut=c,this.providedShouldStopEventPropagation=p,this.providedOnTabKeyDown=g,this.providedHandleKeyDown=f}wireBeans(e){this.focusService=e.focusService}postConstruct(){this.createManagedBean(new Ih(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedElementListeners(e,{focus:this.onFocus.bind(this)}))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return this.providedShouldStopEventPropagation?this.providedShouldStopEventPropagation():!1}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gos.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.isFocusableContainer&&!this.eFocusableElement.contains(e.relatedTarget)&&!this.allowFocus){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.skipTabGuardFocus){this.skipTabGuardFocus=!1;return}if(this.forceFocusOutWhenTabGuardsAreEmpty&&this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length===0){this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);return}if(this.isFocusableContainer&&this.eFocusableElement.contains(e.relatedTarget))return;const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){var l;const t=Wi(this.gos),i=this.focusService.findFocusableElements(t.body,null,!0),s=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(s===-1)return;let n,r;e?(n=0,r=s):(n=s+1,r=i.length);const o=i.slice(n,r),a=this.gos.get("tabIndex");o.sort((c,p)=>{const g=parseInt(c.getAttribute("tabindex")||"0"),f=parseInt(p.getAttribute("tabindex")||"0");return f===a?1:g===a?-1:g===0?1:f===0?-1:g-f}),(l=o[e?o.length-1:0])==null||l.focus()}onFocusIn(e){this.focusTrapActive||this.forcingFocusOut||(this.providedFocusIn&&this.providedFocusIn(e),this.isFocusableContainer||this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown){this.providedOnTabKeyDown(e);return}if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e,t){return e===this.eTopGuard&&!t||e===this.eBottomGuard&&(t??!0)}setAllowFocus(e){this.allowFocus=e}},OK=class extends de{constructor(e){super(),this.comp=e}initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.comp.getFocusableElement();const{eTopGuard:t,eBottomGuard:i,eFocusableElement:s}=this,n=[t,i],r={setTabIndex:x=>{n.forEach(M=>x!=null?M.setAttribute("tabindex",x):M.removeAttribute("tabindex"))}};this.addTabGuards(t,i);const{focusTrapActive:o=!1,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:p,onTabKeyDown:g,shouldStopEventPropagation:f,forceFocusOutWhenTabGuardsAreEmpty:y,isFocusableContainer:C}=e;this.tabGuardCtrl=this.createManagedBean(new $k({comp:r,focusTrapActive:o,eTopGuard:t,eBottomGuard:i,eFocusableElement:s,onFocusIn:a,onFocusOut:l,focusInnerElement:c,handleKeyDown:p,onTabKeyDown:g,shouldStopEventPropagation:f,forceFocusOutWhenTabGuardsAreEmpty:y,isFocusableContainer:C}))}getTabGuardCtrl(){return this.tabGuardCtrl}createTabGuard(e){const t=Wi(this.gos).createElement("div"),i=e==="top"?"ag-tab-guard-top":"ag-tab-guard-bottom";return t.classList.add("ag-tab-guard",i),Fo(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];pr(this.comp.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t,i){T0(t)||(t=t.getGui());const{eBottomGuard:s}=this;s?s.insertAdjacentElement("beforebegin",t):e(t,i)}},_K=class extends di{initialiseTabGuard(t){this.tabGuardFeature=this.createManagedBean(new OK(this)),this.tabGuardFeature.initialiseTabGuard(t)}forceFocusOutOfContainer(t=!1){this.tabGuardFeature.forceFocusOutOfContainer(t)}appendChild(t,i){this.tabGuardFeature.appendChild(super.appendChild.bind(this),t,i)}},BK=0,GK=200,zK=class extends de{constructor(){super(...arguments),this.beanName="popupService",this.popupList=[]}wireBeans(e){this.ctrlsService=e.ctrlsService,this.resizeObserverService=e.resizeObserverService,this.environment=e.environment}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.gridCtrl=e.gridCtrl}),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)})}getPopupParent(){const e=this.gos.get("popupParent");return e||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i}=e,s=this.getPopupIndex(i);if(s!==-1){const y=this.popupList[s];y.alignedToElement=t}const n=t.getBoundingClientRect(),r=this.getParentRect(),o=this.keepXYWithinBounds(i,n.top-r.top,0),a=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${a}px`;const c=r.right-r.left-a;let p;this.gos.get("enableRtl")?(p=f(),p<0&&(p=g(),this.setAlignedStyles(i,"left")),p>c&&(p=0,this.setAlignedStyles(i,"right"))):(p=g(),p>c&&(p=f(),this.setAlignedStyles(i,"right")),p<0&&(p=0,this.setAlignedStyles(i,"left"))),i.style.left=`${p}px`,i.style.top=`${o}px`;function g(){return n.right-r.left-2}function f(){return n.left-r.left-a}}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:s,skipObserver:n}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:!0,skipObserver:n,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,eventSource:r,alignSide:o="left",position:a="over",column:l,rowNode:c,type:p}=e,g=r.getBoundingClientRect(),f=this.getParentRect(),y=this.getPopupIndex(t);if(y!==-1){const x=this.popupList[y];x.alignedToElement=r}const C=()=>{let x=g.left-f.left;o==="right"&&(x-=t.offsetWidth-g.width);let M;return a==="over"?(M=g.top-f.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),this.shouldRenderUnderOrAbove(t,g,f,e.nudgeY||0)==="under"?M=g.top-f.top+g.height:M=g.top-t.offsetHeight-(s||0)*2-f.top),{x,y:M}};this.positionPopup({ePopup:t,nudgeX:i,nudgeY:s,keepWithinBounds:n,updatePosition:C,postProcessCallback:()=>this.callPostProcessPopup(p,t,r,null,l,c)})}shouldRenderUnderOrAbove(e,t,i,s){const n=i.bottom-t.bottom,r=t.top-i.top,o=e.offsetHeight+s;return n>o?"under":r>o||r>n?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const s=this.popupList[i],{alignedToElement:n}=s;!n||(["right","left","over","above","under"].forEach(o=>{n.classList.remove(`ag-has-popup-positioned-${o}`),e.classList.remove(`ag-popup-positioned-${o}`)}),!t)||(n.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,i,s,n,r){const o=this.gos.getCallback("postProcessPopup");o&&o({column:n,rowNode:r,ePopup:t,type:e,eventSource:i,mouseEvent:s})}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:s,nudgeY:n,skipObserver:r,updatePosition:o}=e,a={width:0,height:0},l=(c=!1)=>{let{x:p,y:g}=o();c&&t.clientWidth===a.width&&t.clientHeight===a.height||(a.width=t.clientWidth,a.height=t.clientHeight,s&&(p+=s),n&&(g+=n),i&&(p=this.keepXYWithinBounds(t,p,1),g=this.keepXYWithinBounds(t,g,0)),t.style.left=`${p}px`,t.style.top=`${g}px`,e.postProcessCallback&&e.postProcessCallback())};if(l(),!r){const c=this.resizeObserverService.observeResize(t,()=>l(!0));setTimeout(()=>c(),GK)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=Wi(this.gos);let t=this.getPopupParent();return t===e.body?t=e.documentElement:getComputedStyle(t).position==="static"&&(t=t.offsetParent),$F(t)}keepXYWithinBounds(e,t,i){const s=i===0,n=s?"clientHeight":"clientWidth",r=s?"top":"left",o=s?"height":"width",a=s?"scrollTop":"scrollLeft",l=Wi(this.gos),c=l.documentElement,p=this.getPopupParent(),g=e.getBoundingClientRect(),f=p.getBoundingClientRect(),y=l.documentElement.getBoundingClientRect(),C=p===l.body,x=Math.ceil(g[o]);let b=C?(s?YF:Uy)(c)+c[a]:p[n];C&&(b-=Math.abs(y[r]-f[r]));const R=b-x;return Math.min(Math.max(t,0),Math.abs(R))}addPopup(e){const t=Wi(this.gos),{eChild:i,ariaLabel:s,alwaysOnTop:n,positionCallback:r,anchorToElement:o}=e;if(!t)return we("could not find the document, document is empty"),{hideFunc:()=>{}};const a=this.getPopupIndex(i);if(a!==-1)return{hideFunc:this.popupList[a].hideFunc};this.initialisePopupPosition(i);const l=this.createPopupWrapper(i,s,!!n),c=this.addEventListenersToPopup({...e,wrapperEl:l});return r&&r(),this.addPopupToPopupList(i,l,c,o),{hideFunc:c}}initialisePopupPosition(e){const i=this.getPopupParent().getBoundingClientRect();Ae(e.style.top)||(e.style.top=`${i.top*-1}px`),Ae(e.style.left)||(e.style.left=`${i.left*-1}px`)}createPopupWrapper(e,t,i){const s=this.getPopupParent(),n=document.createElement("div");return this.environment.applyThemeClasses(n),n.classList.add("ag-popup"),e.classList.add(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||Fo(e,"dialog"),cp(e,t),n.appendChild(e),s.appendChild(n),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),n}handleThemeChange(e){if(e.themeChanged)for(const t of this.popupList)this.environment.applyThemeClasses(t.wrapper)}addEventListenersToPopup(e){const t=Wi(this.gos),i=this.getPopupParent(),{wrapperEl:s,eChild:n,closedCallback:r,afterGuiAttached:o,closeOnEsc:a,modal:l}=e;let c=!1;const p=C=>{if(!s.contains(_i(this.gos)))return;C.key===le.ESCAPE&&!pl(C)&&y({keyboardEvent:C})},g=C=>y({mouseEvent:C}),f=C=>y({touchEvent:C}),y=(C={})=>{const{mouseEvent:x,touchEvent:M,keyboardEvent:b,forceHide:R}=C;!R&&(this.isEventFromCurrentPopup({mouseEvent:x,touchEvent:M},n)||c)||(c=!0,i.removeChild(s),t.removeEventListener("keydown",p),t.removeEventListener("mousedown",g),t.removeEventListener("touchstart",f),t.removeEventListener("contextmenu",g),this.eventService.removeEventListener("dragStarted",g),r&&r(x||M||b),this.removePopupFromPopupList(n))};return o&&o({hidePopup:y}),window.setTimeout(()=>{a&&t.addEventListener("keydown",p),l&&(t.addEventListener("mousedown",g),this.eventService.addEventListener("dragStarted",g),t.addEventListener("touchstart",f),t.addEventListener("contextmenu",g))},0),y}addPopupToPopupList(e,t,i,s){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:BK++,isAnchored:!!s}),s&&this.setPopupPositionRelatedToElement(e,s)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(i===-1)return;const s=this.popupList[i];if(s.stopAnchoringPromise&&s.stopAnchoringPromise.then(r=>r&&r()),s.stopAnchoringPromise=void 0,s.isAnchored=!1,!t)return;const n=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:s.hideFunc});return s.stopAnchoringPromise=n,s.isAnchored=!0,n}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:s,ePopup:n}=e,r=s.getBoundingClientRect(),o=g=>parseInt(g.substring(0,g.length-1),10),a=(g,f)=>{const y=i[g]-r[g],C=o(n.style[g]);return{initialDiff:y,lastDiff:y,initial:C,last:C,direction:f}},l=a("top",0),c=a("left",1),p=this.getFrameworkOverrides();return new Vi(g=>{p.wrapIncoming(()=>{p.setInterval(()=>{const f=t.getBoundingClientRect(),y=s.getBoundingClientRect();if(y.top==0&&y.left==0&&y.height==0&&y.width==0){e.hidePopup();return}const x=(M,b)=>{const R=o(n.style[b]);M.last!==R&&(M.initial=R,M.last=R);const I=f[b]-y[b];if(I!=M.lastDiff){const P=this.keepXYWithinBounds(n,M.initial+M.initialDiff-I,M.direction);n.style[b]=`${P}px`,M.last=P}M.lastDiff=I};x(l,"top"),x(c,"left")},200).then(f=>{g(()=>{f!=null&&window.clearInterval(f)})})},"popupPositioning")})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:s}=e,n=i||s;if(!n)return!1;const r=this.getPopupIndex(t);if(r===-1)return!1;for(let o=r;o<this.popupList.length;o++){const a=this.popupList[o];if(vW(a.element,n))return!0}return this.isElementWithinCustomPopup(n.target)}isElementWithinCustomPopup(e){const t=Wi(this.gos);for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||e.parentElement===null)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);i&&(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),s=i.length,n=this.getWrapper(e);if(!n||s<=1||!t.contains(e))return;const r=[],o=[];for(const f of i)f!==n&&(f.classList.contains("ag-always-on-top")?o.push(f):r.push(f));const a=[],l=o.length,g=n.classList.contains("ag-always-on-top")||!l?[...r,...o,n]:[...r,n,...o];for(let f=0;f<=s;f++){const y=g[f];if(i[f]===g[f]||y===n)continue;y.querySelectorAll("div").forEach(x=>{x.scrollTop!==0&&a.push([x,x.scrollTop])}),f===0?t.insertAdjacentElement("afterbegin",y):g[f-1].insertAdjacentElement("afterend",y)}for(;a.length;){const f=a.pop();f[0].scrollTop=f[1]}}},HK=["touchstart","touchend","touchmove","touchcancel"],Zk=class{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new Vi(i=>{i(window.setInterval(e,t))})}addEventListener(e,t,i,s){const n=hh(HK,t);e.addEventListener(t,i,{capture:!!s,passive:n})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${this.frameworkName==="solid"?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}},VK=class extends de{constructor(){super(...arguments),this.beanName="cellNavigationService"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer,this.pinnedRowModel=e.pinnedRowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===le.UP,s=e===le.DOWN,n=e===le.LEFT;let r,o;if(i||s)o=i?this.pageBoundsService.getFirstRow():this.pageBoundsService.getLastRow(),r=t.column;else{const a=this.visibleColsService.getAllCols(),l=this.gos.get("enableRtl");o=t.rowIndex,r=n!==l?a[0]:At(a)}return{rowIndex:o,rowPinned:null,column:r}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,s=!1;for(;!s;){switch(e){case le.UP:i=this.getCellAbove(i);break;case le.DOWN:i=this.getCellBelow(i);break;case le.RIGHT:this.gos.get("enableRtl")?i=this.getCellToLeft(i):i=this.getCellToRight(i);break;case le.LEFT:this.gos.get("enableRtl")?i=this.getCellToRight(i):i=this.getCellToLeft(i);break;default:i=null,we("unknown key for navigation ",e);break}i?s=this.isCellGoodToFocusOn(i):s=!0}return i}isCellGoodToFocusOn(e){const t=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex);break}return i?!t.isSuppressNavigable(i):!1}getCellToLeft(e){if(!e)return null;const t=this.visibleColsService.getColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.visibleColsService.getColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;let s=!1;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.pageBoundsService.getFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}else i&&(s=!0);const n=this.rowModel.getRow(e.rowIndex),r=s?void 0:this.getNextStickyPosition(n);return r||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!TC(this.gos)||!e||!e.sticky)return;const i=this.rowRenderer.getStickyTopRowCtrls().some(a=>a.getRowNode().rowIndex===e.rowIndex);let s=[];i?s=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,l)=>a.getRowNode().rowIndex-l.getRowNode().rowIndex):s=[...this.rowRenderer.getStickyBottomRowCtrls()].sort((a,l)=>l.getRowNode().rowIndex-a.getRowNode().rowIndex);const n=t?-1:1,r=s.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),o=s[r+n];if(o)return{rowIndex:o.getRowNode().rowIndex,rowPinned:null}}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex;return t==="top"?this.pinnedRowModel.getPinnedTopRowCount()-1<=i:t==="bottom"?this.pinnedRowModel.getPinnedBottomRowCount()-1<=i:this.pageBoundsService.getLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned,s=i?t===0:t===this.pageBoundsService.getFirstRow();let n=!1;if(s)return i==="top"?null:i?this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null:this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;i&&(n=!0);const r=this.rowModel.getRow(e.rowIndex),o=n?void 0:this.getNextStickyPosition(r,!0);return o||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.pageBoundsService.getLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowCount()-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){var r;const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,n=this.visibleColsService.getColAfter(e.column);if(!n){n=t[0];const o=this.getRowBelow(e);if(Pt(o)||!o.rowPinned&&!(((r=this.paginationService)==null?void 0:r.isRowInPage(o))??!0))return null;i=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}getNextTabbedCellBackwards(e){var r;const t=this.visibleColsService.getAllCols();let i=e.rowIndex,s=e.rowPinned,n=this.visibleColsService.getColBefore(e.column);if(!n){n=At(t);const o=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(Pt(o)||!o.rowPinned&&!(((r=this.paginationService)==null?void 0:r.isRowInPage(o))??!0))return null;i=o?o.rowIndex:null,s=o?o.rowPinned:null}return{rowIndex:i,column:n,rowPinned:s}}},rn=(e,t)=>{for(const i in t)t[i]=e;return t},yT={...rn("@ag-grid-community/core",{dispatchEvent:0,destroy:0,getGridId:0,getGridOption:0,isDestroyed:0,setGridOption:0,updateGridOptions:0,getState:0,setNodesSelected:0,selectAll:0,deselectAll:0,selectAllFiltered:0,deselectAllFiltered:0,selectAllOnCurrentPage:0,deselectAllOnCurrentPage:0,getSelectedNodes:0,getSelectedRows:0,redrawRows:0,setRowNodeExpanded:0,getRowNode:0,addRenderedRowListener:0,getRenderedNodes:0,forEachNode:0,getFirstDisplayedRow:0,getFirstDisplayedRowIndex:0,getLastDisplayedRow:0,getLastDisplayedRowIndex:0,getDisplayedRowAtIndex:0,getDisplayedRowCount:0,getModel:0,getVerticalPixelRange:0,getHorizontalPixelRange:0,ensureColumnVisible:0,ensureIndexVisible:0,ensureNodeVisible:0,getFocusedCell:0,clearFocusedCell:0,setFocusedCell:0,tabToNextCell:0,tabToPreviousCell:0,setFocusedHeader:0,addEventListener:0,addGlobalListener:0,removeEventListener:0,removeGlobalListener:0,expireValueCache:0,getValue:0,getCellValue:0,showColumnMenuAfterButtonClick:0,showColumnMenuAfterMouseClick:0,showColumnMenu:0,hidePopupMenu:0,onSortChanged:0,getPinnedTopRowCount:0,getPinnedBottomRowCount:0,getPinnedTopRow:0,getPinnedBottomRow:0,showLoadingOverlay:0,showNoRowsOverlay:0,hideOverlay:0,setGridAriaProperty:0,refreshCells:0,flashCells:0,refreshHeader:0,isAnimationFrameQueueEmpty:0,flushAllAnimationFrames:0,getSizesForCurrentTheme:0,getCellRendererInstances:0,addRowDropZone:0,removeRowDropZone:0,getRowDropZoneParams:0,getColumnDef:0,getColumnDefs:0,sizeColumnsToFit:0,setColumnGroupOpened:0,getColumnGroup:0,getProvidedColumnGroup:0,getDisplayNameForColumn:0,getDisplayNameForColumnGroup:0,getColumn:0,getColumns:0,applyColumnState:0,getColumnState:0,resetColumnState:0,getColumnGroupState:0,setColumnGroupState:0,resetColumnGroupState:0,isPinning:0,isPinningLeft:0,isPinningRight:0,getDisplayedColAfter:0,getDisplayedColBefore:0,setColumnVisible:0,setColumnsVisible:0,setColumnPinned:0,setColumnsPinned:0,getAllGridColumns:0,getDisplayedLeftColumns:0,getDisplayedCenterColumns:0,getDisplayedRightColumns:0,getAllDisplayedColumns:0,getAllDisplayedVirtualColumns:0,moveColumn:0,moveColumnByIndex:0,moveColumns:0,setColumnWidth:0,setColumnWidths:0,getLeftDisplayedColumnGroups:0,getCenterDisplayedColumnGroups:0,getRightDisplayedColumnGroups:0,getAllDisplayedColumnGroups:0,autoSizeColumn:0,autoSizeColumns:0,autoSizeAllColumns:0,undoCellEditing:0,redoCellEditing:0,getCellEditorInstances:0,getEditingCells:0,stopEditing:0,startEditingCell:0,getCurrentUndoSize:0,getCurrentRedoSize:0,isAnyFilterPresent:0,onFilterChanged:0,isColumnFilterPresent:0,getFilterInstance:0,getColumnFilterInstance:0,destroyFilter:0,setFilterModel:0,getFilterModel:0,getColumnFilterModel:0,setColumnFilterModel:0,showColumnFilter:0,isQuickFilterPresent:0,getQuickFilter:0,resetQuickFilter:0,paginationIsLastPageFound:0,paginationGetPageSize:0,paginationGetCurrentPage:0,paginationGetTotalPages:0,paginationGetRowCount:0,paginationGoToNextPage:0,paginationGoToPreviousPage:0,paginationGoToFirstPage:0,paginationGoToLastPage:0,paginationGoToPage:0,expandAll:0,collapseAll:0,onRowHeightChanged:0,setRowCount:0,getCacheBlockState:0,isLastRowIndexKnown:0}),...rn("@ag-grid-community/client-side-row-model",{onGroupExpandedOrCollapsed:0,refreshClientSideRowModel:0,isRowDataEmpty:0,forEachLeafNode:0,forEachNodeAfterFilter:0,forEachNodeAfterFilterAndSort:0,resetRowHeights:0,applyTransaction:0,applyTransactionAsync:0,flushAsyncTransactions:0,getBestCostNodeSelection:0}),...rn("@ag-grid-community/csv-export",{getDataAsCsv:0,exportDataAsCsv:0}),...rn("@ag-grid-community/infinite-row-model",{refreshInfiniteCache:0,purgeInfiniteCache:0,getInfiniteRowCount:0}),...rn("@ag-grid-enterprise/advanced-filter",{getAdvancedFilterModel:0,setAdvancedFilterModel:0,showAdvancedFilterBuilder:0,hideAdvancedFilterBuilder:0}),...rn("@ag-grid-enterprise/charts",{getChartModels:0,getChartRef:0,getChartImageDataURL:0,downloadChart:0,openChartToolPanel:0,closeChartToolPanel:0,createRangeChart:0,createPivotChart:0,createCrossFilterChart:0,updateChart:0,restoreChart:0}),...rn("@ag-grid-enterprise/clipboard",{copyToClipboard:0,cutToClipboard:0,copySelectedRowsToClipboard:0,copySelectedRangeToClipboard:0,copySelectedRangeDown:0,pasteFromClipboard:0}),...rn("@ag-grid-enterprise/excel-export",{getDataAsExcel:0,exportDataAsExcel:0,getSheetDataForExcel:0,getMultipleSheetsAsExcel:0,exportMultipleSheetsAsExcel:0}),...rn("@ag-grid-enterprise/master-detail",{addDetailGridInfo:0,removeDetailGridInfo:0,getDetailGridInfo:0,forEachDetailGridInfo:0}),...rn("@ag-grid-enterprise/menu",{showContextMenu:0,showColumnChooser:0,hideColumnChooser:0}),...rn("@ag-grid-enterprise/range-selection",{getCellRanges:0,addCellRange:0,clearRangeSelection:0,clearCellSelection:0}),...rn("@ag-grid-enterprise/row-grouping",{addAggFunc:0,addAggFuncs:0,clearAggFuncs:0,setColumnAggFunc:0,isPivotMode:0,getPivotResultColumn:0,setValueColumns:0,getValueColumns:0,removeValueColumn:0,removeValueColumns:0,addValueColumn:0,addValueColumns:0,setRowGroupColumns:0,removeRowGroupColumn:0,removeRowGroupColumns:0,addRowGroupColumn:0,addRowGroupColumns:0,getRowGroupColumns:0,moveRowGroupColumn:0,setPivotColumns:0,removePivotColumn:0,removePivotColumns:0,addPivotColumn:0,addPivotColumns:0,getPivotColumns:0,setPivotResultColumns:0,getPivotResultColumns:0}),...rn("@ag-grid-enterprise/server-side-row-model",{getServerSideSelectionState:0,setServerSideSelectionState:0,applyServerSideTransaction:0,applyServerSideTransactionAsync:0,applyServerSideRowData:0,retryServerSideLoads:0,flushServerSideAsyncTransactions:0,refreshServerSide:0,getServerSideGroupLevelState:0}),...rn("@ag-grid-enterprise/side-bar",{isSideBarVisible:0,setSideBarVisible:0,setSideBarPosition:0,openToolPanel:0,closeToolPanel:0,getOpenedToolPanel:0,refreshToolPanel:0,isToolPanelShowing:0,getToolPanelInstance:0,getSideBar:0}),...rn("@ag-grid-enterprise/status-bar",{getStatusPanel:0})},Jx={isDestroyed:()=>!0,destroy(){},preConstruct(){},postConstruct(){},preWireBeans(){},wireBeans(){}},WK=(e,t)=>e.eventService.dispatchEvent(t),Xk=class{};Reflect.defineProperty(Xk,"name",{value:"GridApi"});var jK=class extends de{constructor(){super(),this.beanName="apiFunctionService",this.api=new Xk,this.fns={...Jx,dispatchEvent:WK},this.beans=null,this.preDestroyLink="";const{api:e}=this;for(const t in yT)e[t]=this.makeApi(t)[t]}wireBeans(e){this.beans=e}postConstruct(){this.preDestroyLink=this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}addFunction(e,t){var n;const{fns:i,beans:s}=this;i!==Jx&&(i[e]=((n=s==null?void 0:s.validationService)==null?void 0:n.validateApiFunction(e,t))??t)}makeApi(e){return{[e]:(...t)=>{const{beans:i,fns:{[e]:s}}=this;return s?s(i,...t):this.apiNotFound(e)}}}apiNotFound(e){const{beans:t,gos:i,preDestroyLink:s}=this;if(!t)we(`Grid API function ${e}() cannot be called as the grid has been destroyed.
Either clear local references to the grid api, when it is destroyed, or check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.
To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${s}`);else{const n=yT[e];i.assertModuleRegistered(n,`api.${e}`)&&we(`API function '${e}' not registered to module '${n}'`)}}destroy(){super.destroy(),this.fns=Jx,this.beans=null}};function UK(e){return{beanName:"gridApi",bean:e.getBean("apiFunctionService").api}}var KK=class extends de{constructor(){super(...arguments),this.beanName="columnDefFactory"}buildColumnDefs(e,t,i){const s=[],n={};return e.forEach(r=>{const o=this.createDefFromColumn(r,t,i);let a=!0,l=o,c=r.getOriginalParent(),p=null;for(;c;){let g=null;if(c.isPadding()){c=c.getOriginalParent();continue}const f=n[c.getGroupId()];if(f){f.children.push(l),a=!1;break}if(g=this.createDefFromGroup(c),g&&(g.children=[l],n[g.groupId]=g,l=g,c=c.getOriginalParent()),c!=null&&p===c){a=!1;break}p=c}a&&s.push(l)}),s}createDefFromGroup(e){const t=Kb(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const s=Kb(e.getColDef());return s.colId=e.getColId(),s.width=e.getActualWidth(),s.rowGroup=e.isRowGroupActive(),s.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,s.pivot=e.isPivotActive(),s.pivotIndex=e.isPivotActive()?i.indexOf(e):null,s.aggFunc=e.isValueActive()?e.getAggFunc():null,s.hide=e.isVisible()?void 0:!0,s.pinned=e.isPinned()?e.getPinned():null,s.sort=e.getSort()?e.getSort():null,s.sortIndex=e.getSortIndex()!=null?e.getSortIndex():null,s}},YK=class extends de{constructor(){super(...arguments),this.beanName="columnEventDispatcher"}visibleCols(e){this.eventService.dispatchEvent({type:"displayedColumnsChanged",source:e})}gridColumns(){this.eventService.dispatchEvent({type:"gridColumnsChanged"})}headerHeight(e){this.eventService.dispatchEvent({type:"columnHeaderHeightChanged",column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}groupHeaderHeight(e){this.eventService.dispatchEvent({type:"columnGroupHeaderHeightChanged",columnGroup:e,source:"autosizeColumnGroupHeaderHeight"})}groupOpened(e){this.eventService.dispatchEvent({type:"columnGroupOpened",columnGroup:e.length===1?e[0]:void 0,columnGroups:e})}rowGroupChanged(e,t){this.eventService.dispatchEvent({type:"columnRowGroupChanged",columns:e,column:e.length===1?e[0]:null,source:t})}genericColumnEvent(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t.length===1?t[0]:null,source:i})}pivotModeChanged(){this.eventService.dispatchEvent({type:"columnPivotModeChanged"})}virtualColumnsChanged(e){this.eventService.dispatchEvent({type:"virtualColumnsChanged",afterScroll:e})}newColumnsLoaded(e){this.eventService.dispatchEvent({type:"newColumnsLoaded",source:e})}everythingChanged(e){this.eventService.dispatchEvent({type:"columnEverythingChanged",source:e})}columnMoved(e){const{movedColumns:t,source:i,toIndex:s,finished:n}=e;this.eventService.dispatchEvent({type:"columnMoved",columns:t,column:t&&t.length===1?t[0]:null,toIndex:s,finished:n,source:i})}columnPinned(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,s=this.getCommonValue(e,n=>n.getPinned());this.eventService.dispatchEvent({type:"columnPinned",pinned:s??null,columns:e,column:i,source:t})}columnVisible(e,t){if(!e.length)return;const i=e.length===1?e[0]:null,s=this.getCommonValue(e,n=>n.isVisible());this.eventService.dispatchEvent({type:"columnVisible",visible:s,columns:e,column:i,source:t})}getCommonValue(e,t){if(!e||e.length==0)return;const i=t(e[0]);for(let s=1;s<e.length;s++)if(i!==t(e[s]))return;return i}columnChanged(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t&&t.length==1?t[0]:null,source:i})}columnResized(e,t,i,s=null){e&&e.length&&this.eventService.dispatchEvent({type:"columnResized",columns:e,column:e.length===1?e[0]:null,flexColumns:s,finished:t,source:i})}},$K=class extends de{constructor(){super(...arguments),this.beanName="columnGetStateService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService}getColumnState(){const e=this.columnModel.getColDefCols();if(Pt(e)||!this.columnModel.isAlive())return[];const i=this.columnModel.getAllCols().map(s=>this.createStateItemFromColumn(s));return this.orderColumnStateList(i),i}createStateItemFromColumn(e){const t=this.funcColsService.getRowGroupColumns(),i=this.funcColsService.getPivotColumns(),s=e.isRowGroupActive()?t.indexOf(e):null,n=e.isPivotActive()?i.indexOf(e):null,r=e.isValueActive()?e.getAggFunc():null,o=e.getSort()!=null?e.getSort():null,a=e.getSortIndex()!=null?e.getSortIndex():null,l=e.getFlex()!=null&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:o,sortIndex:a,aggFunc:r,rowGroup:e.isRowGroupActive(),rowGroupIndex:s,pivot:e.isPivotActive(),pivotIndex:n,flex:l}}orderColumnStateList(e){const t=this.columnModel.getCols(),i=new Map(t.map((s,n)=>[s.getColId(),n]));e.sort((s,n)=>{const r=i.has(s.colId)?i.get(s.colId):-1,o=i.has(n.colId)?i.get(n.colId):-1;return r-o})}},ZK=class extends de{constructor(){super(...arguments),this.beanName="columnGroupStateService"}wireBeans(e){this.columnModel=e.columnModel,this.columnAnimationService=e.columnAnimationService,this.eventDispatcher=e.columnEventDispatcher,this.visibleColsService=e.visibleColsService}getColumnGroupState(){const e=[],t=this.columnModel.getColTree();return Sl(null,t,i=>{fn(i)&&e.push({groupId:i.getGroupId(),open:i.isExpanded()})}),e}resetColumnGroupState(e){const t=this.columnModel.getColDefColTree();if(!t)return;const i=[];Sl(null,t,s=>{if(fn(s)){const n=s.getColGroupDef(),r={groupId:s.getGroupId(),open:n?n.openByDefault:void 0};i.push(r)}}),this.setColumnGroupState(i,e)}setColumnGroupState(e,t){if(!this.columnModel.getColTree())return;this.columnAnimationService.start();const s=[];e.forEach(n=>{const r=n.groupId,o=n.open,a=this.columnModel.getProvidedColGroup(r);a&&a.isExpanded()!==o&&(a.setExpanded(o),s.push(a))}),this.visibleColsService.refresh(t,!0),s.length&&this.eventDispatcher.groupOpened(s),this.columnAnimationService.finish()}},XK=class extends de{constructor(){super(...arguments),this.beanName="columnViewportService",this.colsWithinViewport=[],this.headerColsWithinViewport=[],this.colsWithinViewportHash="",this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={}}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.eventDispatcher=e.columnEventDispatcher}postConstruct(){this.suppressColumnVirtualisation=this.gos.get("suppressColumnVirtualisation")}setScrollPosition(e,t,i=!1){const s=this.visibleColsService.isBodyWidthDirty();if(!(e===this.scrollWidth&&t===this.scrollPosition&&!s)){if(this.scrollWidth=e,this.scrollPosition=t,this.visibleColsService.setBodyWidthDirty(),this.gos.get("enableRtl")){const r=this.visibleColsService.getBodyContainerWidth();this.viewportLeft=r-this.scrollPosition-this.scrollWidth,this.viewportRight=r-this.scrollPosition}else this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition;this.columnModel.isReady()&&this.checkViewportColumns(i)}}getHeadersToRender(e,t){let i;switch(e){case"left":i=this.rowsOfHeadersToRenderLeft[t];break;case"right":i=this.rowsOfHeadersToRenderRight[t];break;default:i=this.rowsOfHeadersToRenderCenter[t];break}return i||[]}extractViewportColumns(){const e=this.visibleColsService.getCenterCols();this.isColumnVirtualisationSuppressed()?(this.colsWithinViewport=e,this.headerColsWithinViewport=e):(this.colsWithinViewport=e.filter(this.isColumnInRowViewport.bind(this)),this.headerColsWithinViewport=e.filter(this.isColumnInHeaderViewport.bind(this)))}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||this.viewportRight===0}clear(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={},this.colsWithinViewportHash=""}isColumnInHeaderViewport(e){return e.isAutoHeaderHeight()||this.isAnyParentAutoHeaderHeight(e)?!0:this.isColumnInRowViewport(e)}isAnyParentAutoHeaderHeight(e){for(;e;){if(e.isAutoHeaderHeight())return!0;e=e.getParent()}return!1}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),s=this.viewportLeft-200,n=this.viewportRight+200,r=t<s&&i<s,o=t>n&&i>n;return!r&&!o}getViewportColumns(){const e=this.visibleColsService.getLeftCols(),t=this.visibleColsService.getRightCols();return this.colsWithinViewport.concat(e).concat(t)}getColsWithinViewport(e){if(!this.columnModel.isColSpanActive())return this.colsWithinViewport;const t=n=>{const r=n.getLeft();return Ae(r)&&r>this.viewportLeft},i=this.isColumnVirtualisationSuppressed()?void 0:this.isColumnInRowViewport.bind(this),s=this.visibleColsService.getColsCenter();return this.visibleColsService.getColsForRow(e,s,i,t)}checkViewportColumns(e=!1){this.extractViewport()&&this.eventDispatcher.virtualColumnsChanged(e)}calculateHeaderRows(){this.rowsOfHeadersToRenderLeft={},this.rowsOfHeadersToRenderRight={},this.rowsOfHeadersToRenderCenter={};const e={},t=this.visibleColsService.getLeftCols(),i=this.visibleColsService.getRightCols();this.headerColsWithinViewport.concat(t).concat(i).forEach(r=>e[r.getId()]=!0);const n=(r,o,a)=>{let l=!1;for(let c=0;c<r.length;c++){const p=r[c];let g=!1;if(Zc(p))g=e[p.getId()]===!0;else{const y=p.getDisplayedChildren();y&&(g=n(y,o,a+1))}g&&(l=!0,o[a]||(o[a]=[]),o[a].push(p))}return l};n(this.visibleColsService.getTreeLeft(),this.rowsOfHeadersToRenderLeft,0),n(this.visibleColsService.getTreeRight(),this.rowsOfHeadersToRenderRight,0),n(this.visibleColsService.getTreeCenter(),this.rowsOfHeadersToRenderCenter,0)}extractViewport(){const e=s=>`${s.getId()}-${s.getPinned()||"normal"}`;this.extractViewportColumns();const t=this.getViewportColumns().map(e).join("#"),i=this.colsWithinViewportHash!==t;return i&&(this.colsWithinViewportHash=t,this.calculateHeaderRows()),i}},QK=class extends de{constructor(){super(...arguments),this.beanName="agComponentUtils"}wireBeans(e){this.componentMetadataProvider=e.componentMetadataProvider}adaptFunction(e,t){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){class t{refresh(){return!1}getGui(){return this.eGui}init(s){const n=e(s),r=typeof n;if(r==="string"||r==="number"||r==="boolean"){this.eGui=Df("<span>"+n+"</span>");return}if(n==null){this.eGui=Df("<span></span>");return}this.eGui=n}}return t}doesImplementIComponent(e){return e?e.prototype&&"getGui"in e.prototype:!1}},qK=class extends de{constructor(){super(...arguments),this.beanName="componentMetadataProvider"}wireBeans(e){this.agComponentUtils=e.agComponentUtils}postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},dragAndDropImageComponent:{mandatoryMethodList:["setIcon","setLabel"],optionalMethodList:[]},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}},JK=["rowPositionUtils","cellPositionUtils","headerPositionUtils","paginationAutoPageSizeService","apiFunctionService","gridApi","userComponentRegistry","agComponentUtils","componentMetadataProvider","resizeObserverService","userComponentFactory","rowContainerHeightService","horizontalResizeService","localeService","validationService","pinnedRowModel","dragService","visibleColsService","eventService","gos","popupService","selectionService","columnFilterService","quickFilterService","filterManager","columnModel","headerNavigationService","pageBoundsService","paginationService","pageBoundsListener","rowRenderer","expressionService","columnFactory","alignedGridsService","navigationService","valueCache","valueService","loggerFactory","autoWidthCalculator","filterMenuFactory","dragAndDropService","focusService","mouseEventService","environment","cellNavigationService","stylingService","scrollVisibleService","sortController","columnHoverService","columnAnimationService","selectableService","autoColService","controlsColService","changeDetectionService","animationFrameService","undoRedoService","columnDefFactory","rowCssClassCalculator","rowNodeBlockLoader","rowNodeSorter","ctrlsService","pinnedWidthService","rowNodeEventThrottle","ctrlsFactory","dataTypeService","syncService","overlayService","stateService","expansionService","apiEventService","ariaAnnouncementService","menuService","columnApplyStateService","columnEventDispatcher","columnMoveService","columnAutosizeService","columnGetStateService","columnGroupStateService","columnSizeService","funcColsService","columnNameService","columnViewportService","pivotResultColsService","showRowGroupColsService"],CT=Object.fromEntries(JK.map((e,t)=>[e,t]));function eY(e,t){const i=(e.beanName?CT[e.beanName]:void 0)??Number.MAX_SAFE_INTEGER,s=(t.beanName?CT[t.beanName]:void 0)??Number.MAX_SAFE_INTEGER;return i-s}function tY(e,t){return(e==null?void 0:e.beanName)==="gridDestroyService"?-1:0}var iY=class extends de{constructor(){super(...arguments),this.beanName="ctrlsFactory",this.registry={}}register(e){this.registry[e.name]=e.classImp}getInstance(e,...t){const i=this.registry[e];if(i!=null)return new i(...t)}},sY=class extends de{constructor(){super(...arguments),this.beanName="ctrlsService",this.params={gridCtrl:void 0,gridBodyCtrl:void 0,center:void 0,left:void 0,right:void 0,bottomCenter:void 0,bottomLeft:void 0,bottomRight:void 0,topCenter:void 0,topLeft:void 0,topRight:void 0,stickyTopCenter:void 0,stickyTopLeft:void 0,stickyTopRight:void 0,stickyBottomCenter:void 0,stickyBottomLeft:void 0,stickyBottomRight:void 0,fakeHScrollComp:void 0,fakeVScrollComp:void 0,gridHeaderCtrl:void 0,centerHeader:void 0,leftHeader:void 0,rightHeader:void 0},this.ready=!1,this.readyCallbacks=[],this.runReadyCallbacksAsync=!1}wireBeans(e){var t,i;this.runReadyCallbacksAsync=((i=(t=e.frameworkOverrides).runWhenReadyAsync)==null?void 0:i.call(t))??!1}postConstruct(){this.addEventListener("ready",()=>{this.updateReady(),this.ready&&(this.readyCallbacks.forEach(e=>e(this.params)),this.readyCallbacks.length=0)},this.runReadyCallbacksAsync)}updateReady(){this.ready=Object.values(this.params).every(e=>(e==null?void 0:e.isAlive())??!1)}whenReady(e,t){this.ready?t(this.params):this.readyCallbacks.push(t),e.addDestroyFunc(()=>{const i=this.readyCallbacks.indexOf(t);i>=0&&this.readyCallbacks.splice(i,1)})}register(e,t){this.params[e]=t,this.updateReady(),this.ready&&this.dispatchLocalEvent({type:"ready"}),t.addDestroyFunc(()=>{this.updateReady()})}get(e){return this.params[e]}getGridBodyCtrl(){return this.params.gridBodyCtrl}getHeaderRowContainerCtrls(){const{leftHeader:e,centerHeader:t,rightHeader:i}=this.params;return[e,i,t]}getHeaderRowContainerCtrl(e){const t=this.params;switch(e){case"left":return t.leftHeader;case"right":return t.rightHeader;default:return t.centerHeader}}},nY=class extends de{constructor(){super(...arguments),this.beanName="cellPositionUtils"}createId(e){const{rowIndex:t,rowPinned:i,column:s}=e;return this.createIdFromValues({rowIndex:t,column:s,rowPinned:i})}createIdFromValues(e){const{rowIndex:t,rowPinned:i,column:s}=e;return`${t}.${i??"null"}.${s.getId()}`}equals(e,t){const i=e.column===t.column,s=e.rowPinned===t.rowPinned,n=e.rowIndex===t.rowIndex;return i&&s&&n}},rY=class extends de{constructor(){super(...arguments),this.beanName="rowNodeEventThrottle",this.events=[]}wireBeans(e){this.animationFrameService=e.animationFrameService,this.rowModel=e.rowModel}postConstruct(){xi(this.gos)&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e,t){if(this.clientSideRowModel==null){this.eventService.dispatchEvent(e);return}this.events.push(e);const i=()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(s=>this.eventService.dispatchEvent(s)),this.events=[]};t?i():(this.dispatchExpandedDebounced==null&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(i)),this.dispatchExpandedDebounced())}},oY=class extends de{constructor(){super(...arguments),this.beanName="rowPositionUtils"}wireBeans(e){this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.pageBoundsService=e.pageBoundsService}getFirstRow(){let e=0,t;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),t===void 0?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),s=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.pageBoundsService.getLastRow()):s&&(t="top",e=s-1),e===void 0?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRow(e.rowIndex);case"bottom":return this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t?!0:e&&!t||!e&&t?!1:e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if(t.rowPinned!=="top")return!0;break;case"bottom":if(t.rowPinned!=="bottom")return!1;break;default:if(Ae(t.rowPinned))return t.rowPinned!=="top";break}return e.rowIndex<t.rowIndex}},ST={cssName:"--ag-row-height",changeKey:"rowHeightChanged",defaultValue:42},wT={cssName:"--ag-header-height",changeKey:"headerHeightChanged",defaultValue:48},xT={cssName:"--ag-list-item-height",changeKey:"listItemHeightChanged",defaultValue:24},aY=class extends de{constructor(){super(...arguments),this.beanName="environment",this.sizeEls=new Map,this.lastKnownValues=new Map,this.ancestorThemeClasses=[],this.sizesMeasured=!1,this.gridTheme=null}wireBeans(e){this.resizeObserverService=e.resizeObserverService,this.eGridDiv=e.eGridDiv}postConstruct(){this.addManagedPropertyListener("theme",()=>this.handleThemeGridOptionChange()),this.handleThemeGridOptionChange(),this.addDestroyFunc(()=>this.stopUsingTheme()),this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.ancestorThemeClasses=this.readAncestorThemeClasses(),this.setUpThemeClassObservers(),this.getSizeEl(ST),this.getSizeEl(wT),this.getSizeEl(xT)}getDefaultRowHeight(){return this.getCSSVariablePixelValue(ST)}getDefaultHeaderHeight(){return this.getCSSVariablePixelValue(wT)}getDefaultColumnMinWidth(){return Math.min(36,this.getDefaultRowHeight())}getDefaultListItemHeight(){return this.getCSSVariablePixelValue(xT)}hasMeasuredSizes(){return this.sizesMeasured}getGridThemeClass(){var e;return((e=this.gridTheme)==null?void 0:e.getCssClass())||null}getThemeClasses(){return this.gridTheme?[this.gridTheme.getCssClass()]:this.ancestorThemeClasses}applyThemeClasses(e){const t=this.getThemeClasses();for(const i of Array.from(e.classList))i.startsWith("ag-theme-")&&!t.includes(i)&&e.classList.remove(i);e.classList.add(...t)}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gos.get("rowHeight");if(t==null||isNaN(t)||!isFinite(t))return e!==null&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):e!=""?parseFloat(e):-1}getCSSVariablePixelValue(e){const t=this.lastKnownValues.get(e);if(t!=null)return t;const i=this.measureSizeEl(e);return i==="detached"||i==="no-styles"?e.defaultValue:(this.lastKnownValues.set(e,i),i)}measureSizeEl(e){const t=this.getSizeEl(e);if(t.offsetParent==null)return"detached";const i=t.offsetWidth;return i===bT?"no-styles":(this.sizesMeasured=!0,i)}getSizeEl(e){let t=this.sizeEls.get(e);if(t)return t;let i=this.eMeasurementContainer;i||(i=this.eMeasurementContainer=document.createElement("div"),i.className="ag-measurement-container",this.gos.get("theme")&&this.applyThemeClasses(i),this.eGridDiv.appendChild(i)),t=document.createElement("div"),t.style.width=`var(${e.cssName}, ${bT}px)`,i.appendChild(t),this.sizeEls.set(e,t);let s=this.measureSizeEl(e);s==="no-styles"&&we(`no value for ${e.cssName}. This usually means that the grid has been initialised before styles have been loaded. The default value of ${e.defaultValue} will be used and updated when styles load.`);const n=this.resizeObserverService.observeResize(t,()=>{const r=this.measureSizeEl(e);r==="detached"||r==="no-styles"||(this.lastKnownValues.set(e,r),r!==s&&(s=r,this.fireGridStylesChangedEvent(e.changeKey)))});return this.addDestroyFunc(()=>n()),t}fireGridStylesChangedEvent(e){this.eventService.dispatchEvent({type:"gridStylesChanged",[e]:!0})}setUpThemeClassObservers(){const e=new MutationObserver(()=>{const i=this.readAncestorThemeClasses();lY(i,this.ancestorThemeClasses)||(this.ancestorThemeClasses=i,this.fireGridStylesChangedEvent("themeChanged"))});let t=this.eGridDiv;for(;t;)e.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]}),t=t.parentElement;this.addDestroyFunc(()=>e.disconnect())}readAncestorThemeClasses(){let e=this.eGridDiv;const t=[];for(;e;){const i=Array.from(e.classList).filter(s=>s.startsWith("ag-theme-"));for(const s of i)t.includes(s)||t.unshift(s);e=e.parentElement}return Object.freeze(t)}handleThemeGridOptionChange(){const{gos:e,eMeasurementContainer:t,gridTheme:i}=this,s=e.get("theme")||null;s!==i&&(i==null||i.stopUse(),this.gridTheme=s,s==null||s.startUse({loadThemeGoogleFonts:e.get("loadThemeGoogleFonts"),container:this.eGridDiv}),t&&this.applyThemeClasses(t),this.fireGridStylesChangedEvent("themeChanged"))}stopUsingTheme(){var e;(e=this.gridTheme)==null||e.stopUse(),this.gridTheme=null}},lY=(e,t)=>e.length===t.length&&e.findIndex((i,s)=>e[s]!==t[s])===-1,bT=15538,cY=class extends de{constructor(){super(...arguments),this.beanName="eventService",this.globalEventService=new mp}wireBeans(e){this.globalEventListener=e.globalEventListener,this.globalSyncEventListener=e.globalSyncEventListener}postConstruct(){if(this.globalEventListener){const e=Gy(this.gos);this.addGlobalListener(this.globalEventListener,e)}this.globalSyncEventListener&&this.addGlobalListener(this.globalSyncEventListener,!1)}addEventListener(e,t,i){this.globalEventService.addEventListener(e,t,i)}removeEventListener(e,t,i){this.globalEventService.removeEventListener(e,t,i)}addGlobalListener(e,t=!1){this.globalEventService.addGlobalListener(e,t)}removeGlobalListener(e,t=!1){this.globalEventService.removeGlobalListener(e,t)}dispatchLocalEvent(){}dispatchEvent(e){this.globalEventService.dispatchEvent(this.gos.addGridCommonParams(e))}dispatchEventOnce(e){this.globalEventService.dispatchEventOnce(this.gos.addGridCommonParams(e))}},K0=class Nr extends de{constructor(){super(...arguments),this.beanName="focusService"}wireBeans(t){this.eGridDiv=t.eGridDiv,this.columnModel=t.columnModel,this.visibleColsService=t.visibleColsService,this.headerNavigationService=t.headerNavigationService,this.headerPositionUtils=t.headerPositionUtils,this.rowRenderer=t.rowRenderer,this.rowPositionUtils=t.rowPositionUtils,this.cellPositionUtils=t.cellPositionUtils,this.navigationService=t.navigationService,this.ctrlsService=t.ctrlsService,this.filterManager=t.filterManager,this.rangeService=t.rangeService,this.advancedFilterService=t.advancedFilterService,this.overlayService=t.overlayService}static addKeyboardModeEvents(t){this.instanceCount>0||(t.addEventListener("keydown",Nr.toggleKeyboardMode),t.addEventListener("mousedown",Nr.toggleKeyboardMode))}static removeKeyboardModeEvents(t){this.instanceCount>0||(t.removeEventListener("keydown",Nr.toggleKeyboardMode),t.removeEventListener("mousedown",Nr.toggleKeyboardMode))}static toggleKeyboardMode(t){const i=Nr.keyboardModeActive,s=t.type==="keydown";s&&(t.ctrlKey||t.metaKey||t.altKey)||i!==s&&(Nr.keyboardModeActive=s)}postConstruct(){const t=this.clearFocusedCell.bind(this);this.addManagedEventListeners({columnPivotModeChanged:t,newColumnsLoaded:this.onColumnEverythingChanged.bind(this),columnGroupOpened:t,columnRowGroupChanged:t}),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(this,i=>{this.gridCtrl=i.gridCtrl})}registerKeyboardFocusEvents(){const t=Wi(this.gos);Nr.addKeyboardModeEvents(t),Nr.instanceCount++,this.addDestroyFunc(()=>{Nr.instanceCount--,Nr.removeKeyboardModeEvents(t)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const t=this.focusedCellPosition.column,i=this.columnModel.getCol(t.getId());t!==i&&this.clearFocusedCell()}isKeyboardMode(){return Nr.keyboardModeActive}getFocusCellToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(_i(this.gos),ph.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){return this.gos.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(_i(this.gos),NC.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(t,i){let s=t;for(;s;){if(Sf(this.gos,s,i))return!1;s=s.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(t){return this.isCellRestoreFocused(t)?(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0):!1}clearRestoreFocus(){this.restoredFocusedCellPosition=null,this.awaitRestoreFocusedCell=!1}restoreFocusedCell(t,i){this.awaitRestoreFocusedCell=!0,setTimeout(()=>{this.awaitRestoreFocusedCell&&(this.setRestoreFocusedCell(t),i())})}isCellRestoreFocused(t){return this.restoredFocusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.restoredFocusedCellPosition)}setRestoreFocusedCell(t){this.getFrameworkOverrides().renderingEngine==="react"&&(this.restoredFocusedCellPosition=t)}getFocusEventParams(t){const{rowIndex:i,rowPinned:s,column:n}=t,r={rowIndex:i,rowPinned:s,column:n,isFullWidthCell:!1},o=this.rowRenderer.getRowByPosition({rowIndex:i,rowPinned:s});return o&&(r.isFullWidthCell=o.isFullWidth()),r}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,this.focusedCellPosition==null)return;const t=this.getFocusEventParams(this.focusedCellPosition);this.focusedCellPosition=null,this.eventService.dispatchEvent({type:"cellFocusCleared",...t})}setFocusedCell(t){const{column:i,rowIndex:s,rowPinned:n,forceBrowserFocus:r=!1,preventScrollOnBrowserFocus:o=!1}=t,a=this.columnModel.getCol(i);if(!a){this.focusedCellPosition=null;return}this.focusedCellPosition={rowIndex:s,rowPinned:dl(n),column:a},this.eventService.dispatchEvent({type:"cellFocused",...this.getFocusEventParams(this.focusedCellPosition),forceBrowserFocus:r,preventScrollOnBrowserFocus:o})}isCellFocused(t){return this.focusedCellPosition==null?!1:this.cellPositionUtils.equals(t,this.focusedCellPosition)}isRowNodeFocused(t){return this.isRowFocused(t.rowIndex,t.rowPinned)}isHeaderWrapperFocused(t){if(this.focusedHeaderPosition==null)return!1;const i=t.getColumnGroupChild(),s=t.getRowIndex(),n=t.getPinned(),{column:r,headerRowIndex:o}=this.focusedHeaderPosition;return i===r&&s===o&&n==r.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(t,i){this.focusedHeaderPosition={headerRowIndex:t,column:i}}isHeaderFocusSuppressed(){return this.gos.get("suppressHeaderFocus")||this.overlayService.isExclusive()}isCellFocusSuppressed(){return this.gos.get("suppressCellFocus")||this.overlayService.isExclusive()}focusHeaderPosition(t){var c;if(this.isHeaderFocusSuppressed())return!1;const{direction:i,fromTab:s,allowUserOverride:n,event:r,fromCell:o,rowWithoutSpanValue:a}=t;let{headerPosition:l}=t;if(o&&((c=this.filterManager)!=null&&c.isAdvancedFilterHeaderActive()))return this.focusAdvancedFilter(l);if(n){const p=this.getFocusedHeader(),g=this.headerNavigationService.getHeaderRowCount();if(s){const f=this.gos.getCallback("tabToNextHeader");f&&(l=this.getHeaderPositionFromUserFunc({userFunc:f,direction:i,currentPosition:p,headerPosition:l,headerRowCount:g}))}else{const f=this.gos.getCallback("navigateToNextHeader");if(f&&r){const y={key:r.key,previousHeaderPosition:p,nextHeaderPosition:l,headerRowCount:g,event:r};l=f(y)}}}return l?this.focusProvidedHeaderPosition({headerPosition:l,direction:i,event:r,fromCell:o,rowWithoutSpanValue:a}):!1}focusHeaderPositionFromUserFunc(t){if(this.isHeaderFocusSuppressed())return!1;const{userFunc:i,headerPosition:s,direction:n,event:r}=t,o=this.getFocusedHeader(),a=this.headerNavigationService.getHeaderRowCount(),l=this.getHeaderPositionFromUserFunc({userFunc:i,direction:n,currentPosition:o,headerPosition:s,headerRowCount:a});return!!l&&this.focusProvidedHeaderPosition({headerPosition:l,direction:n,event:r})}getHeaderPositionFromUserFunc(t){const{userFunc:i,direction:s,currentPosition:n,headerPosition:r,headerRowCount:o}=t,l=i({backwards:s==="Before",previousHeaderPosition:n,nextHeaderPosition:r,headerRowCount:o});return l===!0||l===null?(l===null&&we("Since v31.3 Returning `null` from tabToNextHeader is deprecated. Return `true` to stay on the current header, or `false` to let the browser handle the tab behaviour."),n):l===!1?null:l}focusProvidedHeaderPosition(t){var g;const{headerPosition:i,direction:s,fromCell:n,rowWithoutSpanValue:r,event:o}=t,{column:a,headerRowIndex:l}=i;if(l===-1)return(g=this.filterManager)!=null&&g.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(i):this.focusGridView(a);this.headerNavigationService.scrollToColumn(a,s);const c=this.ctrlsService.getHeaderRowContainerCtrl(a.getPinned()),p=(c==null?void 0:c.focusHeader(i.headerRowIndex,a,o))||!1;return p&&(r!=null||n)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(r??-1),p}focusFirstHeader(){if(this.overlayService.isExclusive()&&this.focusOverlay())return!0;let t=this.visibleColsService.getAllCols()[0];if(!t)return!1;t.getParent()&&(t=this.visibleColsService.getColGroupAtLevel(t,0));const i=this.headerPositionUtils.getHeaderIndexToFocus(t,0);return this.focusHeaderPosition({headerPosition:i,rowWithoutSpanValue:0})}focusLastHeader(t){if(this.overlayService.isExclusive()&&this.focusOverlay(!0))return!0;const i=this.headerNavigationService.getHeaderRowCount()-1,s=At(this.visibleColsService.getAllCols());return this.focusHeaderPosition({headerPosition:{headerRowIndex:i,column:s},rowWithoutSpanValue:-1,event:t})}focusPreviousFromFirstCell(t){var i;return(i=this.filterManager)!=null&&i.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(t)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(t,i){return this.focusedCellPosition==null?!1:this.focusedCellPosition.rowIndex===t&&this.focusedCellPosition.rowPinned===dl(i)}findFocusableElements(t,i,s=!1){const n=lj;let r=KF;i&&(r+=", "+i),s&&(r+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(t.querySelectorAll(n)).filter(c=>ha(c)),a=Array.prototype.slice.apply(t.querySelectorAll(r));return a.length?((c,p)=>c.filter(g=>p.indexOf(g)===-1))(o,a):o}focusInto(t,i=!1,s=!1){const n=this.findFocusableElements(t,null,s),r=i?At(n):n[0];return r?(r.focus({preventScroll:!0}),!0):!1}findFocusableElementBeforeTabGuard(t,i){if(!i)return null;const s=this.findFocusableElements(t),n=s.indexOf(i);if(n===-1)return null;let r=-1;for(let o=n-1;o>=0;o--)if(s[o].classList.contains("ag-tab-guard-top")){r=o;break}return r<=0?null:s[r-1]}findNextFocusableElement(t=this.eGridDiv,i,s){const n=this.findFocusableElements(t,i?':not([tabindex="-1"])':null),r=_i(this.gos);let o;i?o=n.findIndex(l=>l.contains(r)):o=n.indexOf(r);const a=o+(s?-1:1);return a<0||a>=n.length?null:n[a]}isTargetUnderManagedComponent(t,i){if(!i)return!1;const s=t.querySelectorAll(`.${Ih.FOCUS_MANAGED_CLASS}`);if(!s.length)return!1;for(let n=0;n<s.length;n++)if(s[n].contains(i))return!0;return!1}findTabbableParent(t,i=5){let s=0;for(;t&&Qb(t)===null&&++s<=i;)t=t.parentElement;return Qb(t)===null?null:t}focusOverlay(t){var s;const i=this.overlayService.isVisible()&&((s=this.overlayService.getOverlayWrapper())==null?void 0:s.getGui());return!!i&&this.focusInto(i,t)}focusGridViewFailed(t,i){return i&&this.focusOverlay(t)||t&&this.focusLastHeader()}focusGridView(t,i=!1,s=!0){var r,o;if(this.overlayService.isExclusive())return s&&this.focusOverlay(i);if(this.isCellFocusSuppressed())return i&&!this.isHeaderFocusSuppressed()?this.focusLastHeader():s&&this.focusOverlay(i)?!0:this.focusNextGridCoreContainer(!1);const n=i?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(n){const{rowIndex:a,rowPinned:l}=n;if(t??(t=(r=this.getFocusedHeader())==null?void 0:r.column),t&&a!==void 0&&a!==null){if(this.navigationService.ensureCellVisible({rowIndex:a,column:t,rowPinned:l}),i){const c=this.rowRenderer.getRowByPosition(n);if(c!=null&&c.isFullWidth()&&this.navigationService.tryToFocusFullWidthRow(n,i))return!0}return this.setFocusedCell({rowIndex:a,column:t,rowPinned:dl(l),forceBrowserFocus:!0}),(o=this.rangeService)==null||o.setRangeToCell({rowIndex:a,rowPinned:l,column:t}),!0}}return!!(s&&this.focusOverlay(i)||i&&this.focusLastHeader())}isGridFocused(){const t=_i(this.gos);return!!t&&this.eGridDiv.contains(t)}focusNextGridCoreContainer(t,i=!1){return!i&&this.gridCtrl.focusNextInnerContainer(t)?!0:((i||!t&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(t),!1)}focusAdvancedFilter(t){var i;return this.advancedFilterFocusColumn=t==null?void 0:t.column,((i=this.advancedFilterService)==null?void 0:i.getCtrl().focusHeaderComp())??!1}focusNextFromAdvancedFilter(t,i){var n;const s=(i?void 0:this.advancedFilterFocusColumn)??((n=this.visibleColsService.getAllCols())==null?void 0:n[0]);return t?this.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(s)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}addFocusableContainer(t){this.gridCtrl.addFocusableContainer(t)}removeFocusableContainer(t){this.gridCtrl.removeFocusableContainer(t)}focusGridInnerElement(t){return this.gridCtrl.focusInnerElement(t)}allowFocusForNextGridCoreContainer(t){this.gridCtrl.allowFocusForNextCoreContainer(t)}};K0.keyboardModeActive=!1;K0.instanceCount=0;var uY=K0,hY=class extends de{constructor(){super(...arguments),this.beanName="pinnedWidthService"}wireBeans(e){this.visibleColsService=e.visibleColsService}postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedEventListeners({displayedColumnsChanged:e,displayedColumnsWidthChanged:e}),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=Ts(this.gos,"print"),t=e?0:this.visibleColsService.getColsLeftWidth(),i=e?0:this.visibleColsService.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:"leftPinnedWidthChanged"})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:"rightPinnedWidthChanged"}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}},dY=class extends de{constructor(){super(...arguments),this.additionalFocusableContainers=new Set}wireBeans(e){this.beans=e,this.focusService=e.focusService,this.visibleColsService=e.visibleColsService}setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.beans.context.getGridId());const{dragAndDropService:s,mouseEventService:n,ctrlsService:r,resizeObserverService:o}=this.beans,a={getContainer:()=>this.eGui,isInterestedIn:c=>c===1||c===0,getIconName:()=>"notAllowed"};s.addDropTarget(a),this.addDestroyFunc(()=>s.removeDropTarget(a)),n.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new U0(this.view)),this.view.setRtlClass(this.gos.get("enableRtl")?"ag-rtl":"ag-ltr"),this.updateGridThemeClass(),this.addManagedEventListeners({gridStylesChanged:this.handleThemeChange.bind(this)});const l=o.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>l()),r.register("gridCtrl",this)}isDetailGrid(){var t;const e=this.focusService.findTabbableParent(this.getGui());return((t=e==null?void 0:e.getAttribute("row-id"))==null?void 0:t.startsWith("detail"))||!1}getOptionalSelectors(){var t,i,s,n,r;const e=this.beans;return{paginationSelector:(t=e.paginationService)==null?void 0:t.getPaginationSelector(),gridHeaderDropZonesSelector:(i=e.columnDropZonesService)==null?void 0:i.getDropZoneSelector(),sideBarSelector:(s=e.sideBarService)==null?void 0:s.getSideBarSelector(),statusBarSelector:(n=e.statusBarService)==null?void 0:n.getStatusPanelSelector(),watermarkSelector:(r=e.licenseManager)==null?void 0:r.getWatermarkSelector()}}onGridSizeChanged(){this.eventService.dispatchEvent({type:"gridSizeChanged",clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.getFocusableContainers(),{indexWithFocus:i,nextIndex:s}=this.getNextFocusableIndex(t,e);if(s<0||s>=t.length)return!1;if(s===0){if(i>0){const n=this.visibleColsService.getAllCols(),r=At(n);if(this.focusService.focusGridView(r,!0))return!0}return!1}return this.focusContainer(t[s],e)}focusInnerElement(e){const t=this.gos.getCallback("focusGridInnerElement");if(t&&t({fromBottom:!!e}))return!0;const i=this.getFocusableContainers(),s=this.visibleColsService.getAllCols();if(e){if(i.length>1)return this.focusContainer(At(i),!0);const n=At(s);if(this.focusService.focusGridView(n,!0))return!0}if(this.gos.get("headerHeight")===0||this.focusService.isHeaderFocusSuppressed()){if(this.focusService.focusGridView(s[0]))return!0;for(let n=1;n<i.length;n++)if(this.focusService.focusInto(i[n].getGui()))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}addFocusableContainer(e){this.additionalFocusableContainers.add(e)}removeFocusableContainer(e){this.additionalFocusableContainers.delete(e)}allowFocusForNextCoreContainer(e){var r;const t=this.view.getFocusableContainers(),{nextIndex:i,indexWithFocus:s}=this.getNextFocusableIndex(t,e);if(s===-1||i<0||i>=t.length)return;const n=t[i];(r=n.setAllowFocus)==null||r.call(n,!0),setTimeout(()=>{var o;(o=n.setAllowFocus)==null||o.call(n,!1)})}getNextFocusableIndex(e,t){const i=_i(this.gos),s=e.findIndex(r=>r.getGui().contains(i)),n=s+(t?-1:1);return{indexWithFocus:s,nextIndex:n}}focusContainer(e,t){var s,n;(s=e.setAllowFocus)==null||s.call(e,!0);const i=this.focusService.focusInto(e.getGui(),t);return(n=e.setAllowFocus)==null||n.call(e,!1),i}getFocusableContainers(){return[...this.view.getFocusableContainers(),...this.additionalFocusableContainers]}updateGridThemeClass(){const e=this.beans.environment.getGridThemeClass();e&&this.view.setGridThemeClass(e)}handleThemeChange(e){e.themeChanged&&this.updateGridThemeClass()}destroy(){this.additionalFocusableContainers.clear(),super.destroy()}},pY=class extends de{constructor(){super(...arguments),this.beanName="alignedGridsService",this.consuming=!1}wireBeans(e){this.columnModel=e.columnModel,this.columnSizeService=e.columnSizeService,this.ctrlsService=e.ctrlsService,this.columnApplyStateService=e.columnApplyStateService}getAlignedGridApis(){let e=this.gos.get("alignedGrids")??[];const t=typeof e=="function";typeof e=="function"&&(e=e());const i=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return e.map(n=>{var o;if(!n){Ut("alignedGrids contains an undefined option."),t||Ut(`You may want to configure via a callback to avoid setup race conditions:
                     "alignedGrids: () => [linkedGrid]"`),Ut(i());return}if(this.isGridApi(n))return n;const r=n;return"current"in r?(o=r.current)==null?void 0:o.api:(r.api||Ut(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${i()}`),r.api)}).filter(n=>!!n&&!n.isDestroyed())}isGridApi(e){return!!e&&!!e.dispatchEvent}postConstruct(){const e=this.fireColumnEvent.bind(this);this.addManagedEventListeners({columnMoved:e,columnVisible:e,columnPinned:e,columnGroupOpened:e,columnResized:e,bodyScroll:this.fireScrollEvent.bind(this),alignedGridColumn:({event:t})=>this.onColumnEvent(t),alignedGridScroll:({event:t})=>this.onScrollEvent(t)})}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{t.isDestroyed()||t.dispatchEvent(e)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent({type:"alignedGridColumn",event:e})}fireScrollEvent(e){e.direction==="horizontal"&&this.fireEvent({type:"alignedGridScroll",event:e})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}extractDataFromEvent(e,t){const i=[];return e.columns?e.columns.forEach(s=>{i.push(t(s))}):e.column&&i.push(t(e.column)),i}getMasterColumns(e){return this.extractDataFromEvent(e,t=>t)}getColumnIds(e){return this.extractDataFromEvent(e,t=>t.getColId())}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case"columnMoved":case"columnVisible":case"columnPinned":case"columnResized":{this.processColumnEvent(e);break}case"columnGroupOpened":{this.processGroupOpenedEvent(e);break}case"columnPivotChanged":we("pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.");break}})}processGroupOpenedEvent(e){const{columnModel:t}=this;e.columnGroups.forEach(i=>{let s=null;i&&(s=t.getProvidedColGroup(i.getGroupId())),!(i&&!s)&&t.setColumnGroupOpened(s,i.isExpanded(),"alignedGridChanged")})}processColumnEvent(e){var c;const t=e.column;let i=null;if(t&&(i=this.columnModel.getColDefCol(t.getColId())),t&&!i)return;const s=this.getMasterColumns(e),{columnApplyStateService:n,columnSizeService:r,ctrlsService:o}=this;switch(e.type){case"columnMoved":{const g=e.api.getColumnState().map(f=>({colId:f.colId}));n.applyColumnState({state:g,applyOrder:!0},"alignedGridChanged")}break;case"columnVisible":{const g=e.api.getColumnState().map(f=>({colId:f.colId,hide:f.hide}));n.applyColumnState({state:g},"alignedGridChanged")}break;case"columnPinned":{const g=e.api.getColumnState().map(f=>({colId:f.colId,pinned:f.pinned}));n.applyColumnState({state:g},"alignedGridChanged")}break;case"columnResized":{const p=e,g={};s.forEach(f=>{g[f.getId()]={key:f.getColId(),newWidth:f.getActualWidth()}}),(c=p.flexColumns)==null||c.forEach(f=>{g[f.getId()]&&delete g[f.getId()]}),r.setColumnWidths(Object.values(g),!1,p.finished,"alignedGridChanged");break}}const l=o.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(p=>{p.setGridOption("alwaysShowVerticalScroll",l)})}},gY={version:ct,moduleName:"@ag-grid-community/aligned-grid",beans:[pY]};function fY(e,t){const i=e.columnModel.getColDefCol(t);return i?i.getColDef():null}function mY(e){return e.columnModel.getColumnDefs()}function vY(e,t){typeof t=="number"?e.columnSizeService.sizeColumnsToFit(t,"api"):e.ctrlsService.getGridBodyCtrl().sizeColumnsToFit(t)}function yY(e,t,i){e.columnModel.setColumnGroupOpened(t,i,"api")}function CY(e,t,i){return e.visibleColsService.getColumnGroup(t,i)}function SY(e,t){return e.columnModel.getProvidedColGroup(t)}function wY(e,t,i){return e.columnNameService.getDisplayNameForColumn(t,i)||""}function xY(e,t,i){return e.columnNameService.getDisplayNameForColumnGroup(t,i)||""}function bY(e,t){return e.columnModel.getColDefCol(t)}function MY(e){return e.columnModel.getColDefCols()}function RY(e,t){return e.columnApplyStateService.applyColumnState(t,"api")}function DY(e){return e.columnGetStateService.getColumnState()}function EY(e){e.columnApplyStateService.resetColumnState("api")}function IY(e){return e.columnGroupStateService.getColumnGroupState()}function LY(e,t){e.columnGroupStateService.setColumnGroupState(t,"api")}function TY(e){e.columnGroupStateService.resetColumnGroupState("api")}function AY(e){return e.visibleColsService.isPinningLeft()||e.visibleColsService.isPinningRight()}function PY(e){return e.visibleColsService.isPinningLeft()}function FY(e){return e.visibleColsService.isPinningRight()}function kY(e,t){return e.visibleColsService.getColAfter(t)}function NY(e,t){return e.visibleColsService.getColBefore(t)}function OY(e,t,i){e.columnModel.setColsVisible([t],i,"api")}function _Y(e,t,i){e.columnModel.setColsVisible(t,i,"api")}function BY(e,t,i){e.columnModel.setColsPinned([t],i,"api")}function GY(e,t,i){e.columnModel.setColsPinned(t,i,"api")}function zY(e){return e.columnModel.getCols()}function HY(e){return e.visibleColsService.getLeftCols()}function VY(e){return e.visibleColsService.getCenterCols()}function WY(e){return e.visibleColsService.getRightCols()}function jY(e){return e.visibleColsService.getAllCols()}function UY(e){return e.columnViewportService.getViewportColumns()}function KY(e,t,i){e.columnMoveService.moveColumns([t],i,"api")}function YY(e,t,i){e.columnMoveService.moveColumnByIndex(t,i,"api")}function $Y(e,t,i){e.columnMoveService.moveColumns(t,i,"api")}function ZY(e,t,i,s=!0,n="api"){e.columnSizeService.setColumnWidths([{key:t,newWidth:i}],!1,s,n)}function XY(e,t,i=!0,s="api"){e.columnSizeService.setColumnWidths(t,!1,i,s)}function QY(e){return e.visibleColsService.getTreeLeft()}function qY(e){return e.visibleColsService.getTreeCenter()}function JY(e){return e.visibleColsService.getTreeRight()}function e$(e){return e.visibleColsService.getAllTrees()}function t$(e,t,i){return e.columnAutosizeService.autoSizeCols({colKeys:[t],skipHeader:i,source:"api"})}function i$(e,t,i){e.columnAutosizeService.autoSizeCols({colKeys:t,skipHeader:i,source:"api"})}function s$(e,t){e.columnAutosizeService.autoSizeAllColumns("api",t)}var n$=class extends de{constructor(){super(...arguments),this.beanName="dataTypeService",this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}wireBeans(e){this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.columnApplyStateService=e.columnApplyStateService,this.filterManager=e.filterManager}postConstruct(){this.groupHideOpenParents=this.gos.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gos.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(eh(e.source))})}processDataTypeDefinitions(){const e=this.getDefaultDataTypes();this.dataTypeDefinitions={},this.formatValueFuncs={};const t=s=>n=>{const{column:r,node:o,value:a}=n;let l=r.getColDef().valueFormatter;return l===s.groupSafeValueFormatter&&(l=s.valueFormatter),this.valueService.formatValue(r,o,a,l)};Object.entries(e).forEach(([s,n])=>{const r={...n,groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)};this.dataTypeDefinitions[s]=r,this.formatValueFuncs[s]=t(r)});const i=this.gos.get("dataTypeDefinitions")??{};this.dataTypeMatchers={},Object.entries(i).forEach(([s,n])=>{const r=this.processDataTypeDefinition(n,i,[s],e);r&&(this.dataTypeDefinitions[s]=r,n.dataTypeMatcher&&(this.dataTypeMatchers[s]=n.dataTypeMatcher),this.formatValueFuncs[s]=t(r))}),this.checkObjectValueHandlers(e),["dateString","text","number","boolean","date"].forEach(s=>{const n=this.dataTypeMatchers[s];n&&delete this.dataTypeMatchers[s],this.dataTypeMatchers[s]=n??e[s].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){const i={...e,...t};return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...fy(e.columnTypes),...fy(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,s){let n;const r=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let o=s[r];const a=t[r];if(o&&a&&(o=a),!this.validateDataTypeDefinition(e,o,r))return;n=this.mergeDataTypeDefinitions(o,e)}else{if(i.includes(r)){we('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');return}const o=t[r];if(!this.validateDataTypeDefinition(e,o,r))return;const a=this.processDataTypeDefinition(o,t,[...i,r],s);if(!a)return;n=this.mergeDataTypeDefinitions(a,e)}return{...n,groupSafeValueFormatter:this.createGroupSafeValueFormatter(n)}}validateDataTypeDefinition(e,t,i){return t?t.baseDataType!==e.baseDataType?(we('The "baseDataType" property of a data type definition must match that of its parent.'),!1):!0:(we(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{var i,s;if((i=t.node)!=null&&i.group){const n=(t.colDef.pivotValueColumn??t.column).getAggFunc();if(n){if(n==="first"||n==="last")return e.valueFormatter(t);if(e.baseDataType==="number"&&n!=="count"){if(typeof t.value=="number")return e.valueFormatter(t);if(typeof t.value=="object"){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter({...t,value:t.value.toNumber()});if("value"in t.value)return e.valueFormatter({...t,value:t.value.value})}}return}if((this.gos.get("suppressGroupMaintainValueType")||this.gos.get("groupDisplayType")==="groupRows")&&!this.gos.get("treeData"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()&&typeof t.value=="string"&&!((s=e.dataTypeMatcher)!=null&&s.call(e,t.value)))return;return e.valueFormatter(t)}}updateColDefAndGetColumnType(e,t,i){let{cellDataType:s}=t;const{field:n}=t;if(s===void 0&&(s=e.cellDataType),(s==null||s===!0)&&(s=this.canInferCellDataType(e,t)?this.inferCellDataType(n,i):!1),!s){e.cellDataType=!1;return}const r=this.dataTypeDefinitions[s];if(!r){we(`Missing data type definition - "${s}"`);return}return e.cellDataType=s,r.groupSafeValueFormatter&&(e.valueFormatter=r.groupSafeValueFormatter),r.valueParser&&(e.valueParser=r.valueParser),r.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,s,r,i),r.columnTypes}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=s=>{t.add(s.key)};e.addEventListener("columnStateUpdated",i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener("columnStateUpdated",i))}canInferCellDataType(e,t){if(!xi(this.gos))return!1;const i={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,i))return!1;const s=t.type===null?e.type:t.type;if(s){const n=this.gos.get("columnTypes")??{};if(fy(s).some(o=>{const a=n[o.trim()];return a&&this.doColDefPropsPreventInference(a,i)}))return!1}return!this.doColDefPropsPreventInference(e,i)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,s])=>this.doesColDefPropPreventInference(e,t,i,s))}doesColDefPropPreventInference(e,t,i,s){if(!t[i])return!1;const n=e[i];return n===null?(t[i]=!1,!1):s===void 0?!!n:n===s}inferCellDataType(e,t){if(!e)return;let i;const s=this.getInitialData();if(s){const r=e.indexOf(".")>=0&&!this.gos.get("suppressFieldDotNotation");i=qg(s,e,r)}else this.initWaitForRowData(t);if(i==null)return;const[n]=Object.entries(this.dataTypeMatchers).find(([r,o])=>o(i))??["object"];return n}getInitialData(){const e=this.gos.get("rowData");if(e!=null&&e.length)return e[0];if(this.initialData)return this.initialData;{const t=this.rowModel.getRootNode().allLeafChildren;if(t!=null&&t.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const[i]=this.addManagedEventListeners({rowDataUpdateStarted:s=>{const{firstRowData:n}=s;n&&(i==null||i(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(n,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:"dataTypesInferred"}))}})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.destroyColumnStateUpdateListeners();const s={},n={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([r,o])=>{const a=this.columnModel.getCol(r);if(!a)return;const l=a.getColDef();if(!this.columnModel.resetColDefIntoCol(a,"cellDataTypeInferred"))return;const c=a.getColDef();if(t&&c.type&&c.type!==l.type){const p=this.getUpdatedColumnState(a,o);p.rowGroup&&p.rowGroupIndex==null&&(s[r]=p),p.pivot&&p.pivotIndex==null&&(n[r]=p),i.push(p)}}),t&&i.push(...this.funcColsService.generateColumnStateForRowGroupAndPivotIndexes(s,n)),i.length&&this.columnApplyStateService.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const i=this.columnApplyStateService.getColumnStateFromColDef(e);return t.forEach(s=>{delete i[s],s==="rowGroup"?delete i.rowGroupIndex:s==="pivot"&&delete i.pivotIndex}),i}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}getDateStringTypeDefinition(e){return e?this.getDataTypeDefinition(e)??this.dataTypeDefinitions.dateString:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return(t=this.getDataTypeDefinition(e))==null?void 0:t.baseDataType}checkType(e,t){var s;if(t==null)return!0;const i=(s=this.getDataTypeDefinition(e))==null?void 0:s.dataTypeMatcher;return i?i(t):!0}validateColDef(e){const t=i=>we(`Cell data type is "object" but no Value ${i} has been provided. Please either provide an object data type definition with a Value ${i}, or set "colDef.value${i}"`);e.cellDataType==="object"&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&t("Formatter"),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&t("Parser"))}getFormatValue(e){return this.formatValueFuncs[e]}setColDefPropertiesForBaseDataType(e,t,i,s){var r;const n=this.formatValueFuncs[t];switch(i.baseDataType){case"number":{e.cellEditor="agNumberCellEditor";break}case"boolean":{e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=o=>!!o.colDef.editable&&o.event.key===le.SPACE;break}case"date":{e.cellEditor="agDateCellEditor",e.keyCreator=n;break}case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=n;break}case"object":{e.cellEditorParams={useFormatter:!0},e.comparator=(o,a)=>{const l=this.columnModel.getColDefCol(s),c=l==null?void 0:l.getColDef();if(!l||!c)return 0;const p=o==null?"":n({column:l,node:null,value:o}),g=a==null?"":n({column:l,node:null,value:a});return p===g?0:p>g?1:-1},e.keyCreator=n;break}}(r=this.filterManager)==null||r.setColDefPropertiesForDataType(e,i,n)}getDefaultDataTypes(){const e=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>{var s,n;return((n=(s=i.newValue)==null?void 0:s.trim)==null?void 0:n.call(s))===""?null:Number(i.newValue)},valueFormatter:i=>i.value==null?"":typeof i.value!="number"||isNaN(i.value)?t("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>typeof i=="number"},text:{baseDataType:"text",valueParser:i=>i.newValue===""?null:Gb(i.newValue),dataTypeMatcher:i=>typeof i=="string"},boolean:{baseDataType:"boolean",valueParser:i=>{var s,n;return i.newValue==null?i.newValue:((n=(s=i.newValue)==null?void 0:s.trim)==null?void 0:n.call(s))===""?null:String(i.newValue).toLowerCase()==="true"},valueFormatter:i=>i.value==null?"":String(i.value),dataTypeMatcher:i=>typeof i=="boolean"},date:{baseDataType:"date",valueParser:i=>Hn(i.newValue==null?null:String(i.newValue)),valueFormatter:i=>i.value==null?"":!(i.value instanceof Date)||isNaN(i.value.getTime())?t("invalidDate","Invalid Date"):Kr(i.value,!1)??"",dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>Hn(i)??void 0,dateFormatter:i=>Kr(i??null,!1)??void 0,valueParser:i=>e(String(i.newValue))?i.newValue:null,valueFormatter:i=>e(String(i.value))?i.value:"",dataTypeMatcher:i=>typeof i=="string"&&e(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>Gb(i.value)??""}}}destroyColumnStateUpdateListeners(){this.columnStateUpdateListenerDestroyFuncs.forEach(e=>e()),this.columnStateUpdateListenerDestroyFuncs=[]}destroy(){this.dataTypeDefinitions={},this.dataTypeMatchers={},this.formatValueFuncs={},this.columnStateUpdatesPendingInference={},this.destroyColumnStateUpdateListeners(),super.destroy()}},r$={version:ct,moduleName:"@ag-grid-community/data-type",beans:[n$]},o$={version:ct,moduleName:"@ag-grid-community/column-api",apiFunctions:{getColumnDef:fY,getColumnDefs:mY,sizeColumnsToFit:vY,setColumnGroupOpened:yY,getColumnGroup:CY,getProvidedColumnGroup:SY,getDisplayNameForColumn:wY,getDisplayNameForColumnGroup:xY,getColumn:bY,getColumns:MY,applyColumnState:RY,getColumnState:DY,resetColumnState:EY,getColumnGroupState:IY,setColumnGroupState:LY,resetColumnGroupState:TY,isPinning:AY,isPinningLeft:PY,isPinningRight:FY,getDisplayedColAfter:kY,getDisplayedColBefore:NY,setColumnVisible:OY,setColumnsVisible:_Y,setColumnPinned:BY,setColumnsPinned:GY,getAllGridColumns:zY,getDisplayedLeftColumns:HY,getDisplayedCenterColumns:VY,getDisplayedRightColumns:WY,getAllDisplayedColumns:jY,getAllDisplayedVirtualColumns:UY,moveColumn:KY,moveColumnByIndex:YY,moveColumns:$Y,setColumnWidth:ZY,setColumnWidths:XY,getLeftDisplayedColumnGroups:QY,getCenterDisplayedColumnGroups:qY,getRightDisplayedColumnGroups:JY,getAllDisplayedColumnGroups:e$,autoSizeColumn:t$,autoSizeColumns:i$,autoSizeAllColumns:s$}};function a$(e,t){e.ctrlsService.getGridBodyCtrl().getRowDragFeature().addRowDropZone(t)}function l$(e,t){const i=e.dragAndDropService.findExternalZone(t);i&&e.dragAndDropService.removeDropTarget(i)}function c$(e,t){return e.ctrlsService.getGridBodyCtrl().getRowDragFeature().getRowDropZone(t)}var u$={version:ct,moduleName:"@ag-grid-community/drag-api",apiFunctions:{addRowDropZone:a$,removeRowDropZone:l$,getRowDropZoneParams:c$}};function h$(e){return e.pinnedRowModel.getPinnedTopRowCount()}function d$(e){return e.pinnedRowModel.getPinnedBottomRowCount()}function p$(e,t){return e.pinnedRowModel.getPinnedTopRow(t)}function g$(e,t){return e.pinnedRowModel.getPinnedBottomRow(t)}var f$={version:ct,moduleName:"@ag-grid-community/pinned-row-api",apiFunctions:{getPinnedTopRowCount:h$,getPinnedBottomRowCount:d$,getPinnedTopRow:p$,getPinnedBottomRow:g$}};function m$(e){e.overlayService.showLoadingOverlay()}function v$(e){e.overlayService.showNoRowsOverlay()}function y$(e){e.overlayService.hideOverlay()}var C$={version:ct,moduleName:"@ag-grid-community/overlay-api",apiFunctions:{showLoadingOverlay:m$,showNoRowsOverlay:v$,hideOverlay:y$}};function S$(e,t,i){if(!t)return;const s=e.ctrlsService.getGridBodyCtrl().getGui(),n=`aria-${t}`;i===null?s.removeAttribute(n):s.setAttribute(n,i)}function w$(e,t={}){e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.refreshCells(t))}function x$(e,t={}){const i=s=>we(`Since v31.1 api.flashCells parameter '${s}Delay' is deprecated. Please use '${s}Duration' instead.`);Ae(t.fadeDelay)&&i("fade"),Ae(t.flashDelay)&&i("flash"),e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.flashCells(t))}function b$(e){e.frameworkOverrides.wrapIncoming(()=>e.ctrlsService.getHeaderRowContainerCtrls().forEach(t=>t.refresh()))}function M$(e){return e.animationFrameService.isQueueEmpty()}function R$(e){e.animationFrameService.flushAllFrames()}function D$(e){return{rowHeight:uh(e.gos),headerHeight:e.columnModel.getHeaderHeight()}}function E$(e,t={}){return e.rowRenderer.getCellRendererInstances(t).map(ef)}var I$={version:ct,moduleName:"@ag-grid-community/render-api",apiFunctions:{setGridAriaProperty:S$,refreshCells:w$,flashCells:x$,refreshHeader:b$,isAnimationFrameQueueEmpty:M$,flushAllAnimationFrames:R$,getSizesForCurrentTheme:D$,getCellRendererInstances:E$}};function L$(e){e.valueCache.expire()}function T$(e,t,i){return Qk(e,{colKey:t,rowNode:i})}function Qk(e,t){const{colKey:i,rowNode:s,useFormatter:n}=t,r=e.columnModel.getColDefCol(i)??e.columnModel.getCol(i);if(Pt(r))return null;const o=e.valueService.getValueForDisplay(r,s);return n?e.valueService.formatValue(r,s,o)??la(o,!0):o}function A$(e){return e.context.getGridId()}function P$(e){e.gridDestroyService.destroy()}function F$(e){return e.gridDestroyService.isDestroyCalled()}function k$(e,t){return e.gos.get(t)}function N$(e,t,i){qk(e,{[t]:i})}function qk(e,t){e.gos.updateGridOptions({options:t})}function O$(e,t,i){e.apiEventService.addEventListener(t,i)}function _$(e,t,i){e.apiEventService.removeEventListener(t,i)}function B$(e,t){e.apiEventService.addGlobalListener(t)}function G$(e,t){e.apiEventService.removeGlobalListener(t)}function z$(e){return e.focusService.getFocusedCell()}function H$(e){return e.focusService.clearFocusedCell()}function V$(e,t,i,s){e.focusService.setFocusedCell({rowIndex:t,column:i,rowPinned:s,forceBrowserFocus:!0})}function W$(e,t){return e.navigationService.tabToNextCell(!1,t)}function j$(e,t){return e.navigationService.tabToNextCell(!0,t)}function U$(e,t,i=!1){const s=e.headerNavigationService.getHeaderPositionForColumn(t,i);s&&e.focusService.focusHeaderPosition({headerPosition:s})}function K$(e,t,i){const s=e.columnModel.getCol(t);e.menuService.showColumnMenu({column:s,buttonElement:i,positionBy:"button"})}function Y$(e,t,i){let s=e.columnModel.getCol(t);if(s||(s=e.columnModel.getColDefCol(t)),!s){Ut(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:s,mouseEvent:i,positionBy:"mouse"})}function $$(e,t){const i=e.columnModel.getCol(t);if(!i){Ut(`column '${t}' not found`);return}e.menuService.showColumnMenu({column:i,positionBy:"auto"})}function Z$(e){e.menuService.hidePopupMenu()}function X$(e,t={}){const i=t?t.rowNodes:void 0;e.frameworkOverrides.wrapIncoming(()=>e.rowRenderer.redrawRows(i))}function Q$(e,t,i,s,n){e.expansionService.setRowNodeExpanded(t,i,s,n)}function q$(e,t){return e.rowModel.getRowNode(t)}function J$(e,t,i,s){e.rowRenderer.addRenderedRowListener(t,i,s)}function e5(e){return e.rowRenderer.getRenderedNodes()}function t5(e,t,i){e.rowModel.forEachNode(t,i)}function i5(e){return Jk(e)}function Jk(e){return e.rowRenderer.getFirstVirtualRenderedRow()}function s5(e){return eN(e)}function eN(e){return e.rowRenderer.getLastVirtualRenderedRow()}function n5(e,t){return e.rowModel.getRow(t)}function r5(e){return e.rowModel.getRowCount()}function o5(e){return e.rowModel}function a5(e,t){if(!t.nodes.every(a=>a.rowPinned?(we("cannot select pinned rows"),!1):a.id===void 0?(we("cannot select node until id for node is known"),!1):!0))return;const{nodes:s,source:n,newValue:r}=t,o=s;e.selectionService.setNodesSelected({nodes:o,source:n??"api",newValue:r})}function l5(e,t="apiSelectAll"){e.selectionService.selectAllRowNodes({source:t})}function c5(e,t="apiSelectAll"){e.selectionService.deselectAllRowNodes({source:t})}function u5(e,t="apiSelectAllFiltered"){e.selectionService.selectAllRowNodes({source:t,justFiltered:!0})}function h5(e,t="apiSelectAllFiltered"){e.selectionService.deselectAllRowNodes({source:t,justFiltered:!0})}function d5(e,t="apiSelectAllCurrentPage"){e.selectionService.selectAllRowNodes({source:t,justCurrentPage:!0})}function p5(e,t="apiSelectAllCurrentPage"){e.selectionService.deselectAllRowNodes({source:t,justCurrentPage:!0})}function g5(e){return e.selectionService.getSelectedNodes()}function f5(e){return e.selectionService.getSelectedRows()}function m5(e){e.sortController.onSortChanged("api")}var v5={version:ct,moduleName:"@ag-grid-community/core-api",apiFunctions:{getGridId:A$,destroy:P$,isDestroyed:F$,getGridOption:k$,setGridOption:N$,updateGridOptions:qk}},y5={version:ct,moduleName:"@ag-grid-community/row-selection-api",apiFunctions:{setNodesSelected:a5,selectAll:l5,deselectAll:c5,selectAllFiltered:u5,deselectAllFiltered:h5,selectAllOnCurrentPage:d5,deselectAllOnCurrentPage:p5,getSelectedNodes:g5,getSelectedRows:f5}},C5={version:ct,moduleName:"@ag-grid-community/row-api",apiFunctions:{redrawRows:X$,setRowNodeExpanded:Q$,getRowNode:q$,addRenderedRowListener:J$,getRenderedNodes:e5,forEachNode:t5,getFirstDisplayedRow:i5,getFirstDisplayedRowIndex:Jk,getLastDisplayedRow:s5,getLastDisplayedRowIndex:eN,getDisplayedRowAtIndex:n5,getDisplayedRowCount:r5,getModel:o5}},S5={version:ct,moduleName:"@ag-grid-community/scroll-api",apiFunctions:{getVerticalPixelRange:rK,getHorizontalPixelRange:oK,ensureColumnVisible:Uk,ensureIndexVisible:Kk,ensureNodeVisible:aK}},w5={version:ct,moduleName:"@ag-grid-community/keyboard-navigation-api",apiFunctions:{getFocusedCell:z$,clearFocusedCell:H$,setFocusedCell:V$,setFocusedHeader:U$,tabToNextCell:W$,tabToPreviousCell:j$}},x5={version:ct,moduleName:"@ag-grid-community/event-api",apiFunctions:{addEventListener:O$,addGlobalListener:B$,removeEventListener:_$,removeGlobalListener:G$}},b5={version:ct,moduleName:"@ag-grid-community/cell-api",apiFunctions:{expireValueCache:L$,getValue:T$,getCellValue:Qk}},M5={version:ct,moduleName:"@ag-grid-community/menu-api",apiFunctions:{showColumnMenuAfterButtonClick:K$,showColumnMenuAfterMouseClick:Y$,showColumnMenu:$$,hidePopupMenu:Z$}},R5={version:ct,moduleName:"@ag-grid-community/sort-api",apiFunctions:{onSortChanged:m5}},D5={version:ct,moduleName:"@ag-grid-community/api",dependantModules:[v5,f$,y5,o$,C5,u$,S5,C$,w5,x5,I$,b5,M5,R5]};function E5(e){var t;return((t=e.stateService)==null?void 0:t.getState())??{}}function I5(e){switch(e={...e},e.version||(e.version="32.1.0"),e.version){case"32.1.0":e=L5(e)}return e}function L5(e){return e.cellSelection=T5(e,"rangeSelection"),e}function T5(e,t){if(e&&typeof e=="object")return e[t]}var A5=class extends de{constructor(){super(...arguments),this.beanName="stateService",this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=Cn(()=>this.dispatchQueuedStateUpdateEvents(),0),this.onRowGroupOpenedDebounced=Cn(()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),0),this.onRowSelectedDebounced=Cn(()=>{this.staleStateKeys.delete("rowSelection"),this.updateCachedState("rowSelection",this.getRowSelectionState())},0),this.staleStateKeys=new Set}wireBeans(e){this.filterManager=e.filterManager,this.ctrlsService=e.ctrlsService,this.pivotResultColsService=e.pivotResultColsService,this.focusService=e.focusService,this.columnModel=e.columnModel,this.visibleColsService=e.visibleColsService,this.columnGroupStateService=e.columnGroupStateService,this.columnGetStateService=e.columnGetStateService,this.paginationService=e.paginationService,this.selectionService=e.selectionService,this.expansionService=e.expansionService,this.columnAnimationService=e.columnAnimationService,this.columnApplyStateService=e.columnApplyStateService,this.sideBarService=e.sideBarService,this.rangeService=e.rangeService}postConstruct(){this.isClientSideRowModel=xi(this.gos),this.cachedState=this.getInitialState(),this.setCachedStateValue("version",ct),this.ctrlsService.whenReady(this,()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const[e,t,i]=this.addManagedEventListeners({newColumnsLoaded:({source:s})=>{s==="gridInitializing"&&(e(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))},rowCountReady:()=>{t==null||t(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())},firstDataRendered:()=>{i==null||i(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())}})}getInitialState(){return I5(this.gos.get("initialState")??{})}getState(){return this.staleStateKeys.size&&this.refreshStaleState(),this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState());const e=()=>this.updateCachedState("sideBar",this.getSideBarState());this.addManagedEventListeners({toolPanelVisibleChanged:e,sideBarUpdated:e})}setupStateOnColumnsInitialised(){const e=this.getInitialState();this.setColumnState(e),this.setColumnGroupState(e),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState());const t=i=>()=>this.updateColumnState([i]);this.addManagedEventListeners({columnValueChanged:t("aggregation"),columnMoved:t("columnOrder"),columnPinned:t("columnPinning"),columnResized:t("columnSizing"),columnVisible:t("columnVisibility"),columnPivotChanged:t("pivot"),columnPivotModeChanged:t("pivot"),columnRowGroupChanged:t("rowGroup"),sortChanged:t("sort"),newColumnsLoaded:()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","rowGroup","sort"]),columnGroupOpened:()=>this.updateCachedState("columnGroup",this.getColumnGroupState())})}setupStateOnRowCountReady(){const{filter:e,rowGroupExpansion:t,rowSelection:i,pagination:s}=this.getInitialState(),n=this.gos.get("advancedFilterModel");(e||n)&&this.setFilterState(e,n),t&&this.setRowGroupExpansionState(t),i&&this.setRowSelectionState(i),s&&this.setPaginationState(s),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState());const r=()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState());this.addManagedEventListeners({filterChanged:()=>this.updateCachedState("filter",this.getFilterState()),rowGroupOpened:()=>this.onRowGroupOpenedDebounced(),expandOrCollapseAll:r,columnRowGroupChanged:r,rowDataUpdated:()=>{this.gos.get("groupDefaultExpanded")!==0&&setTimeout(()=>{r()})},selectionChanged:()=>{this.staleStateKeys.add("rowSelection"),this.onRowSelectedDebounced()},paginationChanged:o=>{(o.newPage||o.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())}})}setupStateOnFirstDataRendered(){const{scroll:e,cellSelection:t,focusedCell:i,columnOrder:s}=this.getInitialState();i&&this.setFocusedCellState(i),t&&this.setCellSelectionState(t),e&&this.setScrollState(e),this.setColumnPivotState(!!(s!=null&&s.orderedColIds)),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState());const n=this.getRangeSelectionState();this.updateCachedState("rangeSelection",n),this.updateCachedState("cellSelection",n),this.updateCachedState("scroll",this.getScrollState()),this.addManagedEventListeners({cellFocused:()=>this.updateCachedState("focusedCell",this.getFocusedCellState()),cellSelectionChanged:r=>{if(r.finished){const o=this.getRangeSelectionState();this.updateCachedState("rangeSelection",o),this.updateCachedState("cellSelection",o)}},bodyScrollEnd:()=>this.updateCachedState("scroll",this.getScrollState())})}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],i=[],s=[],n=[],r=[],o=[],a=[],l=[],c=[];let p=0;const g=this.columnGetStateService.getColumnState();for(let f=0;f<g.length;f++){const{colId:y,sort:C,sortIndex:x,rowGroup:M,rowGroupIndex:b,aggFunc:R,pivot:I,pivotIndex:P,pinned:k,hide:_,width:B,flex:H}=g[f];c.push(y),C&&(t[x??p++]={colId:y,sort:C}),M&&(i[b??0]=y),typeof R=="string"&&s.push({colId:y,aggFunc:R}),I&&(n[P??0]=y),k&&(k==="right"?o:r).push(y),_&&a.push(y),(H||B)&&l.push({colId:y,flex:H??void 0,width:B})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:s.length?{aggregationModel:s}:void 0,pivot:n.length||e?{pivotMode:e,pivotColIds:n}:void 0,columnPinning:r.length||o.length?{leftColIds:r,rightColIds:o}:void 0,columnVisibility:a.length?{hiddenColIds:a}:void 0,columnSizing:l.length?{columnSizingModel:l}:void 0,columnOrder:c.length?{orderedColIds:c}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:s,pivot:n,columnPinning:r,columnVisibility:o,columnSizing:a,columnOrder:l,partialColumnState:c}=e,p={},g=M=>{let b=p[M];return b||(b={colId:M},p[M]=b,b)},f=c?{}:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null};t&&(t.sortModel.forEach(({colId:M,sort:b},R)=>{const I=g(M);I.sort=b,I.sortIndex=R}),f.sort=null,f.sortIndex=null),i&&(i.groupColIds.forEach((M,b)=>{const R=g(M);R.rowGroup=!0,R.rowGroupIndex=b}),f.rowGroup=null,f.rowGroupIndex=null),s&&(s.aggregationModel.forEach(({colId:M,aggFunc:b})=>{g(M).aggFunc=b}),f.aggFunc=null),n&&(n.pivotColIds.forEach((M,b)=>{const R=g(M);R.pivot=!0,R.pivotIndex=b}),this.gos.updateGridOptions({options:{pivotMode:n.pivotMode},source:"gridInitializing"}),f.pivot=null,f.pivotIndex=null),r&&(r.leftColIds.forEach(M=>{g(M).pinned="left"}),r.rightColIds.forEach(M=>{g(M).pinned="right"}),f.pinned=null),o&&(o.hiddenColIds.forEach(M=>{g(M).hide=!0}),f.hide=null),a&&(a.columnSizingModel.forEach(({colId:M,flex:b,width:R})=>{const I=g(M);I.flex=b??null,I.width=R}),f.flex=null);const y=l==null?void 0:l.orderedColIds,C=!!(y!=null&&y.length),x=C?y.map(M=>g(M)):Object.values(p);x.length&&(this.columnStates=x,this.columnApplyStateService.applyColumnState({state:x,applyOrder:C,defaultState:f},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;if(this.columnGroupStates=void 0,!!this.pivotResultColsService.isPivotResultColsPresent()){if(t){const s=[];for(const n of t)this.pivotResultColsService.getPivotResultCol(n.colId)&&s.push(n);this.columnApplyStateService.applyColumnState({state:s,applyOrder:e},"gridInitializing")}i&&this.columnGroupStateService.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.columnGroupStateService.getColumnGroupState(),t=[];return e.forEach(({groupId:i,open:s})=>{s&&t.push(i)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){var n;if(!Object.prototype.hasOwnProperty.call(e,"columnGroup"))return;const t=new Set((n=e.columnGroup)==null?void 0:n.openColumnGroupIds),s=this.columnGroupStateService.getColumnGroupState().map(({groupId:r})=>{const o=t.has(r);return o&&t.delete(r),{groupId:r,open:o}});t.forEach(r=>{s.push({groupId:r,open:!0})}),s.length&&(this.columnGroupStates=s),this.columnGroupStateService.setColumnGroupState(s,"gridInitializing")}getFilterState(){var i,s;let e=(i=this.filterManager)==null?void 0:i.getFilterModel();e&&Object.keys(e).length===0&&(e=void 0);const t=((s=this.filterManager)==null?void 0:s.getAdvancedFilterModel())??void 0;return e||t?{filterModel:e,advancedFilterModel:t}:void 0}setFilterState(e,t){var n,r;const{filterModel:i,advancedFilterModel:s}=e??{advancedFilterModel:t};i&&((n=this.filterManager)==null||n.setFilterModel(i,"columnFilter")),s&&((r=this.filterManager)==null||r.setAdvancedFilterModel(s))}getRangeSelectionState(){var t;const e=(t=this.rangeService)==null?void 0:t.getCellRanges().map(i=>{const{id:s,type:n,startRow:r,endRow:o,columns:a,startColumn:l}=i;return{id:s,type:n,startRow:r,endRow:o,colIds:a.map(c=>c.getColId()),startColId:l.getColId()}});return e!=null&&e.length?{cellRanges:e}:void 0}setCellSelectionState(e){const{gos:t,rangeService:i,columnModel:s,visibleColsService:n}=this;if(!Cl(t)||!i)return;const r=[];if(e.cellRanges.forEach(o=>{const a=[];if(o.colIds.forEach(c=>{const p=s.getCol(c);p&&a.push(p)}),!a.length)return;let l=s.getCol(o.startColId);if(!l){const c=n.getAllCols(),p=new Set(a);l=c.find(g=>p.has(g))}r.push({...o,columns:a,startColumn:l})}),aW(t)&&lW(t)&&r.length>1)return we("cannot add multiple ranges when `cellSelection.suppressMultiRanges = true`");i.setCellRanges(r)}getScrollState(){var s;if(!this.isClientSideRowModel)return;const e=(s=this.ctrlsService.getGridBodyCtrl())==null?void 0:s.getScrollFeature(),{left:t}=(e==null?void 0:e.getHScrollPosition())??{left:0},{top:i}=(e==null?void 0:e.getVScrollPosition())??{top:0};return i||t?{top:i,left:t}:void 0}setScrollState(e){var s;if(!this.isClientSideRowModel)return;const{top:t,left:i}=e;(s=this.ctrlsService.getGridBodyCtrl())==null||s.getScrollFeature().setScrollPosition(t,i)}getSideBarState(){var e,t;return(t=(e=this.sideBarService)==null?void 0:e.getSideBarComp())==null?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:s}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:s}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:s}=e;this.focusService.setFocusedCell({column:this.columnModel.getCol(t),rowIndex:i,rowPinned:s,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){if(!this.paginationService)return;const e=this.paginationService.getCurrentPage(),t=this.gos.get("paginationAutoPageSize")?void 0:this.paginationService.getPageSize();if(!(!e&&!t))return{page:e,pageSize:t}}setPaginationState(e){this.paginationService&&(e.pageSize&&!this.gos.get("paginationAutoPageSize")&&this.paginationService.setPageSize(e.pageSize,"initialState"),typeof e.page=="number"&&this.paginationService.setPage(e.page))}getRowSelectionState(){var i;const e=this.selectionService.getSelectionState();return!e||!Array.isArray(e)&&(e.selectAll===!1||e.selectAllChildren===!1)&&!((i=e==null?void 0:e.toggledNodes)!=null&&i.length)?void 0:e}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;Object.entries(t).forEach(([s,n])=>{Cf(n,this.cachedState[s])||(i=!0)}),this.cachedState={...this.cachedState,...t},i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.setCachedStateValue(e,t),Cf(t,i)||this.dispatchStateUpdateEvent([e])}setCachedStateValue(e,t){this.cachedState={...this.cachedState,[e]:t}}refreshStaleState(){this.staleStateKeys.forEach(e=>{switch(e){case"rowSelection":this.setCachedStateValue(e,this.getRowSelectionState());break}}),this.staleStateKeys.clear()}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:"stateUpdated",sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}},tN={version:ct,moduleName:"@ag-grid-community/state-core",beans:[A5]},P5={version:ct,moduleName:"@ag-grid-community/state-api",apiFunctions:{getState:E5},dependantModules:[tN]},F5={version:ct,moduleName:"@ag-grid-community/state",dependantModules:[tN,P5]};function k5(e){return e.rowModel.isLastRowIndexKnown()}function N5(e){var t;return((t=e.paginationService)==null?void 0:t.getPageSize())??100}function O5(e){var t;return((t=e.paginationService)==null?void 0:t.getCurrentPage())??0}function _5(e){var t;return((t=e.paginationService)==null?void 0:t.getTotalPages())??1}function B5(e){return e.paginationService?e.paginationService.getMasterRowCount():e.rowModel.getRowCount()}function G5(e){var t;(t=e.paginationService)==null||t.goToNextPage()}function z5(e){var t;(t=e.paginationService)==null||t.goToPreviousPage()}function H5(e){var t;(t=e.paginationService)==null||t.goToFirstPage()}function V5(e){var t;(t=e.paginationService)==null||t.goToLastPage()}function W5(e,t){var i;(i=e.paginationService)==null||i.goToPage(t)}var j5=class extends de{constructor(){super(...arguments),this.beanName="paginationAutoPageSizeService"}wireBeans(e){this.ctrlsService=e.ctrlsService,this.paginationService=e.paginationService}postConstruct(){this.ctrlsService.whenReady(this,e=>{this.centerRowsCtrl=e.center;const t=this.checkPageSize.bind(this);this.addManagedEventListeners({bodyHeightChanged:t,scrollVisibilityChanged:t}),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gos.get("paginationAutoPageSize")||this.centerRowsCtrl==null}onPaginationAutoSizeChanged(){this.notActive()?this.paginationService.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowsCtrl.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const i=Math.max(uh(this.gos),1),s=Math.floor(e/i);this.paginationService.setPageSize(s,"autoCalculated")};this.isBodyRendered?Cn(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};function U5(e,t,i){e.addManagedElementListeners(t,{keydown:s=>{if(!s.defaultPrevented&&s.key===le.TAB){const n=s.shiftKey;i.findNextFocusableElement(t,!1,n)||i.focusNextGridCoreContainer(n)&&s.preventDefault()}}})}var Og="paginationPageSizeSelector",K5=class extends di{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationService.getPageSize()||(this.paginationService.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}wireBeans(e){this.paginationService=e.paginationService}postConstruct(){this.addManagedPropertyListener(Og,()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedEventListeners({paginationChanged:e=>this.handlePaginationChanged(e)})}handlePaginationChanged(e){if(!this.selectPageSizeComp||!(e!=null&&e.newPageSize))return;const t=this.paginationService.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&!e&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp)}reset(){pr(this.getGui()),this.selectPageSizeComp&&(this.selectPageSizeComp=this.destroyBean(this.selectPageSizeComp))}onPageSizeSelectorValuesChange(){this.selectPageSizeComp&&this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel")&&!this.gos.get("paginationAutoPageSize")&&this.gos.get(Og)!==!1}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationService.getPageSize(),i=!t||!e.includes(t);if(i){const n=this.gos.exists("paginationPageSize"),r=this.gos.get(Og)!==!0;we(`'paginationPageSize=${t}'${n?"":" (default value)"}, but ${t} is not included in${r?"":" the default"} paginationPageSizeSelector=[${e.join(", ")}].`),r||we(`Either set '${Og}' to an array that includes ${t} or to 'false' to disable the page size selector.`),e.unshift("")}const s=String(i?"":t);this.selectPageSizeComp?(Jc(this.pageSizeOptions,e)||(this.selectPageSizeComp.clearOptions().addOptions(this.createPageSizeSelectOptions(e)),this.pageSizeOptions=e),this.selectPageSizeComp.setValue(s,!0)):this.createPageSizeSelectorComp(e,s),this.hasEmptyOption=i}createPageSizeSelectOptions(e){return e.map(t=>({value:String(t)}))}createPageSizeSelectorComp(e,t){const i=this.localeService.getLocaleTextFunc(),s=i("pageSizeSelectorLabel","Page Size:"),n=i("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new O0).addOptions(this.createPageSizeSelectOptions(e)).setValue(t).setAriaLabel(n).setLabel(s).onValueChange(()=>this.handlePageSizeItemSelected()),this.appendChild(this.selectPageSizeComp)}getPageSizeSelectorValues(){const e=[20,50,100],t=this.gos.get(Og);return!Array.isArray(t)||hr(t)?e:[...t].sort((i,s)=>i-s)}destroy(){this.toggleSelectDisplay(!1),super.destroy()}},Y5={selector:"AG-PAGE-SIZE-SELECTOR",component:K5},$5=class extends _K{constructor(){super(),this.btFirst=st,this.btPrevious=st,this.btNext=st,this.btLast=st,this.lbRecordCount=st,this.lbFirstRowOnPage=st,this.lbLastRowOnPage=st,this.lbCurrent=st,this.lbTotal=st,this.pageSizeComp=st,this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1,this.allowFocusInnerElement=!1}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.focusService=e.focusService,this.ariaAnnouncementService=e.ariaAnnouncementService}postConstruct(){const e=this.gos.get("enableRtl");this.setTemplate(this.getTemplate(),[Y5]);const{btFirst:t,btPrevious:i,btNext:s,btLast:n}=this;this.activateTabIndex([t,i,s,n]),t.insertAdjacentElement("afterbegin",ur(e?"last":"first",this.gos)),i.insertAdjacentElement("afterbegin",ur(e?"next":"previous",this.gos)),s.insertAdjacentElement("afterbegin",ur(e?"previous":"next",this.gos)),n.insertAdjacentElement("afterbegin",ur(e?"first":"last",this.gos)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:r=>{this.allowFocusInnerElement?this.tabGuardFeature.getTabGuardCtrl().focusInnerElement(r):this.focusService.focusGridInnerElement(r)},forceFocusOutWhenTabGuardsAreEmpty:!0}),this.onPaginationChanged()}setAllowFocus(e){this.allowFocusInnerElement=e}onPaginationChanged(){const t=this.gos.get("pagination")&&!this.gos.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedEventListeners({paginationChanged:this.onPaginationChanged.bind(this)}),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:i}=e;this.addManagedListeners(t,{click:i,keydown:s=>{(s.key===le.ENTER||s.key===le.SPACE)&&(s.preventDefault(),i())}})}),U5(this,this.getGui(),this.focusService),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationService.goToFirstPage()}formatNumber(e){const t=this.gos.getCallback("paginationNumberFormatter");if(t)return t({value:e});const i=this.localeService.getLocaleTextFunc(),s=i("thousandSeparator",","),n=i("decimalSeparator",".");return kU(e,s,n)}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),s=e("of","of"),n=e("firstPage","First Page"),r=e("previousPage","Previous Page"),o=e("nextPage","Next Page"),a=e("lastPage","Last Page"),l=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${l}">
                <ag-page-size-selector data-ref="pageSizeComp"></ag-page-size-selector>
                <span class="ag-paging-row-summary-panel">
                    <span id="ag-${l}-first-row" data-ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-to">${i}</span>
                    <span id="ag-${l}-last-row" data-ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>
                    <span id="ag-${l}-of">${s}</span>
                    <span id="ag-${l}-row-count" data-ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>
                </span>
                <span class="ag-paging-page-summary-panel" role="presentation">
                    <div data-ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${n}"></div>
                    <div data-ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${r}"></div>
                    <span class="ag-paging-description">
                        <span id="ag-${l}-start-page">${t}</span>
                        <span id="ag-${l}-start-page-number" data-ref="lbCurrent" class="ag-paging-number"></span>
                        <span id="ag-${l}-of-page">${s}</span>
                        <span id="ag-${l}-of-page-number" data-ref="lbTotal" class="ag-paging-number"></span>
                    </span>
                    <div data-ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>
                    <div data-ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>
                </span>
            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationService.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationService.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationService.goToLastPage()}enableOrDisableButtons(){const e=this.paginationService.getCurrentPage(),t=this.rowModel.isLastRowIndexKnown(),i=this.paginationService.getTotalPages();this.previousAndFirstButtonsDisabled=e===0,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const s=this.isZeroPagesToDisplay(),n=e===i-1;this.nextButtonDisabled=n||s,this.lastButtonDisabled=!t||s||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){$W(e,t),e.classList.toggle("ag-disabled",t)}isZeroPagesToDisplay(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages();return e&&t===0}updateLabels(){const e=this.rowModel.isLastRowIndexKnown(),t=this.paginationService.getTotalPages(),i=this.paginationService.getMasterRowCount(),s=e?i:null;if(s===1){const R=this.rowModel.getRow(0);if(R&&R.group&&!(R.groupData||R.aggData)){this.setTotalLabelsToZero();return}}const n=this.paginationService.getCurrentPage(),r=this.paginationService.getPageSize();let o,a;this.isZeroPagesToDisplay()?o=a=0:(o=r*n+1,a=o+r-1,e&&a>s&&(a=s));const l=o+r-1,c=!e&&i<l,p=this.formatNumber(o);this.lbFirstRowOnPage.textContent=p;let g;const f=this.localeService.getLocaleTextFunc();c?g=f("pageLastRowUnknown","?"):g=this.formatNumber(a),this.lbLastRowOnPage.textContent=g;const C=t>0?n+1:0,x=this.formatNumber(C);this.lbCurrent.textContent=x;let M,b;if(e)M=this.formatNumber(t),b=this.formatNumber(s);else{const R=f("more","more");M=R,b=R}this.lbTotal.textContent=M,this.lbRecordCount.textContent=b,this.announceAriaStatus(p,g,b,x,M)}announceAriaStatus(e,t,i,s,n){const r=this.localeService.getLocaleTextFunc(),o=r("page","Page"),a=r("to","to"),l=r("of","of"),c=`${e} ${a} ${t} ${l} ${i}`,p=`${o} ${s} ${l} ${n}`;c!==this.ariaRowStatus&&(this.ariaRowStatus=c,this.ariaAnnouncementService.announceValue(c,"paginationRow")),p!==this.ariaPageStatus&&(this.ariaPageStatus=p,this.ariaAnnouncementService.announceValue(p,"paginationPage"))}setTotalLabelsToZero(){const e=this.formatNumber(0);this.lbFirstRowOnPage.textContent=e,this.lbCurrent.textContent=e,this.lbLastRowOnPage.textContent=e,this.lbTotal.textContent=e,this.lbRecordCount.textContent=e,this.announceAriaStatus(e,e,e,e,e)}},Z5={selector:"AG-PAGINATION",component:$5},X5=class extends de{constructor(){super(...arguments),this.beanName="paginationService",this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.masterRowCount=0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.active=this.gos.get("pagination"),this.pageSizeFromGridOptions=this.gos.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this))}getPaginationSelector(){return Z5}isPaginateChildRows(){return this.gos.get("groupRemoveSingleChildren")||this.gos.get("groupRemoveLowestSingleChildren")?!0:this.gos.get("paginateChildRows")}onPaginationGridOptionChanged(){this.active=this.gos.get("pagination"),this.calculatePages(),this.dispatchPaginationChangedEvent({keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gos.get("paginationPageSize"),"gridOptions")}goToPage(e){!this.active||this.currentPage===e||typeof this.currentPage!="number"||(this.currentPage=e,this.calculatePages(),this.dispatchPaginationChangedEvent({newPage:!0}))}isRowPresent(e){return e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return this.active?this.getPageForIndex(e.rowIndex)===this.currentPage:!0}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return Ae(this.pageSizeAutoCalculated)&&this.gos.get("paginationAutoPageSize")?this.pageSizeAutoCalculated:Ae(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Ae(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Ae(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.pageBoundsService.calculateBounds(this.topDisplayedRowIndex,this.bottomDisplayedRowIndex)}unsetAutoCalculatedPageSize(){if(this.pageSizeAutoCalculated===void 0)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0}))}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,this.currentPage!==0&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,this.currentPage!==0&&this.goToFirstPage();break}i!==this.pageSize&&(this.calculatePages(),this.dispatchPaginationChangedEvent({newPageSize:!0,keepRenderedRows:!0}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();const t=this.pageSize*this.currentPage;let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(t),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const s=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=s-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),this.masterRowCount===0){this.setZeroRows();return}const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(void 0,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}dispatchPaginationChangedEvent(e){const{keepRenderedRows:t=!1,newPage:i=!1,newPageSize:s=!1}=e;this.eventService.dispatchEvent({type:"paginationChanged",animate:!1,newData:!1,newPage:i,newPageSize:s,keepRenderedRows:t})}},iN={version:ct,moduleName:"@ag-grid-community/pagination-core",beans:[X5,j5]},Q5={version:ct,moduleName:"@ag-grid-community/pagination-api",dependantModules:[iN],apiFunctions:{paginationIsLastPageFound:k5,paginationGetPageSize:N5,paginationGetCurrentPage:O5,paginationGetTotalPages:_5,paginationGetRowCount:B5,paginationGoToNextPage:G5,paginationGoToPreviousPage:z5,paginationGoToFirstPage:H5,paginationGoToLastPage:V5,paginationGoToPage:W5}},q5={version:ct,moduleName:"@ag-grid-community/pagination",dependantModules:[iN,Q5]},Bn="clientSide",on="serverSide",Fd="infinite",J5={onGroupExpandedOrCollapsed:[Bn],refreshClientSideRowModel:[Bn],isRowDataEmpty:[Bn],forEachLeafNode:[Bn],forEachNodeAfterFilter:[Bn],forEachNodeAfterFilterAndSort:[Bn],resetRowHeights:[Bn],applyTransaction:[Bn],applyTransactionAsync:[Bn],flushAsyncTransactions:[Bn],getBestCostNodeSelection:[Bn],getServerSideSelectionState:[on],setServerSideSelectionState:[on],applyServerSideTransaction:[on],applyServerSideTransactionAsync:[on],applyServerSideRowData:[on],retryServerSideLoads:[on],flushServerSideAsyncTransactions:[on],refreshServerSide:[on],getServerSideGroupLevelState:[on],refreshInfiniteCache:[Fd],purgeInfiniteCache:[Fd],getInfiniteRowCount:[Fd],isLastRowIndexKnown:[Fd,on],expandAll:[Bn,on],collapseAll:[Bn,on],onRowHeightChanged:[Bn,on],setRowCount:[Fd,on],getCacheBlockState:[Fd,on]},eZ={getValue:{version:"v31.3",new:"getCellValue"},getFirstDisplayedRow:{version:"v31.1",new:"getFirstDisplayedRowIndex"},getLastDisplayedRow:{version:"v31.1",new:"getLastDisplayedRowIndex"},getModel:{version:"v31.1",message:"Please use the appropriate grid API methods instead."},setColumnVisible:{version:"v31.1",old:"setColumnVisible(key,visible)",new:"setColumnsVisible([key],visible)"},setColumnPinned:{version:"v31.1",old:"setColumnPinned(key,pinned)",new:"setColumnsPinned([key],pinned)"},moveColumn:{version:"v31.1",old:"moveColumn(key, toIndex)",new:"moveColumns([key], toIndex)"},setColumnWidth:{version:"v31.1",old:"setColumnWidth(col, width)",new:"setColumnWidths([{key: col, newWidth: width}])"},autoSizeColumn:{version:"v31.1",old:"autoSizeColumn(key, skipHeader)",new:"autoSizeColumns([key], skipHeader)"},addAggFunc:{version:"v31.1",old:"addAggFunc(key, func)",new:"addAggFuncs({ key: func })"},removeValueColumn:{version:"v31.1",old:"removeValueColumn(colKey)",new:"removeValueColumns([colKey])"},addValueColumn:{version:"v31.1",old:"addValueColumn(colKey)",new:"addValueColumns([colKey])"},removeRowGroupColumn:{version:"v31.1",old:"removeRowGroupColumn(colKey)",new:"removeRowGroupColumns([colKey])"},addRowGroupColumn:{version:"v31.1",old:"addRowGroupColumn(colKey)",new:"addRowGroupColumns([colKey])"},removePivotColumn:{version:"v31.1",old:"removePivotColumn(colKey)",new:"removePivotColumns([colKey])"},addPivotColumn:{version:"v31.1",old:"addPivotColumn(colKey)",new:"addPivotColumns([colKey])"},showColumnMenuAfterButtonClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere."},showColumnMenuAfterMouseClick:{version:"v31.1",message:"Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere."},getFilterInstance:{version:"v31.1",message:"'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."},showLoadingOverlay:{version:"v32",message:'`showLoadingOverlay` is deprecated. Use the grid option "loading"=true instead or setGridOption("loading", true).'},clearRangeSelection:{version:"v32.2",message:"Use `clearCellSelection` instead."},getInfiniteRowCount:{version:"v32.2",old:"getInfiniteRowCount()",new:"getDisplayedRowCount()"}};function tZ(e,t,i){const s=eZ[e];if(s){const{version:r,new:o,old:a,message:l}=s,c=a??e;return(...p)=>{const g=o?`Please use ${o} instead. `:"";return we(`Since ${r} api.${c} is deprecated. ${g}${l??""}`),t.apply(t,p)}}const n=J5[e];return n?(...r)=>{const o=i.rowModel.getType();if(!n.includes(o)){Ut(`api.${e} can only be called when gridOptions.rowModelType is ${n.join(" or ")}`);return}return t.apply(t,r)}:t}var iZ={columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."},suppressCellFlash:{version:"31.2",message:"Use `enableCellChangeFlash={false}` in the ColDef"},checkboxSelection:{version:"32.2",message:"Use `rowSelection.checkboxes` in `GridOptions` instead."},headerCheckboxSelection:{version:"32.2",message:"Use `rowSelection.headerCheckbox = true` in `GridOptions` instead."},headerCheckboxSelectionFilteredOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "filtered"` in `GridOptions` instead.'},headerCheckboxSelectionCurrentPageOnly:{version:"32.2",message:'Use `rowSelection.selectAll = "currentPage"` in `GridOptions` instead.'},showDisabledCheckboxes:{version:"32.2",message:"Use `rowSelection.hideDisabledCheckboxes = true` in `GridOptions` instead."}},bc=(e,t)=>{const i=t.rowModelType??"clientSide";return i==="clientSide"||i==="serverSide"?{module:"@ag-grid-enterprise/row-grouping"}:null},sZ={enableRowGroup:bc,rowGroup:bc,rowGroupIndex:bc,enablePivot:bc,enableValue:bc,pivot:bc,pivotIndex:bc,aggFunc:bc,cellEditor:e=>e.cellEditor==="agRichSelect"||e.cellEditor==="agRichSelectCellEditor"?{module:"@ag-grid-enterprise/rich-select"}:null,menuTabs:e=>{var i;const t=["columnsMenuTab","generalMenuTab"];return(i=e.menuTabs)!=null&&i.some(s=>t.includes(s))?{module:"@ag-grid-enterprise/menu"}:null},columnsMenuParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},columnChooserParams:{module:["@ag-grid-enterprise/menu","@ag-grid-enterprise/column-tool-panel"]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],validate:(e,{rowSelection:t})=>t==="multiple"?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>Gd},nZ={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0,loadingCellRenderer:void 0,loadingCellRendererParams:void 0,loadingCellRendererSelector:void 0,context:void 0},rZ=Object.keys(nZ),Gd={objectName:"colDef",allProperties:rZ,docsUrl:"column-properties/",deprecations:iZ,validations:sZ},oZ=()=>({advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"},enableCellChangeFlash:{version:"31.2",message:"Use `enableCellChangeFlash` in the `ColDef` or `defaultColDef` for all columns."},groupIncludeFooter:{version:"31.3",message:"Use `groupTotalRow` instead."},groupIncludeTotalFooter:{version:"31.3",message:"Use `grandTotalRow` instead."},suppressLoadingOverlay:{version:"32",message:"Use `loading`=false instead."},enableFillHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeHandle:{version:"32.2",message:"Use `cellSelection.handle` instead."},enableRangeSelection:{version:"32.2",message:"Use `cellSelection = true` instead."},suppressMultiRangeSelection:{version:"32.2",message:"Use `cellSelection.suppressMultiRanges` instead."},suppressClearOnFillReduction:{version:"32.2",message:"Use `cellSelection.handle.suppressClearOnFillReduction` instead."},fillHandleDirection:{version:"32.2",message:"Use `cellSelection.handle.direction` instead."},fillOperation:{version:"32.2",message:"Use `cellSelection.handle.setFillValue` instead."},suppressRowClickSelection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},suppressRowDeselection:{version:"32.2",message:"Use `rowSelection.enableClickSelection` instead."},rowMultiSelectWithClick:{version:"32.2",message:"Use `rowSelection.enableSelectionWithoutKeys` instead."},groupSelectsChildren:{version:"32.2",message:'Use `rowSelection.groupSelects = "descendants"` instead.'},groupSelectsFiltered:{version:"32.2",message:'Use `rowSelection.groupSelects = "filteredDescendants"` instead.'},isRowSelectable:{version:"32.2",message:"Use `selectionOptions.isRowSelectable` instead."},suppressCopySingleCellRanges:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},suppressCopyRowsToClipboard:{version:"32.2",message:"Use `rowSelection.copySelectedRows` instead."},onRangeSelectionChanged:{version:"32.2",message:"Use `onCellSelectionChanged` instead."},onRangeDeleteStart:{version:"32.2",message:"Use `onCellSelectionDeleteStart` instead."},onRangeDeleteEnd:{version:"32.2",message:"Use `onCellSelectionDeleteEnd` instead."},suppressBrowserResizeObserver:{version:"32.2",message:"The grid always uses the browser's ResizeObserver, this grid option has no effect."},onColumnEverythingChanged:{version:"32.2",message:"Either use `onDisplayedColumnsChanged` which is fired at the same time, or use one of the more specific column events."}}),aZ={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!0,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipShowMode:"standard",tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"	",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,enableStrictPivotColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressMoveWhenColumnDragging:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1,suppressServerSideFullWidthLoadingRow:!1,pivotMaxGeneratedColumns:-1,columnMenu:"new",reactiveCustomComponents:!0,suppressSetFilterByDefault:!1},lZ=()=>({sideBar:{module:"@ag-grid-enterprise/side-bar"},statusBar:{module:"@ag-grid-enterprise/status-bar"},enableCharts:{module:"@ag-grid-enterprise/charts"},getMainMenuItems:{module:"@ag-grid-enterprise/menu"},getContextMenuItems:{module:"@ag-grid-enterprise/menu"},allowContextMenuWithControlKey:{module:"@ag-grid-enterprise/menu"},enableAdvancedFilter:{module:"@ag-grid-enterprise/advanced-filter"},treeData:{supportedRowModels:["clientSide","serverSide"],module:"@ag-grid-enterprise/row-grouping",validate:e=>{const t=e.rowModelType??"clientSide";switch(t){case"clientSide":{const i=`treeData requires 'getDataPath' in the ${t} row model.`;return e.getDataPath?null:i}case"serverSide":{const i=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return e.isServerSideGroup&&e.getServerSideGroupKey?null:i}}return null}},masterDetail:{module:"@ag-grid-enterprise/master-detail"},enableRangeSelection:{module:"@ag-grid-enterprise/range-selection"},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],validate:e=>{switch(e.rowModelType??"clientSide"){case"clientSide":return null;case"serverSide":return e.suppressServerSideInfiniteScroll?"groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll":null}return null}},groupHideOpenParents:{supportedRowModels:["clientSide","serverSide"],dependencies:{groupTotalRow:[void 0,"bottom"]}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},viewportDatasource:{supportedRowModels:["viewport"],module:"@ag-grid-enterprise/viewport-row-model"},serverSideDatasource:{supportedRowModels:["serverSide"],module:"@ag-grid-enterprise/server-side-row-model"},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:"@ag-grid-community/infinite-row-model"},rowData:{supportedRowModels:["clientSide"],module:"@ag-grid-community/client-side-row-model"},paginationPageSizeSelector:{validate:e=>{const t=e.paginationPageSizeSelector;return typeof t=="boolean"||t==null||t.length?null:`'paginationPageSizeSelector' cannot be an empty array.
                    If you want to hide the page size selector, set paginationPageSizeSelector to false.`}},rowSelection:{validate({rowSelection:e}){return e&&typeof e=="string"?'As of version 32.2.1, using `rowSelection` with the values "single" or "multiple" has been deprecated. Use the object value instead.':e&&typeof e!="object"?"Expected `RowSelectionOptions` object for the `rowSelection` property.":null}},cellSelection:{module:"@ag-grid-enterprise/range-selection"},columnDefs:()=>Gd,defaultColDef:()=>Gd,defaultColGroupDef:()=>Gd,autoGroupColumnDef:()=>Gd,selectionColumnDef:()=>Gd}),cZ=()=>({objectName:"gridOptions",allProperties:[...xf.ALL_PROPERTIES,...bf.EVENT_CALLBACKS],propertyExceptions:["api"],docsUrl:"grid-options/",deprecations:oZ(),validations:lZ()}),uZ=class extends de{constructor(){super(...arguments),this.beanName="validationService"}wireBeans(e){this.beans=e,this.gridOptions=e.gridOptions}postConstruct(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,cZ())}validateApiFunction(e,t){return tZ(e,t,this.beans)}processOptions(e,t){const{validations:i,deprecations:s,allProperties:n,propertyExceptions:r,objectName:o,docsUrl:a}=t;n&&this.gridOptions.suppressPropertyNamesCheck!==!0&&this.checkProperties(e,[...r??[],...Object.keys(s)],n,o,a);const l=new Set;Object.keys(e).forEach(p=>{const g=s[p];if(g)if("renamed"in g){const{renamed:I,version:P}=g;l.add(`As of v${P}, ${String(p)} is deprecated. Please use ${String(I)} instead.`),e[I]=e[p]}else{const{message:I,version:P}=g;l.add(`As of v${P}, ${String(p)} is deprecated. ${I??""}`)}const f=e[p];if(f==null||f===!1)return;const y=i[p];let C;if(y)if(typeof y=="function"){const I=y(e,this.gridOptions);if(!I)return;if("objectName"in I){const P=e[p];if(Array.isArray(P)){P.forEach(k=>{this.processOptions(k,I)});return}this.processOptions(e[p],I);return}C=I}else C=y;else return;const{module:x,dependencies:M,validate:b,supportedRowModels:R}=C;if(R){const I=this.gridOptions.rowModelType??"clientSide";if(!R.includes(I)){l.add(`${String(p)} is not supported with the '${I}' row model.`);return}}if(x){const I=Array.isArray(x)?x:[x];let P=!0;if(I.forEach(k=>{this.gos.assertModuleRegistered(k,String(p))||(P=!1,l.add(`${String(p)} is only available when ${k} is loaded.`))}),!P)return}if(M){const I=this.checkForRequiredDependencies(p,M,e);if(I){l.add(I);return}}if(b){const I=b(e,this.gridOptions);if(I){l.add(I);return}}}),l.size>0&&l.forEach(p=>{we(p)})}checkForRequiredDependencies(e,t,i){const n=Object.entries(t).find(([a,l])=>{const c=i[a];return!l.includes(c)});if(!n)return null;const[r,o]=n;return o.length>1?`'${String(e)}' requires '${r}' to be one of [${o.join(", ")}].`:`'${String(e)}' requires '${r}' to be ${o[0]}.`}checkProperties(e,t,i,s,n){const r=["__ob__","__v_skip","__metadata__"],o=hZ(Object.getOwnPropertyNames(e),[...r,...t,...i],i);if(bo(o,(a,l)=>{let c=`invalid ${s} property '${a}' did you mean any of these: ${l.slice(0,8).join(", ")}.`;i.includes("context")&&(c+=`
If you are trying to annotate ${s} with application data, use the '${s}.context' property instead.`),we(c)}),Object.keys(o).length>0&&n){const a=this.getFrameworkOverrides().getDocLink(n);we(`to see all the valid ${s} properties please check: ${a}`)}}};function hZ(e,t,i){const s={},n=e.filter(r=>!t.some(o=>o===r));return n.length>0&&n.forEach(r=>s[r]=sk({inputValue:r,allSuggestions:i}).values),s}var dZ={version:ct,moduleName:"@ag-grid-community/core"},pZ={version:ct,moduleName:"@ag-grid-community/core-validations",beans:[uZ]},sN={version:ct,moduleName:"@ag-grid-community/core-community-features",dependantModules:[dZ,pZ,RK,y4,F5,r$,gY,q5,D5]},gZ=class extends de{constructor(){super(...arguments),this.beanName="gridDestroyService",this.destroyCalled=!1}wireBeans(e){this.beans=e}destroy(){var e,t;this.destroyCalled||(this.eventService.dispatchEvent({type:"gridPreDestroyed",state:((e=this.beans.stateService)==null?void 0:e.getState())??{}}),this.destroyCalled=!0,(t=this.beans.ctrlsService.get("gridCtrl"))==null||t.destroyGridUi(),this.beans.context.destroy(),super.destroy())}isDestroyCalled(){return this.destroyCalled}},vy=new Set(["gridPreDestroyed","fillStart","pasteStart"]),fZ=e=>e==="checkboxSelected"||e==="rowClicked"||e==="spaceKey"||e==="uiSelectAll"||e==="uiSelectAllCurrentPage"||e==="uiSelectAllFiltered",mZ=new Map([...xf.BOOLEAN_PROPERTIES.map(e=>[e,Hb]),...xf.NUMBER_PROPERTIES.map(e=>[e,wk]),["groupAggFiltering",e=>typeof e=="function"?e:Hb(e)],["pageSize",Jo(1)],["autoSizePadding",Jo(0)],["keepDetailRowsCount",Jo(1)],["rowBuffer",Jo(0)],["infiniteInitialRowCount",Jo(1)],["cacheOverflowSize",Jo(1)],["cacheBlockSize",Jo(1)],["serverSideInitialRowCount",Jo(1)],["viewportRowModelPageSize",Jo(1)],["viewportRowModelBufferSize",Jo(0)]]);function nN(e,t){const i=mZ.get(e);return i?i(t):t}function vZ(e){const t={};return Object.entries(e).forEach(([i,s])=>{const n=nN(i,s);t[i]=n}),t}var rN=class oN extends de{constructor(){super(...arguments),this.beanName="gos",this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new mp,this.globalEventHandlerFactory=t=>(i,s)=>{if(!this.isAlive())return;const n=vy.has(i);if(n&&!t||!n&&t)return;const r=bf.getCallbackForEvent(i),o=this.gridOptions[r];typeof o=="function"&&this.frameworkOverrides.wrapOutgoing(()=>{o(s)})}}wireBeans(t){this.gridOptions=t.gridOptions,this.eGridDiv=t.eGridDiv,this.validationService=t.validationService,this.environment=t.environment,this.api=t.gridApi,this.gridId=t.context.getGridId()}get gridOptionsContext(){return this.gridOptions.context}postConstruct(){const t=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),t),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.addManagedEventListeners({gridOptionsChanged:({options:i})=>{this.updateGridOptions({options:i,force:!0,source:"gridOptionsUpdated"})}})}get(t){return this.gridOptions[t]??aZ[t]}getCallback(t){return this.mergeGridCommonParams(this.gridOptions[t])}exists(t){return Ae(this.gridOptions[t])}mergeGridCommonParams(t){return t&&(s=>{const n=s;return n.api=this.api,n.context=this.gridOptionsContext,t(n)})}updateGridOptions({options:t,force:i,source:s="api"}){var o;const n={id:oN.changeSetId++,properties:[]},r=[];Object.entries(t).forEach(([a,l])=>{s==="api"&&HW[a]&&we(`${a} is an initial property and cannot be updated.`);const c=nN(a,l),p=i||typeof c=="object"&&s==="api",g=this.gridOptions[a];if(p||g!==c){this.gridOptions[a]=c;const f={type:a,currentValue:c,previousValue:g,changeSet:n,source:s};r.push(f)}}),(o=this.validationService)==null||o.processGridOptions(this.gridOptions),n.properties=r.map(a=>a.type),r.forEach(a=>{this.gridOptions.debug&&Do(`Updated property ${a.type} from`,a.previousValue," to ",a.currentValue),this.propertyEventService.dispatchEvent(a)})}addPropertyEventListener(t,i){this.propertyEventService.addEventListener(t,i)}removePropertyEventListener(t,i){this.propertyEventService.removeEventListener(t,i)}getDomDataKey(){return this.domDataKey}getGridCommonParams(){return{api:this.api,context:this.gridOptionsContext}}addGridCommonParams(t){const i=t;return i.api=this.api,i.context=this.gridOptionsContext,i}assertModuleRegistered(t,i){return ra.__assertRegistered(t,i,this.gridId)}isModuleRegistered(t){return ra.__isRegistered(t,this.gridId)}};rN.changeSetId=0;var yZ=rN,CZ=class extends de{constructor(){super(...arguments),this.beanName="headerPositionUtils"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.ctrlsService=e.ctrlsService}findHeader(e,t){let i,s;if(qi(e.column)?i=this.visibleColsService.getGroupAtDirection(e.column,t):(s=`getCol${t}`,i=this.visibleColsService[s](e.column)),!i)return;const{headerRowIndex:n}=e;if(this.getHeaderRowType(n)!=="filter"){const a=[i];for(;i.getParent();)i=i.getParent(),a.push(i);i=a[a.length-1-n]}const{column:r,headerRowIndex:o}=this.getHeaderIndexToFocus(i,n);return{column:r,headerRowIndex:o}}getHeaderIndexToFocus(e,t){let i;if(qi(e)&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const s=e;i=s.getLeafColumns()[0];let n=i;for(;n!==s;)t++,n=n.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return e?e.getLeafColumns().some(t=>t.isSpanHeaderHeight()):!1}getColumnVisibleParent(e,t){const i=this.getHeaderRowType(t),s=i==="filter",n=i==="column";let r=s?e:e.getParent(),o=t-1,a=o;if(n&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;r&&r.isPadding();)r=r.getParent(),o--;a=o,o<0&&(r=e,o=t,a=void 0)}return{column:r,headerRowIndex:o,headerRowIndexWithoutSpan:a}}getColumnVisibleChild(e,t,i="After"){const s=this.getHeaderRowType(t);let n=e,r=t+1;const o=r;if(s==="group"){const a=e.getDisplayedLeafColumns(),l=i==="After"?a[0]:At(a),c=[];let p=l;for(;p.getParent()!==e;)p=p.getParent(),c.push(p);if(n=l,l.isSpanHeaderHeight())for(let g=c.length-1;g>=0;g--){const f=c[g];if(!f.isPadding()){n=f;break}r++}else n=At(c),n||(n=l)}return{column:n,headerRowIndex:r,headerRowIndexWithoutSpan:o}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const i=this.visibleColsService.getAllCols(),s=i[t==="start"?0:i.length-1];if(!s)return;const n=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()),r=n==null?void 0:n.getRowType(e);if(r=="group"){const o=this.visibleColsService.getColGroupAtLevel(s,e);return{headerRowIndex:e,column:o}}return{headerRowIndex:r==null?-1:e,column:s}}},SZ=class extends de{constructor(){super(...arguments),this.beanName="localeService"}getLocaleTextFunc(){const e=this.gos.getCallback("getLocaleText");if(e)return(i,s,n)=>e({key:i,defaultValue:s,variableValues:n});const t=this.gos.get("localeText");return(i,s,n)=>{let r=t&&t[i];if(r&&n&&n.length){let o=0;for(;!(o>=n.length||r.indexOf("${variable}")===-1);)r=r.replace("${variable}",n[o++])}return r??s}}},wZ=class extends de{constructor(){super(...arguments),this.beanName="apiEventService",this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.globalEventListenerPairs=new Map}postConstruct(){this.frameworkEventWrappingService=new w0(this.getFrameworkOverrides())}addEventListener(e,t){const i=this.frameworkEventWrappingService.wrap(t),s=Gy(this.gos)&&!vy.has(e),n=s?this.asyncEventListeners:this.syncEventListeners;n.has(e)||n.set(e,new Set),n.get(e).add(i),this.eventService.addEventListener(e,i,s)}removeEventListener(e,t){var r;const i=this.frameworkEventWrappingService.unwrap(t),s=this.asyncEventListeners.get(e),n=!!(s!=null&&s.delete(i));n||(r=this.syncEventListeners.get(e))==null||r.delete(i),this.eventService.removeEventListener(e,i,n)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e);if(Gy(this.gos)){const s=(r,o)=>{vy.has(r)&&t(r,o)},n=(r,o)=>{vy.has(r)||t(r,o)};this.globalEventListenerPairs.set(e,{syncListener:s,asyncListener:n}),this.eventService.addGlobalListener(s,!1),this.eventService.addGlobalListener(n,!0)}else this.syncGlobalEventListeners.add(t),this.eventService.addGlobalListener(t,!1)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e);if(this.globalEventListenerPairs.has(t)){const{syncListener:s,asyncListener:n}=this.globalEventListenerPairs.get(t);this.eventService.removeGlobalListener(s,!1),this.eventService.removeGlobalListener(n,!0),this.globalEventListenerPairs.delete(e)}else this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,!1)}destroyEventListeners(e,t){e.forEach((i,s)=>{i.forEach(n=>this.eventService.removeEventListener(s,n,t)),i.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(i=>this.eventService.removeGlobalListener(i,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.globalEventListenerPairs.forEach(({syncListener:e,asyncListener:t})=>{this.eventService.removeGlobalListener(e,!1),this.eventService.removeGlobalListener(t,!0)}),this.globalEventListenerPairs.clear()}},xZ=class extends de{constructor(){super(...arguments),this.beanName="pageBoundsListener"}wireBeans(e){this.rowModel=e.rowModel,this.paginationService=e.paginationService,this.pageBoundsService=e.pageBoundsService}postConstruct(){this.addManagedEventListeners({modelUpdated:this.onModelUpdated.bind(this),recalculateRowBounds:this.calculatePages.bind(this)}),this.onModelUpdated()}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:"paginationChanged",animate:(e==null?void 0:e.animate)??!1,newData:(e==null?void 0:e.newData)??!1,newPage:(e==null?void 0:e.newPage)??!1,newPageSize:(e==null?void 0:e.newPageSize)??!1,keepRenderedRows:(e==null?void 0:e.keepRenderedRows)??!1})}calculatePages(){this.paginationService?this.paginationService.calculatePages():this.pageBoundsService.calculateBounds(0,this.rowModel.getRowCount()-1)}},bZ=class extends de{constructor(){super(...arguments),this.beanName="pageBoundsService",this.pixelOffset=0}wireBeans(e){this.rowModel=e.rowModel}getFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getCurrentPageHeight(){return Pt(this.topRowBounds)||Pt(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){const e=this.topRowBounds?this.topRowBounds.rowTop:0,t=this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0;return{pageFirstPixel:e,pageLastPixel:t}}calculateBounds(e,t){this.topRowBounds=this.rowModel.getRowBounds(e),this.topRowBounds&&(this.topRowBounds.rowIndex=e),this.bottomRowBounds=this.rowModel.getRowBounds(t),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=t),this.calculatePixelOffset()}getPixelOffset(){return this.pixelOffset}calculatePixelOffset(){const e=Ae(this.topRowBounds)?this.topRowBounds.rowTop:0;this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:"paginationPixelOffsetChanged"}))}},MZ=class extends de{constructor(){super(),this.beanName="ariaAnnouncementService",this.descriptionContainer=null,this.pendingAnnouncements=new Map,this.updateAnnouncement=Cn(this.updateAnnouncement.bind(this),200)}wireBeans(e){this.eGridDiv=e.eGridDiv}postConstruct(){const e=Wi(this.gos),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),GF(t,"polite"),YW(t,"additions text"),KW(t,!0),this.eGridDiv.appendChild(t)}announceValue(e,t){this.pendingAnnouncements.set(t,e),this.updateAnnouncement()}updateAnnouncement(){if(!this.descriptionContainer)return;const e=Array.from(this.pendingAnnouncements.values()).join(". ");this.pendingAnnouncements.clear(),this.descriptionContainer.textContent="",setTimeout(()=>{this.isAlive()&&this.descriptionContainer&&(this.descriptionContainer.textContent=e)},50)}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(pr(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null,this.pendingAnnouncements.clear()}},RZ=class extends de{constructor(){super(...arguments),this.beanName="columnAnimationService",this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.activeNext=!1,this.suppressAnimation=!1,this.animationThreadCount=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.ctrlsService.whenReady(this,e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gos.get("suppressColumnMoveAnimation")||this.gos.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0,this.activeNext=!0)}finish(){this.active&&this.flush(()=>this.activeNext=!1,()=>this.active=!1)}executeNextVMTurn(e){this.activeNext?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e,t){if(this.executeNextFuncs.length===0&&this.executeLaterFuncs.length===0){e(),t();return}const i=s=>{for(;s.length;){const n=s.pop();n&&n()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e(),i(this.executeNextFuncs)},0),window.setTimeout(()=>{t(),i(this.executeLaterFuncs)},200)})}},DZ=class extends de{constructor(){super(...arguments),this.beanName="columnHoverService"}setMouseOver(e){this.updateState(e)}clearMouseOver(){this.updateState(null)}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}updateState(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:"columnHoverChanged"})}},EZ=class extends de{constructor(){super(...arguments),this.beanName="overlayService",this.state=0,this.showInitialOverlay=!0,this.wrapperPadding=0}wireBeans(e){this.userComponentFactory=e.userComponentFactory,this.rowModel=e.rowModel,this.columnModel=e.columnModel,this.ctrlsService=e.ctrlsService}postConstruct(){this.isClientSide=xi(this.gos);const e=()=>this.updateOverlayVisibility();this.addManagedEventListeners({newColumnsLoaded:e,rowDataUpdated:e,gridSizeChanged:this.onGridSizeChanged.bind(this),rowCountReady:()=>{this.showInitialOverlay=!1,this.updateOverlayVisibility()}}),this.addManagedPropertyListener("loading",e)}setOverlayWrapperComp(e){this.overlayWrapperComp=e,this.updateOverlayVisibility()}isVisible(){return this.state!==0&&!!this.overlayWrapperComp}isExclusive(){return this.state===1&&!!this.overlayWrapperComp}getOverlayWrapper(){return this.overlayWrapperComp}showLoadingOverlay(){this.showInitialOverlay=!1;const e=this.gos.get("loading");!e&&(e!==void 0||this.gos.get("suppressLoadingOverlay"))||this.doShowLoadingOverlay()}showNoRowsOverlay(){this.showInitialOverlay=!1,!(this.gos.get("loading")||this.gos.get("suppressNoRowsOverlay"))&&this.doShowNoRowsOverlay()}hideOverlay(){if(this.showInitialOverlay=!1,this.gos.get("loading")){we("Since v32, `api.hideOverlay()` does not hide the loading overlay when `loading=true`. Set `loading=false` instead.");return}this.doHideOverlay()}updateOverlayVisibility(){if(!this.overlayWrapperComp){this.state=0;return}let e=this.gos.get("loading");this.showInitialOverlay&&e===void 0&&!this.gos.get("suppressLoadingOverlay")&&(e=!this.gos.get("columnDefs")||!this.columnModel.isReady()||!this.gos.get("rowData")&&this.isClientSide),e?this.state!==1&&this.doShowLoadingOverlay():(this.showInitialOverlay=!1,this.rowModel.isEmpty()&&!this.gos.get("suppressNoRowsOverlay")&&this.isClientSide?this.state!==2&&this.doShowNoRowsOverlay():this.state!==0&&this.doHideOverlay())}doShowLoadingOverlay(){this.overlayWrapperComp&&(this.state=1,this.showOverlay(this.userComponentFactory.getLoadingOverlayCompDetails({}),"ag-overlay-loading-wrapper","loadingOverlayComponentParams"),this.updateExclusive())}doShowNoRowsOverlay(){this.overlayWrapperComp&&(this.state=2,this.showOverlay(this.userComponentFactory.getNoRowsOverlayCompDetails({}),"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams"),this.updateExclusive())}doHideOverlay(){this.overlayWrapperComp&&(this.state=0,this.overlayWrapperComp.hideOverlay(),this.updateExclusive())}showOverlay(e,t,i){var n;const s=e.newAgStackInstance();(n=this.overlayWrapperComp)==null||n.showOverlay(s,t,this.isExclusive(),i),this.refreshWrapperPadding()}updateExclusive(){const e=this.exclusive;this.exclusive=this.isExclusive(),this.exclusive!==e&&this.eventService.dispatchEvent({type:"overlayExclusiveChanged"})}onGridSizeChanged(){this.refreshWrapperPadding()}refreshWrapperPadding(){if(!this.overlayWrapperComp)return;let e=0;if(this.state===2){const t=this.ctrlsService.get("gridHeaderCtrl");e=(t==null?void 0:t.getHeaderHeight())||0}else this.wrapperPadding!==0&&(e=0);this.wrapperPadding!==e&&(this.wrapperPadding=e,this.overlayWrapperComp.updateOverlayWrapperPaddingTop(e))}},IZ=class extends de{constructor(){super(...arguments),this.beanName="rowCssClassCalculator"}wireBeans(e){this.stylingService=e.stylingService}getInitialRowClasses(e){const t=[];return Ae(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),tT(t,this.processClassesFromGridOptions(e.rowNode)),tT(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&(e.pinned==="left"&&t.push("ag-cell-last-left-pinned"),e.pinned==="right"&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],i=r=>{typeof r=="string"?t.push(r):Array.isArray(r)&&r.forEach(o=>t.push(o))},s=this.gos.get("rowClass");if(s){if(typeof s=="function")return we("rowClass should not be a function, please use getRowClass instead"),[];i(s)}const n=this.gos.getCallback("getRowClass");if(n){const r={data:e.data,node:e,rowIndex:e.rowIndex},o=n(r);i(o)}return t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,i=>{t.push(i)},()=>{}),t}processRowClassRules(e,t,i){const s=this.gos.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gos.get("rowClassRules"),s,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}},LZ=class extends de{constructor(){super(...arguments),this.beanName="rowContainerHeightService",this.scrollY=0,this.uiBodyHeight=0}wireBeans(e){this.ctrlsService=e.ctrlsService}postConstruct(){this.addManagedEventListeners({bodyHeightChanged:this.updateOffset.bind(this)}),this.maxDivHeight=nj(),this.gos.get("debug")&&Do("RowContainerHeightService - maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(t!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.gos.get("debug")&&Do(`RowContainerHeightService - Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:"rowContainerHeightChanged"}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t=typeof e=="number"?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:"heightScaleChanged"}))}setModelHeight(e){this.modelHeight=e,this.stretching=e!=null&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight(),i=e/t;return this.maxScrollY*i}},TZ=class extends de{constructor(){super(...arguments),this.beanName="rowNodeSorter"}wireBeans(e){this.valueService=e.valueService,this.columnModel=e.columnModel,this.showRowGroupColsService=e.showRowGroupColsService}postConstruct(){this.isAccentedSort=this.gos.get("accentedSort"),this.primaryColumnsSortGroups=na(this.gos),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=na(this.gos))}doFullSort(e,t){const i=(n,r)=>({currentPos:r,rowNode:n}),s=e.map(i);return s.sort(this.compareRowNodes.bind(this,t)),s.map(n=>n.rowNode)}compareRowNodes(e,t,i){const s=t.rowNode,n=i.rowNode;for(let r=0,o=e.length;r<o;r++){const a=e[r],l=a.sort==="desc",c=this.getValue(s,a.column),p=this.getValue(n,a.column);let g;const f=this.getComparator(a,s);if(f?g=f(c,p,s,n,l):g=iW(c,p,this.isAccentedSort),!isNaN(g)&&g!==0)return a.sort==="asc"?g:g*-1}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,s=i.getColDef().comparator;if(s!=null)return s;if(!i.getColDef().showRowGroup)return;const n=!t.group&&i.getColDef().field;if(!n)return;const r=this.columnModel.getColDefCol(n);if(r)return r.getColDef().comparator}getValue(e,t){var s,n,r;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(AC(this.gos,this.columnModel.isPivotActive())){const l=(s=e.allLeafChildren)==null?void 0:s[0];return l?this.valueService.getValue(t,l,!1,!1):void 0}const a=(n=this.showRowGroupColsService)==null?void 0:n.getShowRowGroupCol(t.getId());return a?(r=e.groupData)==null?void 0:r[a.getId()]:void 0}if(!(e.group&&t.getColDef().showRowGroup))return this.valueService.getValue(t,e,!1,!1)}},_C=class{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let s=0;s<e.childrenAfterGroup.length;s++){const n=e.childrenAfterGroup[s];n.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[s],t,i):i&&t(n)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];){const s={rowNode:t,children:null};this.mapToItems[t.id]=s,i++,t=t.parent}return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach(s=>this.nodeIdsToColumns[i.id][s.getId()]=!0),i=i.parent}linkPathItems(e,t){let i=e;for(let s=0;s<t;s++){const n=this.mapToItems[i.id],r=this.mapToItems[i.parent.id];r.children||(r.children=[]),r.children.push(n),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>i[n.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(n=>!i[n.getId()])}},aN=class extends de{constructor(){super(...arguments),this.beanName="selectionService",this.selectedNodes=new Map,this.selectionCtx=new kK,this.rowSelectionMode=void 0}wireBeans(e){this.rowModel=e.rowModel,this.pageBoundsService=e.pageBoundsService}postConstruct(){const{gos:e,rowModel:t,onRowSelected:i}=this;this.selectionCtx.init(t),this.rowSelectionMode=Hy(e),this.groupSelectsChildren=yh(e),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{const s=yh(e),n=Hy(e);(s!==this.groupSelectsChildren||n!==this.rowSelectionMode)&&(this.groupSelectsChildren=s,this.rowSelectionMode=n,this.deselectAllRowNodes({source:"api"}))}),this.addManagedEventListeners({rowSelected:i.bind(this)})}destroy(){super.destroy(),this.resetNodes(),this.selectionCtx.reset()}isMultiSelect(){return this.rowSelectionMode==="multiRow"}overrideSelectionValue(e,t){if(!fZ(t))return e;const i=this.selectionCtx.getRoot();return i?i.isSelected()??!1:!0}setNodesSelected(e){var g;const{newValue:t,clearSelection:i,suppressFinishActions:s,rangeSelect:n,nodes:r,event:o,source:a}=e;if(r.length===0)return 0;if(r.length>1&&!this.isMultiSelect())return we("cannot multi select unless selection mode is 'multiRow'"),0;const l=this.groupSelectsChildren&&e.groupSelectsFiltered===!0,c=r.map(f=>f.footer?f.sibling:f);if(n){if(c.length>1)return we("cannot range select while selecting multiple rows"),0;const f=c[0],y=this.overrideSelectionValue(t,a);if(this.isMultiSelect()){if(this.selectionCtx.isInRange(f)){const C=this.selectionCtx.truncate(f);return y&&this.selectRange(C.discard,!1,a),this.selectRange(C.keep,y,a)}else if(this.selectionCtx.getRoot()!==f){const M=this.selectionCtx.extend(f,this.groupSelectsChildren);return y&&this.selectRange(M.discard,!1,a),this.selectRange(M.keep,y,a)}}}s||this.selectionCtx.setRoot(c[0]);let p=0;for(let f=0;f<c.length;f++){const y=c[f];l&&y.group||y.selectThisNode(t,o,a)&&p++,this.groupSelectsChildren&&((g=y.childrenAfterGroup)!=null&&g.length)&&(p+=this.selectChildren(y,t,l,a))}return s||(t&&(i||!this.isMultiSelect())&&(p+=this.clearOtherNodes(c[0],a)),p>0&&(this.updateGroupsFromChildrenSelections(a),this.dispatchSelectionChanged(a))),p}selectRange(e,t,i){let s=0;return e.forEach(n=>{if(n.group&&this.groupSelectsChildren)return;n.selectThisNode(t,void 0,i)&&s++}),s>0&&(this.updateGroupsFromChildrenSelections(i),this.dispatchSelectionChanged(i)),s}selectChildren(e,t,i,s){const n=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return Pt(n)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:s,nodes:n})}getSelectedNodes(){const e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((i,s)=>{i&&e(i)&&t.set(s,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||!xi(this.gos))return!1;const s=this.rowModel.getRootNode();t||(t=new _C(!0,s),t.setInactive());let n=!1;return t.forEachChangedNodeDepthFirst(r=>{if(r!==s){const o=r.calculateSelectedFromChildren();n=r.selectThisNode(o===null?!1:o,void 0,e)||n}}),n}clearOtherNodes(e,t){const i=new Map;let s=0;return this.selectedNodes.forEach(n=>{if(n&&n.id!==e.id){const r=this.selectedNodes.get(n.id);s+=r.setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&n.parent&&i.set(n.parent.id,n.parent)}}),i.forEach(n=>{const r=n.calculateSelectedFromChildren();n.selectThisNode(r===null?!1:r,void 0,t)}),s}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){if(Ae(t)&&e.id!==t.id&&t){const s=t.id;this.selectedNodes.get(s)==e&&this.selectedNodes.set(t.id,t)}}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.dispatchSelectionChanged(e)}resetNodes(){var e;(e=this.selectedNodes)==null||e.clear()}getBestCostNodeSelection(){if(!xi(this.gos))return;const t=this.rowModel.getTopLevelNodes();if(t===null)return;const i=[];function s(n){for(let r=0,o=n.length;r<o;r++){const a=n[r];if(a.isSelected())i.push(a);else{const l=a;l.group&&l.children&&s(l.children)}}}return s(t),i}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),e===0}deselectAllRowNodes(e){const t=o=>o.selectThisNode(!1,void 0,s),i=xi(this.gos),{source:s,justFiltered:n,justCurrentPage:r}=e;if(r||n){if(!i){Ut("selecting just filtered only works when gridOptions.rowModelType='clientSide'");return}this.getNodesToSelect(n,r).forEach(t)}else this.selectedNodes.forEach(o=>{o&&t(o)}),this.reset(s);this.selectionCtx.reset(),i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(s),this.dispatchSelectionChanged(s)}getSelectedCounts(e,t){let i=0,s=0;const n=r=>{this.groupSelectsChildren&&r.group||(r.isSelected()?i++:r.selectable&&s++)};return this.getNodesToSelect(e,t).forEach(n),{selectedCount:i,notSelectedCount:s}}getSelectAllState(e,t){const{selectedCount:i,notSelectedCount:s}=this.getSelectedCounts(e,t);return i===0&&s===0?!1:i>0&&s>0?null:i>0}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(i=>i.selectable).length>0}getNodesToSelect(e=!1,t=!1){this.validateSelectAllType();const i=[];if(t)return this.forEachNodeOnPage(n=>{if(!n.group){i.push(n);return}if(!n.expanded){const r=o=>{var a;i.push(o),(a=o.childrenAfterFilter)!=null&&a.length&&o.childrenAfterFilter.forEach(r)};r(n);return}this.groupSelectsChildren||i.push(n)}),i;const s=this.rowModel;return e?(s.forEachNodeAfterFilter(n=>{i.push(n)}),i):(s.forEachNode(n=>{i.push(n)}),i)}forEachNodeOnPage(e){const t=this.pageBoundsService.getFirstRow(),i=this.pageBoundsService.getLastRow();for(let s=t;s<=i;s++){const n=this.rowModel.getRow(s);n&&e(n)}}selectAllRowNodes(e){if(oW(this.gos)&&!RF(this.gos))return we("cannot multi select unless selection mode is 'multiRow'");this.validateSelectAllType();const{source:t,justFiltered:i,justCurrentPage:s}=e,n=this.getNodesToSelect(i,s);n.forEach(r=>r.selectThisNode(!0,void 0,t)),this.selectionCtx.setRoot(n[0]??null),this.selectionCtx.setEndRange(At(n)??null),xi(this.gos)&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.dispatchSelectionChanged(t)}getSelectionState(){const e=[];return this.selectedNodes.forEach(t=>{t!=null&&t.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return Ut("Invalid selection state. When using client-side row model, the state must conform to `string[]`.");const i=new Set(e),s=[];this.rowModel.forEachNode(n=>{i.has(n.id)&&s.push(n)}),this.setNodesSelected({newValue:!0,nodes:s,source:t})}dispatchSelectionChanged(e){this.eventService.dispatchEvent({type:"selectionChanged",source:e})}validateSelectAllType(){if(!xi(this.gos))throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`)}},AZ=class extends de{constructor(){super(...arguments),this.beanName="selectableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){this.addManagedPropertyListeners(["isRowSelectable","rowSelection"],()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){const{gos:t}=this,i=By(t),s=y0(t);if(!i||!s)return;const n=yh(t),r=xi(t)&&n,o=[],a=l=>{if(e&&!l.group)return;if(r&&l.group){const p=l.childrenAfterGroup.some(g=>g.selectable===!0);l.setRowSelectable(p,!0);return}const c=(s==null?void 0:s(l))??!0;l.setRowSelectable(c,!0),!c&&l.isSelected()&&o.push(l)};if(r){const l=this.rowModel;new _C(!1,l.getRootNode()).forEachChangedNodeDepthFirst(a,!0,!0)}else this.rowModel.forEachNode(a);o.length&&this.selectionService.setNodesSelected({nodes:o,newValue:!1,source:"selectableChanged"}),r&&this.selectionService instanceof aN&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}},MT=["asc","desc",null],PZ=class extends de{constructor(){super(...arguments),this.beanName="sortController"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.showRowGroupColsService=e.showRowGroupColsService}progressSort(e,t,i){const s=this.getNextSortDirection(e);this.setSortForColumn(e,s,t,i)}setSortForColumn(e,t,i,s){t!=="asc"&&t!=="desc"&&(t=null);const n=na(this.gos);let r=[e];if(n&&e.getColDef().showRowGroup){const l=this.funcColsService.getSourceColumnsForGroupColumn(e),c=l==null?void 0:l.filter(p=>p.isSortable());c&&(r=[e,...c])}r.forEach(l=>l.setSort(t,s));const o=(i||this.gos.get("alwaysMultiSort"))&&!this.gos.get("suppressMultiSort"),a=[];if(!o){const l=this.clearSortBarTheseColumns(r,s);a.push(...l)}this.updateSortIndex(e),a.push(...r),this.dispatchSortChangedEvents(s,a)}updateSortIndex(e){var a;const t=na(this.gos),i=(a=this.showRowGroupColsService)==null?void 0:a.getShowRowGroupCol(e.getId()),s=t&&i||e,n=this.getColumnsWithSortingOrdered();this.columnModel.getAllCols().forEach(l=>l.setSortIndex(null));const r=n.filter(l=>t&&l.getColDef().showRowGroup?!1:l!==s);(s.getSort()?[...r,s]:r).forEach((l,c)=>{l.setSortIndex(c)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const t=this.columnModel.getAllCols().filter(i=>!!i.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){const i={type:"sortChanged",source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.columnModel.getAllCols().forEach(s=>{e.includes(s)||(s.getSort()&&i.push(s),s.setSort(void 0,t))}),i}getNextSortDirection(e){let t;if(e.getColDef().sortingOrder?t=e.getColDef().sortingOrder:this.gos.get("sortingOrder")?t=this.gos.get("sortingOrder"):t=MT,!Array.isArray(t)||t.length<=0)return we(`sortingOrder must be an array with at least one element, currently it's ${t}`),null;const i=t.indexOf(e.getSort()),s=i<0,n=i==t.length-1;let r;return s||n?r=t[0]:r=t[i+1],MT.indexOf(r)<0?(we("invalid sort type ",r),null):r}getIndexedSortMap(){let e=this.columnModel.getAllCols().filter(r=>!!r.getSort());if(this.columnModel.isPivotMode()){const r=na(this.gos);e=e.filter(o=>{var p;const a=!!o.getAggFunc(),l=!o.isPrimary(),c=r?(p=this.showRowGroupColsService)==null?void 0:p.getShowRowGroupCol(o.getId()):o.getColDef().showRowGroup;return a||l||c})}const t=this.funcColsService.getRowGroupColumns().filter(r=>!!r.getSort()),i={};e.forEach((r,o)=>i[r.getId()]=o),e.sort((r,o)=>{const a=r.getSortIndex(),l=o.getSortIndex();if(a!=null&&l!=null)return a-l;if(a==null&&l==null){const c=i[r.getId()],p=i[o.getId()];return c>p?1:-1}else return l==null?-1:1});const s=na(this.gos)&&!!t.length;s&&(e=[...new Set(e.map(r=>{var o;return((o=this.showRowGroupColsService)==null?void 0:o.getShowRowGroupCol(r.getId()))??r}))]);const n=new Map;return e.forEach((r,o)=>n.set(r,o)),s&&t.forEach(r=>{const o=this.showRowGroupColsService.getShowRowGroupCol(r.getId());n.set(r,n.get(o))}),n}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[i,s])=>t-s).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=na(this.gos),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.funcColsService.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!(t!=null&&t.length))return e.getSort();const s=e.getColDef().field!=null||!!e.getColDef().valueGetter?[e,...t]:t,n=s[0].getSort();return s.every(o=>o.getSort()==n)?n:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}},FZ=class extends de{constructor(){super(...arguments),this.beanName="syncService",this.waitingForColumns=!1}wireBeans(e){this.ctrlsService=e.ctrlsService,this.columnModel=e.columnModel,this.rowModel=e.rowModel}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(this,()=>{const e=this.gos.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.eventService.dispatchEvent({type:"gridReady"});const e=this.gos.isModuleRegistered("@ag-grid-enterprise/core");this.gos.get("debug")&&Do(`initialised successfully, enterprise = ${e}`)}setColumnDefs(e){const t=this.gos.get("columnDefs");if(t){if(this.waitingForColumns){this.waitingForColumns=!1,this.setColumnsAndData(t);return}this.columnModel.setColumnDefs(t,eh(e.source))}}},kZ="paste",NZ=class extends de{constructor(){super(...arguments),this.beanName="changeDetectionService"}wireBeans(e){this.rowModel=e.rowModel,this.rowRenderer=e.rowRenderer}postConstruct(){xi(this.gos)&&(this.clientSideRowModel=this.rowModel),this.addManagedEventListeners({cellValueChanged:this.onCellValueChanged.bind(this)})}onCellValueChanged(e){e.source!==kZ&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gos.get("suppressChangeDetection"))return;const i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const s=this.gos.get("aggregateOnlyChangedColumns"),n=new _C(s,this.clientSideRowModel.getRootNode());n.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(n),n.forEachChangedNodeDepthFirst(r=>{i.push(r)})}this.rowRenderer.refreshCells({rowNodes:i})}},OZ=class extends de{constructor(){super(...arguments),this.beanName="expressionService",this.expressionToFunctionCache={}}evaluate(e,t){if(typeof e=="string")return this.evaluateExpression(e,t);Ut("value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.getValue,t.column,t.columnGroup)}catch(i){return Do("Processing of the expression failed"),Do("Expression = ",e),Do("Params = ",t),Do("Exception = ",i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}},_Z=class extends de{constructor(){super(...arguments),this.beanName="valueCache",this.cacheVersion=0}postConstruct(){this.active=this.gos.get("valueCache"),this.neverExpires=this.gos.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(!(!this.active||e.__cacheVersion!==this.cacheVersion))return e.__cacheData[t]}},BZ=class extends de{constructor(){super(...arguments),this.beanName="valueService",this.initialised=!1,this.isSsrm=!1}wireBeans(e){this.expressionService=e.expressionService,this.columnModel=e.columnModel,this.valueCache=e.valueCache,this.dataTypeService=e.dataTypeService}postConstruct(){this.initialised||this.init()}init(){this.isSsrm=ya(this.gos),this.cellExpressions=this.gos.get("enableCellExpressions"),this.isTreeData=this.gos.get("treeData"),this.initialised=!0;const e=i=>this.callColumnCellValueChangedHandler(i),t=Gy(this.gos);this.eventService.addEventListener("cellValueChanged",e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener("cellValueChanged",e,t)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValueForDisplay(e,t){const i=t.leafGroup&&this.columnModel.isPivotMode(),s=t.group&&t.expanded&&!t.footer&&!i,n=this.gos.get("groupSuppressBlankHeader");if(!s||n)return this.getValue(e,t);let r=!1;const o=this.gos.get("groupTotalRow")??this.gos.get("groupIncludeFooter");typeof o!="function"?r=!!o:r=!!(this.gos.getCallback("groupTotalRow")??this.gos.getCallback("groupIncludeFooter"))({node:this});const a=s&&r;return this.getValue(e,t,!1,a)}getValue(e,t,i=!1,s=!1){if(this.initialised||this.init(),!t)return;const n=e.getColDef(),r=n.field,o=e.getColId(),a=t.data;let l;const c=t.groupData&&t.groupData[o]!==void 0,p=!s&&t.aggData&&t.aggData[o]!==void 0,g=this.isSsrm&&s&&!!e.getColDef().aggFunc,f=this.isSsrm&&t.footer&&t.field&&(e.getColDef().showRowGroup===!0||e.getColDef().showRowGroup===t.field);if(i&&n.filterValueGetter?l=this.executeFilterValueGetter(n.filterValueGetter,a,e,t):this.isTreeData&&p?l=t.aggData[o]:this.isTreeData&&n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):this.isTreeData&&r&&a?l=qg(a,r,e.isFieldContainsDots()):c?l=t.groupData[o]:p?l=t.aggData[o]:n.valueGetter?l=this.executeValueGetter(n.valueGetter,a,e,t):f?l=qg(a,t.field,e.isFieldContainsDots()):r&&a&&!g&&(l=qg(a,r,e.isFieldContainsDots())),this.cellExpressions&&typeof l=="string"&&l.indexOf("=")===0){const y=l.substring(1);l=this.executeValueGetter(y,a,e,t)}if(l==null){const y=this.getOpenedGroup(t,e);if(y!=null)return y}return l}parseValue(e,t,i,s){const n=e.getColDef(),r=n.valueParser;if(Ae(r)){const o=this.gos.addGridCommonParams({node:t,data:t==null?void 0:t.data,oldValue:s,newValue:i,colDef:n,column:e});return typeof r=="function"?r(o):this.expressionService.evaluate(r,o)}return i}getDeleteValue(e,t){return Ae(e.getColDef().valueParser)?this.parseValue(e,t,"",this.getValueForDisplay(e,t))??null:null}formatValue(e,t,i,s,n=!0){let r=null,o;const a=e.getColDef();if(s?o=s:n&&(o=a.valueFormatter),o){const l=this.gos.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:a,column:e});typeof o=="function"?r=o(l):r=this.expressionService.evaluate(o,l)}else if(a.refData)return a.refData[i]||"";return r==null&&Array.isArray(i)&&(r=i.join(", ")),r}getOpenedGroup(e,t){if(!this.gos.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;const s=t.getColDef().showRowGroup;let n=e.parent;for(;n!=null;){if(n.rowGroupColumn&&(s===!0||s===n.rowGroupColumn.getColId()))return n.key;n=n.parent}}setValue(e,t,i,s){const n=this.columnModel.getColDefCol(t);if(!e||!n)return!1;Pt(e.data)&&(e.data={});const{field:r,valueSetter:o}=n.getColDef();if(Pt(r)&&Pt(o))return we("you need either field or valueSetter set on colDef for editing to work"),!1;if(this.dataTypeService&&!this.dataTypeService.checkType(n,i))return we("Data type of the new value does not match the cell data type of the column"),!1;const a=this.gos.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(n,e),newValue:i,colDef:n.getColDef(),column:n});a.newValue=i;let l;if(Ae(o)?typeof o=="function"?l=o(a):l=this.expressionService.evaluate(o,a):l=this.setValueUsingField(e.data,r,i,n.isFieldContainsDots()),l===void 0&&(l=!0),!l)return!1;e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged();const c=this.getValue(n,e);return this.eventService.dispatchEvent({type:"cellValueChanged",event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:a.column,colDef:a.colDef,data:e.data,node:e,oldValue:a.oldValue,newValue:c,value:c,source:s}),!0}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;typeof t=="function"&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,context:e.context})})}setValueUsingField(e,t,i,s){if(!t)return!1;let n=!1;if(!s)n=e[t]===i,n||(e[t]=i);else{const r=t.split(".");let o=e;for(;r.length>0&&o;){const a=r.shift();r.length===0?(n=o[a]===i,n||(o[a]=i)):o=o[a]}}return!n}executeFilterValueGetter(e,t,i,s){const n=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});return typeof e=="function"?e(n):this.expressionService.evaluate(e,n)}executeValueGetter(e,t,i,s){const n=i.getColId(),r=this.valueCache.getValue(s,n);if(r!==void 0)return r;const o=this.gos.addGridCommonParams({data:t,node:s,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,s)});let a;return typeof e=="function"?a=e(o):a=this.expressionService.evaluate(e,o),this.valueCache.setValue(s,n,a),a}getValueCallback(e,t){const i=this.columnModel.getColDefCol(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),s=e.getColDef().keyCreator;let n=i;if(s){const r=this.gos.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data});n=s(r)}return typeof n=="string"||n==null||(n=String(n),n==="[object Object]"&&we("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),n}},Y0=class Zu{static applyGlobalGridOptions(t){if(!Zu.gridOptions)return t;let i={};return mn(i,Zu.gridOptions,!0,!0),Zu.mergeStrategy==="deep"?mn(i,t,!0,!0):i={...i,...t},Zu.gridOptions.context&&(i.context=Zu.gridOptions.context),t.context&&(Zu.mergeStrategy==="deep"&&i.context&&mn(t.context,i.context,!0,!0),i.context=t.context),i}};Y0.gridOptions=void 0;Y0.mergeStrategy="shallow";var lN=Y0;function GZ(e){var t;return(t=lN.gridOptions)==null?void 0:t[e]}var zZ=1,HZ=class{create(e,t,i,s,n){const r=lN.applyGlobalGridOptions(t),o=vZ(r),a=o.gridId??String(zZ++),l=this.getRegisteredModules(n,a),c=this.createBeansList(o.rowModelType,l,a),p=this.createProvidedBeans(e,o,n);if(!c){Ut("Failed to create grid.");return}const g={providedBeanInstances:p,beanClasses:c,gridId:a,beanInitComparator:eY,beanDestroyComparator:tY,derivedBeans:[UK]},f=new nU(g);return this.registerModuleUserComponents(f,l),this.registerControllers(f,l),this.registerModuleApiFunctions(f,l),i(f),f.getBean("syncService").start(),s&&s(f),f.getBean("gridApi")}registerControllers(e,t){const i=e.getBean("ctrlsFactory");t.forEach(s=>{s.controllers&&s.controllers.forEach(n=>i.register(n))})}getRegisteredModules(e,t){const i=e?e.modules:null,s=ra.__getRegisteredModules(t),n=[],r={},o=(a,l,c)=>{(g=>{r[g.moduleName]||(r[g.moduleName]=!0,n.push(g),ra.__register(g,a,c))})(l),l.dependantModules&&l.dependantModules.forEach(g=>o(a,g,c))};return o(!!(i!=null&&i.length)||!ra.__isPackageBased(),sN,void 0),i&&i.forEach(a=>o(!0,a,t)),s&&s.forEach(a=>o(!ra.__isPackageBased(),a,void 0)),n}registerModuleUserComponents(e,t){const i=this.extractModuleEntity(t,n=>n.userComponents?n.userComponents:[]),s=e.getBean("userComponentRegistry");i.forEach(({name:n,classImp:r,params:o})=>{s.registerDefaultComponent(n,r,o)})}registerModuleApiFunctions(e,t){const i=e.getBean("apiFunctionService");t.forEach(s=>{const n=s.apiFunctions;n&&Object.keys(n).forEach(o=>{i==null||i.addFunction(o,n[o])})})}createProvidedBeans(e,t,i){let s=i?i.frameworkOverrides:null;Pt(s)&&(s=new Zk);const n={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:s};return i&&i.providedBeanInstances&&Object.assign(n,i.providedBeanInstances),n}createBeansList(e="clientSide",t,i){const s=t.filter(l=>!l.rowModel||l.rowModel===e),n={clientSide:"@ag-grid-community/client-side-row-model",infinite:"@ag-grid-community/infinite-row-model",serverSide:"@ag-grid-enterprise/server-side-row-model",viewport:"@ag-grid-enterprise/viewport-row-model"};if(!n[e]){Ut("Could not find row model for rowModelType = ",e);return}if(!ra.__assertRegistered(n[e],`rowModelType = '${e}'`,i))return;const r=[oY,nY,CZ,gZ,jK,Bj,QK,qK,G3,nk,LZ,_3,SZ,TK,lU,BW,cY,yZ,zK,aN,EW,C4,bZ,xZ,IK,OZ,DW,O3,_Z,BZ,DK,B3,rU,uY,N3,aY,VK,NK,k3,PZ,DZ,RZ,AZ,NZ,z3,KK,IZ,TZ,sY,hY,rY,iY,FZ,EZ,H3,wZ,MZ,V3,TW,YK,AW,IW,$K,ZK,_W,LW,NW,XK,OW,wW],o=this.extractModuleEntity(s,l=>l.beans?l.beans:[]);r.push(...o);const a=[];return r.forEach(l=>{a.indexOf(l)<0&&a.push(l)}),a}extractModuleEntity(e,t){return[].concat(...e.map(t))}},cN=class extends de{constructor(){super(...arguments),this.beanName="rowModelHelperService"}wireBeans(e){this.rowModel=e.rowModel}postConstruct(){const e=this.rowModel;switch(e.getType()){case"clientSide":this.clientSideRowModel=e;break;case"infinite":this.infiniteRowModel=e;break;case"serverSide":this.serverSideRowModel=e;break}}getClientSideRowModel(){return this.clientSideRowModel}getInfiniteRowModel(){return this.infiniteRowModel}getServerSideRowModel(){return this.serverSideRowModel}};function VZ(e){e.expansionService.expandAll(!0)}function WZ(e){e.expansionService.expandAll(!1)}function jZ(e){var s,n;const t=(s=e.rowModelHelperService)==null?void 0:s.getClientSideRowModel(),i=(n=e.rowModelHelperService)==null?void 0:n.getServerSideRowModel();t?t.onRowHeightChanged():i&&i.onRowHeightChanged()}function UZ(e,t,i){var r,o;const s=(r=e.rowModelHelperService)==null?void 0:r.getServerSideRowModel();if(s){if(e.funcColsService.isRowGroupEmpty()){s.setRowCount(t,i);return}Ut("setRowCount cannot be used while using row grouping.");return}const n=(o=e.rowModelHelperService)==null?void 0:o.getInfiniteRowModel();if(n){n.setRowCount(t,i);return}}function KZ(e){var t;return((t=e.rowNodeBlockLoader)==null?void 0:t.getBlockState())??{}}function YZ(e){return e.rowModel.isLastRowIndexKnown()}var $Z={version:ct,moduleName:"@ag-grid-community/csrm-ssrm-shared-api",apiFunctions:{expandAll:VZ,collapseAll:WZ,onRowHeightChanged:jZ}},ZZ={version:ct,moduleName:"@ag-grid-community/ssrm-infinite-shared-api",apiFunctions:{setRowCount:UZ,getCacheBlockState:KZ,isLastRowIndexKnown:YZ}},XZ=class{wrap(e,t,i=[],s){const n=this.createWrapper(e,s);return t.forEach(r=>{this.createMethod(n,r,!0)}),i.forEach(r=>{this.createMethod(n,r,!1)}),n}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&we("Framework component is missing the method "+t+"()"),null)}}},wp=typeof global>"u"?{}:global;wp.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement;wp.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement;wp.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement;wp.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement;wp.Node=typeof Node>"u"?{}:Node;wp.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;var QZ="ROOT_NODE_ID",eb=0,qZ=class{constructor(e,t,i,s,n,r){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=e,this.gos=t,this.eventService=i,this.funcColsService=s,this.beans=r,this.selectionService=n,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=QZ,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return AF(this.allNodesMap)}getRowNode(e){return this.allNodesMap[e]}setRowData(e){if(typeof e=="string"){we("rowData must be an array.");return}this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e);const t=this.rootNode,i=this.rootNode.sibling;t.childrenAfterFilter=null,t.childrenAfterGroup=null,t.childrenAfterAggFilter=null,t.childrenAfterSort=null,t.childrenMapped=null,t.updateHasChildren(),this.nextId=0,this.allNodesMap={},e?t.allLeafChildren=e.map((s,n)=>this.createNode(s,this.rootNode,eb,n)):(t.allLeafChildren=[],t.childrenAfterGroup=[]),i&&(i.childrenAfterFilter=t.childrenAfterFilter,i.childrenAfterGroup=t.childrenAfterGroup,i.childrenAfterAggFilter=t.childrenAfterAggFilter,i.childrenAfterSort=t.childrenAfterSort,i.childrenMapped=t.childrenMapped,i.allLeafChildren=t.allLeafChildren)}updateRowData(e){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(e.add);const t={rowNodeTransaction:{remove:[],update:[],add:[]},rowsInserted:!1},i=[];return this.executeRemove(e,t,i),this.executeUpdate(e,t,i),this.executeAdd(e,t),this.updateSelection(i,"rowDataChanged"),t}updateRowOrderFromRowData(e){const t=this.rootNode.allLeafChildren,i=(t==null?void 0:t.length)??0,s=new Map;let n=-1,r=-1;for(let o=0;o<i;++o){const a=t[o],l=a.data;l!==e[o]&&(r<0&&(n=o),r=o,s.set(l,a))}if(n<0)return!1;for(let o=n;o<=r;++o){const a=s.get(e[o]);a!==void 0&&(t[o]=a,a.sourceRowIndex=o)}return!0}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(e){this.eventService.dispatchEvent({type:"rowDataUpdateStarted",firstRowData:e!=null&&e.length?e[0]:null})}updateSelection(e,t){const i=e.length>0;i&&this.selectionService.setNodesSelected({newValue:!1,nodes:e,suppressFinishActions:!0,source:t}),this.selectionService.updateGroupsFromChildrenSelections(t),i&&this.eventService.dispatchEvent({type:"selectionChanged",source:t})}executeAdd(e,t){const i=e.add;if(hr(i))return;const s=this.rootNode.allLeafChildren;let n=s.length;if(typeof e.addIndex=="number"&&(n=this.sanitizeAddIndex(e.addIndex),n>0&&this.gos.get("treeData")))for(let l=0;l<s.length;l++){const c=s[l];if((c==null?void 0:c.rowIndex)==n-1){n=l+1;break}}const r=i.map((a,l)=>this.createNode(a,this.rootNode,eb,n+l));if(n<s.length){const a=s.slice(0,n),l=s.slice(n,s.length),c=a.length+r.length;for(let p=0,g=l.length;p<g;++p)l[p].sourceRowIndex=c+p;this.rootNode.allLeafChildren=[...a,...r,...l],t.rowsInserted=!0}else this.rootNode.allLeafChildren=s.concat(r);const o=this.rootNode.sibling;o&&(o.allLeafChildren=s),t.rowNodeTransaction.add=r}sanitizeAddIndex(e){var i;const t=((i=this.rootNode.allLeafChildren)==null?void 0:i.length)??0;return e<0||e>=t||Number.isNaN(e)?t:Math.ceil(e)}executeRemove(e,{rowNodeTransaction:t},i){var o,a;const{remove:s}=e;if(hr(s))return;const n={};s.forEach(l=>{const c=this.lookupRowNode(l);c&&(c.isSelected()&&i.push(c),c.clearRowTopAndRowIndex(),n[c.id]=!0,delete this.allNodesMap[c.id],t.remove.push(c))}),this.rootNode.allLeafChildren=((o=this.rootNode.allLeafChildren)==null?void 0:o.filter(l=>!n[l.id]))??null,(a=this.rootNode.allLeafChildren)==null||a.forEach((l,c)=>{l.sourceRowIndex=c});const r=this.rootNode.sibling;r&&(r.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(e,{rowNodeTransaction:t},i){const{update:s}=e;hr(s)||s.forEach(n=>{const r=this.lookupRowNode(n);r&&(r.updateData(n),!r.selectable&&r.isSelected()&&i.push(r),this.setMasterForRow(r,n,eb,!1),t.update.push(r))})}lookupRowNode(e){var s;const t=vp(this.gos);let i;if(t){const n=t({data:e,level:0});if(i=this.allNodesMap[n],!i)return Ut(`could not find row id=${n}, data item was not found for this id`),null}else if(i=(s=this.rootNode.allLeafChildren)==null?void 0:s.find(n=>n.data===e),!i)return Ut("could not find data item as object was not found",e),Ut("Consider using getRowId to help the Grid find matching row data"),null;return i||null}createNode(e,t,i,s){const n=new gl(this.beans);return n.sourceRowIndex=s,n.group=!1,this.setMasterForRow(n,e,i,!0),t&&(n.parent=t),n.level=i,n.setDataAndId(e,this.nextId.toString()),this.allNodesMap[n.id]&&we(`duplicate node id '${n.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[n.id]=n,this.nextId++,n}setMasterForRow(e,t,i,s){if(this.gos.get("treeData"))e.setMaster(!1),s&&(e.expanded=!1);else{if(this.gos.get("masterDetail")){const o=this.gos.get("isRowMaster");o?e.setMaster(o(t)):e.setMaster(!0)}else e.setMaster(!1);if(s){const o=this.funcColsService.getRowGroupColumns(),a=o?o.length:0,l=i+a;e.expanded=e.master?this.isExpanded(l):!1}}}isExpanded(e){const t=this.gos.get("groupDefaultExpanded");return t===-1?!0:e<t}},JZ=class extends de{constructor(){super(...arguments),this.beanName="rowModel",this.onRowHeightChanged_debounced=Cn(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}wireBeans(e){this.beans=e,this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.selectionService=e.selectionService,this.valueCache=e.valueCache,this.environment=e.environment,this.filterStage=e.filterStage,this.sortStage=e.sortStage,this.flattenStage=e.flattenStage,this.groupStage=e.groupStage,this.aggregationStage=e.aggregationStage,this.pivotStage=e.pivotStage,this.filterAggregatesStage=e.filterAggregatesStage}postConstruct(){const e=this.refreshModel.bind(this,{step:"group"}),t=!this.gos.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:"group",afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedEventListeners({newColumnsLoaded:i,columnRowGroupChanged:e,columnValueChanged:this.onValueChanged.bind(this),columnPivotChanged:this.refreshModel.bind(this,{step:"pivot"}),filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),columnPivotModeChanged:e,gridStylesChanged:this.onGridStylesChanges.bind(this),gridReady:this.onGridReady.bind(this)}),this.addPropertyListeners(),this.rootNode=new gl(this.beans),this.nodeManager=new qZ(this.rootNode,this.gos,this.eventService,this.funcColsService,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),s=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),n=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly","grandTotalRow"]),r=new Set(["postSortRows","groupDisplayType","accentedSort"]),o=new Set([]),a=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter","groupTotalRow"]),l=[...e,...t,...i,...s,...s,...n,...r,...o,...a];this.addManagedPropertyListeners(l,c=>{var f;const p=(f=c.changeSet)==null?void 0:f.properties;if(!p)return;const g=y=>p.some(C=>y.has(C));if(g(e)){this.setRowData(this.rootNode.allLeafChildren.map(y=>y.data));return}if(g(t)){this.refreshModel({step:"group"});return}if(g(i)){this.refreshModel({step:"filter"});return}if(g(s)){this.refreshModel({step:"pivot"});return}if(g(n)){this.refreshModel({step:"aggregate"});return}if(g(r)){this.refreshModel({step:"sort"});return}if(g(o)){this.refreshModel({step:"filter_aggregates"});return}g(a)&&this.refreshModel({step:"map"})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gos.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,s){let n,r=!1;do{n=!1;const o=this.getRowIndexAtPixel(e),a=this.getRowIndexAtPixel(t),l=Math.max(o,i),c=Math.min(a,s);for(let p=l;p<=c;p++){const g=this.getRow(p);if(g.rowHeightEstimated){const f=$c(this.gos,g);g.setRowHeight(f.height),n=!0,r=!0}}n&&this.setRowTopAndRowIndex()}while(n);return r}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const i=new Set,s=Ts(this.gos,"normal");for(let n=0;n<this.rowsToDisplay.length;n++){const r=this.rowsToDisplay[n];if(r.id!=null&&i.add(r.id),r.rowHeight==null){const o=$c(this.gos,r,s,e);r.setRowHeight(o.height,o.estimated)}r.setRowTop(t),r.setRowIndex(n),t+=r.rowHeight}return i}clearRowTopAndRowIndex(e,t){const i=e.isActive(),s=r=>{r&&r.id!=null&&!t.has(r.id)&&r.clearRowTopAndRowIndex()},n=r=>{if(s(r),s(r.detailNode),s(r.sibling),r.hasChildren()&&r.childrenAfterGroup){const o=r.level==-1;i&&!o&&!r.expanded||r.childrenAfterGroup.forEach(n)}};n(this.rootNode)}ensureRowsAtPixel(e,t,i=0){const s=this.getRowIndexAtPixel(t),n=this.getRow(s),r=!this.gos.get("suppressAnimationFrame");if(n===e[0])return!1;const o=this.rootNode.allLeafChildren;return e.forEach(a=>{Sn(o,a)}),e.forEach((a,l)=>{Vy(o,a,Math.max(s+i,0)+l)}),e.forEach((a,l)=>{a.sourceRowIndex=l}),this.refreshModel({step:"group",keepRenderedRows:!0,keepEditingRows:!0,animate:r,rowNodesOrderChanged:!0}),!0}highlightRowAtPixel(e,t){const i=t!=null?this.getRowIndexAtPixel(t):null,s=i!=null?this.getRow(i):null;if(!s||!e||t==null){this.clearHighlightedRow();return}const n=this.getHighlightPosition(t,s),r=this.isHighlightingCurrentPosition(e,s,n),o=this.lastHighlightedRow!=null&&this.lastHighlightedRow!==s;(r||o)&&(this.clearHighlightedRow(),r)||(s.setHighlighted(n),this.lastHighlightedRow=s)}getHighlightPosition(e,t){if(!t){const n=this.getRowIndexAtPixel(e);if(t=this.getRow(n||0),!t)return 1}const{rowTop:i,rowHeight:s}=t;return e-i<s/2?0:1}getLastHighlightedRowNode(){return this.lastHighlightedRow}isHighlightingCurrentPosition(e,t,i){if(e===t)return!0;const s=i===0?-1:1;return this.getRow(t.rowIndex+s)===e}clearHighlightedRow(){this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null)}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay.length===0)return 0;if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const t=this.rootNode.childrenAfterAggFilter,i=this.rootNode.sibling?1:0;return(t?t.length:0)+i}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let i=e;if(this.rowsToDisplay[0].footer){if(e===0)return 0;i-=1}const s=this.rowsToDisplay[this.rowsToDisplay.length-1],n=i>=this.rootNode.childrenAfterSort.length;if(s.footer&&n)return s.rowIndex;let r=this.rootNode.childrenAfterSort[i];if(this.gos.get("groupHideOpenParents"))for(;r.expanded&&r.childrenAfterSort&&r.childrenAfterSort.length>0;)r=r.childrenAfterSort[0];return r.rowIndex}getRowBounds(e){if(Pt(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=Qd(this.gos);this.refreshModel({step:"map",keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=Qd(this.gos),s=e.columns.length===0||e.columns.some(n=>n.isPrimary())?"filter":"filter_aggregates";this.refreshModel({step:s,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=Qd(this.gos);this.refreshModel({step:"sort",keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:"pivot"}):this.refreshModel({step:"aggregate"})}createChangePath(e){const t=hr(e),i=new _C(!1,this.rootNode);return t&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gos.get("suppressModelUpdateAfterUpdateTransaction")||e.rowNodeTransactions==null)return!1;const t=e.rowNodeTransactions.filter(s=>s.add!=null&&s.add.length>0||s.remove!=null&&s.remove.length>0);return t==null||t.length==0}buildRefreshModelParams(e){let t="group";const i={everything:"group",group:"group",filter:"filter",map:"map",aggregate:"aggregate",filter_aggregates:"filter_aggregates",sort:"sort",pivot:"pivot",nothing:"nothing"};if(Ae(e)&&(t=i[e]),Pt(t)){Ut(`invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`);return}const s=!this.gos.get("suppressAnimationFrame");return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:s}}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.isChangeEventsDispatching())return;const t=typeof e=="object"&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case"group":this.doRowGrouping(t.rowNodeTransactions,i,!!t.rowNodesOrderChanged,!!t.afterColumnsChanged);case"filter":this.doFilter(i);case"pivot":this.doPivot(i);case"aggregate":this.doAggregate(i);case"filter_aggregates":this.doFilterAggregates(i);case"sort":this.doSort(t.rowNodeTransactions,i);case"map":this.doRowsToDisplay()}const s=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,s),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:"modelUpdated",animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){const e=Pt(this.rootNode.allLeafChildren)||this.rootNode.allLeafChildren.length===0;return Pt(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return Ae(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!1,s=!1;const n=[],r=yh(this.gos);return this.forEachNodeAfterFilterAndSort(o=>{if(s)return;if(i&&(o===t||o===e)&&(s=!0,o.group&&r)){n.push(...o.allLeafChildren);return}if(!i){if(o!==t&&o!==e)return;i=!0}if(!o.group||!r){n.push(o);return}}),n}setDatasource(e){Ut("should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||this.rowsToDisplay.length===0)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(At(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let n=-1,r=-1;for(;;){const o=Math.floor((t+i)/2),a=this.rowsToDisplay[o];if(this.isRowInPixel(a,e)||(a.rowTop<e?t=o+1:a.rowTop>e&&(i=o-1),n===t&&r===i))return o;n=t,r=i}}isRowInPixel(e,t){const i=e.rowTop,s=e.rowTop+e.rowHeight;return i<=t&&s>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,i)=>e(t,i))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:0,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:1,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:2,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:3,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){const{nodes:t,callback:i,recursionType:s,includeFooterNodes:n}=e;let{index:r}=e;const o=a=>{var y;const l=(y=t[0])==null?void 0:y.parent;if(!l)return;const c=n&&wF(this.gos),p=xF(this.gos),g=n&&p({node:l});if(l===this.rootNode){c===a&&(l.createFooter(),i(l.sibling,r++));return}g===a&&(l.createFooter(),i(l.sibling,r++))};o("top");for(let a=0;a<t.length;a++){const l=t[a];if(i(l,r++),l.hasChildren()&&!l.footer){let c=null;switch(s){case 0:c=l.childrenAfterGroup;break;case 1:c=l.childrenAfterAggFilter;break;case 2:c=l.childrenAfterSort;break;case 3:c=l.leafGroup?null:l.childrenAfterSort;break}c&&(r=this.recursivelyWalkNodesAndCallback({nodes:[...c],callback:i,recursionType:s,index:r,includeFooterNodes:n}))}}return o("bottom"),r}doAggregate(e){var t;(t=this.aggregationStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gos.get("treeData"),i=this.columnModel.isPivotActive(),s=n=>{n&&n.forEach(r=>{const o=()=>{r.expanded=e,s(r.childrenAfterGroup)};if(t){Ae(r.childrenAfterGroup)&&o();return}if(i){!r.leafGroup&&o();return}r.group&&o()})};this.rootNode&&s(this.rootNode.childrenAfterGroup),this.refreshModel({step:"map"}),this.eventService.dispatchEvent({type:"expandOrCollapseAll",source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,s){if(this.groupStage)e?this.groupStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,rowNodesOrderChanged:i,changedPath:t}):this.groupStage.execute({rowNode:this.rootNode,changedPath:t,afterColumnsChanged:s}),yh(this.gos)&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",t)&&this.eventService.dispatchEvent({type:"selectionChanged",source:"rowGroupChanged"});else{const n=this.rootNode,r=n.sibling;n.childrenAfterGroup=n.allLeafChildren,r&&(r.childrenAfterGroup=n.childrenAfterGroup),this.rootNode.updateHasChildren()}this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:"rowCountReady"}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){var t;(t=this.pivotStage)==null||t.execute({rowNode:this.rootNode,changedPath:e})}getNodeManager(){return this.nodeManager}getRowNode(e){if(typeof e=="string"&&e.indexOf(gl.ID_PREFIX_ROW_GROUP)==0){let i;return this.forEachNode(s=>{s.id===e&&(i=s)}),i}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",newData:!0})}batchUpdateRowData(e,t){if(this.applyAsyncTransactionsTimeout==null){this.rowDataTransactionBatch=[];const i=this.gos.get("asyncTransactionWaitMillis");this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.isAlive()&&this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){this.applyAsyncTransactionsTimeout!=null&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){var s;this.valueCache.onDataChanged();const e=[],t=[];let i=!1;(s=this.rowDataTransactionBatch)==null||s.forEach(n=>{const{rowNodeTransaction:r,rowsInserted:o}=this.nodeManager.updateRowData(n.rowDataTransaction);o&&(i=!0),t.push(r),n.callback&&e.push(n.callback.bind(null,r))}),this.commonUpdateRowData(t,i),e.length>0&&window.setTimeout(()=>{e.forEach(n=>n())},0),t.length>0&&this.eventService.dispatchEvent({type:"asyncTransactionsFlushed",results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e){this.valueCache.onDataChanged();const{rowNodeTransaction:t,rowsInserted:i}=this.nodeManager.updateRowData(e);return this.commonUpdateRowData([t],i),t}afterImmutableDataChange(e,t){this.commonUpdateRowData([e],t)}commonUpdateRowData(e,t){if(!this.hasStarted)return;const i=!this.gos.get("suppressAnimationFrame");this.eventService.dispatchEvent({type:"rowDataUpdated"}),this.refreshModel({step:"group",rowNodeTransactions:e,rowNodesOrderChanged:t,keepRenderedRows:!0,keepEditingRows:!0,animate:i})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:"map",keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(e){if(e.rowHeightChanged){if(this.columnModel.isAutoRowHeightActive())return;this.resetRowHeights()}}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}destroy(){super.destroy(),this.clearHighlightedRow()}};function e9(e){e.expansionService.onGroupExpandedOrCollapsed()}function t9(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.refreshModel(t)}function i9(e){var t,i;return((i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null?void 0:i.isEmpty())??!0}function s9(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.forEachLeafNode(t)}function n9(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.forEachNodeAfterFilter(t)}function r9(e,t){var i,s;(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null||s.forEachNodeAfterFilterAndSort(t)}function o9(e){var t,i;if(e.columnModel.isAutoRowHeightActive()){we("calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");return}(i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null||i.resetRowHeights()}function a9(e,t){return e.frameworkOverrides.wrapIncoming(()=>{var i,s;return(s=(i=e.rowModelHelperService)==null?void 0:i.getClientSideRowModel())==null?void 0:s.updateRowData(t)})}function l9(e,t,i){e.frameworkOverrides.wrapIncoming(()=>{var s,n;return(n=(s=e.rowModelHelperService)==null?void 0:s.getClientSideRowModel())==null?void 0:n.batchUpdateRowData(t,i)})}function c9(e){e.frameworkOverrides.wrapIncoming(()=>{var t,i;return(i=(t=e.rowModelHelperService)==null?void 0:t.getClientSideRowModel())==null?void 0:i.flushAsyncTransactions()})}function u9(e){return e.selectionService.getBestCostNodeSelection()}var h9=class extends de{constructor(){super(...arguments),this.beanName="filterStage"}wireBeans(e){this.filterManager=e.filterManager}execute(e){const{changedPath:t}=e;this.filter(t)}filter(e){var i;const t=!!((i=this.filterManager)!=null&&i.isChildFilterPresent());this.filterNodes(t,e)}filterNodes(e,t){const i=(s,n)=>{s.hasChildren()&&e&&!n?s.childrenAfterFilter=s.childrenAfterGroup.filter(r=>{const o=r.childrenAfterFilter&&r.childrenAfterFilter.length>0,a=r.data&&this.filterManager.doesRowPassFilter({rowNode:r});return o||a}):s.childrenAfterFilter=s.childrenAfterGroup,s.sibling&&(s.sibling.childrenAfterFilter=s.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const s=(r,o)=>{if(r.childrenAfterGroup)for(let a=0;a<r.childrenAfterGroup.length;a++){const l=r.childrenAfterGroup[a],c=o||this.filterManager.doesRowPassFilter({rowNode:l});l.childrenAfterGroup?s(r.childrenAfterGroup[a],c):i(l,c)}i(r,o)},n=r=>s(r,!1);t.executeFromRootNode(n)}else{const s=n=>i(n,!1);t.forEachChangedNodeDepthFirst(s,!0)}}doingTreeDataFiltering(){return this.gos.get("treeData")&&!this.gos.get("excludeChildrenWhenTreeDataFiltering")}},d9=class extends de{constructor(){super(...arguments),this.beanName="flattenStage"}wireBeans(e){this.beans=e,this.columnModel=e.columnModel}execute(e){const t=e.rowNode,i=[],s=this.columnModel.isPivotMode(),n=s&&t.leafGroup,r=n?[t]:t.childrenAfterSort,o=this.getFlattenDetails();this.recursivelyAddToRowsToDisplay(o,r,i,s,0);const a=i.length>0;if(!n&&a&&o.grandTotalRow){t.createFooter();const c=o.grandTotalRow==="top";this.addRowNodeToRowsToDisplay(o,t.sibling,i,0,c)}return i}getFlattenDetails(){const e=this.gos.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gos.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:bF(this.gos),hideOpenParents:this.gos.get("groupHideOpenParents"),grandTotalRow:wF(this.gos),groupTotalRow:xF(this.gos)}}recursivelyAddToRowsToDisplay(e,t,i,s,n){if(!hr(t))for(let r=0;r<t.length;r++){const o=t[r],a=o.hasChildren(),l=s&&!a,c=e.groupRemoveSingleChildren&&a&&o.childrenAfterGroup.length===1,p=e.groupRemoveLowestSingleChildren&&a&&o.leafGroup&&o.childrenAfterGroup.length===1,g=s&&o.leafGroup,f=e.hideOpenParents&&o.expanded&&!o.master&&!g;if(!l&&!f&&!c&&!p&&this.addRowNodeToRowsToDisplay(e,o,i,n),!(s&&o.leafGroup)){if(a){const C=c||p;if(o.expanded||C){const x=e.groupTotalRow({node:o});x||o.destroyFooter();const M=C?n:n+1;x==="top"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,i,M)),this.recursivelyAddToRowsToDisplay(e,o.childrenAfterSort,i,s,M),x==="bottom"&&(o.createFooter(),this.addRowNodeToRowsToDisplay(e,o.sibling,i,M))}}else if(o.master&&o.expanded){const C=this.createDetailNode(o);this.addRowNodeToRowsToDisplay(e,C,i,n)}}}}addRowNodeToRowsToDisplay(e,t,i,s,n){n?i.unshift(t):i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:s)}createDetailNode(e){if(Ae(e.detailNode))return e.detailNode;const t=new gl(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,Ae(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}},p9=class extends de{constructor(){super(...arguments),this.beanName="immutableService"}wireBeans(e){this.rowModel=e.rowModel,this.selectionService=e.selectionService}postConstruct(){xi(this.gos)&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const e=this.gos.exists("getRowId");return this.gos.get("resetRowDataOnUpdate")?!1:e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const i=this.clientSideRowModel.getNodeManager(),{rowNodeTransaction:s,rowsInserted:n}=i.updateRowData(t);let r=!1;this.gos.get("suppressMaintainUnsortedOrder")||(r=i.updateRowOrderFromRowData(e)),this.clientSideRowModel.afterImmutableDataChange(s,r||n)}createTransactionForRowData(e){if(!xi(this.gos))return Ut("ImmutableService only works with ClientSideRowModel"),null;const t=vp(this.gos);if(t==null)return Ut("ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!"),null;const i=this.clientSideRowModel.getNodeManager().getCopyOfNodesMap(),s=[],n=[],r=[];return Ae(e)&&e.forEach(o=>{const a=t({data:o,level:0}),l=i[a];l?(l.data!==o&&n.push(o),i[a]=void 0):r.push(o)}),bo(i,(o,a)=>{a&&s.push(a.data)}),{remove:s,update:n,add:r}}onRowDataUpdated(){const e=this.gos.get("rowData");e&&(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}},g9=class extends de{constructor(){super(...arguments),this.beanName="sortService"}wireBeans(e){this.columnModel=e.columnModel,this.funcColsService=e.funcColsService,this.rowNodeSorter=e.rowNodeSorter,this.showRowGroupColsService=e.showRowGroupColsService}sort(e,t,i,s,n,r){const o=this.gos.get("groupMaintainOrder"),a=this.columnModel.getCols().some(f=>f.isRowGroupActive());let l={};i&&s&&(l=this.calculateDirtyNodes(s));const c=this.columnModel.isPivotMode(),p=this.gos.getCallback("postSortRows"),g=f=>{var x;this.pullDownGroupDataForHideOpenParents(f.childrenAfterAggFilter,!0);const y=c&&f.leafGroup;if(o&&a&&!f.leafGroup&&!r){const M=(x=this.funcColsService.getRowGroupColumns())==null?void 0:x[f.level+1],b=(M==null?void 0:M.getSort())===null,R=f.childrenAfterAggFilter.slice(0);if(f.childrenAfterSort&&!b){const I={};f.childrenAfterSort.forEach((P,k)=>{I[P.id]=k}),R.sort((P,k)=>(I[P.id]??0)-(I[k.id]??0))}f.childrenAfterSort=R}else!t||y?f.childrenAfterSort=f.childrenAfterAggFilter.slice(0):i?f.childrenAfterSort=this.doDeltaSort(f,l,n,e):f.childrenAfterSort=this.rowNodeSorter.doFullSort(f.childrenAfterAggFilter,e);if(f.sibling&&(f.sibling.childrenAfterSort=f.childrenAfterSort),this.updateChildIndexes(f),p){const M={nodes:f.childrenAfterSort};p(M)}};n&&n.forEachChangedNodeDepthFirst(g),this.updateGroupDataForHideOpenParents(n)}calculateDirtyNodes(e){const t={},i=s=>{s&&s.forEach(n=>t[n.id]=!0)};return e&&e.forEach(s=>{i(s.add),i(s.update),i(s.remove)}),t}doDeltaSort(e,t,i,s){const n=e.childrenAfterAggFilter,r=e.childrenAfterSort;if(!r)return this.rowNodeSorter.doFullSort(n,s);const o={},a=[];n.forEach(g=>{t[g.id]||!i.canSkip(g)?a.push(g):o[g.id]=!0});const l=r.filter(g=>o[g.id]),c=(g,f)=>({currentPos:f,rowNode:g}),p=a.map(c).sort((g,f)=>this.rowNodeSorter.compareRowNodes(s,g,f));return this.mergeSortedArrays(s,p,l.map(c)).map(({rowNode:g})=>g)}mergeSortedArrays(e,t,i){const s=[];let n=0,r=0;for(;n<t.length&&r<i.length;)this.rowNodeSorter.compareRowNodes(e,t[n],i[r])<0?s.push(t[n++]):s.push(i[r++]);for(;n<t.length;)s.push(t[n++]);for(;r<i.length;)s.push(i[r++]);return s}updateChildIndexes(e){if(Pt(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const s=t[i],n=i===0,r=i===e.childrenAfterSort.length-1;s.setFirstChild(n),s.setLastChild(r),s.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gos.get("groupHideOpenParents"))return;if(this.gos.get("treeData"))return we("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(s=>{s.hasChildren()&&t(s)})};e&&e.executeFromRootNode(i=>t(i))}pullDownGroupDataForHideOpenParents(e,t){!this.gos.get("groupHideOpenParents")||Pt(e)||e.forEach(i=>{var n;(((n=this.showRowGroupColsService)==null?void 0:n.getShowRowGroupCols())??[]).forEach(r=>{const o=r.getColDef().showRowGroup;if(typeof o!="string"){Ut("groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");return}const a=o,l=this.columnModel.getColDefCol(a);if(l!==i.rowGroupColumn)if(t)i.setGroupValue(r.getId(),void 0);else{const p=this.getFirstChildOfFirstChild(i,l);p&&i.setGroupValue(r.getId(),p.key)}})})}getFirstChildOfFirstChild(e,t){let i=e;for(;i;){const s=i.parent;if(s&&i.firstChild){if(s.rowGroupColumn===t)return s}else return null;i=s}return null}},f9=class extends de{constructor(){super(...arguments),this.beanName="sortStage"}wireBeans(e){this.sortService=e.sortService,this.sortController=e.sortController}execute(e){const t=this.sortController.getSortOptions(),i=Ae(t)&&t.length>0,s=i&&Ae(e.rowNodeTransactions)&&this.gos.get("deltaSort"),n=t.some(r=>na(this.gos)?r.column.isPrimary()&&r.column.isRowGroupActive():!!r.column.getColDef().showRowGroup);this.sortService.sort(t,i,s,e.rowNodeTransactions,e.changedPath,n)}},$0="32.3.3",uN={version:$0,moduleName:"@ag-grid-community/client-side-row-model-core",rowModel:"clientSide",beans:[JZ,h9,f9,d9,g9,p9]},m9={version:$0,moduleName:"@ag-grid-community/client-side-row-model-api",beans:[cN],apiFunctions:{onGroupExpandedOrCollapsed:e9,refreshClientSideRowModel:t9,isRowDataEmpty:i9,forEachLeafNode:s9,forEachNodeAfterFilter:n9,forEachNodeAfterFilterAndSort:r9,resetRowHeights:o9,applyTransaction:a9,applyTransactionAsync:l9,flushAsyncTransactions:c9,getBestCostNodeSelection:u9},dependantModules:[uN,$Z]},v9={version:$0,moduleName:"@ag-grid-community/client-side-row-model",dependantModules:[uN,m9]},y9=class extends de{setBeans(e){this.beans=e}getFileName(e){const t=this.getDefaultFileExtension();return(e==null||!e.length)&&(e=this.getDefaultFileName()),e.indexOf(".")===-1?`${e}.${t}`:e}getData(e){const t=this.createSerializingSession(e);return this.beans.gridSerializer.serialize(t,e)}getDefaultFileName(){return`export.${this.getDefaultFileExtension()}`}},C9=class{constructor(e){this.groupColumns=[];const{columnModel:t,funcColsService:i,columnNameService:s,valueService:n,gos:r,processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c}=e;this.columnModel=t,this.funcColsService=i,this.columnNameService=s,this.valueService=n,this.gos=r,this.processCellCallback=o,this.processHeaderCallback=a,this.processGroupHeaderCallback=l,this.processRowGroupCallback=c}prepare(e){this.groupColumns=e.filter(t=>!!t.getColDef().showRowGroup)}extractHeaderValue(e){return this.getHeaderName(this.processHeaderCallback,e)??""}extractRowCellValue(e,t,i,s,n){const o=(!this.gos.get("groupHideOpenParents")||n.footer)&&this.shouldRenderGroupSummaryCell(n,e,t)?this.createValueForGroupNode(e,n):this.valueService.getValue(e,n);return this.processCell({accumulatedRowIndex:i,rowNode:n,column:e,value:o,processCellCallback:this.processCellCallback,type:s})}shouldRenderGroupSummaryCell(e,t,i){var o;if(!(e&&e.group))return!1;if(this.groupColumns.indexOf(t)!==-1){const a=(o=e.groupData)==null?void 0:o[t.getId()],l=this.gos.get("suppressGroupMaintainValueType");if(l&&a!=null||!l&&a!==void 0||ya(this.gos)&&e.group)return!0;if(e.footer&&e.level===-1){const c=t.getColDef();return c==null||c.showRowGroup===!0||c.showRowGroup===this.funcColsService.getRowGroupColumns()[0].getId()}}const r=AC(this.gos,this.columnModel.isPivotMode());return i===0&&r}getHeaderName(e,t){return e?e(this.gos.addGridCommonParams({column:t})):this.columnNameService.getDisplayNameForColumn(t,"csv",!0)}createValueForGroupNode(e,t){if(this.processRowGroupCallback)return this.processRowGroupCallback(this.gos.addGridCommonParams({column:e,node:t}));const i=this.gos.get("treeData"),s=this.gos.get("suppressGroupMaintainValueType"),n=l=>{var p;if(i||s)return l.key;const c=(p=l.groupData)==null?void 0:p[e.getId()];return!c||!l.rowGroupColumn||l.rowGroupColumn.getColDef().useValueFormatterForExport===!1?c:this.valueService.formatValue(l.rowGroupColumn,l,c)??c},r=t.footer,o=[n(t)];if(!bF(this.gos))for(;t.parent;)t=t.parent,o.push(n(t));const a=o.reverse().join(" -> ");return r?`Total ${a}`:a}processCell(e){const{accumulatedRowIndex:t,rowNode:i,column:s,value:n,processCellCallback:r,type:o}=e;return r?{value:r(this.gos.addGridCommonParams({accumulatedRowIndex:t,column:s,node:i,value:n,type:o,parseValue:a=>this.valueService.parseValue(s,i,a,this.valueService.getValue(s,i)),formatValue:a=>this.valueService.formatValue(s,i,a)??a}))??""}:s.getColDef().useValueFormatterForExport!==!1?{value:n??"",valueFormatted:this.valueService.formatValue(s,i,n)}:{value:n??""}}},S9=class{static download(e,t){const i=document.defaultView||window;if(!i){we("There is no `window` associated with the current `document`");return}const s=document.createElement("a"),n=i.URL.createObjectURL(t);s.setAttribute("href",n),s.setAttribute("download",e),s.style.display="none",document.body.appendChild(s),s.dispatchEvent(new MouseEvent("click",{bubbles:!1,cancelable:!0,view:i})),document.body.removeChild(s),i.setTimeout(()=>{i.URL.revokeObjectURL(n)},0)}},RT=`\r
`,w9=class extends C9{constructor(e){super(e),this.isFirstLine=!0,this.result="";const{suppressQuotes:t,columnSeparator:i}=e;this.suppressQuotes=t,this.columnSeparator=i}addCustomContent(e){e&&(typeof e=="string"?(/^\s*\n/.test(e)||this.beginNewLine(),e=e.replace(/\r?\n/g,RT),this.result+=e):e.forEach(t=>{this.beginNewLine(),t.forEach((i,s)=>{s!==0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(i.data.value||""),i.mergeAcross&&this.appendEmptyCells(i.mergeAcross)})}))}onNewHeaderGroupingRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderGroupingRowColumn.bind(this)}}onNewHeaderGroupingRowColumn(e,t,i,s){i!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(t),this.appendEmptyCells(s)}appendEmptyCells(e){for(let t=1;t<=e;t++)this.result+=this.columnSeparator+this.putInQuotes("")}onNewHeaderRow(){return this.beginNewLine(),{onColumn:this.onNewHeaderRowColumn.bind(this)}}onNewHeaderRowColumn(e,t){t!=0&&(this.result+=this.columnSeparator),this.result+=this.putInQuotes(this.extractHeaderValue(e))}onNewBodyRow(){return this.beginNewLine(),{onColumn:this.onNewBodyRowColumn.bind(this)}}onNewBodyRowColumn(e,t,i){t!=0&&(this.result+=this.columnSeparator);const s=this.extractRowCellValue(e,t,t,"csv",i);this.result+=this.putInQuotes(s.valueFormatted??s.value)}putInQuotes(e){if(this.suppressQuotes)return e;if(e==null)return'""';let t;return typeof e=="string"?t=e:typeof e.toString=="function"?t=e.toString():(we("unknown value type during csv conversion"),t=""),'"'+t.replace(/"/g,'""')+'"'}parse(){return this.result}beginNewLine(){this.isFirstLine||(this.result+=RT),this.isFirstLine=!1}},x9=class extends y9{constructor(){super(...arguments),this.beanName="csvCreator"}wireBeans(e){this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.funcColsService=e.funcColsService,this.valueService=e.valueService,this.gridSerializer=e.gridSerializer}postConstruct(){this.setBeans({gridSerializer:this.gridSerializer,gos:this.gos})}getMergedParams(e){const t=this.gos.get("defaultCsvExportParams");return Object.assign({},t,e)}export(e){if(this.isExportSuppressed()){we("Export cancelled. Export is not allowed as per your configuration.");return}const t=this.getMergedParams(e),i=this.getData(t),s=new Blob(["\uFEFF",i],{type:"text/plain"}),n=typeof t.fileName=="function"?t.fileName(this.gos.getGridCommonParams()):t.fileName;S9.download(this.getFileName(n),s)}exportDataAsCsv(e){this.export(e)}getDataAsCsv(e,t=!1){const i=t?Object.assign({},e):this.getMergedParams(e);return this.getData(i)}getDefaultFileExtension(){return"csv"}createSerializingSession(e){const{columnModel:t,columnNameService:i,funcColsService:s,valueService:n,gos:r}=this,{processCellCallback:o,processHeaderCallback:a,processGroupHeaderCallback:l,processRowGroupCallback:c,suppressQuotes:p,columnSeparator:g}=e;return new w9({columnModel:t,columnNameService:i,funcColsService:s,valueService:n,gos:r,processCellCallback:o||void 0,processHeaderCallback:a||void 0,processGroupHeaderCallback:l||void 0,processRowGroupCallback:c||void 0,suppressQuotes:p||!1,columnSeparator:g||","})}isExportSuppressed(){return this.gos.get("suppressCsvExport")}};function b9(e,t){var i;return(i=e.csvCreator)==null?void 0:i.getDataAsCsv(t)}function M9(e,t){var i;(i=e.csvCreator)==null||i.exportDataAsCsv(t)}var R9=class extends de{constructor(){super(...arguments),this.beanName="gridSerializer"}wireBeans(e){this.visibleColsService=e.visibleColsService,this.columnModel=e.columnModel,this.columnNameService=e.columnNameService,this.rowModel=e.rowModel,this.pinnedRowModel=e.pinnedRowModel,this.selectionService=e.selectionService,this.rowNodeSorter=e.rowNodeSorter,this.sortController=e.sortController}serialize(e,t={}){const{allColumns:i,columnKeys:s,skipRowGroups:n}=t,r=this.getColumnsToExport(i,n,s);return tW(this.prepareSession(r),this.prependContent(t),this.exportColumnGroups(t,r),this.exportHeaders(t,r),this.processPinnedTopRows(t,r),this.processRows(t,r),this.processPinnedBottomRows(t,r),this.appendContent(t))(e).parse()}processRow(e,t,i,s){var b;const n=t.shouldRowBeSkipped||(()=>!1),r=this.gos.get("groupRemoveSingleChildren"),o=this.gos.get("groupRemoveLowestSingleChildren"),l=t.rowPositions!=null||!!t.onlySelected,c=this.gos.get("groupHideOpenParents")&&!l,p=this.columnModel.isPivotMode()?s.leafGroup:!s.group,g=!!s.footer,f=o&&s.leafGroup,y=s.allChildrenCount===1&&((b=s.childrenAfterGroup)==null?void 0:b.length)===1&&(r||f);if(!p&&!g&&(t.skipRowGroups||y||c)||t.onlySelected&&!s.isSelected()||t.skipPinnedTop&&s.rowPinned==="top"||t.skipPinnedBottom&&s.rowPinned==="bottom"||s.level===-1&&!p&&!g||n(this.gos.addGridCommonParams({node:s})))return;const M=e.onNewBodyRow(s);if(i.forEach((R,I)=>{M.onColumn(R,I,s)}),t.getCustomContentBelowRow){const R=t.getCustomContentBelowRow(this.gos.addGridCommonParams({node:s}));R&&e.addCustomContent(R)}}appendContent(e){return t=>{const i=e.appendContent;return i&&t.addCustomContent(i),t}}prependContent(e){return t=>{const i=e.prependContent;return i&&t.addCustomContent(i),t}}prepareSession(e){return t=>(t.prepare(e),t)}exportColumnGroups(e,t){return i=>{if(!e.skipColumnGroupHeaders){const s=new NF,n=this.visibleColsService.createGroups({columns:t,idCreator:s,pinned:null,isStandaloneStructure:!0});this.recursivelyAddHeaderGroups(n,i,e.processGroupHeaderCallback)}return i}}exportHeaders(e,t){return i=>{if(!e.skipColumnHeaders){const s=i.onNewHeaderRow();t.forEach((n,r)=>{s.onColumn(n,r,void 0)})}return i}}processPinnedTopRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="top").sort((n,r)=>n.rowIndex-r.rowIndex).map(n=>this.pinnedRowModel.getPinnedTopRow(n.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedRow("top",s),i}}processRows(e,t){return i=>{const s=this.rowModel,n=xi(this.gos),r=ya(this.gos),o=!n&&e.onlySelected,a=this.processRow.bind(this,i,e,t),{exportedRows:l="filteredAndSorted"}=e;if(e.rowPositions)e.rowPositions.filter(c=>c.rowPinned==null).sort((c,p)=>c.rowIndex-p.rowIndex).map(c=>s.getRow(c.rowIndex)).forEach(a);else if(this.columnModel.isPivotMode())n?s.forEachPivotNode(a,!0):r?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);else if(e.onlySelectedAllPages||o){const c=this.selectionService.getSelectedNodes();this.replicateSortedOrder(c),c.forEach(a)}else l==="all"?s.forEachNode(a):n||r?s.forEachNodeAfterFilterAndSort(a,!0):s.forEachNode(a);return i}}replicateSortedOrder(e){const t=this.sortController.getSortOptions(),i=(s,n)=>{var r,o;return s.rowIndex!=null&&n.rowIndex!=null?s.rowIndex-n.rowIndex:s.level===n.level?((r=s.parent)==null?void 0:r.id)===((o=n.parent)==null?void 0:o.id)?this.rowNodeSorter.compareRowNodes(t,{rowNode:s,currentPos:s.rowIndex??-1},{rowNode:n,currentPos:n.rowIndex??-1}):i(s.parent,n.parent):s.level>n.level?i(s.parent,n):i(s,n.parent)};e.sort(i)}processPinnedBottomRows(e,t){return i=>{const s=this.processRow.bind(this,i,e,t);return e.rowPositions?e.rowPositions.filter(n=>n.rowPinned==="bottom").sort((n,r)=>n.rowIndex-r.rowIndex).map(n=>this.pinnedRowModel.getPinnedBottomRow(n.rowIndex)).forEach(s):this.pinnedRowModel.forEachPinnedRow("bottom",s),i}}getColumnsToExport(e=!1,t=!1,i){const s=this.columnModel.isPivotMode();if(i&&i.length)return this.columnModel.getColsForKeys(i);const n=this.gos.get("treeData");let r=[];return e&&!s?r=this.columnModel.getCols():r=this.visibleColsService.getAllCols(),t&&!n&&(r=r.filter(o=>Ub(o)||sm(o))),r}recursivelyAddHeaderGroups(e,t,i){const s=[];e.forEach(n=>{const r=n;r.getChildren&&r.getChildren().forEach(o=>s.push(o))}),e.length>0&&qi(e[0])&&this.doAddHeaderHeader(t,e,i),s&&s.length>0&&this.recursivelyAddHeaderGroups(s,t,i)}doAddHeaderHeader(e,t,i){const s=e.onNewHeaderGroupingRow();let n=0;t.forEach(r=>{const o=r;let a;i?a=i(this.gos.addGridCommonParams({columnGroup:o})):a=this.columnNameService.getDisplayNameForColumnGroup(o,"header");const l=o.getLeafColumns().reduce((c,p,g,f)=>{let y=At(c);return p.getColumnGroupShow()==="open"?(!y||y[1]!=null)&&(y=[g],c.push(y)):y&&y[1]==null&&(y[1]=g-1),g===f.length-1&&y&&y[1]==null&&(y[1]=g),c},[]);s.onColumn(o,a||"",n++,o.getLeafColumns().length-1,l)})}},Z0="32.3.3",hN={version:Z0,moduleName:"@ag-grid-community/csv-export-core",beans:[x9,R9]},D9={version:Z0,moduleName:"@ag-grid-community/csv-export-api",apiFunctions:{getDataAsCsv:b9,exportDataAsCsv:M9},dependantModules:[hN]},E9={version:Z0,moduleName:"@ag-grid-community/csv-export",dependantModules:[hN,D9]},I9=class extends AK{wireBeans(e){this.beans=e}constructor(e,t,i){super(e),this.parentCache=t,this.params=i,this.startRow=e*i.blockSize,this.endRow=this.startRow+i.blockSize}postConstruct(){this.createRowNodes()}getBlockStateJson(){return{id:""+this.getId(),state:{blockNumber:this.getId(),startRow:this.getStartRow(),endRow:this.getEndRow(),pageStatus:this.getState()}}}setDataAndId(e,t,i){Ae(t)?e.setDataAndId(t,i.toString()):e.setDataAndId(void 0,void 0)}loadFromDatasource(){const e=this.createLoadParams();if(Pt(this.params.datasource.getRows)){we("datasource is missing getRows method");return}window.setTimeout(()=>{this.params.datasource.getRows(e)},0)}processServerFail(){}createLoadParams(){return{startRow:this.getStartRow(),endRow:this.getEndRow(),successCallback:this.pageLoaded.bind(this,this.getVersion()),failCallback:this.pageLoadFailed.bind(this,this.getVersion()),sortModel:this.params.sortModel,filterModel:this.params.filterModel,context:this.gos.getGridCommonParams().context}}forEachNode(e,t,i){this.rowNodes.forEach((s,n)=>{this.startRow+n<i&&e(s,t.next())})}getLastAccessed(){return this.lastAccessed}getRow(e,t=!1){t||(this.lastAccessed=this.params.lastAccessedSequence.next());const i=e-this.startRow;return this.rowNodes[i]}getStartRow(){return this.startRow}getEndRow(){return this.endRow}createRowNodes(){this.rowNodes=[];for(let e=0;e<this.params.blockSize;e++){const t=this.startRow+e,i=new gl(this.beans);i.setRowHeight(this.params.rowHeight),i.uiLevel=0,i.setRowIndex(t),i.setRowTop(this.params.rowHeight*t),this.rowNodes.push(i)}}processServerResult(e){this.rowNodes.forEach((i,s)=>{const n=e.rowData?e.rowData[s]:void 0;!i.id&&i.alreadyRendered&&n&&(this.rowNodes[s]=new gl(this.beans),this.rowNodes[s].setRowIndex(i.rowIndex),this.rowNodes[s].setRowTop(i.rowTop),this.rowNodes[s].setRowHeight(i.rowHeight),i.clearRowTopAndRowIndex()),this.setDataAndId(this.rowNodes[s],n,this.startRow+s)});const t=e.rowCount!=null&&e.rowCount>=0?e.rowCount:void 0;this.parentCache.pageLoaded(this,t)}destroy(){this.rowNodes.forEach(e=>{e.clearRowTopAndRowIndex()}),super.destroy()}},L9=2,T9=class extends de{constructor(e){super(),this.lastRowIndexKnown=!1,this.blocks={},this.blockCount=0,this.rowCount=e.initialRowCount,this.params=e}wireBeans(e){this.rowRenderer=e.rowRenderer,this.focusService=e.focusService}getRow(e,t=!1){const i=Math.floor(e/this.params.blockSize);let s=this.blocks[i];if(!s){if(t)return;s=this.createBlock(i)}return s.getRow(e)}createBlock(e){const t=this.createBean(new I9(e,this,this.params));return this.blocks[t.getId()]=t,this.blockCount++,this.purgeBlocksIfNeeded(t),this.params.rowNodeBlockLoader.addBlock(t),t}refreshCache(){if(this.blockCount==0){this.purgeCache();return}this.getBlocksInOrder().forEach(t=>t.setStateWaitingToLoad()),this.params.rowNodeBlockLoader.checkBlockToLoad()}destroy(){this.getBlocksInOrder().forEach(e=>this.destroyBlock(e)),super.destroy()}getRowCount(){return this.rowCount}isLastRowIndexKnown(){return this.lastRowIndexKnown}pageLoaded(e,t){this.isAlive()&&(this.gos.get("debug")&&Do(`InfiniteCache - onPageLoaded: page = ${e.getId()}, lastRow = ${t}`),this.checkRowCount(e,t),this.onCacheUpdated())}purgeBlocksIfNeeded(e){const t=this.getBlocksInOrder().filter(o=>o!=e),i=(o,a)=>a.getLastAccessed()-o.getLastAccessed();t.sort(i);const s=this.params.maxBlocksInCache>0,n=s?this.params.maxBlocksInCache-1:null,r=L9-1;t.forEach((o,a)=>{const l=o.getState()==="needsLoading"&&a>=r,c=s?a>=n:!1;if(l||c){if(this.isBlockCurrentlyDisplayed(o)||this.isBlockFocused(o))return;this.removeBlockFromCache(o)}})}isBlockFocused(e){const t=this.focusService.getFocusCellToUseAfterRefresh();if(!t||t.rowPinned!=null)return!1;const i=e.getStartRow(),s=e.getEndRow();return t.rowIndex>=i&&t.rowIndex<s}isBlockCurrentlyDisplayed(e){const t=e.getStartRow(),i=e.getEndRow()-1;return this.rowRenderer.isRangeInRenderedViewport(t,i)}removeBlockFromCache(e){e&&this.destroyBlock(e)}checkRowCount(e,t){if(typeof t=="number"&&t>=0)this.rowCount=t,this.lastRowIndexKnown=!0;else if(!this.lastRowIndexKnown){const s=(e.getId()+1)*this.params.blockSize+this.params.overflowSize;this.rowCount<s&&(this.rowCount=s)}}setRowCount(e,t){this.rowCount=e,Ae(t)&&(this.lastRowIndexKnown=t),this.lastRowIndexKnown||this.rowCount%this.params.blockSize===0&&this.rowCount++,this.onCacheUpdated()}forEachNodeDeep(e){const t=new up;this.getBlocksInOrder().forEach(i=>i.forEachNode(e,t,this.rowCount))}getBlocksInOrder(){const e=(i,s)=>i.getId()-s.getId();return Yb(this.blocks).sort(e)}destroyBlock(e){delete this.blocks[e.getId()],this.destroyBean(e),this.blockCount--,this.params.rowNodeBlockLoader.removeBlock(e)}onCacheUpdated(){this.isAlive()&&(this.destroyAllBlocksPastVirtualRowCount(),this.eventService.dispatchEvent({type:"storeUpdated"}))}destroyAllBlocksPastVirtualRowCount(){const e=[];this.getBlocksInOrder().forEach(t=>{t.getId()*this.params.blockSize>=this.rowCount&&e.push(t)}),e.length>0&&e.forEach(t=>this.destroyBlock(t))}purgeCache(){this.getBlocksInOrder().forEach(e=>this.removeBlockFromCache(e)),this.lastRowIndexKnown=!1,this.rowCount===0&&(this.rowCount=this.params.initialRowCount),this.onCacheUpdated()}getRowNodesInRange(e,t){const i=[];let s=-1,n=!1;const r=new up;let o=!1;return this.getBlocksInOrder().forEach(l=>{if(!o){if(n&&s+1!==l.getId()){o=!0;return}s=l.getId(),l.forEachNode(c=>{const p=c===e||c===t;(n||p)&&i.push(c),p&&(n=!n)},r,this.rowCount)}}),o||n?[]:i}},A9=class extends de{constructor(){super(...arguments),this.beanName="rowModel"}wireBeans(e){this.filterManager=e.filterManager,this.sortController=e.sortController,this.selectionService=e.selectionService,this.rowRenderer=e.rowRenderer,this.rowNodeBlockLoader=e.rowNodeBlockLoader}getRowBounds(e){return{rowHeight:this.rowHeight,rowTop:this.rowHeight*e}}ensureRowHeightsValid(){return!1}postConstruct(){this.gos.get("rowModelType")==="infinite"&&(this.rowHeight=uh(this.gos),this.addEventListeners(),this.addDestroyFunc(()=>this.destroyCache()),this.verifyProps())}verifyProps(){this.gos.exists("initialGroupOrderComparator")&&we("initialGroupOrderComparator cannot be used with Infinite Row Model as sorting is done on the server side")}start(){this.setDatasource(this.gos.get("datasource"))}destroy(){this.destroyDatasource(),super.destroy()}destroyDatasource(){this.datasource&&(this.destroyBean(this.datasource),this.rowRenderer.datasourceChanged(),this.datasource=null)}addEventListeners(){this.addManagedEventListeners({filterChanged:this.onFilterChanged.bind(this),sortChanged:this.onSortChanged.bind(this),newColumnsLoaded:this.onColumnEverything.bind(this),storeUpdated:this.onCacheUpdated.bind(this)}),this.addManagedPropertyListener("datasource",()=>this.setDatasource(this.gos.get("datasource"))),this.addManagedPropertyListener("cacheBlockSize",()=>this.resetCache()),this.addManagedPropertyListener("rowHeight",()=>{this.rowHeight=uh(this.gos),this.cacheParams.rowHeight=this.rowHeight,this.updateRowHeights()})}onFilterChanged(){this.reset()}onSortChanged(){this.reset()}onColumnEverything(){let e;this.cacheParams?e=this.isSortModelDifferent():e=!0,e&&this.reset()}isSortModelDifferent(){return!Cf(this.cacheParams.sortModel,this.sortController.getSortModel())}getType(){return"infinite"}setDatasource(e){this.destroyDatasource(),this.datasource=e,e&&this.reset()}isEmpty(){return!this.infiniteCache}isRowsToRender(){return!!this.infiniteCache}getNodesInRangeForSelection(e,t){return this.infiniteCache?this.infiniteCache.getRowNodesInRange(e,t):[]}reset(){if(!this.datasource)return;vp(this.gos)!=null||this.selectionService.reset("rowDataChanged"),this.resetCache()}dispatchModelUpdatedEvent(){this.eventService.dispatchEvent({type:"modelUpdated",newPage:!1,newPageSize:!1,newData:!1,keepRenderedRows:!0,animate:!1})}resetCache(){var e;this.destroyCache(),this.cacheParams={datasource:this.datasource,filterModel:((e=this.filterManager)==null?void 0:e.getFilterModel())??{},sortModel:this.sortController.getSortModel(),rowNodeBlockLoader:this.rowNodeBlockLoader,initialRowCount:this.gos.get("infiniteInitialRowCount"),maxBlocksInCache:this.gos.get("maxBlocksInCache"),rowHeight:uh(this.gos),overflowSize:this.gos.get("cacheOverflowSize"),blockSize:this.gos.get("cacheBlockSize"),lastAccessedSequence:new up},this.infiniteCache=this.createBean(new T9(this.cacheParams)),this.eventService.dispatchEventOnce({type:"rowCountReady"}),this.dispatchModelUpdatedEvent()}updateRowHeights(){this.forEachNode(e=>{e.setRowHeight(this.rowHeight),e.setRowTop(this.rowHeight*e.rowIndex)}),this.dispatchModelUpdatedEvent()}destroyCache(){this.infiniteCache&&(this.infiniteCache=this.destroyBean(this.infiniteCache))}onCacheUpdated(){this.dispatchModelUpdatedEvent()}getRow(e){if(this.infiniteCache&&!(e>=this.infiniteCache.getRowCount()))return this.infiniteCache.getRow(e)}getRowNode(e){let t;return this.forEachNode(i=>{i.id===e&&(t=i)}),t}forEachNode(e){this.infiniteCache&&this.infiniteCache.forEachNodeDeep(e)}getTopLevelRowCount(){return this.getRowCount()}getTopLevelRowDisplayedIndex(e){return e}getRowIndexAtPixel(e){if(this.rowHeight!==0){const t=Math.floor(e/this.rowHeight),i=this.getRowCount()-1;return t>i?i:t}return 0}getRowCount(){return this.infiniteCache?this.infiniteCache.getRowCount():0}isRowPresent(e){return!!this.getRowNode(e.id)}refreshCache(){this.infiniteCache&&this.infiniteCache.refreshCache()}purgeCache(){this.infiniteCache&&this.infiniteCache.purgeCache()}isLastRowIndexKnown(){return this.infiniteCache?this.infiniteCache.isLastRowIndexKnown():!1}setRowCount(e,t){this.infiniteCache&&this.infiniteCache.setRowCount(e,t)}};function P9(e){var t,i;(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null||i.refreshCache()}function F9(e){var t,i;(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null||i.purgeCache()}function k9(e){var t,i;return(i=(t=e.rowModelHelperService)==null?void 0:t.getInfiniteRowModel())==null?void 0:i.getRowCount()}var X0="32.3.3",dN={version:X0,moduleName:"@ag-grid-community/infinite-row-model-core",rowModel:"infinite",beans:[A9],dependantModules:[FK]},N9={version:X0,moduleName:"@ag-grid-community/infinite-row-model-api",beans:[cN],apiFunctions:{refreshInfiniteCache:P9,purgeInfiniteCache:F9,getInfiniteRowCount:k9},dependantModules:[dN,ZZ]},O9={version:X0,moduleName:"@ag-grid-community/infinite-row-model",dependantModules:[dN,N9]};ra.__registerModules([sN,v9,O9,E9],!1,void 0);var $s=De.createContext({}),lm=(e,t,i,s)=>{if(!e||e.componentFromFramework||t.isDestroyed())return;const r=e.newAgStackInstance();if(r==null)return;let o,a,l=!1;return r.then(c=>{if(l){t.destroyBean(c);return}o=c,a=o.getGui(),i.appendChild(a),DT(s,o)}),()=>{var c;l=!0,o&&((c=a==null?void 0:a.parentElement)==null||c.removeChild(a),t.destroyBean(o),s&&DT(s,void 0))}},DT=(e,t)=>{if(e)if(e instanceof Function)e(t);else{const i=e;i.current=t}},So=(...e)=>e.filter(i=>i!=null&&i!=="").join(" "),Hr=class pN{constructor(...t){this.classesMap={},t.forEach(i=>{this.classesMap[i]=!0})}setClass(t,i){if(!!this.classesMap[t]==i)return this;const n=new pN;return n.classesMap={...this.classesMap},n.classesMap[t]=i,n}toString(){return Object.keys(this.classesMap).filter(i=>this.classesMap[i]).join(" ")}},xp=e=>{const t=()=>typeof Symbol=="function"&&Symbol.for,i=()=>t()?Symbol.for("react.memo"):60115;return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===i()},sP,aM=(sP=De.version)==null?void 0:sP.split(".")[0],_9=aM==="16"||aM==="17";function B9(){return aM==="19"}var yy=!1;function G9(e){return yy||setTimeout(()=>yy=!1,0),yy=!0,e()}var Q0=(e,t)=>{!_9&&e&&!yy?rh.flushSync(t):t()};function q0(e,t,i){if(t==null||e==null)return t;if(e===t||t.length===0&&e.length===0)return e;if(i||e.length===0&&t.length>0||e.length>0&&t.length===0)return t;const s=[],n=[],r=new Map,o=new Map;for(let a=0;a<t.length;a++){const l=t[a];o.set(l.instanceId,l)}for(let a=0;a<e.length;a++){const l=e[a];r.set(l.instanceId,l),o.has(l.instanceId)&&s.push(l)}for(let a=0;a<t.length;a++){const l=t[a],c=l.instanceId;r.has(c)||n.push(l)}return s.length===e.length&&n.length===0?e:s.length===0&&n.length===t.length?t:s.length===0?n:n.length===0?s:[...s,...n]}var gN=T.forwardRef((e,t)=>{var Se;const{ctrlsFactory:i,context:s}=T.useContext($s),n=T.useRef(null),r=T.useRef(null),o=T.useRef(null),a=T.useRef(null),l=T.useRef(null),c=T.useRef(),[p,g]=T.useState(),[f,y]=T.useState(),[C,x]=T.useState(),[M,b]=T.useState(()=>new Hr),[R,I]=T.useState(()=>new Hr("ag-hidden")),[P,k]=T.useState(()=>new Hr("ag-hidden")),[_,B]=T.useState(()=>new Hr("ag-invisible"));T.useImperativeHandle(t,()=>({refresh(){return!1}})),T.useLayoutEffect(()=>lm(p,s,r.current),[p]);const H=T.useCallback(K=>{if(n.current=K,!K){c.current=s.destroyBean(c.current);return}const pe={setInnerRenderer:(W,Q)=>{g(W),x(Q)},setChildCount:W=>y(W),addOrRemoveCssClass:(W,Q)=>b(ve=>ve.setClass(W,Q)),setContractedDisplayed:W=>k(Q=>Q.setClass("ag-hidden",!W)),setExpandedDisplayed:W=>I(Q=>Q.setClass("ag-hidden",!W)),setCheckboxVisible:W=>B(Q=>Q.setClass("ag-invisible",!W))},q=i.getInstance("groupCellRendererCtrl");q&&(c.current=s.createBean(q),c.current.init(pe,K,o.current,a.current,l.current,gN,e))},[]),V=T.useMemo(()=>`ag-cell-wrapper ${M.toString()}`,[M]),U=T.useMemo(()=>`ag-group-expanded ${R.toString()}`,[R]),$=T.useMemo(()=>`ag-group-contracted ${P.toString()}`,[P]),te=T.useMemo(()=>`ag-group-checkbox ${_.toString()}`,[_]),Ce=p&&p.componentFromFramework,be=Ce?p.componentClass:void 0,Re=p==null&&C!=null,oe=la(C,!0);return De.createElement("span",{className:V,ref:H,...e.colDef?{}:{role:(Se=c.current)==null?void 0:Se.getCellAriaRole()}},De.createElement("span",{className:U,ref:a}),De.createElement("span",{className:$,ref:l}),De.createElement("span",{className:te,ref:o}),De.createElement("span",{className:"ag-group-value",ref:r},Re&&De.createElement(De.Fragment,null,oe),Ce&&De.createElement(be,{...p.params})),De.createElement("span",{className:"ag-group-child-count"},f))}),ET=gN,J0=T.createContext({setMethods:()=>{}}),z9=e=>{const{initialProps:t,addUpdateCallback:i,CustomComponentClass:s,setMethods:n}=e,[{key:r,...o},a]=T.useState(t);return T.useEffect(()=>{i(l=>a(l))},[]),De.createElement(J0.Provider,{value:{setMethods:n}},De.createElement(s,{key:r,...o}))},H9=T.memo(z9),V9=0;function IT(){return`agPortalKey_${++V9}`}var fN=class{constructor(e,t,i,s){this.portal=null,this.oldPortal=null,this.reactComponent=e,this.portalManager=t,this.componentType=i,this.suppressFallbackMethods=!!s,this.statelessComponent=this.isStateless(this.reactComponent),this.key=IT(),this.portalKey=IT(),this.instanceCreated=this.isStatelessComponent()?Vi.resolve(!1):new Vi(n=>{this.resolveInstanceCreated=n})}getGui(){return this.eParentElement}getRootElement(){return this.eParentElement.firstChild}destroy(){this.componentInstance&&typeof this.componentInstance.destroy=="function"&&this.componentInstance.destroy();const e=this.portal;e&&this.portalManager.destroyPortal(e)}createParentElement(e){const t=this.portalManager.getComponentWrappingElement(),i=document.createElement(t||"div");return i.classList.add("ag-react-container"),e.reactContainer=i,i}addParentContainerStyleAndClasses(){this.componentInstance&&(this.componentInstance.getReactContainerStyle&&this.componentInstance.getReactContainerStyle()&&(we('Since v31.1 "getReactContainerStyle" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),Object.assign(this.eParentElement.style,this.componentInstance.getReactContainerStyle())),this.componentInstance.getReactContainerClasses&&this.componentInstance.getReactContainerClasses()&&(we('Since v31.1 "getReactContainerClasses" is deprecated. Apply styling directly to ".ag-react-container" if needed.'),this.componentInstance.getReactContainerClasses().forEach(t=>this.eParentElement.classList.add(t))))}statelessComponentRendered(){return this.eParentElement.childElementCount>0||this.eParentElement.childNodes.length>0}getFrameworkComponentInstance(){return this.componentInstance}isStatelessComponent(){return this.statelessComponent}getReactComponentName(){return this.reactComponent.name}getMemoType(){return this.hasSymbol()?Symbol.for("react.memo"):60115}hasSymbol(){return typeof Symbol=="function"&&Symbol.for}isStateless(e){return typeof e=="function"&&!(e.prototype&&e.prototype.isReactComponent)||typeof e=="object"&&e.$$typeof===this.getMemoType()}hasMethod(e){const t=this.getFrameworkComponentInstance();return!!t&&t[e]!=null||this.fallbackMethodAvailable(e)}callMethod(e,t){const i=this.getFrameworkComponentInstance();if(this.isStatelessComponent())return this.fallbackMethod(e,t&&t[0]?t[0]:{});if(!i){setTimeout(()=>this.callMethod(e,t));return}const s=i[e];if(s)return s.apply(i,t);if(this.fallbackMethodAvailable(e))return this.fallbackMethod(e,t&&t[0]?t[0]:{})}addMethod(e,t){this[e]=t}init(e){return this.eParentElement=this.createParentElement(e),this.createOrUpdatePortal(e),new Vi(t=>this.createReactComponent(t))}createOrUpdatePortal(e){this.isStatelessComponent()||(this.ref=t=>{var i;this.componentInstance=t,this.addParentContainerStyleAndClasses(),(i=this.resolveInstanceCreated)==null||i.call(this,!0),this.resolveInstanceCreated=void 0},e.ref=this.ref),this.reactElement=this.createElement(this.reactComponent,{...e,key:this.key}),this.portal=tm.createPortal(this.reactElement,this.eParentElement,this.portalKey)}createElement(e,t){return T.createElement(e,t)}createReactComponent(e){this.portalManager.mountReactPortal(this.portal,this,e)}rendered(){return this.isStatelessComponent()&&this.statelessComponentRendered()||!!(!this.isStatelessComponent()&&this.getFrameworkComponentInstance())}refreshComponent(e){this.oldPortal=this.portal,this.createOrUpdatePortal(e),this.portalManager.updateReactPortal(this.oldPortal,this.portal)}fallbackMethod(e,t){const i=this[`${e}Component`];if(!this.suppressFallbackMethods&&i)return i.bind(this)(t)}fallbackMethodAvailable(e){return this.suppressFallbackMethods?!1:!!this[`${e}Component`]}};function eR(e,t,i){e.forEach(s=>{const n=t[s];n&&(i[s]=n)})}var Sa=class extends fN{constructor(){super(...arguments),this.awaitUpdateCallback=new Vi(e=>{this.resolveUpdateCallback=e}),this.wrapperComponent=H9}init(e){return this.sourceParams=e,super.init(this.getProps())}addMethod(){}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}getFrameworkComponentInstance(){return this}createElement(e,t){return super.createElement(this.wrapperComponent,{initialProps:t,CustomComponentClass:e,setMethods:i=>this.setMethods(i),addUpdateCallback:i=>{this.updateCallback=()=>(i(this.getProps()),new Vi(s=>{setTimeout(()=>{s()})})),this.resolveUpdateCallback()}})}setMethods(e){this.providedMethods=e,eR(this.getOptionalMethods(),this.providedMethods,this)}getOptionalMethods(){return[]}getProps(){return{...this.sourceParams,key:this.key,ref:this.ref}}refreshProps(){return this.updateCallback?this.updateCallback():new Vi(e=>this.awaitUpdateCallback.then(()=>{this.updateCallback().then(()=>e())}))}},W9=class extends Sa{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},j9=class extends Sa{constructor(){super(...arguments),this.date=null,this.onDateChange=e=>this.updateDate(e)}getDate(){return this.date}setDate(e){this.date=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled"]}updateDate(e){this.setDate(e),this.sourceParams.onDateChanged()}getProps(){const e=super.getProps();return e.date=this.date,e.onDateChange=this.onDateChange,delete e.onDateChanged,e}},U9=class extends Sa{constructor(){super(...arguments),this.label="",this.icon=null,this.shake=!1}setIcon(e,t){this.icon=e,this.shake=t,this.refreshProps()}setLabel(e){this.label=e,this.refreshProps()}getProps(){const e=super.getProps(),{label:t,icon:i,shake:s}=this;return e.label=t,e.icon=i,e.shake=s,e}},K9=class extends Sa{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e),this.onUiChange=()=>this.sourceParams.filterChangedCallback(),this.expectingNewMethods=!0,this.hasBeenActive=!1}isFilterActive(){return this.model!=null}doesFilterPass(e){return this.providedMethods.doesFilterPass(e)}getModel(){return this.model}setModel(e){return this.expectingNewMethods=!0,this.model=e,this.hasBeenActive||(this.hasBeenActive=this.isFilterActive()),this.refreshProps()}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getOptionalMethods(){return["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onAnyFilterChanged"]}setMethods(e){var t;this.expectingNewMethods===!1&&this.hasBeenActive&&((t=this.providedMethods)==null?void 0:t.doesFilterPass)!==(e==null?void 0:e.doesFilterPass)&&setTimeout(()=>{this.sourceParams.filterChangedCallback()}),this.expectingNewMethods=!1,super.setMethods(e)}updateModel(e){this.setModel(e).then(()=>this.sourceParams.filterChangedCallback())}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e.onUiChange=this.onUiChange,delete e.filterChangedCallback,delete e.filterModifiedCallback,delete e.valueGetter,e}};function mN(e,t){e.parentFilterInstance(i=>{(i.setModel(t)||Vi.resolve()).then(()=>{e.filterParams.filterChangedCallback()})})}var Y9=class{constructor(e,t){this.floatingFilterParams=e,this.refreshProps=t,this.model=null,this.onModelChange=i=>this.updateModel(i)}getProps(){return{...this.floatingFilterParams,model:this.model,onModelChange:this.onModelChange}}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.floatingFilterParams=e,this.refreshProps()}setMethods(e){eR(this.getOptionalMethods(),e,this)}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),mN(this.floatingFilterParams,e)}},$9=class extends Sa{constructor(){super(...arguments),this.model=null,this.onModelChange=e=>this.updateModel(e)}onParentModelChanged(e){this.model=e,this.refreshProps()}refresh(e){this.sourceParams=e,this.refreshProps()}getOptionalMethods(){return["afterGuiAttached"]}updateModel(e){this.model=e,this.refreshProps(),mN(this.sourceParams,e)}getProps(){const e=super.getProps();return e.model=this.model,e.onModelChange=this.onModelChange,e}},Z9=class extends Sa{refresh(e){this.sourceParams=e,this.refreshProps()}},X9=class extends Sa{constructor(){super(...arguments),this.active=!1,this.expanded=!1,this.onActiveChange=e=>this.updateActive(e)}setActive(e){this.awaitSetActive(e)}setExpanded(e){this.expanded=e,this.refreshProps()}getOptionalMethods(){return["select","configureDefaults"]}awaitSetActive(e){return this.active=e,this.refreshProps()}updateActive(e){const t=this.awaitSetActive(e);e&&t.then(()=>this.sourceParams.onItemActivated())}getProps(){const e=super.getProps();return e.active=this.active,e.expanded=this.expanded,e.onActiveChange=this.onActiveChange,delete e.onItemActivated,e}},Q9=class extends Sa{refresh(e){this.sourceParams=e,this.refreshProps()}},q9=class extends Sa{refresh(e){return this.sourceParams=e,this.refreshProps(),!0}},J9=class extends Sa{constructor(){super(...arguments),this.onStateChange=e=>this.updateState(e)}refresh(e){return this.sourceParams=e,this.refreshProps(),!0}getState(){return this.state}updateState(e){this.state=e,this.refreshProps(),this.sourceParams.onStateUpdated()}getProps(){const e=super.getProps();return e.state=this.state,e.onStateChange=this.onStateChange,e}};function tR(){we("As of v32, using custom components with `reactiveCustomComponents = false` is deprecated.")}var e6=1e3,t6=class{constructor(e,t,i){this.destroyed=!1,this.portals=[],this.hasPendingPortalUpdate=!1,this.wrappingElement=t||"div",this.refresher=e,this.maxComponentCreationTimeMs=i||e6}getPortals(){return this.portals}destroy(){this.destroyed=!0}destroyPortal(e){this.portals=this.portals.filter(t=>t!==e),this.batchUpdate()}getComponentWrappingElement(){return this.wrappingElement}mountReactPortal(e,t,i){this.portals=[...this.portals,e],this.waitForInstance(t,i),this.batchUpdate()}updateReactPortal(e,t){this.portals[this.portals.indexOf(e)]=t,this.batchUpdate()}batchUpdate(){this.hasPendingPortalUpdate||(setTimeout(()=>{this.destroyed||(this.refresher(),this.hasPendingPortalUpdate=!1)}),this.hasPendingPortalUpdate=!0)}waitForInstance(e,t,i=Date.now()){if(this.destroyed){t(null);return}if(e.rendered())t(e);else{if(Date.now()-i>=this.maxComponentCreationTimeMs&&!this.hasPendingPortalUpdate)return;window.setTimeout(()=>{this.waitForInstance(e,t,i)})}}},i6=({ctrl:e})=>{const t=e.isAlive(),{context:i}=T.useContext($s),s=t?e.getColId():void 0,[n,r]=T.useState(),o=T.useRef(),a=T.useRef(null),l=T.useRef(null),c=T.useRef(null),p=T.useRef(),g=T.useRef();t&&!g.current&&(g.current=new rm(()=>a.current));const f=T.useCallback(M=>{var I;if(a.current=M,o.current=M?i.createBean(new yp):i.destroyBean(o.current),!M||!t)return;const b={setWidth:P=>{a.current&&(a.current.style.width=P)},addOrRemoveCssClass:(P,k)=>g.current.addOrRemoveCssClass(P,k),setAriaSort:P=>{a.current&&(P?tj(a.current,P):ij(a.current))},setUserCompDetails:P=>r(P),getUserCompInstance:()=>p.current||void 0};e.setComp(b,M,l.current,c.current,o.current);const R=e.getSelectAllGui();(I=l.current)==null||I.insertAdjacentElement("afterend",R),o.current.addDestroyFunc(()=>R.remove())},[]);T.useLayoutEffect(()=>lm(n,i,c.current,p),[n]),T.useEffect(()=>{e.setDragSource(a.current)},[n]);const y=T.useMemo(()=>!!((n==null?void 0:n.componentFromFramework)&&xp(n.componentClass)),[n]),C=n&&n.componentFromFramework,x=n&&n.componentClass;return De.createElement("div",{ref:f,className:"ag-header-cell","col-id":s,role:"columnheader"},De.createElement("div",{ref:l,className:"ag-header-cell-resize",role:"presentation"}),De.createElement("div",{ref:c,className:"ag-header-cell-comp-wrapper",role:"presentation"},C&&y&&De.createElement(x,{...n.params}),C&&!y&&De.createElement(x,{...n.params,ref:p})))},s6=T.memo(i6),n6=({ctrl:e})=>{const{context:t,gos:i}=T.useContext($s),[s,n]=T.useState(()=>new Hr("ag-header-cell","ag-floating-filter")),[r,o]=T.useState(()=>new Hr),[a,l]=T.useState(()=>new Hr("ag-floating-filter-button","ag-hidden")),[c,p]=T.useState("false"),[g,f]=T.useState(),[,y]=T.useState(1),C=T.useRef(),x=T.useRef(null),M=T.useRef(null),b=T.useRef(null),R=T.useRef(null),I=T.useRef(),P=T.useRef(),k=oe=>{oe!=null&&I.current&&I.current(oe)},_=T.useCallback(oe=>{if(x.current=oe,C.current=oe?t.createBean(new yp):t.destroyBean(C.current),!oe)return;P.current=new Vi(K=>{I.current=K});const Se={addOrRemoveCssClass:(K,pe)=>n(q=>q.setClass(K,pe)),addOrRemoveBodyCssClass:(K,pe)=>o(q=>q.setClass(K,pe)),setButtonWrapperDisplayed:K=>{l(pe=>pe.setClass("ag-hidden",!K)),p(K?"false":"true")},setWidth:K=>{x.current&&(x.current.style.width=K)},setCompDetails:K=>f(K),getFloatingFilterComp:()=>P.current?P.current:null,setMenuIcon:K=>{var pe;return(pe=R.current)==null?void 0:pe.appendChild(K)}};e.setComp(Se,oe,R.current,M.current,C.current)},[]);T.useLayoutEffect(()=>lm(g,t,M.current,k),[g]);const B=T.useMemo(()=>s.toString(),[s]),H=T.useMemo(()=>r.toString(),[r]),V=T.useMemo(()=>a.toString(),[a]),U=T.useMemo(()=>!!(g&&g.componentFromFramework&&xp(g.componentClass)),[g]),$=T.useMemo(()=>i.get("reactiveCustomComponents"),[]),te=T.useMemo(()=>{if(g)if($){const oe=new Y9(g.params,()=>y(Se=>Se+1));return k(oe),oe}else g.componentFromFramework&&tR()},[g]),Ce=te==null?void 0:te.getProps(),be=g&&g.componentFromFramework,Re=g&&g.componentClass;return De.createElement("div",{ref:_,className:B,role:"gridcell"},De.createElement("div",{ref:M,className:H,role:"presentation"},be&&!$&&De.createElement(Re,{...g.params,ref:U?()=>{}:k}),be&&$&&De.createElement(J0.Provider,{value:{setMethods:oe=>te.setMethods(oe)}},De.createElement(Re,{...Ce}))),De.createElement("div",{ref:b,"aria-hidden":c,className:V,role:"presentation"},De.createElement("button",{ref:R,type:"button",className:"ag-button ag-floating-filter-button-button",tabIndex:-1})))},r6=T.memo(n6),o6=({ctrl:e})=>{const{context:t}=T.useContext($s),[i,s]=T.useState(()=>new Hr),[n,r]=T.useState(()=>new Hr),[o,a]=T.useState("false"),[l,c]=T.useState(),[p,g]=T.useState(),f=T.useMemo(()=>e.getColId(),[]),y=T.useRef(),C=T.useRef(null),x=T.useRef(null),M=T.useRef(null),b=T.useRef(),R=T.useCallback(H=>{if(C.current=H,y.current=H?t.createBean(new yp):t.destroyBean(y.current),!H)return;const V={setWidth:U=>{C.current&&(C.current.style.width=U)},addOrRemoveCssClass:(U,$)=>s(te=>te.setClass(U,$)),setHeaderWrapperHidden:U=>{const $=M.current;$&&(U?$.style.setProperty("display","none"):$.style.removeProperty("display"))},setHeaderWrapperMaxHeight:U=>{const $=M.current;$&&(U!=null?$.style.setProperty("max-height",`${U}px`):$.style.removeProperty("max-height"),$.classList.toggle("ag-header-cell-comp-wrapper-limited-height",U!=null))},setUserCompDetails:U=>g(U),setResizableDisplayed:U=>{r($=>$.setClass("ag-hidden",!U)),a(U?"false":"true")},setAriaExpanded:U=>c(U),getUserCompInstance:()=>b.current||void 0};e.setComp(V,H,x.current,M.current,y.current)},[]);T.useLayoutEffect(()=>lm(p,t,M.current),[p]),T.useEffect(()=>{C.current&&e.setDragSource(C.current)},[p]);const I=T.useMemo(()=>!!((p==null?void 0:p.componentFromFramework)&&xp(p.componentClass)),[p]),P=T.useMemo(()=>"ag-header-group-cell "+i.toString(),[i]),k=T.useMemo(()=>"ag-header-cell-resize "+n.toString(),[n]),_=p&&p.componentFromFramework,B=p&&p.componentClass;return De.createElement("div",{ref:R,className:P,"col-id":f,role:"columnheader","aria-expanded":l},De.createElement("div",{ref:M,className:"ag-header-cell-comp-wrapper",role:"presentation"},_&&I&&De.createElement(B,{...p.params}),_&&!I&&De.createElement(B,{...p.params,ref:b})),De.createElement("div",{ref:x,"aria-hidden":o,className:k}))},a6=T.memo(o6),l6=({ctrl:e})=>{const{context:t}=T.useContext($s),{topOffset:i,rowHeight:s}=T.useMemo(()=>e.getTopAndHeight(),[]),n=e.getAriaRowIndex(),r=e.getHeaderRowClass(),[o,a]=T.useState(()=>s+"px"),[l,c]=T.useState(()=>i+"px"),p=T.useRef(null),g=T.useRef(null),[f,y]=T.useState(()=>e.getHeaderCtrls()),C=T.useRef(),x=T.useRef(null),M=T.useCallback(I=>{if(x.current=I,C.current=I?t.createBean(new yp):t.destroyBean(C.current),!I)return;const P={setHeight:k=>a(k),setTop:k=>c(k),setHeaderCtrls:(k,_,B)=>{g.current=p.current,p.current=k;const H=q0(g.current,k,_);H!==g.current&&Q0(B,()=>y(H))},setWidth:k=>{x.current&&(x.current.style.width=k)}};e.setComp(P,C.current,!1)},[]),b=T.useMemo(()=>({height:o,top:l}),[o,l]),R=T.useCallback(I=>{switch(e.getType()){case iM.COLUMN_GROUP:return De.createElement(a6,{ctrl:I,key:I.instanceId});case iM.FLOATING_FILTER:return De.createElement(r6,{ctrl:I,key:I.instanceId});default:return De.createElement(s6,{ctrl:I,key:I.instanceId})}},[]);return De.createElement("div",{ref:M,className:r,role:"row",style:b,"aria-rowindex":n},f.map(R))},c6=T.memo(l6),u6=({pinned:e})=>{const[t,i]=T.useState(!0),[s,n]=T.useState([]),{context:r}=T.useContext($s),o=T.useRef(null),a=T.useRef(null),l=T.useRef(),c=e==="left",p=e==="right",g=!c&&!p,f=T.useCallback(x=>{if(o.current=x,l.current=x?r.createBean(new _4(e)):r.destroyBean(l.current),!x)return;const M={setDisplayed:i,setCtrls:b=>n(b),setCenterWidth:b=>{a.current&&(a.current.style.width=b)},setViewportScrollLeft:b=>{o.current&&(o.current.scrollLeft=b)},setPinnedContainerWidth:b=>{o.current&&(o.current.style.width=b,o.current.style.minWidth=b,o.current.style.maxWidth=b)}};l.current.setComp(M,o.current)},[]),y=t?"":"ag-hidden",C=()=>s.map(x=>De.createElement(c6,{ctrl:x,key:x.instanceId}));return De.createElement(De.Fragment,null,c&&De.createElement("div",{ref:f,className:"ag-pinned-left-header "+y,"aria-hidden":!t,role:"rowgroup"},C()),p&&De.createElement("div",{ref:f,className:"ag-pinned-right-header "+y,"aria-hidden":!t,role:"rowgroup"},C()),g&&De.createElement("div",{ref:f,className:"ag-header-viewport "+y,role:"presentation"},De.createElement("div",{ref:a,className:"ag-header-container",role:"rowgroup"},C())))},tb=T.memo(u6),h6=()=>{const[e,t]=T.useState(()=>new Hr),[i,s]=T.useState(),{context:n}=T.useContext($s),r=T.useRef(null),o=T.useRef(),a=T.useCallback(p=>{if(r.current=p,o.current=p?n.createBean(new S4):n.destroyBean(o.current),!p)return;const g={addOrRemoveCssClass:(f,y)=>t(C=>C.setClass(f,y)),setHeightAndMinHeight:f=>s(f)};o.current.setComp(g,p,p)},[]),l=T.useMemo(()=>"ag-header "+e.toString(),[e]),c=T.useMemo(()=>({height:i,minHeight:i}),[i]);return De.createElement("div",{ref:a,className:l,style:c,role:"presentation"},De.createElement(tb,{pinned:"left"}),De.createElement(tb,{pinned:null}),De.createElement(tb,{pinned:"right"}))},d6=T.memo(h6),p6=(e,t)=>{T.useEffect(()=>{const i=t.current;if(i){const s=i.parentElement;if(s){const n=document.createComment(e);return s.insertBefore(n,i),()=>{s.removeChild(n)}}}},[e])},ih=p6,g6=class{constructor(e,t){this.cellEditorParams=e,this.refreshProps=t,this.instanceCreated=new Vi(i=>{this.resolveInstanceCreated=i}),this.onValueChange=i=>this.updateValue(i),this.value=e.value}getProps(){return{...this.cellEditorParams,initialValue:this.cellEditorParams.value,value:this.value,onValueChange:this.onValueChange}}getValue(){return this.value}refresh(e){this.cellEditorParams=e,this.refreshProps()}setMethods(e){eR(this.getOptionalMethods(),e,this)}getInstance(){return this.instanceCreated.then(()=>this.componentInstance)}setRef(e){var t;this.componentInstance=e,(t=this.resolveInstanceCreated)==null||t.call(this),this.resolveInstanceCreated=void 0}getOptionalMethods(){return["isCancelBeforeStart","isCancelAfterEnd","focusIn","focusOut","afterGuiAttached"]}updateValue(e){this.value=e,this.refreshProps()}},f6=e=>{const t=T.useRef(e),i=T.useRef(),s=T.useRef(!1),n=T.useRef(!1),[,r]=T.useState(0);s.current&&(n.current=!0),T.useEffect(()=>(s.current||(i.current=t.current(),s.current=!0),r(o=>o+1),()=>{var o;n.current&&((o=i.current)==null||o.call(i))}),[])},m6=e=>{const[t,i]=T.useState(),{context:s,popupService:n,localeService:r,gos:o,editService:a}=T.useContext($s);return f6(()=>{var P,k;const{editDetails:l,cellCtrl:c,eParentCell:p}=e,{compDetails:g}=l,f=o.get("stopEditingWhenCellsLoseFocus"),y=s.createBean(a.createPopupEditorWrapper(g.params)),C=y.getGui();if(e.jsChildComp){const _=e.jsChildComp.getGui();_&&C.appendChild(_)}const x={column:c.getColumn(),rowNode:c.getRowNode(),type:"popupCellEditor",eventSource:p,ePopup:C,position:l.popupPosition,keepWithinBounds:!0},M=n.positionPopupByComponent.bind(n,x),b=r.getLocaleTextFunc(),R=n.addPopup({modal:f,eChild:C,closeOnEsc:!0,closedCallback:()=>{c.onPopupEditorClosed()},anchorToElement:p,positionCallback:M,ariaLabel:b("ariaLabelCellEditor","Cell Editor")}),I=R?R.hideFunc:void 0;return i(y),(k=(P=e.jsChildComp)==null?void 0:P.afterGuiAttached)==null||k.call(P),()=>{I==null||I(),s.destroyBean(y)}}),De.createElement(De.Fragment,null,t&&e.wrappedContent&&tm.createPortal(e.wrappedContent,t.getGui()))},LT=T.memo(m6),v6=(e,t,i,s,n,r)=>{const{context:o}=T.useContext($s),a=T.useCallback(()=>{const l=n.current;if(!l)return;const c=l.getGui();c&&c.parentElement&&c.parentElement.removeChild(c),o.destroyBean(l),n.current=void 0},[]);T.useEffect(()=>{const l=e!=null,c=(e==null?void 0:e.compDetails)&&!e.compDetails.componentFromFramework,p=t&&i==null;if(!(l&&c&&!p)){a();return}const f=e.compDetails;if(n.current){const C=n.current,M=C.refresh!=null&&e.force==!1?C.refresh(f.params):!1;if(M===!0||M===void 0)return;a()}const y=f.newAgStackInstance();y!=null&&y.then(C=>{if(!C)return;const x=C.getGui();if(!x)return;(t?i:r.current).appendChild(x),n.current=C})},[e,t,s]),T.useEffect(()=>a,[])},y6=v6,C6=(e,t,i)=>{const{compProxy:s}=e;i(s);const n=s.getProps(),r=xp(t);return De.createElement(J0.Provider,{value:{setMethods:o=>s.setMethods(o)}},r?De.createElement(t,{...n}):De.createElement(t,{...n,ref:o=>s.setRef(o)}))},TT=(e,t,i)=>{const s=e.compProxy;return De.createElement(De.Fragment,null,s?C6(e,t,i):De.createElement(t,{...e.compDetails.params,ref:i}))},S6=(e,t,i,s,n)=>{const r=e.compDetails,o=r.componentClass,a=r.componentFromFramework&&!e.popup,l=r.componentFromFramework&&e.popup,c=!r.componentFromFramework&&e.popup;return De.createElement(De.Fragment,null,a&&TT(e,o,t),l&&De.createElement(LT,{editDetails:e,cellCtrl:s,eParentCell:i,wrappedContent:TT(e,o,t)}),c&&n&&De.createElement(LT,{editDetails:e,cellCtrl:s,eParentCell:i,jsChildComp:n}))},w6=(e,t,i,s,n,r,o)=>{const{compDetails:a,value:l}=e,c=!a,p=a&&a.componentFromFramework,g=a&&a.componentClass,f=l!=null&&l.toString?l.toString():l,y=()=>De.createElement(De.Fragment,null,c&&De.createElement(De.Fragment,null,f),p&&!r&&De.createElement(g,{...a.params,key:t,ref:s}),p&&r&&De.createElement(g,{...a.params,key:t}));return De.createElement(De.Fragment,null,n?De.createElement("span",{role:"presentation",id:`cell-${i}`,className:"ag-cell-value",ref:o},y()):y())},x6=({cellCtrl:e,printLayout:t,editingRow:i})=>{const{context:s}=T.useContext($s),{colIdSanitised:n,instanceId:r}=e,o=T.useRef(),[a,l]=T.useState(()=>e.isCellRenderer()?void 0:{compDetails:void 0,value:e.getValueToDisplay(),force:!1}),[c,p]=T.useState(),[g,f]=T.useState(1),[y,C]=T.useState(),[x,M]=T.useState(!1),[b,R]=T.useState(!1),[I,P]=T.useState(!1),[k,_]=T.useState(),B=T.useMemo(()=>e.isForceWrapper(),[e]),H=T.useMemo(()=>e.getCellAriaRole(),[e]),V=T.useRef(null),U=T.useRef(null),$=T.useRef(),te=T.useRef(),Ce=T.useRef(),be=T.useRef([]),Re=T.useRef(),[oe,Se]=T.useState(0),K=T.useCallback(ne=>{Re.current=ne,Se(Ee=>Ee+1)},[]),pe=a!=null&&(x||I||b),q=B||pe,W=T.useCallback(ne=>{if(te.current=ne,ne){const Ee=ne.isCancelBeforeStart&&ne.isCancelBeforeStart();setTimeout(()=>{Ee?(e.stopEditing(!0),e.focusCell(!0)):e.cellEditorAttached()})}},[e]),Q=T.useRef();Q.current||(Q.current=new rm(()=>V.current)),y6(a,q,Re.current,oe,$,V);const ve=T.useRef();T.useLayoutEffect(()=>{var tt;const ne=ve.current,Ee=a;if(ve.current=a,ne==null||ne.compDetails==null||Ee==null||Ee.compDetails==null)return;const ze=ne.compDetails,Be=Ee.compDetails;if(ze.componentClass!=Be.componentClass||((tt=U.current)==null?void 0:tt.refresh)==null)return;U.current.refresh(Be.params)!=!0&&f(Ne=>Ne+1)},[a]),T.useLayoutEffect(()=>{if(!(c&&!c.compDetails.componentFromFramework))return;const Ee=c.compDetails,ze=c.popup===!0,Be=Ee.newAgStackInstance();return Be.then($e=>{if(!$e)return;const tt=$e.getGui();if(W($e),!ze){const Ne=(B?Ce:V).current;Ne==null||Ne.appendChild(tt),$e.afterGuiAttached&&$e.afterGuiAttached()}_($e)}),()=>{Be.then($e=>{var Ne;const tt=$e.getGui();s.destroyBean($e),W(void 0),_(void 0),(Ne=tt==null?void 0:tt.parentElement)==null||Ne.removeChild(tt)})}},[c]);const se=T.useCallback(ne=>{if(Ce.current=ne,!ne){be.current.forEach(ze=>ze()),be.current=[];return}const Ee=ze=>{if(ze){const Be=ze.getGui();ne.insertAdjacentElement("afterbegin",Be),be.current.push(()=>{s.destroyBean(ze),Ch(Be)})}return ze};if(x){const ze=e.createSelectionCheckbox();Ee(ze)}I&&Ee(e.createDndSource()),b&&Ee(e.createRowDragComp())},[e,s,I,b,x]),ye=T.useCallback(ne=>{if(V.current=ne,o.current=ne?s.createBean(new yp):s.destroyBean(o.current),!ne||!e)return;const Ee={addOrRemoveCssClass:(Be,$e)=>Q.current.addOrRemoveCssClass(Be,$e),setUserStyles:Be=>C(Be),getFocusableElement:()=>V.current,setIncludeSelection:Be=>M(Be),setIncludeRowDrag:Be=>R(Be),setIncludeDndSource:Be=>P(Be),getCellEditor:()=>te.current||null,getCellRenderer:()=>U.current??$.current,getParentOfValue:()=>Re.current??Ce.current??V.current,setRenderDetails:(Be,$e,tt)=>{l(Ne=>(Ne==null?void 0:Ne.compDetails)!==Be||(Ne==null?void 0:Ne.value)!==$e||(Ne==null?void 0:Ne.force)!==tt?{value:$e,compDetails:Be,force:tt}:Ne)},setEditDetails:(Be,$e,tt,Ne)=>{if(Be){let qe;Ne?qe=new g6(Be.params,()=>f(ft=>ft+1)):Be.componentFromFramework&&tR(),p({compDetails:Be,popup:$e,popupPosition:tt,compProxy:qe}),$e||l(void 0)}else p(qe=>{qe!=null&&qe.compProxy&&(te.current=void 0)})}},ze=Ce.current||void 0;e.setComp(Ee,ne,ze,t,i,o.current)},[]),ue=T.useMemo(()=>{var Ee;return!!(((Ee=a==null?void 0:a.compDetails)==null?void 0:Ee.componentFromFramework)&&xp(a.compDetails.componentClass))},[a]);T.useLayoutEffect(()=>{var ne;V.current&&(Q.current.addOrRemoveCssClass("ag-cell-value",!q),Q.current.addOrRemoveCssClass("ag-cell-inline-editing",!!c&&!c.popup),Q.current.addOrRemoveCssClass("ag-cell-popup-editing",!!c&&!!c.popup),Q.current.addOrRemoveCssClass("ag-cell-not-inline-editing",!c||!!c.popup),(ne=e.getRowCtrl())==null||ne.setInlineEditingCss(),e.shouldRestoreFocus()&&!e.isEditing()&&V.current.focus({preventScroll:!0}))});const Me=()=>De.createElement(De.Fragment,null,a!=null&&w6(a,g,r,U,q,ue,K),c!=null&&S6(c,W,V.current,e,k)),me=T.useCallback(()=>e.onFocusOut(),[]);return De.createElement("div",{ref:ye,style:y,role:H,"col-id":n,onBlur:me},q?De.createElement("div",{className:"ag-cell-wrapper",role:"presentation",ref:se},Me()):Me())},b6=T.memo(x6),M6=({rowCtrl:e,containerType:t})=>{const{context:i,gos:s}=T.useContext($s),n=T.useRef(),r=T.useRef(e.getDomOrder()),o=e.isFullWidth(),a=e.getRowNode().displayed,[l,c]=T.useState(()=>a?e.getRowIndex():null),[p,g]=T.useState(()=>e.getRowId()),[f,y]=T.useState(()=>e.getBusinessKey()),[C,x]=T.useState(()=>e.getRowStyles()),M=T.useRef(null),b=T.useRef(null),[R,I]=T.useState(()=>null),[P,k]=T.useState(),[_,B]=T.useState(()=>a?e.getInitialRowTop(t):void 0),[H,V]=T.useState(()=>a?e.getInitialTransform(t):void 0),U=T.useRef(null),$=T.useRef(),te=T.useRef(!1),[Ce,be]=T.useState(0);T.useEffect(()=>{var ye;if(te.current||!P||Ce>10)return;const se=(ye=U.current)==null?void 0:ye.firstChild;se?(e.setupDetailRowAutoHeight(se),te.current=!0):be(ue=>ue+1)},[P,Ce]);const Re=T.useRef();Re.current||(Re.current=new rm(()=>U.current));const oe=T.useCallback(se=>{if(U.current=se,n.current=se?i.createBean(new yp):i.destroyBean(n.current),!se){e.unsetComp(t);return}if(!e.isAlive())return;const ye={setTop:B,setTransform:V,addOrRemoveCssClass:(ue,Me)=>Re.current.addOrRemoveCssClass(ue,Me),setDomOrder:ue=>r.current=ue,setRowIndex:c,setRowId:g,setRowBusinessKey:y,setUserStyles:x,setCellCtrls:(ue,Me)=>{b.current=M.current,M.current=ue;const me=q0(b.current,ue,r.current);me!==b.current&&Q0(Me,()=>I(me))},showFullWidth:ue=>k(ue),getFullWidthCellRenderer:()=>$.current,refreshFullWidth:ue=>W.current?(k(Me=>({...Me,params:ue()})),!0):!$.current||!$.current.refresh?!1:$.current.refresh(ue())};e.setComp(ye,se,t,n.current)},[]);T.useLayoutEffect(()=>lm(P,i,U.current,$),[P]);const Se=T.useMemo(()=>{const se={top:_,transform:H};return Object.assign(se,C),se},[_,H,C]),K=o&&(P==null?void 0:P.componentFromFramework),pe=!o&&R!=null,q=T.useMemo(()=>!!((P==null?void 0:P.componentFromFramework)&&xp(P.componentClass)),[P]),W=T.useRef(!1);T.useEffect(()=>{W.current=q&&!!P&&!!s.get("reactiveCustomComponents")},[q,P]);const Q=()=>R==null?void 0:R.map(se=>De.createElement(b6,{cellCtrl:se,editingRow:e.isEditing(),printLayout:e.isPrintLayout(),key:se.instanceId})),ve=()=>{const se=P.componentClass;return De.createElement(De.Fragment,null,q?De.createElement(se,{...P.params}):De.createElement(se,{...P.params,ref:$}))};return De.createElement("div",{ref:oe,role:"row",style:Se,"row-index":l,"row-id":p,"row-business-key":f},pe&&Q(),K&&ve())},R6=T.memo(M6),D6=({name:e})=>{const{context:t}=T.useContext($s),i=T.useMemo(()=>Ud(e),[e]),s=T.useRef(null),n=T.useRef(null),r=T.useRef([]),o=T.useRef([]),[a,l]=T.useState(()=>[]),c=T.useRef(!1),p=T.useRef(),g=T.useMemo(()=>So(i.viewport),[i]),f=T.useMemo(()=>So(i.container),[i]),y=i.type==="center",C=y?s:n;ih(" AG Row Container "+e+" ",C);const x=T.useCallback(()=>y?s.current!=null&&n.current!=null:n.current!=null,[]),M=T.useCallback(()=>y?s.current==null&&n.current==null:n.current==null,[]),b=T.useCallback(()=>{if(M()&&(p.current=t.destroyBean(p.current)),x()){const k=B=>{const H=q0(o.current,r.current,c.current);H!==o.current&&(o.current=H,Q0(B,()=>l(H)))},_={setHorizontalScroll:B=>{s.current&&(s.current.scrollLeft=B)},setViewportHeight:B=>{s.current&&(s.current.style.height=B)},setRowCtrls:({rowCtrls:B,useFlushSync:H})=>{const V=!!H&&r.current.length>0&&B.length>0;r.current=B,k(V)},setDomOrder:B=>{c.current!=B&&(c.current=B,k(!1))},setContainerWidth:B=>{n.current&&(n.current.style.width=B)},setOffsetTop:B=>{n.current&&(n.current.style.transform=`translateY(${B})`)}};p.current=t.createBean(new L3(e)),p.current.setComp(_,n.current,s.current)}},[x,M]),R=T.useCallback(k=>{n.current=k,b()},[b]),I=T.useCallback(k=>{s.current=k,b()},[b]),P=()=>De.createElement("div",{className:f,ref:R,role:"rowgroup"},a.map(k=>De.createElement(R6,{rowCtrl:k,containerType:i.type,key:k.instanceId})));return De.createElement(De.Fragment,null,y?De.createElement("div",{className:g,ref:I,role:"presentation"},P()):P())},E6=T.memo(D6),I6=()=>{const{context:e,resizeObserverService:t}=T.useContext($s),[i,s]=T.useState(""),[n,r]=T.useState(0),[o,a]=T.useState(0),[l,c]=T.useState("0px"),[p,g]=T.useState("0px"),[f,y]=T.useState("100%"),[C,x]=T.useState("0px"),[M,b]=T.useState("0px"),[R,I]=T.useState("100%"),[P,k]=T.useState(""),[_,B]=T.useState(""),[H,V]=T.useState(null),[U,$]=T.useState(""),[te,Ce]=T.useState(null),[be,Re]=T.useState("ag-layout-normal"),oe=T.useRef();oe.current||(oe.current=new rm(()=>Se.current));const Se=T.useRef(null),K=T.useRef(null),pe=T.useRef(null),q=T.useRef(null),W=T.useRef(null),Q=T.useRef(null),ve=T.useRef(null),se=T.useRef([]),ye=T.useRef([]);ih(" AG Grid Body ",Se),ih(" AG Pinned Top ",K),ih(" AG Sticky Top ",pe),ih(" AG Middle ",Q),ih(" AG Pinned Bottom ",ve);const ue=T.useCallback(xt=>{if(Se.current=xt,!xt){se.current=e.destroyBeans(se.current),ye.current.forEach(ut=>ut()),ye.current=[];return}if(!e)return;const Mt=(ut,ni)=>{ut.appendChild(ni),ye.current.push(()=>ut.removeChild(ni))},Ri=ut=>{const ni=e.createBean(new ut);return se.current.push(ni),ni},Ki=(ut,ni,vi)=>{Mt(ut,document.createComment(vi)),Mt(ut,Ri(ni).getGui())};Ki(xt,G4," AG Fake Horizontal Scroll "),Ki(xt,B4," AG Overlay Wrapper "),W.current&&Ki(W.current,z4," AG Fake Vertical Scroll ");const Qs={setRowAnimationCssOnBodyViewport:s,setColumnCount:ut=>{Se.current&&JW(Se.current,ut)},setRowCount:ut=>{Se.current&&QW(Se.current,ut)},setTopHeight:r,setBottomHeight:a,setStickyTopHeight:c,setStickyTopTop:g,setStickyTopWidth:y,setTopDisplay:k,setBottomDisplay:B,setColumnMovingCss:(ut,ni)=>oe.current.addOrRemoveCssClass(ut,ni),updateLayoutClasses:Re,setAlwaysVerticalScrollClass:V,setPinnedTopBottomOverflowY:$,setCellSelectableCss:(ut,ni)=>Ce(ni?ut:null),setBodyViewportWidth:ut=>{Q.current&&(Q.current.style.width=ut)},registerBodyViewportResizeListener:ut=>{if(Q.current){const ni=t.observeResize(Q.current,ut);ye.current.push(()=>ni())}},setStickyBottomHeight:x,setStickyBottomBottom:b,setStickyBottomWidth:I},Yi=e.createBean(new F3);se.current.push(Yi),Yi.setComp(Qs,xt,Q.current,K.current,ve.current,pe.current,q.current)},[]),Me=T.useMemo(()=>So("ag-root","ag-unselectable",be),[be]),me=T.useMemo(()=>So("ag-body-viewport",i,be,H,te),[i,be,H,te]),ne=T.useMemo(()=>So("ag-body",be),[be]),Ee=T.useMemo(()=>So("ag-floating-top",te),[te]),ze=T.useMemo(()=>So("ag-sticky-top",te),[te]),Be=T.useMemo(()=>So("ag-sticky-bottom",C==="0px"?"ag-hidden":null,te),[te,C]),$e=T.useMemo(()=>So("ag-floating-bottom",te),[te]),tt=T.useMemo(()=>({height:n,minHeight:n,display:P,overflowY:U}),[n,P,U]),Ne=T.useMemo(()=>({height:l,top:p,width:f}),[l,p,f]),qe=T.useMemo(()=>({height:C,bottom:M,width:R}),[C,M,R]),ft=T.useMemo(()=>({height:o,minHeight:o,display:_,overflowY:U}),[o,_,U]),Rt=xt=>De.createElement(E6,{name:xt,key:`${xt}-container`}),Dt=({section:xt,children:Mt,className:Ri,style:Ki})=>De.createElement("div",{ref:xt,className:Ri,role:"presentation",style:Ki},Mt.map(Rt));return De.createElement("div",{ref:ue,className:Me,role:"treegrid"},De.createElement(d6,null),Dt({section:K,className:Ee,style:tt,children:["topLeft","topCenter","topRight","topFullWidth"]}),De.createElement("div",{className:ne,ref:W,role:"presentation"},Dt({section:Q,className:me,children:["left","center","right","fullWidth"]})),Dt({section:pe,className:ze,style:Ne,children:["stickyTopLeft","stickyTopCenter","stickyTopRight","stickyTopFullWidth"]}),Dt({section:q,className:Be,style:qe,children:["stickyBottomLeft","stickyBottomCenter","stickyBottomRight","stickyBottomFullWidth"]}),Dt({section:ve,className:$e,style:ft,children:["bottomLeft","bottomCenter","bottomRight","bottomFullWidth"]}))},L6=T.memo(I6),T6=(e,t)=>{const{children:i,eFocusableElement:s,onTabKeyDown:n,gridCtrl:r,forceFocusOutWhenTabGuardsAreEmpty:o}=e,{context:a}=T.useContext($s),l=T.useRef(null),c=T.useRef(null),p=T.useRef(),g=M=>{const b=M==null?void 0:parseInt(M,10).toString();[l,c].forEach(R=>{var I,P;b===void 0?(I=R.current)==null||I.removeAttribute("tabindex"):(P=R.current)==null||P.setAttribute("tabindex",b)})};T.useImperativeHandle(t,()=>({forceFocusOutOfContainer(M){var b;(b=p.current)==null||b.forceFocusOutOfContainer(M)}}));const f=T.useCallback(()=>{const M=l.current,b=c.current;if(!M&&!b){p.current=a.destroyBean(p.current);return}if(M&&b){const R={setTabIndex:g};p.current=a.createBean(new $k({comp:R,eTopGuard:M,eBottomGuard:b,eFocusableElement:s,onTabKeyDown:n,forceFocusOutWhenTabGuardsAreEmpty:o,focusInnerElement:I=>r.focusInnerElement(I)}))}},[]),y=T.useCallback(M=>{l.current=M,f()},[f]),C=T.useCallback(M=>{c.current=M,f()},[f]),x=M=>{const b=M==="top"?my.TAB_GUARD_TOP:my.TAB_GUARD_BOTTOM;return De.createElement("div",{className:`${my.TAB_GUARD} ${b}`,role:"presentation",ref:M==="top"?y:C})};return De.createElement(De.Fragment,null,x("top"),i,x("bottom"))},A6=T.forwardRef(T6),P6=T.memo(A6),F6=({context:e})=>{const[t,i]=T.useState(""),[s,n]=T.useState(""),[r,o]=T.useState(""),[a,l]=T.useState(null),[c,p]=T.useState(null),[g,f]=T.useState(!1),[y,C]=T.useState(),x=T.useRef(),M=T.useRef(null),b=T.useRef(),[R,I]=T.useState(null),P=T.useRef(()=>{}),k=T.useRef(),_=T.useRef([]),B=T.useCallback(()=>{},[]),H=T.useMemo(()=>e.isDestroyed()?null:e.getBeans(),[e]);ih(" AG Grid ",M);const V=T.useCallback(be=>{if(M.current=be,x.current=be?e.createBean(new dY):e.destroyBean(x.current),!be||e.isDestroyed())return;const Re=x.current;P.current=Re.focusInnerElement.bind(Re);const oe={destroyGridUi:()=>{},setRtlClass:i,setGridThemeClass:n,forceFocusOutOfContainer:Se=>{var K,pe;if(!Se&&((K=k.current)!=null&&K.isDisplayed())){k.current.forceFocusOutOfContainer(Se);return}(pe=b.current)==null||pe.forceFocusOutOfContainer(Se)},updateLayoutClasses:o,getFocusableContainers:()=>{var pe;const Se=[],K=(pe=M.current)==null?void 0:pe.querySelector(".ag-root");return K&&Se.push({getGui:()=>K}),_.current.forEach(q=>{q.isDisplayed()&&Se.push(q)}),Se},setCursor:l,setUserSelect:p};Re.setComp(oe,be,be),f(!0)},[]);T.useEffect(()=>{const be=x.current,Re=M.current;if(!y||!H||!be||!R||!Re)return;const oe=[],{watermarkSelector:Se,paginationSelector:K,sideBarSelector:pe,statusBarSelector:q,gridHeaderDropZonesSelector:W}=be.getOptionalSelectors(),Q=[];if(W){const se=e.createBean(new W.component),ye=se.getGui();Re.insertAdjacentElement("afterbegin",ye),Q.push(ye),oe.push(se)}if(pe){const se=e.createBean(new pe.component),ye=se.getGui(),ue=R.querySelector(".ag-tab-guard-bottom");ue&&(ue.insertAdjacentElement("beforebegin",ye),Q.push(ye)),oe.push(se),_.current.push(se)}const ve=se=>{const ye=e.createBean(new se),ue=ye.getGui();return Re.insertAdjacentElement("beforeend",ue),Q.push(ue),oe.push(ye),ye};if(q&&ve(q.component),K){const se=ve(K.component);k.current=se,_.current.push(se)}return Se&&ve(Se.component),()=>{e.destroyBeans(oe),Q.forEach(se=>{var ye;(ye=se.parentElement)==null||ye.removeChild(se)})}},[y,R,H]);const U=T.useMemo(()=>So("ag-root-wrapper",t,s,r),[t,s,r]),$=T.useMemo(()=>So("ag-root-wrapper-body","ag-focus-managed",r),[r]),te=T.useMemo(()=>({userSelect:c??"",WebkitUserSelect:c??"",cursor:a??""}),[c,a]),Ce=T.useCallback(be=>{b.current=be,C(be!==null)},[]);return De.createElement("div",{ref:V,className:U,style:te,role:"presentation"},De.createElement("div",{className:$,ref:I,role:"presentation"},g&&R&&H&&De.createElement($s.Provider,{value:H},De.createElement(P6,{ref:Ce,eFocusableElement:R,onTabKeyDown:B,gridCtrl:x.current,forceFocusOutWhenTabGuardsAreEmpty:!0},De.createElement(L6,null)))))},k6=T.memo(F6),N6=class extends de{wireBeans(e){this.ctrlsService=e.ctrlsService}areHeaderCellsRendered(){return this.ctrlsService.getHeaderRowContainerCtrls().every(e=>e.getAllCtrls().every(t=>t.areCellsRendered()))}},vN=e=>{var M;const t=T.useRef(),i=T.useRef(null),s=T.useRef(null),n=T.useRef([]),r=T.useRef([]),o=T.useRef(e),a=T.useRef(),l=T.useRef(),c=T.useRef(!1),[p,g]=T.useState(void 0),[,f]=T.useState(0),y=T.useCallback(b=>{if(i.current=b,!b){n.current.forEach($=>$()),n.current.length=0;return}const R=e.modules||[];s.current||(s.current=new t6(()=>f($=>$+1),e.componentWrappingElement,e.maxComponentCreationTimeMs),n.current.push(()=>{var $;($=s.current)==null||$.destroy(),s.current=null}));const I=VW(e.gridOptions,e),P=()=>{if(c.current){const $=()=>{var Ce;return(Ce=a.current)!=null&&Ce.shouldQueueUpdates()?void 0:r.current.shift()};let te=$();for(;te;)te(),te=$()}},k=new G6(P);a.current=k;const _=new N6,B={providedBeanInstances:{frameworkComponentWrapper:new _6(s.current,I.reactiveCustomComponents??GZ("reactiveCustomComponents")??!0),renderStatusService:_},modules:R,frameworkOverrides:k},H=$=>{g($),$.createBean(_),n.current.push(()=>{$.destroy()}),$.getBean("ctrlsService").whenReady({addDestroyFunc:te=>{n.current.push(te)}},()=>{var Ce;if($.isDestroyed())return;const te=t.current;te&&((Ce=e.setGridApi)==null||Ce.call(e,te))})},V=$=>{$.getBean("ctrlsService").whenReady({addDestroyFunc:te=>{n.current.push(te)}},()=>{r.current.forEach(te=>te()),r.current.length=0,c.current=!0})},U=new HZ;I.gridId??(I.gridId=l.current),t.current=U.create(b,I,H,V,B),n.current.push(()=>{t.current=void 0}),t.current&&(l.current=t.current.getGridId())},[]),C=T.useMemo(()=>({height:"100%",...e.containerStyle||{}}),[e.containerStyle]),x=T.useCallback(b=>{var R;c.current&&!((R=a.current)!=null&&R.shouldQueueUpdates())?b():r.current.push(b)},[]);return T.useEffect(()=>{const b=O6(o.current,e);o.current=e,x(()=>{t.current&&WW(b,t.current)})},[e]),De.createElement("div",{style:C,className:e.className,ref:y},p&&!p.isDestroyed()?De.createElement(k6,{context:p}):null,((M=s.current)==null?void 0:M.getPortals())??null)};function O6(e,t){const i={};return Object.keys(t).forEach(s=>{const n=t[s];e[s]!==n&&(i[s]=n)}),i}var _6=class extends XZ{constructor(e,t){super(),this.parent=e,this.reactiveCustomComponents=t}createWrapper(e,t){if(this.reactiveCustomComponents){const n=(r=>{switch(r){case"filter":return K9;case"floatingFilterComponent":return $9;case"dateComponent":return j9;case"dragAndDropImageComponent":return U9;case"loadingOverlayComponent":return Z9;case"noRowsOverlayComponent":return Q9;case"statusPanel":return q9;case"toolPanel":return J9;case"menuItem":return X9;case"cellRenderer":return W9}})(t.propertyName);if(n)return new n(e,this.parent,t)}else switch(t.propertyName){case"filter":case"floatingFilterComponent":case"dateComponent":case"dragAndDropImageComponent":case"loadingOverlayComponent":case"noRowsOverlayComponent":case"statusPanel":case"toolPanel":case"menuItem":case"cellRenderer":tR();break}const i=!t.cellRenderer&&t.propertyName!=="toolPanel";return new fN(e,this.parent,t,i)}},B6=T.forwardRef((e,t)=>{const{ctrlsFactory:i,context:s,gos:n,resizeObserverService:r,rowModel:o}=T.useContext($s),[a,l]=T.useState(()=>new Hr),[c,p]=T.useState(()=>new Hr),[g,f]=T.useState(),[y,C]=T.useState(),x=T.useRef(),M=T.useRef(null),b=T.useRef(),R=T.useMemo(()=>ra.__getGridRegisteredModules(e.api.getGridId()),[e]),I=T.useMemo(()=>a.toString()+" ag-details-row",[a]),P=T.useMemo(()=>c.toString()+" ag-details-grid",[c]);t&&T.useImperativeHandle(t,()=>({refresh(){var B;return((B=x.current)==null?void 0:B.refresh())??!1}})),e.template&&we("detailCellRendererParams.template is not supported by AG Grid React. To change the template, provide a Custom Detail Cell Renderer. See https://ag-grid.com/react-data-grid/master-detail-custom-detail/");const k=T.useCallback(B=>{var U;if(M.current=B,!B){x.current=s.destroyBean(x.current),(U=b.current)==null||U.call(b);return}const H={addOrRemoveCssClass:($,te)=>l(Ce=>Ce.setClass($,te)),addOrRemoveDetailGridCssClass:($,te)=>p(Ce=>Ce.setClass($,te)),setDetailGrid:$=>f($),setRowData:$=>C($),getGui:()=>M.current},V=i.getInstance("detailCellRenderer");if(V&&(s.createBean(V),V.init(H,e),x.current=V,n.get("detailRowAutoHeight"))){const $=()=>{if(M.current==null)return;const te=M.current.clientHeight;te!=null&&te>0&&setTimeout(()=>{e.node.setRowHeight(te),(xi(n)||ya(n))&&o.onRowHeightChanged()},0)};b.current=r.observeResize(B,$),$()}},[]),_=T.useCallback(B=>{var H;(H=x.current)==null||H.registerDetailWithMaster(B)},[]);return De.createElement("div",{className:I,ref:k},g&&De.createElement(vN,{className:P,...g,modules:R,rowData:y,setGridApi:_}))}),G6=class extends Zk{constructor(e){super("react"),this.processQueuedUpdates=e,this.queueUpdates=!1,this.frameworkComponents={agGroupCellRenderer:ET,agGroupRowRenderer:ET,agDetailCellRenderer:B6},this.wrapIncoming=(t,i)=>i==="ensureVisible"?G9(t):t(),this.renderingEngine="react"}frameworkComponent(e){return this.frameworkComponents[e]}isFrameworkComponent(e){if(!e)return!1;const t=e.prototype;return!(t&&"getGui"in t)}getLockOnRefresh(){this.queueUpdates=!0}releaseLockOnRefresh(){this.queueUpdates=!1,this.processQueuedUpdates()}shouldQueueUpdates(){return this.queueUpdates}runWhenReadyAsync(){return B9()}},z6=class extends T.Component{constructor(){super(...arguments),this.apiListeners=[],this.setGridApi=e=>{this.api=e,this.apiListeners.forEach(t=>t(e))}}registerApiListener(e){this.apiListeners.push(e)}componentWillUnmount(){this.apiListeners.length=0}render(){return De.createElement(vN,{...this.props,setGridApi:this.setGridApi})}};function H6(){const[e,t]=T.useState([]),[i,s]=T.useState([]);T.useEffect(()=>{async function r(){try{const a=await(await fetch("https://hub.dataverse.org/api/installation/status")).json();t(a),s(a)}catch(o){console.error("Error fetching installation data:",o)}}r()},[]);const n=r=>{const o=r.api.getRenderedNodes(),a=o==null?void 0:o.map(l=>l.data);s(a||[])};return T.useEffect(()=>{},[i]),fe.jsxs(fe.Fragment,{children:[fe.jsxs($V,{center:[51.505,-.09],zoom:1.5,scrollWheelZoom:!1,className:"h-[50vh]",children:[fe.jsx(QV,{attribution:"Dataverse-Hub",url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),i.map(r=>fe.jsx(ZV,{position:[r.installation.latitude,r.installation.longitude],icon:HV.divIcon({className:"custom-icon",html:`<div 
								style="background-color: ${r.status==="OK"?"green":"red"}; 
                          		width: 2rem;
								height: 2rem;
								display: block;
								left: -1rem;
								top: -1rem;
								position: relative;
								border-radius: 3rem 3rem 0;
								transform: rotate(45deg);
								border: 1px solid #FFFFFF
								"></div>`}),children:fe.jsx(XV,{children:fe.jsxs("div",{children:[fe.jsx("strong",{children:"ID:"})," ",r.installation.dvHubId,fe.jsx("br",{}),fe.jsx("strong",{children:"Name:"})," ",r.installation.name,fe.jsx("br",{}),fe.jsx("strong",{children:"Description:"})," ",r.installation.description,fe.jsx("br",{}),fe.jsx("strong",{children:"Hostname:"})," ",fe.jsx("a",{href:`http://${r.installation.hostname}`,target:"_blank",rel:"noopener noreferrer",children:r.installation.hostname}),fe.jsx("br",{}),fe.jsx("strong",{children:"Country:"})," ",r.installation.country,fe.jsx("br",{}),fe.jsx("strong",{children:"Continent:"})," ",r.installation.continent,fe.jsx("br",{}),fe.jsx("strong",{children:"Launch Year:"})," ",r.installation.launchYear,fe.jsx("br",{}),fe.jsx("strong",{children:"GDCC Member:"})," ",r.installation.gdccMember?"Yes":"No",fe.jsx("br",{}),fe.jsx("strong",{children:"DOI Authority:"})," ",r.installation.doiAuthority,fe.jsx("br",{}),fe.jsx("strong",{children:"Contact Email:"})," ",r.installation.contactEmail]})})},r.installation.dvHubId))]}),fe.jsx("div",{className:"ag-theme-quartz",style:{height:500},children:fe.jsx(z6,{rowData:e,columnDefs:[{headerName:"Name",field:"installation.name",filter:!0},{headerName:"Hostname",field:"installation.hostname",filter:!0},{headerName:"Country",field:"installation.country",filter:!0},{headerName:"Continent",field:"installation.continent",filter:!0},{headerName:"Launch Year",field:"installation.launchYear",filter:!0},{headerName:"GDCC Member",field:"installation.gdccMember",filter:!0},{headerName:"Status",field:"status",filter:!0}],defaultColDef:{flex:1},domLayout:"autoHeight",animateRows:!1,onFilterChanged:n})})]})}var yN=Object.defineProperty,V6=Object.getOwnPropertyDescriptor,ko=(e,t)=>{for(var i in t)yN(e,i,{get:t[i],enumerable:!0})},A=(e,t,i,s)=>{for(var n=s>1?void 0:s?V6(t,i):t,r=e.length-1,o;r>=0;r--)(o=e[r])&&(n=(s?o(t,i,n):o(n))||n);return s&&n&&yN(t,i,n),n},W6={ariaAnnounceHoverDatum:"${datum}",ariaAnnounceChart:"chart, ${seriesCount}[number] series",ariaAnnounceHierarchyChart:"hierarchy chart, ${caption}",ariaAnnounceGaugeChart:"gauge chart, ${caption}",ariaAnnounceHierarchyDatum:"level ${level}[number], ${count}[number] children, ${description}",ariaAnnounceFlowProportionLink:"link ${index} of ${count}, from ${from} to ${to}, ${sizeName} ${size}",ariaAnnounceFlowProportionNode:"node ${index} of ${count}, ${description}",ariaDescriptionLegendItem:"Press Space or Enter to toggle visibility",ariaLabelAddHorizontalLine:"Add Horizontal Line",ariaLabelAnnotationOptionsToolbar:"Annotation Options",ariaLabelAnnotationSettingsDialog:"Annotation Settings",ariaLabelColorPicker:"Color picker",ariaLabelFinancialCharts:"Financial Charts",ariaLabelLegend:"Legend",ariaLabelLegendPagination:"Legend Pagination",ariaLabelLegendPagePrevious:"Previous Legend Page",ariaLabelLegendPageNext:"Next Legend Page",ariaLabelLegendItem:"${label}, Legend item ${index}[number] of ${count}[number]",ariaLabelLegendItemUnknown:"Unknown legend item",ariaLabelNavigator:"Navigator",ariaLabelNavigatorRange:"Range",ariaLabelNavigatorMinimum:"Minimum",ariaLabelNavigatorMaximum:"Maximum",ariaLabelRangesToolbar:"Ranges",ariaLabelSettingsTabBar:"Settings",ariaLabelZoomToolbar:"Zoom",ariaValuePanRange:"${min}[percent] to ${max}[percent]",iconAltTextLineStyleSolid:"Solid",iconAltTextLineStyleDashed:"Long-dashed",iconAltTextLineStyleDotted:"Short-dashed",iconAltTextPositionTop:"Top",iconAltTextPositionCenter:"Center",iconAltTextPositionBottom:"Bottom",iconAltTextAlignLeft:"Left",iconAltTextAlignCenter:"Center",iconAltTextAlignRight:"Right",iconAltTextClose:"Close",overlayLoadingData:"Loading data...",overlayNoData:"No data to display",overlayNoVisibleSeries:"No visible series",overlayUnsupportedBrowser:"Incompatible browser version. Please upgrade your browser.",seriesHistogramTooltipFrequency:"Frequency",seriesHistogramTooltipSum:"${yName} (sum)",seriesHistogramTooltipCount:"${yName} (count)",seriesHistogramTooltipMean:"${yName} (mean)",toolbarSeriesTypeDropdown:"Chart Type",toolbarSeriesTypeOHLC:"OHLC",toolbarSeriesTypeHLC:"HLC",toolbarSeriesTypeHighLow:"High Low",toolbarSeriesTypeCandles:"Candles",toolbarSeriesTypeHollowCandles:"Hollow Candles",toolbarSeriesTypeLine:"Line",toolbarSeriesTypeLineWithMarkers:"Line with Markers",toolbarSeriesTypeStepLine:"Step Line",toolbarAnnotationsTrendLine:"Trend Line",toolbarAnnotationsFibonacciRetracement:"Fib Retracement",toolbarAnnotationsHorizontalLine:"Horizontal Line",toolbarAnnotationsVerticalLine:"Vertical Line",toolbarAnnotationsParallelChannel:"Parallel Channel",toolbarAnnotationsDisjointChannel:"Disjoint Channel",toolbarAnnotationsClearAll:"Clear All",toolbarAnnotationsFillColor:"Fill Color",toolbarAnnotationsLineColor:"Line Color",toolbarAnnotationsLineStyle:"Line Style",toolbarAnnotationsLineStrokeWidth:"Line Stroke Width",toolbarAnnotationsSettings:"Settings",toolbarAnnotationsTextColor:"Text Color",toolbarAnnotationsTextSize:"Text Size",toolbarAnnotationsLock:"Lock",toolbarAnnotationsUnlock:"Unlock",toolbarAnnotationsDelete:"Delete",toolbarAnnotationsDragHandle:"Drag Toolbar",toolbarAnnotationsLineAnnotations:"Trend Lines",toolbarAnnotationsFibonacciAnnotations:"Fibonacci",toolbarAnnotationsTextAnnotations:"Text Annotations",toolbarAnnotationsShapeAnnotations:"Arrows",toolbarAnnotationsMeasurerAnnotations:"Measurers",toolbarAnnotationsCallout:"Callout",toolbarAnnotationsComment:"Comment",toolbarAnnotationsNote:"Note",toolbarAnnotationsText:"Text",toolbarAnnotationsArrow:"Arrow",toolbarAnnotationsArrowUp:"Arrow Up",toolbarAnnotationsArrowDown:"Arrow Down",toolbarAnnotationsDateRange:"Date Range",toolbarAnnotationsPriceRange:"Price Range",toolbarAnnotationsDatePriceRange:"Date and Price",toolbarAnnotationsQuickDatePriceRange:"Measure",toolbarRange1Month:"1M",toolbarRange1MonthAria:"1 month",toolbarRange3Months:"3M",toolbarRange3MonthsAria:"3 months",toolbarRange6Months:"6M",toolbarRange6MonthsAria:"6 months",toolbarRangeYearToDate:"YTD",toolbarRangeYearToDateAria:"Year to date",toolbarRange1Year:"1Y",toolbarRange1YearAria:"1 year",toolbarRangeAll:"All",toolbarRangeAllAria:"All",toolbarZoomZoomOut:"Zoom out",toolbarZoomZoomIn:"Zoom in",toolbarZoomPanLeft:"Pan left",toolbarZoomPanRight:"Pan right",toolbarZoomPanStart:"Pan to the start",toolbarZoomPanEnd:"Pan to the end",toolbarZoomReset:"Reset the zoom",contextMenuDownload:"Download",contextMenuToggleSeriesVisibility:"Toggle Visibility",contextMenuToggleOtherSeries:"Toggle Other Series",contextMenuZoomToCursor:"Zoom to here",contextMenuPanToCursor:"Pan to here",dialogHeaderChannel:"Channel",dialogHeaderLine:"Line",dialogHeaderFibonacciRange:"Fib Retracement",dialogHeaderDateRange:"Date Range",dialogHeaderPriceRange:"Price Range",dialogHeaderDatePriceRange:"Date and Price",dialogHeaderText:"Text",dialogInputAlign:"Align",dialogInputColorPicker:"Color",dialogInputColorPickerAltText:"Text Color",dialogInputFillColorPicker:"Fill",dialogInputFillColorPickerAltText:"Fill Color",dialogInputExtendChannelStart:"Extend channel start",dialogInputExtendChannelEnd:"Extend channel end",dialogInputExtendLineStart:"Extend line start",dialogInputExtendLineEnd:"Extend line end",dialogInputExtendAbove:"Extend above",dialogInputExtendBelow:"Extend below",dialogInputExtendLeft:"Extend left",dialogInputExtendRight:"Extend right",dialogInputReverse:"Reverse",dialogInputShowFill:"Show Fill",dialogInputFontSize:"Size",dialogInputFontSizeAltText:"Font Size",dialogInputLineStyle:"Dash",dialogInputPosition:"Position",dialogInputStrokeWidth:"Weight",dialogInputStrokeWidthAltText:"Line Weight",dialogInputFibonacciBands:"Bands",dialogInputFibonacciBandsAltText:"Fibonacci Bands",inputTextareaPlaceholder:"Add Text",measurerDateRangeBars:"${value}[number] bars",measurerPriceRangeValue:"${value}[number]",measurerPriceRangePercent:"${value}[percent]",measurerVolume:"Vol ${value}"},CN=(e=>(e.POINTER="pointer",e.NODE="node",e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e.TOP_LEFT="top-left",e.TOP_RIGHT="top-right",e.BOTTOM_RIGHT="bottom-right",e.BOTTOM_LEFT="bottom-left",e))(CN||{}),SN={};ko(SN,{NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>wn,fromToMotion:()=>Oi,staticFromToMotion:()=>wa});var lM=new Map;function j6(){lM.clear()}function Qr(e){const t=e.constructor,i=Object.hasOwn(t,"className")?t.className:t.name;if(!i)throw new Error(`The ${t} is missing the 'className' property.`);const s=(lM.get(i)??0)+1;return lM.set(i,s),`${i}-${s}`}function U6(){var e;return((e=crypto.randomUUID)==null?void 0:e.call(crypto))??K6()}function K6(){const e=new Uint8Array(16);crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let t="";for(let i=0;i<e.length;i++)(i===4||i===6||i===8||i===10)&&(t+="-"),t+=e[i].toString(16).padStart(2,"0");return t}function*ah(...e){for(const t of e)yield*t}function wN(e){return e!=null&&typeof e=="object"&&Symbol.iterator in e?e:[e]}var BC={containsPoint:Y6,isEmpty:$6,normalize:Z6};function Y6(e,t,i){return t>=e.x&&t<=e.x+e.width&&i>=e.y&&i<=e.y+e.height}function $6(e){return e==null||e.height===0||e.width===0||isNaN(e.height)||isNaN(e.width)}function Z6(e){let{x:t,y:i,width:s,height:n}=e;return(s==null||s>0)&&(n==null||n>0)?e:(t!=null&&s!=null&&s<0&&(s=-s,t=t-s),i!=null&&n!=null&&n<0&&(n=-n,i=i-n),{x:t,y:i,width:s,height:n})}var GC=Symbol("interpolate"),qy=e=>e[GC]!=null;function zC(e,t,i,s=1/0){const n={nearest:void 0,distanceSquared:s};for(const r of i){const o=r.distanceSquared(e,t);if(o===0)return{nearest:r,distanceSquared:0};o<n.distanceSquared&&(n.nearest=r,n.distanceSquared=o)}return n}function X6(e,t,i,s=1/0){var a;const{x:n=e,y:r=t}=((a=i.transformPoint)==null?void 0:a.call(i,e,t))??{},o={nearest:void 0,distanceSquared:s};for(const l of i.children){const{nearest:c,distanceSquared:p}=l.nearestSquared(n,r,o.distanceSquared);if(p===0)return{nearest:c,distanceSquared:p};p<o.distanceSquared&&(o.nearest=c,o.distanceSquared=p)}return o}function St(e,t,i){return Math.min(i,Math.max(e,t))}function cM(e,t){const[i,s]=Ks(t);return St(i,e,s)}function Ks(e){if(e.length===0)return[];const t=[1/0,-1/0];for(const i of e)i<t[0]&&(t[0]=i),i>t[1]&&(t[1]=i);return t}function Ef(e){const[t,i]=Ks(e);return i-t}function xN(e,t,i=1e-10){return e>=t[0]-i&&e<=t[1]+i}function nf(e,t,i=1e-10){return Math.abs(e-t)<i}function HC(e){return Math.sign(e)===-1||Object.is(e,-0)}function bN(e){return e%1===0}function iR(e,t=2){const i=10**t;return Math.round(e*i)/i}function sR(e,t){return Math.floor(e%t+(e<0?t:0))}function VC(e){var n;if(Math.floor(e)===e)return 0;let t=String(e),i=0;if(e<1e-6||e>=1e21){let r;[t,r]=t.split("e"),r!=null&&(i=Number(r))}const s=((n=t.split(".")[1])==null?void 0:n.length)??0;return Math.max(s-i,0)}var If=class zd{constructor(t,i,s,n){this.x=t,this.y=i,this.width=s,this.height=n}static fromDOMRect({x:t,y:i,width:s,height:n}){return new zd(t,i,s,n)}static merge(t){let i=1/0,s=1/0,n=-1/0,r=-1/0;for(const o of t)o.x<i&&(i=o.x),o.y<s&&(s=o.y),o.x+o.width>n&&(n=o.x+o.width),o.y+o.height>r&&(r=o.y+o.height);return new zd(i,s,n-i,r-s)}static nearestBox(t,i,s){return zC(t,i,s)}toDOMRect(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.y,left:this.x,right:this.x+this.width,bottom:this.y+this.height,toJSON(){return{}}}}clone(){const{x:t,y:i,width:s,height:n}=this;return new zd(t,i,s,n)}equals(t){return this.x===t.x&&this.y===t.y&&this.width===t.width&&this.height===t.height}containsPoint(t,i){return BC.containsPoint(this,t,i)}containsBBox(t){const[i,s]=[this.x,this.x+this.width],[n,r]=[this.y,this.y+this.height],[o,a]=[t.x,t.x+t.width],[l,c]=[t.y,t.y+t.height];return Math.min(i,o)===i&&Math.max(s,a)===s&&Math.min(n,l)===n&&Math.max(r,c)===r}intersection(t){if(!this.collidesBBox(t))return;const i=St(t.x,this.x,t.x+t.width),s=St(t.y,this.y,t.y+t.height),n=St(t.x,this.x+this.width,t.x+t.width),r=St(t.y,this.y+this.height,t.y+t.height);return new zd(i,s,n-i,r-s)}collidesBBox(t){return this.x<t.x+t.width&&this.x+this.width>t.x&&this.y<t.y+t.height&&this.y+this.height>t.y}computeCenter(){return{x:this.x+this.width/2,y:this.y+this.height/2}}isFinite(){return Number.isFinite(this.x)&&Number.isFinite(this.y)&&Number.isFinite(this.width)&&Number.isFinite(this.height)}distanceSquared(t,i){if(this.containsPoint(t,i))return 0;const s=t-St(this.x,t,this.x+this.width),n=i-St(this.y,i,this.y+this.height);return s*s+n*n}shrink(t,i){if(typeof t=="number")this.applyMargin(t,i);else for(const[s,n]of Object.entries(t))this.applyMargin(n,s);return this.width<0&&(this.width=0),this.height<0&&(this.height=0),this}grow(t,i){if(typeof t=="number")this.applyMargin(-t,i);else for(const[s,n]of Object.entries(t))this.applyMargin(-n,s);return this}applyMargin(t,i){switch(i){case"top":this.y+=t;case"bottom":this.height-=t;break;case"left":this.x+=t;case"right":this.width-=t;break;case"vertical":this.y+=t,this.height-=t*2;break;case"horizontal":this.x+=t,this.width-=t*2;break;case void 0:this.x+=t,this.y+=t,this.width-=t*2,this.height-=t*2;break}}translate(t,i){return this.x+=t,this.y+=i,this}combine(t){const{x:i,y:s,width:n,height:r}=this;this.x=Math.min(i,t.x),this.y=Math.min(s,t.y),this.width=Math.max(i+n,t.x+t.width)-this.x,this.height=Math.max(s+r,t.y+t.height)-this.y}[GC](t,i){return new zd(this.x*(1-i)+t.x*i,this.y*(1-i)+t.y*i,this.width*(1-i)+t.width*i,this.height*(1-i)+t.height*i)}};If.zero=Object.freeze(new If(0,0,0,0));If.NaN=Object.freeze(new If(NaN,NaN,NaN,NaN));var Ue=If;function Ze(e){return function(t,i){const s=`__${i}`;t[i]||Q6(t,i,s,e)}}function Q6(e,t,i,s){const{type:n="normal",changeCb:r,convertor:o,checkDirtyOnAssignment:a=!1}=s??{},l={type:n,changeCb:r,checkDirtyOnAssignment:a,convertor:o};let c;switch(n){case"normal":c=t8(i,l);break;case"transform":c=i8(i);break;case"path":c=s8(i);break}c=e8(J6(q6(c,l),l),l),Object.defineProperty(e,t,{set:c,get:function(){return this[i]},enumerable:!0,configurable:!0})}function q6(e,t){const{convertor:i}=t;return i?function(s){e.call(this,i(s))}:e}var cm=Symbol("no-change");function J6(e,t){const{changeCb:i}=t;return i?function(s){const n=e.call(this,s);return n!==cm&&i.call(this,this),n}:e}function e8(e,t){const{checkDirtyOnAssignment:i}=t;return i?function(s){const n=e.call(this,s);return n!==cm&&(s==null?void 0:s._dirty)===!0&&this.markDirty(),n}:e}function t8(e,t){const{changeCb:i}=t;return function(s){const n=this[e];return s!==n?(this[e]=s,this.markDirty(),i==null||i(this),s):cm}}function i8(e){return function(t){const i=this[e];return t!==i?(this[e]=t,this.markDirtyTransform(),t):cm}}function s8(e){return function(t){const i=this[e];return t!==i?(this[e]=t,this._dirtyPath||(this._dirtyPath=!0,this.markDirty()),t):cm}}var MN=(e=>(e[e.All=0]="All",e[e.None=1]="None",e))(MN||{}),WC=class RN{constructor(t){this.serialNumber=RN._nextSerialNumber++,this.childNodeCounts={groups:0,nonGroups:0,thisComplexity:0,complexity:0},this.id=Qr(this),this.pointerEvents=0,this._dirty=!0,this.dirtyZIndex=!1,this.isContainerNode=!1,this.visible=!0,this.zIndex=0,this.name=t==null?void 0:t.name,this.tag=(t==null?void 0:t.tag)??NaN,this.zIndex=(t==null?void 0:t.zIndex)??0}static toSVG(t,i,s){var o,a;const n=t==null?void 0:t.toSVG();if(n==null||!n.elements.length&&!((o=n.defs)!=null&&o.length))return;const r=document.createElementNS("http://www.w3.org/2000/svg","svg");if(r.setAttribute("width",String(i)),r.setAttribute("height",String(s)),r.setAttribute("viewBox",`0 0 ${i} ${s}`),(a=n.defs)!=null&&a.length){const l=document.createElementNS("http://www.w3.org/2000/svg","defs");l.append(...n.defs),r.append(l)}return r.append(...n.elements),r.outerHTML}static*extractBBoxes(t,i){for(const s of t)if(!i||s.visible&&!s.transitionOut){const n=s.getBBox();n&&(yield n)}}get datum(){var t;return this._datum??((t=this.parentNode)==null?void 0:t.datum)}set datum(t){this._datum!==t&&(this._previousDatum=this._datum,this._datum=t)}get previousDatum(){return this._previousDatum}get layerManager(){return this._layerManager}get dirty(){return this._dirty}preRender(t=1){this.childNodeCounts.groups=0,this.childNodeCounts.nonGroups=1,this.childNodeCounts.complexity=t,this.childNodeCounts.thisComplexity=t;for(const i of this.children()){const s=i.preRender();this.childNodeCounts.groups+=s.groups,this.childNodeCounts.nonGroups+=s.nonGroups,this.childNodeCounts.complexity+=s.complexity}return this.childNodeCounts}render(t){const{stats:i}=t;if(this._dirty=!1,t.debugNodeSearch){const s=this.name??this.id;t.debugNodeSearch.some(n=>typeof n=="string"?n===s:n.test(s))&&(t.debugNodes[this.name??this.id]=this)}i&&(i.nodesRendered++,i.opsPerformed+=this.childNodeCounts.thisComplexity)}_setLayerManager(t){this._layerManager=t,this._debug=t==null?void 0:t.debug;for(const i of this.children())i._setLayerManager(t)}sortChildren(t){if(this.dirtyZIndex=!1,!this.childNodes)return;const i=[...this.childNodes].sort(t);this.childNodes.clear();for(const s of i)this.childNodes.add(s)}*traverseUp(t){let i=this;for(t&&(yield i);i=i.parentNode;)yield i}*children(){if(this.childNodes)for(const t of this.childNodes)yield t}isLeaf(){var t;return!((t=this.childNodes)!=null&&t.size)}isRoot(){return!this.parentNode}append(t){var i;this.childNodes??(this.childNodes=new Set);for(const s of wN(t))(i=s.parentNode)==null||i.removeChild(s),this.childNodes.add(s),s.parentNode=this,s._setLayerManager(this.layerManager);this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty()}appendChild(t){return this.append(t),t}removeChild(t){var i;return(i=this.childNodes)!=null&&i.delete(t)?(delete t.parentNode,t._setLayerManager(),this.invalidateCachedBBox(),this.dirtyZIndex=!0,this.markDirty(),!0):!1}remove(){var t;return((t=this.parentNode)==null?void 0:t.removeChild(this))??!1}clear(){var t;for(const i of this.children())delete i.parentNode,i._setLayerManager();(t=this.childNodes)==null||t.clear(),this.invalidateCachedBBox()}destroy(){var t;(t=this.parentNode)==null||t.removeChild(this)}setProperties(t,i){if(i)for(const s of i)this[s]=t[s];else Object.assign(this,t);return this}containsPoint(t,i){return!1}pickNode(t,i,s=!1){if(!this.visible||this.pointerEvents===1||!this.containsPoint(t,i))return;const n=[...this.children()];if(n.length>1e3)for(let r=n.length-1;r>=0;r--){const o=n[r],l=o.containsPoint(t,i)?o.pickNode(t,i):void 0;if(l)return l}else if(n.length)for(let r=n.length-1;r>=0;r--){const o=n[r].pickNode(t,i);if(o)return o}else if(!this.isContainerNode)return this}invalidateCachedBBox(){var t;this.cachedBBox!=null&&(this.cachedBBox=void 0,(t=this.parentNode)==null||t.invalidateCachedBBox())}getBBox(){return this.cachedBBox==null&&(this.cachedBBox=Object.freeze(this.computeBBox())),this.cachedBBox}computeBBox(){}markDirty(){const{_dirty:t}=this;this.cachedBBox==null&&t||(this.invalidateCachedBBox(),this._dirty=!0,this.parentNode&&this.parentNode.markDirty())}markClean(){if(this._dirty){this._dirty=!1;for(const t of this.children())t.markClean()}}onZIndexChange(){const{parentNode:t}=this;t&&(t.dirtyZIndex=!0)}toSVG(){}};WC._nextSerialNumber=0;A([Ze()],WC.prototype,"visible",2);A([Ze({changeCb:e=>e.onZIndexChange()})],WC.prototype,"zIndex",2);var Xc=WC,Zv=(e,t,i)=>e*(1-i)+t*i,ib=e=>{const t=e<0?-1:1,i=Math.abs(e);return i<=.04045?e/12.92:t*((i+.055)/1.055)**2.4},sb=e=>{const t=e<0?-1:1,i=Math.abs(e);return i>.0031308?t*(1.055*i**(1/2.4)-.055):12.92*e},DN=class ui{constructor(t,i,s,n=1){this.r=St(0,t||0,1),this.g=St(0,i||0,1),this.b=St(0,s||0,1),this.a=St(0,n||0,1)}static validColorString(t){return t.indexOf("#")>=0?!!ui.parseHex(t):t.indexOf("rgb")>=0?!!ui.stringToRgba(t):!!ui.nameToHex.has(t.toLowerCase())}static fromString(t){if(t.indexOf("#")>=0)return ui.fromHexString(t);const i=ui.nameToHex.get(t.toLowerCase());if(i)return ui.fromHexString(i);if(t.indexOf("rgb")>=0)return ui.fromRgbaString(t);throw new Error(`Invalid color string: '${t}'`)}static parseHex(t){t=t.replace(/ /g,"").slice(1);let i;switch(t.length){case 6:case 8:i=[];for(let s=0;s<t.length;s+=2)i.push(parseInt(`${t[s]}${t[s+1]}`,16));break;case 3:case 4:i=t.split("").map(s=>parseInt(s,16)).map(s=>s+s*16);break}if((i==null?void 0:i.length)>=3&&i.every(s=>s>=0))return i.length===3&&i.push(255),i}static fromHexString(t){const i=ui.parseHex(t);if(i){const[s,n,r,o]=i;return new ui(s/255,n/255,r/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${t}'`)}static stringToRgba(t){let i=-1,s=-1;for(let a=0;a<t.length;a++){const l=t[a];if(i===-1&&l==="(")i=a;else if(l===")"){s=a;break}}if(i===-1||s===-1)return;const r=t.substring(i+1,s).split(","),o=[];for(let a=0;a<r.length;a++){const l=r[a];let c=parseFloat(l);if(!Number.isFinite(c))return;l.indexOf("%")>=0?(c=St(0,c,100),c/=100):a===3?c=St(0,c,1):(c=St(0,c,255),c/=255),o.push(c)}return o}static fromRgbaString(t){const i=ui.stringToRgba(t);if(i){if(i.length===3)return new ui(i[0],i[1],i[2]);if(i.length===4)return new ui(i[0],i[1],i[2],i[3])}throw new Error(`Malformed rgb/rgba color string: '${t}'`)}static fromArray(t){if(t.length===4)return new ui(t[0],t[1],t[2],t[3]);if(t.length===3)return new ui(t[0],t[1],t[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(t,i,s,n=1){const r=ui.HSBtoRGB(t,i,s);return new ui(r[0],r[1],r[2],n)}static fromHSL(t,i,s,n=1){const r=ui.HSLtoRGB(t,i,s);return new ui(r[0],r[1],r[2],n)}static fromOKLCH(t,i,s,n=1){const r=ui.OKLCHtoRGB(t,i,s);return new ui(r[0],r[1],r[2],n)}static padHex(t){return t.length===1?"0"+t:t}toHexString(){let t="#"+ui.padHex(Math.round(this.r*255).toString(16))+ui.padHex(Math.round(this.g*255).toString(16))+ui.padHex(Math.round(this.b*255).toString(16));return this.a<1&&(t+=ui.padHex(Math.round(this.a*255).toString(16))),t}toRgbaString(t=3){const i=[Math.round(this.r*255),Math.round(this.g*255),Math.round(this.b*255)],s=Math.pow(10,t);return this.a!==1?(i.push(Math.round(this.a*s)/s),`rgba(${i.join(", ")})`):`rgb(${i.join(", ")})`}toString(){return this.a===1?this.toHexString():this.toRgbaString()}toHSB(){return ui.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(t,i,s){const n=ib(t),r=ib(i),o=ib(s),a=Math.cbrt(.4122214708*n+.5363325363*r+.0514459929*o),l=Math.cbrt(.2119034982*n+.6806995451*r+.1073969566*o),c=Math.cbrt(.0883024619*n+.2817188376*r+.6299787005*o),p=.2104542553*a+.793617785*l-.0040720468*c,g=1.9779984951*a-2.428592205*l+.4505937099*c,f=.0259040371*a+.7827717662*l-.808675766*c,y=Math.atan2(f,g)*180/Math.PI,C=p,x=Math.hypot(g,f),M=y>=0?y:y+360;return[C,x,M]}static OKLCHtoRGB(t,i,s){const n=t,r=i*Math.cos(s*Math.PI/180),o=i*Math.sin(s*Math.PI/180),a=(n+.3963377774*r+.2158037573*o)**3,l=(n-.1055613458*r-.0638541728*o)**3,c=(n-.0894841775*r-1.291485548*o)**3,p=4.0767416621*a-3.3077115913*l+.2309699292*c,g=-1.2684380046*a+2.6097574011*l-.3413193965*c,f=-.0041960863*a-.7034186147*l+1.707614701*c,y=sb(p),C=sb(g),x=sb(f);return[y,C,x]}static RGBtoHSL(t,i,s){const n=Math.min(t,i,s),r=Math.max(t,i,s),o=(r+n)/2;let a,l;if(r===n)a=0,l=0;else{const c=r-n;l=o>.5?c/(2-r-n):c/(r+n),r===t?a=(i-s)/c+(i<s?6:0):r===i?a=(s-t)/c+2:a=(t-i)/c+4,a*=360/6}return[a,l,o]}static HSLtoRGB(t,i,s){if(t=(t%360+360)%360,i===0)return[s,s,s];const n=s<.5?s*(1+i):s+i-s*i,r=2*s-n;function o(p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?r+(n-r)*6*p:p<1/2?n:p<2/3?r+(n-r)*(2/3-p)*6:r}const a=o(t/360+1/3),l=o(t/360),c=o(t/360-1/3);return[a,l,c]}static RGBtoHSB(t,i,s){const n=Math.min(t,i,s),r=Math.max(t,i,s),o=r===0?0:(r-n)/r;let a=0;if(n!==r){const l=r-n,c=(r-t)/l,p=(r-i)/l,g=(r-s)/l;t===r?a=g-p:i===r?a=2+c-g:a=4+p-c,a/=6,a<0&&(a=a+1)}return[a*360,o,r]}static HSBtoRGB(t,i,s){t=(t%360+360)%360/360;let n=0,r=0,o=0;if(i===0)n=r=o=s;else{const a=(t-Math.floor(t))*6,l=a-Math.floor(a),c=s*(1-i),p=s*(1-i*l),g=s*(1-i*(1-l));switch(a>>0){case 0:n=s,r=g,o=c;break;case 1:n=p,r=s,o=c;break;case 2:n=c,r=s,o=g;break;case 3:n=c,r=p,o=s;break;case 4:n=g,r=c,o=s;break;case 5:n=s,r=c,o=p;break}}return[n,r,o]}static mix(t,i,s){return new ui(Zv(t.r,i.r,s),Zv(t.g,i.g,s),Zv(t.b,i.b,s),Zv(t.a,i.a,s))}};DN.nameToHex=new Map([["aliceblue","#F0F8FF"],["antiquewhite","#FAEBD7"],["aqua","#00FFFF"],["aquamarine","#7FFFD4"],["azure","#F0FFFF"],["beige","#F5F5DC"],["bisque","#FFE4C4"],["black","#000000"],["blanchedalmond","#FFEBCD"],["blue","#0000FF"],["blueviolet","#8A2BE2"],["brown","#A52A2A"],["burlywood","#DEB887"],["cadetblue","#5F9EA0"],["chartreuse","#7FFF00"],["chocolate","#D2691E"],["coral","#FF7F50"],["cornflowerblue","#6495ED"],["cornsilk","#FFF8DC"],["crimson","#DC143C"],["cyan","#00FFFF"],["darkblue","#00008B"],["darkcyan","#008B8B"],["darkgoldenrod","#B8860B"],["darkgray","#A9A9A9"],["darkgreen","#006400"],["darkgrey","#A9A9A9"],["darkkhaki","#BDB76B"],["darkmagenta","#8B008B"],["darkolivegreen","#556B2F"],["darkorange","#FF8C00"],["darkorchid","#9932CC"],["darkred","#8B0000"],["darksalmon","#E9967A"],["darkseagreen","#8FBC8F"],["darkslateblue","#483D8B"],["darkslategray","#2F4F4F"],["darkslategrey","#2F4F4F"],["darkturquoise","#00CED1"],["darkviolet","#9400D3"],["deeppink","#FF1493"],["deepskyblue","#00BFFF"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1E90FF"],["firebrick","#B22222"],["floralwhite","#FFFAF0"],["forestgreen","#228B22"],["fuchsia","#FF00FF"],["gainsboro","#DCDCDC"],["ghostwhite","#F8F8FF"],["gold","#FFD700"],["goldenrod","#DAA520"],["gray","#808080"],["green","#008000"],["greenyellow","#ADFF2F"],["grey","#808080"],["honeydew","#F0FFF0"],["hotpink","#FF69B4"],["indianred","#CD5C5C"],["indigo","#4B0082"],["ivory","#FFFFF0"],["khaki","#F0E68C"],["lavender","#E6E6FA"],["lavenderblush","#FFF0F5"],["lawngreen","#7CFC00"],["lemonchiffon","#FFFACD"],["lightblue","#ADD8E6"],["lightcoral","#F08080"],["lightcyan","#E0FFFF"],["lightgoldenrodyellow","#FAFAD2"],["lightgray","#D3D3D3"],["lightgreen","#90EE90"],["lightgrey","#D3D3D3"],["lightpink","#FFB6C1"],["lightsalmon","#FFA07A"],["lightseagreen","#20B2AA"],["lightskyblue","#87CEFA"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#B0C4DE"],["lightyellow","#FFFFE0"],["lime","#00FF00"],["limegreen","#32CD32"],["linen","#FAF0E6"],["magenta","#FF00FF"],["maroon","#800000"],["mediumaquamarine","#66CDAA"],["mediumblue","#0000CD"],["mediumorchid","#BA55D3"],["mediumpurple","#9370DB"],["mediumseagreen","#3CB371"],["mediumslateblue","#7B68EE"],["mediumspringgreen","#00FA9A"],["mediumturquoise","#48D1CC"],["mediumvioletred","#C71585"],["midnightblue","#191970"],["mintcream","#F5FFFA"],["mistyrose","#FFE4E1"],["moccasin","#FFE4B5"],["navajowhite","#FFDEAD"],["navy","#000080"],["oldlace","#FDF5E6"],["olive","#808000"],["olivedrab","#6B8E23"],["orange","#FFA500"],["orangered","#FF4500"],["orchid","#DA70D6"],["palegoldenrod","#EEE8AA"],["palegreen","#98FB98"],["paleturquoise","#AFEEEE"],["palevioletred","#DB7093"],["papayawhip","#FFEFD5"],["peachpuff","#FFDAB9"],["peru","#CD853F"],["pink","#FFC0CB"],["plum","#DDA0DD"],["powderblue","#B0E0E6"],["purple","#800080"],["rebeccapurple","#663399"],["red","#FF0000"],["rosybrown","#BC8F8F"],["royalblue","#4169E1"],["saddlebrown","#8B4513"],["salmon","#FA8072"],["sandybrown","#F4A460"],["seagreen","#2E8B57"],["seashell","#FFF5EE"],["sienna","#A0522D"],["silver","#C0C0C0"],["skyblue","#87CEEB"],["slateblue","#6A5ACD"],["slategray","#708090"],["slategrey","#708090"],["snow","#FFFAFA"],["springgreen","#00FF7F"],["steelblue","#4682B4"],["tan","#D2B48C"],["teal","#008080"],["thistle","#D8BFD8"],["tomato","#FF6347"],["transparent","#00000000"],["turquoise","#40E0D0"],["violet","#EE82EE"],["wheat","#F5DEB3"],["white","#FFFFFF"],["whitesmoke","#F5F5F5"],["yellow","#FFFF00"],["yellowgreen","#9ACD32"]]);var Mo=DN;function n8(e,t){return i=>Number(e)*(1-i)+Number(t)*i}function EN(e,t){if(typeof e=="string")try{e=Mo.fromString(e)}catch{e=Mo.fromArray([0,0,0])}if(typeof t=="string")try{t=Mo.fromString(t)}catch{t=Mo.fromArray([0,0,0])}return i=>Mo.mix(e,t,i).toRgbaString()}var Jy=Symbol("BREAK"),ep="__decorator_config";function IN(e,t){Object.getOwnPropertyDescriptor(e,ep)==null&&Object.defineProperty(e,ep,{value:{}});const i=e[ep],s=t.toString();if(typeof i[s]<"u")return i[s];const n=new WeakMap;i[s]={setters:[],getters:[],observers:[],valuesMap:n};const r=Object.getOwnPropertyDescriptor(e,t),o=r==null?void 0:r.set,a=r==null?void 0:r.get;return Object.defineProperty(e,t,{set:function(p){const{setters:g,observers:f}=i[s];let y;g.some(C=>C.length>2)&&(y=a?a.call(this):n.get(this));for(const C of g)if(p=C(this,t,p,y),p===Jy)return;o?o.call(this,p):n.set(this,p);for(const C of f)C(this,p,y)},get:function(){let p=a?a.call(this):n.get(this);for(const g of i[s].getters)if(p=g(this,t,p),p===Jy)return;return p},enumerable:!0,configurable:!1}),i[s]}function wl(e,t,i){return(s,n)=>{const r=IN(s,n);r.setters.push(e),t&&r.getters.unshift(t),i&&Object.assign(r,i)}}function LN(e){return(t,i)=>{IN(t,i).observers.push(e)}}function jC(e){return typeof e<"u"&&ep in e}function gh(e){const t=new Set;for(;jC(e);)t.add(e==null?void 0:e[ep]),e=Object.getPrototypeOf(e);return Array.from(t).flatMap(i=>Object.keys(i))}function TN(e){return gh(e).reduce((t,i)=>(t[i]=e[i]??null,t),{})}function r8(e,t){const i=t.toString();for(;jC(e);){const s=e[ep];if(Object.hasOwn(s,i))return s[i];e=Object.getPrototypeOf(e)}}function Gc(e){return e!=null}function bi(e){return Array.isArray(e)}function nR(e){return typeof e=="boolean"}function um(e){return e instanceof Date}function UC(e){return um(e)&&!isNaN(Number(e))}function AN(e){return e instanceof RegExp}function tu(e){return typeof e=="function"}function xn(e){return typeof e=="object"&&e!==null&&!bi(e)}function o8(e){return bi(e)||bn(e)}function bn(e){return typeof e=="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function Vn(e){return typeof e=="string"}function Eo(e){return typeof e=="number"}function Kt(e){return Number.isFinite(e)}function PN(e){return typeof window<"u"&&e instanceof HTMLElement}function a8(e,t){return Vn(t)&&Object.keys(e).includes(t)}function FN(e,t){return Object.values(e).includes(t)}function kN(e){return typeof e=="symbol"}function NN(e,t){return e.type!==t}function Sh(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every((i,s)=>Sh(i,t[s])):bn(e)?bn(t)?rR(e,t,Sh):!1:e===t}function rR(e,t,i){for(const s of Object.keys(t))if(!(s in e))return!1;for(const s of Object.keys(e))if(!(s in t)||!i(e[s],t[s]))return!1;return!0}function l8(...e){return Et(...e.reverse())}function Et(...e){const t={};for(const i of e){if(!xn(i))continue;const s=jC(i)?gh(i):Object.keys(i);for(const n of s)bn(t[n])&&bn(i[n])?t[n]=Et(t[n],i[n]):t[n]??(t[n]=i[n])}return t}function eC(e,...t){return t&&bi(e)?e.map(i=>Et(i,...t)):e}function c8(e,t){return Object.entries(e).reduce((i,[s,n])=>(i[s]=t(n,s,e),i),{})}function uM(e,t){const i={...e};for(const s of t)delete i[s];return i}function oR(e,t){return(bi(t)?t:t.split(".")).reduce((s,n)=>s[n],e)}var aR=new Set(["__proto__","constructor","prototype"]);function lR(e,t,i){const s=bi(t)?t.slice():t.split("."),n=s.pop();if(s.some(o=>aR.has(o)))return;const r=s.reduce((o,a)=>o[a],e);return r[n]=i,r[n]}function Pc(e,t,i){if(i===void 0)return t;for(const s of e){const n=i[s];n!==void 0&&(t[s]=n)}return t}function rf(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach(t=>{const i=e[t];i!==null&&(typeof i=="object"||typeof i=="function")&&!Object.isFrozen(i)&&rf(i)}),e}var hM={};ko(hM,{easeIn:()=>u8,easeInOut:()=>h8,easeInOutQuad:()=>g8,easeInQuad:()=>d8,easeOut:()=>Lf,easeOutQuad:()=>p8,inverseEaseOut:()=>_N,linear:()=>ON});var ON=e=>e,u8=e=>1-Math.cos(e*Math.PI/2),Lf=e=>Math.sin(e*Math.PI/2),h8=e=>-(Math.cos(e*Math.PI)-1)/2,d8=e=>e*e,p8=e=>1-(1-e)**2,g8=e=>e<.5?2*e*e:1-(-2*e+2)**2/2,_N=e=>2*Math.asin(e)/Math.PI,tC=.2,Hd=["initial","remove","update","add","trailing","end","none"],Tf={initial:{animationDuration:1,animationDelay:0},add:{animationDuration:.25,animationDelay:.75},remove:{animationDuration:.25,animationDelay:0},update:{animationDuration:.5,animationDelay:.25},trailing:{animationDuration:tC,animationDelay:1,skipIfNoEarlierAnimations:!0},end:{animationDelay:1+tC,animationDuration:0,skipIfNoEarlierAnimations:!0},none:{animationDuration:0,animationDelay:0}},BN=(e=>(e.Loop="loop",e.Reverse="reverse",e))(BN||{});function f8(e){return e.every(t=>t instanceof Xc)}function KC(e){return f8(e)?{nodes:e,selections:[]}:{nodes:[],selections:e}}function dM(e,t){return e===t?!0:Array.isArray(e)&&Array.isArray(t)?e.length===t.length&&e.every((i,s)=>dM(i,t[s])):qy(e)&&qy(t)?e.equals(t):bn(e)&&bn(t)?rR(e,t,dM):!1}var GN=class{constructor(e){var i,s,n;this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=e.id,this.groupId=e.groupId,this.autoplay=e.autoplay??!0,this.ease=e.ease??ON,this.phase=e.phase;const t=e.duration??Tf[this.phase].animationDuration;this.duration=t*e.defaultDuration,this.delay=(e.delay??0)*e.defaultDuration,this.onComplete=e.onComplete,this.onPlay=e.onPlay,this.onStop=e.onStop,this.onUpdate=e.onUpdate,this.interpolate=this.createInterpolator(e.from,e.to),this.from=e.from,e.skip===!0&&((i=this.onUpdate)==null||i.call(this,e.to,!1,this),(s=this.onStop)==null||s.call(this,this),(n=this.onComplete)==null||n.call(this,this),this.isComplete=!0),e.collapsable!==!1&&(this.duration=this.checkCollapse(e,this.duration))}checkCollapse(e,t){return dM(e.from,e.to)?0:t}play(e=!1){var t,i;this.isPlaying||this.isComplete||(this.isPlaying=!0,(t=this.onPlay)==null||t.call(this,this),this.autoplay&&(this.autoplay=!1,e&&((i=this.onUpdate)==null||i.call(this,this.from,!0,this))))}pause(){this.isPlaying=!1}stop(){var e;this.isPlaying=!1,this.isComplete||(this.isComplete=!0,(e=this.onStop)==null||e.call(this,this))}update(e){var n,r;if(this.isComplete)return e;!this.isPlaying&&this.autoplay&&this.play(!0);const t=this.elapsed;if(this.elapsed+=e,this.delay>this.elapsed)return 0;const i=this.interpolate(this.isReverse?1-this.delta:this.delta);(n=this.onUpdate)==null||n.call(this,i,!1,this);const s=this.delay+this.duration;return this.elapsed>=s?(this.stop(),this.isComplete=!0,(r=this.onComplete)==null||r.call(this,this),e-(s-t)):0}get delta(){return this.ease(St(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(e,t){if(typeof t!="object"||qy(t))return this.interpolateValue(e,t);const i=[];for(const s of Object.keys(t)){const n=this.interpolateValue(e[s],t[s]);n!=null&&i.push([s,n])}return s=>{const n={};for(const[r,o]of i)n[r]=o(s);return n}}interpolateValue(e,t){if(!(e==null||t==null)){if(qy(e))return i=>e[GC](t,i);try{switch(typeof e){case"number":return n8(e,t);case"string":return EN(e,t);case"boolean":if(e===t)return()=>e;break}}catch{}throw new Error(`Unable to interpolate values: ${e}, ${t}`)}}},wn={added:"add",updated:"update",removed:"remove",unknown:"initial","no-op":"none"};function Oi(e,t,i,s,n,r,o){const{fromFn:a,toFn:l,applyFn:c=(C,x)=>C.setProperties(x)}=n,{nodes:p,selections:g}=KC(s),f=(C,x)=>{let M,b=0,R=0;for(const I of x){const P=C[b]===I,k={last:R>=x.length-1,lastLive:b>=C.length-1,prev:x[R-1],prevFromProps:M,prevLive:C[b-1],next:x[R+1],nextLive:C[b+(P?1:0)]},_=`${e}_${t}_${I.id}`;i.stopByAnimationId(_);let B="unknown";P?r&&o&&(B=m8(I,I.datum,r,o)):B="removed",I.transitionOut=B==="removed";const{phase:H,start:V,finish:U,delay:$,duration:te,...Ce}=a(I,I.datum,B,k),{phase:be,start:Re,finish:oe,delay:Se,duration:K,...pe}=l(I,I.datum,B,k),q=U==null;i.animate({id:_,groupId:e,phase:H??be??"update",duration:te??K,delay:$??Se,from:Ce,to:pe,ease:Lf,collapsable:q,onPlay:()=>{c(I,{...V,...Re,...Ce})},onUpdate(W){c(I,W)},onStop:()=>{c(I,{...V,...Re,...Ce,...pe,...U,...oe})}}),P&&b++,R++,M=Ce}};let y=0;for(const C of g){const x=C.nodes(),M=x.filter(b=>!C.isGarbage(b));f(M,x),i.animate({id:`${e}_${t}_selection_${y}`,groupId:e,phase:"end",from:0,to:1,ease:Lf,onStop(){C.cleanup()}}),y++}f(p,p)}function wa(e,t,i,s,n,r,o){const{nodes:a,selections:l}=KC(s),{start:c,finish:p,phase:g}=o;i.animate({id:`${e}_${t}`,groupId:e,phase:g??"update",from:n,to:r,ease:Lf,onPlay:()=>{if(c){for(const f of a)f.setProperties(c);for(const f of l)for(const y of f.nodes())y.setProperties(c)}},onUpdate(f){for(const y of a)y.setProperties(f);for(const y of l)for(const C of y.nodes())C.setProperties(f)},onStop:()=>{for(const f of a)f.setProperties({...r,...p});for(const f of l){for(const y of f.nodes())y.setProperties({...r,...p});f.cleanup()}}})}function m8(e,t,i,s){const n=i(e,t);return s.added.has(n)?"added":s.removed.has(n)?"removed":"updated"}var pM=new Map;function iC(e,t){pM.has(t)||(pM.set(t,!0),e())}iC.clear=()=>pM.clear();function gM(e){return e}function v8(e,t=0,i){const{leading:s=!1,trailing:n=!0,maxWait:r=1/0}=i??{};let o,a;if(r<t)throw new Error("Value of maxWait cannot be lower than waitMs.");function l(...c){if(s&&!a){a=Date.now(),o=setTimeout(()=>a=null,t),e(...c);return}let p=t;if(r!==1/0&&a){const g=Date.now()-a;t>r-g&&(p=r-g)}clearTimeout(o),a??(a=Date.now()),o=setTimeout(()=>{a=null,n&&e(...c)},p)}return Object.assign(l,{cancel(){clearTimeout(o),a=null}})}function fM(e,t,i){const{leading:s=!0,trailing:n=!0}=i??{};let r,o,a=!1;function l(){n&&o?(r=setTimeout(l,t),e(...o)):a=!1,o=null}function c(...p){a?o=p:(a=!0,r=setTimeout(l,t),s?e(...p):o=p)}return Object.assign(c,{cancel(){clearTimeout(r),a=!1,o=null}})}var _e={log(...e){console.log(...e)},warn(e,...t){console.warn(`AG Charts - ${e}`,...t)},error(e,...t){typeof e=="object"?console.error("AG Charts error",e,...t):console.error(`AG Charts - ${e}`,...t)},table(...e){console.table(...e)},warnOnce(e,...t){iC(()=>_e.warn(e,...t),`Logger.warn: ${e}`)},errorOnce(e,...t){iC(()=>_e.error(e,...t),`Logger.error: ${e}`)}},bs=(e,t)=>{const i=Symbol(String(t));e[i]=void 0,Object.defineProperty(e,t,{get(){return this[i]},set(s){this[i]!==s&&(this[i]=s,this.invalid=!0)},enumerable:!0,configurable:!1})},xa=class mM{constructor(t,i){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=mM.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClamp=!1,this.domain=t,this.range=i}static is(t){return t instanceof mM}transform(t){return t}transformInvert(t){return t}calcBandwidth(t=1){const i=this.getDomain(),s=this.getPixelRange(),n=Math.abs(i[1]-i[0])/t+1,r=Math.floor(s),o=Math.min(n,r);return s/Math.max(1,o)}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(t,i){if(!this.domain||this.domain.length<2)return NaN;this.refresh();const s=this.getDomain().map(c=>this.transform(c)),[n,r]=s,{range:o}=this,[a,l]=o;if(t=this.transform(t),i??this.defaultClamp){const[c,p]=Ks(s.map(Number));if(Number(t)<c)return a;if(Number(t)>p)return l}return n===r?(a+l)/2:t===n?a:t===r?l:a+(Number(t)-Number(n))/(Number(r)-Number(n))*(l-a)}invert(t,i){this.refresh();const s=this.getDomain().map(y=>this.transform(y)),[n,r]=s,{range:o}=this,[a,l]=o,c=a>l,p=c?l:a,g=c?a:l;if(i??this.defaultClamp){if(t<p)return c?r:n;if(t>g)return c?n:r}let f;return a===l?f=this.toDomain((Number(n)+Number(r))/2):f=this.toDomain(Number(n)+(t-a)/(l-a)*(Number(r)-Number(n))),this.transformInvert(f)}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&_e.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){const[t,i]=this.range;return Math.abs(i-t)}};xa.defaultTickCount=5;xa.defaultMaxTickCount=6;A([bs],xa.prototype,"domain",2);A([bs],xa.prototype,"range",2);A([bs],xa.prototype,"nice",2);A([bs],xa.prototype,"interval",2);A([bs],xa.prototype,"tickCount",2);A([bs],xa.prototype,"minTickCount",2);A([bs],xa.prototype,"maxTickCount",2);var hi=xa;function Rl(e){if(e.length===0)return null;let t=1/0,i=-1/0;for(let n of e)n instanceof Date&&(n=n.getTime()),typeof n=="number"&&(n<t&&(t=n),n>i&&(i=n));const s=[t,i];return s.every(isFinite)?s:null}function cR(e,t,i){let s=!1;return e.length>2&&(e=Rl(e)??[NaN,NaN]),isNaN(t)||(s||(s=t>e[0]),e=[t,e[1]]),isNaN(i)||(s||(s=i<e[1]),e=[e[0],i]),e[0]>e[1]&&(e=[]),{extent:e,clipped:s}}function zc(e,t){if(e==null||t==null||e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(Array.isArray(e[i])&&Array.isArray(t[i])){if(!zc(e[i],t[i]))return!1}else if(e[i]!==t[i])return!1;return!0}function Af(e){return typeof e>"u"?[]:Array.isArray(e)?e:[e]}function uR(e){return Array.from(new Set(e))}function YC(e,t){return e.reduce((i,s)=>{const n=t(s);return i[n]??(i[n]=[]),i[n].push(s),i},{})}function vM(e,t,i=0){if(e.length===0)return[];const s=[];for(let n=0;n<t;n++)s.push(e.at((n+i)%e.length));return s}function zN(e,t){const i=new Map;return t.forEach((s,n)=>{i.set(s,n)}),e.sort((s,n)=>{const r=i.get(s)??1/0,o=i.get(n)??1/0;return r-o})}function hR(e,t){return e.includes(t)}var Fc=1e3,Ls=Fc*60,vn=Ls*60,Yr=vn*24,ll=Yr*7,_g=Yr*30,hp=Yr*365,dp=class{constructor(e,t,i){this._encode=e,this._decode=t,this._rangeCallback=i}floor(e){const t=new Date(e),i=this._encode(t);return this._decode(i)}ceil(e){const t=new Date(Number(e)-1),i=this._encode(t);return this._decode(i+1)}range(e,t,i){var a;const s=(a=this._rangeCallback)==null?void 0:a.call(this,e,t),n=this._encode(i?this.floor(e):this.ceil(e)),r=this._encode(i?this.ceil(t):this.floor(t));if(r<n)return[];const o=[];for(let l=n;l<=r;l++){const c=this._decode(l);o.push(c)}return s==null||s(),o}},gr=class extends dp{getOffset(e,t){const i=typeof e=="number"||e instanceof Date?this._encode(new Date(e)):0;return Math.floor(i)%t}every(e,t){let i=0,s;const n=e;e=Math.max(1,Math.round(e)),n!==e&&_e.warnOnce(`interval step of [${n}] rounded to [${e}].`);const{snapTo:r="start"}=t??{};if(typeof r=="string"){const l=i;s=(c,p)=>{const g=r==="start"?c:p;return i=this.getOffset(g,e),()=>i=l}}else typeof r=="number"?i=this.getOffset(new Date(r),e):r instanceof Date&&(i=this.getOffset(r,e));const o=l=>{const c=this._encode(l);return Math.floor((c-i)/e)},a=l=>this._decode(l*e+i);return new dp(o,a,s)}};function y8(e){const t=e.getTimezoneOffset()*Ls;return Math.floor((e.getTime()-t)/Yr)}function C8(e){const t=new Date(1970,0,1);return t.setDate(t.getDate()+e),t}var sC=new gr(y8,C8),HN=new Date().getTimezoneOffset()*Ls;function S8(e){return Math.floor((e.getTime()-HN)/vn)}function w8(e){return new Date(HN+e*vn)}var Kd=new gr(S8,w8),VN=new Date().getTimezoneOffset()*Ls;function x8(e){return Math.floor((e.getTime()-VN)/Ls)}function b8(e){return new Date(VN+e*Ls)}var Yd=new gr(x8,b8);function M8(e){return e.getFullYear()*12+e.getMonth()}function R8(e){const t=Math.floor(e/12),i=e-t*12;return new Date(t,i,1)}var sh=new gr(M8,R8),WN=new Date().getTimezoneOffset()*Ls;function D8(e){return Math.floor((e.getTime()-WN)/Fc)}function E8(e){return new Date(WN+e*Fc)}var $d=new gr(D8,E8);function Ah(e){const i=(7+e-4)%7;function s(r){const o=r.getTimezoneOffset()*Ls;return Math.floor((r.getTime()-o)/ll-i/7)}function n(r){const o=new Date(1970,0,1);return o.setDate(o.getDate()+r*7+i),o}return new gr(s,n)}var of=Ah(0),I8=Ah(1),L8=Ah(2),T8=Ah(3),A8=Ah(4),P8=Ah(5),F8=Ah(6);function k8(e){return e.getFullYear()}function N8(e){const t=new Date;return t.setFullYear(e),t.setMonth(0,1),t.setHours(0,0,0,0),t}var $C=new gr(k8,N8),Xv={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function dR(e,t=new Date(e.getFullYear(),0,1)){const i=e.getTimezoneOffset()-t.getTimezoneOffset(),s=e.getTime()-t.getTime()+i*6e4,n=36e5*24;return Math.floor(s/n)}function AT(e,t){const s=new Date(e.getFullYear(),0,1).getDay(),n=(t-s+7)%7,r=new Date(e.getFullYear(),0,n+1);return r<=e?Math.floor(dR(e,r)/7)+1:0}var O8=0,jN=1,PT=4;function UN(e,t=e.getFullYear()){const s=new Date(t,0,1).getDay(),n=(PT-s+7)%7,r=new Date(t,0,n-(PT-jN)+1);return r<=e?Math.floor(dR(e,r)/7)+1:UN(e,t-1)}function _8(e){const t=e.getTimezoneOffset(),i=Math.abs(t);return`${t>0?"-":"+"}${Is(Math.floor(i/60),2,"0")}${Is(Math.floor(i%60),2,"0")}`}var B8={a:e=>Xv.shortDays[e.getDay()],A:e=>Xv.days[e.getDay()],b:e=>Xv.shortMonths[e.getMonth()],B:e=>Xv.months[e.getMonth()],c:"%x, %X",d:(e,t)=>Is(e.getDate(),2,t??"0"),e:"%_d",f:(e,t)=>Is(e.getMilliseconds()*1e3,6,t??"0"),H:(e,t)=>Is(e.getHours(),2,t??"0"),I:(e,t)=>{const i=e.getHours()%12;return i===0?"12":Is(i,2,t??"0")},j:(e,t)=>Is(dR(e)+1,3,t??"0"),m:(e,t)=>Is(e.getMonth()+1,2,t??"0"),M:(e,t)=>Is(e.getMinutes(),2,t??"0"),L:(e,t)=>Is(e.getMilliseconds(),3,t??"0"),p:e=>e.getHours()<12?"AM":"PM",Q:e=>String(e.getTime()),s:e=>String(Math.floor(e.getTime()/1e3)),S:(e,t)=>Is(e.getSeconds(),2,t??"0"),u:e=>{let t=e.getDay();return t<1&&(t+=7),String(t%7)},U:(e,t)=>Is(AT(e,O8),2,t??"0"),V:(e,t)=>Is(UN(e),2,t??"0"),w:(e,t)=>Is(e.getDay(),2,t??"0"),W:(e,t)=>Is(AT(e,jN),2,t??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(e,t)=>Is(e.getFullYear()%100,2,t??"0"),Y:(e,t)=>Is(e.getFullYear(),4,t??"0"),Z:e=>_8(e),"%":()=>"%"},G8={_:" ",0:"0","-":""};function Is(e,t,i){const s=String(Math.floor(e));return s.length>=t?s:`${i.repeat(t-s.length)}${s}`}function hm(e){const t=[];for(;e.length>0;){let i=e.indexOf("%");if(i!==0){const a=i>0?e.substring(0,i):e;t.push(a)}if(i<0)break;const s=e[i+1],n=G8[s];n!=null&&i++;const r=e[i+1],o=B8[r];if(typeof o=="function")t.push([o,n]);else if(typeof o=="string"){const a=hm(o);t.push([a,n])}else t.push(`${n??""}${r}`);e=e.substring(i+2)}return i=>{const s=typeof i=="number"?new Date(i):i;return t.map(n=>typeof n=="string"?n:n[0](s,n[1])).join("")}}function zn(e){return e instanceof Date?e.getTime():e}function pR(e,t,i){const s=KN(e,t,i),n=hm(s);return r=>n(r)}function KN(e=[],t=e,i=0){let s=1/0;for(let l=1;l<e.length;l++)s=Math.min(s,Math.abs(e[l]-e[l-1]));const n=new Date(t[0]).getFullYear(),o=new Date(t.at(-1)).getFullYear()-n>0,a=isFinite(s)?z8(s,e):H8(e[0]);return W8(Math.max(a-i,0),o,e)}function z8(e,t){return e<Fc?0:e<Ls?1:e<vn?2:e<Yr?3:e<ll?4:e<Yr*28||e<Yr*31&&V8(t)?5:e<hp?6:7}function H8(e){return $d.floor(e)<e?0:Yd.floor(e)<e?1:Kd.floor(e)<e?2:sC.floor(e)<e?3:sh.floor(e)<e?of.floor(e)<e?4:5:$C.floor(e)<e?6:7}function V8(e){let t=new Date(e[0]).getMonth();for(let i=1;i<e.length;i++){const s=new Date(e[i]).getMonth();if(t===s)return!0;t=s}return!1}function W8(e,t,i){const s=zn(i[0]),n=zn(i.at(-1)),r=Math.abs(n-s),o=t||e===7,a=r===0,c=[["hour",6*vn,14*Yr,3,"%I %p"],["hour",Ls,6*vn,3,"%I:%M"],["second",1e3,6*vn,1,":%S"],["ms",0,6*vn,0,".%L"],["am/pm",Ls,6*vn,3,"%p"]," ",["day",Yr,ll,4,"%a"],["month",a?0:ll,52*ll,5,"%b %d"],["month",5*ll,10*hp,6,"%B"]," ",["year",o?0:hp,1/0,7,"%Y"]].filter(f=>{if(typeof f=="string")return!0;const[y,C,x,M]=f;return M>=e&&C<=r&&r<x}).reduce((f,y)=>(typeof y=="string"?f.result.push(y):f.used.has(y[0])||(f.result.push(y),f.used.add(y[0])),f),{result:[],used:new Set}).result,p=c.findIndex(f=>typeof f!="string"),g=c.findLastIndex(f=>typeof f!="string");return c.slice(p,g+1).map(f=>typeof f=="string"?f:f[4]).join("").replaceAll(/\s+/g," ").trim()}var ZC=class YN{constructor(){this.type="band",this.invalid=!0,this.range=[0,1],this.round=!1,this.interval=void 0,this.index=new Map,this._domain=[],this._bandwidth=1,this._step=1,this._inset=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0}static is(t){return t instanceof YN}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&_e.warnOnce("Expected update to not invalidate scale"))}set domain(t){this.index=new Map,this.invalid=!0,this._domain=[];for(const i of t){const s=zn(i);this.getIndex(s)===void 0&&this.index.set(s,this._domain.push(i)-1)}}get domain(){return this._domain}getDomain(){return this._domain}ticks(){return this.refresh(),this._domain}convert(t){this.refresh();const i=this.getIndex(t);return i==null||i<0||i>=this.domain.length?NaN:this.ordinalRange(i)}invertNearestIndex(t){this.refresh();const{domain:i}=this;if(i.length===0)return-1;let s=0,n=i.length-1,r=1/0,o=0;for(;s<=n;){const a=(n+s)/2|0,l=this.ordinalRange(a),c=Math.abs(l-t);if(c===0)return a;c<r&&(r=c,o=a),l<t?s=a+1:n=a-1}return o}invert(t){this.refresh();const i=this.invertNearestIndex(t),s=this.ordinalRange(i);return t===s?this.domain[i]:void 0}invertNearest(t){const i=this.invertNearestIndex(t);return this.domain[i]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get inset(){return this.refresh(),this._inset}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(t){t=St(0,t,1),this._paddingInner=t,this._paddingOuter=t}get padding(){return this._paddingInner}set paddingInner(t){this._paddingInner=St(0,t,1)}get paddingInner(){return this._paddingInner}set paddingOuter(t){this._paddingOuter=St(0,t,1)}get paddingOuter(){return this._paddingOuter}update(){const t=this._domain.length;if(t===0)return;const[i,s]=this.range;let{_paddingInner:n}=this;const{_paddingOuter:r,round:o}=this,a=s-i;let l;t===1?(n=0,l=a*(1-r*2)):l=a/Math.max(1,t-n+r*2);const c=o?Math.floor(l):l;let p=i+(a-c*(t-n))/2,g=c*(1-n);o&&(p=Math.round(p),g=Math.round(g)),this._step=c,this._inset=p,this._bandwidth=g,this._rawBandwidth=l*(1-n)}ordinalRange(t){const{_inset:i,_step:s,range:n}=this,r=Math.min(n[0],n[1]),o=Math.max(n[0],n[1]);return St(r,i+s*t,o)}getIndex(t){return this.index.get(t instanceof Date?t.getTime():t)}};A([bs],ZC.prototype,"range",2);A([bs],ZC.prototype,"round",2);A([bs],ZC.prototype,"interval",2);var iu=ZC,yt=class{set(e){const{className:t=this.constructor.name}=this.constructor;if(typeof e!="object")return _e.warn(`unable to set ${t} - expecting a properties object`),this;const i=new Set(Object.keys(e));for(const s of gh(this))if(i.has(s)){const n=e[s],r=this;if(da(r[s]))if(r[s]instanceof dm){const o=r[s].reset(n);o!=null?r[s]=o:_e.warn(`unable to set [${s}] - expecting a properties array`)}else r[s].set(n);else r[s]=n;i.delete(s)}for(const s of i)_e.warn(`unable to set [${s}] in ${t} - property is unknown`);return this}isValid(e){return gh(this).every(t=>{const{optional:i}=r8(this,t),s=i===!0||typeof this[t]<"u";return s||_e.warnOnce(`${e??""}[${t}] is required.`),s})}toJson(){return gh(this).reduce((e,t)=>{const i=this[t];return e[t]=da(i)?i.toJson():i,e},{})}},dm=class $N extends Array{constructor(t,...i){super(i.length);const n=(r=>{var o,a;return!!((a=(o=r==null?void 0:r.prototype)==null?void 0:o.constructor)!=null&&a.name)})(t)?r=>new t().set(r):t;Object.defineProperty(this,"itemFactory",{value:n,enumerable:!1,configurable:!1}),this.set(i)}set(t){if(bi(t)){this.length=t.length;for(let i=0;i<t.length;i++)this[i]=this.itemFactory(t[i])}return this}reset(t){if(Array.isArray(t))return new $N(this.itemFactory,...t)}toJson(){return this.map(t=>{var i;return((i=t==null?void 0:t.toJson)==null?void 0:i.call(t))??t})}};function da(e){return e instanceof yt||e instanceof dm}function O(e,t={}){const{optional:i=!1,property:s}=t;return wl((n,r,o)=>{const a={...t,target:n,property:r};if(i&&typeof o>"u"||e(o,a))return da(n[r])&&!da(o)?(n[r].set(o),n[r]):o;const l=s??String(r).replace(/^_*/,""),c=n.constructor.className??n.constructor.name.replace(/Properties$/,"");let p=af(o);const g=50;if(p!=null&&p.length>g){const f=p.length-g;p=p.slice(0,g)+`... (+${f} characters)`}return _e.warn(`Property [${l}] of [${c}] cannot be set to [${p}]${e.message?`; expecting ${mm(e,a)}`:""}, ignoring.`),Jy},void 0,{optional:i})}var ba=(...e)=>{const t=[];return Jt((i,s)=>(t.length=0,e.every(n=>{const r=n(i,s);return r||t.push(mm(n,s)),r})),()=>t.filter(Boolean).join(" AND "))},Ph=(...e)=>Jt((t,i)=>e.some(s=>s(t,i)),t=>e.map(J8(t)).filter(Boolean).join(" OR ")),Ye=sO(Jt((e,t)=>da(e)||xn(e)&&da(t.target[t.property]),"a properties object")),ZN=sO(Jt(e=>xn(e),"an object")),nt=Jt(nR,"a boolean"),Mn=Jt(tu,"a function"),Fe=Jt(Vn,"a string"),_t=tX(Jt(Kt,"a number")),XN=Jt(e=>Eo(e)&&!isNaN(e),"a real number"),XC=Jt(e=>Eo(e)&&isNaN(e),"NaN"),Ge=_t.restrict({min:0}),$t=_t.restrict({min:0,max:1}),bp=Ph(_t,XC),pm=eX(Jt(bi,"an array")),Dl=(e,t)=>Jt((i,s)=>bi(i)&&i.every(n=>e(n,s)),i=>{const s=mm(pm,i)??"";return typeof t=="function"?`${s} of ${t(i)}`:t?`${s} of ${t}`:s}),nC=e=>Kt(e)||UC(e),gm=e=>Jt((t,i)=>!nC(t)||!nC(i.target[e])||t<i.target[e],`to be less than ${e}`),fm=e=>Jt((t,i)=>!nC(t)||!nC(i.target[e])||t>i.target[e],`to be greater than ${e}`),gR=Jt(UC,"Date object"),fR=Ph(gR,Ge),QN="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",Zt=Jt(e=>Vn(e)&&Mo.validColorString(e),`color String. ${QN}`),qr=Jt(Dl(Zt),`color strings. ${QN}`),j8=Dl(nt,"boolean values"),QC=Dl(_t,"numbers"),qN=Dl(Fe,"strings"),U8=Jt(Dl(gR),"Date objects"),mR=Jt(Dl(Ye),"objects"),K8=pi(["butt","round","square"],"a line cap"),Y8=pi(["round","bevel","miter"],"a line join"),$8=pi(["solid","dashed","dotted"],"a line style"),El=Jt(Dl(Ge),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),vR=pi(["top","right","bottom","left"],"a position"),Il=pi(["normal","italic","oblique"],"a font style"),Ll=Ph(pi(["normal","bold","bolder","lighter"],"a font weight"),_t.restrict({min:1,max:1e3})),qC=pi(["never","always","hyphenate","on-space"],"a text wrap strategy"),JN=pi(["left","center","right"],"a text align"),Z8=pi(["top","middle","bottom"],"a vertical align"),X8=pi(["ellipsis","hide"],"an overflow strategy"),eO=pi(["horizontal","vertical"],"a direction"),Q8=pi(["inside","outside"],"a placement"),JC=Ph(pi(["exact","nearest"],"interaction range"),_t),yR=pi(["top","bottom","left","right"]);function pi(e,t="a"){return Jt((i,s)=>{const n=e.find(r=>{const o=typeof r=="string"?r:r.value;return i===o});if(n==null)return!1;if(typeof n!="string"&&(n.deprecated===!0||n.deprecatedTo!=null)){const r=[`Property [%s] with value '${n.value}' is deprecated.`];n.deprecatedTo&&r.push(`Use ${n.deprecatedTo} instead.`),_e.warnOnce(r.join(" "),s.property)}return!0},`${t} keyword such as ${q8(e)}`)}var tO=Ph(ba(_t.restrict({min:1}),gm("maxSpacing")),XC),iO=Ph(ba(_t.restrict({min:1}),fm("minSpacing")),XC);function Jt(e,t){return e.message=t,e}function q8(e){const t=e.filter(s=>typeof s=="string"||s.undocumented!==!0).map(s=>`'${typeof s=="string"?s:s.value}'`);if(t.length===1)return t[0];const i=t.pop();return`${t.join(", ")} or ${i}`}function mm(e,t){return tu(e.message)?e.message(t):e.message}function J8(e){return t=>mm(t,e)}function eX(e){return Object.assign(e,{restrict({length:t,minLength:i}={}){let s="an array";return Eo(i)&&i>0?s="a non-empty array":Eo(t)&&(s=`an array of length ${t}`),Jt(n=>bi(n)&&(Eo(t)?n.length===t:!0)&&(Eo(i)?n.length>=i:!0),s)}})}function tX(e){return Object.assign(e,{restrict({min:t,max:i}={}){const s=["a number"],n=Eo(t),r=Eo(i);return n&&r?s.push(`between ${t} and ${i} inclusive`):n?s.push(`greater than or equal to ${t}`):r&&s.push(`less than or equal to ${i}`),Jt(o=>Kt(o)&&(n?o>=t:!0)&&(r?o<=i:!0),s.join(" "))}})}function sO(e){return Object.assign(e,{restrict(t){return Jt(i=>i instanceof t,i=>mm(e,i)??`an instance of ${t.name}`)}})}function af(e){if(typeof e=="number"){if(isNaN(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity"}return JSON.stringify(e)}var CR=(e=>(e.X="x",e.Y="y",e))(CR||{}),SR=class{constructor(){this.moduleMap=new Map}*modules(){for(const e of this.moduleMap.values())yield e.moduleInstance}addModule(e,t){if(this.moduleMap.has(e.optionsKey))throw new Error(`AG Charts - module already initialised: ${e.optionsKey}`);this.moduleMap.set(e.optionsKey,{module:e,moduleInstance:t(e)})}removeModule(e){var i;const t=Vn(e)?e:e.optionsKey;(i=this.moduleMap.get(t))==null||i.moduleInstance.destroy(),this.moduleMap.delete(t)}getModule(e){var t;return(t=this.moduleMap.get(Vn(e)?e:e.optionsKey))==null?void 0:t.moduleInstance}isEnabled(e){return this.moduleMap.has(Vn(e)?e:e.optionsKey)}mapModules(e){return Array.from(this.moduleMap.values(),(t,i)=>e(t.moduleInstance,i))}destroy(){var e;for(const t of this.moduleMap.keys())(e=this.moduleMap.get(t))==null||e.moduleInstance.destroy();this.moduleMap.clear()}},nO={};ko(nO,{resetMotion:()=>ss});function ss(e,t){const{nodes:i,selections:s}=KC(e);for(const n of s){for(const r of n.nodes()){const o=t(r,r.datum);r.setProperties(o)}n.cleanup()}for(const n of i){const r=t(n,n.datum);n.setProperties(r)}}function rO(e){let t,i;const s=sX.exec(e);s&&([,t,e,i]=s);const n=iX.exec(e);if(!n)throw new Error(`The number formatter is invalid: ${e}`);const[,r,o,a,l,c,p,g,f,y,C]=n;return{fill:r,align:o,sign:a,symbol:l,zero:c,width:parseInt(p),comma:g,precision:parseInt(f),trim:!!y,type:C,prefix:t,suffix:i}}function oO(e){const t=typeof e=="string"?rO(e):e,{fill:i,align:s,sign:n="-",symbol:r,zero:o,width:a,comma:l,type:c,prefix:p="",suffix:g="",precision:f}=t;let{trim:y}=t;const C=f==null||isNaN(f);let x;if(!c)x=zr.g,y=!0;else if(c in zr&&c in Zd)x=C?Zd[c]:zr[c];else if(c in zr)x=zr[c];else if(c in Zd)x=Zd[c];else throw new Error(`The number formatter type is invalid: ${c}`);let M;return f==null||C?M=c?6:12:M=f,b=>{let R=x(b,M);return y&&(R=oX(R)),l&&(R=aX(R,l)),R=cX(b,R,n),r&&r!=="#"&&(R=`${r}${R}`),r==="#"&&c==="x"&&(R=`0x${R}`),c==="s"&&(R=`${R}${lX(b)}`),(c==="%"||c==="p")&&(R=`${R}%`),a!=null&&!isNaN(a)&&(R=uX(R,a,i??o,s)),R=`${p}${R}${g}`,R}}var iX=/^(?:(.)?([<>=^]))?([+\-( ])?([$€£¥₣₹#])?(0)?(\d+)?(,)?(?:\.(\d+))?(~)?([%a-z])?$/i,sX=/^((?:[^#]|#[^{])*)#{([^}]+)}(.*)$/,Zd={b:e=>Qv(e).toString(2),c:e=>String.fromCharCode(e),d:e=>Math.round(Math.abs(e)).toFixed(0),o:e=>Qv(e).toString(8),x:e=>Qv(e).toString(16),X:e=>Zd.x(e).toUpperCase(),n:e=>Zd.d(e),"%":e=>`${Qv(e*100).toFixed(0)}`},zr={e:(e,t)=>Math.abs(e).toExponential(t),E:(e,t)=>zr.e(e,t).toUpperCase(),f:(e,t)=>Math.abs(e).toFixed(t),F:(e,t)=>zr.f(e,t).toUpperCase(),g:(e,t)=>{if(e===0)return"0";const i=Math.abs(e),s=Math.floor(Math.log10(i));return s>=-4&&s<t?i.toFixed(t-1-s):i.toExponential(t-1)},G:(e,t)=>zr.g(e,t).toUpperCase(),n:(e,t)=>zr.g(e,t),p:(e,t)=>zr.r(e*100,t),r:(e,t)=>{if(e===0)return"0";const i=Math.abs(e),n=Math.floor(Math.log10(i))-(t-1);if(n<=0)return i.toFixed(-n);const r=10**n;return(Math.round(i/r)*r).toFixed()},s:(e,t)=>{const i=cO(e);return zr.r(e/10**i,t)},"%":(e,t)=>zr.f(e*100,t)},aO=-24,lO=24,nX={[aO]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"µ",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[lO]:"Y"},rX="−";function Qv(e){return Math.floor(Math.abs(e))}function oX(e){return e.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}function aX(e,t){let i=e.indexOf(".");i<0&&(i=e.length);const s=e.substring(0,i).split(""),n=e.substring(i);for(let r=s.length-3;r>0;r-=3)s.splice(r,0,t);return`${s.join("")}${n}`}function lX(e){return nX[cO(e)]}function cO(e){return St(aO,e?Math.floor(Math.log10(Math.abs(e))/3)*3:0,lO)}function cX(e,t,i=""){if(i==="(")return e>=0?t:`(${t})`;const s=i==="+"?"+":"";return`${e>=0?s:rX}${t}`}function uX(e,t,i=" ",s=">"){let n=e;if(s===">"||!s)n=n.padStart(t,i);else if(s==="<")n=n.padEnd(t,i);else if(s==="^"){const r=Math.max(0,t-n.length),o=Math.ceil(r/2),a=Math.floor(r/2);n=n.padStart(o+n.length,i),n=n.padEnd(a+n.length,i)}return n}function hX(e){return e.getTime()}function dX(e){return new Date(e)}var uO=new gr(hX,dX),Fi=(e,t,i)=>({duration:t*i,timeInterval:e,step:i}),$g=[Fi($d,Fc,1),Fi($d,Fc,5),Fi($d,Fc,15),Fi($d,Fc,30),Fi(Yd,Ls,1),Fi(Yd,Ls,5),Fi(Yd,Ls,15),Fi(Yd,Ls,30),Fi(Kd,vn,1),Fi(Kd,vn,3),Fi(Kd,vn,6),Fi(Kd,vn,12),Fi(sC,Yr,1),Fi(sC,Yr,2),Fi(of,ll,1),Fi(of,ll,2),Fi(of,ll,3),Fi(sh,_g,1),Fi(sh,_g,2),Fi(sh,_g,3),Fi(sh,_g,4),Fi(sh,_g,6),Fi($C,hp,1)],hO=[1,2,5,10];function FT(e,t){return Math.abs(Math.round(e)-e)<t}function wR(e,t,i,s,n){if(i<2)return[e,t];const r=Pf(e,t,i,s,n);return Number.isFinite(r)?(FT(e/r,1e-12)||(e=Math.ceil(e/r)*r),FT(t/r,1e-12)||(t=Math.floor(t/r)*r),eS(e,t,r)):[]}function kT(e,t,i,s,n,r){const o=Math.abs(t-e)/Math.max(i,1);let a=0;for(const f of $g){if(o<=f.duration)break;a++}if(a===0){const f=Math.max(Pf(e,t,i,s,n),1);return uO.every(f)}else if(a===$g.length){const f=Pf(e/hp,t/hp,i,s,n);return $C.every(f)}const l=$g[a-1],c=$g[a],{timeInterval:p,step:g}=o-l.duration<c.duration-o?l:c;return p.every(g)}function Pf(e,t,i,s=0,n=1/0){if(e===t)return St(1,s,n);if(i<1)return NaN;const r=Math.abs(t-e),o=10**Math.floor(Math.log10(r/i));let a=NaN,l=1/0,c=!1;for(const p of hO){const g=Math.ceil(r/(p*o)),f=g>=s&&g<=n;if(c&&!f)continue;const y=Math.abs(g-i);(l>y||c!==f)&&(c||(c=f),l=y,a=p)}return a*o}function NT(e){for(let t=e.length-1;t>=0;t-=1)if(e[t]!=="0")return t+1;return 0}function pX(e,t){const i=rO(t??",f");(i.precision==null||isNaN(i.precision))&&(!i.type||"eEFgGnprs".includes(i.type)?i.precision=Math.max(...e.map(n=>{if(!Number.isFinite(n))return 0;const[r,o]=n.toExponential((i.type?6:12)-1).split(/[.e]/g);return(r!=="1"&&r!=="-1"?1:0)+NT(o)+1})):"f%".includes(i.type)&&(i.precision=Math.max(...e.map(n=>{if(!Number.isFinite(n)||n===0)return 0;const r=Math.floor(Math.log10(Math.abs(n))),o=i.type?6:12,a=n.toExponential(o-1).split(/[.e]/g)[1],l=NT(a);return Math.max(0,l-r)}))));const s=oO(i);return n=>s(Number(n))}function eS(e,t,i){if(!Number.isFinite(i)||i<=0)return[];const s=10**VC(i),n=Math.min(e,t),r=Math.max(e,t),o=[];for(let a=0;;a+=1){const l=Math.round((n+i*a)*s)/s;if(l>r)break;o.push(l)}return o}function Ff(e,t){return e>=t?(_e.warnOnce("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0):!1}function gX(e,t){const i=Math.abs(t-e),s=10**Math.floor(Math.log10(i));let n=1/0,r=[e,t];for(const o of hO){const a=o*s,l=Math.floor(e/a)*a,c=Math.ceil(t/a)*a,p=1-i/Math.abs(c-l);n>p&&(n=p,r=[l,c])}return r}function dO(e,t,i,s,n){n=Math.max(n,e/(s+1)),isNaN(t)&&(t=n),isNaN(i)&&(i=e),t>i&&(t===n?t=i:i=t);const r=Math.max(1,Math.floor(e/t)),o=Math.min(r,Math.ceil(e/i)),a=St(o,s,r);return{minTickCount:o,maxTickCount:r,tickCount:a}}var pO=class yM extends hi{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=gM,this.basePow=gM,this.log=t=>Math.min(...this.domain)>=0?this.baseLog(t):-this.baseLog(-t),this.pow=t=>Math.min(...this.domain)>=0?this.basePow(t):-this.basePow(-t),this.defaultClamp=!0}toDomain(t){return t}transform(t){return Math.min(...this.domain)>=0?Math.log(t):-Math.log(-t)}transformInvert(t){return Math.min(...this.domain)>=0?Math.exp(t):-Math.exp(-t)}refresh(){this.base<=0&&(this.base=0,_e.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.baseLog=yM.getBaseLogMethod(this.base),this.basePow=yM.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){const[t,i]=this.domain,s=t>i?Math.ceil:Math.floor,n=t>i?Math.floor:Math.ceil,r=this.pow(s(this.log(t))),o=this.pow(n(this.log(i)));this.niceDomain=[r,o]}ticks(){const t=this.tickCount??10;if(!this.domain||this.domain.length<2||t<1)return[];this.refresh();const i=this.base,[s,n]=this.getDomain(),r=Math.min(s,n),o=Math.max(s,n);let a=this.log(r),l=this.log(o);if(this.interval){const y=M=>M>=r&&M<=o,C=Math.min(Math.abs(this.interval),Math.abs(l-a)),x=eS(a,l,C).map(this.pow).filter(y);if(!Ff(x.length,this.getPixelRange()))return x}if(!bN(i)||l-a>=t)return wR(a,l,Math.min(l-a,t)).map(this.pow);const c=[],p=r>0;a=Math.floor(a)-1,l=Math.round(l)+1;const g=Ef(this.range)/t;let f=1/0;for(let y=a;y<=l;y++){const C=this.convert(this.pow(y+1));for(let x=1;x<i;x++){const M=p?x:i-x+1,b=this.pow(y)*M,R=this.convert(b),I=Math.abs(f-R),P=Math.abs(R-C),k=I>=g&&P>=g;b>=r&&b<=o&&(x===1||k||c.length===0)&&(c.push(b),f=R)}}return c}tickFormat({specifier:t}){return t??(t=this.base===10?".0e":","),Vn(t)?oO(t):t}static getBaseLogMethod(t){switch(t){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:return i=>Math.log(i)/Math.log(t)}}static getBasePowerMethod(t){switch(t){case 10:return i=>i>=0?10**i:1/10**-i;case Math.E:return Math.exp;default:return i=>t**i}}};A([bs],pO.prototype,"base",2);var xR=pO;function gO(e,t,i){if(e>t)return;let s;for(;t>=e;){const n=Math.floor((t+e)/2);i(n)?(s=n,e=n+1):t=n-1}return s}function fO(e,t,i){if(e>t)return;let s;for(;t>=e;){const n=Math.floor((t+e)/2);i(n)?(s=n,t=n-1):e=n+1}return s}function fX(e,t,i){if(e>t)return;let s;for(;t>=e;){const n=Math.floor((t+e)/2),r=i(n);r==null?t=n-1:(s=r,e=n+1)}return s}function mO(e,t,i){if(e>t)return;let s;for(;t>=e;){const n=Math.floor((t+e)/2),r=i(n);r==null?e=n+1:(s=r,t=n-1)}return s}function vO(e,t){return e.valueOf()-t.valueOf()}function mX(e){let t=NaN;const i=[];for(const s of e){const n=s.valueOf();t!==n&&i.push(s),t=n}return i}function yO(e){const t=e.slice().sort(vO);return bR(e)==null?mX(t):t}function bR(e){if(e.length===0)return 1;const t=Number(e[e.length-1])>Number(e[0])?1:-1;let i=-1/0*t;for(const s of e){const n=s.valueOf();if(Math.sign(n-i)!==t)return;i=n}return t}var MR=class Cy extends hi{constructor(){super([],[0,1]),this.type="time"}toDomain(t){return new Date(t)}convert(t,i){return t instanceof Date||(t=new Date(t)),super.convert(t,i)}invert(t){return new Date(super.invert(t))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const{interval:t,nice:i,tickCount:s,minTickCount:n,maxTickCount:r}=this,[o,a]=Ks(this.getDomain().map(zn));return t!=null?Cy.getTicksForInterval({start:o,stop:a,interval:t,availableRange:this.getPixelRange()})??Cy.getDefaultTicks({start:o,stop:a,tickCount:s,minTickCount:n,maxTickCount:r}):i&&s===2?this.niceDomain:i&&s===1?this.niceDomain.slice(0,1):Cy.getDefaultTicks({start:o,stop:a,tickCount:s,minTickCount:n,maxTickCount:r})}static getDefaultTicks({start:t,stop:i,tickCount:s,minTickCount:n,maxTickCount:r}){const o=kT(t,i,s,n,r);return o?o.range(new Date(t),new Date(i)):[]}static getTicksForInterval({start:t,stop:i,interval:s,availableRange:n}){if(!s)return[];if(s instanceof dp){const p=s.range(new Date(t),new Date(i));return Ff(p.length,n)?void 0:p}const r=Math.abs(s);if(Ff((i-t)/r,n))return;const o=$g.findLast(p=>r%p.duration===0);if(o)return o.timeInterval.every(r/(o.duration/o.step)).range(new Date(t),new Date(i));let a=new Date(t);const l=new Date(i),c=[];for(;a<=l;)c.push(a),a=new Date(a),a.setMilliseconds(a.getMilliseconds()+r);return c}tickFormat({ticks:t,domain:i,specifier:s,formatOffset:n}){return s==null?pR(t,i,n):hm(s)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[i,s]=this.domain;for(let n=0;n<4;n++){this.updateNiceDomainIteration(i,s);const[r,o]=this.niceDomain;if(zn(i)===zn(r)&&zn(s)===zn(o))break;i=r,s=o}}updateNiceDomainIteration(t,i){const s=Math.min(zn(t),zn(i)),n=Math.max(zn(t),zn(i)),r=t>i,{interval:o}=this;let a;if(o instanceof dp)a=o;else{const l=typeof o=="number"?(n-s)/Math.max(o,1):this.tickCount;a=kT(s,n,l,this.minTickCount,this.maxTickCount)}if(a){const l=a.range(new Date(s),new Date(n),!0),c=r?[...l].reverse():l,p=c[0],g=c.at(-1);this.niceDomain=[p,g]}}},vm=class CO extends iu{constructor(){super(...arguments),this.type="ordinal-time",this.tickCount=hi.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.interval=void 0,this._domain=[],this.sortedTimestamps=[],this.visibleRange=[0,1],this.isReversed=!1,this._values=void 0}static is(t){return t instanceof CO}setVisibleRange(t){this.visibleRange=t}set domain(t){if(t===this._values)return;this.invalid=!0;const i=bR(t),s=i==null?yO(t):t,n=i===-1,r=s.map(zn);n&&r.reverse(),this._values=t,this._domain=s,this.isReversed=n,this.sortedTimestamps=r,this.precomputedSteps=void 0;const o=t.length<1e4?r.length:Math.ceil(r.length/16);if(o<=1)return;this.refresh();const a=new Int32Array(o),l=r[0].valueOf(),p=r[r.length-1].valueOf()-l;for(let g=0;g<a.length;g+=1)a[g]=this.findInterval(l+g/o*p);this.precomputedSteps=a}get domain(){return this._domain}ticks(){if(!this._domain.length)return[];this.refresh();const{domain:t,isReversed:i,interval:s}=this,[n,r]=[t[0].valueOf(),t.at(-1).valueOf()],o=Math.min(n,r),a=Math.max(n,r);if(s==null)return this.getDefaultTicks(this.maxTickCount,i);const[l,c]=this.range,p=Math.abs(c-l),g=MR.getTicksForInterval({start:o,stop:a,interval:s,availableRange:p})??[];let f=-1;return g.filter(y=>{const C=this.findInterval(y.valueOf()),x=C===f;return f=C,!x})}getDefaultTicks(t,i){const{domain:s,visibleRange:n}=this,r=[],o=Math.ceil(s.length*(n[1]-n[0])/t),a=Math.floor(o/2);for(let l=0;l<s.length;l+=1){const c=s[l],p=i?s.length-1-l:l;(o<=0||(p+a)%o===0)&&r.push(c)}return i&&r.reverse(),r}convert(t){this.refresh();const i=Number(t);if(i<this.sortedTimestamps[0])return NaN;let s=this.findInterval(i);return this.isReversed&&(s=this.domain.length-s-1),this.ordinalRange(s)}findInterval(t){const{sortedTimestamps:i,precomputedSteps:s}=this;let n,r;if(s==null)n=0,r=i.length-1;else{const o=i[0].valueOf(),a=i[i.length-1].valueOf(),l=Math.min((t-o)/(a-o)*s.length|0,s.length-1|0);n=s[l],r=l<s.length-2?s[l+1]:i.length-1}for(;n<=r;){const o=(n+r)/2|0;if(i[o]===t)return o;i[o]<t?n=o+1:r=o-1}return n}tickFormat({ticks:t,domain:i,specifier:s}){return s==null?pR(t,i):hm(s)}invert(t){this.refresh();const{domain:i}=this;return mO(0,i.length-1,n=>this.ordinalRange(n)>=t?i[n]:void 0)??i[0]}invertNearest(t){return super.invertNearest(t)}};A([bs],vm.prototype,"tickCount",2);A([bs],vm.prototype,"minTickCount",2);A([bs],vm.prototype,"maxTickCount",2);A([bs],vm.prototype,"interval",2);var xo=vm;function vX(e,t){return typeof e=="number"&&typeof t=="number"?e-t:typeof e=="string"&&typeof t=="string"?e.localeCompare(t):e==null&&t==null?0:e==null?-1:t==null?1:String(e).localeCompare(String(t))}var SO=[1,0,0,1,0,0];function kd(e,t,i=1e-8){return e===t||Math.abs(t-e)<i}var CM=class Vd{get e(){return[...this.elements]}constructor(t=[...SO]){this.elements=t}setElements(t){const i=this.elements;return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],this}get identity(){const t=this.elements;return kd(t[0],1)&&kd(t[1],0)&&kd(t[2],0)&&kd(t[3],1)&&kd(t[4],0)&&kd(t[5],0)}AxB(t,i,s){const n=t[0]*i[0]+t[2]*i[1],r=t[1]*i[0]+t[3]*i[1],o=t[0]*i[2]+t[2]*i[3],a=t[1]*i[2]+t[3]*i[3],l=t[0]*i[4]+t[2]*i[5]+t[4],c=t[1]*i[4]+t[3]*i[5]+t[5];s=s??t,s[0]=n,s[1]=r,s[2]=o,s[3]=a,s[4]=l,s[5]=c}multiplySelf(t){return this.AxB(this.elements,t.elements),this}multiply(t){const i=new Array(6);return t instanceof Vd?this.AxB(this.elements,t.elements,i):this.AxB(this.elements,[t.a,t.b,t.c,t.d,t.e,t.f],i),new Vd(i)}preMultiplySelf(t){return this.AxB(t.elements,this.elements,this.elements),this}inverse(){const t=this.elements;let i=t[0],s=t[1],n=t[2],r=t[3];const o=t[4],a=t[5],l=1/(i*r-s*n);return i*=l,s*=l,n*=l,r*=l,new Vd([r,-s,-n,i,n*a-r*o,s*o-i*a])}inverseTo(t){const i=this.elements;let s=i[0],n=i[1],r=i[2],o=i[3];const a=i[4],l=i[5],c=1/(s*o-n*r);return s*=c,n*=c,r*=c,o*=c,t.setElements([o,-n,-r,s,r*l-o*a,n*a-s*l]),this}invertSelf(){const t=this.elements;let i=t[0],s=t[1],n=t[2],r=t[3];const o=t[4],a=t[5],l=1/(i*r-s*n);return i*=l,s*=l,n*=l,r*=l,t[0]=r,t[1]=-s,t[2]=-n,t[3]=i,t[4]=n*a-r*o,t[5]=s*o-i*a,this}transformPoint(t,i){const s=this.elements;return{x:t*s[0]+i*s[2]+s[4],y:t*s[1]+i*s[3]+s[5]}}transformBBox(t,i){const s=this.elements,n=s[0],r=s[1],o=s[2],a=s[3],l=t.width*.5,c=t.height*.5,p=t.x+l,g=t.y+c,f=Math.abs(l*n)+Math.abs(c*o),y=Math.abs(l*r)+Math.abs(c*a);return i??(i=new Ue(0,0,0,0)),i.x=p*n+g*o+s[4]-f,i.y=p*r+g*a+s[5]-y,i.width=f+f,i.height=y+y,i}toContext(t){if(this.identity)return;const i=this.elements;t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}static flyweight(t){return Vd.instance.setElements(t.elements)}static updateTransformMatrix(t,i,s,n,r,o,a){const l=i,c=s;let p,g;l===1&&c===1?(p=0,g=0):(p=(a==null?void 0:a.scalingCenterX)??0,g=(a==null?void 0:a.scalingCenterY)??0);const f=n,y=Math.cos(f),C=Math.sin(f);let x,M;f===0?(x=0,M=0):(x=(a==null?void 0:a.rotationCenterX)??0,M=(a==null?void 0:a.rotationCenterY)??0);const b=r,R=o,I=p*(1-l)-x,P=g*(1-c)-M;return t.setElements([y*l,C*l,-C*c,y*c,y*I-C*P+x+b,C*I+y*P+M+R]),t}static fromContext(t){const i=t.getTransform();return new Vd([i.a,i.b,i.c,i.d,i.e,i.f])}};CM.instance=new CM;var Io=CM;function Mc(e){return xO(e.constructor)}var wO=Symbol("isMatrixTransform");function xO(e){return e[wO]===!0}function RR(e){var t,i;const s=e;if(xO(e))return e;const n=Symbol("matrix_combined_transform");class r extends s{constructor(){super(...arguments),this[i]=new Io,this._dirtyTransform=!0}markDirtyTransform(){this._dirtyTransform=!0,super.markDirty()}updateMatrix(a){}computeTransformMatrix(){this._dirtyTransform&&(this[n].setElements(SO),this.updateMatrix(this[n]),this._dirtyTransform=!1)}toParent(a){return this.computeTransformMatrix(),this[n].identity?a.clone():this[n].transformBBox(a)}toParentPoint(a,l){return this.computeTransformMatrix(),this[n].identity?{x:a,y:l}:this[n].transformPoint(a,l)}fromParent(a){return this.computeTransformMatrix(),this[n].identity?a.clone():this[n].inverse().transformBBox(a)}fromParentPoint(a,l){return this.computeTransformMatrix(),this[n].identity?{x:a,y:l}:this[n].inverse().transformPoint(a,l)}computeBBox(){const a=super.computeBBox();return a&&this.toParent(a)}computeBBoxWithoutTransforms(){return super.computeBBox()}pickNode(a,l,c=!1){return c||({x:a,y:l}=this.fromParentPoint(a,l)),super.pickNode(a,l)}render(a){this.computeTransformMatrix();const{ctx:l}=a,c=this[n];let p=!1;c.identity||(l.save(),p=!0,c.toContext(l)),super.render(a),p&&l.restore()}toSVG(){this.computeTransformMatrix();const a=super.toSVG(),l=this[n];if(l.identity||a==null)return a;const c=document.createElementNS("http://www.w3.org/2000/svg","g");c.append(...a.elements);const[p,g,f,y,C,x]=l.e;return c.setAttribute("transform",`matrix(${p} ${g} ${f} ${y} ${C} ${x})`),{elements:[c],defs:a.defs}}}return t=wO,i=n,r[t]=!0,r}function Fh(e){var t;const i=e,s=Symbol("matrix_rotation");class n extends RR(i){constructor(){super(...arguments),this[t]=new Io,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0}updateMatrix(o){super.updateMatrix(o);const{rotation:a,rotationCenterX:l,rotationCenterY:c}=this;a!==0&&(Io.updateTransformMatrix(this[s],1,1,a,0,0,{rotationCenterX:l,rotationCenterY:c}),o.multiplySelf(this[s]))}}return t=s,A([Ze({type:"transform"})],n.prototype,"rotationCenterX",2),A([Ze({type:"transform"})],n.prototype,"rotationCenterY",2),A([Ze({type:"transform"})],n.prototype,"rotation",2),n}function DR(e){var t;const i=e,s=Symbol("matrix_scale");class n extends RR(i){constructor(){super(...arguments),this[t]=new Io,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null}updateMatrix(o){super.updateMatrix(o);const{scalingX:a,scalingY:l,scalingCenterX:c,scalingCenterY:p}=this;a===1&&l===1||(Io.updateTransformMatrix(this[s],a,l,0,0,0,{scalingCenterX:c,scalingCenterY:p}),o.multiplySelf(this[s]))}}return t=s,A([Ze({type:"transform"})],n.prototype,"scalingX",2),A([Ze({type:"transform"})],n.prototype,"scalingY",2),A([Ze({type:"transform"})],n.prototype,"scalingCenterX",2),A([Ze({type:"transform"})],n.prototype,"scalingCenterY",2),n}function kh(e){var t;const i=e,s=Symbol("matrix_translation");class n extends RR(i){constructor(){super(...arguments),this[t]=new Io,this.translationX=0,this.translationY=0}updateMatrix(o){super.updateMatrix(o);const{translationX:a,translationY:l}=this;a===0&&l===0||(Io.updateTransformMatrix(this[s],1,1,0,a,l),o.multiplySelf(this[s]))}}return t=s,A([Ze({type:"transform"})],n.prototype,"translationX",2),A([Ze({type:"transform"})],n.prototype,"translationY",2),n}var ji=class{static fromCanvas(e,t){const i=[];for(const s of e.traverseUp())Mc(s)&&i.unshift(s);for(const s of i)t=s.fromParent(t);return Mc(e)&&(t=e.fromParent(t)),t}static toCanvas(e,t){t==null?t=e.getBBox():Mc(e)&&(t=e.toParent(t));for(const i of e.traverseUp())Mc(i)&&(t=i.toParent(t));return t}static fromCanvasPoint(e,t,i){const s=[];for(const n of e.traverseUp())Mc(n)&&s.unshift(n);for(const n of s)({x:t,y:i}=n.fromParentPoint(t,i));return Mc(e)&&({x:t,y:i}=e.fromParentPoint(t,i)),{x:t,y:i}}static toCanvasPoint(e,t,i){Mc(e)&&({x:t,y:i}=e.toParentPoint(t,i));for(const s of e.traverseUp())Mc(s)&&({x:t,y:i}=s.toParentPoint(t,i));return{x:t,y:i}}},nb=(e,t)=>Math.sign(e-t);function bO(e,t){if(typeof e=="number"&&typeof t=="number")return nb(e,t);const i=typeof e=="number"?[e]:e,s=typeof t=="number"?[t]:t,n=Math.min(i.length,s.length);for(let r=0;r<n;r+=1){const o=nb(i[r],s[r]);if(o!==0)return o}return nb(i.length,s.length)}var ER=class Sy extends Xc{constructor(t){super(t),this.opacity=1,this.layer=void 0,this.renderToOffscreenCanvas=!1,this.isContainerNode=!0,this.renderToOffscreenCanvas=(t==null?void 0:t.renderToOffscreenCanvas)===!0}static is(t){return t instanceof Sy}static computeChildrenBBox(t,i=!0){return Ue.merge(Xc.extractBBoxes(t,i))}static compareChildren(t,i){return bO(t.zIndex,i.zIndex)||vX(t.serialNumber,i.serialNumber)}containsPoint(t,i){return!0}computeBBox(){return Sy.computeChildrenBBox(this.children())}isDirty(t){const{resized:i}=t,{dirty:s,dirtyZIndex:n}=this;if(s||n||i)return!0;for(const r of this.children())if(r.dirty)return!0;return!1}preRender(){var i,s;const t=super.preRender(0);return t.groups+=1,t.nonGroups-=1,this.renderToOffscreenCanvas&&t.nonGroups>0&&this.getVisibility()?this.layer??(this.layer=(i=this._layerManager)==null?void 0:i.addLayer({name:this.name})):this.layer!=null&&((s=this._layerManager)==null||s.removeLayer(this.layer),this.layer=void 0),t}render(t){var o;const{layer:i}=this,s={...t};if(i==null){this.renderInContext(s),super.render(s);return}const{ctx:n,stats:r}=t;if(this.isDirty(t)){const a=n.getTransform(),{globalAlpha:l}=n,c=i.context;s.ctx=c,i.clear(),c.save(),c.setTransform(a),c.globalAlpha=l,this.renderInContext(s),c.restore(),(o=c.verifyDepthZero)==null||o.call(c),r&&r.layersRendered++}else this.skipRender(s),r&&r.layersSkipped++;n.save(),n.resetTransform(),i.drawImage(n),n.restore(),super.render(s)}skipRender(t){const{stats:i}=t;for(const s of this.children())s.markClean(),i&&(i.nodesSkipped+=this.childNodeCounts.groups+this.childNodeCounts.nonGroups,i.opsSkipped+=this.childNodeCounts.complexity)}applyClip(t,i){const{x:s,y:n,width:r,height:o}=i;t.beginPath(),t.rect(s,n,r,o),t.clip()}renderInContext(t){const{ctx:i,stats:s}=t;this.dirtyZIndex&&this.sortChildren(Sy.compareChildren),i.save(),i.globalAlpha*=this.opacity,this.clipRect!=null&&(this.applyClip(i,this.clipRect),t.clipBBox=ji.toCanvas(this,this.clipRect));for(const n of this.children()){if(!n.visible){n.markClean(),s&&(s.nodesSkipped+=n.childNodeCounts.nonGroups+n.childNodeCounts.groups,s.opsSkipped+=n.childNodeCounts.complexity);continue}i.save(),n.render(t),i.restore()}i.restore()}setClipRect(t){this.clipRect=t?ji.fromCanvas(this,t):void 0}setClipRectCanvasSpace(t){this.clipRect=t}_setLayerManager(t){var i;this.layer&&((i=this._layerManager)==null||i.removeLayer(this.layer),this.layer=void 0),super._setLayerManager(t)}getVisibility(){for(const t of this.traverseUp(!0))if(!t.visible)return!1;return!0}toSVG(){if(!this.visible)return;const t=[],i=[];for(const s of this.children()){const n=s.toSVG();n!=null&&(i.push(...n.elements),n.defs!=null&&t.push(...n.defs))}return{elements:i,defs:t}}};ER.className="Group";A([Ze({convertor:e=>St(0,e,1)})],ER.prototype,"opacity",2);var lt=ER,yX=class extends DR(lt){},CX=class extends Fh(lt){},yn=class extends kh(lt){},Bg=class extends Fh(kh(lt)){},pa={};typeof window<"u"?pa.window=window:typeof global<"u"&&(pa.window=global.window);typeof document<"u"?pa.document=document:typeof global<"u"&&(pa.document=global.document);function fs(e){var t;return e?(t=pa.document)==null?void 0:t[e]:pa.document}function Mi(e){var t;return e?(t=pa.window)==null?void 0:t[e]:pa.window}function Xt(e,t,i){const s=fs().createElement(e);if(typeof t=="object"&&(i=t,t=void 0),t)for(const n of t.split(" "))s.classList.add(n);return i&&Object.assign(s.style,i),s}function SM(e,t){return fs().createElementNS(e,t)}function MO(e,t){const{body:i}=fs(),s=Xt("a",{display:"none"});s.href=e,s.download=t,i.appendChild(s),s.click(),setTimeout(()=>i.removeChild(s))}function RO(e){pa.document=e}function DO(e){pa.window=e}function kf(e,t){e&&(t=BC.normalize(t),t.width==null?e.style.removeProperty("width"):e.style.width=`${t.width}px`,t.height==null?e.style.removeProperty("height"):e.style.height=`${t.height}px`,t.x==null?e.style.removeProperty("left"):e.style.left=`${t.x}px`,t.y==null?e.style.removeProperty("top"):e.style.top=`${t.y}px`)}function EO(e){const t=parseFloat(e.style.width)||e.offsetWidth,i=parseFloat(e.style.height)||e.offsetHeight,s=parseFloat(e.style.left)||e.offsetLeft,n=parseFloat(e.style.top)||e.offsetTop;return{x:s,y:n,width:t,height:i}}function SX(e){var s;if(e.focus({preventScroll:!0}),((s=e.lastChild)==null?void 0:s.textContent)==null)return;const t=fs().createRange();t.setStart(e.lastChild,e.lastChild.textContent.length),t.setEnd(e.lastChild,e.lastChild.textContent.length);const i=Mi().getSelection();i==null||i.removeAllRanges(),i==null||i.addRange(t)}var wX=0;function xX(e){return`${e??"ag-charts-element"}-${wX++}`}function IO(){const e=Mi().navigator;if("scheduling"in e){const t=e.scheduling;if("isInputPending"in t)return t.isInputPending({includeContinuous:!0})}return!1}function tS(e){return`ag-charts-icon ag-charts-icon-${e}`}var bX=2e3,OT=Date.now(),MX=()=>{const e=Date.now()-OT;if(e>bX){const t=(Math.floor(e/100)/10).toFixed(1);_e.log(`**** ${t}s since last log message ****`)}OT=Date.now()},ci={create(...e){return Object.assign((...i)=>{ci.check(...e)&&(typeof i[0]=="function"&&(i=Af(i[0]())),MX(),_e.log(...i))},{check:()=>ci.check(...e)})},check(...e){return e.length===0&&e.push(!0),Af(Mi("agChartsDebug")).some(i=>e.includes(i))}},Ji=class Xu{constructor(t,i,s=!0){this.parentNode=t,this.autoCleanup=s,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=ci.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(Xc,i)?()=>new i:i}static select(t,i,s=!0){return new Xu(t,i,s)}static selectAll(t,i){const s=[],n=r=>{i(r)&&s.push(r);for(const o of r.children())n(o)};return n(t),s}static selectByClass(t,...i){return Xu.selectAll(t,s=>i.some(n=>s instanceof n))}static selectByTag(t,i){return Xu.selectAll(t,s=>s.tag===i)}createNode(t,i,s){const n=this.nodeFactory(t);return n.datum=t,i==null||i(n),s==null?this._nodes.push(n):this._nodes.splice(s,0,n),this.parentNode.appendChild(n),n}update(t,i,s){if(this.garbageBin.size>0&&this.debug("Selection - update() called with pending garbage",t),s){const n=new Map(t.map((r,o)=>[s(r),[r,o]]));for(const[r,o]of this._nodesMap.entries())if(n.has(o)){const[a]=n.get(o);r.datum=a,this.garbageBin.delete(r),n.delete(o)}else this.garbageBin.add(r);for(const[r,[o,a]]of n.entries())this._nodesMap.set(this.createNode(o,i,a),r)}else{const n=Math.max(t.length,this.data.length);for(let r=0;r<n;r++)r>=t.length?this.garbageBin.add(this._nodes[r]):r>=this._nodes.length?this.createNode(t[r],i):(this._nodes[r].datum=t[r],this.garbageBin.delete(this._nodes[r]))}return this.data=t.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return this.garbageBin.size===0?this:(this._nodes=this._nodes.filter(t=>this.garbageBin.has(t)?(this._nodesMap.delete(t),this.garbageBin.delete(t),t.destroy(),!1):!0),this)}clear(){return this.update([]),this}isGarbage(t){return this.garbageBin.has(t)}hasGarbage(){return this.garbageBin.size>0}each(t){for(const i of this._nodes.entries())t(i[1],i[1].datum,i[0]);return this}*[Symbol.iterator](){for(let t=0;t<this._nodes.length;t++){const i=this._nodes[t];yield{node:i,datum:i.datum,index:t}}}select(t){return Xu.selectAll(this.parentNode,t)}selectByClass(t){return Xu.selectByClass(this.parentNode,t)}selectByTag(t){return Xu.selectByTag(this.parentNode,t)}nodes(){return this._nodes}at(t){return this._nodes.at(t)}get length(){return this._nodes.length}},js=Math.PI*2,Gg=Math.PI/2;function Qt(e){return e%=js,e+=js,e%=js,e}function LO(e){return e%=js,e+=js,e!==js&&(e%=js),e}function Nf(e){return e%=js,e<-Math.PI?e+=js:e>=Math.PI&&(e-=js),e}function Vr(e,t,i){const s=Qt(e),n=Qt(t),r=Qt(i);return n<r?n<=s&&s<=r:n>r?n<=s||s<=r:!0}function Ys(e){return e/180*Math.PI}function RX(e){return e/Math.PI*180}function DX(e,t,i){i&&([e,t]=[t,e]);const s=Qt(e);return(Qt(t)+js-s)%js}function ym(e,t){return e=Qt(e),t=Qt(t),t-e+(e>t?js:0)}function EX(e,t,i,s){const n=e+i*Math.cos(s),r=t+i*Math.sin(s);return{x:n,y:r}}var IX=1e-6;function TO(e,t){return ym(e,t)<IX?t:Qt(e-t)+t}function LX(e,t,i=0){const n=Math.abs(t-e)>=js?js:Qt(t-e);return e=TO(e,i),t=e+n,{startAngle:e,endAngle:t}}function AO(e){const t=Qt(e);return t<=Gg?t/Gg:t<=Math.PI?(Math.PI-t)/Gg:t<=1.5*Math.PI?(t-Math.PI)/Gg:(js-t)/Gg}function lf(e,t,i,s){const n=e-i,r=t-s;return n*n+r*r}function cf(e,t,i,s,n,r,o){if(i===n&&s===r)return Math.min(o,lf(e,t,i,s));const a=n-i,l=r-s,c=Math.max(0,Math.min(1,((e-i)*a+(t-s)*l)/(a*a+l*l))),p=i+c*a,g=s+c*l;return Math.min(o,lf(e,t,p,g))}function TX(e,t,i,s,n,r,o,a,l){a&&([o,r]=[r,o]);const c=Math.atan2(t-s,e-i);if(!Vr(c,r,o)){const g=i+Math.cos(r)*n,f=s+Math.sin(r)*n,y=i+Math.cos(r)*n,C=s+Math.sin(r)*n;return Math.min(l,lf(e,t,g,f),lf(e,t,y,C))}const p=n-Math.sqrt(lf(e,t,i,s));return Math.min(l,p*p)}var _T=e=>{const t=Mo.fromString(e),[i,s,n]=Mo.RGBtoOKLCH(t.r,t.g,t.b);return{l:i,c:s,h:n,a:t.a}},rb=1e-6,BT=e=>e.c<rb||e.l<rb||e.l>1-rb,AX=(e,t,i)=>{i=St(0,i,1);let s;if(BT(e))s=t.h;else if(BT(t))s=e.h;else{const a=e.h;let l=t.h;const c=t.h-e.h;c>180?l-=360:c<-180&&(l+=360),s=a*(1-i)+l*i}const n=e.c*(1-i)+t.c*i,r=e.l*(1-i)+t.l*i,o=e.a*(1-i)+t.a*i;return Mo.fromOKLCH(r,n,s,o)},Nh=class{constructor(){this.type="color",this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(_T)}update(){const{domain:e,range:t}=this;e.length<2&&(_e.warnOnce("`colorDomain` should have at least 2 values."),e.length===0?e.push(0,1):e.length===1&&e.push(e[0]+1));for(let i=1;i<e.length;i++){const s=e[i-1],n=e[i];if(s>=n){_e.warnOnce("`colorDomain` values should be supplied in ascending order."),e.sort((r,o)=>r-o);break}}if(t.length<e.length)for(let i=t.length;i<e.length;i++)t.push(t.length>0?t[0]:"black");this.parsedRange=this.range.map(_T)}convert(e){this.refresh();const{domain:t,range:i,parsedRange:s}=this,n=t[0],r=t.at(-1),o=i[0],a=i[i.length-1];if(e<=n)return o;if(e>=r)return a;let l,c;if(t.length===2){const f=(e-n)/(r-n),y=1/(i.length-1);l=i.length<=2?0:Math.min(Math.floor(f*(i.length-1)),i.length-2),c=(f-l*y)/y}else{for(l=0;l<t.length-2&&!(e<t[l+1]);l++);const f=t[l],y=t[l+1];c=(e-f)/(y-f)}const p=s[l],g=s[l+1];return AX(p,g,c).toRgbaString()}refresh(){this.invalid&&(this.invalid=!1,this.update(),this.invalid&&_e.warnOnce("Expected update to not invalidate scale"))}};A([bs],Nh.prototype,"domain",2);A([bs],Nh.prototype,"range",2);var iS=class{constructor(e,t=[],i){this.colorSpace=e,this.stops=t,this.bbox=i,this._cache=void 0}createGradient(e,t){const i=this.bbox??t;if(this._cache!=null&&this._cache.ctx===e&&this._cache.bbox.equals(i))return this._cache.gradient;const{stops:s,colorSpace:n}=this;if(s.length===0)return;if(s.length===1)return s[0].color;let r=this.createCanvasGradient(e,i);if(r==null)return;const o=n==="oklch",a=.05;let l=s[0];r.addColorStop(l.offset,l.color);for(let c=1;c<s.length;c+=1){const p=s[c];if(o){const g=new Nh;g.domain=[l.offset,p.offset],g.range=[l.color,p.color];for(let f=l.offset+a;f<p.offset;f+=a)r.addColorStop(f,g.convert(f))}r.addColorStop(p.offset,p.color),l=p}return"createPattern"in r&&(r=r.createPattern()),this._cache={ctx:e,bbox:i,gradient:r},r}},PO=class extends iS{constructor(e,t,i=0,s){super(e,t,s),this.angle=i}createCanvasGradient(e,t){const{angle:s}=this,n=Qt(Ys(s+90)),r=Math.cos(n),o=Math.sin(n),a=t.width,l=t.height,c=t.x+a*.5,p=t.y+l*.5,g=Math.sqrt(l*l+a*a)/2,f=Math.atan2(l,a);let y;n<Math.PI/2?y=n:n<Math.PI?y=Math.PI-n:n<1.5*Math.PI?y=n-Math.PI:y=2*Math.PI-n;const C=g*Math.abs(Math.cos(y-f));return e.createLinearGradient(c+r*C,p+o*C,c-r*C,p-o*C)}},PX=/^linear-gradient\((-?[\d.]+)deg,(.*?)\)$/i,jn=class ta extends Xc{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=ta.defaultStyles.fill,this.stroke=ta.defaultStyles.stroke,this.strokeWidth=ta.defaultStyles.strokeWidth,this.lineDash=ta.defaultStyles.lineDash,this.lineDashOffset=ta.defaultStyles.lineDashOffset,this.lineCap=ta.defaultStyles.lineCap,this.lineJoin=ta.defaultStyles.lineJoin,this.miterLimit=void 0,this.opacity=ta.defaultStyles.opacity,this.fillShadow=ta.defaultStyles.fillShadow}restoreOwnStyles(){const{defaultStyles:t}=this.constructor;Object.assign(this,t)}getGradient(t){let i;if(t instanceof iS)return t;if(t!=null&&t.startsWith("linear-gradient")&&(i=PX.exec(t))){const s=parseFloat(i[1]),n=[],r=i[2],o=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let a;for(;a=o.exec(r);)n.push(a[0]);return new PO("rgb",n.map((l,c)=>({color:l,offset:c/(n.length-1)})),s)}else return}onFillChange(){this.fillGradient=this.getGradient(this.fill)}onStrokeChange(){this.strokeGradient=this.getGradient(this.stroke)}align(t,i){var r,o;const s=((o=(r=this.layerManager)==null?void 0:r.canvas)==null?void 0:o.pixelRatio)??1,n=Math.round(t*s)/s;return i==null?n:i===0?0:i<1?Math.ceil(i*s)/s:Math.round((i+t)*s)/s-n}fillStroke(t,i){this.renderFill(t,i),this.renderStroke(t,i)}renderFill(t,i){if(this.fill){const{globalAlpha:s}=t;this.applyFill(t),this.applyFillAlpha(t),this.applyShadow(t),this.executeFill(t,i),t.globalAlpha=s}t.shadowColor="rgba(0, 0, 0, 0)"}executeFill(t,i){i?t.fill(i):t.fill()}applyFill(t){var i;t.fillStyle=((i=this.fillGradient)==null?void 0:i.createGradient(t,this.getBBox()))??(typeof this.fill=="string"?this.fill:void 0)??"black"}applyStroke(t){var i;t.strokeStyle=((i=this.strokeGradient)==null?void 0:i.createGradient(t,this.getBBox()))??(typeof this.stroke=="string"?this.stroke:void 0)??"black"}applyFillAlpha(t){t.globalAlpha*=this.opacity*this.fillOpacity}applyShadow(t){var n;const i=((n=this.layerManager)==null?void 0:n.canvas.pixelRatio)??1,s=this.fillShadow;s!=null&&s.enabled&&(t.shadowColor=s.color,t.shadowOffsetX=s.xOffset*i,t.shadowOffsetY=s.yOffset*i,t.shadowBlur=s.blur*i)}renderStroke(t,i){if(this.stroke&&this.strokeWidth){const{globalAlpha:s}=t;this.applyStroke(t),t.globalAlpha*=this.opacity*this.strokeOpacity,t.lineWidth=this.strokeWidth,this.lineDash&&t.setLineDash(this.lineDash),this.lineDashOffset&&(t.lineDashOffset=this.lineDashOffset),this.lineCap&&(t.lineCap=this.lineCap),this.lineJoin&&(t.lineJoin=this.lineJoin),this.miterLimit!=null&&(t.miterLimit=this.miterLimit),this.executeStroke(t,i),t.globalAlpha=s}}executeStroke(t,i){i?t.stroke(i):t.stroke()}containsPoint(t,i){return this.isPointInPath(t,i)}applySvgFillAttributes(t){t.setAttribute("fill",typeof this.fill=="string"?this.fill:"none"),t.setAttribute("fill-opacity",String(this.fillOpacity))}applySvgStrokeAttributes(t){this.stroke!=null&&(t.setAttribute("stroke",typeof this.stroke=="string"?this.stroke:"none"),t.setAttribute("stroke-opacity",String(this.strokeOpacity)),t.setAttribute("stroke-width",String(this.strokeWidth))),this.lineDash!=null&&t.setAttribute("stroke-dasharray",this.lineDash.join(" "))}};jn.defaultStyles={fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0};A([Ze()],jn.prototype,"fillOpacity",2);A([Ze()],jn.prototype,"strokeOpacity",2);A([Ze({changeCb:e=>e.onFillChange()})],jn.prototype,"fill",2);A([Ze({changeCb:e=>e.onStrokeChange()})],jn.prototype,"stroke",2);A([Ze()],jn.prototype,"strokeWidth",2);A([Ze()],jn.prototype,"lineDash",2);A([Ze()],jn.prototype,"lineDashOffset",2);A([Ze()],jn.prototype,"lineCap",2);A([Ze()],jn.prototype,"lineJoin",2);A([Ze()],jn.prototype,"miterLimit",2);A([Ze({convertor:e=>St(0,e,1)})],jn.prototype,"opacity",2);A([Ze({checkDirtyOnAssignment:!0})],jn.prototype,"fillShadow",2);var Zr=jn,fr=class extends Zr{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(e){this.x1=e,this.x2=e}set y(e){this.y1=e,this.y2=e}get midPoint(){return{x:(this.x1+this.x2)/2,y:(this.y1+this.y2)/2}}computeBBox(){return new Ue(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(e,t){return this.x1===this.x2||this.y1===this.y2?this.getBBox().clone().grow(this.strokeWidth/2).containsPoint(e,t):!1}distanceSquared(e,t){const{x1:i,y1:s,x2:n,y2:r}=this;return cf(e,t,i,s,n,r,1/0)}render(e){var a;const{ctx:t,devicePixelRatio:i}=e;let{x1:s,y1:n,x2:r,y2:o}=this;if(s===r){const{strokeWidth:l}=this,c=Math.round(s*i)/i+Math.trunc(l*i)%2/(i*2);s=c,r=c}else if(n===o){const{strokeWidth:l}=this,c=Math.round(n*i)/i+Math.trunc(l*i)%2/(i*2);n=c,o=c}t.beginPath(),t.moveTo(s,n),t.lineTo(r,o),this.fillStroke(t),(a=this.fillShadow)==null||a.markClean(),super.render(e)}toSVG(){if(!this.visible)return;const e=document.createElementNS("http://www.w3.org/2000/svg","line");return e.setAttribute("x1",String(this.x1)),e.setAttribute("y1",String(this.y1)),e.setAttribute("x2",String(this.x2)),e.setAttribute("y2",String(this.y2)),this.applySvgStrokeAttributes(e),{elements:[e]}}};fr.className="Line";fr.defaultStyles={...Zr.defaultStyles,fill:void 0,strokeWidth:1};A([Ze()],fr.prototype,"x1",2);A([Ze()],fr.prototype,"y1",2);A([Ze()],fr.prototype,"x2",2);A([Ze()],fr.prototype,"y2",2);function FX(e=0,t=0){return new OffscreenCanvas(e,t).getContext("2d")}var IR=class{constructor(e=5){this.maxCacheSize=e,this.store=new Map}get(e){if(!this.store.has(e))return;const t=this.store.get(e);return this.store.delete(e),this.store.set(e,t),t}has(e){return this.store.has(e)}set(e,t){if(this.store.set(e,t),this.store.size>this.maxCacheSize){const i=this.store.keys();let s=this.store.size-this.maxCacheSize;for(;s>0;){const n=i.next();n.done||this.store.delete(n.value),s--}}return t}clear(){this.store.clear()}},Tl=class{static measureText(e,t){return this.getMeasurer(t).measureText(e)}static measureLines(e,t){return this.getMeasurer(t).measureLines(e)}static getMeasurer(e){const t=typeof e.font=="string"?e.font:Ei.toFontString(e.font),i=`${t}-${e.textAlign??"start"}-${e.textBaseline??"alphabetic"}`;return this.instanceMap.get(i)??this.createFontMeasurer(t,e,i)}static createFontMeasurer(e,t,i){const s=FX();s.font=e,s.textAlign=t.textAlign??"start",s.textBaseline=t.textBaseline??"alphabetic";const n=new FO(s,t);return this.instanceMap.set(i,n),n}};Tl.instanceMap=new IR(10);var FO=class{constructor(e,t){this.ctx=e,this.measureMap=new IR(100),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline),e.font=typeof t.font=="string"?t.font:Ei.toFontString(t.font),this.textMeasurer=new LR(i=>this.cachedCtxMeasureText(i),t.textBaseline??"alphabetic")}textWidth(e,t){return this.textMeasurer.textWidth(e,t)}measureText(e){return this.textMeasurer.measureText(e)}measureLines(e){return this.textMeasurer.measureLines(e)}cachedCtxMeasureText(e){if(!this.measureMap.has(e)){const t=this.ctx.measureText(e);this.measureMap.set(e,{actualBoundingBoxAscent:t.actualBoundingBoxAscent,emHeightAscent:t.emHeightAscent,emHeightDescent:t.emHeightDescent,actualBoundingBoxDescent:t.actualBoundingBoxDescent,actualBoundingBoxLeft:t.actualBoundingBoxLeft,actualBoundingBoxRight:t.actualBoundingBoxRight,alphabeticBaseline:t.alphabeticBaseline,fontBoundingBoxAscent:t.fontBoundingBoxAscent,fontBoundingBoxDescent:t.fontBoundingBoxDescent,hangingBaseline:t.hangingBaseline,ideographicBaseline:t.ideographicBaseline,width:t.width})}return this.measureMap.get(e)}},Ei=class{static toFontString({fontSize:e=10,fontStyle:t,fontWeight:i,fontFamily:s,lineHeight:n}){let r="";return t&&(r+=`${t} `),i&&(r+=`${i} `),r+=`${e}px`,n&&(r+=`/${n}px`),r+=` ${s}`,r.trim()}static getLineHeight(e){return Math.ceil(e*this.defaultLineHeight)}static getVerticalModifier(e){switch(e){case"hanging":case"top":return 0;case"middle":return .5;case"alphabetic":case"bottom":case"ideographic":default:return 1}}};Ei.EllipsisChar="…";Ei.defaultLineHeight=1.15;Ei.lineSplitter=/\r?\n/g;var LR=class{constructor(e,t="alphabetic"){this.measureTextFn=e,this.textBaseline=t,this.charMap=new Map}getMetrics(e){const t=this.measureTextFn(e);return t.fontBoundingBoxAscent??(t.fontBoundingBoxAscent=t.emHeightAscent),t.fontBoundingBoxDescent??(t.fontBoundingBoxDescent=t.emHeightDescent),{width:t.width,height:t.actualBoundingBoxAscent+t.actualBoundingBoxDescent,lineHeight:t.fontBoundingBoxAscent+t.fontBoundingBoxDescent,offsetTop:t.actualBoundingBoxAscent,offsetLeft:t.actualBoundingBoxLeft}}getMultilineMetrics(e){let t=0,i=0,s=0,n=0,r=0;const o=Ei.getVerticalModifier(this.textBaseline),a=[];let l=0;const c=e.length;for(const p of e){const g=this.measureTextFn(p);g.fontBoundingBoxAscent??(g.fontBoundingBoxAscent=g.emHeightAscent),g.fontBoundingBoxDescent??(g.fontBoundingBoxDescent=g.emHeightDescent),t<g.width&&(t=g.width),n<g.actualBoundingBoxLeft&&(n=g.actualBoundingBoxLeft),l===0?(i+=g.actualBoundingBoxAscent,s+=g.actualBoundingBoxAscent):r+=g.fontBoundingBoxAscent,l===c-1?i+=g.actualBoundingBoxDescent:r+=g.fontBoundingBoxDescent,a.push({text:p,width:g.width,height:g.actualBoundingBoxAscent+g.actualBoundingBoxDescent,lineHeight:g.fontBoundingBoxAscent+g.fontBoundingBoxDescent,offsetTop:g.actualBoundingBoxAscent,offsetLeft:g.actualBoundingBoxLeft}),l++}return i+=r,s+=r*o,{width:t,height:i,offsetTop:s,offsetLeft:n,lineMetrics:a}}textWidth(e,t){if(t){let i=0;for(let s=0;s<e.length;s++)i+=this.textWidth(e.charAt(s));return i}return e.length>1?this.measureTextFn(e).width:this.charMap.get(e)??this.charWidth(e)}measureText(e){return this.getMetrics(e)}measureLines(e){const t=typeof e=="string"?e.split(Ei.lineSplitter):e;return this.getMultilineMetrics(t)}charWidth(e){const{width:t}=this.measureTextFn(e);return this.charMap.set(e,t),t}},mr=class wy extends Zr{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=wy.defaultStyles.textAlign,this.textBaseline=wy.defaultStyles.textBaseline}onTextChange(){var t;this.lines=((t=this.text)==null?void 0:t.split(`
`).map(i=>i.trim()))??[]}static computeBBox(t,i,s,n){const{offsetTop:r,offsetLeft:o,width:a,height:l}=Tl.measureLines(t,n);return new Ue(i-o,s-r,a,l)}computeBBox(){const{x:t,y:i,lines:s,textBaseline:n,textAlign:r}=this;return wy.computeBBox(s,t,i,{font:this,textBaseline:n,textAlign:r})}isPointInPath(t,i){const s=this.getBBox();return s?s.containsPoint(t,i):!1}render(t){const{ctx:i,stats:s}=t;if(!this.lines.length||!this.layerManager)return s&&(s.nodesSkipped+=1),super.render(t);const{fill:n,stroke:r,strokeWidth:o}=this,{pixelRatio:a}=this.layerManager.canvas;if(i.font=Ei.toFontString(this),i.textAlign=this.textAlign,i.textBaseline=this.textBaseline,n){this.applyFill(i),i.globalAlpha*=this.opacity*this.fillOpacity;const{fillShadow:l}=this;l!=null&&l.enabled&&(i.shadowColor=l.color,i.shadowOffsetX=l.xOffset*a,i.shadowOffsetY=l.yOffset*a,i.shadowBlur=l.blur*a),this.renderLines((c,p,g)=>i.fillText(c,p,g))}if(r&&o){this.applyStroke(i),i.lineWidth=o,i.globalAlpha*=this.opacity*this.strokeOpacity;const{lineDash:l,lineDashOffset:c,lineCap:p,lineJoin:g}=this;l&&i.setLineDash(l),c&&(i.lineDashOffset=c),p&&(i.lineCap=p),g&&(i.lineJoin=g),this.renderLines((f,y,C)=>i.strokeText(f,y,C))}super.render(t)}renderLines(t){const{lines:i,x:s,y:n}=this,r=this.lineHeight??Ei.getLineHeight(this.fontSize);let o=(r-r*i.length)*Ei.getVerticalModifier(this.textBaseline);for(const a of i)t(a,s,n+o),o+=r}setFont(t){this.fontFamily=t.fontFamily,this.fontSize=t.fontSize,this.fontStyle=t.fontStyle,this.fontWeight=t.fontWeight}setAlign(t){this.textAlign=t.textAlign,this.textBaseline=t.textBaseline}toSVG(){var i;if(!this.visible||!this.text)return;const t=document.createElementNS("http://www.w3.org/2000/svg","text");return this.applySvgFillAttributes(t),t.setAttribute("font-family",((i=this.fontFamily)==null?void 0:i.split(",")[0])??""),t.setAttribute("font-size",String(this.fontSize)),t.setAttribute("font-style",this.fontStyle??""),t.setAttribute("font-weight",String(this.fontWeight??"")),t.setAttribute("text-anchor",{center:"middle",left:"start",right:"end",start:"start",end:"end"}[this.textAlign??"start"]),t.setAttribute("alignment-baseline",{alphabetic:"alphabetic",top:"top",bottom:"bottom",hanging:"hanging",middle:"middle",ideographic:"ideographic"}[this.textBaseline??"alphabetic"]),t.setAttribute("x",String(this.x)),t.setAttribute("y",String(this.y)),t.textContent=this.text??"",{elements:[t]}}};mr.className="Text";mr.defaultStyles={...Zr.defaultStyles,textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"};A([Ze()],mr.prototype,"x",2);A([Ze()],mr.prototype,"y",2);A([Ze({changeCb:e=>e.onTextChange()})],mr.prototype,"text",2);A([Ze()],mr.prototype,"fontStyle",2);A([Ze()],mr.prototype,"fontWeight",2);A([Ze()],mr.prototype,"fontSize",2);A([Ze()],mr.prototype,"fontFamily",2);A([Ze()],mr.prototype,"textAlign",2);A([Ze()],mr.prototype,"textBaseline",2);A([Ze()],mr.prototype,"lineHeight",2);var gs=mr,kO=class extends Fh(gs){},pp=class extends Fh(kh(gs)){};function kX(e,t,i,s,n,r){if(e.size===0)return!1;let o=e.x,a=e.y;t!=null&&(o-=(t.x-.5)*e.size,a-=(t.y-.5)*e.size);let l=o;o<i?l=i:o>i+n&&(l=i+n);let c=a;a<s?c=s:a>s+r&&(c=s+r);const p=o-l,g=a-c;return Math.sqrt(p*p+g*g)<=e.size*.5}function NO(e,t,i,s,n){const r=e.x+e.width>t&&e.x<t+s,o=e.y+e.height>i&&e.y<i+n;return r&&o}function NX(e,t,i,s,n){return t+s<e.x+e.width&&t>e.x&&i>e.y&&i+n<e.y+e.height}function OX(e){return e!=null&&typeof e.point=="object"&&typeof e.label=="object"}var _X={top:{x:0,y:-1},bottom:{x:0,y:1},left:{x:-1,y:0},right:{x:1,y:0},"top-left":{x:-1,y:-1},"top-right":{x:1,y:-1},"bottom-left":{x:-1,y:1},"bottom-right":{x:1,y:1}};function BX(e,t,i=5){var a;const s=new Map,n=[],r=new Map([...e.entries()].map(([l,c])=>[l,c.toSorted((p,g)=>g.point.size-p.point.size)])),o=[...r.values()].flat();for(const[l,c]of r.entries()){const p=[];if((a=c[0])!=null&&a.label){for(let g=0,f=c.length;g<f;g++){const y=c[g],{point:C,label:x,marker:M}=y,{text:b,width:R,height:I}=x,P=C.size*.5;let k=0,_=0;if(P>0&&y.placement!=null){const Ce=_X[y.placement];k=(R*.5+P+i)*Ce.x,_=(I*.5+P+i)*Ce.y}const B=C.x-R*.5+k-(((M==null?void 0:M.center.x)??.5)-.5)*C.size,H=C.y-I*.5+_-(((M==null?void 0:M.center.y)??.5)-.5)*C.size;if(!(!t||NX(t,B,H,R,I))||o.some(Ce=>{var be;return kX(Ce.point,(be=Ce.marker)==null?void 0:be.center,B,H,R,I)})||n.some(Ce=>NO(Ce,B,H,R,I)))continue;const te={index:g,text:b,x:B,y:H,width:R,height:I,datum:y};p.push(te),n.push(te)}s.set(l,p)}}return s}function GX(e,t=0){const i=[];for(let s=0;s<e.length;s++){const n=e[s],{point:{x:r,y:o},label:{text:a}}=n;let{width:l,height:c}=n.label;if(l+=t,c+=t,i.some(p=>NO(p,r,o,l,c)))return!0;i.push({index:s,text:a,x:r,y:o,width:l,height:c,datum:n})}return!1}function zX(e,t){const i=Math.max(e.length,t.length),s=new Set,n=new Set;for(let r=0;r<i;r++){const o=e[r],a=t[r];o!==a&&(n.has(a)?n.delete(a):a&&s.add(a),s.has(o)?s.delete(o):o&&n.add(o))}return{changed:s.size>0||n.size>0,added:s,removed:n}}var HX=new Intl.NumberFormat("en-US",{maximumFractionDigits:2,useGrouping:!1}),VX=new Intl.NumberFormat("en-US",{style:"percent"});function Of(e,t=2){return typeof e=="number"?_O(e,t):String(e??"")}function OO(e){return VX.format(e)}function _O(e,t){return t===2?HX.format(e):new Intl.NumberFormat("en-US",{maximumFractionDigits:t,useGrouping:!1}).format(e)}var wM="class-instance";function ga(e,t,i){if(bi(t)){if(!bi(e)||e.length!==t.length||t.some((s,n)=>ga(e[n],s)!=null))return t}else if(bn(t)){if(!bn(e))return t;const s={},n=new Set([...Object.keys(e),...Object.keys(t)]);for(const r of n)if(!(e[r]===t[r]||i!=null&&i.includes(r)))if(typeof e[r]==typeof t[r]){const o=ga(e[r],t[r]);o!==null&&(s[r]=o)}else s[r]=t[r];return Object.keys(s).length?s:null}else if(e!==t)return t;return null}function BO(e,t){for(const i of Object.keys(e))if(e[i]!==(t==null?void 0:t[i]))return!1;return!0}function Us(e,t){return bi(e)?e.map(i=>Us(i,t)):bn(e)?WX(e,t):e instanceof Map?new Map(Us(Array.from(e))):TR(e)}function WX(e,t){const i={};for(const s of Object.keys(e))i[s]=t!=null&&t.has(s)?TR(e[s]):Us(e[s],t);return i}function TR(e){return bi(e)?e.slice(0):bn(e)?{...e}:um(e)?new Date(e):AN(e)?new RegExp(e.source,e.flags):e}function cl(e,t,i,s,n){if(bi(e)){t(e,s,n);let r=0;for(const o of e)cl(o,t,i,s==null?void 0:s[r],n),r++}else if(bn(e)){t(e,s,n);for(const r of Object.keys(e)){if(i!=null&&i.has(r))continue;const o=e[r];cl(o,t,i,s==null?void 0:s[r],n)}}}function uf(e,t,i={}){const{path:s,matcherPath:n=s==null?void 0:s.replace(/(\[[0-9+]+])/i,"[]"),skip:r=[]}=i;if(e==null)throw new Error(`AG Charts - target is uninitialised: ${s??"<root>"}`);if(t==null)return e;if(da(e))return e.set(t);const o=e,a=ob(e);for(const l of Object.keys(t)){if(aR.has(l))continue;const c=`${n?n+".":""}${l}`;if(r.includes(c))continue;const p=t[l],g=`${s?s+".":""}${l}`,f=o.constructor,y=o[l];try{const C=ob(y),x=ob(p);if(a===wM&&!(l in e)){if(p===void 0)continue;_e.warn(`unable to set [${g}] in ${f==null?void 0:f.name} - property is unknown`);continue}if(C!=null&&x!=null&&x!==C&&(C!==wM||x!=="object")){_e.warn(`unable to set [${g}] in ${f==null?void 0:f.name} - can't apply type of [${x}], allowed types are: [${C}]`);continue}da(y)?o[l].set(p):x==="object"?(y==null&&(o[l]={}),uf(y??o[l],p,{...i,path:g,matcherPath:c})):o[l]=p}catch(C){_e.warn(`unable to set [${g}] in [${f==null?void 0:f.name}]; nested error is: ${C.message}`)}}return e}function ob(e){return e==null?null:PN(e)||um(e)?"primitive":bi(e)?"array":xn(e)?bn(e)?"object":wM:tu(e)?"function":"primitive"}function Ui(e,t){const i=bi(e)?e:e.split(".");if(i.length===1){const[s]=i;return wl((n,r,o)=>n[s]=o,n=>n[s],t)}return wl((s,n,r)=>lR(s,i,r),s=>oR(s,i),t)}function jX(e){return wl((t,i,s)=>t[e]=s)}function Ms(e,t){return wl((i,s,n)=>i[e][t??s]=n)}function vr(e){const{newValue:t,oldValue:i,changeValue:s}=e;return wl((n,r,o,a)=>(o!==a&&(a!==void 0&&(i==null||i.call(n,a)),o!==void 0&&(t==null||t.call(n,o)),s==null||s.call(n,o,a)),o))}function Oh(e){return LN(e)}var ab="color: green",lb="color: grey";function UX(){return LN(()=>{})}function xM(e,t){const i=gh(t);if(i.length===0)return;const s=TN(e);for(const n of i)n in s&&(t[n]=s[n])}var GO=class{transitionRoot(e,t){this.parent?this.parent.transitionRoot(e,t):this.transition(e,t)}},AR=class Gn extends GO{constructor(t,i,s){super(),this.defaultState=t,this.states=i,this.enterEach=s,this.debug=ci.create(!0,"animation"),this.state=t,this.debug(`%c${this.constructor.name} | init -> ${t}`,ab)}transition(t,i){var p,g,f,y;if(!this.transitionChild(t,i)||this.state===Gn.child||this.state===Gn.parent)return;const n=this.state,r=this.states[this.state];let o=r[t];const a=`%c${this.constructor.name} | ${this.state} -> ${t} ->`;if(Array.isArray(o))o=o.find(C=>{if(!C.guard)return!0;const x=C.guard(i);return x||this.debug(`${a} (guarded)`,C.target,lb),x});else if(typeof o=="object"&&!(o instanceof Gn)&&o.guard&&!o.guard(i)){this.debug(`${a} (guarded)`,o.target,lb);return}if(!o){this.debug(`${a} ${this.state}`,lb);return}const l=this.getDestinationState(o),c=l===this.state?void 0:r.onExit;this.debug(`${a} ${l}`,ab),this.state=l,typeof o=="function"?o(i):typeof o=="object"&&!(o instanceof Gn)&&((p=o.action)==null||p.call(o,i)),c==null||c(),(g=this.enterEach)==null||g.call(this,n,l),l!==n&&l!==Gn.child&&l!==Gn.parent&&((y=(f=this.states[l]).onEnter)==null||y.call(f,n,i))}transitionAsync(t,i){setTimeout(()=>{this.transition(t,i)},0)}is(t){return this.state===Gn.child&&this.childState?this.childState.is(t):this.state===t}resetHierarchy(){this.debug(`%c${this.constructor.name} | ${this.state} -> [resetHierarchy] -> ${this.defaultState}`,"color: green"),this.state=this.defaultState}transitionChild(t,i){var s,n;return this.state!==Gn.child||!this.childState||(xM(this,this.childState),this.childState.transition(t,i),!this.childState.is(Gn.parent))?!0:(this.debug(`%c${this.constructor.name} | ${this.state} -> ${t} -> ${this.defaultState}`,ab),this.state=this.defaultState,(n=(s=this.states[this.state]).onEnter)==null||n.call(s),this.childState.resetHierarchy(),!1)}getDestinationState(t){let i=this.state;return typeof t=="string"?i=t:t instanceof Gn?(this.childState=t,this.childState.parent=this,i=Gn.child):typeof t=="object"&&(t.target instanceof Gn?(this.childState=t.target,this.childState.parent=this,i=Gn.child):t.target!=null&&(i=t.target)),i}};AR.child="__child";AR.parent="__parent";var Cm=AR,KX=class extends GO{constructor(...e){super(),this.stateMachines=e;for(const t of e)t.parent=this}transition(e,t){for(const i of this.stateMachines)xM(this,i),i.transition(e,t)}transitionAsync(e,t){for(const i of this.stateMachines)xM(this,i),i.transitionAsync(e,t)}};function PR(){const e=new Map;return t=>{const i=e.get(t);return i?(e.set(t,i+1),`${t}_${i}`):(e.set(t,1),t)}}var FR=class{static wrapText(e,t){return this.wrapLines(e,t).join(`
`)}static wrapLines(e,t){const i=this.textWrap(e,t);return t.overflow==="hide"&&i.some(s=>s.endsWith(Ei.EllipsisChar))?[]:i}static appendEllipsis(e){return e.replace(/[.,]{1,5}$/,"")+Ei.EllipsisChar}static truncateLine(e,t,i,s){const n=t.textWidth(Ei.EllipsisChar);let r=0,o=0;for(;o<e.length;o++){const a=t.textWidth(e.charAt(o));if(r+a>i)break;r+=a}if(e.length===o&&(!s||r+n<=i))return s?e+Ei.EllipsisChar:e;for(e=e.slice(0,o).trimEnd();e.length&&t.textWidth(e)+n>i;)e=e.slice(0,-1).trimEnd();return e+Ei.EllipsisChar}static textWrap(e,t){const i=e.split(Ei.lineSplitter),s=Tl.getMeasurer(t);if(t.textWrap==="never")return i.map(a=>this.truncateLine(a.trimEnd(),s,t.maxWidth));const n=[],r=t.textWrap==="hyphenate",o=t.textWrap==null||t.textWrap==="on-space";for(const a of i){let l=a.trimEnd();if(l===""){n.push(l);continue}for(let c=0,p=0,g=0;c<l.length;c++){const f=l.charAt(c);if(p+=s.textWidth(f),f===" "&&(g=c),p>t.maxWidth){if(c===0)break;const y=s.textWidth(l.slice(0,c+1));if(y<=t.maxWidth){p=y;continue}if(g){const M=this.getWordAt(l,g+1),b=s.textWidth(M);if(b<=t.maxWidth){n.push(l.slice(0,g).trimEnd()),l=l.slice(g).trimStart(),c=-1,p=0,g=0;continue}else o&&b>t.maxWidth&&n.push(l.slice(0,g).trimEnd(),this.truncateLine(l.slice(g).trimStart(),s,t.maxWidth,!0))}else o&&n.push(this.truncateLine(l,s,t.maxWidth,!0));if(o){l="";break}const C=r?"-":"";let x=l.slice(0,c).trim();for(;x.length&&s.textWidth(x+C)>t.maxWidth;)x=x.slice(0,-1).trimEnd();if(n.push(x+C),!x.length){l="";break}l=l.slice(x.length).trimStart(),c=-1,p=0,g=0}}l&&n.push(l)}return this.avoidOrphans(n,s,t),this.clipLines(n,s,t)}static getWordAt(e,t){const i=e.indexOf(" ",t);return i===-1?e.slice(t):e.slice(t,i)}static clipLines(e,t,i){if(!i.maxHeight)return e;const{height:s,lineMetrics:n}=t.measureLines(e);if(s<=i.maxHeight)return e;for(let r=0,o=0;r<n.length;r++){const{lineHeight:a}=n[r];if(o+=a,o>i.maxHeight){if(i.overflow==="hide")return[];const l=e.slice(0,r||1),c=l.pop();return l.concat(this.truncateLine(c,t,i.maxWidth,!0))}}return e}static avoidOrphans(e,t,i){if(i.avoidOrphans===!1||e.length<2)return;const{length:s}=e,n=e[s-1],r=e[s-2];if(r.length<n.length)return;const o=r.lastIndexOf(" ");if(o===-1||o===r.indexOf(" ")||n.includes(" "))return;const a=r.slice(o+1);t.textWidth(n+a)<=i.maxWidth&&(e[s-2]=r.slice(0,o),e[s-1]=a+" "+n)}},li=class extends yt{constructor(){super(...arguments),this.id=Qr(this),this.node=new kO({zIndex:1}).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.padding=0,this.layoutStyle="block",this.truncated=!1}registerInteraction(e,t){return e.layoutManager.addListener("layout:complete",()=>this.updateA11yText(e,t))}computeTextWrap(e,t){const{text:i,padding:s,wrapping:n}=this,r=Math.min(this.maxWidth??1/0,e)-s*2,o=this.maxHeight??t-s*2;if(!isFinite(r)&&!isFinite(o)){this.node.text=i;return}const a=FR.wrapText(i??"",{maxWidth:r,maxHeight:o,font:this,textWrap:n});this.node.text=a,this.truncated=a.includes(Ei.EllipsisChar)}updateA11yText(e,t){var s;const{proxyInteractionService:i}=e;if(this.enabled&&this.text){const n=ji.toCanvas(this.node);if(n){const{id:r}=this;this.proxyText??(this.proxyText=i.createProxyElement({type:"text",domManagerId:r,where:t})),this.proxyText.textContent=this.text,this.proxyText.setBounds(n),this.proxyText.addListener("mousemove",o=>this.handleMouseMove(e,o)),this.proxyText.addListener("mouseleave",o=>this.handleMouseLeave(e,o))}}else(s=this.proxyText)==null||s.destroy(),this.proxyText=void 0}handleMouseMove(e,t){if(t!=null&&this.enabled&&this.node.visible&&this.truncated){const{x:i,y:s}=ji.toCanvas(this.node),n=t.sourceEvent.offsetX+i,r=t.sourceEvent.offsetY+s,o={type:"hover",canvasX:n,canvasY:r};e.tooltipManager.updateTooltip(this.id,{canvasX:n,canvasY:r,lastPointerEvent:o,showArrow:!1},{title:this.text})}}handleMouseLeave(e,t){e.tooltipManager.removeTooltip(this.id)}};li.SMALL_PADDING=10;li.LARGE_PADDING=20;A([O(nt),Ms("node","visible")],li.prototype,"enabled",2);A([O(Fe,{optional:!0}),Ms("node")],li.prototype,"text",2);A([O(JN,{optional:!0}),Ms("node")],li.prototype,"textAlign",2);A([O(Il,{optional:!0}),Ms("node")],li.prototype,"fontStyle",2);A([O(Ll,{optional:!0}),Ms("node")],li.prototype,"fontWeight",2);A([O(Ge),Ms("node")],li.prototype,"fontSize",2);A([O(Fe),Ms("node")],li.prototype,"fontFamily",2);A([O(Zt,{optional:!0}),Ms("node","fill")],li.prototype,"color",2);A([O(Ge,{optional:!0})],li.prototype,"spacing",2);A([O(Ge,{optional:!0})],li.prototype,"maxWidth",2);A([O(Ge,{optional:!0})],li.prototype,"maxHeight",2);A([O(qC)],li.prototype,"wrapping",2);A([O(Ge)],li.prototype,"padding",2);A([O(Fe)],li.prototype,"layoutStyle",2);var No=class extends Zr{constructor(e={}){super(e),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new Ue(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(e,t){return!1}render(e){var x;const{ctx:t}=e;let{x1:i,y1:s,x2:n,y2:r}=this;i=this.align(i),s=this.align(s),n=this.align(n),r=this.align(r);const{fill:o,opacity:a,isRange:l}=this;if(!!(l&&o)){const{fillOpacity:M}=this;this.applyFill(t),t.globalAlpha=a*M,t.beginPath(),t.moveTo(i,s),t.lineTo(n,s),t.lineTo(n,r),t.lineTo(i,r),t.closePath(),t.fill()}const{stroke:p,strokeWidth:g,startLine:f,endLine:y}=this;if(!!((f||y)&&p&&g)){const{strokeOpacity:M,lineDash:b,lineDashOffset:R,lineCap:I,lineJoin:P}=this;this.applyStroke(t),t.globalAlpha=a*M,t.lineWidth=g,b&&t.setLineDash(b),R&&(t.lineDashOffset=R),I&&(t.lineCap=I),P&&(t.lineJoin=P),t.beginPath(),f&&(t.moveTo(i,s),t.lineTo(n,s)),y&&(t.moveTo(n,r),t.lineTo(i,r)),t.stroke()}(x=this.fillShadow)==null||x.markClean(),super.render(e)}};No.className="Range";No.defaultStyles={...Zr.defaultStyles,strokeWidth:1};A([Ze()],No.prototype,"x1",2);A([Ze()],No.prototype,"y1",2);A([Ze()],No.prototype,"x2",2);A([Ze()],No.prototype,"y2",2);A([Ze()],No.prototype,"startLine",2);A([Ze()],No.prototype,"endLine",2);A([Ze()],No.prototype,"isRange",2);var vs=class extends yt{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return Ei.toFontString(this)}};A([O(nt)],vs.prototype,"enabled",2);A([O(Zt,{optional:!0})],vs.prototype,"color",2);A([O(Il,{optional:!0})],vs.prototype,"fontStyle",2);A([O(Ll,{optional:!0})],vs.prototype,"fontWeight",2);A([O(Ge)],vs.prototype,"fontSize",2);A([O(Fe)],vs.prototype,"fontFamily",2);A([O(Mn,{optional:!0})],vs.prototype,"formatter",2);function rC(e){const{parallelFlipRotation:t=0,regularFlipRotation:i=0}=e,s=e.rotation?Qt(Ys(e.rotation)):0,n=!s&&t>=0&&t<=Math.PI?-1:1,r=!s&&i>=0&&i<=Math.PI?-1:1;let o=0;return e.parallel?o=n*Math.PI/2:r===-1&&(o=Math.PI),{configuredRotation:s,defaultRotation:o,parallelFlipFlag:n,regularFlipFlag:r}}function YX(e,t){return isNaN(e)?t?0:10:e}function $X(e,t,i,s){return e&&!t?i*s===-1?"hanging":"bottom":"middle"}function cb(e,t,i,s,n){const r=t>0&&t<=Math.PI,o=i>0&&i<=Math.PI,a=r||o?-1:1;if(e)if(t||i){if(s*a===-1)return"end"}else return"center";else if(s*n===-1)return"end";return"start"}function ZX(e,t,i,s){const n=[];for(const{tickLabel:r,translationY:o}of e){if(!r)continue;const{width:a,height:l}=s.measureLines(r),c=new Ue(t,o,a,l),p=new Ue(t,o,0,0);i.transformBBox(p,c);const{x:g,y:f}=c;n.push({point:{x:g,y:f},label:{text:r,width:a,height:l}})}return n}function XX(e){return e!=null&&Object.hasOwn(e,"toString")&&Vn(e.toString())}function QX(e){return e!=null&&Object.hasOwn(e,"valueOf")&&Kt(e.valueOf())}function sS(e){return Kt(e)||UC(e)||QX(e)}function GT(e,t){return e!=null&&(!t||sS(e))}function bM(e){return XX(e)&&Object.hasOwn(e,"id")?e.id:e}var kR=e=>e==="value"?Jt((t,i)=>i.target.type==="line",t=>t.target.type==="range"?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'"):Jt((t,i)=>i.target.type==="range",t=>t.target.type==="line"?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'"),zO=(e,t,i,s,n)=>{const r=e==="line"&&t!==void 0,o=e==="range"&&i!==void 0;if(!r&&!o)return!0;const[a,l]=i??[t,void 0],c=hi.is(s)||xo.is(s),p=GT(a,c)&&!isNaN(s.convert(a)),g=GT(l,c)&&!isNaN(s.convert(l));if(r&&p||o&&p&&g)return(n==null?void 0:n())??!0;const f=["Expecting crossLine"];return o?(p||f.push(`range start ${af(a)}`),g||f.push(`${p?"":"and "}range end ${af(l)}`)):f.push(`value ${af(a)}`),f.push("to match the axis scale domain."),_e.warnOnce(f.join(" ")),!1},qX={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},"top-left":{xTranslationDirection:1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"bottom-right":{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:1,yTranslationDirection:0},"inside-right":{xTranslationDirection:-1,yTranslationDirection:0},"inside-top":{xTranslationDirection:0,yTranslationDirection:1},"inside-bottom":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-right":{xTranslationDirection:-1,yTranslationDirection:-1}},JX={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},"top-left":{xTranslationDirection:-1,yTranslationDirection:-1},"top-right":{xTranslationDirection:-1,yTranslationDirection:1},"bottom-left":{xTranslationDirection:1,yTranslationDirection:-1},"bottom-right":{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},"inside-left":{xTranslationDirection:0,yTranslationDirection:1},"inside-right":{xTranslationDirection:0,yTranslationDirection:-1},"inside-top":{xTranslationDirection:-1,yTranslationDirection:0},"inside-bottom":{xTranslationDirection:1,yTranslationDirection:0},"inside-top-left":{xTranslationDirection:-1,yTranslationDirection:1},"inside-bottom-left":{xTranslationDirection:1,yTranslationDirection:1},"inside-top-right":{xTranslationDirection:-1,yTranslationDirection:-1},"inside-bottom-right":{xTranslationDirection:1,yTranslationDirection:-1}};function MM({yDirection:e,padding:t=0,position:i="top",bbox:s}){const n=e?qX:JX,{xTranslationDirection:r,yTranslationDirection:o}=n[i],a=r*(t+s.width/2),l=o*(t+s.height/2);return{xTranslation:a,yTranslation:l}}function HO({yDirection:e,bbox:t,padding:i=0,position:s="top"}){const n={};return s.startsWith("inside")||(s==="top"&&!e?n.top=i+t.height:s==="bottom"&&!e?n.bottom=i+t.height:s==="left"&&e?n.left=i+t.width:s==="right"&&e&&(n.right=i+t.width)),n}var oC=({direction:e,xEnd:t,yStart:i,yEnd:s})=>e==="y"?{x:t/2,y:i}:{x:t,y:isNaN(s)?i:(i+s)/2},zT=({direction:e,xStart:t,xEnd:i,yStart:s,yEnd:n})=>e==="y"?{x:t,y:isNaN(n)?s:(s+n)/2}:{x:i/2,y:s},HT=({direction:e,xEnd:t,yStart:i,yEnd:s})=>e==="y"?{x:t,y:isNaN(s)?i:(i+s)/2}:{x:t/2,y:isNaN(s)?i:s},VT=({direction:e,xStart:t,xEnd:i,yStart:s,yEnd:n})=>e==="y"?{x:i/2,y:isNaN(n)?s:n}:{x:t,y:isNaN(n)?s:(s+n)/2},eQ=({xEnd:e,yStart:t,yEnd:i})=>({x:e/2,y:isNaN(i)?t:(t+i)/2}),WT=({direction:e,xStart:t,xEnd:i,yStart:s})=>e==="y"?{x:t/2,y:s}:{x:i,y:s},jT=({direction:e,xStart:t,yStart:i,yEnd:s})=>e==="y"?{x:t,y:isNaN(s)?i:s}:{x:t,y:i},UT=({direction:e,xEnd:t,yStart:i,yEnd:s})=>e==="y"?{x:t,y:i}:{x:t,y:isNaN(s)?i:s},KT=({direction:e,xStart:t,xEnd:i,yStart:s,yEnd:n})=>e==="y"?{x:i,y:isNaN(n)?s:n}:{x:t,y:isNaN(n)?s:n},VO={top:{c:oC},bottom:{c:VT},left:{c:zT},right:{c:HT},"top-left":{c:WT},"top-right":{c:UT},"bottom-left":{c:jT},"bottom-right":{c:KT},inside:{c:eQ},"inside-left":{c:zT},"inside-right":{c:HT},"inside-top":{c:oC},"inside-bottom":{c:VT},"inside-top-left":{c:WT},"inside-bottom-left":{c:jT},"inside-top-right":{c:UT},"inside-bottom-right":{c:KT}},tQ=pi(["top","left","right","bottom","top-left","top-right","bottom-left","bottom-right","inside","inside-left","inside-right","inside-top","inside-bottom","inside-top-left","inside-bottom-left","inside-top-right","inside-bottom-right"],"crossLine label position"),Jr=class extends yt{constructor(){super(...arguments),this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)"}};A([O(nt,{optional:!0})],Jr.prototype,"enabled",2);A([O(Fe,{optional:!0})],Jr.prototype,"text",2);A([O(Il,{optional:!0})],Jr.prototype,"fontStyle",2);A([O(Ll,{optional:!0})],Jr.prototype,"fontWeight",2);A([O(Ge)],Jr.prototype,"fontSize",2);A([O(Fe)],Jr.prototype,"fontFamily",2);A([O(_t)],Jr.prototype,"padding",2);A([O(Zt,{optional:!0})],Jr.prototype,"color",2);A([O(tQ,{optional:!0})],Jr.prototype,"position",2);A([O(_t,{optional:!0})],Jr.prototype,"rotation",2);A([O(nt,{optional:!0})],Jr.prototype,"parallel",2);var Un=class extends yt{constructor(){super(),this.id=Qr(this),this.label=new Jr,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.rangeGroup=new lt({name:this.id}),this.lineGroup=new lt({name:this.id}),this.labelGroup=new lt({name:this.id}),this.crossLineRange=new No,this.crossLineLabel=new pp,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1,this._isRange=void 0,this.lineGroup.append(this.crossLineRange),this.labelGroup.append(this.crossLineLabel),this.crossLineRange.pointerEvents=1}update(e){const{enabled:t,data:i,type:s,value:n,range:r,scale:o}=this;if(!s||!o||!t||!e||!zO(s,n,r,o)||i.length===0){this.rangeGroup.visible=!1,this.lineGroup.visible=!1,this.labelGroup.visible=!1;return}this.rangeGroup.visible=e,this.lineGroup.visible=e,this.labelGroup.visible=e,this.updateNodes();const{isRange:a}=this;a!==this._isRange&&(a?this.rangeGroup.appendChild(this.crossLineRange):this.lineGroup.appendChild(this.crossLineRange)),this._isRange=a}calculateLayout(e,t){if(!e)return;const{scale:i,gridLength:s,sideFlag:n,direction:r,label:{position:o="top"},clippedRange:a,strokeWidth:l=0}=this;if(this.data=[],!i)return;const c=i.bandwidth??0,p=i.step??0,g=(t?-1:1)*(i instanceof iu?(p-c)/2:0),[f,y]=[0,n*s];let[C,x]=this.getRange();const M=x===void 0&&xo.is(i)?c/2+g:0;let[b,R]=[Number(i.convert(C,!0))-g+M,i.convert(x,!0)+c+g];b=cM(b,a),R=cM(R,a),[C,x]=[Number(i.convert(C))+M,i.convert(x)+c];const I=(C===b||x===R||b!==R)&&Math.abs(R-b)>0;if(I&&b>R&&([b,R]=[R,b],[C,x]=[x,C]),C-g>=b&&(C-=g),x+g<=R&&(x+=g),this.isRange=I,this.startLine=l>0&&C>=b&&C<=b+g,this.endLine=l>0&&x>=R-c-g&&x<=R,!I&&!this.startLine&&!this.endLine||(this.data=[b,R],!this.label.enabled))return;const{c:P=oC}=VO[o]??{},{x:k,y:_}=P({direction:r,xStart:f,xEnd:y,yStart:b,yEnd:R});this.labelPoint={x:k,y:_}}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}updateRangeNode(){const{crossLineRange:e,sideFlag:t,gridLength:i,data:s,startLine:n,endLine:r,isRange:o,fill:a,fillOpacity:l,stroke:c,strokeWidth:p,lineDash:g}=this;e.x1=0,e.x2=t*i,e.y1=s[0],e.y2=s[1],e.startLine=n,e.endLine=r,e.isRange=o,e.fill=a,e.fillOpacity=l??1,e.stroke=c,e.strokeWidth=p??1,e.strokeOpacity=this.strokeOpacity??1,e.lineDash=g}updateLabel(){const{crossLineLabel:e,label:t}=this;t.text&&(e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.fill=t.color,e.text=t.text)}positionLabel(){const{crossLineLabel:e,labelPoint:{x:t=void 0,y:i=void 0}={},label:{parallel:s,rotation:n,position:r="top",padding:o=0},direction:a,parallelFlipRotation:l,regularFlipRotation:c}=this;if(t===void 0||i===void 0)return;const{defaultRotation:p,configuredRotation:g}=rC({rotation:n,parallel:s,regularFlipRotation:c,parallelFlipRotation:l});e.rotation=p+g,e.textBaseline="middle",e.textAlign="center";const f=e.getBBox();if(!f)return;const y=a==="y",{xTranslation:C,yTranslation:x}=MM({yDirection:y,padding:o,position:r,bbox:f});e.translationX=t+C,e.translationY=i+x}getRange(){const{value:e,range:t,scale:i}=this,s=hi.is(i)||xo.is(i),n=(t==null?void 0:t[0])??e;let r=t==null?void 0:t[1];return!s&&r===void 0&&(r=n),s&&n===r&&(r=void 0),[n,r]}computeLabelBBox(){const{label:e}=this;if(!e.enabled)return;const t=new pp;t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=e.text;const{labelPoint:{x:i=void 0,y:s=void 0}={},label:{parallel:n,rotation:r,position:o="top",padding:a=0},direction:l,parallelFlipRotation:c,regularFlipRotation:p}=this;if(i===void 0||s===void 0)return;const{configuredRotation:g}=rC({rotation:r,parallel:n,regularFlipRotation:p,parallelFlipRotation:c});t.rotation=g,t.textBaseline="middle",t.textAlign="center";const f=t.getBBox();if(!f)return;const y=l==="y",{xTranslation:C,yTranslation:x}=MM({yDirection:y,padding:a,position:o,bbox:f});return t.x=i+C,t.y=s+x,t.getBBox()}calculatePadding(e){const{isRange:t,startLine:i,endLine:s,direction:n,label:{padding:r=0,position:o="top"}}=this;if(!t&&!i&&!s)return;const a=this.computeLabelBBox();if((a==null?void 0:a.x)==null||(a==null?void 0:a.y)==null)return;const l=HO({yDirection:n==="y",padding:r,position:o,bbox:a});e.left=Math.max(e.left??0,l.left??0),e.right=Math.max(e.right??0,l.right??0),e.top=Math.max(e.top??0,l.top??0),e.bottom=Math.max(e.bottom??0,l.bottom??0)}};Un.className="CrossLine";A([O(nt,{optional:!0})],Un.prototype,"enabled",2);A([O(pi(["range","line"],"a crossLine type"),{optional:!0})],Un.prototype,"type",2);A([O(ba(kR("range"),pm.restrict({length:2})),{optional:!0})],Un.prototype,"range",2);A([O(kR("value"),{optional:!0})],Un.prototype,"value",2);A([O(Zt,{optional:!0})],Un.prototype,"fill",2);A([O($t,{optional:!0})],Un.prototype,"fillOpacity",2);A([O(Zt,{optional:!0})],Un.prototype,"stroke",2);A([O(_t,{optional:!0})],Un.prototype,"strokeWidth",2);A([O($t,{optional:!0})],Un.prototype,"strokeOpacity",2);A([O(El,{optional:!0})],Un.prototype,"lineDash",2);A([O(Ye)],Un.prototype,"label",2);var WO=(e=>(e[e.CHART_BACKGROUND=0]="CHART_BACKGROUND",e[e.AXIS_GRID=1]="AXIS_GRID",e[e.AXIS=2]="AXIS",e[e.SERIES_CROSSLINE_RANGE=3]="SERIES_CROSSLINE_RANGE",e[e.SERIES_LAYER=4]="SERIES_LAYER",e[e.AXIS_FOREGROUND=5]="AXIS_FOREGROUND",e[e.SERIES_CROSSHAIR=6]="SERIES_CROSSHAIR",e[e.SERIES_CROSSLINE_LINE=7]="SERIES_CROSSLINE_LINE",e[e.SERIES_ANNOTATION=8]="SERIES_ANNOTATION",e[e.CHART_ANNOTATION=9]="CHART_ANNOTATION",e[e.CHART_ANNOTATION_FOCUSED=10]="CHART_ANNOTATION_FOCUSED",e[e.STATUS_BAR=11]="STATUS_BAR",e[e.SERIES_LABEL=12]="SERIES_LABEL",e[e.LEGEND=13]="LEGEND",e[e.NAVIGATOR=14]="NAVIGATOR",e[e.FOREGROUND=15]="FOREGROUND",e))(WO||{}),iQ=["stroke","lineDash"],sQ=Dl(e=>xn(e)&&Object.keys(e).every(t=>iQ.includes(t)),"objects with gridline style properties such as 'stroke' or 'lineDash'"),nS=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};A([O(nt)],nS.prototype,"enabled",2);A([O(Ge)],nS.prototype,"width",2);A([O(sQ)],nS.prototype,"style",2);function su(e,t=[void 0]){return wl((i,s,n)=>t.includes(n)?tu(e)?e(n):e:n)}var nQ={};ko(nQ,{TimeInterval:()=>dp,day:()=>sC,friday:()=>P8,hour:()=>Kd,millisecond:()=>uO,minute:()=>Yd,monday:()=>I8,month:()=>sh,saturday:()=>F8,second:()=>$d,sunday:()=>of,thursday:()=>A8,tuesday:()=>L8,utcDay:()=>pQ,utcHour:()=>uQ,utcMinute:()=>aQ,utcMonth:()=>mQ,utcYear:()=>CQ,wednesday:()=>T8,year:()=>$C});function rQ(e){return Math.floor(e.getTime()/Ls)}function oQ(e){return new Date(e*Ls)}var aQ=new gr(rQ,oQ);function lQ(e){return Math.floor(e.getTime()/vn)}function cQ(e){return new Date(e*vn)}var uQ=new gr(lQ,cQ);function hQ(e){return Math.floor(e.getTime()/Yr)}function dQ(e){const t=new Date(0);return t.setUTCDate(t.getUTCDate()+e),t.setUTCHours(0,0,0,0),t}var pQ=new gr(hQ,dQ);function gQ(e){return e.getUTCFullYear()*12+e.getUTCMonth()}function fQ(e){const t=Math.floor(e/12),i=e-t*12;return new Date(Date.UTC(t,i,1))}var mQ=new gr(gQ,fQ);function vQ(e){return e.getUTCFullYear()}function yQ(e){const t=new Date;return t.setUTCFullYear(e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0),t}var CQ=new gr(vQ,yQ),jO=Jt(e=>Kt(e)&&e>0||e instanceof dp,"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),_h=class extends yt{constructor(){super(...arguments),this.minSpacing=NaN,this.maxSpacing=NaN}};A([O(jO,{optional:!0})],_h.prototype,"step",2);A([O(pm,{optional:!0})],_h.prototype,"values",2);A([O(tO),su(NaN)],_h.prototype,"minSpacing",2);A([O(iO),su(NaN)],_h.prototype,"maxSpacing",2);var ys=class extends yt{constructor(){super(...arguments),this.enabled=!0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.spacing=5,this.minSpacing=NaN,this.color="#575757",this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1}getSideFlag(){return this.mirrored?1:-1}};A([O(nt)],ys.prototype,"enabled",2);A([O(Il,{optional:!0})],ys.prototype,"fontStyle",2);A([O(Ll,{optional:!0})],ys.prototype,"fontWeight",2);A([O(_t.restrict({min:1}))],ys.prototype,"fontSize",2);A([O(Fe)],ys.prototype,"fontFamily",2);A([O(Ge)],ys.prototype,"spacing",2);A([O(bp),su(NaN)],ys.prototype,"minSpacing",2);A([O(Zt,{optional:!0})],ys.prototype,"color",2);A([O(_t,{optional:!0})],ys.prototype,"rotation",2);A([O(nt)],ys.prototype,"avoidCollisions",2);A([O(nt)],ys.prototype,"mirrored",2);A([O(nt)],ys.prototype,"parallel",2);A([O(Mn,{optional:!0})],ys.prototype,"itemStyler",2);A([O(Mn,{optional:!0})],ys.prototype,"formatter",2);A([O(Fe,{optional:!0})],ys.prototype,"format",2);var rS=class{constructor(){this.enabled=!0,this.width=1,this.stroke=void 0}};A([O(nt)],rS.prototype,"enabled",2);A([O(Ge)],rS.prototype,"width",2);A([O(Zt,{optional:!0})],rS.prototype,"stroke",2);var Mp=class extends yt{constructor(){super(...arguments),this.enabled=!0,this.width=1,this.size=6}};A([O(nt)],Mp.prototype,"enabled",2);A([O(Ge)],Mp.prototype,"width",2);A([O(Ge)],Mp.prototype,"size",2);A([O(Zt,{optional:!0})],Mp.prototype,"stroke",2);var Oo=class extends yt{constructor(){super(...arguments),this.caption=new li,this.enabled=!1,this.spacing=li.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};A([O(nt)],Oo.prototype,"enabled",2);A([O(Fe,{optional:!0})],Oo.prototype,"text",2);A([O(Ge,{optional:!0})],Oo.prototype,"spacing",2);A([O(Il,{optional:!0})],Oo.prototype,"fontStyle",2);A([O(Ll,{optional:!0})],Oo.prototype,"fontWeight",2);A([O(Ge)],Oo.prototype,"fontSize",2);A([O(Fe)],Oo.prototype,"fontFamily",2);A([O(Zt,{optional:!0})],Oo.prototype,"color",2);A([O(qC)],Oo.prototype,"wrapping",2);A([O(Mn,{optional:!0})],Oo.prototype,"formatter",2);function RM(e){const[t,i]=Ks(e.range),s=Math.floor(t),n=Math.ceil(i);return{min:s,max:n,visible:s!==n}}var DM=Math.PI*2,SQ=DM/2;function wQ(e,t){return Math.abs(t-e)<SQ?t:e>t?t+DM:t-DM}function UO(e){const t=(o,a)=>{const[l=e.min,c=e.max]=Ks(a??[]);return o<l||o>c};return{tick:{fromFn(o,a,l){let c=o.y1+o.translationY,p=o.opacity;return(l==="added"||t(o.datum.translationY,o.datum.range))&&(c=a.translationY,p=0),{y:0,translationY:c,opacity:p,phase:wn[l]}},toFn(o,a,l){const c=a.translationY;let p=1;return l==="removed"&&(p=0),{y:0,translationY:c,opacity:p,finish:{y:c,translationY:0}}},applyFn(o,a){o.setProperties(a),o.visible=!t(o.y)}},line:{fromFn(o,a){return{...o.previousDatum??a,phase:wn.updated}},toFn(o,a){return{...a}}},label:{fromFn(o,a,l){const c=o.previousDatum??a,p=c.x,g=c.y,f=c.rotationCenterX;let y=Math.round(o.translationY),C=c.rotation,x=o.opacity;return l==="removed"||t(c.y,c.range)?C=a.rotation:(l==="added"||t(o.datum.y,o.datum.range))&&(y=Math.round(c.translationY),x=0,C=a.rotation),{x:p,y:g,rotationCenterX:f,translationY:y,rotation:C,opacity:x,phase:wn[l]}},toFn(o,a,l){var x;const c=a.x,p=a.y,g=a.rotationCenterX,f=Math.round(a.translationY);let y=0,C=1;return l==="added"?y=a.rotation:l==="removed"?(C=0,y=a.rotation):y=wQ(((x=o.previousDatum)==null?void 0:x.rotation)??a.rotation,a.rotation),{x:c,y:p,rotationCenterX:g,translationY:f,rotation:y,opacity:C,finish:{rotation:a.rotation}}}},group:{fromFn(o,a){const{rotation:l,translationX:c,translationY:p}=o;return{rotation:l,translationX:c,translationY:p,phase:wn.updated}},toFn(o,a){const{rotation:l,translationX:c,translationY:p}=a;return{rotation:l,translationX:c,translationY:p}}}}}function KO(){return(e,t)=>({rotation:t.rotation,rotationCenterX:t.rotationCenterX,rotationCenterY:t.rotationCenterY,translationX:t.translationX,translationY:t.translationY})}function YO(e){const{visible:t,min:i,max:s}=e;return(n,r)=>{const o=r.translationY,a=t&&o>=i&&o<=s;return{y:o,translationY:0,opacity:1,visible:a}}}function $O(){return(e,t)=>({x:t.x,y:t.y,translationY:t.translationY,rotation:t.rotation,rotationCenterX:t.rotationCenterX})}function ZO(){return(e,t)=>({...t})}var xQ=Object.freeze({tickData:{ticks:[],rawTicks:[],labelCount:0,fractionDigits:0},combinedRotation:0,textAlign:"center",textBaseline:"bottom",labelData:[]}),ub=class extends kh(fr){},Al=class XO{constructor(t,i){this.moduleCtx=t,this.scale=i,this.id=Qr(this),this.nice=!0,this.reverse=!1,this.keys=[],this.interval=new _h,this.dataDomain={domain:[],clipped:!1},this.layoutConstraints={stacked:!0,align:"start",width:100,unit:"percent"},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new Bg({name:`${this.id}-axis`}),this.tickLineGroup=this.axisGroup.appendChild(new lt({name:`${this.id}-Axis-tick-lines`})),this.lineNode=this.axisGroup.appendChild(new ub({name:`${this.id}-Axis-line`})),this.tickLabelGroup=this.axisGroup.appendChild(new lt({name:`${this.id}-Axis-tick-labels`})),this.labelGroup=new lt({name:`${this.id}-Labels`,zIndex:8}),this.gridGroup=new Bg({name:`${this.id}-Axis-grid`,zIndex:1}),this.gridLineGroup=this.gridGroup.appendChild(new lt({name:`${this.id}-gridLines`})),this.crossLineRangeGroup=new Bg({name:`${this.id}-CrossLines-Range`,zIndex:3}),this.crossLineLineGroup=new Bg({name:`${this.id}-CrossLines-Line`,zIndex:7}),this.crossLineLabelGroup=new Bg({name:`${this.id}-CrossLines-Label`,zIndex:12}),this.tickLineGroupSelection=Ji.select(this.tickLineGroup,ub,!1),this.tickLabelGroupSelection=Ji.select(this.tickLabelGroup,pp,!1),this.gridLineGroupSelection=Ji.select(this.gridLineGroup,ub,!1),this._crossLines=[],this.line=new rS,this.tick=new Mp,this.gridLine=new nS,this.label=this.createLabel(),this.tempText=new pp,this.tempCaption=new li,this.defaultTickMinSpacing=XO.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,spacing:this.label.spacing,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=new Oo,this.gridLength=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this._domainCalculated=!1,this.moduleMap=new SR,this.range=this.scale.range.slice(),this.crossLines.forEach(n=>this.initCrossLine(n)),this.axisGroup.appendChild(this.title.caption.node),this.animationManager=t.animationManager,this.animationState=new Cm("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:n=>this.animateReadyUpdate(n),resize:()=>this.resetSelectionNodes(),reset:"empty"}});let s;this.destroyFns.push(this.title.caption.registerInteraction(this.moduleCtx,"afterend"),t.layoutManager.addListener("layout:complete",n=>{s!=null&&ga(n.chart,s)!=null&&this.animationState.transition("resize"),s={...n.chart}}))}get type(){return this.constructor.type??""}set crossLines(t){const{CrossLineConstructor:i}=this.constructor;this._crossLines.forEach(s=>this.detachCrossLine(s)),this._crossLines=t.map(s=>{const n=new i;return n.set(s),n}),this._crossLines.forEach(s=>{this.attachCrossLine(s),this.initCrossLine(s)})}get crossLines(){return this._crossLines}resetAnimation(t){t==="initial"&&this.animationState.transition("reset")}attachCrossLine(t){this.crossLineRangeGroup.appendChild(t.rangeGroup),this.crossLineLineGroup.appendChild(t.lineGroup),this.crossLineLabelGroup.appendChild(t.labelGroup)}detachCrossLine(t){this.crossLineRangeGroup.removeChild(t.rangeGroup),this.crossLineLineGroup.removeChild(t.lineGroup),this.crossLineLabelGroup.removeChild(t.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(t=>t())}updateRange(){var a;const{range:t,visibleRange:i,scale:s}=this,n=(t[1]-t[0])/(i[1]-i[0]),r=n*i[0],o=t[0]-r;(a=s.setVisibleRange)==null||a.call(s,i),s.range=[o,o+n],this.crossLines.forEach(l=>{l.clippedRange=[t[0],t[1]]})}setCrossLinesVisible(t){this.crossLineRangeGroup.visible=t,this.crossLineLineGroup.visible=t,this.crossLineLabelGroup.visible=t}attachAxis(t){t.gridNode.appendChild(this.gridGroup),t.axisNode.appendChild(this.axisGroup),t.labelNode.appendChild(this.labelGroup),t.crossLineRangeNode.appendChild(this.crossLineRangeGroup),t.crossLineLineNode.appendChild(this.crossLineLineGroup),t.crossLineLabelNode.appendChild(this.crossLineLabelGroup)}detachAxis(t){t.gridNode.removeChild(this.gridGroup),t.axisNode.removeChild(this.axisGroup),t.labelNode.removeChild(this.labelGroup),t.crossLineRangeNode.removeChild(this.crossLineRangeGroup),t.crossLineLineNode.removeChild(this.crossLineLineGroup),t.crossLineLabelNode.removeChild(this.crossLineLabelGroup)}attachLabel(t){this.labelGroup.append(t)}inRange(t,i=0){const[s,n]=Ks(this.range);return t>=s-i&&t<=n+i}onFormatChange(t,i,s,n){const{scale:r}=this,o=r instanceof xR;if(n&&(r!=null&&r.tickFormat))try{const a=r.tickFormat({ticks:t,specifier:n});this.labelFormatter=a,this.datumFormatter=a;return}catch{_e.warnOnce(`the axis label format string ${n} is invalid. No formatting will be applied`)}this.labelFormatter=o?String:a=>Of(a,i),this.datumFormatter=o?String:a=>Of(a,i+1)}onGridLengthChange(t,i){i^t&&this.onGridVisibilityChange(),this.crossLines.forEach(s=>this.initCrossLine(s))}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createLabel(){return new ys}update(t=!0){if(!this.tickGenerationResult)return;this.updatePosition();const i=this.getAxisLineCoordinates(),{tickData:s,combinedRotation:n,textBaseline:r,textAlign:o}=this.tickGenerationResult,a=this.tickLabelGroupSelection.nodes().slice();if(this.updateSelections(i,s.ticks,{combinedRotation:n,textAlign:o,textBaseline:r,range:this.scale.range}),!t||this.animationManager.isSkipped())this.resetSelectionNodes();else{const g=zX(a.map(f=>f.datum.tickId),s.ticks.map(f=>f.tickId));this.animationState.transition("update",g)}this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled;const{enabled:l,stroke:c,width:p}=this.line;this.lineNode.setProperties({stroke:c,strokeWidth:l?p:0}),this.updateLabels(),this.updateGridLines(),this.updateTickLines(),this.updateTitle(!s.ticks.length),this.updateCrossLines()}getAxisLineCoordinates(){const[t,i]=Ks(this.range);return{x:0,y1:t,y2:i}}getTickLineCoordinates(t){const s=this.label.getSideFlag()*this.getTickSize(),n=Math.min(0,s),r=n+Math.abs(s),o=t.translationY;return{x1:n,x2:r,y:o}}getLabelStyles(t,i){const{label:s}=this,n={color:s.color,spacing:s.spacing,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight};let r;s.itemStyler&&(r=this.moduleCtx.callbackCache.call(s.itemStyler,{...t,...n}));const{color:o,fontFamily:a,fontSize:l,fontStyle:c,fontWeight:p,spacing:g}=Et(r,i,n);return{fill:o,fontFamily:a,fontSize:l,fontStyle:c,fontWeight:p,spacing:g}}getTickLabelProps(t,i){const{label:s}=this,{combinedRotation:n,textBaseline:r,textAlign:o,range:a}=i,l=t.tickLabel,p=s.getSideFlag()*(this.getTickSize()+s.spacing+this.seriesAreaPadding),g=l!==""&&l!=null;return{...this.getLabelStyles({value:t.tickLabel}),tickId:t.tickId,rotation:n,rotationCenterX:p,translationY:t.translationY,text:l,textAlign:o,textBaseline:r,visible:g,x:p,y:0,range:a}}getTickSize(){return this.tick.enabled?this.tick.size:0}setTitleProps(t,i){const{title:s}=this;if(!s.enabled){t.enabled=!1,t.node.visible=!1;return}t.color=s.color,t.fontFamily=s.fontFamily,t.fontSize=s.fontSize,t.fontStyle=s.fontStyle,t.fontWeight=s.fontWeight,t.enabled=s.enabled,t.wrapping=s.wrapping;const n=t.node,r=(s.spacing??0)+i.spacing,o=this.label.getSideFlag(),a=Qt(this.rotation),l=o===-1&&a>Math.PI&&a<Math.PI*2?-1:1,c=l*o*Math.PI/2,p=l===1?"bottom":"top",{range:g}=this,f=Math.floor(l*o*(g[0]+g[1])/2),y=Math.floor(o===-1?l*-r:-r),{callbackCache:C}=this.moduleCtx,{formatter:x=b=>b.defaultValue}=s,M=C.call(x,this.getTitleFormatterParams());t.text=M,n.setProperties({visible:!0,text:M,textBaseline:p,x:f,y,rotation:c})}processData(){this._domainCalculated=!1}calculateLayout(t,i){var g;const{rotation:s,parallelFlipRotation:n,regularFlipRotation:r}=this.calculateRotations(),o=this.label.getSideFlag();this.updateScale({domain:t,skipDomainCalculation:this._domainCalculated}),this._domainCalculated=t==null;const a=this.processTicks(i,n,r);this.tickGenerationResult=a.tickGenerationResult;const l=Ue.merge(a.boxes),c=this.getTransformBox(l),p=this.isAnySeriesActive();return this.crossLines.forEach(f=>{var C;var y;f.sideFlag=-o,f.direction=s===-Math.PI/2?"x":"y",f instanceof Un&&((y=f.label).parallel??(y.parallel=this.label.parallel)),f.parallelFlipRotation=n,f.regularFlipRotation=r,(C=f.calculateLayout)==null||C.call(f,p,this.reverse)}),{primaryTickCount:((g=a.tickGenerationResult)==null?void 0:g.primaryTickCount)??i,bbox:c}}processTicks(t,i,s){var R;const n=this.label.getSideFlag(),r=n*(this.getTickSize()+this.label.spacing+this.seriesAreaPadding),a=this.label.enabled||this.tick.enabled||this.gridLine.enabled?this.generateTicks({primaryTickCount:t,parallelFlipRotation:i,regularFlipRotation:s,labelX:r,sideFlag:n}):xQ,{tickData:l,combinedRotation:c,textBaseline:p,textAlign:g}=a;this.updateLayoutState(l.fractionDigits);const f=[],{x:y,y1:C,y2:x}=this.getAxisLineCoordinates(),M=new Ue(y+Math.min(n*this.seriesAreaPadding,0),C,this.seriesAreaPadding,x-C);f.push(M),this.tick.enabled&&l.ticks.forEach(I=>{const{x1:P,x2:k,y:_}=this.getTickLineCoordinates(I),B=new Ue(P,_,k-P,0);f.push(B)});const{tempText:b}=this;if(this.label.enabled&&l.ticks.forEach(I=>{const P=this.getTickLabelProps(I,{combinedRotation:c,textAlign:g,textBaseline:p,range:this.scale.range});if(!P.visible)return;b.setProperties({...P,translationY:Math.round(I.translationY)});const k=b.getBBox();k&&f.push(k)}),(R=this.title)!=null&&R.enabled){const I=Ue.merge(f).width;this.setTitleProps(this.tempCaption,{spacing:I});const P=this.tempCaption.node.getBBox();P&&f.push(P)}return{tickGenerationResult:a,boxes:f}}updateLayoutState(t){this.layout.label={fractionDigits:t,spacing:this.label.spacing,format:this.label.format}}getTransformBox(t){const i=new Io,{rotation:s,translationX:n,translationY:r}=this.getAxisTransform();return Io.updateTransformMatrix(i,1,1,s,n,r),i.transformBBox(t)}setDomain(t){this.dataDomain=this.normaliseDataDomain(t),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(t){const i=t==null?void 0:t.domain;((t==null?void 0:t.skipDomainCalculation)??!1)||(i?this.setDomain(i):this.calculateDomain()),this.updateRange(),this.scale.interval=this.interval.step,hi.is(this.scale)&&(this.scale.nice=this.nice,this.scale.update())}calculateRotations(){const t=Ys(this.rotation),i=Qt(t),s=Qt(t-Math.PI/2);return{rotation:t,parallelFlipRotation:i,regularFlipRotation:s}}generateTicks({primaryTickCount:t,parallelFlipRotation:i,regularFlipRotation:s,labelX:n,sideFlag:r}){const{scale:o,interval:{minSpacing:a,maxSpacing:l},label:{parallel:c,rotation:p,fontFamily:g,fontSize:f,fontStyle:y,fontWeight:C}}=this,x=t!==void 0,{defaultRotation:M,configuredRotation:b,parallelFlipFlag:R,regularFlipFlag:I}=rC({rotation:p,parallel:c,regularFlipRotation:s,parallelFlipRotation:i}),P=b+M,k=new Io,{maxTickCount:_}=this.estimateTickCount(a,l),H=!(hi.is(o)||xo.is(o))||isNaN(_)?10:_;let V=cb(c,b,0,r,I);const U=$X(c,b,r,R),$=Ei.toFontString({fontFamily:g,fontSize:f,fontStyle:y,fontWeight:C}),te=Tl.getMeasurer({font:$}),Ce={fontFamily:g,fontSize:f,fontStyle:y,fontWeight:C,textBaseline:U,textAlign:V};let be={ticks:[],rawTicks:[],fractionDigits:0,labelCount:0},Re=0,oe=0,Se=!0,K=[],pe=!1;for(;Se&&Re<=H&&!pe;){oe=0,V=cb(c,b,0,r,I);const W=this.getTickStrategies({secondaryAxis:x,index:Re});for(const Q of W){({tickData:be,index:Re,autoRotation:oe,terminate:pe}=Q({index:Re,tickData:be,textProps:Ce,labelOverlap:Se,terminate:pe,primaryTickCount:t}));const ve=b!==0||oe!==0,se=P+oe,ye=YX(this.label.minSpacing,ve);Io.updateTransformMatrix(k,1,1,se,0,0),V=cb(c,b,oe,r,I),K=ZX(be.ticks,n,k,te),Se=this.label.avoidCollisions?GX(K,ye):!1}}const q=M+b+oe;return!x&&be.rawTicks.length>0&&(t=be.rawTicks.length),{tickData:be,primaryTickCount:t,combinedRotation:q,textBaseline:U,textAlign:V,labelData:K}}getTickStrategies({index:t,secondaryAxis:i}){const{scale:s,label:n}=this,{minSpacing:r}=this.interval,o=hi.is(s)||xo.is(s),a=n.enabled&&n.avoidCollisions,l=!o&&t!==0&&a,c=n.autoRotate===!0&&n.rotation===void 0,p=[];let g;this.interval.values?g=3:i?g=1:l?g=2:g=0;const f=({index:y,tickData:C,primaryTickCount:x,terminate:M})=>this.createTickData(g,y,C,M,x);if(p.push(f),!o&&!isNaN(r)){const y=({index:C,tickData:x,primaryTickCount:M,terminate:b})=>this.createTickData(2,C,x,b,M);p.push(y)}if(a&&c){const y=({index:C,tickData:x,labelOverlap:M,terminate:b})=>({index:C,tickData:x,autoRotation:M?Qt(Ys(this.label.autoRotateAngle??0)):0,terminate:b});p.push(y)}return p}createTickData(t,i,s,n,r){const{scale:o}=this,{step:a,values:l,minSpacing:c,maxSpacing:p}=this.interval,{maxTickCount:g,minTickCount:f,tickCount:y}=this.estimateTickCount(c,p),C=hi.is(o)||xo.is(o),x=!C||isNaN(g)?10:g,M=R=>C?Math.max(y-R,f):g,b=a==null&&l==null&&M(i)>f&&(C||t===2);for(;i<=x;){const R=s.rawTicks;if(s=this.getTicks({tickGenerationType:t,previousTicks:R,minTickCount:f,maxTickCount:g,primaryTickCount:r,tickCount:M(i)}),i++,!b||!zc(s.rawTicks,R))break}return n||(n=a!=null||l!=null),{tickData:s,index:i,autoRotation:0,terminate:n}}getTicks({tickGenerationType:t,previousTicks:i,tickCount:s,minTickCount:n,maxTickCount:r,primaryTickCount:o}){const{range:a,scale:l,visibleRange:c}=this,p=PR();let g;switch(t){case 3:if(g=this.interval.values,hi.is(l)){const[I,P]=Ks(l.getDomain().map(Number));g=g.filter(k=>k>=I&&k<=P).sort((k,_)=>k-_)}break;case 1:hi.is(l)?g=this.updateSecondaryAxisTicks(o):g=this.createTicks(s,n,r);break;case 2:g=this.filterTicks(i,s);break;default:g=this.createTicks(s,n,r);break}const f=g.reduce((I,P)=>Math.max(I,typeof P=="number"?VC(P):0),0),y=(l.bandwidth??0)/2,C=[];let x=0;const M=Math.max(0,Math.floor(c[0]*g.length)),b=Math.min(g.length,Math.ceil(c[1]*g.length)),R=g.slice(M,b);this.onFormatChange(R,f,g,this.label.format);for(let I=0;I<R.length;I++){const P=R[I],k=l.convert(P)+y;if(a.length>0&&!this.inRange(k,.001))continue;const _=this.formatTick(P,M+I,f);C.push({tick:P,tickId:p(_),tickLabel:_,translationY:Math.floor(k)}),!(_===""||_==null)&&x++}return{rawTicks:g,fractionDigits:f,ticks:C,labelCount:x}}filterTicks(t,i){const{minSpacing:s,maxSpacing:n}=this.interval,o=!isNaN(s)||!isNaN(n)?Math.ceil(t.length/i):2;return t.filter((a,l)=>l%o===0)}createTicks(t,i,s){var r;const{scale:n}=this;return t&&(hi.is(n)||xo.is(n))&&(n.tickCount=t,n.minTickCount=i??0,n.maxTickCount=s??1/0),((r=n.ticks)==null?void 0:r.call(n))??[]}estimateTickCount(t,i){return dO(this.calculateRangeWithBleed(),t,i,hi.defaultTickCount,this.defaultTickMinSpacing)}updateCrossLines(){const t=this.isAnySeriesActive();this.crossLines.forEach(i=>{i.update(t)})}updateTickLines(){const{tick:t,label:i}=this,s=i.getSideFlag();this.tickLineGroupSelection.each((n,r)=>{n.strokeWidth=r.tickWidth??t.width,n.stroke=r.tickStroke??t.stroke,n.x1=s*(r.tickSize??this.getTickSize()),n.x2=0})}calculateAvailableRange(){return Ef(this.range)}calculateRangeWithBleed(){return iR(this.calculateAvailableRange()/Ef(this.visibleRange),2)}calculateDomain(){const{includeInvisibleDomains:t,boundSeries:i,direction:s}=this,n=t?i:i.filter(o=>o.isEnabled()),r=n.length===1?n[0].getDomain(s):n.flatMap(o=>o.getDomain(s));this.setDomain(r)}getAxisTransform(){return{rotation:Ys(this.rotation),translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){const{crossLineRangeGroup:t,crossLineLineGroup:i,crossLineLabelGroup:s,axisGroup:n,gridGroup:r,translation:o}=this,{rotation:a}=this.calculateRotations(),l=Math.floor(o.x),c=Math.floor(o.y);t.setProperties({rotation:a,translationX:l,translationY:c}),i.setProperties({rotation:a,translationX:l,translationY:c}),s.setProperties({rotation:a,translationX:l,translationY:c}),r.setProperties({rotation:a,translationX:l,translationY:c}),n.datum=this.getAxisTransform()}updateSecondaryAxisTicks(t){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(t,i,s){const n=o=>o.tickId,r=i.map(o=>this.getTickLabelProps(o,s));this.lineNode.datum=t,this.gridLineGroupSelection.update(this.gridLength?i:[],void 0,n),this.tickLineGroupSelection.update(i,void 0,n),this.tickLabelGroupSelection.update(r,void 0,n)}updateGridLines(){const t=this.label.getSideFlag(),{gridLine:{style:i,width:s},gridPadding:n,gridLength:r}=this;r===0||i.length===0||this.gridLineGroupSelection.each((o,a,l)=>{const{stroke:c,lineDash:p}=i[l%i.length];o.setProperties({x1:n,x2:-t*r+n,stroke:c,strokeWidth:s,lineDash:p})})}updateLabels(){this.label.enabled&&this.tickLabelGroupSelection.each((t,i)=>{t.setProperties(i,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}updateTitle(t,i){const{title:s,lineNode:n,tickLineGroup:r,tickLabelGroup:o}=this;s.enabled&&!t&&i==null&&(i=lt.computeChildrenBBox([r,o,n]).width+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)),i??(i=0),this.setTitleProps(s.caption,{spacing:i})}formatTick(t,i,s){const{labelFormatter:n,label:{formatter:r},moduleCtx:{callbackCache:o}}=this;let a;return r?a=o.call(r,{value:t,index:i,fractionDigits:s}):n&&(a=o.call(n,t)),String(a??t)}formatDatum(t){const{label:{formatter:i},moduleCtx:{callbackCache:s},datumFormatter:n=this.labelFormatter}=this;let r;return i?r=s.call(i,{value:t,index:NaN}):n?r=s.call(n,t):bi(t)&&(r=t.filter(Boolean).join(" - ")),String(r??t)}getScaleValueFormatter(t){if(t&&this.scale.tickFormat)try{return this.scale.tickFormat({specifier:t})}catch{_e.warnOnce(`the format string ${t} is invalid, ignoring.`)}return i=>this.formatDatum(i)}getBBox(){return this.axisGroup.getBBox()}initCrossLine(t){t.scale=this.scale,t.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(t=>this.includeInvisibleDomains||t.isEnabled())}clipTickLines(t,i,s,n){this.tickLineGroup.setClipRect(new Ue(t,i,s,n))}clipGrid(t,i,s,n){this.gridGroup.setClipRect(new Ue(t,i,s,n))}getTitleFormatterParams(){var s;const{direction:t}=this,i=[];for(const n of this.boundSeries){const r=n.getKeys(t),o=n.getNames(t);for(let a=0;a<r.length;a++)i.push({key:r[a],name:o[a]})}return{direction:t,boundSeries:i,defaultValue:(s=this.title)==null?void 0:s.text}}normaliseDataDomain(t){return{domain:[...t],clipped:!1}}getLayoutState(){return{id:this.id,rect:this.getBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize(),direction:this.direction,domain:this.dataDomain.domain,scale:this.scale,...this.layout}}getModuleMap(){return this.moduleMap}createModuleContext(){return this.axisContext??(this.axisContext=this.createAxisContext()),{...this.moduleCtx,parent:this.axisContext}}createAxisContext(){const{scale:t}=this;return{axisId:this.id,scale:this.scale,direction:this.direction,continuous:hi.is(t)||xo.is(t),getCanvasBounds:()=>ji.toCanvas(this.axisGroup),seriesKeyProperties:()=>this.boundSeries.reduce((i,s)=>(s.getKeyProperties(this.direction).forEach(r=>{i.indexOf(r)<0&&i.push(r)}),i),[]),scaleValueFormatter:i=>this.getScaleValueFormatter(i),scaleInvert:xo.is(t)?i=>{var s;return(s=t.invertNearest)==null?void 0:s.call(t,i)}:i=>{var s;return(s=t.invert)==null?void 0:s.call(t,i)},scaleInvertNearest:i=>{var s;return(s=t.invertNearest)==null?void 0:s.call(t,i)},attachLabel:i=>this.attachLabel(i),inRange:(i,s)=>this.inRange(i,s)}}animateReadyUpdate(t){const{animationManager:i}=this.moduleCtx,s=RM(this),n=UO(s);Oi(this.id,"axis-group",i,[this.axisGroup],n.group),Oi(this.id,"line",i,[this.lineNode],n.line),Oi(this.id,"line-paths",i,[this.gridLineGroupSelection,this.tickLineGroupSelection],n.tick,(r,o)=>o.tickId,t),Oi(this.id,"tick-labels",i,[this.tickLabelGroupSelection],n.label,(r,o)=>o.tickId,t)}resetSelectionNodes(){const t=RM(this);ss([this.axisGroup],KO()),ss([this.gridLineGroupSelection,this.tickLineGroupSelection],YO(t)),ss([this.tickLabelGroupSelection],$O()),ss([this.lineNode],ZO())}isReversed(){return this.reverse}};Al.defaultTickMinSpacing=50;Al.CrossLineConstructor=Un;A([O(nt)],Al.prototype,"nice",2);A([O(nt)],Al.prototype,"reverse",2);A([O(qN)],Al.prototype,"keys",2);A([O(Ye)],Al.prototype,"interval",2);A([O(Ye)],Al.prototype,"title",2);A([Oh((e,t,i)=>e.onGridLengthChange(t,i))],Al.prototype,"gridLength",2);var NR=Al,OR=class extends ys{constructor(){super(...arguments),this.autoRotateAngle=335}};A([O(nt,{optional:!0})],OR.prototype,"autoRotate",2);A([O(_t)],OR.prototype,"autoRotateAngle",2);var _R=class QO extends NR{static is(t){return t instanceof QO}get direction(){return this.position==="top"||this.position==="bottom"?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1;break}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(t){this.updateDirection(),super.update(t)}calculateLayout(t,i){return this.updateDirection(),super.calculateLayout(t,i)}createAxisContext(){return{...super.createAxisContext(),position:this.position}}createLabel(){return new OR}};A([O(Ge,{optional:!0})],_R.prototype,"thickness",2);A([O(vR)],_R.prototype,"position",2);var wh=_R,Rp=class qO extends wh{constructor(t,i=new iu){super(t,i),this.groupPaddingInner=.1,this.categoryAnimatable=!0,this.includeInvisibleDomains=!0}static is(t){return t instanceof qO}domainOrderedToNormalizedDomain(t,i){let s=-1;for(const n of t){const r=i.indexOf(n);if(r===-1)s=1/0;else{if(r<=s)return!1;s=r}}return!0}calculateDomain(){let t;const i=new Set;let s=!0;for(const n of this.boundSeries){if(!this.includeInvisibleDomains&&!n.isEnabled())continue;const r=n.getDomain(this.direction);i.has(r)||(i.add(r),t==null?t=this.normaliseDataDomain(r).domain:(s&&(s=this.domainOrderedToNormalizedDomain(r,t)),t=this.normaliseDataDomain([...t,...r]).domain))}t??(t=[]),this.setDomain(t),this.categoryAnimatable=s}update(){super.update(),this.categoryAnimatable||this.moduleCtx.animationManager.skip()}normaliseDataDomain(t){const i=[],s=new Set;for(const n of t){const r=n instanceof Date?n.getTime():n;s.has(r)||(s.add(r),i.push(n))}return{domain:i,clipped:!1}}updateScale(t){let{paddingInner:i,paddingOuter:s}=this;if(!Kt(i)||!Kt(s)){const n=this.reduceBandScalePadding();i??(i=n.inner),s??(s=n.outer)}this.scale.paddingInner=i??0,this.scale.paddingOuter=s??0,super.updateScale(t)}reduceBandScalePadding(){return this.boundSeries.reduce((t,i)=>{var n;const s=(n=i.getBandScalePadding)==null?void 0:n.call(i);return s&&(t.inner>s.inner&&(t.inner=s.inner),t.outer<s.outer&&(t.outer=s.outer)),t},{inner:1/0,outer:-1/0})}};Rp.className="CategoryAxis";Rp.type="category";A([O($t)],Rp.prototype,"groupPaddingInner",2);A([O($t,{optional:!0})],Rp.prototype,"paddingInner",2);A([O($t,{optional:!0})],Rp.prototype,"paddingOuter",2);var Dp=Rp,oS=class{constructor(){this.destroyFns=[]}destroy(){for(const e of this.destroyFns)e()}},JO=class{constructor(){this.modules=[],this.dependencies=new Map,this.modulesByOptionKey=new Map}register(...e){for(const t of e){this.registerDependencies(t);const i=this.modules.find(s=>t.type===s.type&&("optionsKey"in t&&"optionsKey"in s?t.optionsKey===s.optionsKey:!0)&&t.identifier===s.identifier);if(i){if(t.packageType==="enterprise"&&i.packageType==="community"){const s=this.modules.indexOf(i);this.modules.splice(s,1,t),"optionsKey"in t&&this.modulesByOptionKey.set(t.optionsKey,t)}}else this.modules.push(t),"optionsKey"in t&&this.modulesByOptionKey.set(t.optionsKey,t)}}hasEnterpriseModules(){return this.modules.some(e=>e.packageType==="enterprise")}*byType(...e){const t=new Set,i=this.modules.filter(r=>e.includes(r.type)),s=r=>{const o=this.dependencies.get(r);return(o==null?void 0:o.flatMap(s).concat(o))??[]},n=[];for(const r of i){const o="optionsKey"in r?r.optionsKey:r.contextKey;if(!t.has(o)){for(const a of s(o)){if(t.has(a))continue;const l=this.modulesByOptionKey.get(a);if(!l){n.push(a);continue}e.includes(l.type)&&(yield l,t.add(a))}yield r,t.add(o)}}if(n.length>0)throw new Error(`Could not resolve module dependencies: ${n}`)}registerDependencies(e){if(e.dependencies==null||e.dependencies.length===0)return;const t="optionsKey"in e?e.optionsKey:e.contextKey;this.dependencies.set(t,e.dependencies)}},ca=new JO,YT=class{constructor(){this.queue=[]}await(e=50){return new Promise(t=>{const i=()=>{clearTimeout(n),t(!0)},n=setTimeout(()=>{const r=this.queue.indexOf(i);r<0||(this.queue.splice(r,1),t(!1))},e);this.queue.push(i)})}notify(){this.queue.splice(0).forEach(e=>e())}};function bQ(){return new Promise(e=>{setTimeout(e,0)})}var MQ=class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(e){return new Promise(t=>{this.acquireQueue.push([e,t]),this.available&&this.dispatchNext().catch(i=>_e.errorOnce(i))})}async acquireImmediately(e){return this.available?(await this.acquire(e),!0):!1}async waitForClearAcquireQueue(){return this.acquire(()=>Promise.resolve(void 0))}async dispatchNext(){this.available=!1;let[e,t]=this.acquireQueue.shift()??[];for(;e;){try{await e(),t==null||t()}catch(i){_e.error("mutex callback error",i),t==null||t()}[e,t]=this.acquireQueue.shift()??[]}this.available=!0}},e_=class{constructor(){this.eventListeners=new Map}addEventListener(e,t){if(typeof t!="function")throw new Error("AG Charts - listener must be a Function");const i=this.eventListeners.get(e);i?i.add(t):this.eventListeners.set(e,new Set([t]))}removeEventListener(e,t){var i;(i=this.eventListeners.get(e))==null||i.delete(t),this.eventListeners.size===0&&this.eventListeners.delete(e)}hasEventListener(e){return this.eventListeners.has(e)}clearEventListeners(){this.eventListeners.clear()}fireEvent(e){var t;(t=this.eventListeners.get(e.type))==null||t.forEach(i=>i(e))}},nu=class extends yt{constructor(e=0,t=e,i=e,s=t){super(),this.top=e,this.right=t,this.bottom=i,this.left=s}};A([O(Ge)],nu.prototype,"top",2);A([O(Ge)],nu.prototype,"right",2);A([O(Ge)],nu.prototype,"bottom",2);A([O(Ge)],nu.prototype,"left",2);function RQ(e){return t_((t,i)=>Mi().requestAnimationFrame(t),e)}function DQ(e){return t_((t,i=0)=>{i===0?queueMicrotask(t):setTimeout(t,i)},e)}function t_(e,t){let i=0,s=!1,n,r;const o=()=>s,a=()=>{s=!1,r==null||r(),r=void 0,n=void 0,i>0&&e(l)},l=()=>{const c=i;i=0,s=!0;const p=t({count:c});if(!p){a();return}p.then(a,a)};return{schedule(c){i===0&&!o()&&e(l,c),i++},async await(){if(o())for(n==null&&(n=new Promise(c=>{r=c}));o();)await n}}}var i_=class{constructor(){this.events=new Map}on(e,t){var i;return this.events.has(e)||this.events.set(e,new Set),(i=this.events.get(e))==null||i.add(t),()=>this.off(e,t)}off(e,t){const i=this.events.get(e);i&&(i.delete(t),i.size===0&&this.events.delete(e))}emit(e,t){for(const i of this.events.get(e)??[]){const s=i(t);s&&s.catch(n=>_e.error(n))}}clear(e){e?this.events.delete(e):this.events.clear()}},BR=(e=>(e[e.Caption=0]="Caption",e[e.Legend=1]="Legend",e[e.ToolbarLeft=2]="ToolbarLeft",e[e.ToolbarBottom=3]="ToolbarBottom",e[e.Navigator=4]="Navigator",e[e.Overlay=5]="Overlay",e))(BR||{}),s_=class{constructor(){this.events=new i_,this.elements=new Map}addListener(e,t){return this.events.on(e,t)}registerElement(e,t){return this.elements.has(e)?this.elements.get(e).add(t):this.elements.set(e,new Set([t])),()=>{var i;return(i=this.elements.get(e))==null?void 0:i.delete(t)}}createContext(e,t){var s;const i=new EQ(e,t);for(const n of Object.values(BR))typeof n=="number"&&((s=this.elements.get(n))==null||s.forEach(r=>{var o;(o=r(i))==null||o.catch(a=>_e.error(a))}));return i}emitLayoutComplete(e,t){const i="layout:complete",{width:s,height:n}=e;this.events.emit(i,{type:i,axes:t.axes??[],chart:{width:s,height:n},clipSeries:t.clipSeries??!1,series:t.series})}},EQ=class{constructor(e,t){this.width=e,this.height=t,this.layoutBox=new Ue(0,0,e,t)}},aS=class{constructor(){this.title=new li,this.subtitle=new li,this.footnote=new li}positionCaptions(e){const{title:t,subtitle:i,footnote:s}=this,n=e.layoutBox.height/10;if(t.enabled){const{spacing:r=i.enabled?li.SMALL_PADDING:li.LARGE_PADDING}=t;this.positionCaption("top",t,e.layoutBox,n),this.shrinkLayoutByCaption("top",t,e.layoutBox,r)}i.enabled&&(this.positionCaption("top",i,e.layoutBox,n),this.shrinkLayoutByCaption("top",i,e.layoutBox,i.spacing)),s.enabled&&(this.positionCaption("bottom",s,e.layoutBox,n),this.shrinkLayoutByCaption("bottom",s,e.layoutBox,s.spacing))}positionAbsoluteCaptions(e){const{title:t,subtitle:i,footnote:s}=this,{rect:n}=e.series;for(const r of[t,i,s])if(r.layoutStyle==="overlay"){if(r.textAlign==="left")r.node.x=n.x+r.padding;else if(r.textAlign==="right"){const o=r.node.getBBox();r.node.x=n.x+n.width-o.width-r.padding}}}computeX(e,t){return e==="left"?t.x:e==="right"?t.x+t.width:t.x+t.width/2}positionCaption(e,t,i,s){const n=Math.max(Ei.getLineHeight(t.fontSize),s);t.node.x=this.computeX(t.textAlign,i)+t.padding,t.node.y=i.y+(e==="top"?0:i.height)+t.padding,t.node.textBaseline=e,t.computeTextWrap(i.width,n)}shrinkLayoutByCaption(e,t,i,s=0){if(t.layoutStyle==="block"){const n=t.node.getBBox();i.shrink(Math.ceil(e==="top"?n.y-i.y+n.height+s:i.y+i.height-n.y+s),e)}}};A([O(Ye)],aS.prototype,"title",2);A([O(Ye)],aS.prototype,"subtitle",2);A([O(Ye)],aS.prototype,"footnote",2);var IQ=["candlestick","hollow-candlestick","ohlc","line","step-line","hlc","high-low"],LQ=class{constructor(e){this.chartService=e,this.mementoOriginatorKey="chartType"}createMemento(){var t,i;let e=(i=(t=this.chartService.publicApi)==null?void 0:t.getOptions())==null?void 0:i.chartType;return e==null&&(e="candlestick"),e}guardMemento(e){return e==null||Vn(e)&&hR(IQ,e)}restoreMemento(e,t,i){var n;if(i==null)return;const s={chartType:i};(n=this.chartService.publicApi)==null||n.updateDelta(s).catch(r=>_e.error("error restoring state",r))}},Ma=class{constructor(){this.registeredListeners=new Map}addListener(e,t){const i={symbol:Symbol(e),handler:t};return this.registeredListeners.has(e)?this.registeredListeners.get(e).push(i):this.registeredListeners.set(e,[i]),()=>this.removeListener(i.symbol)}removeListener(e){for(const[t,i]of this.registeredListeners.entries()){const s=i.findIndex(n=>n.symbol===e);if(s>=0){i.splice(s,1),i.length===0&&this.registeredListeners.delete(t);break}}}dispatch(e,...t){for(const i of this.getListenersByType(e))try{i.handler(...t)}catch(s){_e.errorOnce(s)}}dispatchWrapHandlers(e,t,...i){for(const s of this.getListenersByType(e))try{t(s.handler,...i)}catch(n){_e.errorOnce(n)}}getListenersByType(e){return this.registeredListeners.get(e)??[]}destroy(){this.registeredListeners.clear()}},Ra=class{constructor(){this.listeners=new Ma,this.destroyFns=[]}addListener(e,t){return this.listeners.addListener(e,t)}destroy(){this.listeners.destroy(),this.destroyFns.forEach(e=>e())}},GR=(e=>(e[e.Default=32]="Default",e[e.ZoomDrag=16]="ZoomDrag",e[e.Annotations=8]="Annotations",e[e.ContextMenu=4]="ContextMenu",e[e.Animation=2]="Animation",e[e.AnnotationsSelected=1]="AnnotationsSelected",e[e.All=63]="All",e))(GR||{}),n_=class extends Ra{addListener(e,t,i=32){return super.addListener(e,s=>{this.getState()&i&&t(s)})}},r_=class{constructor(){this.destroyFns=[]}destroy(){this.destroyFns.forEach(e=>e()),this.destroyFns.length=0}setFns(e){this.destroy(),this.destroyFns=e}push(...e){this.destroyFns.push(...e)}},_f="11.0.4",$T=Symbol("previous-memento-not-found"),TQ=class{constructor(e){this.history=[],this.historyIndex=-1,this.originators=new Map,this.clearState=new Map,this.maxHistoryLength=100,this.debug=ci.create(!0,"history"),this.destroyFns=new r_,this.destroyFns.setFns([e.addListener("undo",this.undo.bind(this),63),e.addListener("redo",this.redo.bind(this),63)])}destroy(){this.destroyFns.destroy()}addMementoOriginator(e){this.originators.set(e.mementoOriginatorKey,e),this.clearState.set(e.mementoOriginatorKey,e.createMemento()),this.debugEvent("History add originator:",e.mementoOriginatorKey)}clear(){this.debug("History clear:",Object.keys(this.originators)),this.history=[],this.historyIndex=-1;for(const[e,t]of this.originators.entries())this.clearState.set(e,t.createMemento())}record(e,...t){this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.length>this.maxHistoryLength&&(this.history=this.history.slice(-this.maxHistoryLength));const i=new Map;for(const s of t){if(!this.originators.has(s.mementoOriginatorKey))throw new Error(`Originator [${s.mementoOriginatorKey}] has not been added to the HistoryManager.`);i.set(s.mementoOriginatorKey,s.createMemento())}this.history.push({label:e,mementos:i}),this.historyIndex=this.history.length-1,this.debugEvent(`History record: [${e}]`)}undo(){const e=this.history[this.historyIndex];if(e){for(const t of e.mementos.keys()){const i=this.findPreviousMemento(t);if(i===$T)throw new Error(`Could not find previous memento for [${t}].`);this.restoreMemento(t,i)}this.historyIndex-=1,this.debugEvent(`History undo: [${e.label}]`)}}redo(){const e=this.history[this.historyIndex+1];if(e){for(const[t,i]of e.mementos.entries())this.restoreMemento(t,i);this.historyIndex+=1,this.debugEvent(`History redo: [${e.label}]`)}}findPreviousMemento(e){for(let t=this.historyIndex-1;t>=0;t--)if(this.history[t].mementos.has(e))return this.history[t].mementos.get(e);return this.clearState.has(e)?this.clearState.get(e):$T}restoreMemento(e,t){var i;(i=this.originators.get(e))==null||i.restoreMemento(_f,_f,t)}debugEvent(...e){this.debug(...e,this.history.map((t,i)=>i===this.historyIndex?`** ${t.label} **`:t.label))}},o_=class EM{constructor(t){this.version=t.split("-")[0]}save(...t){const i={version:this.version};for(const s of Object.values(t))i[s.mementoOriginatorKey]=this.encode(s,s.createMemento());return i}restore(t,...i){if(typeof t!="object"){_e.warnOnce(`Could not restore data of type [${typeof t}], expecting an object, ignoring.`);return}if(t==null){_e.warnOnce("Could not restore data of type [null], expecting an object, ignoring.");return}if(!("version"in t)||typeof t.version!="string"){_e.warnOnce("Could not restore data, missing [version] string in object, ignoring.");return}for(const s of i){const n=this.decode(s,t[s.mementoOriginatorKey]);if(!s.guardMemento(n)){_e.warnOnce(`Could not restore [${s.mementoOriginatorKey}] data, value was invalid, ignoring.`,n);return}s.restoreMemento(this.version,t.version,n)}}encode(t,i){try{return JSON.parse(JSON.stringify(i,EM.encodeTypes))}catch(s){throw new Error(`Failed to encode [${t.mementoOriginatorKey}] value [${s}].`,{cause:s})}}decode(t,i){if(i==null)return i;try{return JSON.parse(JSON.stringify(i),EM.decodeTypes)}catch(s){throw new Error(`Failed to decode [${t.mementoOriginatorKey}] value [${s}].`,{cause:s})}}static encodeTypes(t,i){return um(this[t])?{__type:"date",value:this[t].toISOString()}:i}static decodeTypes(t,i){return xn(this[t])&&"__type"in this[t]&&this[t].__type==="date"?new Date(this[t].value):i}},AQ=class{constructor(){this.caretaker=new o_(_f),this.state=new Map}setState(e,t){Sh(this.state.get(e.mementoOriginatorKey),t)||this.setStateAndRestore(e,t)}setStateAndRestore(e,t){this.state.set(e.mementoOriginatorKey,t),this.restoreState(e)}restoreState(e){const{caretaker:t,state:i}=this;if(!i.has(e.mementoOriginatorKey))return;const s=i.get(e.mementoOriginatorKey);t.restore({version:t.version,[e.mementoOriginatorKey]:s},e)}},PQ=`.ag-charts-wrapper,.ag-charts-wrapper:after,.ag-charts-wrapper:before,.ag-charts-wrapper *,.ag-charts-wrapper *:after,.ag-charts-wrapper *:before{box-sizing:border-box}.ag-charts-wrapper{position:relative;user-select:none}.ag-charts-tab-guard{width:0%;height:0%;position:absolute;pointer-events:none}.ag-charts-canvas-center{width:100%;height:100%;position:absolute;touch-action:auto;pointer-events:auto;display:flex;align-items:var(--ag-charts-align);justify-content:var(--ag-charts-justify)}.ag-charts-canvas-container,.ag-charts-canvas{position:relative;user-select:none}.ag-charts-canvas-container>*,.ag-charts-canvas>*{display:block;pointer-events:none}.ag-charts-series-area{outline:none;pointer-events:none;position:absolute}.ag-charts-swapchain{outline:none;opacity:0;pointer-events:auto;position:absolute;width:100%;height:100%}.ag-charts-swapchain:focus-visible{opacity:1}.ag-charts-canvas-proxy,.ag-charts-canvas-overlay{inset:0;pointer-events:none;position:absolute;user-select:none}.ag-charts-canvas-overlay>*{position:absolute;pointer-events:auto}.ag-charts-theme-default,.ag-charts-theme-default-dark{--ag-charts-active-color: var(--ag-active-color, #2196f3);--ag-charts-background-color: var(--ag-background-color, #fff);--ag-charts-foreground-color: var(--ag-foreground-color, #181d1f);--ag-charts-border-color: var(--ag-border-color, #dddddd);--ag-charts-hover-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 12%);--ag-charts-font-family: "Verdana", sans-serif;--ag-charts-font-size: var(--ag-font-size, 14px);--ag-charts-size: var(--ag-grid-size, 8px);--ag-charts-border: var(--ag-charts-border-color) var(--ag-borders, solid 1px);--ag-charts-border-critical: var(--ag-borders-critical, solid 1px);--ag-charts-floating-shadow: 0 2px 8px 0 color-mix(in srgb, black 8%, transparent);--ag-charts-layer-ui-overlay: 5;--ag-charts-layer-tooltip: 4;--ag-charts-layer-toolbar: 3;--ag-charts-layer-crosshair: 2;--ag-charts-layer-annotations: 1;--ag-charts-align: center;--ag-charts-justify: center;--ag-charts-axis-label-background-color: #474747;--ag-charts-axis-label-color: #ffffff;--ag-charts-tooltip-background-color: #fafafb;--ag-charts-tooltip-text-color: var(--ag-charts-foreground-color);--ag-charts-tooltip-border: 1px solid var(--ag-charts-border-color);--ag-charts-content-padding: 8px 12px;--ag-charts-content-gap: 8px;--ag-charts-content-compact-padding: 3px 6px;--ag-charts-tooltip-border-radius: 4px;--ag-charts-toolbar-foreground-color: var(--ag-header-foreground-color, var(--ag-charts-foreground-color));--ag-charts-toolbar-background-color: var( --ag-header-background-color, color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-foreground-color) 2%) );--ag-charts-toolbar-shadow: var(--ag-charts-floating-shadow);--ag-charts-toolbar-size: 34px;--ag-charts-toolbar-size-small: 24px;--ag-charts-toolbar-border: var(--ag-charts-border-critical, solid 1px) var(--ag-charts-border-color);--ag-charts-toolbar-hover-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 12% );--ag-charts-toolbar-focus-color: var(--ag-charts-active-color);--ag-charts-toolbar-active-background-color: var(--ag-charts-toolbar-hover-color);--ag-charts-toolbar-active-color: var(--ag-charts-active-color);--ag-charts-toolbar-disabled-foreground-color: var( --ag-disabled-foreground-color, color-mix(in srgb, transparent, var(--ag-charts-toolbar-foreground-color) 50%) );--ag-charts-toolbar-disabled-background-color: color-mix( in srgb, var(--ag-charts-toolbar-background-color), var(--ag-charts-toolbar-foreground-color) 6% );--ag-charts-toolbar-gap: var(--ag-charts-size);--ag-charts-toolbar-font-size: 13px;--ag-charts-toolbar-font-size-small: 12px;--ag-charts-toolbar-button-padding: 6px;--ag-charts-toolbar-button-padding-small: 1px;--ag-charts-popover-background-color: var(--ag-charts-toolbar-background-color);--ag-charts-popover-foreground-color: var(--ag-charts-toolbar-foreground-color);--ag-charts-popover-border: var(--ag-charts-toolbar-border);--ag-charts-popover-border-radius: var(--ag-border-radius, 4px);--ag-charts-popover-active-color: var(--ag-charts-toolbar-active-color);--ag-charts-popover-hover-color: var(--ag-charts-toolbar-hover-color);--ag-charts-popover-active-background-color: var(--ag-charts-toolbar-active-background-color);--ag-charts-popover-font-size: 14px;--ag-charts-popover-font-size-small: var(--ag-charts-toolbar-font-size-small);--ag-charts-popover-shadow: var(--ag-charts-floating-shadow);--ag-charts-dialog-input-group-label-color: color-mix(in srgb, transparent, var(--ag-charts-foreground-color) 55%);--ag-charts-dialog-tab-color--inactive: color-mix(in srgb, transparent, var(--ag-charts-foreground-color) 55%);--ag-charts-button-radius: var(--ag-border-radius, 4px);--ag-charts-focus-border-color: var(--ag-input-focus-border-color, var(--ag-charts-active-color));--ag-charts-focus-border: solid 1px var(--ag-charts-focus-border-color);--ag-charts-focus-border-shadow: var( --ag-input-focus-box-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-input-focus-border-color, var(--ag-charts-active-color)) 20%) );--ag-charts-focus-box-shadow: var(--box-shadow), 0 0 0 2px #fff8, var(--ag-charts-focus-border-shadow);--ag-charts-icon-font-family: "agChartsDefault";--ag-charts-icon-font-weight: normal;--ag-charts-icon-font-color: color-mix(in srgb, transparent, var(--ag-charts-foreground-color), 90%);--ag-charts-icon-size: 20px;--ag-charts-input-background-color: var(--ag-charts-background-color);--ag-charts-input-background-color--hover: var(--ag-charts-hover-color);--ag-charts-input-background-color--active: var(--ag-charts-hover-color);--ag-charts-input-border-color: var(--ag-charts-border-color);--ag-charts-input-border-color--active: var(--ag-charts-active-color);--ag-charts-input-border-radius: var(--ag-border-radius, 4px);--ag-charts-input-color--active: var(--ag-charts-active-color);--ag-charts-input-focus-outline: var(--ag-charts-focus-border);--ag-charts-input-focus-box-shadow: var(--ag-charts-focus-border-shadow);--ag-charts-input-font-family: var(--ag-charts-font-family);--ag-charts-input-font-size: var(--ag-charts-font-size);--ag-charts-input-padding: 8px;--ag-charts-input-padding-large: 10px;--ag-charts-input-placeholder-color: #888888;--ag-charts-input-spacing: 8px;--ag-charts-input-transition-duration: .25s;--ag-charts-input-transition-duration--fast: .1s;--ag-charts-input-transition-timing-function: ease-out;--ag-charts-input-checkbox-background-color: #babbbc;--ag-charts-input-checkbox-background-color--checked: var(--ag-charts-active-color)}.ag-charts-theme-default-dark{--ag-charts-background-color: var(--ag-background-color, color-mix(in srgb, #fff, #182230 97%));--ag-charts-foreground-color: var(--ag-foreground-color, #fff);--ag-charts-border-color: var(--ag-border-color, rgba(255, 255, 255, .16));--ag-charts-hover-color: color-mix(in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 18%);--ag-charts-floating-shadow: 0 2px 12px 0 color-mix(in srgb, black 33.3%, transparent);--ag-charts-axis-label-background-color: #9caebb;--ag-charts-axis-label-color: #000000;--ag-charts-tooltip-background-color: #28313e;--ag-charts-tooltip-border: 1px solid #474e59;--ag-charts-toolbar-background-color: var(--ag-header-background-color, color-mix(in srgb, #fff, #182230 93%));--ag-charts-toolbar-hover-color: color-mix( in srgb, var(--ag-charts-background-color), var(--ag-charts-active-color) 18% );--ag-charts-dialog-input-group-label-text-color: #ffffff;--ag-charts-focus-border-shadow: var( --ag-input-focus-box-shadow, 0 0 0 3px color-mix(in srgb, transparent, var(--ag-input-focus-border-color, var(--ag-charts-active-color)) 20%) );--ag-charts-input-placeholder-color: #aaaaaa}.ag-charts-icon{display:block;width:var(--ag-charts-icon-size);height:var(--ag-charts-icon-size);speak:none;speak:never;mask:var(--icon) center / contain no-repeat;background-color:currentColor;transition:background-color .25s ease-in-out}.ag-charts-icon-align-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNyAxMGg2djFIN3pNNCA3aDEydjFINHptMSA2aDEwdjFINXoiLz48L3N2Zz4=)}.ag-charts-icon-align-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNNCAxMGg2djFINHptMC0zaDEydjFINHptMCA2aDEwdjFINHoiLz48L3N2Zz4=)}.ag-charts-icon-align-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMTAgMTBoNnYxaC02ek00IDdoMTJ2MUg0em0yIDZoMTB2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-arrow-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTE1LjI5MyA0LjVIMTIuNXYtMUgxN3Y0aC0xVjUuMjA3bC05LjY0NiA5LjY0Ny0uNzA4LS43MDh6IiBmaWxsPSIjMDAwIi8+PHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik03IDE2YTIuNSAyLjUgMCAxIDEtNSAwIDIuNSAyLjUgMCAwIDEgNSAwbS0yLjUgMS41YTEuNSAxLjUgMCAxIDAgMC0zIDEuNSAxLjUgMCAwIDAgMCAzIiBmaWxsPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-arrow-down-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik02IDhMMS41IDhMMTAgMThMMTguNSA4TDE0IDhMMTQgM0w2IDNMNiA4Wk03IDRMNyA5SDMuNjYyNDRMMTAgMTYuNDU2TDE2LjMzNzYgOUwxMyA5TDEzIDRMNyA0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-arrow-up-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik0xNCAxMkgxOC41TDEwIDJMMS41IDEySDZMNi4wMDAwMiAxN0gxNFYxMlpNMTMgMTZWMTFIMTYuMzM3NkwxMCAzLjU0NDA1TDMuNjYyNDQgMTFIN0w3LjAwMDAyIDE2SDEzWiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-callout-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtNC41MTRhMjYgMjYgMCAwIDAtMi4wMTcgMS41NGwtLjMxNC4yNmMtLjU1LjQ1Ny0xLjExNS45MjYtMS43NiAxLjQtLjY2OS40OTEtMS41NjItLjAxMi0xLjU2Mi0uOFYxNEg0LjVBMS41IDEuNSAwIDAgMSAzIDEyLjV6TTQuNSA0YS41LjUgMCAwIDAtLjUuNXY4YS41LjUgMCAwIDAgLjUuNWgxLjgzM3YzLjM3MmEzNiAzNiAwIDAgMCAxLjY3OC0xLjMzOGwuMzItLjI2NWEyNiAyNiAwIDAgMSAyLjIyNS0xLjY4NWwuMTI2LS4wODRIMTUuNWEuNS41IDAgMCAwIC41LS41di04YS41LjUgMCAwIDAtLjUtLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyAxdjNoMnYxMkg3djNINnYtM0g0VjRoMlYxek01IDVoM3YxMEg1ek0xMSAxNFY2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6bTEtN2gzdjZoLTN6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-close{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJtNSA1IDEwIDEwTTUgMTUgMTUgNSIgc3Ryb2tlPSIjMDAwIi8+PC9zdmc+)}.ag-charts-icon-comment-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy41MTMgMy45OTVhNi41IDYuNSAwIDAgMSA2LjA5OCAxMS40MWMtLjU4OC4zOTMtMS4yMTcuNTM2LTEuODI5LjU4NWExMyAxMyAwIDAgMS0xLjI3LjAxN0EyNyAyNyAwIDAgMCAxMCAxNkg0LjVhLjUuNSAwIDAgMS0uNS0uNVYxMHEwLS4yNDctLjAwNy0uNTEzYy0uMDA4LS40MTYtLjAxNi0uODU3LjAxNy0xLjI2OS4wNS0uNjEyLjE5Mi0xLjI0LjU4NS0xLjgzYTYuNSA2LjUgMCAwIDEgMi45MTgtMi4zOTNtMy41Ni42MWE1LjUgNS41IDAgMCAwLTUuNjQ2IDIuMzRjLS4yNjYuMzk3LS4zNzkuODQyLS40MiAxLjM1NC0uMDMuMzYtLjAyMi43MTgtLjAxNSAxLjEwOFE1IDkuNjg5IDUgMTB2NWg1cS4zMTEuMDAxLjU5My4wMDhjLjM5LjAwNy43NDcuMDE1IDEuMTA4LS4wMTUuNTEyLS4wNDEuOTU3LS4xNTQgMS4zNTUtLjQyYTUuNSA1LjUgMCAwIDAtMS45ODMtOS45NjciIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-crosshair-add-line{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-date-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMiAyaDF2MTZIMnptMTUgMGgxdjE2aC0xeiIgZmlsbD0iIzE4MUQxRiIvPjxwYXRoIGQ9Ik0xMy4xNTcgMTFINXYtMWg3Ljc5M0wxMSA4LjIwN2wuNzA3LS43MDcgMy4xODIgMy4xODItMy4xODIgMy4xODItLjcwNy0uNzA3eiIgZmlsbD0iIzAwMCIvPjwvc3ZnPg==)}.ag-charts-icon-date-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNMyAySDJ2MTZoMXptMy41MDcgNC44OUw4LjUgNC44OTVWMTBINXYxaDMuNXY3aDF2LTdoNS4wODhsLTEuOTU3IDEuOTU3LjcwNy43MDcgMy4xODItMy4xODJMMTMuMzM4IDcuM2wtLjcwNy43MDdMMTQuNjI0IDEwSDkuNVY0LjkzMmwxLjk1NyAxLjk1Ny43MDctLjcwN0w4Ljk4MiAzIDUuOCA2LjE4MnoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-delete{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTguNDk2IDguOTk2QS41LjUgMCAwIDEgOSA5LjQ5MnY0YS41LjUgMCAxIDEtMSAuMDA4di00YS41LjUgMCAwIDEgLjQ5Ni0uNTA0TTEyIDkuNWEuNS41IDAgMCAwLTEgMHY0YS41LjUgMCAwIDAgMSAweiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTYgNVYzLjVBMi41IDIuNSAwIDAgMSA4LjUgMWgzQTIuNSAyLjUgMCAwIDEgMTQgMy41VjVoMi44MzNhLjUuNSAwIDAgMSAwIDFIMTV2MTAuMjVjMCAuNDE1LS4wNjYuODYzLS4zIDEuMjIxLS4yNTcuMzk0LS42NzIuNjEyLTEuMi42MTJoLTdjLS41MjggMC0uOTQzLS4yMTgtMS4yLS42MTItLjIzNC0uMzU4LS4zLS44MDYtLjMtMS4yMjFWNkgzLjMzM2EuNS41IDAgMCAxIDAtMXptMS0xLjVBMS41IDEuNSAwIDAgMSA4LjUgMmgzQTEuNSAxLjUgMCAwIDEgMTMgMy41VjVIN3pNNiAxNi4yNVY2aDh2MTAuMjVjMCAuMzM1LS4wNTkuNTU0LS4xMzguNjc1LS4wNTUuMDg1LS4xNC4xNTgtLjM2Mi4xNThoLTdjLS4yMjIgMC0uMzA3LS4wNzMtLjM2Mi0uMTU4LS4wOC0uMTIxLS4xMzgtLjM0LS4xMzgtLjY3NSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-disjoint-channel,.ag-charts-icon-disjoint-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTkuMDI4IDE3LjQ2YTIuMjUgMi4yNSAwIDAgMC00LjA5Mi0xLjg1bC05LjUxMS0yLjM3OGEyLjI1IDIuMjUgMCAxIDAtLjIyNS45NzRsOS40NzUgMi4zNjlhMi4yNTEgMi4yNTEgMCAwIDAgNC4zNTMuODg2bS0xLjY2Mi0xLjk2NWExLjI1IDEuMjUgMCAxIDEtLjg4NSAyLjMzOCAxLjI1IDEuMjUgMCAwIDEgLjg4NS0yLjMzOE00LjM0MyAxMy42NjlhMS4yNSAxLjI1IDAgMSAwLTIuMzM4LS44ODUgMS4yNSAxLjI1IDAgMCAwIDIuMzM4Ljg4NU0zLjk3IDguNzY5YTIuMjUgMi4yNSAwIDAgMCAxLjQ1NS0yLjExbDkuNTExLTIuMzc4YTIuMjUgMi4yNSAwIDEgMC0uMjYtLjk2NUw1LjIgNS42ODVhMi4yNSAyLjI1IDAgMSAwLTEuMjMgMy4wODRtLjM3My0yLjU0N2ExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjc1LTMuNDM4YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-drag-handle{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjcuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjxjaXJjbGUgY3g9IjEzLjc1IiBjeT0iNy43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iMTMuNzUiIGN5PSIxMS43NSIgcj0iLjc1IiBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii41Ii8+PGNpcmNsZSBjeD0iOS43NSIgY3k9IjExLjc1IiByPSIuNzUiIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjUiLz48Y2lyY2xlIGN4PSI1Ljc1IiBjeT0iMTEuNzUiIHI9Ii43NSIgZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuNSIvPjwvc3ZnPg==)}.ag-charts-icon-fibonacci-retracement-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA1aDEydjFIMnoiLz48Y2lyY2xlIGN4PSIxNS43NSIgY3k9IjUuNSIgcj0iMS43NSIgc3Ryb2tlPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC4yNSIgY3k9IjE0LjUiIHI9IjEuNzUiIHN0cm9rZT0iIzAwMCIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik0xOCAxNUg2di0xaDEyem0wLTQuNUgydi0xaDE2eiIvPjwvc3ZnPg==)}.ag-charts-icon-fill-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtOC4wNzEgNC4wNi0uOTI0LS45MjQuNzA3LS43MDcgNy4yODggNy4yODgtNC45NSA0Ljk1YTMuNSAzLjUgMCAwIDEtNC45NSAwbC0xLjQxNC0xLjQxNGEzLjUgMy41IDAgMCAxIDAtNC45NXptLjcwNy43MDhMNC41MzYgOS4wMWEyLjUgMi41IDAgMCAwIDAgMy41MzZMNS45NSAxMy45NmEyLjUgMi41IDAgMCAwIDMuNTM1IDBsNC4yNDMtNC4yNDN6bTYuOSA3LjIwMi0uMzQ1LjM2My0uMzQ0LS4zNjNhLjUuNSAwIDAgMSAuNjg4IDBtLS4zNDUgMS4wOGE4IDggMCAwIDAtLjI4LjMyMyA0LjMgNC4zIDAgMCAwLS40MDkuNTgyYy0uMTEzLjIwMS0uMTQ0LjMyNi0uMTQ0LjM3OGEuODMzLjgzMyAwIDAgMCAxLjY2NyAwYzAtLjA1Mi0uMDMxLS4xNzctLjE0NC0uMzc4YTQuMyA0LjMgMCAwIDAtLjQxLS41ODIgOCA4IDAgMCAwLS4yOC0uMzIybS0uMzQ0LTEuMDguMzQ0LjM2My4zNDQtLjM2My4wMDIuMDAyLjAwNC4wMDQuMDEzLjAxMmE2IDYgMCAwIDEgLjIwNi4yMDhjLjEzMS4xMzYuMzA4LjMyNy40ODUuNTQ1LjE3Ni4yMTUuMzYzLjQ2Ny41MDcuNzI0LjEzNy4yNDMuMjczLjU1My4yNzMuODY4YTEuODMzIDEuODMzIDAgMSAxLTMuNjY3IDBjMC0uMzE1LjEzNi0uNjI1LjI3My0uODY4LjE0NC0uMjU3LjMzLS41MDkuNTA3LS43MjRhOSA5IDAgMCAxIC42NDUtLjcwOGwuMDQ2LS4wNDUuMDEzLS4wMTIuMDA0LS4wMDR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-hollow-candlestick-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1vcGFjaXR5PSIuMTUiIGQ9Ik01IDVoM3YxMEg1eiIvPjxwYXRoIGZpbGw9IiMxMzE3MjIiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTcgMXYzaDJ2MTJIN3YzSDZ2LTNINFY0aDJWMXpNNSA1aDN2MTBINXptNyAyaDN2NmgtM3ptLTEgN1Y2aDJWMy4yNWgxVjZoMnY4aC0ydjIuNzVoLTFWMTR6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-horizontal-line,.ag-charts-icon-horizontal-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNLjUgOS41aDcuMzA2YTIuMjUgMi4yNSAwIDAgMSA0LjM4OCAwSDE5LjV2MWgtNy4zMDZhMi4yNSAyLjI1IDAgMCAxLTQuMzg4IDBILjV6bTkuNSAxLjc1YTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-line-color{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTQuMjQyIDIuNzIyYy0uNjEyIDAtMS4yLjI0My0xLjYzMi42NzVsLTEuMzQzIDEuMzQ0YS41LjUgMCAwIDAtLjExMi4xMTJMNC4wNSAxMS45NTljLS4yMDcuMjA3LS4zNi40Ni0uNDQ2Ljc0di4wMDFsLS42OSAyLjc2N3YuMDAyYS44Mi44MiAwIDAgMCAxLjAyMiAxLjAyMWguMDAybDIuNjM0LS44MjJjLjI4LS4wODUuNTM0LS4yMzcuNzQtLjQ0M2w3LjEwNy03LjEwOGEuNS41IDAgMCAwIC4xMTItLjExMmwxLjM0My0xLjM0M2EyLjMwOCAyLjMwOCAwIDAgMC0xLjYzMi0zLjk0TTE0LjEyMiA3bDEuMDQ0LTEuMDQ1YTEuMzA4IDEuMzA4IDAgMSAwLTEuODQ5LTEuODVMMTIuMjcxIDUuMTV6bS0yLjU1OC0xLjE0Mi02LjgwNyA2LjgwOWEuOC44IDAgMCAwLS4xOTYuMzI1bC0uNzUgMi40NjggMi40Ny0uNzQ5YS44LjggMCAwIDAgLjMyNS0uMTk0bDYuODA4LTYuODF6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTcuMzYyIDQuODczLTQuNTk0IDYuNjU0LTQuODUtMy4zMTctNC4yNTEgNi45NzctLjg1NC0uNTJMNy42MTIgNi43OWw0Ljg5OSAzLjM1IDQuMDI4LTUuODM2eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-line-style-dashed{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDR2MUgyem0xMiAwaDR2MWgtNHpNOCA5aDR2MUg4eiIvPjwvc3ZnPg==)}.ag-charts-icon-line-style-dotted{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48Y2lyY2xlIGN4PSIyLjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iNC41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSI4LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTAuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48Y2lyY2xlIGN4PSIxMi41IiBjeT0iOS41IiByPSIuNSIgZmlsbD0iIzAwMCIvPjxjaXJjbGUgY3g9IjE0LjUiIGN5PSI5LjUiIHI9Ii41IiBmaWxsPSIjMDAwIi8+PGNpcmNsZSBjeD0iMTYuNSIgY3k9IjkuNSIgcj0iLjUiIGZpbGw9IiMwMDAiLz48L3N2Zz4=)}.ag-charts-icon-line-style-solid{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMiA5aDE2djFIMnoiLz48L3N2Zz4=)}.ag-charts-icon-line-with-markers-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTk4IDQuODg4LTMuNTU2IDQuOTE4YTIuMjUgMi4yNSAwIDEgMS0zLjg2Ni43NWwtMS40MzItLjlhMi4yNCAyLjI0IDAgMCAxLTIuMDA5LjQzNWwtMy44MjggNi40MjgtLjg2LS41MTJMNi40NSA5LjYyM2EyLjI1IDIuMjUgMCAxIDEgMy41MS0uNzYxbDEuMzI5LjgzNWEyLjI0IDIuMjQgMCAwIDEgMi41NTctLjQ5N2wzLjU0Mi00Ljg5OHptLTQuOTYgNS4xNTNhMS4yNSAxLjI1IDAgMSAwLS42NCAyLjQxOSAxLjI1IDEuMjUgMCAwIDAgLjY0LTIuNDE5TTkuMSA4LjMyMXEuMDY2LS4xOTIuMDY3LS40MDRhMS4yNSAxLjI1IDAgMSAwLS4wNjcuNDA0IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-lock,.ag-charts-icon-locked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuMjA3IDMuNzY0YTIuODk0IDIuODk0IDAgMCAwLTIuODk1IDIuODk0VjloNS43ODlWNi42NThhMi44OTQgMi44OTQgMCAwIDAtMi44OTUtMi44OTRNMTQuMSA5VjYuNjU4YTMuODk0IDMuODk0IDAgMSAwLTcuNzg5IDB2Mi4zNDlBMi41IDIuNSAwIDAgMCA0IDExLjV2M0EyLjUgMi41IDAgMCAwIDYuNSAxN2g4YTIuNSAyLjUgMCAwIDAgMi41LTIuNXYtM0EyLjUgMi41IDAgMCAwIDE0LjUgOXpNNi41IDEwQTEuNSAxLjUgMCAwIDAgNSAxMS41djNBMS41IDEuNSAwIDAgMCA2LjUgMTZoOGExLjUgMS41IDAgMCAwIDEuNS0xLjV2LTNhMS41IDEuNSAwIDAgMC0xLjUtMS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-measurer-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0ibTQuNDYxIDEyLjcxIDEuNTMyLTEuNTMxIDEuNDE0IDEuNDE0LjcwNy0uNzA3TDYuNyAxMC40NzJsMS41MzItMS41MzMgMiAyIC43MDctLjcwNy0yLTIgNi4wMS02LjAxIDIuODMgMi44MjhMNS4wNSAxNy43NzggMi4yMjIgMTQuOTVsMS41MzItMS41MzIgMS40MTQgMS40MTQuNzA3LS43MDd6TS44MDggMTQuOTVsLjcwNy0uNzA3TDE0LjI0MyAxLjUxNWwuNzA3LS43MDcuNzA3LjcwNyAyLjgyOCAyLjgyOC43MDcuNzA3LS43MDcuNzA3TDUuNzU3IDE4LjQ4NWwtLjcwNy43MDctLjcwNy0uNzA3LTIuODI4LTIuODI4em0xMS4wNzgtNi44MzVMMTAuNDcgNi43bC43MDctLjcwNyAxLjQxNSAxLjQxNHptLjgyNC0zLjY1NCAxIDEgLjcwOC0uNzA3LTEtMXoiIGZpbGw9IiMxODFEMUYiLz48L3N2Zz4=)}.ag-charts-icon-note-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMyA0LjVBMS41IDEuNSAwIDAgMSA0LjUgM2gxMUExLjUgMS41IDAgMCAxIDE3IDQuNXY4YTEuNSAxLjUgMCAwIDEtMS41IDEuNWgtMy4yMWwtMS40NjkgMi41N2ExIDEgMCAwIDEtMS42ODIuMDg1TDcuMjQzIDE0SDQuNUExLjUgMS41IDAgMCAxIDMgMTIuNXpNNC41IDRhLjUuNSAwIDAgMC0uNS41djhhLjUuNSAwIDAgMCAuNS41aDMuMjU3bDIuMTk2IDMuMDc0TDExLjcxIDEzaDMuNzlhLjUuNSAwIDAgMCAuNS0uNXYtOGEuNS41IDAgMCAwLS41LS41eiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNi41IDYuNUEuNS41IDAgMCAxIDcgNmg2YS41LjUgMCAwIDEgMCAxSDdhLjUuNSAwIDAgMS0uNS0uNU02LjUgOS41QS41LjUgMCAwIDEgNyA5aDZhLjUuNSAwIDAgMSAwIDFIN2EuNS41IDAgMCAxLS41LS41IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-ohlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZD0iTTEzIDExaC0zdi0xaDNWM2gxdjJoNHYxaC00djExaC0xek02IDE3di0yaDN2LTFINlY0SDV2MUgydjFoM3YxMXoiLz48L3N2Zz4=)}.ag-charts-icon-pan-end{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0ibTYuNjQ2IDEzLjgxMy0uMzUzLjM1NC43MDcuNzA3LjM1NC0uMzU0ek0xMS4xNjYgMTBsLjM1NC4zNTQuMzU0LS4zNTQtLjM1NC0uMzU0ek03LjM1NSA1LjQ4IDcgNS4xMjZsLS43MDcuNzA3LjM1My4zNTR6bTAgOS4wNCA0LjE2Ni00LjE2Ni0uNzA3LS43MDgtNC4xNjcgNC4xNjd6bTQuMTY2LTQuODc0TDcuMzU0IDUuNDhsLS43MDguNzA3IDQuMTY3IDQuMTY3ek0xMy4wODMgNXYxMGgxVjV6Ii8+PC9zdmc+)}.ag-charts-icon-pan-left{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuNzkgNS44MzMgOC42MjUgMTBsNC4xNjYgNC4xNjctLjcwNy43MDdMNy4yMSAxMGw0Ljg3My00Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-right{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNy4yMSAxNC4xNjcgMTEuMzc2IDEwIDcuMjEgNS44MzNsLjcwNy0uNzA3TDEyLjc5IDEwbC00Ljg3MyA0Ljg3NHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-pan-start{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgNXYxMGgxVjV6TTkuNjI0IDEwbDQuMTY2LTQuMTY3LS43MDctLjcwN0w4LjIxIDEwbDQuODc0IDQuODc0LjcwNy0uNzA3eiIvPjwvc3ZnPg==)}.ag-charts-icon-parallel-channel,.ag-charts-icon-parallel-channel-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTcuNzIgNS4zMzFBMi4yNSAyLjI1IDAgMSAwIDE0LjcwNSAzLjZsLTkuNDkgNC41NjJhMi4yNSAyLjI1IDAgMSAwIC4yMDkgMS4wMWw5LjY2Mi00LjY0NmEyLjI1IDIuMjUgMCAwIDAgMi42MzQuODA1bS4zNzMtMi41NDdhMS4yNSAxLjI1IDAgMSAxLTIuMzM4Ljg4NSAxLjI1IDEuMjUgMCAwIDEgMi4zMzgtLjg4NU00LjM0MyA4LjY3YTEuMjUgMS4yNSAwIDEgMS0yLjMzOC44ODUgMS4yNSAxLjI1IDAgMCAxIDIuMzM4LS44ODVNNS4zMDcgMTYuNzI4YTIuMjUgMi4yNSAwIDEgMS0uNTI1LS44NThsOS45MjMtNC43N2EyLjI1IDIuMjUgMCAxIDEgLjM4MS45MjZ6bS0uOTY0LjI3NGExLjI1IDEuMjUgMCAxIDEtMi4zMzguODg1IDEuMjUgMS4yNSAwIDAgMSAyLjMzOC0uODg1bTEzLjAyMy01LjEwNmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-position-bottom{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzem0zLTNoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTYgMTNoOHYxSDZ6Ii8+PC9zdmc+)}.ag-charts-icon-position-center{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBkPSJNMyAxMGgxNHYxSDN6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDdoOHYxSDZ6bTAgNmg4djFINnoiLz48L3N2Zz4=)}.ag-charts-icon-position-top{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBmaWxsPSIjMDAwIiBmaWxsLW9wYWNpdHk9Ii4yNSIgZD0iTTMgMTBoMTR2MUgzeiIvPjxwYXRoIGZpbGw9IiMwMDAiIGQ9Ik02IDdoOHYxSDZ6Ii8+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1vcGFjaXR5PSIuMjUiIGQ9Ik02IDEzaDh2MUg2eiIvPjwvc3ZnPg==)}.ag-charts-icon-price-label-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNC41IDNBMS41IDEuNSAwIDAgMCAzIDQuNVYxM2ExLjUgMS41IDAgMCAwIDEuNSAxLjVoLjgzM3YuMDU3Yy4yNDItLjI5OS41OTctLjUwMyAxLS41NDhWMTMuNUg0LjVBLjUuNSAwIDAgMSA0IDEzVjQuNWEuNS41IDAgMCAxIC41LS41aDExYS41LjUgMCAwIDEgLjUuNXY4YS41LjUgMCAwIDEtLjUuNWgtNC44MThsLS4xMjYuMDg0YTI2IDI2IDAgMCAwLTIuMjI1IDEuNjg1bC0uMzIuMjY1LS4wNjguMDU2YTEuNSAxLjUgMCAwIDEtMi42MDkgMS4zNTRjLjAzMy43NjMuOTA1IDEuMjM4IDEuNTYuNzU2LjY0Ni0uNDc0IDEuMjEtLjk0MyAxLjc2MS0xLjRsLjMxMy0uMjZBMjYgMjYgMCAwIDEgMTAuOTg2IDE0SDE1LjVhMS41IDEuNSAwIDAgMCAxLjUtMS41di04QTEuNSAxLjUgMCAwIDAgMTUuNSAzeiIgY2xpcC1ydWxlPSJldmVub2RkIi8+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNOC43MTYgMTQuODE1YTIuMjUgMi4yNSAwIDEgMS00LjIxIDEuNTkzIDIuMjUgMi4yNSAwIDAgMSA0LjIxLTEuNTkzbS0xLjY2MiAxLjk2NmExLjI1IDEuMjUgMCAxIDAtLjg4NS0yLjMzOSAxLjI1IDEuMjUgMCAwIDAgLjg4NSAyLjMzOSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-price-range-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS4wNDYgMTVWNS44NzdoLjk0MlYxNXoiIGZpbGw9IiMxODFEMUYiLz48cGF0aCBkPSJNOS41IDYuMjI4IDcuMTY3IDguMzc2IDYuNSA3Ljc2MiA5LjUgNWwzIDIuNzYyLS42NjcuNjE0eiIgZmlsbD0iIzAwMCIvPjxwYXRoIGQ9Ik0yIDE4di0xaDE2djF6TTIgM1YyaDE2djF6IiBmaWxsPSIjMTgxRDFGIi8+PC9zdmc+)}.ag-charts-icon-reset{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTIuMDQgNC40NDVhNS44MSA1LjgxIDAgMCAwLTcuMjU3IDIuNDUzLjUuNSAwIDAgMS0uODY1LS41MDJBNi44MSA2LjgxIDAgMSAxIDMgOS44MTNhLjUuNSAwIDAgMSAxIDAgNS44MSA1LjgxIDAgMSAwIDguMDQtNS4zNjgiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTQuMjg5IDMuMDAyYS41LjUgMCAwIDEgLjUuNXYyLjY1NWgyLjY1NWEuNS41IDAgMCAxIDAgMUg0LjI5YS41LjUgMCAwIDEtLjUtLjVWMy41MDJhLjUuNSAwIDAgMSAuNS0uNSIgY2xpcC1ydWxlPSJldmVub2RkIi8+PC9zdmc+)}.ag-charts-icon-settings{--icon: url(data:image/svg+xml;base64,PHN2ZyB2aWV3Qm94PSIwIDAgMjAgMjAiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkIj48cGF0aCBkPSJNMTAgMTNhMyAzIDAgMSAwIDAtNiAzIDMgMCAwIDAgMCA2bTAtMWEyIDIgMCAxIDEtLjAwMS0zLjk5OUEyIDIgMCAwIDEgMTAgMTIiLz48cGF0aCBkPSJNMi4zMSAxNC4zNDVjLS44MTctMS40OTEuMDI3LTIuNDk5LjQ3NC0yLjg2NS41MzEtLjQzNC45NjktLjM2NS45NzItMS40OC0uMDAzLTEuMTE1LS40NDEtMS4wNDYtLjk3Mi0xLjQ4MS0uNDU0LS4zNzEtMS4zMTctMS40MDUtLjQzNC0yLjkzNmwuMDA1LS4wMDljLjg4NC0xLjUyIDIuMjA3LTEuMjkgMi43NTUtMS4wODMuNjQxLjI0My44MDEuNjU2IDEuNzY4LjEwMS45NjQtLjU2LjY4Ni0uOTA0Ljc5Ni0xLjU4Mi4wOTQtLjU3OC41NTktMS44NDMgMi4zMjYtMS44NDNoLjAxYzEuNzU5LjAwNSAyLjIyMiAxLjI2NiAyLjMxNiAxLjg0My4xMS42NzgtLjE2OCAxLjAyMi43OTYgMS41ODIuOTY3LjU1NSAxLjEyNy4xNDIgMS43NjgtLjEwMS41NDktLjIwOCAxLjg3Ni0uNDM4IDIuNzYgMS4wOTJzLjAyIDIuNTY1LS40MzQgMi45MzZjLS41MzEuNDM1LS45NjkuMzY2LS45NzIgMS40ODEuMDAzIDEuMTE1LjQ0MSAxLjA0Ni45NzIgMS40OC40NTQuMzcyIDEuMzE3IDEuNDA2LjQzNCAyLjkzN2wtLjAwNS4wMDljLS44ODQgMS41Mi0yLjIwNyAxLjI5LTIuNzU1IDEuMDgzLS42NDEtLjI0My0uODAxLS42NTYtMS43NjgtLjEwMS0uOTY0LjU2LS42ODYuOTA0LS43OTYgMS41ODEtLjA5NC41NzktLjU1OSAxLjg0NC0yLjMyNiAxLjg0NGgtLjAxYy0xLjc1OS0uMDA1LTIuMjIyLTEuMjY2LTIuMzE2LTEuODQ0LS4xMS0uNjc3LjE2OC0xLjAyMS0uNzk2LTEuNTgxLS45NjctLjU1NS0xLjEyNy0uMTQyLTEuNzY4LjEwMS0uNTQ5LjIwOC0xLjg3Ni40MzgtMi43Ni0xLjA5MmwtLjAyLS4wMzZ6TTkuOTg0IDIuMTYySDEwYzEuMzU1IDAgMS4zNDIgMS4wMzkgMS4zNTMgMS40MjUuMDA4LjMxMi4wNCAxLjE2IDEuMjU5IDEuODcybC4wMTUuMDA4YzEuMjI1LjcgMS45NzYuMzA0IDIuMjUxLjE1NS4zMzctLjE4MyAxLjIyNi0uNzExIDEuOTAyLjQ0NWwuMDA4LjAxNGMuNjc4IDEuMTczLS4yMjkgMS42ODItLjU1OCAxLjg4NC0uMjY2LjE2My0uOTg0LjYxNS0uOTkxIDIuMDI3di4wMTZjLjAwNyAxLjQxMi43MjUgMS44NjQuOTkxIDIuMDI3LjMyOC4yMDEgMS4yMjkuNzA3LjU2NiAxLjg3bC0uMDA4LjAxNGMtLjY3NyAxLjE3NC0xLjU3MS42NDMtMS45MS40NTktLjI3NS0uMTQ5LTEuMDI2LS41NDUtMi4yNTEuMTU0bC0uMDE1LjAwOWMtMS4yMTkuNzEyLTEuMjUxIDEuNTYtMS4yNTkgMS44NzItLjAxMS4zODYuMDAyIDEuNDI1LTEuMzUzIDEuNDI1cy0xLjM0Mi0xLjAzOS0xLjM1My0xLjQyNWMtLjAwOC0uMzEyLS4wNC0xLjE2LTEuMjU5LTEuODcybC0uMDE1LS4wMDljLTEuMjI1LS42OTktMS45NzYtLjMwMy0yLjI1MS0uMTU0LS4zMzYuMTgzLTEuMjE5LjcwNi0xLjg5NC0uNDMybC0uMDE2LS4wMjdjLS42NzgtMS4xNzQuMjI5LTEuNjgyLjU1OC0xLjg4NC4yNjYtLjE2My45ODQtLjYxNS45OTEtMi4wMjd2LS4wMTZjLS4wMDctMS40MTItLjcyNS0xLjg2NC0uOTkxLTIuMDI3LS4zMjgtLjIwMS0xLjIyOS0uNzA3LS41NjYtMS44N2wuMDA4LS4wMTRjLjY3Ny0xLjE3NCAxLjU3MS0uNjQzIDEuOTEtLjQ1OS4yNzUuMTQ5IDEuMDI2LjU0NSAyLjI1MS0uMTU1bC4wMTUtLjAwOGMxLjIxOS0uNzEyIDEuMjUxLTEuNTYgMS4yNTktMS44NzIuMDEtLjM4NC0uMDAyLTEuNDE3IDEuMzM3LTEuNDI1Ii8+PC9zdmc+)}.ag-charts-icon-step-line-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzE4MUQxRiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNiA0aDV2OGgzVjhoNXYxaC00djRoLTVWNUg3djEwSDJ2LTFoNHoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-text-annotation{--icon: url(data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAiIGhlaWdodD0iMjAiIHZpZXdCb3g9IjAgMCAyMCAyMCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZmlsbC1ydWxlPSJldmVub2RkIiBjbGlwLXJ1bGU9ImV2ZW5vZGQiIGQ9Ik00IDRIMTZWN0gxNVY1SDEwLjVWMTVIMTRWMTZINlYxNUg5LjVWNUg1VjdINFY0WiIgZmlsbD0iYmxhY2siLz4KPC9zdmc+Cg==)}.ag-charts-icon-trend-line,.ag-charts-icon-trend-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS4zMTQgMTAuOTM4YTIuMjUgMi4yNSAwIDEgMSAuMDEtMWg5LjM1MmEyLjI1IDIuMjUgMCAxIDEgLjAxIDF6bS0yLjE4OS43MjlhMS4yNSAxLjI1IDAgMSAwIDAtMi41IDEuMjUgMS4yNSAwIDAgMCAwIDIuNW0xMy43NSAwYTEuMjUgMS4yNSAwIDEgMCAwLTIuNSAxLjI1IDEuMjUgMCAwIDAgMCAyLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-unlock,.ag-charts-icon-unlocked{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNjUxIDMuNWEyLjg5NCAyLjg5NCAwIDAgMC0yLjg5NCAyLjg5NFY5SDE0LjVhMi41IDIuNSAwIDAgMSAyLjUgMi41djNhMi41IDIuNSAwIDAgMS0yLjUgMi41aC04QTIuNSAyLjUgMCAwIDEgNCAxNC41di0zQTIuNSAyLjUgMCAwIDEgNi41IDloLjI1N1Y2LjM5NGEzLjg5NCAzLjg5NCAwIDEgMSA3Ljc4OSAwIC41LjUgMCAwIDEtMSAwQTIuODk0IDIuODk0IDAgMCAwIDEwLjY1IDMuNU02LjUgMTBBMS41IDEuNSAwIDAgMCA1IDExLjV2M0ExLjUgMS41IDAgMCAwIDYuNSAxNmg4YTEuNSAxLjUgMCAwIDAgMS41LTEuNXYtM2ExLjUgMS41IDAgMCAwLTEuNS0xLjV6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-vertical-line,.ag-charts-icon-vertical-line-drawing{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNMTAuNSA3LjgwNmEyLjI1IDIuMjUgMCAwIDEgMCA0LjM4OFYxOS41aC0xdi03LjMwNmEyLjI1IDIuMjUgMCAwIDEgMC00LjM4OFYuNWgxem0tLjUuOTQ0YTEuMjUgMS4yNSAwIDEgMSAwIDIuNSAxLjI1IDEuMjUgMCAwIDEgMC0yLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-zoom-in{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZD0iTTEwIDUuNWEuNS41IDAgMCAxIC41LjV2My41aDMuODc1YS41LjUgMCAwIDEgMCAxSDEwLjV2NC4yNWEuNS41IDAgMSAxLTEgMFYxMC41SDUuNjI1YS41LjUgMCAxIDEgMC0xSDkuNVY2YS41LjUgMCAwIDEgLjUtLjUiLz48L3N2Zz4=)}.ag-charts-icon-zoom-out{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzAwMCIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNS41IDEwYS41LjUgMCAwIDEgLjUtLjVoOGEuNS41IDAgMCAxIDAgMUg2YS41LjUgMCAwIDEtLjUtLjUiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-high-low-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJNNyA0aDJ2MTJINFY0aDNNNSA1aDN2MTBINXpNMTEgMTRWNmg1djhoLTVtMS03aDN2NmgtM3oiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjwvc3ZnPg==)}.ag-charts-icon-hlc-series{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMCIgaGVpZ2h0PSIyMCIgZmlsbD0ibm9uZSI+PHBhdGggZmlsbD0iIzEzMTcyMiIgZmlsbC1ydWxlPSJldmVub2RkIiBkPSJtMTguMTYzIDEuODM3LTUuMzM0IDExLjYyMUw2Ljk1NyA4LjEybC00LjE5OSA5LjYyMi0uOTE2LS40IDQuNzU2LTEwLjlMMTIuNDkgMTEuOCAxNy4yNTQgMS40MnoiIGNsaXAtcnVsZT0iZXZlbm9kZCIvPjxwYXRoIGZpbGw9IiMwMDAiIGZpbGwtb3BhY2l0eT0iLjQiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZD0iTTUuODI1IDIuNzA0LjU1IDEzLjc4NWwuOTAyLjQzIDQuNzI0LTkuOTE5IDYuMDM0IDUuMDI5IDMuMjU1LTguMTQtLjkyOC0uMzctMi43NDUgNi44NnptNy44NTIgMTQuNjM2IDUuNzgtMTMuMTM5LS45MTUtLjQwMi01LjIxOSAxMS44Ni02LjAwNS01LjUwNC0zLjI3OCA3LjY0OC45Mi4zOTQgMi43MjItNi4zNTJ6IiBjbGlwLXJ1bGU9ImV2ZW5vZGQiLz48L3N2Zz4=)}.ag-charts-icon-zoom-in-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20taW4iPjxjaXJjbGUgY3g9IjExIiBjeT0iMTEiIHI9IjgiLz48bGluZSB4MT0iMjEiIHgyPSIxNi42NSIgeTE9IjIxIiB5Mj0iMTYuNjUiLz48bGluZSB4MT0iMTEiIHgyPSIxMSIgeTE9IjgiIHkyPSIxNCIvPjxsaW5lIHgxPSI4IiB4Mj0iMTQiIHkxPSIxMSIgeTI9IjExIi8+PC9zdmc+)}.ag-charts-icon-zoom-out-alt{--icon: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyNCIgaGVpZ2h0PSIyNCIgdmlld0JveD0iMCAwIDI0IDI0IiBmaWxsPSJub25lIiBzdHJva2U9ImN1cnJlbnRDb2xvciIgc3Ryb2tlLXdpZHRoPSIyIiBzdHJva2UtbGluZWNhcD0icm91bmQiIHN0cm9rZS1saW5lam9pbj0icm91bmQiIGNsYXNzPSJsdWNpZGUgbHVjaWRlLXpvb20tb3V0Ij48Y2lyY2xlIGN4PSIxMSIgY3k9IjExIiByPSI4Ii8+PGxpbmUgeDE9IjIxIiB4Mj0iMTYuNjUiIHkxPSIyMSIgeTI9IjE2LjY1Ii8+PGxpbmUgeDE9IjgiIHgyPSIxNCIgeTE9IjExIiB5Mj0iMTEiLz48L3N2Zz4=)}.ag-charts-input{--input-layer-active: 1;--input-layer-focus: 2;color:inherit;font-family:var(--ag-charts-input-font-family);font-size:var(--ag-charts-input-font-size);transition-duration:var(--ag-charts-input-transition-duration);transition-property:none;transition-timing-function:var(--ag-charts-input-transition-timing-function)}.ag-charts-input:focus-visible{outline:var(--ag-charts-input-focus-outline);box-shadow:var(--ag-charts-input-focus-box-shadow);z-index:var(--input-layer-focus)}.ag-charts-button{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);cursor:pointer;padding:var(--ag-charts-input-padding);transition-property:background,border-color}.ag-charts-button:hover{background:var(--ag-charts-input-background-color--hover)}.ag-charts-button:has(.ag-charts-icon){padding:2px}.ag-charts-checkbox{appearance:none;background:var(--ag-charts-input-checkbox-background-color);border-radius:9px;cursor:pointer;height:18px;margin:0;transition-duration:var(--ag-charts-input-transition-duration--fast);transition-property:margin;width:29px}.ag-charts-checkbox:before{display:block;background:var(--ag-charts-input-background-color);border-radius:7px;content:" ";height:14px;margin:2px;transition-duration:var(--ag-charts-input-transition-duration--fast);transition-property:margin;transition-timing-function:var(--ag-charts-input-transition-easing);width:14px}.ag-charts-checkbox:checked{background:var(--ag-charts-input-checkbox-background-color--checked)}.ag-charts-checkbox:checked:before{margin-left:13px}.ag-charts-select{background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);padding:3px 2px 4px;font-size:inherit}.ag-charts-textarea{--line-height: 1.38;background:var(--ag-charts-input-background-color);border:1px solid var(--ag-charts-input-border-color);border-radius:var(--ag-charts-input-border-radius);line-height:var(--line-height);font-family:var(--ag-charts-input-font-family);font-size:var(--ag-charts-input-font-size);padding:var(--ag-charts-input-padding-large) var(--ag-charts-input-padding)}.ag-charts-textarea[placeholder]:empty:before{color:var(--ag-charts-input-placeholder);content:attr(placeholder)}.ag-charts-proxy-container{pointer-events:none;position:absolute}.ag-charts-proxy-elem{-webkit-appearance:none;appearance:none;background:none;border:none;color:#0000;overflow:hidden;pointer-events:auto;position:absolute}.ag-charts-proxy-elem::-moz-range-thumb,.ag-charts-proxy-elem::-moz-range-track{opacity:0}.ag-charts-proxy-elem::-webkit-slider-runnable-track,.ag-charts-proxy-elem::-webkit-slider-thumb{opacity:0}.ag-charts-proxy-elem:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator{position:absolute;display:block;pointer-events:none;user-select:none;width:100%;height:100%}.ag-charts-focus-indicator>div{position:absolute;outline:var(--ag-charts-focus-border);outline-width:2px;box-shadow:var(--ag-charts-focus-border-shadow)}.ag-charts-focus-indicator>svg{width:100%;height:100%;fill:none;stroke:var(--ag-charts-focus-border-color);stroke-width:2px}.ag-charts-overlay{color:#181d1f;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay{color:#fff}.ag-charts-overlay--loading{color:#8c8c8c}.ag-charts-overlay__loading-background{background:#fff;pointer-events:none}.ag-charts-overlay.ag-charts-dark-overlay .ag-charts-overlay__loading-background{background:#192232}.ag-charts-tooltip{position:fixed;inset:unset;margin:0;padding:0;overflow:visible;width:max-content;max-width:100%;font:12px Verdana,sans-serif;color:var(--ag-charts-tooltip-text-color);background:var(--ag-charts-tooltip-background-color);border:var(--ag-charts-tooltip-border);border-radius:var(--ag-charts-tooltip-border-radius);box-shadow:0 4px 8px #00000014}.ag-charts-tooltip--compact{--ag-charts-content-padding: var(--ag-charts-content-compact-padding)}.ag-charts-tooltip--arrow:before{--tooltip-arrow-size: 8px;content:"";position:absolute;top:100%;left:50%;margin:0 auto;transform:translate(-50%) translateY(calc(var(--tooltip-arrow-size) * -.5)) rotate(45deg);display:block;width:var(--tooltip-arrow-size);height:var(--tooltip-arrow-size);border:inherit;background:inherit;border-top:none;border-left:none;clip-path:polygon(0 100%,100% 0,100% 100%)}.ag-charts-tooltip--no-interaction{pointer-events:none;user-select:none}.ag-charts-tooltip--wrap-always{overflow-wrap:break-word;word-break:break-word;hyphens:none}.ag-charts-tooltip--wrap-hyphenate{overflow-wrap:break-word;word-break:break-word;hyphens:auto}.ag-charts-tooltip--wrap-on-space{overflow-wrap:normal;word-break:normal}.ag-charts-tooltip--wrap-never{white-space:nowrap}.ag-charts-tooltip-heading,.ag-charts-tooltip-title,.ag-charts-tooltip-label,.ag-charts-tooltip-value{overflow:hidden;text-overflow:ellipsis}.ag-charts-tooltip-content{display:grid;grid:auto-flow minmax(1em,auto) / 1fr;padding:var(--ag-charts-content-padding);gap:var(--ag-charts-content-gap)}.ag-charts-tooltip-content:has(.ag-charts-tooltip-symbol){grid:auto-flow minmax(1em,auto) / auto 1fr}.ag-charts-tooltip-heading{grid-column:1 / -1}.ag-charts-tooltip-symbol{grid-column:1 / 2;align-self:center}.ag-charts-tooltip-symbol svg{display:block}.ag-charts-tooltip-title{grid-column:-2 / -1}.ag-charts-tooltip-row{grid-column:1 / -1;display:flex;gap:16px;align-items:baseline;justify-content:space-between;overflow:hidden}.ag-charts-tooltip-row--inline{grid-column:-2 / -1}.ag-charts-tooltip-label{flex:1;min-width:0}.ag-charts-tooltip-value{min-width:0}.ag-charts-popover{position:absolute;border:var(--ag-charts-popover-border);border-radius:var(--ag-charts-popover-border-radius);background:var(--ag-charts-popover-background-color);color:var(--ag-charts-popover-foreground-color);font-family:var(--ag-charts-font-family);font-size:var(--ag-charts-popover-font-size);box-shadow:var(--ag-charts-popover-shadow);z-index:var(--ag-charts-layer-ui-overlay)}.ag-charts-menu{--item-padding: 6px 12px;--icon-color: var(--ag-charts-popover-foreground-color);display:grid;grid:auto-flow auto / 1fr;column-gap:12px;font-size:var(--ag-charts-popover-font-size-small)}.ag-charts-menu:has(.ag-charts-menu__icon,.ag-charts-menu__row--stroke-width-visible){grid:auto-flow auto / auto 1fr}.ag-charts-menu__row--stroke-width-visible:before{content:"";height:var(--strokeWidth);width:12px;background:var(--icon-color)}.ag-charts-menu__row--stroke-width-visible[aria-disabled=true]:before{filter:grayscale(1);opacity:.5}.ag-charts-menu__row{display:grid;grid-column:1 / -1;grid-template-columns:subgrid;align-items:center;padding:var(--item-padding)}.ag-charts-menu__row:not(.ag-charts-menu__row--active){cursor:pointer}.ag-charts-menu__row:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.ag-charts-menu__row:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.ag-charts-menu__row:focus{background:var(--ag-charts-popover-hover-color)}.ag-charts-menu__row:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-menu__row--active{--icon-color: var(--ag-charts-popover-active-color);background:var(--ag-charts-popover-active-background-color);color:var(--ag-charts-popover-active-color)}.ag-charts-menu__label{grid-column:-1 / span 1}.ag-charts-toolbar{align-items:center;display:flex;flex-wrap:nowrap;position:absolute}.ag-charts-toolbar__button{align-items:center;background:var(--ag-charts-toolbar-background-color);border:var(--ag-charts-toolbar-border);color:var(--ag-charts-toolbar-foreground-color);cursor:pointer;display:flex;font:var(--ag-charts-toolbar-font-size) var(--ag-charts-font-family);justify-content:center;min-height:var(--ag-charts-toolbar-size);min-width:var(--ag-charts-toolbar-size);padding:var(--ag-charts-toolbar-button-padding);position:relative;transition:background-color .25s ease-in-out,border-color .25s ease-in-out,color .25s ease-in-out;white-space:nowrap}.ag-charts-toolbar__button:hover{background:var(--ag-charts-toolbar-hover-color);z-index:1}.ag-charts-toolbar__button:focus-visible{outline:var(--ag-charts-focus-border);box-shadow:var(--ag-charts-focus-border-shadow);z-index:calc(var(--ag-charts-layer-ui-overlay) + 1)}.ag-charts-toolbar__button--active{background:var(--ag-charts-toolbar-active-background-color);border-color:var(--ag-charts-toolbar-active-color);color:var(--ag-charts-toolbar-active-color);z-index:2}.ag-charts-toolbar__button[aria-disabled=true]{background:var(--ag-charts-toolbar-disabled-background-color);color:var(--ag-charts-toolbar-disabled-foreground-color);cursor:default}.ag-charts-toolbar--horizontal{flex-direction:row;.ag-charts-toolbar__button{margin:0 0 0 -1px}.ag-charts-toolbar__button--first{border-bottom-left-radius:var(--ag-charts-button-radius);border-top-left-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-right-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius)}}.ag-charts-toolbar--vertical{flex-direction:column;.ag-charts-toolbar__button{margin:-1px 0 0;max-width:100%}.ag-charts-toolbar__button--first{border-top-left-radius:var(--ag-charts-button-radius);border-top-right-radius:var(--ag-charts-button-radius);margin:0}.ag-charts-toolbar__button--last{border-bottom-left-radius:var(--ag-charts-button-radius);border-bottom-right-radius:var(--ag-charts-button-radius)}}.ag-charts-toolbar__icon+.ag-charts-toolbar__label{margin-left:var(--ag-charts-toolbar-gap)}.ag-charts-toolbar__icon,.ag-charts-toolbar__label{pointer-events:none}.ag-charts-floating-toolbar{border:none;display:flex;.ag-charts-toolbar{align-items:unset;position:unset}}.ag-charts-floating-toolbar__drag-handle{align-items:center;background:var(--ag-charts-toolbar-background-color);border:var(--ag-charts-toolbar-border);border-bottom-left-radius:var(--ag-charts-button-radius);border-top-left-radius:var(--ag-charts-button-radius);cursor:grab;display:flex;justify-content:center;min-width:24px;padding-left:0;padding-right:0}.ag-charts-floating-toolbar__drag-handle--dragging{cursor:grabbing}
`;function _u(e){return e==="true"}function FQ(e){return Number(e)}function vo(e){return e}var hb={role:vo,"aria-checked":_u,"aria-controls":vo,"aria-describedby":vo,"aria-disabled":_u,"aria-expanded":_u,"aria-haspopup":_u,"aria-hidden":_u,"aria-label":vo,"aria-labelledby":vo,"aria-live":vo,"aria-orientation":vo,"aria-selected":_u,"data-preventdefault":_u,class:vo,id:vo,tabindex:FQ,title:vo,placeholder:vo};function ii(e,t,i){i==null||i===""||i===""?e==null||e.removeAttribute(t):e==null||e.setAttribute(t,i.toString())}function xh(e,t){if(t!=null)for(const[i,s]of Object.entries(t))i!=="class"&&ii(e,i,s)}function lS(e,t,i){var n;if(!(e instanceof HTMLElement))return;const s=e.getAttribute(t);return s===null?i:((n=hb[t])==null?void 0:n.call(hb,s))??void 0}function Lo(e,t,i){e!=null&&(i==null?e.style.removeProperty(t):e.style.setProperty(t,i.toString()))}function kQ(e,t){for(const[i,s]of Object.entries(t))Lo(e,i,s)}var NQ=class xy{constructor(t,i,s){this.element=t,this.topTabGuard=i,this.bottomTabGuard=s,this.destroyFns=[],this.guardTabIndex=0,this.hasFocus=!1,this.initTabGuard(this.topTabGuard,n=>this.onTab(n,!1)),this.initTabGuard(this.bottomTabGuard,n=>this.onTab(n,!0)),this.element.addEventListener("focus",()=>this.onFocus(),{capture:!0}),this.element.addEventListener("blur",n=>this.onBlur(n),{capture:!0})}set tabIndex(t){this.guardTabIndex=t,this.guardTabIndex===0?this.setGuardIndices(void 0):this.hasFocus||this.setGuardIndices(this.guardTabIndex)}destroy(){for(const t of this.destroyFns)t();this.destroyFns.length=0}initTabGuard(t,i){const s=()=>i(t);t.addEventListener("focus",s),this.destroyFns.push(()=>t.removeEventListener("focus",s))}setGuardIndices(t){const i=t;ii(this.topTabGuard,"tabindex",i),ii(this.bottomTabGuard,"tabindex",i)}onFocus(){this.hasFocus=!0,this.guardTabIndex!==0&&this.setGuardIndices(0)}onBlur({relatedTarget:t}){const{topTabGuard:i,bottomTabGuard:s}=this;this.hasFocus=!1,this.guardTabIndex!==0&&t!==i&&t!==s&&this.setGuardIndices(this.guardTabIndex)}onTab(t,i){if(this.guardTabIndex!==0){let s;t.tabIndex===0?(s=this.findExitTarget(!i),this.setGuardIndices(this.guardTabIndex)):s=this.findEnterTarget(i),s==null||s.focus()}}static queryFocusable(t,i){const s=Mi();return Array.from(t.querySelectorAll(i)).filter(n=>{if(n instanceof HTMLElement){const r=s.getComputedStyle(n);return r.display!=="none"&&r.visibility!=="none"}return!1})}findEnterTarget(t){const i=xy.queryFocusable(this.element,'[tabindex="0"]'),s=t?i.length-1:0;return i[s]}findExitTarget(t){const i=xy.queryFocusable(fs(),"[tabindex]").filter(r=>r.tabIndex>0).sort((r,o)=>r.tabIndex-o.tabIndex),{before:s,after:n}=xy.findBeforeAndAfter(i,this.guardTabIndex);return t?s:n}static findBeforeAndAfter(t,i){let s=0,n=t.length-1,r,o;for(;s<=n;){const a=Math.floor((s+n)/2),l=t[a].tabIndex;if(l===i){r=t[a-1]||void 0,o=t[a+1]||void 0;break}else l<i?(r=t[a],s=a+1):(o=t[a],n=a-1)}return{before:r,after:o}}};function fl(e,t,i,s){t.addEventListener(i,s);const n=()=>t.removeEventListener(i,s);return e.push(n),n}function a_(e,t,i){fl(e,t,"keydown",s=>{s.key==="Escape"&&i(s)})}function OQ(e,t,i){const s=fl(e,window,"mousedown",n=>{[0,2].includes(n.button)&&!_Q(t,n)&&(i(),s())});return s}function _Q(e,t){if(t.target instanceof Element){const{x:i,y:s,width:n,height:r}=e.getBoundingClientRect(),{clientX:o,clientY:a}=t;return o>=i&&a>=s&&o<=i+n&&a<=s+r}return!1}function cS(e){return!(e.shiftKey||e.altKey||e.ctrlKey||e.metaKey)}function zR(e,t,...i){return cS(e)&&(e.key===t||i.some(s=>e.key===s))}function ZT(e,t,i,s){i&&fl(e,t,"keydown",n=>{zR(n,s)&&i.focus()})}function BQ(e,t,i,s,n,r){ZT(e,t,n,r),ZT(e,t,i,s),fl(e,t,"keydown",o=>{zR(o,s,r)&&o.preventDefault()})}var tp={horizontal:{nextKey:"ArrowRight",prevKey:"ArrowLeft"},vertical:{nextKey:"ArrowDown",prevKey:"ArrowUp"}};function GQ(e){return e.toolbar.role="toolbar",e.toolbar.ariaOrientation=e.orientation,e.toolbar.ariaHidden=(e.buttons.length===0).toString(),HR(e)}function HR(e){const{orientation:t,buttons:i,wrapAround:s=!1,onEscape:n,onFocus:r,onBlur:o}=e,{nextKey:a,prevKey:l}=tp[t],c=y=>{y.target&&"tabIndex"in y.target&&(i.forEach(C=>C.tabIndex=-1),y.target.tabIndex=0)},[p,g]=s?[i.length,i.length]:[0,1/0],f=[];for(let y=0;y<i.length;y++){const C=i[(p+y-1)%g],x=i[y],M=i[(p+y+1)%g];fl(f,x,"focus",c),r&&fl(f,x,"focus",r),o&&fl(f,x,"blur",o),n&&a_(f,x,n),BQ(f,x,M,a,C,l),x.tabIndex=y===0?0:-1}return f}var zQ=class{constructor(e,t,i){this.lastFocus=t,this.closeCallback=i,this.destroyFns=[],this.destroyFns.push(OQ(this.destroyFns,e,()=>this.close(!0)))}close(e){this.destroyFns.forEach(t=>t()),this.destroyFns.length=0,this.closeCallback(),this.finishClosing(e)}finishClosing(e){var t;this.destroyFns.forEach(i=>i()),this.destroyFns.length=0,ii(this.lastFocus,"aria-expanded",!1),e||(t=this.lastFocus)==null||t.focus({preventScroll:!0}),this.lastFocus=void 0}};function l_(e){var y;const{sourceEvent:t,orientation:i,menu:s,buttons:n,closeCallback:r,autoCloseOnBlur:o=!1}=e,{nextKey:a,prevKey:l}=tp[i],c=WR(t);ii(c,"aria-expanded",!0);const p=new zQ(s,c,r),g=()=>p.close(),{destroyFns:f}=p;if(s.role="menu",s.ariaOrientation=i,f.push(...HR({orientation:i,buttons:n,onEscape:g,wrapAround:!0})),s.tabIndex=-1,a_(f,s,g),fl(f,s,"keydown",C=>{var x;C.target===s&&(C.key===a||C.key===l)&&(C.preventDefault(),(x=n[0])==null||x.focus())}),o){const C=x=>{!n.includes(x.relatedTarget)&&g()};for(const x of n)fl(f,x,"blur",C)}return(y=n[0])==null||y.focus({preventScroll:!0}),p}function HQ(e,t){return i=>{if(e.ariaDisabled==="true")return i.preventDefault();t(i)}}function VR(e){return"button"in e?e.button===0:cS(e)&&(e.code==="Space"||e.key==="Enter")}function WR(e){if((e==null?void 0:e.target)instanceof HTMLElement&&"tabindex"in e.target.attributes)return e.target}function c_(e){const t=i=>{if(i.defaultPrevented)return;lS(i.target,"data-preventdefault",!0)&&zR(i,"ArrowRight","ArrowLeft","ArrowDown","ArrowUp")&&i.preventDefault()};return e.addEventListener("keydown",t),()=>e.removeEventListener("keydown",t)}var VQ=class{constructor(){var e;this.elements=new Map,this.documentReady=!1,this.queuedObserveRequests=[],this.onLoad=()=>{this.documentReady=!0,this.queuedObserveRequests.forEach(([t,i])=>this.observe(t,i)),this.queuedObserveRequests=[]},!(typeof ResizeObserver>"u")&&(this.resizeObserver=new ResizeObserver(t=>{for(const{target:i,contentRect:{width:s,height:n}}of t){const r=this.elements.get(i);this.checkSize(r,i,s,n)}}),this.documentReady=fs("readyState")==="complete",this.documentReady||(e=Mi())==null||e.addEventListener("load",this.onLoad))}destroy(){var e,t;(e=Mi())==null||e.removeEventListener("load",this.onLoad),(t=this.resizeObserver)==null||t.disconnect(),this.resizeObserver=null}checkSize(e,t,i,s){var n,r;e&&(i!==((n=e.size)==null?void 0:n.width)||s!==((r=e.size)==null?void 0:r.height))&&(e.size={width:i,height:s},e.cb(e.size,t))}observe(e,t){var s;if(!this.documentReady){this.queuedObserveRequests.push([e,t]);return}this.elements.has(e)?this.removeFromQueue(e):(s=this.resizeObserver)==null||s.observe(e);const i={cb:t};this.elements.set(e,i)}unobserve(e){var t;(t=this.resizeObserver)==null||t.unobserve(e),this.elements.delete(e),this.removeFromQueue(e),this.elements.size||this.destroy()}removeFromQueue(e){this.queuedObserveRequests=this.queuedObserveRequests.filter(([t])=>t!==e)}},WQ='<div role="presentation" class="ag-charts-wrapper ag-charts-styles" data-ag-charts><div role="presentation" class="ag-charts-canvas-center"><div role="presentation" class="ag-charts-canvas-container"><div role="presentation" class="ag-charts-canvas" aria-hidden="true"></div><div role="figure" class="ag-charts-canvas-proxy"><div role="presentation" class="ag-charts-series-area"></div></div><div role="presentation" class="ag-charts-canvas-overlay"></div></div></div></div>',jQ=["styles","canvas","canvas-center","canvas-container","canvas-overlay","canvas-proxy","series-area"],UQ=new Map([["styles",{childElementType:"style"}],["canvas",{childElementType:"canvas"}],["canvas-proxy",{childElementType:"div"}],["canvas-overlay",{childElementType:"div"}],["canvas-center",{childElementType:"div"}],["series-area",{childElementType:"div"}]]);function KQ(e,t){if(typeof IntersectionObserver>"u")return;const i=new IntersectionObserver(s=>{for(const n of s)n.target===e&&t(n.intersectionRatio)},{root:e});return i.observe(e),i}var u_={x:0,y:0,width:0,height:0,top:0,bottom:0,left:0,right:0,toJSON(){return u_}};function XT(e,t){const i=Xt("div");return i.className="ag-charts-tab-guard",e.insertAdjacentElement(t,i),i}var h_=class extends Ra{constructor(e,t){super(),this.styles=new Map,this.container=void 0,this.containerSize=void 0,this.sizeMonitor=new VQ;const i=Xt("div");i.innerHTML=WQ,this.element=i.children.item(0),this.styleRootElement=t,this.rootElements=jQ.reduce((a,l)=>{const c=`ag-charts-${l}`,p=this.element.classList.contains(c)?this.element:this.element.querySelector(`.${c}`);if(!p)throw new Error(`AG Charts - unable to find DOM element ${c}`);return a[l]={element:p,children:new Map,listeners:[]},a},{});let s=!1;this.observer=KQ(this.element,a=>{a===0&&!s&&this.listeners.dispatch("hidden",{type:"hidden"}),s=a===0}),this.setSizeOptions(),this.addStyles("ag-charts-community",PQ),e&&this.setContainer(e),this.destroyFns.push(c_(this.element));const n=this.element.querySelector(".ag-charts-canvas-center");if(n==null)throw new Error("Error initializing tab guards");const r=XT(n,"beforebegin"),o=XT(n,"afterend");this.tabGuards=new NQ(n,r,o)}destroy(){var e;super.destroy(),(e=this.observer)==null||e.unobserve(this.element),this.container&&this.sizeMonitor.unobserve(this.container),Object.values(this.rootElements).forEach(t=>{t.children.forEach(i=>i.remove()),t.element.remove()}),this.element.remove()}setSizeOptions(e=300,t=300,i,s){const{style:n}=this.element;n.width=`${i??e}px`,n.height=`${s??t}px`}updateContainerSize(){var t,i;const{style:e}=this.rootElements["canvas-center"].element;e.width=`${((t=this.containerSize)==null?void 0:t.width)??0}px`,e.height=`${((i=this.containerSize)==null?void 0:i.height)??0}px`}setTabGuardIndex(e){this.tabGuards.tabIndex=e}setContainer(e){if(e===this.container)return;if(this.container&&(this.container.removeChild(this.element),this.sizeMonitor.unobserve(this.container)),!(this.getShadowDocumentRoot(e)!=null))for(const i of this.rootElements.styles.children.keys())this.removeChild("styles",i);this.container=e;for(const[i,s]of this.styles)this.addStyles(i,s);e.appendChild(this.element),this.sizeMonitor.observe(e,i=>{this.containerSize=i,this.updateContainerSize(),this.listeners.dispatch("resize",{type:"resize"})}),this.listeners.dispatch("container-changed",{type:"container-changed"})}setThemeClass(e){const t="ag-charts-theme-";this.element.classList.forEach(i=>{i.startsWith(t)&&i!==e&&this.element.classList.remove(i)}),this.element.classList.add(e)}updateCanvasLabel(e){ii(this.rootElements["canvas-proxy"].element,"aria-label",e)}getEventElement(e,t){return["focus","blur","keydown","keyup"].includes(t)?this.rootElements["series-area"].element:e}addEventListener(e,t,i){this.getEventElement(this.element,e).addEventListener(e,t,i)}removeEventListener(e,t,i){this.getEventElement(this.element,e).removeEventListener(e,t,i)}getBoundingClientRect(){return this.rootElements.canvas.element.getBoundingClientRect()}getOverlayClientRect(){var s;const e=Mi(),t=new Ue(0,0,e.innerWidth,e.innerHeight),i=this.getRawOverlayClientRect();return((s=t.intersection(i))==null?void 0:s.toDOMRect())??u_}getRawOverlayClientRect(){var n,r;let e=this.element;for(;e!=null;){const o=(n=e.computedStyleMap)==null?void 0:n.call(e),a=(r=o==null?void 0:o.get("overflow-y"))==null?void 0:r.toString();if(a==="auto"||a==="scroll")return Ue.fromDOMRect(e.getBoundingClientRect());e=e.parentElement}const t=this.getShadowDocumentRoot();if(t!=null)return Ue.fromDOMRect(t.getBoundingClientRect());const{innerWidth:i,innerHeight:s}=Mi();return new Ue(0,0,i,s)}getShadowDocumentRoot(e=this.container){var i;const t=((i=e==null?void 0:e.ownerDocument)==null?void 0:i.body)??fs("body");for(;e!=null;){if(e===t)return;if(e.parentNode instanceof DocumentFragment)return e;e=e.parentNode}return this.container}getParent(e){return this.rootElements[e].element}getChildBoundingClientRect(e){const{children:t}=this.rootElements[e],i=[];for(const s of t.values())i.push(Ue.fromDOMRect(s.getBoundingClientRect()));return Ue.merge(i)}calculateCanvasPosition(e){let t=0,i=0;const{x:s=0,y:n=0}=this.getChildBoundingClientRect("canvas")??{},r=e.getBoundingClientRect();return t=r.x-s,i=r.y-n,{x:t,y:i}}isManagedChildDOMElement(e,t,i){const{children:s}=this.rootElements[t],n=s==null?void 0:s.get(i);return n!=null&&e.contains(n)}contains(e,t){return t==null?this.element.contains(e):this.rootElements[t].element.contains(e)}addStyles(e,t){const i="data-ag-charts";if(this.styles.set(e,t),this.container==null)return;const s=o=>o.getAttribute(i)===e,n=o=>{const a=new Set(["TITLE","META"]);let l=!0,c;for(const g of o.children){if(l&&a.has(g.tagName)){c=g;continue}if(l=!1,s(g))return;g.hasAttribute(i)&&(c=g)}const p=Xt("style");return c!=null?o.insertBefore(p,c.nextSibling):o.prepend(p),p};let r;this.styleRootElement?r=n(this.styleRootElement):this.getShadowDocumentRoot(this.container)!=null?r=this.addChild("styles",e):r=n(fs("head")),!(r==null||s(r))&&(r.setAttribute(i,e),r.innerHTML=t)}removeStyles(e){this.removeChild("styles",e)}updateCursor(e){this.element.style.cursor=e}getCursor(){return this.element.style.cursor}addChild(e,t,i,s){const{element:n,children:r,listeners:o}=this.rootElements[e];if(!r)throw new Error("AG Charts - unable to create DOM elements after destroy()");if(r.has(t))return r.get(t);const{childElementType:a="div"}=UQ.get(e)??{};if(i&&i.tagName.toLowerCase()!==a.toLowerCase())throw new Error("AG Charts - mismatching DOM element type");const l=i??Xt(a);for(const[c,p,g]of o)l.addEventListener(c,p,g);if(r.set(t,l),s){const c=n.querySelector(s.query);if(c==null)throw new Error(`AG Charts - addChild query failed ${s.query}`);c.insertAdjacentElement(s.where,l)}else n==null||n.appendChild(l);return l}removeChild(e,t){var s;const{children:i}=this.rootElements[e];i&&((s=i.get(t))==null||s.remove(),i.delete(t))}incrementDataCounter(e){const{dataset:t}=this.element;t[e]??(t[e]="0"),t[e]=String(Number(t[e])+1)}setDataBoolean(e,t){this.element.dataset[e]=String(t)}},jR=["blur","change","contextmenu","focus","keydown","keyup","click","dblclick","mouseenter","mousemove","mouseleave","wheel"];function Nd(e,t){const{offsetX:i,offsetY:s,clientX:n,clientY:r}=t;return{type:e,offsetX:i,offsetY:s,clientX:n,clientY:r,sourceEvent:t}}var YQ={blur:e=>({type:"blur",sourceEvent:e}),change:e=>({type:"change",sourceEvent:e}),contextmenu:e=>Nd("contextmenu",e),focus:e=>({type:"focus",sourceEvent:e}),keydown:e=>({type:"keydown",sourceEvent:e}),keyup:e=>({type:"keyup",sourceEvent:e}),click:e=>Nd("click",e),dblclick:e=>Nd("dblclick",e),mouseenter:e=>Nd("mouseenter",e),mousemove:e=>Nd("mousemove",e),mouseleave:e=>Nd("mouseleave",e),wheel:e=>{const{offsetX:t,offsetY:i,clientX:s,clientY:n,deltaX:r,deltaY:o}=e;return{type:"wheel",offsetX:t,offsetY:i,clientX:s,clientY:n,deltaX:r,deltaY:o,sourceEvent:e}}},Bf=class{static alloc(e,t){return YQ[e](t)}static isHTMLEvent(e){return jR.includes(e)}},$Q=class{constructor(){this.maps={}}lazyGetMap(e){let t=this.maps[e];return t===void 0&&(t=new Map,this.maps[e]=t),t}add(e,t,i){const s=this.lazyGetMap(e);if(s.has(i))throw new Error("AG Charts - duplicate add(handler)");const n=r=>{const o=Bf.alloc(e,r);i(o,t)};t.getElement().addEventListener(e,n),s.set(i,n)}remove(e,t,i){const s=this.lazyGetMap(e),n=s.get(i);n&&t.getElement().removeEventListener(e,n),s.delete(i)}destroy(e){for(const t of Object.keys(this.maps))this.typedDestroy(t,e)}typedDestroy(e,t){const i=this.maps[e];if(i!=null)for(const[s,n]of i.entries())t.getElement().removeEventListener(e,n)}};function db(e,t,i){const s=i.pageX-t.pageX,n=i.pageY-t.pageY;return{type:e,offsetX:t.offsetX+s,offsetY:t.offsetY+n,clientX:i.clientX,clientY:i.clientY,originDeltaX:s,originDeltaY:n,sourceEvent:i}}function ZQ(e,t,i){if(e.globalDragCallbacks!=null)return;const s=Mi(),n=a=>{a.stopPropagation(),a.stopImmediatePropagation()},r=a=>{var l;a.stopPropagation(),a.stopImmediatePropagation(),(l=e.globalDragCallbacks)==null||l.move(a)},o=a=>{var l;a.button===0&&(a.stopPropagation(),a.stopImmediatePropagation(),s.removeEventListener("mousedown",n,{capture:!0}),s.removeEventListener("mouseenter",n,{capture:!0}),s.removeEventListener("mouseleave",n,{capture:!0}),s.removeEventListener("mouseout",n,{capture:!0}),s.removeEventListener("mouseover",n,{capture:!0}),s.removeEventListener("mousemove",r,{capture:!0}),s.removeEventListener("mouseup",o,{capture:!0}),(l=e.globalDragCallbacks)==null||l.up(a),e.globalDragCallbacks=void 0)};s.addEventListener("mousedown",n,{capture:!0}),s.addEventListener("mouseenter",n,{capture:!0}),s.addEventListener("mouseleave",n,{capture:!0}),s.addEventListener("mouseout",n,{capture:!0}),s.addEventListener("mouseover",n,{capture:!0}),s.addEventListener("mousemove",r,{capture:!0}),s.addEventListener("mouseup",o,{capture:!0}),e.globalDragCallbacks=t,e.globalDragCallbacks.down(i)}var XQ=class by{destroy(){var t;(t=this.dragTriggerRemovers)==null||t.forEach(i=>i()),this.dragTriggerRemovers=void 0,this.dragStartListeners=void 0,this.dragMoveListeners=void 0,this.dragEndListeners=void 0,by.globalDragCallbacks===this.localDragCallbacks&&(by.globalDragCallbacks=void 0)}add(t,i,s){switch(t){case"drag-start":{this.dragStartListeners??(this.dragStartListeners=[]),this.dragStartListeners.push(s),this.registerDragTrigger(i,s);break}case"drag-move":{this.dragMoveListeners??(this.dragMoveListeners=[]),this.dragMoveListeners.push(s);break}case"drag-end":{this.dragEndListeners??(this.dragEndListeners=[]),this.dragEndListeners.push(s);break}}}remove(t,i,s){switch(t){case"drag-start":return this.removeHandler(this.dragStartListeners,s);case"drag-move":return this.removeHandler(this.dragMoveListeners,s);case"drag-end":return this.removeHandler(this.dragEndListeners,s)}}removeHandler(t,i){const s=t==null?void 0:t.indexOf(i);s!==void 0&&(t==null||t.splice(s,1))}registerDragTrigger(t,i){const s=n=>n.button===0&&this.startDrag(t,n);t.getElement().addEventListener("mousedown",s),this.dragTriggerRemovers??(this.dragTriggerRemovers=new Map),this.dragTriggerRemovers.set(i,()=>t.getElement().removeEventListener("mousedown",s))}startDrag(t,i){const s={pageX:NaN,pageY:NaN,offsetX:NaN,offsetY:NaN};Pc(["pageX","pageY","offsetX","offsetY"],s,i);const n={down:r=>{this.localDragCallbacks=n;const o=db("drag-start",s,r);this.dispatch("drag-start",t,o)},move:r=>{const o=db("drag-move",s,r);this.dispatch("drag-move",t,o)},up:r=>{const o=db("drag-end",s,r);this.dispatch("drag-end",t,o),this.endDrag(t,o)}};ZQ(by,n,i)}endDrag(t,{sourceEvent:i,clientX:s,clientY:n}){var a;const r=t.getElement(),o=r.getBoundingClientRect();BC.containsPoint(o,s,n)||(r.dispatchEvent(new MouseEvent("mouseleave",i)),(a=i.target)==null||a.dispatchEvent(new MouseEvent("mouseenter",i)))}dispatch(t,i,s){var n,r,o;switch(t){case"drag-start":return(n=this.dragStartListeners)==null?void 0:n.forEach(a=>a(s,i));case"drag-move":return(r=this.dragMoveListeners)==null?void 0:r.forEach(a=>a(s,i));case"drag-end":return(o=this.dragEndListeners)==null?void 0:o.forEach(a=>a(s,i))}}},QQ=class{constructor(e){this.elem=e}setBounds(e){kf(this.elemContainer??this.elem,e)}getBounds(){return EO(this.elemContainer??this.elem)}static setElementContainer(e,t){const i=e.getBounds();kf(t,i),kQ(e.elem,{width:"100%",height:"100%"}),e.elem.remove(),e.elemContainer=t,e.elemContainer.replaceChildren(e.elem)}},Pl=class extends QQ{constructor(e){super(e),this.elem=e,this.index=NaN,this.children=[]}getElement(){return this.elem}get clientWidth(){return this.elem.clientWidth}get clientHeight(){return this.elem.clientHeight}destroy(){var e,t,i,s;(e=this.parent)==null||e.removeChild(this),this.children.forEach(n=>{n.parent=void 0,n.destroy()}),this.children.length=0,this.destructor(),this.elem.remove(),(t=this.elemContainer)==null||t.remove(),(i=this.internalListener)==null||i.destroy(),(s=this.htmlListener)==null||s.destroy(this)}setHidden(e){Lo(this.elem,"display",e?"none":void 0)}isHidden(){var e,t;return((t=(e=Mi())==null?void 0:e.getComputedStyle)==null?void 0:t.call(e,this.elem).display)==="none"}setCursor(e){Lo(this.elem,"cursor",e)}setTextContent(e){this.elem.textContent=e??null}setAriaDescribedBy(e){ii(this.elem,"aria-describedby",e)}setAriaHidden(e){ii(this.elem,"aria-hidden",e)}setAriaLabel(e){ii(this.elem,"aria-label",e)}setInnerHTML(e){this.elem.innerHTML=e}isDisabled(){return lS(this.elem,"aria-disabled",!1)}parseFloat(e){return e===""?0:parseFloat(e)}cssLeft(){return this.parseFloat(this.elem.style.left)}cssTop(){return this.parseFloat(this.elem.style.top)}focus(){this.elem.focus()}setPreventsDefault(e){ii(this.elem,"data-preventdefault",e)}setTabIndex(e){ii(this.elem,"tabindex",e)}addChild(e){this.addChildToDOM(e,this.getBefore(e)),this.children.push(e),e.index=this.children.length-1,e.parent=this,this.onChildAdded(e)}removeChild(e){const t=this.children.findIndex(i=>i===e);this.children.splice(t,1),this.removeChildFromDOM(e),this.onChildRemoved(e)}addClass(...e){this.elem.classList.add(...e)}removeClass(...e){this.elem.classList.remove(...e)}toggleClass(e,t){this.elem.classList.toggle(e,t)}appendOrInsert(e,t){t?t.getElement().insertAdjacentElement("beforebegin",e):this.elem.appendChild(e)}addChildToDOM(e,t){this.appendOrInsert(e.getElement(),t)}removeChildFromDOM(e){this.elem.removeChild(e.getElement())}onChildAdded(e){}onChildRemoved(e){}getBefore({domIndex:e}){if(e!==void 0)return this.children.filter(t=>t.domIndex!==void 0&&t.domIndex>e).reduce((t,i)=>!t||i.domIndex<t.domIndex?i:t,void 0)}addListener(e,t){Bf.isHTMLEvent(e)?(this.htmlListener??(this.htmlListener=new $Q),this.htmlListener.add(e,this,t)):(this.internalListener??(this.internalListener=new XQ),this.internalListener.add(e,this,t))}removeListener(e,t){var i,s;Bf.isHTMLEvent(e)?(i=this.htmlListener)==null||i.remove(e,this,t):this.htmlListener!=null&&((s=this.internalListener)==null||s.remove(e,this,t))}},qQ=class extends Pl{constructor(){super(fs().createElement("div")),this.textElement=SM("http://www.w3.org/2000/svg","text"),this.textElement.role="presentation",this.svgElement=SM("http://www.w3.org/2000/svg","svg"),this.svgElement.appendChild(this.textElement),this.svgElement.style.width="100%",this.svgElement.style.opacity="0",this.svgElement.role="presentation",this.elem.appendChild(this.svgElement),this.elem.role="presentation"}set textContent(e){var s;this.textElement.textContent=e;const t=this.textElement,i=(s=t.getBBox)==null?void 0:s.call(t);i&&this.svgElement.setAttribute("viewBox",`${i.x} ${i.y} ${i.width} ${i.height}`)}get textContent(){return this.textElement.textContent}destructor(){}},Sm=class extends Pl{constructor(){super(fs().createElement("button")),this.setEnabled(!0)}destructor(){}setEnabled(e){ii(this.elem,"aria-disabled",!e),Lo(this.elem,"pointer-events",e?void 0:"none")}addListener(e,t){return super.addListener(e,(i,s)=>{(e==="click"||e==="dblclick")&&this.isDisabled()||t(i,s)})}},JQ=class extends Pl{constructor(){super(fs().createElement("div")),ii(this.elem,"role","group")}destructor(){}},d_=class extends Pl{constructor(e,t){super(fs().createElement("div")),this.focusedChildIndex=0,this.onChildFocus=(i,s)=>{const n=this.children[this.focusedChildIndex];this.focusedChildIndex=s.index,n==null||n.setTabIndex(-1),s.setTabIndex(0)},this.onChildKeyDown=(i,s)=>{var l;const n=this.orientation,[r,o]=n==="both"?[tp.horizontal,tp.vertical]:[tp[n],void 0];let a=-1;if(cS(i.sourceEvent)){const c=i.sourceEvent.key;c===r.nextKey||c===(o==null?void 0:o.nextKey)?a=s.index+1:(c===r.prevKey||c===(o==null?void 0:o.prevKey))&&(a=s.index-1)}(l=this.children[a])==null||l.focus()},this.orientation=e,ii(this.elem,"role",t)}get orientation(){return lS(this.elem,"aria-orientation")??"both"}set orientation(e){ii(this.elem,"aria-orientation",e!=="both"?e:void 0)}focus(){var e;(e=this.children[this.focusedChildIndex])==null||e.focus()}onChildAdded(e){e.addListener("focus",this.onChildFocus),e.addListener("keydown",this.onChildKeyDown),e.setTabIndex(this.children.length===1?0:-1)}onChildRemoved(e){e.removeListener("focus",this.onChildFocus),e.removeListener("keydown",this.onChildKeyDown)}},eq=class extends d_{constructor(){super("both","list"),this.setHidden(!0)}destructor(){this.children.forEach(e=>e.getElement().parentElement.remove())}addChildToDOM(e,t){const i=fs().createElement("div");ii(i,"role","listitem"),Lo(i,"position","absolute"),Pl.setElementContainer(e,i),this.appendOrInsert(i,t),this.setHidden(!1)}removeChildFromDOM(e){e.getElement().parentElement.remove(),this.setHidden(this.children.length===0)}setHidden(e){this.children.length===0&&(e=!0),super.setHidden(e)}},Hc=class extends Pl{constructor(e){super(e)}destructor(){}},UR=class Zg extends Pl{constructor(){super(fs().createElement("input")),this._step=Zg.STEP_ONE,this.orientation="both"}get step(){return this._step}set step(t){this._step=t,this.getElement().step=t.attributeValue}get keyboardStep(){var t;return((t=this._keyboardStep)==null?void 0:t.step)??this._step}set keyboardStep(t){var i;if(t!==((i=this._keyboardStep)==null?void 0:i.step)&&(this._keyboardStep!==void 0&&(this.removeListener("keydown",this._keyboardStep.onKeyDown),this.removeListener("keyup",this._keyboardStep.onKeyUp),this.removeListener("blur",this._keyboardStep.onBlur),this._keyboardStep=void 0),t!==void 0)){const s=()=>this.getElement().step=t.attributeValue,n=()=>this.getElement().step=this._step.attributeValue;this._keyboardStep={step:t,onKeyDown:s,onKeyUp:n,onBlur:n},this.addListener("keydown",this._keyboardStep.onKeyDown),this.addListener("keyup",this._keyboardStep.onKeyUp),this.addListener("blur",this._keyboardStep.onBlur)}}get orientation(){return lS(this.elem,"aria-orientation")??"both"}set orientation(t){ii(this.elem,"aria-orientation",t!=="both"?t:void 0),Zg.registerDefaultPreventers(this,t)}destructor(){}clampValueRatio(t,i){const s=this.getValueRatio(),n=St(t,s,i);return n!==s&&this.setValueRatio(n),n}setValueRatio(t,i){const{divider:s}=this.step,n=Math.round(t*1e4)/s,{ariaValueText:r=OO(n/s)}=i??{},o=this.getElement();o.value=`${n}`,o.ariaValueText=r}getValueRatio(){return parseFloat(this.getElement().value)/this.step.divider}static registerDefaultPreventers(t,i){i==="both"?t.removeListener("keydown",Zg.onKeyDown):t.addListener("keydown",Zg.onKeyDown)}static onKeyDown(t,i){let s=[];const{orientation:n}=i;n==="horizontal"?s=["ArrowUp","ArrowDown"]:n==="vertical"&&(s=["ArrowLeft","ArrowRight"]),s.includes(t.sourceEvent.code)&&t.sourceEvent.preventDefault()}};UR.STEP_ONE={attributeValue:"1",divider:1};UR.STEP_HUNDRETH={attributeValue:"0.01",divider:100};var KR=UR,tq=class extends Sm{constructor(){super(),ii(this.elem,"role","switch"),this.setChecked(!1)}setChecked(e){ii(this.elem,"aria-checked",e)}},uS=class extends d_{constructor(e="horizontal"){super(e,"toolbar")}destructor(){}};function Od(e,t){var i;return((i=t.params)==null?void 0:i.type)===e}function iq(e){if(e==="button")return new Sm;if(e==="slider")return new KR;if(e==="toolbar")return new uS;if(e==="group")return new JQ;if(e==="list")return new eq;if(e==="region")return new Hc(Xt("div"));if(e==="text")return new qQ;if(e==="listswitch")return new tq;throw Error("AG Charts - error allocating meta")}function QT(e){const t={params:e,result:void 0};return t.result=iq(t.params.type),t}var p_=class{constructor(e,t){this.localeManager=e,this.domManager=t,this.destroyFns=[]}destroy(){this.destroyFns.forEach(e=>e())}addLocalisation(e){e(),this.destroyFns.push(this.localeManager.addListener("locale-changed",e))}createProxyContainer(e){const t=QT(e),{params:i,result:s}=t,n=s.getElement();return this.domManager.addChild("canvas-proxy",i.domManagerId,n),n.classList.add(...i.classList,"ag-charts-proxy-container"),n.role=i.type,"ariaOrientation"in i&&(n.ariaOrientation=i.ariaOrientation),Od("toolbar",t)&&(t.result.orientation=t.params.orientation),this.addLocalisation(()=>{n.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),s}createProxyElement(e){const t=QT(e);if(Od("button",t)){const{params:i,result:s}=t,n=s.getElement();if(this.initInteract(i,s),typeof i.textContent=="string")n.textContent=i.textContent;else{const{textContent:r}=i;this.addLocalisation(()=>{n.textContent=this.localeManager.t(r.id,r.params)})}this.setParent(t.params,t.result)}if(Od("slider",t)){const{params:i,result:s}=t,n=s.getElement();this.initInteract(i,s),n.type="range",n.role="presentation",n.style.margin="0px",this.addLocalisation(()=>{n.ariaLabel=this.localeManager.t(i.ariaLabel.id,i.ariaLabel.params)}),this.setParent(t.params,t.result)}if(Od("text",t)){const{params:i,result:s}=t;this.initElement(i,s),this.setParent(t.params,t.result)}if(Od("listswitch",t)){const{params:i,result:s}=t;this.initInteract(i,s),s.setTextContent(i.textContent),s.setChecked(i.ariaChecked),s.setAriaDescribedBy(i.ariaDescribedBy),this.setParent(t.params,t.result)}if(Od("region",t)){const{params:i,result:s}=t,n=s.getElement();this.initInteract(i,s),n.role="region",this.setParent(t.params,t.result)}return t.result}initElement(e,t){const i=t.getElement();return ii(i,"id",e.id),Lo(i,"cursor",e.cursor),i.classList.toggle("ag-charts-proxy-elem",!0),i}initInteract(e,t){const{tabIndex:i,domIndex:s}=e,n=this.initElement(e,t);i!==void 0&&(n.tabIndex=i),s!==void 0&&(t.domIndex=s)}setParent(e,t){var i;if("parent"in e)(i=e.parent)==null||i.addChild(t);else{const s={where:e.where,query:".ag-charts-series-area"};this.domManager.addChild("canvas-proxy",e.domManagerId,t.getElement(),s)}}},sq=/\$\{(\w+)}(?:\[(\w+)])?/gi,pb={number:new Intl.NumberFormat("en-US"),percent:new Intl.NumberFormat("en-US",{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2}),date:new Intl.DateTimeFormat("en-US",{dateStyle:"full"}),time:new Intl.DateTimeFormat("en-US",{timeStyle:"full"}),datetime:new Intl.DateTimeFormat("en-US",{dateStyle:"full",timeStyle:"full"})},nq=({defaultValue:e,variables:t})=>e==null?void 0:e.replaceAll(sq,(i,s,n)=>{const r=t[s],o=n!=null?pb[n]:null;return n!=null&&o==null&&_e.warnOnce(`Format style [${n}] is not supported`),o!=null?o.format(r):typeof r=="number"?pb.number.format(r):r instanceof Date?pb.datetime.format(r):String(r)}),rq=class extends Ma{constructor(){super(...arguments),this.localeText=void 0,this.getLocaleText=void 0}setLocaleText(e){this.localeText!==e&&(this.localeText=e,this.dispatch("locale-changed"))}setLocaleTextFormatter(e){this.getLocaleText=e,this.getLocaleText!==e&&(this.getLocaleText=e,this.dispatch("locale-changed"))}t(e,t={}){const{localeText:i=W6,getLocaleText:s}=this,n=i[e];return(s==null?void 0:s({key:e,defaultValue:n,variables:t}))??nq({key:e,defaultValue:n,variables:t})??e}};function g_({context:e,pixelRatio:t,width:i,height:s}){e.save(),e.setTransform(t,0,0,t,0,0),e.clearRect(0,0,i,s),e.restore()}function f_(e){if(ci.check("canvas")){const t=e.save.bind(e),i=e.restore.bind(e);let s=0;Object.assign(e,{save(){t(),s++},restore(){if(s===0)throw new Error("AG Charts - Unable to restore() past depth 0");i(),s--},verifyDepthZero(){if(s!==0)throw new Error(`AG Charts - Save/restore depth is non-zero: ${s}`)}})}}var YR=class{constructor(e){this.enabled=!0,this.width=600,this.height=300;const{width:t,height:i,pixelRatio:s,canvasElement:n,willReadFrequently:r=!1}=e;this.pixelRatio=s??Mi("devicePixelRatio"),this.element=n??Xt("canvas"),this.element.style.display="block",this.element.style.width=(t??this.width)+"px",this.element.style.height=(i??this.height)+"px",this.element.width=Math.round((t??this.width)*this.pixelRatio),this.element.height=Math.round((i??this.height)*this.pixelRatio),this.context=this.element.getContext("2d",{willReadFrequently:r}),this.onEnabledChange(),this.resize(t??0,i??0),f_(this.context)}drawImage(e,t=0,i=0){return e.drawImage(this.context.canvas,t,i)}toDataURL(e){return this.element.toDataURL(e)}resize(e,t){if(!(e>0&&t>0))return;const{element:i,context:s,pixelRatio:n}=this;i.width=Math.round(e*n),i.height=Math.round(t*n),s.setTransform(n,0,0,n,0,0),i.style.width=e+"px",i.style.height=t+"px",this.width=e,this.height=t}clear(){g_(this)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}onEnabledChange(){this.element&&(this.element.style.display=this.enabled?"":"none")}};A([Oh(e=>e.onEnabledChange())],YR.prototype,"enabled",2);var oq=class{constructor(e){this.width=600,this.height=300;const{width:t,height:i,pixelRatio:s,willReadFrequently:n=!1}=e;this.pixelRatio=s??Mi("devicePixelRatio"),this.canvas=new OffscreenCanvas(t??this.width,i??this.height),this.context=this.canvas.getContext("2d",{willReadFrequently:n}),this.resize(t??0,i??0),f_(this.context)}drawImage(e,t=0,i=0){return e.drawImage(this.context.canvas,t,i)}resize(e,t){if(!(e>0&&t>0))return;const{canvas:i,context:s,pixelRatio:n}=this;i.width=Math.round(e*n),i.height=Math.round(t*n),s.setTransform(n,0,0,n,0,0),this.width=e,this.height=t}clear(){g_(this)}destroy(){this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0),this.canvas=null,this.context=null,Object.freeze(this)}},aq=class{constructor(e){this.canvas=e,this.debug=ci.create(!0,"scene"),this.layersMap=new Map,this.nextLayerId=0}get size(){return this.layersMap.size}resize(e,t){this.canvas.resize(e,t),this.layersMap.forEach(({canvas:i})=>i.resize(e,t))}addLayer(e){const{width:t,height:i,pixelRatio:s}=this.canvas,{name:n}=e,r=new oq({width:t,height:i,pixelRatio:s});return this.layersMap.set(r,{id:this.nextLayerId++,name:n,canvas:r}),this.debug("Scene.addLayer() - layers",this.layersMap),r}removeLayer(e){this.layersMap.has(e)&&(this.layersMap.delete(e),e.destroy(),this.debug("Scene.removeLayer() -  layers",this.layersMap))}clear(){for(const e of this.layersMap.values())e.canvas.destroy();this.layersMap.clear()}},m_=class v_{constructor(){this.offscreenCanvas=new OffscreenCanvas(1,1),v_.offscreenCanvasCount++;const t=this.offscreenCanvas.getContext("2d");if(t==null)throw new TypeError("AG Charts - invalid 2d context");this.renderCtx={ctx:t,devicePixelRatio:1,resized:!1,debugNodes:{}}}resize({spritePixelRatio:t,spriteWidth:i,spriteHeight:s}){this.offscreenCanvas.width=Math.max(i,0)*t,this.offscreenCanvas.height=Math.max(s,0)*t}renderSprite(t,i){t=wN(t);const{renderCtx:s,renderCtx:{ctx:n},offscreenCanvas:r}=this,{scale:o=1,translateX:a=0,translateY:l=0}=i??{};n.save(),n.resetTransform(),n.clearRect(0,0,r.width,r.height),n.beginPath(),n.setTransform(o,0,0,o,a,l);for(const c of t)c.preRender(),c.render(s);return n.closePath(),n.restore(),r.transferToImageBitmap()}};m_.offscreenCanvasCount=0;var y_=m_;function lq(e){for(const t of["B","KB","MB","GB"]){if(e<1536)return`${e.toFixed(1)}${t}`;e/=1024}return`${e.toFixed(1)}TB}`}function cq(){if(!("memory"in performance))return;const{totalJSHeapSize:e,usedJSHeapSize:t,jsHeapSizeLimit:i}=performance.memory,s=[];for(const n of[t,e,i])typeof n=="number"&&s.push(lq(n));return`Heap ${s.join(" / ")}`}function qT(e,t,i,s,n={},r=Ue.zero){if(!ci.check("scene:stats","scene:stats:verbose"))return;const{layersRendered:o=0,layersSkipped:a=0,nodesRendered:l=0,nodesSkipped:c=0,opsPerformed:p=0,opsSkipped:g=0}=s??{},f=performance.now(),{start:y,...C}=t,x=Object.entries(C).map(([U,$])=>JT(U,$)).filter(U=>U!=null).join(" + "),M=Object.entries(n).map(([U,$])=>`${U}: ${JSON.stringify($)}`).join(" ; "),b=ci.check("scene:stats:verbose"),R=cq(),I=[`${JT("⏱️",y,f)} (${x})`,`${M}`,`Layers: ${b?gb(o,a):e.size}; Sprites: ${y_.offscreenCanvasCount}`,b?`Nodes: ${gb(l,c)}`:null,b?`Ops: ${gb(p,g)}`:null,b&&R?R:null].filter(Vn),P=new LR(U=>i.measureText(U)),k=new Map(I.map(U=>[U,P.measureLines(U)])),_=Math.max(...Array.from(k.values(),U=>U.width)),B=fq(k.values(),U=>U.height),H=2+r.x;i.save(),i.fillStyle="white",i.fillRect(H,0,_,B),i.fillStyle="black";let V=0;for(const[U,$]of k.entries())V+=$.height,i.fillText(U,H,V);i.restore()}function uq(e){const t=Af(Mi("agChartsSceneDebug")),i=[];for(const s of t)s==="layout"?i.push("seriesRoot","legend","root",/.*Axis-\d+-axis.*/):i.push(s);e.debugNodeSearch=i}function hq(e,t){e.save();for(const[i,s]of Object.entries(t)){const n=ji.toCanvas(s);if(!n){_e.log(`Scene.render() - no bbox for debugged node [${i}].`);continue}e.globalAlpha=.8,e.strokeStyle="red",e.lineWidth=1,e.strokeRect(n.x,n.y,n.width,n.height),e.fillStyle="red",e.strokeStyle="white",e.font="16px sans-serif",e.textBaseline="top",e.textAlign="left",e.lineWidth=2,e.strokeText(i,n.x,n.y,n.width),e.fillText(i,n.x,n.y,n.width)}e.restore()}var dq=new Set,pq=new Set(["gradient","zIndex","clipRect","cachedBBox","childNodeCounts","path","__zIndex","name","__scalingCenterX","__scalingCenterY","__rotationCenterX","__rotationCenterY","_previousDatum","__fill","__lineDash","borderPath","borderClipPath","_clipPath"]);function gq(e){const{...t}=e;for(const i of Object.keys(t))pq.has(i)||typeof t[i]!="number"&&typeof t[i]!="string"&&typeof t[i]!="boolean"&&(dq.add(i),delete t[i]);return t}function My(e,t){if(!ci.check(!0,"scene"))return{};let i=0;return{node:t==="json"?gq(e):e,name:e.name??e.id,dirty:e.dirty,...Array.from(e.children(),s=>My(s,t)).reduce((s,n)=>{let{name:r}=n;const{node:{visible:o,opacity:a,zIndex:l,translationX:c,translationY:p,rotation:g,scalingX:f,scalingY:y},node:C}=n;(!o||a<=0)&&(r=`(${r})`),lt.is(C)&&C.renderToOffscreenCanvas&&(r=`*${r}*`);const x=Array.isArray(l)?`(${l.join(", ")})`:l,M=[`${(i++).toString().padStart(3,"0")}|`,`${r??"<unknown>"}`,`z: ${x}`,c&&`x: ${c}`,p&&`y: ${p}`,g&&`r: ${g}`,f!=null&&f!==1&&`sx: ${f}`,y!=null&&y!==1&&`sy: ${y}`].filter(I=>!!I).join(" ");let b=M,R=1;for(;s[b]!=null&&R<100;)b=`${M} (${R++})`;return s[b]=n,s},{})}}function C_(e){if(!e.dirty)return{dirtyTree:{},paths:[]};const t=Array.from(e.children(),n=>C_(n)).filter(n=>n.paths.length>0),i=lt.is(e)?e.name??e.id:e.id,s=t.length?t.flatMap(n=>n.paths).map(n=>`${i}.${n}`):[i];return{dirtyTree:{name:i,node:e,dirty:e.dirty,...t.map(n=>n.dirtyTree).filter(n=>n.dirty!=null).reduce((n,r)=>(n[r.name??"<unknown>"]=r,n),{})},paths:s}}function gb(e,t){const i=e+t;return`${e} / ${i} (${Math.round(100*e/i)}%)`}function JT(e,t,i){const s=i!=null?i-t:t;return`${e}: ${Math.round(s*100)/100}ms`}function fq(e,t){let i=0;for(const s of e)i+=t(s);return i}var hS=class{constructor(e){this.debug=ci.create(!0,"scene"),this.id=Qr(this),this.root=null,this.pendingSize=null,this.isDirty=!1,this.canvas=new YR(e),this.layersManager=new aq(this.canvas)}get width(){var e;return((e=this.pendingSize)==null?void 0:e[0])??this.canvas.width}get height(){var e;return((e=this.pendingSize)==null?void 0:e[1])??this.canvas.height}setContainer(e){var i;const{element:t}=this.canvas;return(i=t.parentElement)==null||i.removeChild(t),e.appendChild(t),this}setRoot(e){var t;return this.root===e?this:(this.isDirty=!0,(t=this.root)==null||t._setLayerManager(),this.root=e,e&&(e.visible=!0,e._setLayerManager(this.layersManager)),this)}clear(){this.canvas.clear()}attachNode(e){return this.appendChild(e),()=>this.removeChild(e)}appendChild(e){var t;return(t=this.root)==null||t.appendChild(e),this}removeChild(e){var t;return(t=this.root)==null||t.removeChild(e),this}download(e,t){MO(this.canvas.toDataURL(t),(e==null?void 0:e.trim())??"image")}getDataURL(e){return this.canvas.toDataURL(e)}resize(e,t){return e=Math.round(e),t=Math.round(t),e>0&&t>0&&(e!==this.width||t!==this.height)?(this.pendingSize=[e,t],this.isDirty=!0,!0):!1}render(e){var g;const{debugSplitTimes:t={start:performance.now()},extraDebugStats:i,seriesRect:s}=e??{},{canvas:n,canvas:{context:r}={},root:o,pendingSize:a}=this;if(!r)return;const l=performance.now();if(a&&(this.layersManager.resize(...a),this.pendingSize=null),o&&!o.visible){this.isDirty=!1;return}if((o==null?void 0:o.dirty)===!1&&!this.isDirty){this.debug.check()&&this.debug("Scene.render() - no-op",{tree:My(o,"console")}),qT(this.layersManager,t,r,void 0,i,s);return}const c={ctx:r,devicePixelRatio:this.canvas.pixelRatio??1,resized:!!a,debugNodes:{}};ci.check("scene:stats:verbose")&&(c.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0,opsPerformed:0,opsSkipped:0}),uq(c);let p=!1;if((o==null?void 0:o.dirty)!==!1&&(p=!0,n.clear()),o&&ci.check("scene:dirtyTree")){const{dirtyTree:f,paths:y}=C_(o);ci.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:f,paths:y})}if(o&&p){if(o.visible&&o.preRender(),this.debug.check()){const f=My(o,"console");this.debug("Scene.render() - before",{canvasCleared:p,tree:f})}o.visible&&(r.save(),o.render(c),r.restore())}t["✍️"]=performance.now()-l,(g=r.verifyDepthZero)==null||g.call(r),this.isDirty=!1,qT(this.layersManager,t,r,c.stats,i,s),hq(r,c.debugNodes),o&&this.debug.check()&&this.debug("Scene.render() - after",{tree:My(o,"console"),canvasCleared:p})}toSVG(){const{root:e,width:t,height:i}=this;if(e!=null)return Xc.toSVG(e,t,i)}strip(){const{context:e,pixelRatio:t}=this.canvas;e.setTransform(t,0,0,t,0,0),this.layersManager.clear(),this.setRoot(null),this.isDirty=!1}destroy(){this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0})}};hS.className="Scene";var mq=class{constructor(){this.cache=new WeakMap}call(e,...t){let i,s=this.cache.get(e);try{i=JSON.stringify(t)}catch{return this.invoke(e,t,s)}return s==null&&(s=new Map,this.cache.set(e,s)),s.has(i)?s.get(i):this.invoke(e,t,s,i)}invoke(e,t,i,s){try{const n=e(...t);return i&&s!=null&&i.set(s,n),n}catch(n){_e.warnOnce("User callback errored, ignoring",n);return}}invalidateCache(){this.cache=new WeakMap}},vq=class extends Ra{constructor(e){super(),this.annotationRoot=e,this.mementoOriginatorKey="annotations",this.annotations=[]}createMemento(){return this.annotations}guardMemento(e){return e==null||bi(e)}restoreMemento(e,t,i){this.annotations=this.cleanData(i??[]).map(s=>{const n=this.getAnnotationTypeStyles(s.type);return Et(s,n)}),this.listeners.dispatch("restore-annotations",{type:"restore-annotations",annotations:this.annotations})}updateData(e){this.annotations=this.cleanData(e??[])}attachNode(e){return this.annotationRoot.append(e),()=>{var t;return(t=this.annotationRoot)==null||t.removeChild(e),this}}setAnnotationStyles(e){this.styles=e}getAnnotationTypeStyles(e){var t;return(t=this.styles)==null?void 0:t[e]}cleanData(e){for(const t of e)"textAlign"in t&&delete t.textAlign;return e}},yq=class{constructor(e){this.sceneRoot=e,this.axes=new Map,this.axisGridGroup=new lt({name:"Axes-Grids",zIndex:1}),this.axisGroup=new lt({name:"Axes",zIndex:2}),this.axisLabelGroup=new lt({name:"Axes-Labels",zIndex:12}),this.axisCrosslineRangeGroup=new lt({name:"Axes-Crosslines-Range",zIndex:3}),this.axisCrosslineLineGroup=new lt({name:"Axes-Crosslines-Line",zIndex:7}),this.axisCrosslineLabelGroup=new lt({name:"Axes-Crosslines-Label",zIndex:12}),this.sceneRoot.appendChild(this.axisGroup),this.sceneRoot.appendChild(this.axisGridGroup),this.sceneRoot.appendChild(this.axisLabelGroup),this.sceneRoot.appendChild(this.axisCrosslineRangeGroup),this.sceneRoot.appendChild(this.axisCrosslineLineGroup),this.sceneRoot.appendChild(this.axisCrosslineLabelGroup)}updateAxes(e,t){var s;const i={axisNode:this.axisGroup,gridNode:this.axisGridGroup,labelNode:this.axisLabelGroup,crossLineRangeNode:this.axisCrosslineRangeGroup,crossLineLineNode:this.axisCrosslineLineGroup,crossLineLabelNode:this.axisCrosslineLabelGroup};for(const n of e)t.includes(n)||(n.detachAxis(i),n.destroy());for(const n of t)e!=null&&e.includes(n)||n.attachAxis(i);this.axes.clear();for(const n of t){const r=n.createAxisContext();this.axes.has(r.direction)?(s=this.axes.get(r.direction))==null||s.push(r):this.axes.set(r.direction,[r])}}getAxisContext(e){return this.axes.get(e)??[]}destroy(){this.axes.clear(),this.sceneRoot.removeChild(this.axisGroup),this.sceneRoot.removeChild(this.axisGridGroup)}},dS=class extends Ma{constructor(e){super(),this.animationManager=e,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.isLoadingData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=ci.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(e){typeof e=="function"&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=e,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(e){this.isLoadingData=!0,this.throttledFetch(e)}isLazy(){return this.dataSourceCallback!=null}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.isLoadingData)}createThrottledFetch(e){return fM(t=>this.fetch(t).catch(i=>_e.error("callback failed",i)),e,{leading:!1,trailing:!0})}createThrottledDispatch(e){return fM((t,i)=>{this.debug(`DataService - dispatching 'data-load' | ${t}`),this.dispatch("data-load",{type:"data-load",data:i})},e,{leading:!0,trailing:!0})}async fetch(e){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const t=performance.now(),i=this.requestCounter++;this.debug(`DataService - requesting | ${i}`),this.freshRequests.push(i);let s;try{s=await this.dataSourceCallback(e),this.debug(`DataService - response | ${performance.now()-t}ms | ${i}`)}catch(r){this.debug(`DataService - request failed | ${i}`),_e.errorOnce(`DataService - request failed | [${r}]`)}this.isLoadingInitialData=!1;const n=this.freshRequests.findIndex(r=>r===i);if(n===-1||this.dispatchOnlyLatest&&n!==this.freshRequests.length-1){this.debug(`DataService - discarding stale request | ${i}`);return}this.freshRequests=this.freshRequests.slice(n+1),this.freshRequests.length===0&&(this.isLoadingData=!1),Array.isArray(s)?this.throttledDispatch(i,s):this.dispatch("data-error")}};A([vr({newValue(e){this.throttledDispatch=this.createThrottledDispatch(e)}})],dS.prototype,"dispatchThrottle",2);A([vr({newValue(e){this.throttledFetch=this.createThrottledFetch(e)}})],dS.prototype,"requestThrottle",2);var eA=class{constructor(e){this.maxAnimationTime=e,this.debug=ci.create(!0,"animation"),this.controllers=new Map,this.stoppedCbs=new Set,this.currentPhase=0,this.phases=new Map(Hd.map(t=>[t,[]])),this.skipAnimations=!1,this.animationTimeConsumed=0,this.isReady=!1}get size(){return this.controllers.size}get consumedTimeMs(){return this.animationTimeConsumed}isActive(){return this.controllers.size>0}getActiveControllers(){return this.phases.get(Hd[this.currentPhase])??[]}checkOverlappingId(e){e!=null&&this.controllers.has(e)&&(this.controllers.get(e).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${e}`),this.skip())}addAnimation(e){var i;if(e.isComplete)return;if(Hd.indexOf(e.phase)<this.currentPhase){this.debug("Skipping animation due to being for an earlier phase",e.id),e.stop();return}this.controllers.set(e.id,e),(i=this.phases.get(e.phase))==null||i.push(e)}removeAnimation(e){this.controllers.delete(e.id);const t=this.phases.get(e.phase),i=t==null?void 0:t.indexOf(e);i!=null&&i>=0&&(t==null||t.splice(i,1))}progress(e){if(!this.isReady)return;let t=e===0?.01:e;const i=()=>{const c=Hd[this.currentPhase];return{phaseControllers:[...this.getActiveControllers()],phase:c,phaseMeta:Tf[c]}};let{phase:s,phaseControllers:n,phaseMeta:r}=i();const o=()=>Hd[this.currentPhase]==null,a=()=>{for({phase:s,phaseControllers:n,phaseMeta:r}=i();!o()&&n.length===0;)this.currentPhase++,{phase:s,phaseControllers:n,phaseMeta:r}=i(),this.debug(`AnimationBatch - phase changing to ${s}`,{unusedTime:t},n)},l=this.controllers.size;this.debug(`AnimationBatch - ${e}ms; phase ${s} with ${n==null?void 0:n.length} of ${l}`);do{const c=t,p=r.skipIfNoEarlierAnimations&&this.animationTimeConsumed===0;let g=0;for(const f of n)p?f.stop():t=Math.min(f.update(c),t),f.isComplete&&(g++,this.removeAnimation(f));this.animationTimeConsumed+=c-t,this.debug(`AnimationBatch - updated ${n.length} controllers; ${g} completed`),this.debug(`AnimationBatch - animationTimeConsumed: ${this.animationTimeConsumed}`),a()}while(t>0&&!o());this.animationTimeConsumed>this.maxAnimationTime&&(this.debug("Animation batch exceeded max animation time, skipping",[...this.controllers]),this.stop())}ready(){if(this.isReady)return;this.isReady=!0,this.debug(`AnimationBatch - ready; skipped: ${this.skipAnimations}`,[...this.controllers]);let e=!0;for(const[,t]of this.controllers)if(t.duration>0&&Tf[t.phase].skipIfNoEarlierAnimations!==!0){e=!1;break}if(!e)for(const[,t]of this.controllers)t.autoplay&&t.play(!0)}skip(e=!0){if(this.skipAnimations===!1&&e===!0){for(const t of this.controllers.values())t.stop();this.controllers.clear()}this.skipAnimations=e}play(){for(const e of this.controllers.values())e.play()}pause(){for(const e of this.controllers.values())e.pause()}stop(){for(const e of this.controllers.values())try{e.stop(),this.removeAnimation(e)}catch(t){_e.error("Error during animation stop",t)}this.dispatchStopped()}stopByAnimationId(e){if(e!=null&&this.controllers.has(e)){const t=this.controllers.get(e);t&&(t.stop(),this.removeAnimation(t))}}stopByAnimationGroupId(e){for(const t of this.controllers.values())t.groupId===e&&this.stopByAnimationId(t.id)}dispatchStopped(){this.stoppedCbs.forEach(e=>e()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){this.stop(),this.controllers.clear()}};function wm(e){const t={...e,preventDefault(){var i;(i=t.sourceEvent)==null||i.preventDefault()}};return t}function S_(e,t){e.dispatchWrapHandlers(t.type,(i,s)=>i(s),wm(t))}var w_=["click","dblclick","contextmenu","hover","leave","enter","page-left","wheel"],Cq=["keydown","keyup"],fb=["mousemove","mouseup"],tA=["pagehide","mousemove","mouseup"],iA=["click","dblclick","contextmenu","mousedown","mouseleave","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel","keydown","keyup"];function Sq(e){return w_.includes(e)}function wq(e){return Cq.includes(e)}var x_=class Ry extends n_{constructor(t,i){super(),this.keyboardOptions=t,this.domManager=i,this.debug=ci.create(!0,"interaction"),this.eventHandler=s=>this.processEvent(s),this.clickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.dblclickHistory=[{offsetX:NaN,offsetY:NaN,type:"mousedown"},{offsetX:NaN,offsetY:NaN,type:"mouseup"},{offsetX:NaN,offsetY:NaN,type:"mousedown"}],this.stateQueue=34,this.rootElement=this.domManager.getShadowDocumentRoot();for(const s of iA)s.startsWith("touch")||s==="wheel"?this.domManager.addEventListener(s,this.eventHandler,{passive:!1}):this.domManager.addEventListener(s,this.eventHandler);for(const s of tA)Mi().addEventListener(s,this.eventHandler);this.containerChanged(!0),this.domManager.addListener("container-changed",()=>this.containerChanged())}containerChanged(t=!1){var s,n;const i=this.domManager.getShadowDocumentRoot();if(!(!t&&i===this.rootElement)){for(const r of fb)(s=this.rootElement)==null||s.removeEventListener(r,this.eventHandler);this.rootElement=i,this.debug("[InteractionManager] Switching rootElement to:",this.rootElement);for(const r of fb)(n=this.rootElement)==null||n.addEventListener(r,this.eventHandler)}}destroy(){var t;super.destroy();for(const i of tA)Mi().removeEventListener(i,this.eventHandler);for(const i of fb)(t=this.rootElement)==null||t.removeEventListener(i,this.eventHandler);for(const i of iA)this.domManager.removeEventListener(i,this.eventHandler);this.domManager.removeStyles("interactionManager")}pushState(t){this.stateQueue|=t}popState(t){this.stateQueue&=~t}getState(){return this.stateQueue&-this.stateQueue}processEvent(t){this.debug("Received raw event",t);let i=this.decideInteractionEventTypes(t);i!=null&&!Array.isArray(i)&&(i=[i]);for(const s of i??[])this.dispatchEvent(t,s)}dispatchEvent(t,i){if(Sq(i)){this.dispatchPointerEvent(t,i);return}const{relatedElement:s,targetElement:n}=this.extractElements(t);if(wq(i)){const r=t;this.dispatchTypedEvent(this.listeners,{type:i,sourceEvent:r,relatedElement:s,targetElement:n})}}dispatchTypedEvent(t,i){const s=wm(i);this.debug("Dispatching typed event",s,this.getState()),t.dispatchWrapHandlers(i.type,(n,r)=>n(r),s)}extractElements(t){let i,s;return"relatedTarget"in t&&t.relatedTarget instanceof HTMLElement&&(i=t.relatedTarget),"target"in t&&t.target instanceof HTMLElement&&(s=t.target),{relatedElement:i,targetElement:s}}dispatchPointerEvent(t,i){const s=this.calculateCoordinates(t);if(s==null)return;const n=this.buildPointerEvent({type:i,event:t,...s});this.debug("Dispatching pointer event",n,this.getState()),S_(this.listeners,n)}getEventHTMLTarget(t){if(t.target instanceof HTMLElement)return t.target;if(t.currentTarget instanceof HTMLElement)return t.currentTarget}recordDown(t){t instanceof MouseEvent&&(Pc(["offsetX","offsetY"],this.clickHistory[0],t),Pc(["offsetX","offsetY"],this.dblclickHistory[2],this.dblclickHistory[0]),Pc(["offsetX","offsetY"],this.dblclickHistory[0],t))}recordUp(t){t instanceof MouseEvent&&Pc(["offsetX","offsetY"],this.dblclickHistory[1],t)}decideInteractionEventTypes(t){switch(t.type){case"keydown":case"keyup":return this.keyboardOptions.enabled?t.type:void 0;case"click":case"dblclick":return t.type;case"contextmenu":case"wheel":return t.type;case"touchstart":case"mousedown":if(!this.isEventOverElement(t))return;this.recordDown(t);return;case"touchmove":case"mousemove":return this.isEventOverElement(t)?"hover":void 0;case"mouseup":case"touchend":if(!this.isEventOverElement(t))return;this.recordUp(t);return;case"mouseleave":case"touchcancel":return"leave";case"mouseenter":return"enter";case"pagehide":return"page-left"}}isEventOverElement(t){return t.target instanceof HTMLElement&&this.domManager.contains(t.target)}calculateCoordinates(t){if(t instanceof MouseEvent)return this.getMouseEventCoords(t);if(typeof TouchEvent<"u"&&t instanceof TouchEvent){const i=t.touches[0]??t.changedTouches[0],{clientX:s,clientY:n,pageX:r,pageY:o}=i;return{...Ry.NULL_COORDS,clientX:s,clientY:n,pageX:r,pageY:o}}else if(t instanceof PageTransitionEvent)return t.persisted?void 0:Ry.NULL_COORDS}getMouseEventCoords(t){const{clientX:i,clientY:s,pageX:n,pageY:r}=t;let{offsetX:o,offsetY:a}=t;const l=this.getEventHTMLTarget(t),{x:c=0,y:p=0}=l?this.domManager.calculateCanvasPosition(l):{};return o+=c,a+=p,{clientX:i,clientY:s,pageX:n,pageY:r,offsetX:o,offsetY:a}}static isWheelEvent(t){return t.type==="wheel"}static getWheelDeltas(t){let[i,s]=[NaN,NaN];if(this.isWheelEvent(t)){const n=t.deltaMode===0?.01:1;i=t.deltaX*n,s=t.deltaY*n}return{deltaX:i,deltaY:s}}buildPointerEvent(t){var b;const{type:i,event:s,clientX:n,clientY:r}=t;let{offsetX:o,offsetY:a,pageX:l,pageY:c}=t;if(!Kt(o)||!Kt(a)){const R=this.domManager.getBoundingClientRect();o=n-R.left,a=r-R.top}if(!Kt(l)||!Kt(c)){const R=(b=this.rootElement)==null?void 0:b.getBoundingClientRect();l=n-((R==null?void 0:R.left)??0),c=r-((R==null?void 0:R.top)??0)}const{deltaX:p,deltaY:g}=Ry.getWheelDeltas(s);let f=[];s.type==="click"?f=this.clickHistory:s.type==="dblclick"&&(f=this.dblclickHistory);const{relatedElement:y,targetElement:C}=this.extractElements(s),x="button"in s?Number(s.button):0,M={type:i,offsetX:o,offsetY:a,pageX:l,pageY:c,deltaX:p,deltaY:g,button:x,pointerHistory:f,sourceEvent:s,relatedElement:y,targetElement:C};return this.debug("InteractionManager - builtEvent: ",M,this.getState()),M}};x_.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};var $R=x_;function sA(e){return e==null?!0:!isNaN(e)&&e>=0&&e<=2}var b_=class{constructor(e,t){this.interactionManager=e,this.chartUpdateMutex=t,this.defaultDuration=1e3,this.batch=new eA(this.defaultDuration*1.5),this.debug=ci.create(!0,"animation"),this.events=new i_,this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!0,this.requestId=null,this.skipAnimations=!0,this.currentAnonymousAnimationId=0}addListener(e,t){return this.events.on(e,t)}animate(e){const t=this.batch;try{t.checkOverlappingId(e.id)}catch(a){this.failsafeOnError(a);return}let{id:i}=e;i==null&&(i=`__${this.currentAnonymousAnimationId}`,this.currentAnonymousAnimationId+=1);const s=this.isSkipped()||e.phase==="none";s&&this.debug("AnimationManager - skipping animation");const{delay:n,duration:r}=e;if(!sA(n))throw new Error(`Animation delay of ${n} is unsupported (${i})`);if(!sA(r))throw new Error(`Animation duration of ${r} is unsupported (${i})`);const o=new GN({...e,id:i,skip:s,autoplay:this.isPlaying?e.autoplay:!1,phase:e.phase,defaultDuration:this.defaultDuration});if(!this.forceTimeJump(o,this.defaultDuration))return this.batch.addAnimation(o),o}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(e){this.failsafeOnError(e)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch(e){this.failsafeOnError(e)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(e){try{this.batch.stopByAnimationId(e)}catch(t){this.failsafeOnError(t)}}stopByAnimationGroupId(e){try{this.batch.stopByAnimationGroupId(e)}catch(t){this.failsafeOnError(t)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(e=!0){this.skipAnimations=e}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:new Error().stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(e){this.requestId=Mi().requestAnimationFrame(t=>{e(t).catch(i=>_e.error(i))})}forceTimeJump(e,t){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||this.requestId!==null)return;let e;const t=async i=>{const s=()=>{const n=i-(e??i);e=i,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:n}),this.interactionManager.pushState(2);try{this.batch.progress(n)}catch(r){this.failsafeOnError(r)}this.events.emit("animation-frame",{type:"animation-frame",deltaMs:n})};this.isSkippingFrames()?await this.chartUpdateMutex.acquireImmediately(s):await this.chartUpdateMutex.acquire(s),this.batch.isActive()?this.scheduleAnimationFrame(t):(this.batch.stop(),this.events.emit("animation-stop",{type:"animation-stop",deltaMs:this.batch.consumedTimeMs}))};this.events.emit("animation-start",{type:"animation-start",deltaMs:0}),this.scheduleAnimationFrame(t)}cancelAnimation(){this.requestId!==null&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(e,t=!0){_e.error("Error during animation, skipping animations",e),t&&this.cancelAnimation()}startBatch(e){this.debug(`AnimationManager - startBatch() with skipAnimations=${e}.`),this.reset(),this.batch.destroy(),this.batch=new eA(this.defaultDuration*1.5),e===!0&&this.batch.skip()}endBatch(){this.batch.isActive()?(this.batch.ready(),this.requestAnimation()):(this.interactionManager.popState(2),this.batch.isSkipped()&&this.batch.skip(!1))}onBatchStop(e){this.batch.stoppedCbs.add(e)}destroy(){this.stop(),this.events.clear()}},M_=class extends Ra{legendItemClick(e,t,i,s,n){const r={type:"legend-item-click",legendType:e,series:t,itemId:i,enabled:s,legendItemName:n};this.listeners.dispatch("legend-item-click",r)}legendItemDoubleClick(e,t,i,s,n,r){const o={type:"legend-item-double-click",legendType:e,series:t,itemId:i,enabled:s,legendItemName:r,numVisibleItems:n};this.listeners.dispatch("legend-item-double-click",o)}axisHover(e,t){const i={type:"axis-hover",axisId:e,direction:t};this.listeners.dispatch("axis-hover",i)}},R_=class{constructor(){this.defaultActions=[],this.disabledActions=new Set,this.hiddenActions=new Set,this.listeners=new Ma}static check(e,t){return t.type===e}static checkCallback(e,t,i){return e===t}dispatchContext(e,t,i,s){const{sourceEvent:n}=t,r=(s==null?void 0:s.x)??t.canvasX,o=(s==null?void 0:s.y)??t.canvasY;n.stopPropagation(),this.listeners.dispatch("",wm({type:e,x:r,y:o,context:i,sourceEvent:n}))}addListener(e){return this.listeners.addListener("",e)}filterActions(e){return this.defaultActions.filter(t=>t.id&&!this.hiddenActions.has(t.id)&&["all",e].includes(t.type))}registerDefaultAction(e){const t=e.id!=null&&!this.defaultActions.some(({id:i})=>i===e.id);return t&&this.defaultActions.push(e),()=>{const i=t?this.defaultActions.findIndex(({id:s})=>s===e.id):-1;i!==-1&&this.defaultActions.splice(i,1)}}enableAction(e){this.disabledActions.delete(e)}disableAction(e){this.disabledActions.add(e)}showAction(e){this.hiddenActions.add(e)}hideAction(e){this.hiddenActions.delete(e)}isDisabled(e){return this.disabledActions.has(e)}},gp=class extends Map{constructor(e,t){super(),this.defaultValue=e,this.defaultState=t}set(e,t){return this.delete(e),typeof t<"u"&&super.set(e,t),this}stateId(){return Array.from(this.keys()).pop()??this.defaultState}stateValue(){return Array.from(this.values()).pop()??this.defaultValue}},D_=(e=>(e.Auto="auto",e.Default="default",e.Grab="grab",e.Grabbing="grabbing",e.Move="move",e.NotAllowed="not-allowed",e.Pointer="pointer",e.EWResize="ew-resize",e.NSResize="ns-resize",e.ZoomIn="zoom-in",e.ZoomOut="zoom-out",e))(D_||{}),E_=class{constructor(e){this.domManager=e,this.stateTracker=new gp("default")}updateCursor(e,t){this.stateTracker.set(e,t),this.domManager.updateCursor(this.stateTracker.stateValue())}getCursor(){return this.domManager.getCursor()}};function xq(e,t){const i=e.screenX-t.screenX,s=e.screenY-t.screenY;return i*i+s*s}function nA(e,t){return Math.sqrt(xq(e,t))}var bq=1,I_=class extends Ra{constructor(e){super(),this.domManager=e,this.touchstart=t=>this.onTouchStart(t),this.touchmove=t=>this.onTouchMove(t),this.touchend=t=>this.onTouchEnd(t),this.touchcancel=t=>this.onTouchCancel(t),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.domManager.addEventListener("touchstart",this.touchstart,{passive:!0}),this.domManager.addEventListener("touchmove",this.touchmove,{passive:!1}),this.domManager.addEventListener("touchend",this.touchend),this.domManager.addEventListener("touchcancel",this.touchcancel)}destroy(){this.domManager.removeEventListener("touchstart",this.touchstart),this.domManager.removeEventListener("touchmove",this.touchmove),this.domManager.removeEventListener("touchend",this.touchend),this.domManager.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(e){const{touches:t}=e,{finger1:i,finger2:s}=this.pinch;if(this.pinch.status!==0&&t.length===2){if(t[0].identifier===i.identifier&&t[1].identifier===s.identifier)return[t[0],t[1]];if(t[0].identifier===s.identifier&&t[1].identifier===i.identifier)return[t[1],t[0]]}}copyTouchData(e){const t=["identifier","screenX","screenY"];Pc(t,this.pinch.finger1,e.touches[0]),Pc(t,this.pinch.finger2,e.touches[1]),this.pinch.distance=nA(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(e,t,i){const{finger1:s,finger2:n,origin:r}=this.pinch;this.listeners.dispatch(e,wm({sourceEvent:i,type:e,finger1:s,finger2:n,deltaDistance:t,origin:r}))}onTouchStart(e){this.stopPinchTracking(e);const{pinch:t}=this;e.touches.length===2&&(t.status=1,this.copyTouchData(e),t.origin.x=(e.touches[0].clientX+e.touches[1].clientX)/2,t.origin.y=(e.touches[0].clientY+e.touches[1].clientY)/2)}onTouchMove(e){const t=this.findPinchTouches(e);if(t!==void 0){const[i,s]=t,{pinch:n}=this,r=nA(i,s),o=r-n.distance;n.status===1?Math.abs(o)>bq&&(n.status=2,this.copyTouchData(e),this.dispatchPinchEvent("pinch-start",0,e)):n.status===2?(n.distance=r,this.copyTouchData(e),this.dispatchPinchEvent("pinch-move",o,e)):_e.error(`unexpected pinch.status: ${n.status}`)}}onTouchEnd(e){this.stopPinchTracking(e)}onTouchCancel(e){this.stopPinchTracking(e)}stopPinchTracking(e){const{pinch:t}=this;t.status===2&&this.dispatchPinchEvent("pinch-end",0,e),this.pinch.status=0}},L_=class extends Ra{constructor(){super(...arguments),this.highlightStates=new gp}updateHighlight(e,t){const{activeHighlight:i}=this;this.highlightStates.set(e,t),this.activeHighlight=this.highlightStates.stateValue(),this.isEqual(this.activeHighlight,i)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:i,callerId:e})}getActiveHighlight(){return this.activeHighlight}isEqual(e,t){return e===t||e!=null&&t!=null&&(e==null?void 0:e.series)===(t==null?void 0:t.series)&&(e==null?void 0:e.itemId)===(t==null?void 0:t.itemId)&&(e==null?void 0:e.datum)===(t==null?void 0:t.datum)}},T_=class extends n_{constructor(e,t){super(),this.interactionManager=e,this.previousInputDevice="keyboard";const i=t.getRegion("series"),s=41;this.destroyFns.push(e.addListener("hover",()=>this.onMouse(),s),e.addListener("wheel",()=>this.onClick(),s),e.addListener("keydown",n=>this.onKeyDown(n),63),i.addListener("click",()=>this.onClick(),s),i.addListener("drag-start",()=>this.onClick(),s))}getState(){return this.interactionManager.getState()}destroy(){super.destroy()}onClick(){var e;(e=this.focusIndicator)==null||e.overrideFocusVisible(!1),this.previousInputDevice="mouse"}onMouse(){this.previousInputDevice="mouse"}onKeyDown(e){var l,c,p,g;const t=this.getState(),{key:i,code:s,altKey:n,shiftKey:r,metaKey:o,ctrlKey:a}=e.sourceEvent;if(a||o){if(i==="y"||i==="z"&&r)return(l=this.focusIndicator)==null||l.overrideFocusVisible(this.previousInputDevice==="keyboard"),this.dispatch("redo",0,e);if(i==="z")return(c=this.focusIndicator)==null||c.overrideFocusVisible(this.previousInputDevice==="keyboard"),this.dispatch("undo",0,e)}if(t&9){(p=this.focusIndicator)==null||p.overrideFocusVisible(!1);return}switch(i){case"+":return this.dispatch("nav-zoom",1,e);case"-":return this.dispatch("nav-zoom",-1,e)}if(!(n||r||o||a))switch((g=this.focusIndicator)==null||g.overrideFocusVisible(!0),s){case"ArrowDown":return this.dispatch("nav-vert",1,e);case"ArrowUp":return this.dispatch("nav-vert",-1,e);case"ArrowLeft":return this.dispatch("nav-hori",-1,e);case"ArrowRight":return this.dispatch("nav-hori",1,e);case"ZoomIn":case"Add":return this.dispatch("nav-zoom",1,e);case"ZoomOut":case"Substract":return this.dispatch("nav-zoom",-1,e);case"Space":case"Enter":return this.dispatch("submit",0,e)}}dispatch(e,t,i){const{previousInputDevice:s}=this;S_(this.listeners,{type:e,delta:t,sourceEvent:i,previousInputDevice:s});const n=["redo","undo","nav-zoom"];i.type==="keydown"&&!n.includes(e)&&(this.previousInputDevice="keyboard")}},mb=class extends Ma{},Mq=300,Rq=3;function rA(e,t,i,s,n=32){return(e==null?void 0:e.addListener(i,r=>{t.getState()&n&&s(r)}))??(()=>{})}function Dq(e){if(e==null||!(e instanceof HTMLElement))return;let t=e;for(;t!=null&&!(t!=null&&t.classList.contains("ag-charts-wrapper"));){if(t.classList.contains("ag-charts-tooltip"))return t;t=t.parentElement}}function Eq(e){var r;const{sourceEvent:t}=e,{className:i,classList:s,ariaHidden:n}=((r=e.sourceEvent)==null?void 0:r.target)??{};return i==="ag-charts-proxy-elem"||!(s instanceof DOMTokenList)?"leave":s.contains("ag-charts-annotations__axis-button-icon")||i==="ag-charts-swapchain"||i==="ag-charts-canvas-container"||i==="ag-charts-canvas-proxy"||(t==null?void 0:t.target)instanceof HTMLCanvasElement?"none":Dq(t.target)&&n!=="true"?"wait":"leave"}var A_=class{constructor(e){this.interactionManager=e,this.debug=ci.create(!0,"region"),this.regions={root:{properties:{name:"root"},listeners:new mb},series:{properties:{name:"series"},listeners:new mb}},this.destroyFns=[],this.allRegionsListeners=new mb,this.isDragMoving=!1,this.blockNextClickEvent=!1,this.processPointerEvent=t=>{const i=Eq(t),{current:s}=this;let n=s;if(!this.isDragMoving&&this.deferredDragStart==null)switch(i){case"wait":return;case"none":n=this.pickRegion(t);break;case"leave":n=void 0;break}const r=n;s!==void 0&&(r==null?void 0:r.properties.name)!==s.properties.name&&this.dispatch(s,t,"leave"),r!==void 0&&r.properties.name!==(s==null?void 0:s.properties.name)&&this.dispatch(n,t,"enter"),r!==void 0&&this.dispatch(n,t),this.current=n}}destroy(){this.destroyFns.forEach(e=>e()),this.current=void 0,this.regions.root.listeners.destroy(),this.regions.series.listeners.destroy()}initRegions(e,t){this.regions.root.properties.widget=e,this.regions.series.properties.widget=t,e.addListener("wheel",this.processPointerEvent),e.addListener("contextmenu",this.processPointerEvent),e.addListener("click",this.processPointerEvent),e.addListener("dblclick",this.processPointerEvent),e.addListener("mouseenter",this.processPointerEvent),e.addListener("mousemove",this.processPointerEvent),e.addListener("mouseleave",this.processPointerEvent),e.addListener("drag-start",this.processPointerEvent),e.addListener("drag-move",this.processPointerEvent),e.addListener("drag-end",this.processPointerEvent)}getRegion(e){return this.makeObserver(this.regions[e])}listenAll(e,t,i=32){return rA(this.allRegionsListeners,this.interactionManager,e,t,i)}makeObserver(e){const{interactionManager:t}=this;class i{addListener(n,r,o=32){return rA(e==null?void 0:e.listeners,t,n,r,o)}}return new i}widgetEventTypeToRegionEventType(e,t){return t!==void 0?t:{contextmenu:"contextmenu",click:"click",dblclick:"dblclick",mouseenter:"enter",mousemove:"hover",mouseleave:"leave",wheel:"wheel","drag-start":"drag-start","drag-move":"drag","drag-end":"drag-end"}[e.type]}computeEventOffsets(e,t,i){const{deltaX:s,deltaY:n}=$R.getWheelDeltas(i.sourceEvent);if("mockRegion"in i.sourceEvent){const a=i.sourceEvent.mockRegion;if(a)return{deltaX:s,deltaY:n,...a}}const r=t.getElement().getBoundingClientRect(),o=e.getElement().getBoundingClientRect();return{canvasX:i.clientX-r.x,canvasY:i.clientY-r.y,regionX:i.clientX-o.x,regionY:i.clientY-o.y,deltaX:s,deltaY:n}}dispatch(e,t,i){const{widget:s}=(e==null?void 0:e.properties)??{},{widget:n}=this.regions.root.properties;if(e==null||s==null||n==null)return;const r=wm({...this.computeEventOffsets(s,n,t),sourceEvent:t.sourceEvent,type:this.widgetEventTypeToRegionEventType(t,i),region:e.properties.name,timestamp:Date.now()});switch(r.type){case"drag-start":{this.deferredDragStart=r;break}case"drag":{if(this.deferredDragStart)if(this.canStartDrag(r))this.dispatchEvent(e,this.deferredDragStart);else return;this.dispatchEvent(e,r),this.deferredDragStart=void 0,this.isDragMoving=!0,this.blockNextClickEvent=!0;break}case"drag-end":{this.isDragMoving&&this.dispatchEvent(e,r),this.deferredDragStart=void 0,this.isDragMoving=!1;break}case"click":{this.blockNextClickEvent||this.dispatchEvent(e,r),this.blockNextClickEvent=!1;break}case"leave":case"enter":(!this.isDragMoving||this.deferredDragStart!=null)&&this.dispatchEvent(e,r);break;case"hover":{this.blockNextClickEvent=!1,this.dispatchEvent(e,r);break}default:{this.dispatchEvent(e,r);break}}}dispatchEvent(e,t){this.debug("Dispatching region event: ",t),this.allRegionsListeners.dispatch(t.type,t),e.listeners.dispatch(t.type,t)}pickRegion({sourceEvent:e}){var t,i;return"mockRegion"in e&&e.mockRegion?e.mockRegion.region==="series"?this.regions.series:this.regions.root:e.target==((i=(t=this.regions.root)==null?void 0:t.properties.widget)==null?void 0:i.getElement())?this.regions.root:this.regions.series}canStartDrag(e){return this.deferredDragStart?e.timestamp-this.deferredDragStart.timestamp>Mq?!0:Math.abs(e.canvasX-this.deferredDragStart.canvasX)+Math.abs(e.canvasY-this.deferredDragStart.canvasY)>Rq:!1}};function ZR(e){var i,s,n;const t=((i=e.yBar)==null?void 0:i.upperPoint)??e.midPoint??((n=(s=e.series).datumMidPoint)==null?void 0:n.call(s,e));if(t){const{x:r,y:o}=ji.toCanvasPoint(e.series.contentGroup,t.x,t.y);return{canvasX:Math.round(r),canvasY:Math.round(o)}}}var aC=class{constructor(e,t){this.domManager=e,this.tooltip=t,this.stateTracker=new gp,this.suppressState=new gp(!1),this.appliedState=null,t.setup(e),e.addListener("hidden",()=>this.tooltip.hide())}updateTooltip(e,t,i){var s;this.tooltip.enabled&&(i??(i=(s=this.stateTracker.get(e))==null?void 0:s.content),this.stateTracker.set(e,{content:i,meta:t}),this.applyStates())}removeTooltip(e){this.tooltip.enabled&&(this.stateTracker.delete(e),this.applyStates())}suppressTooltip(e){this.suppressState.set(e,!0)}unsuppressTooltip(e){this.suppressState.delete(e)}getTooltipMeta(e){var t;return(t=this.stateTracker.get(e))==null?void 0:t.meta}destroy(){this.domManager.removeStyles("tooltip")}applyStates(){var n;const e=this.stateTracker.stateId(),t=e?this.stateTracker.get(e):null;if(this.suppressState.stateValue()||(t==null?void 0:t.meta)==null||(t==null?void 0:t.content)==null){this.appliedState=null,this.tooltip.hide();return}const i=this.domManager.getBoundingClientRect(),s=this.tooltip.bounds==="extended"?this.domManager.getOverlayClientRect():i;if(((n=this.appliedState)==null?void 0:n.content)===(t==null?void 0:t.content)){const r=this.tooltip.isVisible();this.tooltip.show(s,i,t==null?void 0:t.meta,null,r)}else this.tooltip.show(s,i,t==null?void 0:t.meta,t==null?void 0:t.content);this.appliedState=t}static makeTooltipMeta(e,t){var a;const{canvasX:i,canvasY:s}=e,n=t.series.properties.tooltip,r={canvasX:i,canvasY:s,enableInteraction:((a=n.interaction)==null?void 0:a.enabled)??!1,lastPointerEvent:{type:e.type,canvasX:i,canvasY:s},showArrow:n.showArrow,position:{type:n.position.type,xOffset:n.position.xOffset,yOffset:n.position.yOffset}},o=ZR(t);return(n.position.type==="node"||n.position.type==="sparkline")&&o?{...r,canvasX:o.canvasX,canvasY:o.canvasY}:r}},IM={bottomCenter:Pq,center:Aq,clone:Oq,end:Lq,from:_q,height:kq,round:Nq,start:Iq,topCenter:Tq,origin:Bq,width:Fq};function Iq(e){return{x:e.x1,y:e.y1}}function Lq(e){return{x:e.x2,y:e.y2}}function Tq(e){return{x:(e.x1+e.x2)/2,y:Math.min(e.y1,e.y2)}}function Aq(e){return{x:(e.x1+e.x2)/2,y:(e.y1+e.y2)/2}}function Pq(e){return{x:(e.x1+e.x2)/2,y:Math.max(e.y1,e.y2)}}function Fq(e){return Math.abs(e.x2-e.x1)}function kq(e){return Math.abs(e.y2-e.y1)}function Nq(e){return{x1:Math.round(e.x1),y1:Math.round(e.y1),x2:Math.round(e.x2),y2:Math.round(e.y2)}}function Oq(e){return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2}}function _q(e,t,i,s){if(typeof e=="number")return{x1:e,y1:t,x2:i,y2:s};if("width"in e)return{x1:e.x,y1:e.y,x2:e.x+e.width,y2:e.y+e.height};throw new Error(`Values can not be converted into a vector4: [${JSON.stringify(e)}] [${t}] [${i}] [${s}]`)}function Bq(){return{x1:0,y1:0,x2:0,y2:0}}function qv(e,t,i,s,n){return t+(s-t)*((n-e)/(i-e))}function oA(e,t,i,s,n){return e+(n-t)*((i-e)/(s-t))}function aA(e,t,i){return[oA(e,i.min,t,i.max,0),oA(e,i.min,t,i.max,1)]}function Gq(e,t,i){const[s,n]=aA(e.x1,e.x2,t),[r,o]=aA(e.y1,e.y2,i);return{x1:s,x2:n,y1:r,y2:o}}function lA(e,t,i,s,n,r){if(i<=n&&r<=s)return i;const o=n-i,a=r-s,l=Math.abs(o)<Math.abs(a)?o:a;return St(e,i+l,t)}function zq(e,t,i){const{x:s={min:0,max:1},y:n={min:0,max:1}}=t,r=IM.from(i),o=IM.from(e),a=Gq(o,s,n),l=lA(a.x1,a.x2,o.x1,o.x2,r.x1,r.x2),c=lA(a.y1,a.y2,o.y1,o.y2,r.y1,r.y2);return{x:{min:qv(o.x1,s.min,o.x2,s.max,l),max:qv(o.x1,s.min,o.x2,s.max,l+e.width)},y:{min:qv(o.y1,n.min,o.y2,n.max,c),max:qv(o.y1,n.min,o.y2,n.max,c+e.height)}}}var Hq=["rangeX","rangeY","ratioX","ratioY","autoScaleYAxis"],Vq=class{constructor(){this.enabled=!1,this.padding=0,this.manuallyAdjusted=!1}},P_=class extends Ra{constructor(){super(...arguments),this.mementoOriginatorKey="zoom",this.axisZoomManagers=new Map,this.state=new gp(void 0,"initial"),this.axes=[],this.didLayoutAxes=!1,this.autoScaleYAxis=new Vq,this.lastRestoredState=void 0,this.independentAxes=!1,this.navigatorModule=!1,this.zoomModule=!1,this.pendingMemento=void 0}addLayoutListeners(e){this.destroyFns.push(e.addListener("layout:complete",()=>{const{pendingMemento:t}=this,i=!this.didLayoutAxes;this.didLayoutAxes=!0,t?this.restoreMemento(t.version,t.mementoVersion,t.memento):i&&this.autoScaleYZoom("zoom-manager")}))}createMemento(){const e=this.getDefinedZoom(),t={rangeX:this.getRangeDirection(e.x,"x"),rangeY:this.getRangeDirection(e.y,"y"),ratioX:{start:e.x.min,end:e.x.max},ratioY:{start:e.y.min,end:e.y.max}};return this.autoScaleYAxis.enabled&&(t.autoScaleYAxis=!this.autoScaleYAxis.manuallyAdjusted),t}guardMemento(e){if(e==null)return!0;if(!xn(e))return!1;for(const t of Object.keys(e))if(!hR(Hq,t))return!1;return!0}restoreMemento(e,t,i){const{independentAxes:s}=this;if(!this.axes||!this.didLayoutAxes){this.pendingMemento={version:e,mementoVersion:t,memento:i};return}this.pendingMemento=void 0;const n=this.getDefinedZoom();if(i!=null&&i.rangeX?n.x=this.rangeToRatio(i.rangeX,"x")??{min:0,max:1}:i!=null&&i.ratioX?n.x={min:i.ratioX.start??0,max:i.ratioX.end??1}:n.x={min:0,max:1},(!this.navigatorModule||this.zoomModule)&&(i!=null&&i.rangeY?n.y=this.rangeToRatio(i.rangeY,"y")??{min:0,max:1}:i!=null&&i.ratioY?n.y={min:i.ratioY.start??0,max:i.ratioY.end??1}:n.y={min:0,max:1}),(i==null?void 0:i.autoScaleYAxis)!=null&&(this.autoScaleYAxis.manuallyAdjusted=!i.autoScaleYAxis),this.lastRestoredState=n,s!==!0){this.updateZoom("zoom-manager",n);return}const r=this.getPrimaryAxis("x"),o=this.getPrimaryAxis("y");for(const a of[r,o])a&&this.updateAxisZoom("zoom-manager",a.id,n[a.direction])}updateAxes(e){this.axes=e;const t=new Map(e.map(i=>[i.id,this.axisZoomManagers.get(i.id)]));this.axisZoomManagers.clear();for(const i of e)this.axisZoomManagers.set(i.id,t.get(i.id)??new Wq(i));this.state.size>0&&e.length>0&&this.updateZoom(this.state.stateId(),this.state.stateValue())}setIndependentAxes(e=!0){this.independentAxes=e}setAutoScaleYAxis(e,t){this.autoScaleYAxis.enabled=e,this.autoScaleYAxis.padding=t}setNavigatorEnabled(e=!0){this.navigatorModule=e}setZoomModuleEnabled(e=!0){this.zoomModule=e}isZoomEnabled(){return this.zoomModule}updateZoom(e,t){if(this.axisZoomManagers.size===0){const i=this.state.stateId();(i==="initial"||i===e)&&this.state.set(e,t);return}this.state.set(e,t),this.axisZoomManagers.forEach(i=>{i.updateZoom(e,t==null?void 0:t[i.getDirection()])}),this.applyChanges(e)}updateAxisZoom(e,t,i){var s;(s=this.axisZoomManagers.get(t))==null||s.updateZoom(e,i),this.applyChanges(e)}resetZoom(e){var i,s,n,r;this.autoScaleYAxis.manuallyAdjusted=!1;const t=this.getRestoredZoom();this.updateZoom(e,{x:{min:((i=t==null?void 0:t.x)==null?void 0:i.min)??0,max:((s=t==null?void 0:t.x)==null?void 0:s.max)??1},y:{min:((n=t==null?void 0:t.y)==null?void 0:n.min)??0,max:((r=t==null?void 0:t.y)==null?void 0:r.max)??1}})}resetAxisZoom(e,t){var n;const i=this.axisZoomManagers.get(t),s=i==null?void 0:i.getDirection();s!=null&&(s==="y"&&(this.autoScaleYAxis.manuallyAdjusted=!1),this.updateAxisZoom(e,t,((n=this.getRestoredZoom())==null?void 0:n[s])??{min:0,max:1}))}setAxisManuallyAdjusted(e,t){var s;((s=this.axisZoomManagers.get(t))==null?void 0:s.getDirection())==="y"&&(this.autoScaleYAxis.manuallyAdjusted=!0)}updatePrimaryAxisZoom(e,t,i){const s=this.getPrimaryAxis(t);s&&this.updateAxisZoom(e,s.id,i)}panToBBox(e,t,i){const s=this.getZoom();if(s===void 0||!s.x&&!s.y)return;if(!(t.width>0&&t.height>0&&Math.abs(i.width)<=Math.abs(t.width)&&Math.abs(i.height)<=Math.abs(t.height))){_e.warnOnce("cannot pan to target BBox - chart too small?");return}const r=zq(t,s,i);this.independentAxes?(this.updatePrimaryAxisZoom(e,"x",r.x),this.updatePrimaryAxisZoom(e,"y",r.y)):this.updateZoom(e,r)}fireZoomPanStartEvent(e){this.listeners.dispatch("zoom-pan-start",{type:"zoom-pan-start",callerId:e})}extendToEnd(e,t,i){return this.extendWith(e,t,s=>Number(s)-i)}extendWith(e,t,i){const s=this.getPrimaryAxis(t);if(!s)return;const n=this.getDomainExtents(s);if(!n)return;const[,r]=n,o=i(r),a=this.rangeToRatio({start:o,end:r},t);a&&this.updateZoom(e,{[t]:a})}updateWith(e,t,i){const s=this.getPrimaryAxis(t);if(!s)return;const n=this.getDomainExtents(s);if(!n)return;let[r,o]=n;[r,o]=i(r,o);const a=this.rangeToRatio({start:r,end:o},t);a&&this.updateZoom(e,{[t]:a})}getZoom(){let e,t;if(this.axisZoomManagers.forEach(i=>{i.getDirection()==="x"?e??(e=i.getZoom()):i.getDirection()==="y"&&(t??(t=i.getZoom()))}),e||t)return{x:e,y:t}}getAxisZoom(e){var t;return((t=this.axisZoomManagers.get(e))==null?void 0:t.getZoom())??{min:0,max:1}}getAxisZooms(){const e={};for(const[t,i]of this.axisZoomManagers.entries())e[t]={direction:i.getDirection(),zoom:i.getZoom()};return e}getRestoredZoom(){return this.lastRestoredState}autoScaleYZoom(e,t=!0){const{independentAxes:i,autoScaleYAxis:s}=this,n=this.getZoom();if((n==null?void 0:n.x)==null||!s.enabled||s.manuallyAdjusted)return;const{padding:r}=s,o=i?this.primaryAxisZoom("y",n.x,{padding:r}):this.combinedAxisZoom("y",n.x,{padding:r});if(o!=null){if(i){const a=this.getPrimaryAxis("y"),l=a==null?void 0:this.axisZoomManagers.get(a.id);l==null||l.updateZoom("zoom-manager",o)}else for(const a of this.axisZoomManagers.values())a.getDirection()==="y"&&a.updateZoom("zoom-manager",o);t&&this.applyChanges(e)}}applyChanges(e){if(this.autoScaleYZoom(e,!1),!Array.from(this.axisZoomManagers.values(),s=>s.applyChanges()).includes(!0))return;const i={};for(const[s,n]of this.axisZoomManagers.entries())i[s]=n.getZoom();this.listeners.dispatch("zoom-change",{type:"zoom-change",...this.getZoom(),axes:i,callerId:e})}getRangeDirection(e,t){var l,c,p,g,f,y,C,x;const i=this.getPrimaryAxis(t);if(!i||!hi.is(i.scale)&&!xo.is(i.scale))return;const s=this.getDomainPixelExtents(i);if(!s)return;const[n,r]=s;let o,a;return n<=r?(o=(c=(l=i.scale).invert)==null?void 0:c.call(l,0),a=(g=(p=i.scale).invert)==null?void 0:g.call(p,n+(r-n)*e.max)):(o=(y=(f=i.scale).invert)==null?void 0:y.call(f,n-(n-r)*e.min),a=(x=(C=i.scale).invert)==null?void 0:x.call(C,0)),{start:o,end:a}}rangeToRatio(e,t){var g,f,y,C;const i=this.getPrimaryAxis(t);if(!i)return;const s=this.getDomainPixelExtents(i);if(!s)return;const[n,r]=s,o=e.start==null?n:(f=(g=i.scale).convert)==null?void 0:f.call(g,e.start),a=e.end==null?r:(C=(y=i.scale).convert)==null?void 0:C.call(y,e.end);if(!Kt(o)||!Kt(a))return;const l=r-n,c=Math.abs((o-n)/l),p=Math.abs((a-n)/l);return{min:c,max:p}}getPrimaryAxis(e){var t;return(t=this.axes)==null?void 0:t.find(i=>i.direction===e)}getDomainExtents(e){var n,r;const t=(r=(n=e.scale).getDomain)==null?void 0:r.call(n),i=t==null?void 0:t.at(0),s=t==null?void 0:t.at(-1);if(!(i==null||s==null))return[i,s]}getDomainPixelExtents(e){var n,r,o,a,l,c;const t=(r=(n=e.scale).getDomain)==null?void 0:r.call(n),i=(a=(o=e.scale).convert)==null?void 0:a.call(o,t==null?void 0:t.at(0)),s=(c=(l=e.scale).convert)==null?void 0:c.call(l,t==null?void 0:t.at(-1));if(!(!Kt(i)||!Kt(s)))return[i,s]}getDefinedZoom(){var t,i,s,n;const e=this.getZoom();return{x:{min:((t=e==null?void 0:e.x)==null?void 0:t.min)??0,max:((i=e==null?void 0:e.x)==null?void 0:i.max)??1},y:{min:((s=e==null?void 0:e.y)==null?void 0:s.min)??0,max:((n=e==null?void 0:e.y)==null?void 0:n.max)??1}}}zoomBounds(e,t,i,s){const n=e.scale,r=n.range;n.range=[0,1];const[o,a]=Ks(t.scale.domain);let l=1,c=!1,p=0,g=!1;for(const C of t.boundSeries){const[x,M]=C.getRange("y",[i.min,i.max]);let b=(x-o)/(a-o),R=(M-o)/(a-o);if([b,R]=Ks([b,R]),!Number.isFinite(b)||!Number.isFinite(R))continue;const{connectsToYAxis:I}=C;b<l&&(l=b,c=!I||x<0),R>p&&(p=R,g=!I||M>0)}n.range=r;const f=(c?s:0)+(g?s:0),y=(p-l)*(1+f);if(!(y<=0||y>=1)){if(c&&g){const C=(p+l)/2;l=C-y/2,p=C+y/2}else!c&&g?p=l+y:c&&!g&&(l=p-y);return l<0?(p+=-l,l=0):p>1&&(l-=p-1,p=1),{min:l,max:p}}}primaryAxisZoom(e,t,{padding:i=0}={}){const s=e==="x"?"y":"x",n=this.getPrimaryAxis(s),r=this.getPrimaryAxis(e);if(!(n==null||r==null))return this.zoomBounds(n,r,t,i)}combinedAxisZoom(e,t,{padding:i=0}={}){const s=e==="x"?"y":"x",n=new Map;for(const a of this.axes)if(a.direction===s)for(const l of a.boundSeries)n.set(l,a);let r=1,o=0;for(const a of this.axes)if(a.direction===e)for(const l of a.boundSeries){const c=n.get(l);if(c==null)continue;const p=this.zoomBounds(c,a,t,i);if(p==null)return;r=Math.min(r,p.min),o=Math.max(o,p.max)}if(!(r>o))return{min:r,max:o}}},Wq=class{constructor(e){this.axis=e;const[t=0,i=1]=e.visibleRange;this.state=new gp({min:t,max:i}),this.currentZoom=this.state.stateValue()}getDirection(){return this.axis.direction}updateZoom(e,t){this.state.set(e,t)}getZoom(){return Us(this.state.stateValue())}hasChanges(){const e=this.currentZoom,t=this.state.stateValue();return e.min!==t.min||e.max!==t.max}applyChanges(){const e=this.hasChanges();return this.currentZoom=this.state.stateValue(),e}},jq=class{constructor(){this.labelData=new Map}updateLabels(e,t,i=Ue.zero){var o;const s={x:-t.left,y:-t.top,width:i.width+t.left+t.right,height:i.height+t.top+t.bottom},n=new Set(e.map(a=>a.id));for(const a of this.labelData.keys())n.has(a)||this.labelData.delete(a);for(const a of e){const l=a.getLabelData();l.every(OX)&&this.labelData.set(a.id,l)}const r=BX(this.labelData,s,5);for(const a of e)(o=a.updatePlacedLabelData)==null||o.call(a,r.get(a.id)??[])}},Uq=class extends Ra{constructor(e){super(),this.chartService=e,this.mementoOriginatorKey="legend",this.legendDataMap=new Map}createMemento(){return this.getData().filter(({hideInLegend:e,isFixed:t})=>!e&&!t).map(({enabled:e,seriesId:t,itemId:i,legendItemName:s})=>({visible:e,seriesId:t,itemId:i,legendItemName:s}))}guardMemento(e){return e==null||bi(e)}restoreMemento(e,t,i){i==null||i.forEach(s=>{const{seriesId:n,data:r}=this.getRestoredData(s)??{};!n||!r||this.updateData(n,r)}),this.update()}getRestoredData(e){const{seriesId:t,itemId:i,legendItemName:s,visible:n}=e;if(t){const o=(this.legendDataMap.get(t)??[]).map(a=>{const l=a.seriesId===t&&(!i||a.itemId===i);return l&&a.isFixed&&this.warnFixed(a.seriesId,a.itemId),!a.isFixed&&l?{...a,enabled:n}:a});return{seriesId:t,data:o}}if(!(i==null&&s==null))for(const r of this.getData()){if(i!=null&&r.itemId!==i||s!=null&&r.legendItemName!==s)continue;if(r.isFixed){this.warnFixed(r.seriesId,i);return}const o=(this.legendDataMap.get(r.seriesId)??[]).map(a=>a.itemId===i||a.legendItemName===s?{...a,enabled:n}:a);return{seriesId:r.seriesId,data:o}}}warnFixed(e,t){_e.warnOnce(`The legend item with seriesId [${e}] and itemId [${t}] is not configurable, this series item cannot be toggled through the legend.`)}update(e){this.listeners.dispatch("legend-change",{type:"legend-change",legendData:e??this.getData()})}updateData(e,t=[]){this.legendDataMap.set(e,t)}clearData(){this.legendDataMap.clear()}toggleItem({enabled:e,seriesId:t,itemId:i,legendItemName:s}){if(s){this.getData().forEach(a=>{const l=(this.legendDataMap.get(a.seriesId)??[]).map(c=>c.legendItemName===s?{...c,enabled:e}:c);this.updateData(a.seriesId,l)});return}const n=this.getData(t),r=n.length===1,o=n.map(a=>i==null&&r||a.itemId===i?{...a,enabled:e}:a);this.updateData(t,o)}getData(e){return e?this.legendDataMap.get(e)??[]:[...this.legendDataMap].reduce((t,[i,s])=>t.concat(s),[])}getDatum({seriesId:e,itemId:t}={}){return this.getData(e).find(i=>i.itemId===t)}getSeriesEnabled(e){const t=this.getData(e);if(t.length>0)return t.some(i=>i.enabled)}getItemEnabled({seriesId:e,itemId:t}={}){var i;return((i=this.getDatum({seriesId:e,itemId:t}))==null?void 0:i.enabled)??!0}},Kq=class{constructor(){this.groups={}}registerSeries({internalId:e,seriesGrouping:t,visible:i,type:s}){var n;t&&((n=this.groups)[s]??(n[s]={}),this.groups[s][e]={grouping:t,visible:i})}updateSeries({internalId:e,seriesGrouping:t,visible:i,type:s}){var r;if(!t)return;const n=(r=this.groups[s])==null?void 0:r[e];n&&(n.grouping=t,n.visible=i)}deregisterSeries({internalId:e,type:t}){this.groups[t]&&delete this.groups[t][e],this.groups[t]&&Object.keys(this.groups[t]).length===0&&delete this.groups[t]}getVisiblePeerGroupIndex({type:e,seriesGrouping:t,visible:i}){if(!t)return{visibleGroupCount:i?1:0,visibleSameStackCount:i?1:0,index:0};const s=new Set,n=new Set;for(const o of Object.values(this.groups[e]??{}))o.visible&&(s.add(o.grouping.groupIndex),o.grouping.groupIndex===t.groupIndex&&n.add(o.grouping.stackIndex));const r=Array.from(s);return r.sort((o,a)=>o-a),{visibleGroupCount:r.length,visibleSameStackCount:n.size,index:r.indexOf(t.groupIndex)}}},hf=(e=>(e[e.FULL=0]="FULL",e[e.UPDATE_DATA=1]="UPDATE_DATA",e[e.PROCESS_DATA=2]="PROCESS_DATA",e[e.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",e[e.SERIES_UPDATE=4]="SERIES_UPDATE",e[e.PRE_SCENE_RENDER=5]="PRE_SCENE_RENDER",e[e.SCENE_RENDER=6]="SCENE_RENDER",e[e.NONE=7]="NONE",e))(hf||{}),F_=class extends Ma{constructor(e){super(),this.updateCallback=e}update(e=0,t){this.updateCallback(e,t)}dispatchUpdateComplete(e){this.dispatch("update-complete",{type:"update-complete",minRect:e==null?void 0:e.minRect,minVisibleRect:e==null?void 0:e.minVisibleRect})}dispatchPreDomUpdate(){this.dispatch("pre-dom-update",{type:"pre-dom-update"})}dispatchPreSceneRender(e){this.dispatch("pre-scene-render",{type:"pre-scene-render",...e})}},Yq=class{constructor(e,t){this.callbackCache=new mq,this.chartEventManager=new M_,this.highlightManager=new L_,this.layoutManager=new s_,this.localeManager=new rq,this.seriesStateManager=new Kq,this.stateManager=new AQ,this.zoomManager=new P_,this.seriesLabelLayoutManager=new jq,this.contextModules=[];const{scene:i,root:s,syncManager:n,container:r,updateCallback:o,updateMutex:a,pixelRatio:l,styleContainer:c,chartType:p}=t;this.chartService=e,this.syncManager=n,this.domManager=new h_(r,c);const g=this.domManager.addChild("canvas","scene-canvas",i==null?void 0:i.canvas.element);this.scene=i??new hS({pixelRatio:l,canvasElement:g}),this.scene.setRoot(s),this.axisManager=new yq(s),this.legendManager=new Uq(this.chartService),this.annotationManager=new vq(e.annotationRoot),this.chartTypeOriginator=new LQ(e),this.cursorManager=new E_(this.domManager),this.interactionManager=new $R(e.keyboard,this.domManager),this.regionManager=new A_(this.interactionManager),this.keyNavManager=new T_(this.interactionManager,this.regionManager),this.contextMenuRegistry=new R_,this.gestureDetector=new I_(this.domManager),this.updateService=new F_(o),this.proxyInteractionService=new p_(this.localeManager,this.domManager),this.historyManager=new TQ(this.keyNavManager),this.animationManager=new b_(this.interactionManager,a),this.dataService=new dS(this.animationManager),this.tooltipManager=new aC(this.domManager,e.tooltip),this.zoomManager.addLayoutListeners(this.layoutManager);for(const f of ca.byType("context")){if(!f.chartTypes.includes(p))continue;const y=f.moduleFactory(this);this.contextModules.push(y),this[f.contextKey]=y}}destroy(){this.animationManager.destroy(),this.highlightManager.destroy(),this.axisManager.destroy(),this.callbackCache.invalidateCache(),this.chartEventManager.destroy(),this.domManager.destroy(),this.highlightManager.destroy(),this.keyNavManager.destroy(),this.regionManager.destroy(),this.interactionManager.destroy(),this.proxyInteractionService.destroy(),this.syncManager.destroy(),this.tooltipManager.destroy(),this.zoomManager.destroy(),this.contextModules.forEach(e=>e.destroy())}},k_=class extends yt{constructor(){super(...arguments),this.range="tooltip"}};A([O(pi(["tooltip","node"],"a range"))],k_.prototype,"range",2);function $q(e,t){if(e.size!==t.size)return!1;for(const i of e)if(!t.has(i))return!1;return!0}function Zq(e,t){if(e==null||t==null)return e===t;if(e.size!==t.size)return!1;for(const[i,s]of e){const n=t.get(i);if(n==null||!$q(s,n))return!1}return!0}function Xq(e,t){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i+=1){const{idsMap:s,...n}=e[i],{idsMap:r,...o}=t[i];if(!Sh(n,o)||!Zq(s,r))return!1}return!0}function Qq(e,t){const{props:i,...s}=e,{props:n,...r}=t;return Sh(s,r)&&Xq(i,n)}function qq(e,t,i,s){return t===e.data&&zc(i,e.ids)&&Qq(s,e.opts)}var cA=class N_{constructor(){this.domain=new Set}static is(t){return t instanceof N_}extend(t){this.domain.add(t)}getDomain(){return Array.from(this.domain)}},Ic=class O_{constructor(){this.domain=[1/0,-1/0]}static is(t){return t instanceof O_}static extendDomain(t,i=[1/0,-1/0]){for(const s of t)typeof s=="number"&&(i[0]>s&&(i[0]=s),i[1]<s&&(i[1]=s));return i}extend(t){this.domain[0]>t&&(this.domain[0]=t),this.domain[1]<t&&(this.domain[1]=t)}getDomain(){return[...this.domain]}},_d=0,Bd=1,ea=2,Jq=class{constructor(e){const t=e.reduce((r,o)=>Math.max(r,o.length),0);let s=1<<32-Math.clz32(t);t===s/2&&(s=s>>>1),this.maxLevelSize=s;const n=new Float64Array((s*2-1)*2).fill(NaN);for(const r of e)for(let o=0;o<r.length;o+=1){const a=Number(r[o]),l=s+o-1,c=(l*ea|0)+_d,p=(l*ea|0)+Bd,g=n[c],f=n[p];(!Number.isFinite(g)||a<g)&&(n[c]=a),(!Number.isFinite(f)||a>f)&&(n[p]=a)}for(let r=s/2|0;r>=1;r=r/2|0){const o=r-1|0,a=o+r|0;for(let l=0;l<r;l+=1){const c=o+l,p=a+l*2,g=p+1,f=n[(p*ea|0)+_d],y=n[(g*ea|0)+_d];n[(c*ea|0)+_d]=!Number.isFinite(y)||f<y?f:y;const C=n[(p*ea|0)+Bd],x=n[(g*ea|0)+Bd];n[(c*ea|0)+Bd]=!Number.isFinite(x)||C>x?C:x}}this.buffer=n}computeRangeInto(e,t,i,s,n,r,o){const a=n+r-1;if(a<t||n>i)return o;if(n>=t&&a<=i){const l=e[(s*ea|0)+_d],c=e[(s*ea|0)+Bd];Number.isFinite(l)&&(o[0]=Math.min(o[0],l)),Number.isFinite(c)&&(o[1]=Math.max(o[1],c))}else r>1&&(s=s*2|0,r=r/2|0,this.computeRangeInto(e,t,i,s+1|0,n,r,o),this.computeRangeInto(e,t,i,s+2|0,n+r,r,o));return o}rangeBetween(e,t){const{maxLevelSize:i,buffer:s}=this,n=[1/0,-1/0];return this.computeRangeInto(s,e,t,0,0,i,n),n}get range(){const{buffer:e}=this;return[e[_d],e[Bd]]}},uA=Symbol("domain-ranges");function e7(e){return e.map(t=>xn(t)?JSON.stringify(t):t).join("-")}function hA(e){return Number.isInteger(e)?e:Math.abs(e)>1e4?Math.trunc(e):Math.round(e*1e4)/1e4}function Wn(e){const t=e==null?void 0:e.map(Number);return t!=null&&t.every(Number.isFinite)?t:[]}function XR(e,t){return(t==null?void 0:t.get(e.id))??0}var zg=Symbol("invalid");function Jv(e,t){const i=[];for(let s=0;s<e;s+=1)i[s]=t;return i}function Gf(e,t){const i=[];for(const s of e){const n=s[t];if(n==null)return;i.push(n)}return i}function __(e){const t=[];let i=0,s;const n=new RegExp(`((?:(?:^|\\.)\\s*\\w+|\\[\\s*(?:'(?:[^']|(?<!\\\\)\\\\')*'|"(?:[^"]|(?<!\\\\)\\\\")*"|-?\\d+)\\s*\\])\\s*)`,"g");for(;s=n.exec(e);){if(s.index!==i)return;i=s.index+s[0].length;const r=s[1].trim();if(r.startsWith("."))t.push(r.slice(1).trim());else if(r.startsWith("[")){const o=r.slice(1,-1).trim();o.startsWith("'")?t.push(o.slice(1,-1).replace(new RegExp("(?<!\\\\)\\\\'","g"),"'")):o.startsWith('"')?t.push(o.slice(1,-1).replace(new RegExp('(?<!\\\\)\\\\"',"g"),'"')):t.push(o)}else t.push(r)}if(i===e.length)return t}function t7(e){return t=>{let i=t;for(const s of e)i=i[s];return i}}var B_=class{constructor(e,t="standalone",i=!1){this.opts=e,this.mode=t,this.suppressFieldDotNotation=i,this.debug=ci.create(!0,"data-model"),this.scopeCache=new Map,this.keys=[],this.values=[],this.aggregates=[],this.groupProcessors=[],this.propertyProcessors=[],this.reducers=[],this.processors=[];let s=!0;for(const r of e.props){if(r.type==="key"&&!s)throw new Error("AG Charts - internal config error: keys must come before values.");r.type==="value"&&s&&(s=!1)}const n=({matchGroupIds:r=[]})=>{for(const o of r)if(this.values.every(a=>a.groupId!==o))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${o}).`)};for(const r of e.props)switch(r.type){case"key":this.keys.push({...r,index:this.keys.length,missing:new Map});break;case"value":if(r.property==null)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(r)}`);this.values.push({...r,index:this.values.length,missing:new Map});break;case"aggregate":n(r),this.aggregates.push({...r,index:this.aggregates.length});break;case"group-value-processor":n(r),this.groupProcessors.push({...r,index:this.groupProcessors.length});break;case"property-value-processor":this.propertyProcessors.push({...r,index:this.propertyProcessors.length});break;case"reducer":this.reducers.push({...r,index:this.reducers.length});break;case"processor":this.processors.push({...r,index:this.processors.length});break}}resolveProcessedDataDefById(e,t){var s;const i=(s=this.scopeCache.get(e.id))==null?void 0:s.get(t);if(!i)throw new Error(`AG Charts - didn't find property definition for [${t}, ${e.id}]`);return{index:i.index,def:i}}resolveProcessedDataIndexById(e,t){return this.resolveProcessedDataDefById(e,t).index}resolveProcessedDataDefsByIds(e,t){return t.map(i=>[i,this.resolveProcessedDataDefById(e,i)])}resolveKeysById(e,t,i){const s=this.resolveProcessedDataIndexById(e,t),n=i.keys[s];if(n==null)throw new Error(`AG Charts - didn't find keys for [${t}, ${e.id}]`);return n}resolveColumnById(e,t,i){var r;const s=this.resolveProcessedDataIndexById(e,t),n=(r=i.columns)==null?void 0:r[s];if(n==null)throw new Error(`AG Charts - didn't find column for [${t}, ${e.id}]`);return n}resolveProcessedDataDefsValues(e,{keys:t,values:i}){const s={};for(const[n,{index:r,def:o}]of e){const a=o.type==="key"?t:i;s[n]=a[r]}return s}getDomain(e,t,i,s){const n=this.getDomainsByType(i??"value",s);return(n==null?void 0:n[this.resolveProcessedDataIndexById(e,t)])??[]}getDomainBetweenRange(e,t,[i,s],n){const r=t.map(c=>this.resolveProcessedDataIndexById(e,c)),o=r.join(":"),a=n[uA];let l=a.get(o);if(l==null){const c=r.map(p=>n.columns[p]);l=new Jq(c),a.set(o,l)}return l.rangeBetween(i,s)}getDomainsByType(e,t){switch(e){case"key":return t.domain.keys;case"value":return t.domain.values;case"aggregate":return t.domain.aggValues;case"group-value-processor":return t.domain.groups;default:return null}}processData(e,t){const{opts:{groupByKeys:i,groupByFn:s},aggregates:n,groupProcessors:r,reducers:o,processors:a,propertyProcessors:l}=this,c=performance.now();if(i&&this.keys.length===0)return;let p=this.extractData(e,t);i?p=this.groupData(p):s&&(p=this.groupData(p,s(p))),r.length>0&&this.postProcessGroups(p),n.length>0&&this.aggregateData(p),l.length>0&&this.postProcessProperties(p),o.length>0&&this.reduceData(p),a.length>0&&this.postProcessData(p),this.warnDataMissingProperties(e);const g=performance.now();return p.time=g-c,this.debug.check()&&i7(p),this.processScopeCache(),p}warnDataMissingProperties(e){if(e.length!==0)for(const t of ah(this.keys,this.values))for(const[i,s]of t.missing){if(s<e.length)continue;const n=i==null?"":` for ${i}`;_e.warnOnce(`the key '${t.property}' was not found in any data element${n}.`)}}processScopeCache(){var e;this.scopeCache.clear();for(const t of ah(this.keys,this.values,this.aggregates))if(t.idsMap)for(const[i,s]of t.idsMap)for(const n of s)if(!this.scopeCache.has(i))this.scopeCache.set(i,new Map([[n,t]]));else{if((e=this.scopeCache.get(i))!=null&&e.has(n))throw new Error("duplicate definition ids on the same scope are not allowed.");this.scopeCache.get(i).set(n,t)}}valueGroupIdxLookup({matchGroupIds:e}){const t=[];for(const[i,s]of this.values.entries())(!e||s.groupId&&e.includes(s.groupId))&&t.push(i);return t}valueIdxLookup(e,t){const i=e==null||e.length===0,s=typeof t=="string"?t:t.id,n=o=>{if(o.idsMap){for(const[a,l]of o.idsMap)if(e!=null&&e.includes(a)&&l.has(s))return!0}return!1},r=this.values.reduce((o,a,l)=>((a.scopes==null||i&&!a.scopes.length||a.scopes.some(p=>e==null?void 0:e.includes(p)))&&(a.property===s||a.id===s||n(a))&&o.push(l),o),[]);if(r.length===0)throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(t)} in scope(s) ${JSON.stringify(e)}`);return r}extractData(e,t){const{dataDomain:i,processValue:s,scopes:n,allScopesHaveSameDefs:r}=this.initDataDomainProcessor(),o=new Map(t==null?void 0:t.map(R=>[R.id,R])),{keys:a,values:l}=this,c=e.length;let p=0,g,f;const y=a.map(R=>{const{invalidValue:I}=R;return e.map((P,k)=>{const _=s(R,P,k);return _!==zg?_:(g??(g=Jv(c,!1)),g[k]=!0,f??(f=Jv(c,!1)),f[k]=!0,I)})});let C;const x=(R,I)=>{C??(C=new Map);let P=C.get(R);P==null&&(P=Jv(c,!1),C.set(R,P)),P[I]=!0,f??(f=Jv(c,!1)),f[I]=!0},M=[];l.forEach(R=>{const{invalidValue:I}=R,P=M.length>0?M[M.length-1]:void 0,k=e.map((_,B)=>{const H=(g==null?void 0:g[B])===!0;let V=P==null?void 0:P[B];for(const U of R.scopes??n){const $=o.get(U),te=($==null?void 0:$.data[B])??_;V=s(R,te,B,V,U),(H||V===zg)&&x(U,B)}return H?I:V===zg?(p+=1,I):V});M.push(k)});const b=R=>{const I=i.get(R),P=I.getDomain();return Ic.is(I)&&P[0]>P[1]?[]:P};return{type:"ungrouped",input:{count:e.length},rawData:e,rawDataSources:t!=null?new Map(t.map(R=>[R.id,R.data])):void 0,aggregation:void 0,keys:y,columns:M,invalidKeys:g,invalidDataScopes:C,invalidData:f,domain:{keys:a.map(b),values:l.map(b)},defs:{allScopesHaveSameDefs:r,keys:a,values:l},partialValidDataCount:p,time:0,[uA]:new Map}}groupData(e,t){const i=new Map,{rawData:s,keys:n,invalidKeys:r,invalidDataScopes:o,invalidData:a}=e;for(let p=0;p<s.length;p+=1){const g=s[p],f=Gf(n,p);if(f==null||f.length===0)continue;const y=(t==null?void 0:t({index:p,keys:f,values:void 0,aggValues:void 0,datum:g,validScopes:void 0}))??f,C=e7(y);if((r==null?void 0:r[p])===!0)continue;let x;if(o!=null&&(a==null?void 0:a[p])===!0&&(x=new Set,o.forEach((b,R)=>{b[p]===!1&&x.add(R)}),x.size===0))continue;const M=i.get(C);if(M!=null){if(M.datumIndices.push(p),x!=null&&M.validScopes!=null)for(const b of M.validScopes)x.has(b)||M.validScopes.delete(b)}else i.set(C,{keys:y,datumIndices:[p],validScopes:x})}const l=[],c=[];for(const{keys:p,datumIndices:g,validScopes:f}of i.values())(f==null?void 0:f.size)!==0&&(l.push(p),c.push({datumIndices:g,keys:p,aggregation:[],validScopes:f}));return{...e,type:"grouped",domain:{...e.domain,groups:l},groups:c}}aggregateData(e){var r,o,a;const t=this.aggregates.map(()=>[1/0,-1/0]);e.domain.aggValues=t;const{keys:i,columns:s,rawData:n}=e;if(e.type==="ungrouped"){const l=n.map((c,p)=>{var f,y,C;const g=[];for(const[x,M]of this.aggregates.entries()){const b=this.valueGroupIdxLookup(M);let R=((f=M.groupAggregateFunction)==null?void 0:f.call(M))??[1/0,-1/0];const I=b.map(B=>s[B][p]),P=Gf(i,p),k=P!=null?M.aggregateFunction(I,P):void 0;k&&(R=((y=M.groupAggregateFunction)==null?void 0:y.call(M,k,R))??Ic.extendDomain(k,R));const _=(((C=M.finalFunction)==null?void 0:C.call(M,R))??R).map(B=>hA(B));g[x]=_,Ic.extendDomain(_,t[x])}return g});e.aggregation=l}else for(const[l,c]of this.aggregates.entries()){const p=this.valueGroupIdxLookup(c);for(const g of e.groups){if(g.aggregation??(g.aggregation=[]),g.validScopes!=null)continue;const f=g.keys;let y=((r=c.groupAggregateFunction)==null?void 0:r.call(c))??[1/0,-1/0];for(const x of g.datumIndices){const M=p.map(R=>s[R][x]),b=c.aggregateFunction(M,f);b&&(y=((o=c.groupAggregateFunction)==null?void 0:o.call(c,b,y))??Ic.extendDomain(b,y))}const C=(((a=c.finalFunction)==null?void 0:a.call(c,y))??y).map(x=>hA(x));g.aggregation[l]=C,Ic.extendDomain(C,t[l])}}}postProcessGroups(e){const{groupProcessors:t}=this,{rawData:i,columns:s,invalidData:n}=e;for(const r of t){const o=this.valueGroupIdxLookup(r),a=r.adjust()();for(let l=0;l<i.length;l+=1)(n==null?void 0:n[l])!==!0&&a(s,o,l);for(const l of o){const p=this.values[l].valueType==="category",g=s[l],f=p?new cA:new Ic;for(let y=0;y<i.length;y+=1)(n==null?void 0:n[y])!==!0&&f.extend(g[y]);e.domain.values[l]=f.getDomain()}}}postProcessProperties(e){for(const{adjust:t,property:i,scopes:s}of this.propertyProcessors)for(const n of this.valueIdxLookup(s,i))t()(e,n)}reduceData(e){var t;e.reduced??(e.reduced={});for(const i of this.reducers){const s=i.reducer();let n=i.initialValue;const{rawData:r,keys:o,columns:a}=e;if(e.type==="grouped")for(const l of e.groups)(!l.validScopes||(t=i.scopes)!=null&&t.some(c=>{var p;return(p=l.validScopes)==null?void 0:p.has(c)}))&&(n=s(n,{index:l.datumIndices,keys:l.datumIndices.flatMap(c=>o.map(p=>p[c])),values:l.datumIndices.map(c=>a[c]),datum:l.datumIndices.map(c=>r[c])}));else for(let l=0;l<r.length;l+=1)n=s(n,{index:[l],keys:o.map(c=>c[l]),values:[a[l]],datum:[r[l]]});e.reduced[i.property]=n}}postProcessData(e){e.reduced??(e.reduced={});for(const t of this.processors)e.reduced[t.property]=t.calculate(e,e.reduced[t.property])}initDataDomainProcessor(){const{keys:e,values:t}=this,i=new Set;for(const c of t)if(c.scopes)for(const p of c.scopes)i.add(p);const s=new Map,n=new Map;let r=!0;const o=()=>{for(const c of ah(e,t))c.valueType==="category"?s.set(c,new cA):(s.set(c,new Ic),r&&(r=(c.scopes??[]).length===i.size))};o();const a=this.buildAccessors(ah(e,t));return{dataDomain:s,processValue:(c,p,g,f,y)=>{var b,R,I;let C,x;if(a.has(c.property)){try{x=a.get(c.property)(p)}catch{}C=x!=null}else C=c.property in p,x=C?p[c.property]:c.missingValue;c.forceValue!=null&&(x=C&&HC(x)?-1*c.forceValue:c.forceValue,C=!0);const M="missingValue"in c;if(!C&&!M){const P=c.missing.get(y)??0;c.missing.set(y,P+1)}if(s.has(c)||o(),C&&((b=c.validation)==null?void 0:b.call(c,x,p,g))===!1)if("invalidValue"in c)x=c.invalidValue;else return this.mode!=="integrated"&&_e.warnOnce(`invalid value of type [${typeof x}] for [${c.scopes} / ${c.id}] ignored:`,`[${x}]`),zg;return c.processor&&(n.has(c)||n.set(c,c.processor()),x=(R=n.get(c))==null?void 0:R(x,f===zg?void 0:f)),(I=s.get(c))==null||I.extend(x),x},initDataDomain:o,scopes:i,allScopesHaveSameDefs:r}}buildAccessors(e){const t=new Map;if(this.suppressFieldDotNotation)return t;for(const i of e){if(!(i.property.includes(".")||i.property.includes("[")))continue;const n=__(i.property);if(n==null){_e.warnOnce("Invalid property path [%s]",i.property);continue}const r=t7(n);t.set(i.property,r)}return t}};function i7(e){const t=(i,s)=>{s.length>0&&(_e.log(`DataModel.processData() - ${i}`),_e.table(s))};_e.log("DataModel.processData() - processedData",e),t("Key Domains",e.domain.keys),t("Group Domains",e.domain.groups??[]),t("Value Domains",e.domain.values),t("Aggregate Domains",e.domain.aggValues??[])}var G_=class sl{constructor(t,i){this.mode=t,this.suppressFieldDotNotation=i,this.debug=ci.create(!0,"data-model"),this.requested=[],this.status="setup"}async request(t,i,s){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");return new Promise((n,r)=>{this.requested.push({id:t,opts:s,data:i,resolve:n,reject:r})})}execute(t){if(this.status!=="setup")throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const i=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",i);const s=this.mergeRequested(i);this.debug("DataController.execute() - merged",s),this.debug.check()&&(Mi().processedData=[]);const n=[];for(const{data:r,ids:o,opts:a,resolves:l,rejects:c}of s){const p=t==null?void 0:t.find(y=>qq(y,r,o,a));let g,f;if(p==null)try{g=new B_(a,this.mode,this.suppressFieldDotNotation),f=g.processData(r,i)}catch(y){c.forEach(C=>C(y));continue}else({dataModel:g,processedData:f}=p);n.push({opts:a,data:r,ids:o,dataModel:g,processedData:f}),this.debug.check()&&Mi("processedData").push(f),(f==null?void 0:f.partialValidDataCount)===0?l.forEach(y=>y({dataModel:g,processedData:f})):f?this.splitResult(g,f,o,l):c.forEach(y=>y(new Error("AG Charts - no processed data generated")))}return n}validateRequests(t){const i=[];for(const[s,n]of t.entries())s>0&&n.data.length!==t[0].data.length&&n.opts.groupByData===!1?n.reject(new Error("all series[].data arrays must be of the same length and have matching keys.")):i.push(n);return i}mergeRequested(t){const i=[];for(const s of t){const n=i.find(sl.groupMatch(s));n?n.push(s):i.push([s])}return i.map(sl.mergeRequests)}splitResult(t,i,s,n){for(let r=0;r<s.length;r++){const o=n[r];o({dataModel:t,processedData:i})}}static groupMatch({data:t,opts:i}){function s(c){return c.filter(p=>p.type==="key").map(p=>p.property).join(";")}const{groupByData:n,groupByKeys:r=!1,groupByFn:o,props:a}=i,l=s(a);return([c])=>(n===!1||c.data===t)&&(c.opts.groupByKeys??!1)===r&&c.opts.groupByFn===o&&s(c.opts.props)===l}static mergeRequests(t){return t.reduce((i,{id:s,data:n,resolve:r,reject:o,opts:{props:a,...l}})=>{var c;i.ids.push(s),i.rejects.push(o),i.resolves.push(r),i.data??(i.data=n),i.opts??(i.opts={...l,props:[]});for(const p of a){const g={...p,scopes:[s]};sl.createIdsMap(s,g);const f=i.opts.props.find(y=>y.type===g.type&&sl.deepEqual(y,g));if(!f){i.opts.props.push(g);continue}f.scopes??(f.scopes=[]),f.scopes.push(...g.scopes??[]),(f.type==="key"||f.type==="value")&&((c=g.idsMap)!=null&&c.size)&&sl.mergeIdsMap(g.idsMap,f.idsMap)}return i},{ids:[],rejects:[],resolves:[],data:null,opts:null})}static mergeIdsMap(t,i){for(const[s,n]of t){const r=i.get(s);if(r==null)i.set(s,new Set(n));else for(const o of n)r.add(o)}}static createIdsMap(t,i){i.id!=null&&(i.idsMap??(i.idsMap=new Map),i.idsMap.has(t)?i.idsMap.get(t).add(i.id):i.idsMap.set(t,new Set([i.id])))}static deepEqual(t,i){if(t===i)return!0;if(t&&i&&typeof t=="object"&&typeof i=="object"){if(t.constructor!==i.constructor)return!1;let s,n;if(Array.isArray(t)){if(n=t.length,n!==i.length)return!1;for(s=n-1;s>=0;s--)if(!sl.deepEqual(t[s],i[s]))return!1;return!0}const r=Object.keys(t);if(n=r.length,n!==Object.keys(i).length)return!1;for(s=n-1;s>=0;s--){const o=r[s];if(!sl.skipKeys.has(o)&&(!Object.hasOwn(i,o)||!sl.deepEqual(t[o],i[o])))return!1}return!0}return!1}};G_.skipKeys=new Set(["id","idsMap","type","scopes"]);var z_=G_,s7=class{constructor(){this.axesMap=new Map,this.hidden=new Set,this.themeTemplates=new Map}register(e,t){this.axesMap.set(e,t.moduleFactory),t.themeTemplate&&this.setThemeTemplate(e,t.themeTemplate),t.hidden&&this.hidden.add(e)}create(e,t){const i=this.axesMap.get(e);if(i)return i(t);throw new Error(`AG Charts - unknown axis type: ${e}`)}has(e){return this.axesMap.has(e)}keys(){return this.axesMap.keys()}publicKeys(){return[...this.keys()].filter(e=>!this.hidden.has(e))}setThemeTemplate(e,t){return this.themeTemplates.set(e,t),this}getThemeTemplate(e){return this.themeTemplates.get(e)}},ml=new s7,Ep=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"annotations",chartTypes:["cartesian"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"foreground",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],optionsInnerKey:"image"},{type:"root",optionsKey:"chartToolbar",chartTypes:["cartesian"]},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"statusBar",chartTypes:["cartesian"],identifier:"status-bar"},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian","topology"]},{type:"root",optionsKey:"ranges",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"]},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bar",community:!0},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"line",community:!0},{type:"axis",optionsKey:"axes[]",chartTypes:["cartesian"],identifier:"ordinal-time"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"candlestick"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"cone-funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"funnel"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"ohlc"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-marker"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-shape-background"},{type:"series",optionsKey:"series[]",chartTypes:["topology"],identifier:"map-line-background"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"chord"},{type:"series",optionsKey:"series[]",chartTypes:["flow-proportion"],identifier:"sankey"},{type:"series",optionsKey:"series[]",chartTypes:["standalone"],identifier:"pyramid"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"linear-gauge"},{type:"series",optionsKey:"series[]",chartTypes:["gauge"],identifier:"radial-gauge"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"},{type:"context",contextKey:"sharedToolbar",chartTypes:["cartesian"]}];function n7(e){return Ep.some(t=>t.type==="series"&&t.identifier===e)}function Bh(e){var t;return(t=Ep.find(i=>i.type==="series"&&i.identifier===e))==null?void 0:t.chartTypes}function r7(e){var i;return((i=Bh(e))==null?void 0:i.find(s=>s==="cartesian"))==="cartesian"}function o7(e){var i;return((i=Bh(e))==null?void 0:i.find(s=>s==="polar"))==="polar"}function a7(e){var i;return((i=Bh(e))==null?void 0:i.find(s=>s==="hierarchy"))==="hierarchy"}function l7(e){var i;return((i=Bh(e))==null?void 0:i.find(s=>s==="topology"))==="topology"}function c7(e){var i;return((i=Bh(e))==null?void 0:i.find(s=>s==="flow-proportion"))==="flow-proportion"}function u7(e){var i;return((i=Bh(e))==null?void 0:i.find(s=>s==="standalone"))==="standalone"}function h7(e){var i;return((i=Bh(e))==null?void 0:i.find(s=>s==="gauge"))==="gauge"}function d7(e){return e.packageType==="enterprise"}function p7(e){if(!d7(e))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const t=Ep.find(i=>i.type===e.type&&("optionsKey"in i&&"optionsKey"in e?i.optionsKey===e.optionsKey:!0)&&("contextKey"in i&&"contextKey"in e?i.contextKey===e.contextKey:!0)&&i.identifier===e.identifier&&e.chartTypes.every(s=>i.chartTypes.includes(s)));return t&&(t.useCount??(t.useCount=0),t.useCount++),t!=null}function g7(){return Ep.filter(({useCount:e})=>e==null||e===0)}var f7=class{constructor(){this.legendMap=new Map,this.themeTemplates=new Map}register(e,{optionsKey:t,moduleFactory:i,themeTemplate:s}){this.legendMap.set(e,{optionsKey:t,moduleFactory:i}),this.themeTemplates.set(t,s)}create(e,t){var s;const i=(s=this.legendMap.get(e))==null?void 0:s.moduleFactory;if(i)return i(t);throw new Error(`AG Charts - unknown legend type: ${e}`)}getThemeTemplates(){return Object.fromEntries(this.themeTemplates)}getKeys(){return Array.from(this.legendMap.entries()).reduce((e,[t,i])=>(e[t]=i.optionsKey,e),{})}},QR=new f7,H_=class extends Map{get(e){return super.get(e)??"unknown"}isCartesian(e){return this.get(e)==="cartesian"}isPolar(e){return this.get(e)==="polar"}isHierarchy(e){return this.get(e)==="hierarchy"}isTopology(e){return this.get(e)==="topology"}isFlowProportion(e){return this.get(e)==="flow-proportion"}isStandalone(e){return this.get(e)==="standalone"}isGauge(e){return this.get(e)==="gauge"}get seriesTypes(){return Array.from(this.keys())}get cartesianTypes(){return this.seriesTypes.filter(e=>this.isCartesian(e))}get polarTypes(){return this.seriesTypes.filter(e=>this.isPolar(e))}get hierarchyTypes(){return this.seriesTypes.filter(e=>this.isHierarchy(e))}get topologyTypes(){return this.seriesTypes.filter(e=>this.isTopology(e))}get flowProportionTypes(){return this.seriesTypes.filter(e=>this.isFlowProportion(e))}get standaloneTypes(){return this.seriesTypes.filter(e=>this.isStandalone(e))}get gaugeTypes(){return this.seriesTypes.filter(e=>this.isGauge(e))}},m7=class extends Map{set(e,t){return super.set(e,Et(t,this.get(e)))}},wi=new H_,V_=new H_,LM=new m7,v7=class{constructor(){this.seriesMap=new Map,this.themeTemplates=new Map}register(e,{chartTypes:[t],moduleFactory:i,tooltipDefaults:s,defaultAxes:n,themeTemplate:r,paletteFactory:o,solo:a,stackable:l,groupable:c,stackedByDefault:p,hidden:g}){this.setThemeTemplate(e,r),this.seriesMap.set(e,{moduleFactory:i,tooltipDefaults:s,defaultAxes:n,paletteFactory:o,solo:a,stackable:l,groupable:c,stackedByDefault:p}),wi.set(e,t),g||V_.set(e,t)}create(e,t){var s;const i=(s=this.seriesMap.get(e))==null?void 0:s.moduleFactory;if(i)return i(t);throw new Error(`AG Charts - unknown series type: ${e}`)}cloneDefaultAxes(e,t){var n;const i=(n=this.seriesMap.get(e))==null?void 0:n.defaultAxes;if(i==null)return null;const s=typeof i=="function"?i(t):i;return{axes:Us(s)}}setThemeTemplate(e,t){const i=this.themeTemplates.get(e);this.themeTemplates.set(e,Et(t,i))}getThemeTemplate(e){return this.themeTemplates.get(e)}getPaletteFactory(e){var t;return(t=this.seriesMap.get(e))==null?void 0:t.paletteFactory}getTooltipDefauls(e){var t;return(t=this.seriesMap.get(e))==null?void 0:t.tooltipDefaults}isSolo(e){var t;return((t=this.seriesMap.get(e))==null?void 0:t.solo)??!1}isGroupable(e){var t;return((t=this.seriesMap.get(e))==null?void 0:t.groupable)??!1}isStackable(e){var t;return((t=this.seriesMap.get(e))==null?void 0:t.stackable)??!1}isStackedByDefault(e){var t;return((t=this.seriesMap.get(e))==null?void 0:t.stackedByDefault)??!1}},lr=new v7,qR=class Qu extends Ra{constructor(t){super(),this.chart=t}subscribe(t=Qu.DEFAULT_GROUP){let i=this.get(t);return i||(i=new Set,Qu.chartsGroups.set(t,i)),i.add(this.chart),this}unsubscribe(t=Qu.DEFAULT_GROUP){var i;return(i=this.get(t))==null||i.delete(this.chart),this}getChart(){return this.chart}getGroup(t=Qu.DEFAULT_GROUP){const i=this.get(t);return i?Array.from(i):[]}getGroupSiblings(t=Qu.DEFAULT_GROUP){return this.getGroup(t).filter(i=>i!==this.chart)}get(t){return Qu.chartsGroups.get(t)}};qR.chartsGroups=new Map;qR.DEFAULT_GROUP=Symbol("sync-group-default");var y7=qR,JR=class extends yt{constructor(){super(...arguments),this.enabled=!1}};A([O(nt)],JR.prototype,"enabled",2);A([O(_t)],JR.prototype,"tabIndex",2);var W_=["top","right","bottom","left"];function C7(e){return typeof e=="string"&&W_.includes(e)}function S7(e){const t=[],i=[],s=[...W_];for(const n of e)n instanceof wh&&(C7(n.position)?i.push(n.position):t.push(n));for(const n of t){let r;do r=s.pop();while(r&&i.includes(r));if(r==null)break;n.position=r}}var w7=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"];function x7(e,t,i){var c,p;const s=(g,f,y)=>{const C=[g];for(const x of w7)x in f&&f[x]!=null&&C.push(`${x}=${f[x]}`);return y!=null&&y.seriesGrouping&&C.push(`seriesGrouping.groupId=${y==null?void 0:y.seriesGrouping.groupId}`),C.join(";")},n=new Map;let r=0;for(const g of e){const f=s(g.type,g.properties,i==null?void 0:i[r]);n.has(f)||n.set(f,[]),(c=n.get(f))==null||c.push([g,r++])}const o=new Map;r=0;for(const g of t){const f=s(g.type,g,g);o.has(f)||o.set(f,[]),(p=o.get(f))==null||p.push([g,r++])}if(![...n.keys()].some(g=>o.has(g)))return{status:"no-overlap",oldKeys:n.keys(),newKeys:o.keys()};const l=[];for(const[g,f]of o.entries())for(const[y,C]of f){const x=n.get(g);if(x==null||x.length<1){l.push({opts:y,targetIdx:C,idx:C,status:"add"}),n.delete(g);continue}const[M,b]=x.shift(),R=(i==null?void 0:i[b])??{},I=ga(R,y??{}),{groupIndex:P,stackIndex:k}=(I==null?void 0:I.seriesGrouping)??{};P!=null||k!=null?l.push({opts:y,series:M,diff:I,targetIdx:C,idx:b,status:"series-grouping"}):I?l.push({opts:y,series:M,diff:I,targetIdx:C,idx:b,status:"update"}):l.push({opts:y,series:M,targetIdx:C,idx:b,status:"no-op"}),x.length===0&&n.delete(g)}for(const g of n.values())for(const[f,y]of g)l.push({series:f,idx:y,targetIdx:-1,status:"remove"});return{status:"overlap",changes:l}}function Fl(e){var i;const{series:t}=e;if(t)return((i=t[0])==null?void 0:i.type)??"line"}function zf(e){const t=Fl(e);return t==null?!1:wi.isCartesian(t)||r7(t)}function pS(e){const t=Fl(e);return t==null?!1:wi.isPolar(t)||o7(t)}function eD(e){const t=Fl(e);return t==null?!1:wi.isHierarchy(t)||a7(t)}function tD(e){const t=Fl(e);return t==null?!1:wi.isTopology(t)||l7(t)}function iD(e){const t=Fl(e);return t==null?!1:wi.isFlowProportion(t)||c7(t)}function lC(e){const t=Fl(e);return t==null?!1:wi.isStandalone(t)||u7(t)}function gS(e){const t=Fl(e);return t==null?!1:wi.isGauge(t)||h7(t)}function b7(e){const t=Fl(e);return pS(e)&&t!=="pie"&&t!=="donut"}function M7(e){return e==null?!1:wi.has(e)}function R7(e){return e==null?!1:ml.has(e)}var D7=class extends SR{applyOptions(e){for(const t of this.moduleMap.values())t.module.optionsKey in e&&da(t.moduleInstance)&&t.moduleInstance.set(e[t.module.optionsKey])}*legends(){for(const{module:e,moduleInstance:t}of this.moduleMap.values())e.type==="legend"&&(yield{legendType:e.identifier,legend:t})}},TM="ag-charts-overlay",dA="ag-charts-dark-overlay",lh=class extends yt{constructor(e,t){super(),this.className=e,this.defaultMessageId=t,this.enabled=!0}getText(e){return e.t(this.text??this.defaultMessageId)}getElement(e,t,i){var s;if((s=this.content)==null||s.remove(),this.focusBox=i,this.renderer){const n=this.renderer();if(n instanceof HTMLElement)this.content=n;else{const r=Xt("div");r.innerHTML=n,this.content=r.firstElementChild}}else{const n=Xt("div",{display:"flex",alignItems:"center",justifyContent:"center",boxSizing:"border-box",height:"100%",margin:"8px",font:"12px Verdana, sans-serif"});n.innerText=this.getText(t),this.content=n,e==null||e.animate({from:0,to:1,id:"overlay",phase:"add",groupId:"opacity",onUpdate(r){n.style.opacity=String(r)},onStop(){n.style.opacity="1"}})}return this.content}removeElement(e=()=>{var i;return(i=this.content)==null?void 0:i.remove()},t){if(this.content){if(t){const{content:i}=this;t.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(s){i.style.opacity=String(s)},onStop(){e==null||e()}})}else e==null||e();this.content=void 0,this.focusBox=void 0}}};A([O(nt)],lh.prototype,"enabled",2);A([O(Fe,{optional:!0})],lh.prototype,"text",2);A([O(Mn,{optional:!0})],lh.prototype,"renderer",2);var Ip=class extends yt{constructor(){super(...arguments),this.darkTheme=!1,this.loading=new lh("ag-charts-loading-overlay","overlayLoadingData"),this.noData=new lh("ag-charts-no-data-overlay","overlayNoData"),this.noVisibleSeries=new lh("ag-charts-no-visible-series","overlayNoVisibleSeries"),this.unsupportedBrowser=new lh("ag-charts-unsupported-browser","overlayUnsupportedBrowser")}getFocusInfo(e){for(const t of[this.loading,this.noData,this.noVisibleSeries,this.unsupportedBrowser])if(t.focusBox!==void 0)return{text:t.getText(e),rect:t.focusBox}}destroy(){this.loading.removeElement(),this.noData.removeElement(),this.noVisibleSeries.removeElement(),this.unsupportedBrowser.removeElement()}};A([O(nt)],Ip.prototype,"darkTheme",2);A([O(Ye)],Ip.prototype,"loading",2);A([O(Ye)],Ip.prototype,"noData",2);A([O(Ye)],Ip.prototype,"noVisibleSeries",2);A([O(Ye)],Ip.prototype,"unsupportedBrowser",2);function E7(e,t){const{animationDuration:i}=Tf.add,s=i*t,n=Xt("div",`${TM}--loading`,{display:"flex",alignItems:"center",justifyContent:"center",flexDirection:"column",height:"100%",boxSizing:"border-box",font:"13px Verdana, sans-serif",userSelect:"none",animation:`ag-charts-loading ${s}ms linear 50ms both`}),r=Xt("span",{width:"45px",height:"40px",backgroundImage:["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join(""),backgroundSize:"10px 400%",backgroundRepeat:"no-repeat",animation:"ag-charts-loading-matrix 1s infinite linear"}),o=Xt("p",{marginTop:"1em"});o.innerText=e;const a=Xt("div",`${TM}__loading-background`,{position:"absolute",inset:"0",opacity:"0.5",zIndex:"-1"}),l=Xt("style");return l.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),n.replaceChildren(l,r,o,a),n}var j_=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.ANY_CONTENT=1]="ANY_CONTENT",e))(j_||{}),U_=(e=>(e[e.FOREGROUND=0]="FOREGROUND",e[e.HIGHLIGHT=1]="HIGHLIGHT",e[e.LABEL=2]="LABEL",e))(U_||{}),K_=(e=>(e[e.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",e[e.NEAREST_NODE=1]="NEAREST_NODE",e[e.AXIS_ALIGNED=2]="AXIS_ALIGNED",e))(K_||{}),I7=.25,L7=.125,xm=class{constructor(e,t,{datum:i},s){this.type=e,this.event=t,this.datum=i,this.seriesId=s.id}},sD=class{constructor(e,t,i){this.series=e,this.seriesGrouping=t,this.oldGrouping=i,this.type="groupingChanged"}},Lp=class extends e_{constructor(e){super(),this.destroyFns=[],this.usesPlacedLabels=!1,this.seriesGrouping=void 0,this.NodeEvent=xm,this.internalId=Qr(this),this.contentGroup=new yn({name:`${this.internalId}-content`,zIndex:1}),this.highlightGroup=new yn({name:`${this.internalId}-highlight`,zIndex:1}),this.annotationGroup=new yn({name:`${this.internalId}-annotation`}),this.labelGroup=new yn({name:`${this.internalId}-series-labels`}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new SR,this.datumCallbackCache=new Map,this.connectsToYAxis=!1,this._declarationOrder=-1,this.seriesListeners=new Ma,this._pickNodeCache=new IR;const{moduleCtx:t,pickModes:i,directionKeys:s={},directionNames:n={},canHaveAxes:r=!1,usesPlacedLabels:o=!1}=e;this.ctx=t,this.directionKeys=s,this.directionNames=n,this.canHaveAxes=r,this.usesPlacedLabels=o,this.highlightGroup=new yn({name:`${this.internalId}-highlight`}),this.highlightNode=this.highlightGroup.appendChild(new lt({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new lt({name:"highlightLabel",zIndex:10})),this.pickModes=i}get pickModeAxis(){return"main"}get id(){var e;return((e=this.properties)==null?void 0:e.id)??this.internalId}get type(){return this.constructor.type??""}get data(){return this._data??this._chartData}set visible(e){this.properties.visible=e,this.ctx.legendManager.toggleItem({enabled:e,seriesId:this.id}),this.ctx.legendManager.update(),this.visibleMaybeChanged()}get visible(){return this.ctx.legendManager.getSeriesEnabled(this.id)??this.properties.visible}get hasData(){return this.data!=null&&this.data.length>0}get tooltipEnabled(){var e;return((e=this.properties.tooltip)==null?void 0:e.enabled)??!1}onDataChange(){this.nodeDataRefresh=!0,this._pickNodeCache.clear()}setOptionsData(e){this._data=e,this.onDataChange()}setChartData(e){this._chartData=e,this.data===e&&this.onDataChange()}onSeriesGroupingChange(e,t){const{internalId:i,type:s,visible:n}=this;e&&this.ctx.seriesStateManager.deregisterSeries(this),t&&this.ctx.seriesStateManager.registerSeries({internalId:i,type:s,visible:n,seriesGrouping:t}),this.fireEvent(new sD(this,t,e))}getBandScalePadding(){return{inner:1,outer:0}}attachSeries(e,t,i){e.appendChild(this.contentGroup),t.appendChild(this.highlightGroup),t.appendChild(this.labelGroup),i==null||i.appendChild(this.annotationGroup)}detachSeries(e,t,i){e==null||e.removeChild(this.contentGroup),t.removeChild(this.highlightGroup),t.removeChild(this.labelGroup),i==null||i.removeChild(this.annotationGroup)}setSeriesIndex(e){return e===this._declarationOrder?!1:(this._declarationOrder=e,this.contentGroup.zIndex=[1,e,0],this.highlightGroup.zIndex=[1,e,1],this.labelGroup.zIndex=[1,e,2],this.annotationGroup.zIndex=e,!0)}renderToOffscreenCanvas(){return!1}addEventListener(e,t){return super.addEventListener(e,t)}addListener(e,t){return this.seriesListeners.addListener(e,t)}dispatch(e,t){this.seriesListeners.dispatch(e,t)}addChartEventListeners(){}destroy(){this.destroyFns.forEach(e=>e()),this.destroyFns=[],this.resetDatumCallbackCache(),this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(e,t){const i=this.resolveKeyDirection(e),s=t==null?void 0:t[i],n=[];if(!s)return n;const r=(...o)=>{for(const a of o)Array.isArray(a)?r(...a):typeof a=="object"?r(...Object.values(a)):n.push(a)};return r(...s.map(o=>this.properties[o])),n}getKeys(e){return this.getDirectionValues(e,this.directionKeys)}getKeyProperties(e){return this.directionKeys[this.resolveKeyDirection(e)]??[]}getNames(e){return this.getDirectionValues(e,this.directionNames)}resolveKeyDirection(e){return e}getDomain(e){const t=this.getSeriesDomain(e),i=this.moduleMap.mapModules(s=>s.getDomain(e)).flat();return i.length!==0?t.concat(i):t}getRange(e,t){return this.getSeriesRange(e,t)}markNodeDataDirty(){this.nodeDataRefresh=!0,this._pickNodeCache.clear(),this.visibleMaybeChanged()}visibleMaybeChanged(){this.ctx.seriesStateManager.updateSeries(this)}getOpacity(){const{dimOpacity:t=1,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||t===1)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;case 2:default:return t}}getStrokeWidth(e){const{strokeWidth:t,enabled:i=!0}=this.properties.highlightStyle.series;if(!i||t===void 0)return e;switch(this.isItemIdHighlighted()){case 1:return t;case 0:case 2:return e}}isItemIdHighlighted(){var t,i;const e=(i=(t=this.ctx.highlightManager)==null?void 0:t.getActiveHighlight())==null?void 0:i.series;return e==null?0:e!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapModules(e=>e.getTooltipParams()).reduce((e,t)=>Object.assign(e,t),{})}pickNode(e,t,i=!1){const{pickModes:s,pickModeAxis:n,visible:r,contentGroup:o}=this;if(!r||!o.visible||t==="highlight"&&!this.properties.highlight.enabled||t==="highlight-tooltip"&&!this.properties.highlight.enabled)return;let a=1/0;if(t==="tooltip"||t==="highlight-tooltip"){const{tooltip:f}=this.properties;a=typeof f.range=="number"?f.range:1/0,i||(i=f.range==="exact")}else if(t==="event"||t==="context-menu"){const{nodeClickRange:f}=this.properties;a=typeof f=="number"?f:1/0,i||(i=f==="exact")}const l=s.filter(f=>!i||f===0),{x:c,y:p}=e,g=JSON.stringify({x:c,y:p,maxDistance:a,selectedPickModes:l});if(this._pickNodeCache.has(g))return this._pickNodeCache.get(g);for(const f of l){let y;switch(f){case 0:y=this.pickNodeExactShape(e);break;case 1:y=this.pickNodeClosestDatum(e);break;case 2:y=n!=null?this.pickNodeMainAxisFirst(e,n==="main-category"):void 0;break}if(y&&y.distance<=a)return this._pickNodeCache.set(g,{pickMode:f,match:y.datum,distance:y.distance})}return this._pickNodeCache.set(g,void 0)}pickNodeExactShape(e){const t=this.contentGroup.pickNode(e.x,e.y);if(t&&t.datum.missing!==!0)return{datum:t.datum,distance:0}}pickNodeClosestDatum(e){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeNearestDistantObject(e,t){const i=zC(e.x,e.y,t);if(i.nearest!==void 0&&i.nearest.datum.missing!==!0)return{datum:i.nearest.datum,distance:Math.sqrt(i.distanceSquared)}}pickNodeMainAxisFirst(e,t){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}getLabelData(){return[]}updatePlacedLabelData(e){}fireNodeClickEvent(e,t){this.fireEvent(new this.NodeEvent("nodeClick",e,t,this))}fireNodeDoubleClickEvent(e,t){this.fireEvent(new this.NodeEvent("nodeDoubleClick",e,t,this))}createNodeContextMenuActionEvent(e,t){return new this.NodeEvent("nodeContextMenuAction",e,t,this)}onLegendInitialState(e,t){const{visible:i=!0,itemId:s,legendItemName:n}=t??{};this.toggleSeriesItem(i,e,s,n)}onLegendItemClick(e){const{enabled:t,itemId:i,series:s,legendType:n}=e,r="legendItemName"in this.properties?this.properties.legendItemName:void 0,o="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,a=r!=null&&r===e.legendItemName;(s.id===this.id||a||o!=null)&&this.toggleSeriesItem(t,n,i,r,e)}onLegendItemDoubleClick(e){const{enabled:t,itemId:i,series:s,numVisibleItems:n,legendType:r}=e,o="legendItemName"in this.properties?this.properties.legendItemName:void 0,a="legendItemKey"in this.properties?this.properties.legendItemKey:void 0,l=o!=null&&o===e.legendItemName;s.id===this.id||l||a!=null?this.toggleSeriesItem(!0,r,i,o,e):t&&n===1?this.toggleSeriesItem(!0,r,void 0,o):this.toggleSeriesItem(!1,r,void 0,o)}toggleSeriesItem(e,t,i,s,n){const r=this.id;(e||t!=="category")&&(this.visible=e),this.nodeDataRefresh=!0,this._pickNodeCache.clear();const o={type:"seriesVisibilityChange",seriesId:r,itemId:i,legendItemName:(n==null?void 0:n.legendItemName)??s,visible:e};this.fireEvent(o),this.ctx.legendManager.toggleItem({enabled:e,seriesId:r,itemId:i,legendItemName:s})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return{...this.ctx,series:this}}getLabelText(e,t,i=Of){return e.formatter?this.ctx.callbackCache.call(e.formatter,{seriesId:this.id,...t})??i(t.value):i(t.value)}getMarkerStyle(e,t,i=e.getStyle()){var r;const s={size:((r=t.datum.point)==null?void 0:r.size)??0},n=Et(s,i);if(e.itemStyler){const o=this.ctx.callbackCache.call(e.itemStyler,{seriesId:this.id,...n,...t,datum:t.datum.datum});return Et(o,n)}return n}updateMarkerStyle(e,t,i,s=t.getStyle(),{applyTranslation:n=!0,selected:r=!0}={}){const{point:o}=i.datum,a=this.getMarkerStyle(t,i,s),l=this.visible&&a.size>0&&o&&!isNaN(o.x)&&!isNaN(o.y);if(n?e.setProperties({visible:l,...a,translationX:o==null?void 0:o.x,translationY:o==null?void 0:o.y}):e.setProperties({visible:l,...a}),r||(e.fillOpacity*=I7,e.strokeOpacity*=L7),typeof t.shape=="function"&&!e.dirtyPath){e.path.clear(!0),e.updatePath(),e.checkPathDirty();const c=e.getBBox();if(o!==void 0&&c.isFinite()){const p=c.computeCenter(),[g,f]=["x","y"].map(C=>(a.strokeWidth??0)+Math.abs(p[C]-o[C])),y=Math.max(c.width+g,c.height+f);o.focusSize=y}}}getMinRects(e,t){}get nodeDataDependencies(){return this._nodeDataDependencies??{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(e){const{width:t,height:i}=e??{width:NaN,height:NaN},s=e?{seriesRectWidth:t,seriesRectHeight:i}:void 0,n=ga(this.nodeDataDependencies,s)!=null;return n&&(this._nodeDataDependencies=s,this.markNodeDataDirty()),n}pickFocus(e){}resetDatumCallbackCache(){this.datumCallbackCache.clear()}cachedDatumCallback(e,t){const{datumCallbackCache:i}=this,s=i.get(e);if(s!=null)return s;const n=t();return i.set(e,n),n}};Lp.highlightedZIndex=1e12;A([vr({changeValue:function(e,t){this.onSeriesGroupingChange(t,e)}})],Lp.prototype,"seriesGrouping",2);function T7(e,t){const i=-t/e;return e!==0&&i>=0&&i<=1?[i]:[]}function A7(e,t,i){if(e===0)return T7(t,i);const s=t*t-4*e*i,n=[];if(s===0){const r=-t/(2*e);r>=0&&r<=1&&n.push(r)}else if(s>0){const r=Math.sqrt(s),o=(-t-r)/(2*e),a=(-t+r)/(2*e);o>=0&&o<=1&&n.push(o),a>=0&&a<=1&&n.push(a)}return n}function P7(e,t,i,s){if(e===0)return A7(t,i,s);const n=t/e,r=i/e,o=s/e,a=(3*r-n*n)/9,l=(9*n*r-27*o-2*n*n*n)/54,c=a*a*a+l*l,p=1/3,g=[];if(c>=0){const f=Math.sqrt(c),y=Math.sign(l+f)*Math.pow(Math.abs(l+f),p),C=Math.sign(l-f)*Math.pow(Math.abs(l-f),p),x=Math.abs(Math.sqrt(3)*(y-C)/2),M=-p*n+(y+C);if(M>=0&&M<=1&&g.push(M),x===0){const b=-p*n-(y+C)/2;b>=0&&b<=1&&g.push(b)}}else{const f=Math.acos(l/Math.sqrt(-a*a*a)),y=p*n,C=2*Math.sqrt(-a),x=C*Math.cos(p*f)-y,M=C*Math.cos(p*(f+2*Math.PI))-y,b=C*Math.cos(p*(f+4*Math.PI))-y;x>=0&&x<=1&&g.push(x),M>=0&&M<=1&&g.push(M),b>=0&&b<=1&&g.push(b)}return g}function Xd(e,t,i,s,n,r,o,a){const l=(i-e)*(a-r)-(s-t)*(o-n);if(l===0)return 0;const c=((o-n)*(t-r)-(e-n)*(a-r))/l,p=((i-e)*(t-r)-(s-t)*(e-n))/l;return c>=0&&c<=1&&p>=0&&p<=1?1:0}function F7(e,t,i,s,n,r,o,a,l,c,p,g){let f=0;const y=c-g,C=p-l,x=l*(g-c)-c*(p-l),M=pA(e,i,n,o),b=pA(t,s,r,a),R=y*M[0]+C*b[0],I=y*M[1]+C*b[1],P=y*M[2]+C*b[2],k=y*M[3]+C*b[3]+x,_=P7(R,I,P,k);for(const B of _){const H=B*B,V=B*H,U=M[0]*V+M[1]*H+M[2]*B+M[3],$=b[0]*V+b[1]*H+b[2]*B+b[3];let te;l===p?te=($-c)/(g-c):te=(U-l)/(p-l),te>=0&&te<=1&&f++}return f}function pA(e,t,i,s){return[-e+3*t-3*i+s,3*e-6*t+3*i,-3*e+3*t,e]}function Y_(e,t,i,s,n,r,o,a,l,c){if(isNaN(e)||isNaN(t))return 0;r&&([n,s]=[s,n]);const p=(c-a)/(l-o),g=a-p*o,f=Math.pow(p,2)+1,y=2*(p*(g-t)-e),C=Math.pow(e,2)+Math.pow(g-t,2)-Math.pow(i,2),x=Math.pow(y,2)-4*f*C;if(x<0)return 0;const M=(-y+Math.sqrt(x))/2/f,b=(-y-Math.sqrt(x))/2/f;let R=0;return[M,b].forEach(I=>{if(!(I>=Math.min(o,l)&&I<=Math.max(o,l)))return;const k=p*I+g,_=I-e,B=k-t,H=Math.atan2(B,_);Vr(H,s,n)&&R++}),R}function cC(e,t,i,s,n){return(1-n)**3*e+3*(1-n)**2*n*t+3*(1-n)*n**2*i+n**3*s}function uC(e,t,i,s,n){if(n<=Math.min(e,s))return e<s?0:1;if(n>=Math.max(e,s))return e<s?1:0;let r=0,o=1,a=NaN;for(let l=0;l<12;l+=1)a=(r+o)/2,cC(e,t,i,s,a)<n?r=a:o=a;return a}function hC(e,t,i,s,n,r,o,a,l){const c=(1-l)*e+l*i,p=(1-l)*t+l*s,g=(1-l)*i+l*n,f=(1-l)*s+l*r,y=(1-l)*n+l*o,C=(1-l)*r+l*a,x=(1-l)*c+l*g,M=(1-l)*p+l*f,b=(1-l)*g+l*y,R=(1-l)*f+l*C,I=(1-l)*x+l*b,P=(1-l)*M+l*R;return[[{x:e,y:t},{x:c,y:p},{x,y:M},{x:I,y:P}],[{x:I,y:P},{x:b,y:R},{x:y,y:C},{x:o,y:a}]]}function AM(e,t,i,s){const n=-e+3*t-3*i+s,r=3*e-6*t+3*i,o=-3*e+3*t;if(n===0){if(r!==0){const l=-o/r;if(l>0&&l<1)return[l]}return[]}const a=r*r-4*n*o;if(a>=0){const l=Math.sqrt(a),c=(-r+l)/(2*n),p=(-r-l)/(2*n);return[c,p].filter(g=>g>0&&g<1)}return[]}function $_(e,t,i,s,n,r,o,a){const l=AM(e,i,n,o),c=AM(t,s,r,a);return[...l,...c]}var Hf=class{constructor(){this.path2d=new Path2D,this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this.openedPath=!1,this.closedPath=!1}isEmpty(){return this.commands.length===0}isDirty(){return this.closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length||this.previousCommands.toString()!==this.commands.toString()||this.previousParams.toString()!==this.params.toString()}getPath2D(){return this.path2d}moveTo(e,t){this.openedPath=!0,this.path2d.moveTo(e,t),this.commands.push(0),this.params.push(e,t)}lineTo(e,t){this.openedPath?(this.path2d.lineTo(e,t),this.commands.push(1),this.params.push(e,t)):this.moveTo(e,t)}rect(e,t,i,s){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+s),this.lineTo(e,t+s),this.closePath()}roundRect(e,t,i,s,n){n=Math.min(n,i/2,s/2),this.moveTo(e,t+n),this.arc(e+n,t+n,n,Math.PI,1.5*Math.PI),this.lineTo(e+n,t),this.lineTo(e+i-n,t),this.arc(e+i-n,t+n,n,1.5*Math.PI,2*Math.PI),this.lineTo(e+i,t+n),this.lineTo(e+i,t+s-n),this.arc(e+i-n,t+s-n,n,0,Math.PI/2),this.lineTo(e+i-n,t+s),this.lineTo(e+n,t+s),this.arc(e+ +n,t+s-n,n,Math.PI/2,Math.PI),this.lineTo(e,t+s-n),this.closePath()}arc(e,t,i,s,n,r){this.openedPath=!0,this.path2d.arc(e,t,i,s,n,r),this.commands.push(2),this.params.push(e,t,i,s,n,r?1:0)}cubicCurveTo(e,t,i,s,n,r){this.openedPath||this.moveTo(e,t),this.path2d.bezierCurveTo(e,t,i,s,n,r),this.commands.push(3),this.params.push(e,t,i,s,n,r)}closePath(){this.openedPath&&(this.path2d.closePath(),this.commands.push(4),this.openedPath=!1,this.closedPath=!0)}clear(e){e&&(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this.closedPath),this.path2d=new Path2D,this.openedPath=!1,this.closedPath=!1,this.commands=[],this.params=[]}isPointInPath(e,t){const i=this.commands,s=this.params,n=i.length,r=-1e4,o=-1e4;let a=NaN,l=NaN,c=0,p=0,g=0;for(let f=0,y=0;f<n;f++)switch(i[f]){case 0:g+=Xd(a,l,c,p,r,o,e,t),c=s[y++],a=c,p=s[y++],l=p;break;case 1:g+=Xd(c,p,s[y++],s[y++],r,o,e,t),c=s[y-2],p=s[y-1];break;case 3:g+=F7(c,p,s[y++],s[y++],s[y++],s[y++],s[y++],s[y++],r,o,e,t),c=s[y-2],p=s[y-1];break;case 2:{const C=s[y++],x=s[y++],M=s[y++],b=s[y++],R=s[y++],I=!!s[y++];if(g+=Y_(C,x,M,b,R,I,r,o,e,t),!isNaN(a)){const P=C+Math.cos(b)*M,k=x+Math.sin(b)*M;g+=Xd(c,p,P,k,r,o,e,t)}c=C+Math.cos(R)*M,p=x+Math.sin(R)*M;break}case 4:g+=Xd(a,l,c,p,r,o,e,t);break}return g%2===1}distanceSquared(e,t){let i=1/0;const s=this.commands,n=this.params,r=s.length;let o=NaN,a=NaN,l=0,c=0;for(let p=0,g=0;p<r;p++)switch(s[p]){case 0:l=o=n[g++],c=a=n[g++];break;case 1:{const f=n[g++],y=n[g++];i=cf(e,t,l,c,f,y,i);break}case 3:_e.error("Command.Curve distanceSquare not implemented");break;case 2:{const f=n[g++],y=n[g++],C=n[g++],x=n[g++],M=n[g++],b=f+Math.cos(x)*C,R=y+Math.sin(x)*C,I=!!n[g++];i=cf(e,t,l,c,b,R,i),i=TX(e,t,f,y,C,x,M,I,i),l=f+Math.cos(M)*C,c=y+Math.sin(M)*C;break}case 4:i=cf(e,t,l,c,o,a,i);break}return i}getPoints(){const{commands:e,params:t}=this,i=[];let s=0;for(const n of e)switch(n){case 0:case 1:i.push({x:t[s++],y:t[s++]});break;case 3:s+=4,i.push({x:t[s++],y:t[s++]});break;case 2:i.push({x:t[s++],y:t[s++]}),s+=4;break}return i}toSVG(e=(t,i)=>({x:t,y:i})){const t=[],{commands:i,params:s}=this,n=(o,...a)=>{t.push(o);for(let l=0;l<a.length;l+=2){const{x:c,y:p}=e(a[l],a[l+1]);t.push(c,p)}};let r=0;for(const o of i)switch(o){case 0:n("M",s[r++],s[r++]);break;case 1:n("L",s[r++],s[r++]);break;case 3:n("C",s[r++],s[r++],s[r++],s[r++],s[r++],s[r++]);break;case 2:{const a=s[r++],l=s[r++],c=s[r++],p=s[r++],g=s[r++],f=s[r++];let y=f?p-g:g-p;y<0&&(y+=Math.ceil(-y/(2*Math.PI))*2*Math.PI),f&&(y=-y);const C=Math.max(Math.ceil(Math.abs(y)/(Math.PI/2)),1),x=y/C,M=4/3*Math.tan(x/4),b=t.length===0?"M":"L";n(b,a+Math.cos(p)*c,l+Math.sin(p)*c);for(let R=0;R<C;R+=1){const I=p+x*(R+0),P=p+x*(R+1),k=c*Math.sin(I),_=c*Math.cos(I),B=c*Math.sin(P),H=c*Math.cos(P);n("C",a+_-M*k,l+k+M*_,a+H+M*B,l+B-M*H,a+H,l+B)}break}case 4:t.push("Z");break}return t.join(" ")}computeBBox(){const{commands:e,params:t}=this;let[i,s,n,r]=[1/0,1/0,-1/0,-1/0],[o,a]=[NaN,NaN],[l,c]=[NaN,NaN];const p=(f,y,C)=>{i=Math.min(y,i),s=Math.min(f,s),n=Math.max(f,n),r=Math.max(y,r),C&&([o,a]=[f,y])};let g=0;for(const f of e)switch(f){case 0:p(t[g++],t[g++],!0),[l,c]=[o,a];break;case 1:p(t[g++],t[g++],!0);break;case 3:{const y=t[g++],C=t[g++],x=t[g++],M=t[g++],b=t[g++],R=t[g++];p(b,R,!0),$_(o,a,y,C,x,M,b,R).forEach(P=>{const k=cC(o,y,x,b,P),_=cC(a,C,M,R,P);p(k,_)});break}case 2:{const y=t[g++],C=t[g++],x=t[g++];let M=Qt(t[g++]),b=Qt(t[g++]);t[g++]&&([M,b]=[b,M]);const I=(k,_)=>{const B=y+x*Math.cos(k),H=C+x*Math.sin(k);p(B,H,_)};I(M),I(b,!0);const P=[0,Math.PI/2,Math.PI,3*Math.PI/2];for(const k of P)(M<b&&M<=k&&k<=b||M>b&&(M<=k||k<=b))&&I(k);break}case 4:[o,a]=[l,c];break}return new Ue(s,i,n-s,r-i)}};function gt(e){const{changeCb:t,convertor:i}=e??{};return Ze({type:"path",convertor:i,changeCb:t})}var Rn=class extends Zr{constructor(){super(...arguments),this.path=new Hf,this._clipX=NaN,this._clipY=NaN,this.clip=!1,this._dirtyPath=!0}set clipX(e){this._clipX=e,this.dirtyPath=!0}set clipY(e){this._clipY=e,this.dirtyPath=!0}set dirtyPath(e){this._dirtyPath!==e&&(this._dirtyPath=e,e&&this.markDirty())}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var e,t;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||(((e=this.fillShadow)==null?void 0:e.isDirty())??!1)||(((t=this._clipPath)==null?void 0:t.isDirty())??!1))}isPointInPath(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)}distanceSquared(e,t){return this.distanceSquaredTransformedPoint(e,t)}svgPathData(e){return this.updatePathIfDirty(),this.path.toSVG(e)}distanceSquaredTransformedPoint(e,t){return this.updatePathIfDirty(),this.path.closedPath&&this.path.isPointInPath(e,t)?0:this.path.distanceSquared(e,t)}isDirtyPath(){return!1}updatePath(){}updatePathIfDirty(){(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1)}preRender(){return this.updatePathIfDirty(),super.preRender(this.path.commands.length)}render(e){var i,s;const{ctx:t}=e;if(this.clip&&!isNaN(this._clipX)&&!isNaN(this._clipY)){t.save();const n=this.strokeWidth/2;this._clipPath??(this._clipPath=new Hf),this._clipPath.clear(),this._clipPath.rect(-n,-n,this._clipX+n,this._clipY+n+n),t.clip((i=this._clipPath)==null?void 0:i.getPath2D()),this._clipX>0&&this._clipY>0&&this.drawPath(t),t.restore()}else this._clipPath=void 0,this.drawPath(t);(s=this.fillShadow)==null||s.markClean(),super.render(e)}drawPath(e){this.fillStroke(e,this.path.getPath2D())}toSVG(){if(!this.visible)return;const e=document.createElementNS("http://www.w3.org/2000/svg","path");return e.setAttribute("d",this.svgPathData()),this.applySvgFillAttributes(e),this.applySvgStrokeAttributes(e),{elements:[e]}}};Rn.className="Path";A([gt()],Rn.prototype,"clip",2);A([gt()],Rn.prototype,"clipX",1);A([gt()],Rn.prototype,"clipY",1);var k7=class{constructor(e){this.swapChain=e,this.div=fs().createElement("div"),this.svg=fs().createElementNS("http://www.w3.org/2000/svg","svg"),this.path=fs().createElementNS("http://www.w3.org/2000/svg","path"),this.svg.append(this.path),this.element=fs().createElement("div"),this.element.classList.add("ag-charts-focus-indicator"),this.element.ariaHidden="true",this.element.append(this.svg),this.swapChain.addListener("swap",t=>this.onSwap(t))}updateBounds(e,t,i=0,s=0){if(e!==void 0)if(e instanceof Rn){const n=(r,o)=>{let{x:a,y:l}=ji.toCanvasPoint(e,r,o);return a-=i,l-=s,{x:a,y:l}};this.path.setAttribute("d",e.svgPathData(n)),this.show(this.svg)}else{if(t==null)kf(this.div,e);else{const n=Math.max(e.x,t.x),r=Math.max(e.y,t.y),o=Math.min(e.x+e.width,t.x+t.width),a=Math.min(e.y+e.height,t.y+t.height);kf(this.div,new Ue(n,r,o-n,a-r))}this.show(this.div)}}onSwap(e){e!==this.element.parentElement&&(this.element.remove(),e.appendChild(this.element),this.overrideFocusVisible(this.focusVisible))}show(e){this.element.innerHTML="",this.element.append(e)}overrideFocusVisible(e){this.focusVisible=e;const t={true:"1",false:"0",undefined:""},i=this.element.parentElement;i==null||i.style.setProperty("opacity",t[`${e}`])}isFocusVisible(){const e=this.element.parentElement;return e!=null&&Mi().getComputedStyle(e).opacity==="1"}},N7=class{constructor(e,t,i,s){this.label1=e,this.label2=t,this.hasFocus=!1,this.skipDispatch=!1,this.listeners={blur:[],focus:[],swap:[]},this.onBlur=n=>!this.skipDispatch&&this.dispatch("blur",n),this.onFocus=n=>!this.skipDispatch&&this.dispatch("focus",n),ii(this.label1,"id",`${i}-label1`),ii(this.label2,"id",`${i}-label2`),Lo(this.label1,"display","none"),Lo(this.label2,"display","none"),this.activeAnnouncer=this.createAnnouncer(s),this.inactiveAnnouncer=this.createAnnouncer(s),ii(this.activeAnnouncer,"tabindex",0),this.label2.insertAdjacentElement("afterend",this.activeAnnouncer),this.label2.insertAdjacentElement("afterend",this.inactiveAnnouncer),this.swap("")}createAnnouncer(e){const t=Xt("div");return t.role=e,t.className="ag-charts-swapchain",t.addEventListener("blur",this.onBlur),t.addEventListener("focus",this.onFocus),t}destroy(){for(const e of[this.activeAnnouncer,this.inactiveAnnouncer])e.removeEventListener("blur",this.onBlur),e.removeEventListener("focus",this.onFocus),e.remove()}focus(){this.activeAnnouncer.focus()}update(e){this.skipDispatch=!0,this.swap(e),this.hasFocus&&this.activeAnnouncer.focus(),this.skipDispatch=!1}addListener(e,t){this.listeners[e].push(t),e==="swap"&&t(this.activeAnnouncer)}dispatch(e,t){e==="focus"?this.hasFocus=!0:e==="blur"&&(this.hasFocus=!1),this.listeners[e].forEach(i=>i(t))}swap(e){const t=this.activeAnnouncer.tabIndex;this.label2.textContent=e,[this.inactiveAnnouncer,this.activeAnnouncer]=[this.activeAnnouncer,this.inactiveAnnouncer],[this.label1,this.label2]=[this.label2,this.label1],xh(this.inactiveAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!0,tabindex:void 0}),xh(this.activeAnnouncer,{"aria-labelledby":this.label1.id,"aria-hidden":!1,tabindex:t}),Lo(this.inactiveAnnouncer,"pointer-events","none"),Lo(this.activeAnnouncer,"pointer-events",void 0),this.dispatch("swap",this.activeAnnouncer)}};function O7(e,t){const i=ZR(t.datum);if(i!=null)return{x:i.canvasX,y:i.canvasY};const s=t.bounds;if(s!=null){if(s instanceof Ue){const{x:n,y:r}=s.computeCenter();return{x:e.x+n,y:e.y+r}}return ji.toCanvas(s).computeCenter()}}function _7(e,t,i,s,n){const{bounds:r,showFocusBox:o,clipFocusBox:a=!0}=i;o&&(t==null||t.updateBounds(r,a?e:void 0,s,n))}function B7({bounds:e}){return e instanceof Ue?e:e!=null?e.getBBox():Ue.NaN}function G7(e,t){const{x:i,y:s}=O7(e,t)??{};if(i!==void 0&&s!==void 0)return{type:"keyboard",canvasX:i,canvasY:s}}function PM(e,t,i,s){let{top:n,right:r,bottom:o,left:a,width:l,height:c}=s;return a!=null?l!=null?r=i.width-a+l:r!=null&&(l=i.width-a-r):r!=null&&l!=null&&(a=i.width-r-l),n!=null?c!=null?o=i.height-n-c:o!=null&&(c=i.height-o-n):o!=null&&c!=null&&(n=i.height-o-c),l==null?c==null?(l=e,c=t):l=Math.ceil(e*c/t):c==null&&(c=Math.ceil(t*l/e)),a==null&&(r==null?a=Math.floor((i.width-l)/2):a=i.width-r-l),n==null&&(o==null?n=Math.floor((i.height-c)/2):n=i.height-c-o),{x:a,y:n,width:l,height:c}}var ey=null;function ip(e){if(e!=null)return e===""?"":(ey??(ey=Xt("div")),ey.textContent=String(e),ey.innerHTML)}var z7=["ArrowDown","ArrowUp","Circle","Cross","Diamond","Heart","MapPin","Plus","Square","Star","Triangle"],H7=Object.freeze({x:.5,y:.5}),fS=class extends Rn{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}isBuiltIn(){return z7.includes(this.constructor.className??"")}computeBBox(){if(!this.isBuiltIn())return this.updatePathIfDirty(),this.path.computeBBox();const{x:e,y:t,size:i}=this,{center:s}=this.constructor;return new Ue(e-i*s.x,t-i*s.y,i,i)}applyPath(e,t){const{path:i}=this;let{x:s,y:n}=this;i.clear();for(const{x:r,y:o,t:a}of t)s+=r*e,n+=o*e,a==="move"?i.moveTo(s,n):i.lineTo(s,n);i.closePath()}executeFill(e,t){if(t)return super.executeFill(e,t)}executeStroke(e,t){if(t)return super.executeStroke(e,t)}};A([gt()],fS.prototype,"x",2);A([gt()],fS.prototype,"y",2);A([gt({convertor:Math.abs})],fS.prototype,"size",2);var Kn=class extends Fh(DR(kh(fS))){};Kn.center=H7;var Vc=class extends Kn{updatePath(){const{x:e,y:t,path:i,size:s}=this,n=s/2;i.clear(),i.arc(e,t,n,0,Math.PI*2),i.closePath()}};Vc.className="Circle";var nD=class Z_ extends Kn{updatePath(){const t=this.size/4.2;super.applyPath(t,Z_.moves)}};nD.className="Cross";nD.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];var V7=nD,rD=class X_ extends Kn{updatePath(){const t=this.size/2;super.applyPath(t,X_.moves)}};rD.className="Diamond";rD.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];var Q_=rD,q_=class J_ extends Kn{static rad(t){return t/180*Math.PI}updatePath(){const{x:t,path:i,size:s}=this,{rad:n}=J_,r=s/4,o=this.y+r/2;i.clear(),i.arc(t-r,o-r,r,n(130),n(330)),i.arc(t+r,o-r,r,n(220),n(50)),i.lineTo(t,o+r),i.closePath()}};q_.className="Heart";var W7=q_,oD=class extends Kn{updatePath(){const{path:e,x:t,y:i}=this,s=this.size,n=.5,r=1;e.clear(),e.moveTo(t+(.15625-n)*s,i+(.34375-r)*s),e.cubicCurveTo(t+(.15625-n)*s,i+(.151491-r)*s,t+(.307741-n)*s,i+(0-r)*s,t+(.5-n)*s,i+(0-r)*s),e.cubicCurveTo(t+(.692259-n)*s,i+(0-r)*s,t+(.84375-n)*s,i+(.151491-r)*s,t+(.84375-n)*s,i+(.34375-r)*s),e.cubicCurveTo(t+(.84375-n)*s,i+(.493824-r)*s,t+(.784625-n)*s,i+(.600181-r)*s,t+(.716461-n)*s,i+(.695393-r)*s),e.cubicCurveTo(t+(.699009-n)*s,i+(.719769-r)*s,t+(.681271-n)*s,i+(.743104-r)*s,t+(.663785-n)*s,i+(.766105-r)*s),e.cubicCurveTo(t+(.611893-n)*s,i+(.834367-r)*s,t+(.562228-n)*s,i+(.899699-r)*s,t+(.528896-n)*s,i+(.980648-r)*s),e.cubicCurveTo(t+(.524075-n)*s,i+(.992358-r)*s,t+(.512663-n)*s,i+(1-r)*s,t+(.5-n)*s,i+(1-r)*s),e.cubicCurveTo(t+(.487337-n)*s,i+(1-r)*s,t+(.475925-n)*s,i+(.992358-r)*s,t+(.471104-n)*s,i+(.980648-r)*s),e.cubicCurveTo(t+(.487337-n)*s,i+(1-r)*s,t+(.475925-n)*s,i+(.992358-r)*s,t+(.471104-n)*s,i+(.980648-r)*s),e.cubicCurveTo(t+(.437772-n)*s,i+(.899699-r)*s,t+(.388107-n)*s,i+(.834367-r)*s,t+(.336215-n)*s,i+(.766105-r)*s),e.cubicCurveTo(t+(.318729-n)*s,i+(.743104-r)*s,t+(.300991-n)*s,i+(.719769-r)*s,t+(.283539-n)*s,i+(.695393-r)*s),e.cubicCurveTo(t+(.215375-n)*s,i+(.600181-r)*s,t+(.15625-n)*s,i+(.493824-r)*s,t+(.15625-n)*s,i+(.34375-r)*s),e.closePath()}};oD.className="MapPin";oD.center={x:.5,y:1};var aD=class e1 extends Kn{updatePath(){const t=this.size/3;super.applyPath(t,e1.moves)}};aD.className="Plus";aD.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];var j7=aD,mS=class extends Kn{updatePath(){const{path:e,x:t,y:i}=this,s=this.size/2;e.clear(),e.moveTo(this.align(t-s),this.align(i-s)),e.lineTo(this.align(t+s),this.align(i-s)),e.lineTo(this.align(t+s),this.align(i+s)),e.lineTo(this.align(t-s),this.align(i+s)),e.closePath()}};mS.className="Square";var t1=class extends Kn{updatePath(){const{x:e,y:t,path:i,size:s}=this,n=5,r=s/2,o=r/2,a=Math.PI/2;i.clear();for(let l=0;l<n*2;l++){const c=l%2===0?r:o,p=l*Math.PI/n-a,g=e+Math.cos(p)*c,f=t+Math.sin(p)*c;i.lineTo(g,f)}i.closePath()}};t1.className="Star";var lD=class i1 extends Kn{updatePath(){const t=this.size*1.1;super.applyPath(t,i1.moves)}};lD.className="Triangle";lD.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];var df=lD,s1={circle:Vc,cross:V7,diamond:Q_,heart:W7,pin:oD,plus:j7,square:mS,star:t1,triangle:df},U7=Object.keys(s1);function n1(e){return typeof e=="string"&&U7.includes(e)}function K7(e){return class extends Kn{updatePath(){const{path:i,x:s,y:n,size:r}=this;e({path:i,x:s,y:n,size:r})}}}function Xr(e="square"){return n1(e)?s1[e]:typeof e=="function"?K7(e):mS}function r1(e,t,i=t*(5/3)){var l;const s=new lt,n=Math.min(e.marker.strokeWidth,2),r=Math.min(((l=e.line)==null?void 0:l.strokeWidth)??0,2),o=Math.max(e.marker.enabled===!1?0:t,e.line==null?0:i),a=Math.max(e.marker.enabled===!1?0:t,r);if(e.line!=null){const{stroke:c,strokeOpacity:p,lineDash:g}=e.line,f=new fr;f.x1=0,f.y1=a/2,f.x2=o,f.y2=a/2,f.stroke=c,f.strokeOpacity=p,f.strokeWidth=r,f.lineDash=g,s.append(f)}if(e.marker.enabled!==!1){const{shape:c,fill:p,fillOpacity:g,stroke:f,strokeOpacity:y}=e.marker,C=Xr(c),x=new C,{center:M}=C;x.size=t,x.translationX=o/2+(M.x-.5)*t,x.translationY=a/2+(M.y-.5)*t,x.fill=p,x.fillOpacity=g,x.stroke=f,x.strokeOpacity=y,x.strokeWidth=n;const b=o/2+(M.x-.5)*t,R=a/2+(M.y-.5)*t;if(typeof c=="string"){const I=t/(t+n);x.translationX=b,x.translationY=R,x.scalingX=I,x.scalingY=I}else{const I=x.getBBox(),P=Math.min(o/(I.width+n),a/(I.height+n),1);x.translationX=b*P-I.x*P+(o-I.width*P)/2,x.translationY=R*P-I.y*P+(a-I.height*P)/2,x.scalingX=P,x.scalingY=P}s.append(x)}return lt.toSVG(s,o,a)}var gA=.1,fA=200,mA=12,Y7=.5,$7=class extends Ma{constructor(){super(...arguments),this.x1=NaN,this.y1=NaN,this.x=NaN,this.y=NaN,this.vx=0,this.vy=0,this.t0=NaN,this.animationFrameHandle=void 0}reset(){this.x=NaN,this.y=NaN,this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0)}update(e,t){if(Number.isNaN(this.x)||Number.isNaN(this.y)){this.x=e,this.y=t,this.vx=0,this.vy=0,this.emitUpdate(),this.animationFrameHandle!=null&&(cancelAnimationFrame(this.animationFrameHandle),this.animationFrameHandle=void 0);return}this.x1=e,this.y1=t,this.t0=Date.now(),this.animationFrameHandle==null&&(this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this)))}onFrame(){this.animationFrameHandle=void 0;const{x1:e,y1:t,t0:i}=this,s=Date.now(),n=s-i;this.t0=s;const r=.001,o=Math.ceil(n/(r*1e3))|0;let{x:a,y:l,vx:c,vy:p}=this;for(let g=0;g<o;g+=1){const f=a-e,y=l-t,C=-(fA*f+mA*c)/gA,x=-(fA*y+mA*p)/gA;c+=C*r,p+=x*r,a+=c*r,l+=p*r}Math.hypot(a-e,l-t)<Y7?(this.x=this.x1,this.y=this.y1,this.vx=0,this.vy=0):(this.x=a,this.y=l,this.vx=c,this.vy=p,this.animationFrameHandle=requestAnimationFrame(this.onFrame.bind(this))),this.emitUpdate()}emitUpdate(){this.dispatch("update",{type:"update",x:this.x,y:this.y})}},Ws="ag-charts-tooltip",o1="ag-charts-tooltip--dark";function a1(e){var i;if(typeof e=="string")return"";const t=[];return e.heading!=null&&t.push(e.heading),e.title!=null&&t.push(e.title),(i=e.data)==null||i.forEach(s=>{t.push(s.label??s.fallbackLabel,s.value)}),t.join("; ")}function vA(e,t,i){let s="";e==null?s+=`<span class="${Ws}-label">${ip(t)}</span>`:(s+=`<span class="${Ws}-label">${ip(e)}</span>`,s+=" ",s+=`<span class="${Ws}-value">${ip(t)}</span>`);const n=[`${Ws}-row`];return i&&n.push(`${Ws}-row--inline`),s=`<div class="${n.join(" ")}">${s}</div>`,s}function Z7(e){var i,s,n,r;if(typeof e=="string")return e;let t="";if((e.heading==null||e.title==null)&&((i=e.data)==null?void 0:i.length)===1&&e.data[0].label==null&&e.data[0].value!=null){const o=e.data[0];t+=vA(e.heading??e.title,o.value,!1)}else{const o=e.title==null&&((s=e.data)==null?void 0:s.length)===1;e.heading!=null&&(t+=`<span class="${Ws}-heading">${ip(e.heading)}</span>`,t+=" ");const a=e.symbol==null?void 0:r1(e.symbol,12);a!=null&&(e.title!=null||(n=e.data)!=null&&n.length)&&(t+=`<span class="${Ws}-symbol">${a}</span>`),e.title!=null&&(t+=`<span class="${Ws}-title">${ip(e.title)}</span>`,t+=" "),(r=e.data)==null||r.forEach(l=>{t+=vA(l.label??l.fallbackLabel,l.value,o),t+=" "})}return t=`<div class="${Ws}-content">${t.trimEnd()}</div>`,t}var Tp=class extends yt{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};A([O(pi(["pointer","node","top","right","bottom","left","top-left","top-right","bottom-right","bottom-left",{value:"sparkline",undocumented:!0},{value:"sparkline-",undocumented:!0}],"a position type"))],Tp.prototype,"type",2);A([O(_t)],Tp.prototype,"xOffset",2);A([O(_t)],Tp.prototype,"yOffset",2);var Da=class extends yt{constructor(){super(),this.enabled=!0,this.delay=0,this.range=void 0,this.wrapping="hyphenate",this.position=new Tp,this.darkTheme=!1,this.bounds="extended",this.destroyFns=[],this.springAnimation=new $7,this.enableInteraction=!1,this.wrapTypes=["always","hyphenate","on-space","never"],this.showTimeout=0,this._showArrow=!0,this._compact=!1,this._visible=!1,this.positionParams=void 0,this.destroyFns.push(this.springAnimation.addListener("update",this.updateTooltipPosition.bind(this)))}get interactive(){return this.enableInteraction}setup(e){"togglePopover"in Mi().HTMLElement.prototype&&(this.element=e.addChild("canvas-overlay",Ws),this.element.setAttribute("popover","manual"),this.element.className=Ws)}destroy(e){e.removeChild("canvas-overlay",Ws)}isVisible(){return this._visible}updateTooltipPosition(){var k,_,B;const{element:e,positionParams:t}=this;if(e==null||t==null)return;const{canvasRect:i,relativeRect:s,meta:n}=t,{x:r,y:o}=this.springAnimation,a=((k=n.position)==null?void 0:k.type)??this.position.type,l=((_=n.position)==null?void 0:_.xOffset)??0,c=((B=n.position)==null?void 0:B.yOffset)??0,p=s.x,g=s.y,f=s.width-e.clientWidth-1+p,y=s.height-e.clientHeight+g;let C=this.getTooltipBounds({positionType:a,canvasX:r,canvasY:o,yOffset:c,xOffset:l,canvasRect:i}),x=PM(e.clientWidth,e.clientHeight,s,C);a==="sparkline"&&(x.x<=p||x.x>=f)&&(C=this.getTooltipBounds({positionType:"sparkline-constrained",canvasX:r,canvasY:o,yOffset:c,xOffset:l,canvasRect:i}),x=PM(e.clientWidth,e.clientHeight,s,C));const M=St(p,x.x,f),b=St(g,x.y,y),R=M!==x.x||b!==x.y,I=(a==="node"||a==="pointer")&&!R&&!l&&!c,P=n.showArrow??this.showArrow??I;this.updateShowArrow(P),this.updateCompact(a==="sparkline"||a==="sparkline-constrained"),e.style.transform=`translate(${M}px, ${b}px)`}show(e,t,i,s,n=!1){const{element:r}=this;if(r!=null&&s!=null)r.innerHTML=Z7(s);else if(r==null||r.innerHTML===""){this.toggle(!1);return}const o={x:e.x-t.x,y:e.y-t.y,width:e.width,height:e.height};this.positionParams={canvasRect:t,relativeRect:o,meta:i},this.springAnimation.update(i.canvasX,i.canvasY),r.style.top=`${t.top}px`,r.style.left=`${t.left}px`,i.enableInteraction?(this.enableInteraction=!0,r.style.pointerEvents="auto",r.removeAttribute("aria-hidden")):(this.enableInteraction=!1,r.style.pointerEvents="none",r.setAttribute("aria-hidden","true")),this.delay>0&&!n?(this.toggle(!1),this.showTimeout=setTimeout(()=>{this.toggle(!0)},this.delay)):this.toggle(!0)}hide(){this.springAnimation.reset(),this.toggle(!1)}toggle(e){var s;if(!((s=this.element)!=null&&s.isConnected))return;this._visible=e;const{classList:t}=this.element,i=(n,r)=>t.toggle(`${Ws}--${n}`,r);e||clearTimeout(this.showTimeout),i("no-interaction",!this.enableInteraction),i("arrow",this._showArrow),i("compact",this._compact),t.toggle(o1,this.darkTheme),this.element.togglePopover(e),e&&this.updateTooltipPosition();for(const n of this.wrapTypes)t.toggle(`${Ws}--wrap-${n}`,n===this.wrapping)}updateShowArrow(e){this._showArrow=e}updateCompact(e){this._compact=e}getTooltipBounds(e){if(!this.element)return{};const{positionType:t,canvasX:i,canvasY:s,yOffset:n,xOffset:r,canvasRect:o}=e,{clientWidth:a,clientHeight:l}=this.element,c={width:a,height:l};switch(t){case"node":case"pointer":return c.top=s+n-l-8,c.left=i+r-a/2,c;case"top":return c.top=n,c.left=o.width/2-a/2+r,c;case"right":return c.top=o.height/2-l/2+n,c.left=o.width-a/2+r,c;case"left":return c.top=o.height/2-l/2+n,c.left=r,c;case"bottom":return c.top=o.height-l+n,c.left=o.width/2-a/2+r,c;case"top-left":return c.top=n,c.left=r,c;case"top-right":return c.top=n,c.left=o.width-a+r,c;case"bottom-right":return c.top=o.height-l+n,c.left=o.width-a+r,c;case"bottom-left":return c.top=o.height-l+n,c.left=r,c;case"sparkline":return c.top=s+n-l/2,c.left=i+r+8,c;case"sparkline-constrained":return c.top=s+n-l/2,c.left=i+r-8-a,c}}};A([O(nt)],Da.prototype,"enabled",2);A([O(nt,{optional:!0})],Da.prototype,"showArrow",2);A([O(Ge)],Da.prototype,"delay",2);A([O(JC,{optional:!0})],Da.prototype,"range",2);A([O(qC)],Da.prototype,"wrapping",2);A([O(Ye)],Da.prototype,"position",2);A([O(nt)],Da.prototype,"darkTheme",2);A([O(pi(["extended","canvas"]))],Da.prototype,"bounds",2);function Wd(e,t,i,s){const n=[...e].reverse();let r;for(const o of n){if(!o.visible||!o.contentGroup.visible)continue;const{match:a,distance:l}=o.pickNode(t,i,s)??{};if(!(!a||l==null)&&((!r||r.distance>l)&&(r={series:o,distance:l,datum:a}),l===0))break}return r}function yA(e,t){if(e==null||t.length===0)return[!1,!1];const i=e.valueOf(),s=t[0],n=t[t.length-1];if(typeof s=="string")return[i===s,i===n];let r=s.valueOf(),o=n.valueOf();return r>o&&([r,o]=[o,r]),[i===r,i===o]}function Wc(e,t,i,s,n){const{xValue:r,yValue:o}=e,[a,l]=yA(o,n),[c,p]=yA(r,s);return{datum:e,xKey:t,yKey:i,xValue:r,yValue:o,first:c,last:p,min:a,max:l}}function vS(e,[t,i],s){const n=fO(0,e-1,o=>{var l;const a=(l=s(o))==null?void 0:l[1];return!Number.isFinite(a)||a>t})??0;let r=gO(0,e-1,o=>{var l;const a=(l=s(o))==null?void 0:l[0];return!Number.isFinite(a)||a<i})??e-1;return r=Math.min(r+1,e),[n,r]}var X7=class extends Ra{constructor(e){super(),this.chart=e,this.id=Qr(this),this.series=[],this.highlight={pendingHoverEvent:void 0,appliedHoverEvent:void 0,stashedHoverEvent:void 0},this.tooltip={lastHover:void 0},this.hoverDevice="mouse",this.focus={sortedSeries:[],series:void 0,seriesIndex:0,datumIndex:0,datum:void 0},this.hoverScheduler=RQ(()=>{if(!(!this.tooltip.lastHover&&!this.highlight.pendingHoverEvent)){if(this.chart.getUpdateType()<=4){this.hoverScheduler.schedule();return}this.highlight.pendingHoverEvent&&this.handleHoverHighlight(!1),this.tooltip.lastHover&&this.handleHoverTooltip(this.tooltip.lastHover,!1)}});const t=41,i=34,s=63,{domManager:n}=e.ctx,r="series-area",o=n.addChild(r,"series-area-aria-label1"),a=n.addChild(r,"series-area-aria-label2");this.seriesWidget=new Hc(n.getParent(r)),this.chartWidget=new Hc(n.getParent("canvas-proxy")),this.containerWidget=new Hc(n.getParent("canvas-container")),e.ctx.regionManager.initRegions(this.containerWidget,this.seriesWidget),this.swapChain=new N7(o,a,this.id,"img"),this.swapChain.addListener("blur",()=>this.onBlur(i)),this.swapChain.addListener("focus",()=>this.onFocus(i)),this.focusIndicator=new k7(this.swapChain),this.focusIndicator.overrideFocusVisible(e.mode==="integrated"?!1:void 0),this.chart.ctx.keyNavManager.focusIndicator=this.focusIndicator;const l=e.ctx.regionManager.getRegion("series");this.destroyFns.push(()=>e.ctx.domManager.removeChild(r,"series-area-aria-label1"),()=>e.ctx.domManager.removeChild(r,"series-area-aria-label2"),l.addListener("drag",c=>this.onHoverLikeEvent(c),t),l.addListener("hover",c=>this.onHover(c),t),l.addListener("leave",()=>this.onLeave(),t),e.ctx.animationManager.addListener("animation-start",()=>this.clearAll()),e.ctx.domManager.addListener("resize",()=>this.clearAll()),e.ctx.highlightManager.addListener("highlight-change",c=>this.changeHighlightDatum(c)),e.ctx.keyNavManager.addListener("nav-hori",c=>this.onNavHori(c),i),e.ctx.keyNavManager.addListener("nav-vert",c=>this.onNavVert(c),i),e.ctx.keyNavManager.addListener("submit",c=>this.onSubmit(c),i),e.ctx.layoutManager.addListener("layout:complete",c=>this.layoutComplete(c)),e.ctx.regionManager.listenAll("contextmenu",c=>this.onContextMenu(c),s),e.ctx.regionManager.listenAll("click",c=>this.onClick(c)),e.ctx.regionManager.listenAll("dblclick",c=>this.onClick(c)),e.ctx.updateService.addListener("pre-scene-render",()=>this.preSceneRender()),e.ctx.zoomManager.addListener("zoom-change",()=>this.clearAll()),e.ctx.zoomManager.addListener("zoom-pan-start",()=>this.clearAll()))}dataChanged(){var e;(e=this.highlight).stashedHoverEvent??(e.stashedHoverEvent=this.highlight.appliedHoverEvent),this.chart.ctx.tooltipManager.removeTooltip(this.id),this.focusIndicator.updateBounds(void 0),this.clearHighlight()}preSceneRender(){this.focusIndicator.isFocusVisible()&&this.handleSeriesFocus(0,0,!0),this.highlight.stashedHoverEvent!=null&&(this.highlight.pendingHoverEvent=this.highlight.stashedHoverEvent,this.highlight.stashedHoverEvent=void 0,this.handleHoverHighlight(!0)),this.tooltip.lastHover!=null&&this.handleHoverTooltip(this.tooltip.lastHover,!0)}update(e,t){this.chart.ctx.updateService.update(e,t)}seriesChanged(e){this.focus.sortedSeries=[...e].sort((t,i)=>{let s=t.properties.focusPriority??1/0,n=i.properties.focusPriority??1/0;return s===n&&([s,n]=[t._declarationOrder,i._declarationOrder]),s<n?-1:s>n?1:0}),this.series=e}layoutComplete(e){this.seriesRect=e.series.rect,this.hoverRect=e.series.paddedRect,this.seriesWidget.setBounds(e.series.paddedRect),this.chartWidget.setBounds(e.chart)}onContextMenu(e){const{Default:t,ContextMenu:i}=GR;if(e.region==="root"){this.chart.ctx.interactionManager.getState()&(t|i)&&this.chart.ctx.contextMenuRegistry.dispatchContext("all",e,{});return}let s,n;if(this.focusIndicator.isFocusVisible())s=this.chart.ctx.highlightManager.getActiveHighlight(),s&&this.seriesRect&&s.midPoint&&(n=ji.toCanvasPoint(s.series.contentGroup,s.midPoint.x,s.midPoint.y));else if(this.chart.ctx.interactionManager.getState()&(t|i)){const o=Wd(this.series,{x:e.regionX,y:e.regionY},"context-menu");o&&(this.chart.ctx.highlightManager.updateHighlight(this.id),s=o.datum)}const r=s==null?void 0:s.series;this.clearAll(),this.chart.ctx.contextMenuRegistry.dispatchContext("series-area",e,{pickedSeries:r,pickedNode:s},n)}onLeave(){this.chart.ctx.cursorManager.updateCursor(this.id),this.focusIndicator.isFocusVisible()||this.clearAll()}onHover(e){this.hoverDevice="mouse",this.onHoverLikeEvent(e)}onHoverLikeEvent(e){if(NN(e,"drag")&&(this.tooltip.lastHover=e),this.highlight.pendingHoverEvent=e,this.hoverScheduler.schedule(),this.chart.ctx.interactionManager.getState()===32){const{regionX:t,regionY:i}=e,s=Wd(this.series,{x:t,y:i},"event");s!=null&&s.series.hasEventListener("nodeClick")||s!=null&&s.series.hasEventListener("nodeDoubleClick")?this.chart.ctx.cursorManager.updateCursor(this.id,"pointer"):this.chart.ctx.cursorManager.updateCursor(this.id)}}onClick(e){var i;if(this.hoverDevice="mouse",this.onHoverLikeEvent(e),(i=this.seriesRect)!=null&&i.containsPoint(e.canvasX,e.canvasY)&&this.checkSeriesNodeClick(e)){this.update(4),e.preventDefault();return}const t={type:e.type==="click"?"click":"doubleClick",event:e.sourceEvent};this.chart.fireEvent(t)}onFocus(e){this.chart.ctx.interactionManager.getState()&e&&(this.hoverDevice=this.focusIndicator.isFocusVisible()?"keyboard":"mouse",this.handleFocus(0,0))}onBlur(e){this.chart.ctx.interactionManager.getState()&e&&(this.hoverDevice="mouse",this.clearAll(),this.focusIndicator.overrideFocusVisible(void 0))}onNavVert(e){this.hoverDevice="keyboard",this.focus.seriesIndex+=e.delta,this.handleFocus(e.delta,0),e.preventDefault()}onNavHori(e){this.hoverDevice="keyboard",this.focus.datumIndex+=e.delta,this.handleFocus(0,e.delta),e.preventDefault()}onSubmit(e){const{series:t,datum:i}=this.focus,s=e.sourceEvent.sourceEvent;t!==void 0&&i!==void 0?t.fireNodeClickEvent(s,i):this.chart.fireEvent({type:"click",event:s}),e.preventDefault()}checkSeriesNodeClick(e){let t={x:e.regionX,y:e.regionY};e.region!=="series"&&(t=ji.fromCanvasPoint(this.chart.seriesRoot,e.canvasX,e.canvasY));const i=Wd(this.series,t,"event");return i==null?!1:e.type==="click"?(i.series.fireNodeClickEvent(e.sourceEvent,i.datum),!0):e.type==="dblclick"?(e.preventZoomDblClick=i.distance===0,i.series.fireNodeDoubleClickEvent(e.sourceEvent,i.datum),!0):!1}handleFocus(e,t){const i=this.chart.overlays.getFocusInfo(this.chart.ctx.localeManager);i==null?this.handleSeriesFocus(e,t):this.focusIndicator.updateBounds(new Ue(0,0,i.rect.width,i.rect.height))}handleSeriesFocus(e,t,i=!1){if(this.chart.chartType==="hierarchy"){this.handleHierarchySeriesFocus(e,t,i);return}const{focus:s,seriesRect:n}=this,r=s.sortedSeries.filter(c=>c.visible);if(r.length===0)return;s.seriesIndex=St(0,s.seriesIndex,r.length-1),s.series=r[s.seriesIndex];const{datumIndex:o,seriesIndex:a}=s,l=s.series.pickFocus({datumIndex:o,datumIndexDelta:t,otherIndex:a,otherIndexDelta:e,seriesRect:n});this.updatePickedFocus(l,i)}handleHierarchySeriesFocus(e,t,i){this.focus.series=this.focus.sortedSeries[0];const{focus:{series:s,seriesIndex:n,datumIndex:r},seriesRect:o}=this;if(s==null)return;const a=s.pickFocus({datumIndex:r,datumIndexDelta:t,otherIndex:n,otherIndexDelta:e,seriesRect:o});this.updatePickedFocus(a,i)}updatePickedFocus(e,t){const{focus:i,hoverRect:s,seriesRect:n}=this;if(e===void 0||i.series===void 0||s===void 0)return;const{datum:r,datumIndex:o}=e;if(i.datumIndex=o,i.datum=r,this.focusIndicator.isFocusVisible()&&this.chart.ctx.animationManager.reset(),this.focusIndicator.isFocusVisible()){let l=B7(e);if(n!=null){const g=l.clone();g.x+=n.x,g.y+=n.y,l=g}const{x:c,y:p}=l.computeCenter();s.containsPoint(c,p)||this.chart.ctx.zoomManager.panToBBox(this.id,s,l)}_7(n!=null?new Ue(0,0,n.width,n==null?void 0:n.height):void 0,this.focusIndicator,e,n==null?void 0:n.x,n==null?void 0:n.y);const a=G7(s,e);if(a!==void 0&&this.hoverDevice==="keyboard"){this.tooltip.lastHover=void 0,this.highlight.appliedHoverEvent=void 0,this.highlight.pendingHoverEvent=void 0,this.highlight.stashedHoverEvent=void 0;const l=i.series.getTooltipContent(r),c=aC.makeTooltipMeta(a,r);this.chart.ctx.highlightManager.updateHighlight(this.id,r),this.chart.ctx.tooltipManager.updateTooltip(this.id,c,l),t||this.swapChain.update(this.getDatumAriaText(r,l))}}getDatumAriaText(e,t){var s,n;const i=t==null?"":a1(t);return this.chart.ctx.localeManager.t("ariaAnnounceHoverDatum",{datum:((n=(s=e.series).getDatumAriaText)==null?void 0:n.call(s,e,i))??i})}clearHighlight(){this.highlight.pendingHoverEvent=void 0,this.highlight.appliedHoverEvent=void 0,this.chart.ctx.highlightManager.updateHighlight(this.id)}clearTooltip(){this.chart.ctx.tooltipManager.removeTooltip(this.id),this.tooltip.lastHover=void 0}clearAll(){this.clearHighlight(),this.clearTooltip(),this.focusIndicator.updateBounds(void 0)}handleHoverHighlight(e){var c;this.highlight.appliedHoverEvent=this.highlight.pendingHoverEvent,this.highlight.pendingHoverEvent=void 0;const t=this.highlight.appliedHoverEvent;if(!t)return;const i=this.chart.ctx.interactionManager.getState();if(i!==32&&i!==8&&i!==1)return;const{canvasX:s,canvasY:n}=t;if(e?this.chart.ctx.animationManager.isActive():!((c=this.hoverRect)!=null&&c.containsPoint(s,n))){this.clearHighlight();return}let r={x:t.regionX,y:t.regionY};t.region!=="series"&&(r=ji.fromCanvasPoint(this.chart.seriesRoot,s,n));const{range:o}=this.chart.highlight,a=o==="tooltip"?"highlight-tooltip":"highlight",l=Wd(this.series,r,a);if(l){this.chart.ctx.highlightManager.updateHighlight(this.id,l.datum),this.hoverDevice="mouse";return}this.chart.ctx.highlightManager.updateHighlight(this.id)}handleHoverTooltip(e,t){var y;const i=this.chart.ctx.interactionManager.getState();if(i!==32&&i!==8&&i!==1)return;const{canvasX:s,canvasY:n,regionX:r,regionY:o}=e,a=e.sourceEvent.target;if(t?this.chart.ctx.animationManager.isActive():!((y=this.hoverRect)!=null&&y.containsPoint(s,n))){this.hoverDevice=="mouse"&&this.clearTooltip();return}if(a&&this.chart.tooltip.interactive&&this.chart.ctx.domManager.isManagedChildDOMElement(a,"canvas-overlay",Ws))return;let l={x:r,y:o};e.region!=="series"&&(l=ji.fromCanvasPoint(this.chart.seriesRoot,s,n));const c=Wd(this.series,l,"tooltip");if(!c){this.hoverDevice=="mouse"&&this.clearTooltip();return}this.hoverDevice="mouse";const p=c.series.getTooltipContent(c.datum);if(this.chart.tooltip.enabled&&c.series.tooltipEnabled&&p!=null){const C=aC.makeTooltipMeta(e,c.datum);this.chart.ctx.tooltipManager.updateTooltip(this.id,C,p)}}changeHighlightDatum(e){const t=new Set,{series:i=void 0,datum:s}=e.currentHighlight??{},{series:n=void 0,datum:r}=e.previousHighlight??{};n&&t.add(n),i&&t.add(i),n!=null&&n.properties.cursor&&r&&this.chart.ctx.cursorManager.updateCursor(n.id),i!=null&&i.properties.cursor&&(i==null?void 0:i.properties.cursor)!=="default"&&s&&this.chart.ctx.cursorManager.updateCursor(i.id,i.properties.cursor),i==null||n==null?this.update(4):this.update(4,{seriesToUpdate:t})}},CA=30,Q7=class{constructor(e){this.seriesRoot=e,this.groups=new Map,this.series=new Map,this.expectedSeriesCount=1,this.mode="normal"}setSeriesCount(e){this.expectedSeriesCount=e}requestGroup(e){const{internalId:t,type:i,contentGroup:s,seriesGrouping:n}=e,{groupIndex:r=t}=n??{},o=this.series.get(t);if(o!=null)throw new Error(`AG Charts - series already has an allocated layer: ${JSON.stringify(o)}`);this.series.size===0&&(this.mode=this.expectedSeriesCount>=CA?"aggressive-grouping":"normal");let a=this.groups.get(i);a==null&&(a=new Map,this.groups.set(i,a));const l=this.lookupIdx(r);let c=a.get(l);return c==null&&(c={type:i,id:l,seriesIds:[],group:this.seriesRoot.appendChild(new lt({name:`${e.contentGroup.name??i}-managed-layer`,zIndex:e.contentGroup.zIndex,renderToOffscreenCanvas:!1}))},a.set(l,c)),this.series.set(t,{layerState:c,seriesConfig:e}),c.seriesIds.push(t),c.group.appendChild(s),c.group}changeGroup(e){var a,l;const{internalId:t,seriesGrouping:i,type:s,contentGroup:n,oldGrouping:r}=e,{groupIndex:o=t}=i??{};(l=(a=this.groups.get(s))==null?void 0:a.get(o))!=null&&l.seriesIds.includes(t)||(this.series.has(t)&&this.releaseGroup({internalId:t,seriesGrouping:r,type:s,contentGroup:n}),this.requestGroup(e))}releaseGroup(e){var r,o,a;const{internalId:t,contentGroup:i,type:s}=e;if(!this.series.has(t))throw new Error(`AG Charts - series doesn't have an allocated layer: ${t}`);const n=(r=this.series.get(t))==null?void 0:r.layerState;n&&(n.seriesIds=n.seriesIds.filter(l=>l!==t),n.group.removeChild(i)),(n==null?void 0:n.seriesIds.length)===0?(this.seriesRoot.removeChild(n.group),(o=this.groups.get(n.type))==null||o.delete(n.id),(a=this.groups.get(s))==null||a.delete(t)):n!=null&&n.seriesIds.length>0&&(n.group.zIndex=this.getLowestSeriesZIndex(n.seriesIds)),this.series.delete(t)}updateLayerCompositing(){this.groups.forEach(e=>{e.forEach(t=>{const{group:i,seriesIds:s}=t;let n;if(s.length===0)n=!1;else if(s.length>1)n=!0;else{const r=this.series.get(s[0]);n=(r==null?void 0:r.seriesConfig.renderToOffscreenCanvas())===!0}i.renderToOffscreenCanvas=n,i.zIndex=this.getLowestSeriesZIndex(s)})})}lookupIdx(e){return this.mode==="normal"?e:typeof e=="string"&&(e=Number(e.split("-").at(-1)),!e)?0:Math.floor(St(0,e/this.expectedSeriesCount,1)*CA)}destroy(){this.groups.forEach(e=>{e.forEach(t=>{this.seriesRoot.removeChild(t.group)})}),this.groups.clear(),this.series.clear()}getLowestSeriesZIndex(e){return e.reduce((i,s)=>{const n=this.series.get(s),r=n==null?void 0:n.seriesConfig.contentGroup.zIndex;return i==null||r==null?r:bO(i,r)<=0?i:r},void 0)??1}},q7=class{constructor(e,t,i,s,n){this.chart=e,this.dataService=t,this.updateService=i,this.zoomManager=s,this.animationManager=n,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",()=>this.onUpdateComplete()),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(e=>e())}onDataLoad(){this.animationManager.skip(),this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow()}onZoomChange(){this.dirtyZoom=!0}updateWindow(){if(!this.dataService.isLazy())return;const e=this.getValidAxis();let t,i=!0;if(e){const s=this.zoomManager.getAxisZoom(e.id);t=this.getAxisWindow(e,s),i=this.shouldRefresh(e,s)}this.dirtyZoom=!1,this.dirtyDataSource=!1,i&&this.dataService.load({windowStart:t==null?void 0:t.min,windowEnd:t==null?void 0:t.max})}getValidAxis(){return this.chart.axes.find(e=>e.type==="time")}shouldRefresh(e,t){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const i=this.lastAxisZooms.get(e.id);return i&&t.min===i.min&&t.max===i.max?!1:(this.lastAxisZooms.set(e.id,t),!0)}getAxisWindow(e,t){var o,a;const i=(a=(o=e.scale).getDomain)==null?void 0:a.call(o);if(!t||!i||i.length===0||isNaN(Number(i[0])))return;const s=Number(i[1])-Number(i[0]),n=new Date(Number(i[0])+s*t.min),r=new Date(Number(i[0])+s*t.max);return{min:n,max:r}}},J7=/^((?!chrome|android).)*safari/i,eJ=/Version\/(\d+(\.\d+)?)/,tJ=/Chrome/,iJ=/Chrome\/(\d+)/,sJ=/Edg/,nJ=/OPR/;function rJ(){var t,i;const{userAgent:e}=Mi().navigator;if(J7.test(e)){const s=parseFloat(((t=eJ.exec(e))==null?void 0:t[1])??"0"),n=Math.floor(s)>16;return n||_e.warnOnce(`Unsupported Safari version: ${s} ; ${e}`),!n}else if(tJ.test(e)&&!sJ.test(e)&&!nJ.test(e)){const s=parseInt(((i=iJ.exec(e))==null?void 0:i[1])??"0",10),n=s>126;return n||_e.warnOnce(`Unsupported Chrome version: ${s} ; ${e}`),!n}return!1}var oJ=class{constructor(e,t,i,s,n,r,o){this.chartLike=e,this.overlays=t,this.dataService=i,this.layoutManager=s,this.localeManager=n,this.animationManager=r,this.domManager=o,this.destroyFns=[],this.overlayElem=this.domManager.addChild("canvas-overlay","overlay"),this.overlayElem.role="status",this.overlayElem.ariaAtomic="false",this.overlayElem.ariaLive="polite",this.overlayElem.classList.toggle(TM),this.destroyFns.push(this.layoutManager.addListener("layout:complete",a=>this.onLayoutComplete(a)))}destroy(){this.destroyFns.forEach(e=>e()),this.domManager.removeStyles("overlays"),this.domManager.removeChild("canvas-overlay","overlay")}onLayoutComplete({series:{rect:e}}){const t=this.dataService.isLoading(),i=this.chartLike.series.some(c=>c.hasData),s=this.chartLike.series.some(c=>c.visible);this.overlays.darkTheme?this.overlayElem.classList.add(dA):this.overlayElem.classList.remove(dA),this.overlayElem.style.left=`${e.x}px`,this.overlayElem.style.top=`${e.y}px`,this.overlayElem.style.width=`${e.width}px`,this.overlayElem.style.height=`${e.height}px`;const n=t,r=!t&&!i,o=i&&!s,a=this.overlays.unsupportedBrowser.enabled&&rJ();n?this.showOverlay(this.overlays.loading,e):this.hideOverlay(this.overlays.loading),r?this.showOverlay(this.overlays.noData,e):this.hideOverlay(this.overlays.noData),o?this.showOverlay(this.overlays.noVisibleSeries,e):this.hideOverlay(this.overlays.noVisibleSeries),a?this.showOverlay(this.overlays.unsupportedBrowser,e):this.hideOverlay(this.overlays.unsupportedBrowser);const l=n||r||o||a;ii(this.overlayElem,"aria-hidden",!l)}showOverlay(e,t){if(!e.enabled)return;const i=e.getElement(this.animationManager,this.localeManager,t);this.overlayElem.appendChild(i)}hideOverlay(e){e.removeElement(()=>{this.overlayElem.innerText=" "},this.animationManager)}},yo=ci.create(!0,"opts"),cD=class extends yt{constructor(){super(...arguments),this.padding=new nu(0)}};A([O(nt,{optional:!0})],cD.prototype,"clip",2);A([O(Ye)],cD.prototype,"padding",2);var ms=class l1 extends e_{constructor(t,i){var s;super(),this.id=Qr(this),this.seriesRoot=new yn({name:`${this.id}-series-root`,zIndex:4}),this.annotationRoot=new yn({name:`${this.id}-annotation-root`,zIndex:8}),this.titleGroup=new lt({name:"titles",zIndex:12}),this.debug=ci.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this._autoSizeNotify=new YT,this.padding=new nu(20),this.seriesArea=new cD,this.keyboard=new JR,this.mode="standalone",this.chartCaptions=new aS,this.suppressFieldDotNotation=!1,this.destroyed=!1,this._destroyFns=[],this.skipSync=!1,this.chartAnimationPhase="initial",this.modulesManager=new D7,this.processors=[],this.queuedUserOptions=[],this.queuedChartOptions=[],this.firstApply=!0,this._pendingFactoryUpdatesCount=0,this._performUpdateSkipAnimations=!1,this._performUpdateNotify=new YT,this.performUpdateType=7,this.runningUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new MQ,this.updateRequestors={},this.performUpdateTrigger=DQ(({count:p})=>{this.destroyed||this.updateMutex.acquire(async()=>{try{await this.performUpdate(p)}catch(g){_e.error("update error",g)}}).catch(g=>_e.errorOnce(g))}),this._performUpdateSplits={},this.axes=[],this.series=[],this._cachedData=void 0,this.onSeriesNodeClick=p=>{this.fireEvent({...p,type:"seriesNodeClick"})},this.onSeriesNodeDoubleClick=p=>{this.fireEvent({...p,type:"seriesNodeDoubleClick"})},this.onSeriesVisibilityChange=p=>{this.fireEvent(p)},this.seriesGroupingChanged=p=>{if(!(p instanceof sD))return;const{series:g,seriesGrouping:f,oldGrouping:y}=p;g.contentGroup.isRoot()||this.seriesLayerManager.changeGroup({internalId:g.internalId,type:g.type,contentGroup:g.contentGroup,renderToOffscreenCanvas:()=>g.renderToOffscreenCanvas(),seriesGrouping:f,oldGrouping:y})},this.chartOptions=t;const n=i==null?void 0:i.scene,r=(i==null?void 0:i.container)??t.processedOptions.container??void 0,o=(i==null?void 0:i.styleContainer)??t.specialOverrides.styleContainer,a=new lt({name:"root"});a.visible=!1,a.append(this.seriesRoot),a.append(this.annotationRoot),a.append(this.titleGroup),this.titleGroup.append(this.title.node),this.titleGroup.append(this.subtitle.node),this.titleGroup.append(this.footnote.node),this.tooltip=new Da,this.seriesLayerManager=new Q7(this.seriesRoot),this.mode=t.userOptions.mode??this.mode;const l=this.ctx=new Yq(this,{chartType:this.getChartType(),scene:n,root:a,container:r,styleContainer:o,syncManager:new y7(this),pixelRatio:t.specialOverrides.overrideDevicePixelRatio,updateCallback:(p,g)=>this.update(p,g),updateMutex:this.updateMutex});this._destroyFns.push(l.domManager.addListener("resize",()=>this.parentResize(l.domManager.containerSize))),this.overlays=new Ip,(s=this.overlays.loading).renderer??(s.renderer=()=>E7(this.overlays.loading.getText(l.localeManager),l.animationManager.defaultDuration)),this.processors=[new q7(this,l.dataService,l.updateService,l.zoomManager,l.animationManager),new oJ(this,this.overlays,l.dataService,l.layoutManager,l.localeManager,l.animationManager,l.domManager)],this.highlight=new k_,this.container=r;const c=this.getModuleContext();l.domManager.setDataBoolean("animating",!1),this.seriesAreaManager=new X7(this.initSeriesAreaDependencies()),this._destroyFns.push(l.layoutManager.registerElement(0,p=>{p.layoutBox.shrink(this.padding.toJson()),this.chartCaptions.positionCaptions(p)}),l.layoutManager.addListener("layout:complete",p=>this.chartCaptions.positionAbsoluteCaptions(p)),l.dataService.addListener("data-load",p=>{this.data=p.data}),this.title.registerInteraction(c,"beforebegin"),this.subtitle.registerInteraction(c,"beforebegin"),this.footnote.registerInteraction(c,"afterend"),l.interactionManager.addListener("page-left",()=>this.destroy()),l.animationManager.addListener("animation-frame",()=>{this.update(6)}),l.animationManager.addListener("animation-start",()=>l.domManager.setDataBoolean("animating",!0)),l.animationManager.addListener("animation-stop",()=>l.domManager.setDataBoolean("animating",!1)),l.zoomManager.addListener("zoom-change",()=>{this.series.forEach(g=>{var f;return(f=g.animationState)==null?void 0:f.transition("updateData")});const p=this.chartAnimationPhase!=="initial";this.update(3,{forceNodeDataRefresh:!0,skipAnimations:p})})),this.parentResize(l.domManager.containerSize)}static getInstance(t){return l1.chartsInstances.get(t)}get canvasElement(){return this.ctx.scene.canvas.element}download(t,i){this.ctx.scene.download(t,i)}getCanvasDataURL(t){return this.ctx.scene.getDataURL(t)}toSVG(){return this.ctx.scene.toSVG()}getOptions(){return this.queuedUserOptions.at(-1)??this.chartOptions.userOptions}getChartOptions(){return this.queuedChartOptions.at(-1)??this.chartOptions}initSeriesAreaDependencies(){const{ctx:t,tooltip:i,highlight:s,overlays:n,seriesRoot:r,mode:o}=this,a=this.getChartType();return{fireEvent:this.fireEvent.bind(this),getUpdateType:()=>this.performUpdateType,chartType:a,ctx:t,tooltip:i,highlight:s,overlays:n,seriesRoot:r,mode:o}}getModuleContext(){return this.ctx}getCaptionText(){return[this.title,this.subtitle,this.footnote].filter(t=>t.enabled&&t.text).map(t=>t.text).join(". ")}getAriaLabel(){return this.ctx.localeManager.t("ariaAnnounceChart",{seriesCount:this.series.length})}resetAnimations(){this.chartAnimationPhase="initial";for(const t of this.series)t.resetAnimation(this.chartAnimationPhase);for(const t of this.axes)t.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,this.ctx.animationManager.reset()}skipAnimations(){this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}detachAndClear(){this.container=void 0,this.ctx.scene.clear()}destroy(t){if(this.destroyed)return;const i=t==null?void 0:t.keepTransferableResources;let s;return this.performUpdateType=7,this._destroyFns.forEach(n=>n()),this.processors.forEach(n=>n.destroy()),this.tooltip.destroy(this.ctx.domManager),this.overlays.destroy(),this.modulesManager.destroy(),i?(this.ctx.scene.strip(),s={container:this.container,scene:this.ctx.scene}):(this.ctx.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(n=>n.destroy()),this.axes=[],this.animationRect=void 0,this.ctx.destroy(),this.destroyed=!0,Object.freeze(this),s}requestFactoryUpdate(t){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(async()=>{if(!this.destroyed)try{await t(this)}finally{this.destroyed||this._pendingFactoryUpdatesCount--}}).catch(i=>_e.errorOnce(i)))}update(t=0,i){const{forceNodeDataRefresh:s=!1,skipAnimations:n,seriesToUpdate:r=this.series,newAnimationBatch:o}=i??{};s&&this.series.forEach(a=>a.markNodeDataDirty());for(const a of r)this.seriesToUpdate.add(a);if(n&&(this.ctx.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),o&&this.ctx.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this.skipSync=(i==null?void 0:i.skipSync)??!1,this.debug.check()){let a=new Error().stack??"<unknown>";a=a.replace(/\([^)]*/g,""),this.updateRequestors[a]=t}t<this.performUpdateType&&(this.performUpdateType=t,this.ctx.domManager.setDataBoolean("updatePending",!0),this.performUpdateTrigger.schedule(i==null?void 0:i.backOffMs))}async performUpdate(t){const{performUpdateType:i,extraDebugStats:s,_performUpdateSplits:n,ctx:r}=this,o=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),this.runningUpdateType=i,this.updateShortcutCount===0&&i<6&&(r.animationManager.startBatch(this._performUpdateSkipAnimations),r.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.debug("Chart.performUpdate() - start",hf[i]);let a=performance.now();n.start??(n.start=a);const l=p=>{n[p]??(n[p]=0),n[p]+=performance.now()-a,a=performance.now()};switch(i){case 0:if(this.checkUpdateShortcut(0))break;this.ctx.updateService.dispatchPreDomUpdate(),this.updateDOM();case 1:if(this.checkUpdateShortcut(1))break;await this.updateData(),l("⬇️");case 2:if(this.checkUpdateShortcut(2))break;await this.processData(),this.seriesAreaManager.dataChanged(),l("🏭");case 3:if(await this.checkFirstAutoSize(),this.checkUpdateShortcut(3))break;await this.processLayout(),l("⌖");case 4:{if(this.checkUpdateShortcut(4))break;await this.updateSeries(o),l("🤔"),this.updateAriaLabels(),this.seriesLayerManager.updateLayerCompositing()}case 5:if(this.checkUpdateShortcut(5))break;r.updateService.dispatchPreSceneRender(this.getMinRects()),l("↖");case 6:if(this.checkUpdateShortcut(6))break;r.animationManager.endBatch(),s.updateShortcutCount=this.updateShortcutCount,r.scene.render({debugSplitTimes:n,extraDebugStats:s,seriesRect:this.seriesRect}),this.extraDebugStats={};for(const p of Object.keys(n))delete n[p];this.ctx.domManager.incrementDataCounter("sceneRenders");case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,r.animationManager.endBatch()}this.destroyed||(r.updateService.dispatchUpdateComplete(this.getMinRects()),this.ctx.domManager.setDataBoolean("updatePending",!1),this.runningUpdateType=7),this._performUpdateNotify.notify();const c=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round((c-n.start)*100)/100,count:t,performUpdateType:hf[i]})}updateThemeClassName(){const t="ag-charts-theme-",i=[`${t}default`,`${t}default-dark`];let s=i[0],n=!1,{theme:r}=this.chartOptions.processedOptions;for(;typeof r!="string"&&r!=null;)r=r.baseTheme;typeof r=="string"&&(s=r.replace("ag-",t),n=r.includes("-dark")),i.includes(s)||(s=n?i[1]:i[0]),this.ctx.domManager.setThemeClass(s)}updateDOM(){this.updateThemeClassName();const{enabled:t,tabIndex:i}=this.keyboard;this.ctx.domManager.setTabGuardIndex(t?i??0:-1)}updateAriaLabels(){this.ctx.domManager.updateCanvasLabel(this.getAriaLabel())}checkUpdateShortcut(t){return this.destroyed?!0:this.updateShortcutCount>3?(_e.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=t?(this.updateShortcutCount++,!0):!1}async checkFirstAutoSize(){this.width!=null&&this.height!=null||this._lastAutoSize||await this._autoSizeNotify.await(500)||this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}onAxisChange(t,i){i==null&&t.length===0||this.ctx.axisManager.updateAxes(i??[],t)}onSeriesChange(t,i){var n,r;const s=(i==null?void 0:i.filter(o=>!t.includes(o)))??[];this.destroySeries(s),(n=this.seriesLayerManager)==null||n.setSeriesCount(t.length);for(const o of t){if(i!=null&&i.includes(o))continue;const a=this.seriesLayerManager.requestGroup(o);o.attachSeries(a,this.seriesRoot,this.annotationRoot);const l=this;o.chart={get mode(){return l.mode},get isMiniChart(){return!1},get seriesRect(){return l.seriesRect}},o.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(o),o.addChartEventListeners()}(r=this.seriesAreaManager)==null||r.seriesChanged(t)}destroySeries(t){t==null||t.forEach(i=>{i.removeEventListener("nodeClick",this.onSeriesNodeClick),i.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),i.removeEventListener("groupingChanged",this.seriesGroupingChanged),i.destroy(),this.seriesLayerManager.releaseGroup(i),i.detachSeries(void 0,this.seriesRoot,this.annotationRoot),i.chart=void 0})}addSeriesListeners(t){this.hasEventListener("seriesNodeClick")&&t.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&t.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.hasEventListener("seriesVisibilityChange")&&t.addEventListener("seriesVisibilityChange",this.onSeriesVisibilityChange),t.addEventListener("groupingChanged",this.seriesGroupingChanged)}assignSeriesToAxes(){for(const t of this.axes)t.boundSeries=this.series.filter(i=>i.axes[t.direction]===t)}assignAxesToSeries(){const t=YC(this.axes,i=>i.direction);for(const i of this.series)for(const s of i.directions){const n=t[s];if(!n){_e.warnOnce(`no available axis for direction [${s}]; check series and axes configuration.`);return}const r=i.getKeys(s),o=n.find(a=>!a.keys.length||r.some(l=>a.keys.includes(l)));if(!o){_e.warnOnce(`no matching axis for direction [${s}] and keys [${r}]; check series and axes configuration.`);return}i.axes[s]=o}}parentResize(t){if(t==null||this.width!=null&&this.height!=null)return;let{width:i,height:s}=t;if(i=Math.floor(i),s=Math.floor(s),i===0&&s===0)return;const[n=0,r=0]=this._lastAutoSize??[];n===i&&r===s||(this._lastAutoSize=[i,s],this.resize("SizeMonitor",{}))}resize(t,i){var g,f;const{scene:s,animationManager:n}=this.ctx,{inWidth:r,inHeight:o,inMinWidth:a,inMinHeight:l}=i;this.ctx.domManager.setSizeOptions(a??this.minWidth,l??this.minHeight,r??this.width,o??this.height);const c=r??this.width??((g=this._lastAutoSize)==null?void 0:g[0]),p=o??this.height??((f=this._lastAutoSize)==null?void 0:f[1]);if(this.debug(`Chart.resize() from ${t}`,{width:c,height:p,stack:new Error().stack}),!(c==null||p==null||!Kt(c)||!Kt(p))&&s.resize(c,p)){n.reset();let y=!0;(this.width==null||this.height==null)&&this._firstAutoSize&&(y=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:y}),this._autoSizeNotify.notify()}}async updateData(){this.series.forEach(i=>i.setChartData(this.data));const t=this.modulesManager.mapModules(i=>{var s;return(s=i.updateData)==null?void 0:s.call(i,this.data)});await Promise.all(t)}async processData(){this.series.some(n=>n.canHaveAxes)&&(this.assignAxesToSeries(),this.assignSeriesToAxes());for(const n of this.axes)n.processData();const t=new z_(this.mode,this.suppressFieldDotNotation),i=this.series.map(n=>(n.resetDatumCallbackCache(),n.processData(t))),s=this.modulesManager.mapModules(n=>{var r;return(r=n.processData)==null?void 0:r.call(n,t)});this._cachedData=t.execute(this._cachedData),await Promise.all([...i,...s]),this.updateLegends()}updateLegends(t){for(const{legend:i,legendType:s}of this.modulesManager.legends())s==="category"?this.setCategoryLegendData(t):this.setLegendData(s,i)}setCategoryLegendData(t){var i;const{ctx:{legendManager:s,stateManager:n}}=this;t&&this.series.forEach(o=>{const a=t.find(l=>l.seriesId===o.id);o.onLegendInitialState("category",a)});const r=this.series.flatMap(o=>{const a=o.getLegendData("category");return s.updateData(o.id,a),a});if(t){n.setStateAndRestore(s,t);return}if(this.mode!=="integrated"){const o={},a=new Map(this.series.map(l=>[l.id,l.type]));for(const{seriesId:l,symbol:{marker:c},label:p}of r.filter(g=>!g.hideInLegend)){if(c.fill==null)continue;const g=a.get(l),f=o[g]??(o[g]={});f[i=p.text]??(f[i]=c.fill),f[p.text]!==c.fill&&_e.warnOnce(`legend item '${p.text}' has multiple fill colors, this may cause unexpected behaviour.`)}}s.update()}setLegendData(t,i){i.data=this.series.filter(s=>s.properties.showInLegend).flatMap(s=>s.getLegendData(t))}async processLayout(){var r;const t=this.animationRect,{width:i,height:s}=this.ctx.scene,n=this.ctx.layoutManager.createContext(i,s);await this.performLayout(n),t&&!((r=this.animationRect)!=null&&r.equals(t))&&this.ctx.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)}async updateSeries(t){const{seriesRect:i}=this;await Promise.all(t.map(s=>s.update({seriesRect:i}))),this.ctx.seriesLabelLayoutManager.updateLabels(this.series.filter(s=>s.visible&&s.usesPlacedLabels),this.padding,this.seriesRect)}async waitForUpdate(t=1e4,i=!1){const s=performance.now();for(;this._pendingFactoryUpdatesCount>0||this.performUpdateType!==7||this.runningUpdateType!==7;){if(this._pendingFactoryUpdatesCount>0&&await this.updateMutex.waitForClearAcquireQueue(),(this.performUpdateType!==7||this.runningUpdateType!==7)&&await this._performUpdateNotify.await(),performance.now()-s>t){const n=`Chart.waitForUpdate() timeout of ${t} reached - first chart update taking too long.`;if(i)throw new Error(n);_e.warnOnce(n)}IO()&&await bQ()}}getMinRects(){const{width:t,height:i}=this.ctx.scene,s=this.series.map(p=>p.getMinRects(t,i)).filter(Gc);if(s.length===0)return;let n=0,r=0,o=0,a=0;for(const{minRect:p,minVisibleRect:g}of s)n=Math.max(n,p.width),r=Math.max(r,p.height),o=Math.max(o,g.width),a=Math.max(a,g.height);const l=new Ue(0,0,n,r);let c=l.clone();return o>0&&a>0&&(c=new Ue(0,0,o,a)),{minRect:l,minVisibleRect:c}}filterMiniChartSeries(t){return t==null?void 0:t.filter(i=>i.showInMiniChart!==!1)}applyOptions(t){var x,M,b,R,I;const i=this.firstApply?t.processedOptions:t.diffOptions(this.chartOptions);if(i==null||Object.keys(i).length===0)return;const s=this.firstApply?{}:this.chartOptions.processedOptions,n=t.processedOptions;yo("Chart.applyOptions() - applying delta",i);const r=this.applyModules(n),o=["type","data","series","listeners","preset","theme","legend.listeners","navigator.miniChart.series","navigator.miniChart.label","locale.localeText","axes","topology","nodes","initialState","styleContainer"];i.listeners&&this.registerListeners(this,i.listeners),uf(this,i,{skip:o});let a=!1,l="no-op";i.series!=null&&(l=this.applySeries(this,i.series,s==null?void 0:s.series),a=!0),l==="replaced"&&this.resetAnimations(),this.applyAxes(this,n,s,l,[])&&(a=!0),i.data&&(this.data=i.data),(x=i.legend)!=null&&x.listeners&&this.modulesManager.isEnabled("legend")&&Object.assign(this.legend.listeners,i.legend.listeners),(M=i.locale)!=null&&M.localeText&&(this.modulesManager.getModule("locale").localeText=(b=i.locale)==null?void 0:b.localeText),this.chartOptions=t;const c=this.modulesManager.getModule("navigator"),p=this.modulesManager.getModule("zoom");!(c!=null&&c.enabled)&&!(p!=null&&p.enabled)&&this.ctx.zoomManager.updateZoom("chart");const g=c==null?void 0:c.miniChart,f=((I=(R=n.navigator)==null?void 0:R.miniChart)==null?void 0:I.series)??n.series;(g==null?void 0:g.enabled)===!0&&f!=null?this.applyMiniChartOptions(g,f,n,s):(g==null?void 0:g.enabled)===!1&&(g.series=[],g.axes=[]),this.ctx.annotationManager.setAnnotationStyles(t.annotationThemes),a||(a=this.shouldForceNodeDataRefresh(i,l));const C=a||r?0:3;this.maybeResetAnimations(l),yo("Chart.applyOptions() - update type",hf[C],{seriesStatus:l,forceNodeDataRefresh:a}),this.update(C,{forceNodeDataRefresh:a,newAnimationBatch:!0}),this.ctx.legendManager.clearData(),this.applyInitialState(n),this.firstApply=!1}applyInitialState(t){var l,c,p;const{annotationManager:i,chartTypeOriginator:s,historyManager:n,stateManager:r,zoomManager:o}=this.ctx,{initialState:a}=t;if("annotations"in t&&((l=t.annotations)!=null&&l.enabled)&&(a==null?void 0:a.annotations)!=null){const g=a.annotations.map(f=>{const y=i.getAnnotationTypeStyles(f.type);return Et(f,y)});r.setState(i,g)}(a==null?void 0:a.chartType)!=null&&r.setState(s,a.chartType),((c=t.navigator)!=null&&c.enabled||(p=t.zoom)!=null&&p.enabled)&&(a==null?void 0:a.zoom)!=null&&r.setState(o,a.zoom),(a==null?void 0:a.legend)!=null&&this.updateLegends(a.legend),a!=null&&n.clear()}maybeResetAnimations(t){if(this.mode==="standalone")switch(t){case"series-grouping-change":case"replaced":this.resetAnimations();break}}shouldForceNodeDataRefresh(t,i){const s=!!t.data||i==="data-change"||i==="replaced",n=QR.getKeys(),r=Object.values(n).some(a=>t[a]!=null),o=t.title!=null&&t.subtitle!=null;return s||r||o}applyMiniChartOptions(t,i,s,n){var p,g,f,y;const r=((g=(p=n==null?void 0:n.navigator)==null?void 0:p.miniChart)==null?void 0:g.series)??(n==null?void 0:n.series),o=this.applySeries(t,this.filterMiniChartSeries(i),this.filterMiniChartSeries(r));this.applyAxes(t,s,n,o,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const a=t.series;for(const C of a)C.properties.id=void 0;const l=t.axes,c=l.find(C=>C.direction==="x");for(const C of l)C.gridLine.enabled=!1,C.label.enabled=C===c,C.tick.enabled=!1,C.interactionEnabled=!1;if(c!=null){const C=(f=s.navigator)==null?void 0:f.miniChart,x=C==null?void 0:C.label,M=(y=C==null?void 0:C.label)==null?void 0:y.interval;if(c.line.enabled=!1,c.label.set(uM(x,["interval","rotation","minSpacing","autoRotate","autoRotateAngle"])),c.tick.set(uM(M,["enabled","width","size","color","interval","step"])),c.type==="grouped-category"){c.label.enabled=!1,c.label.rotation=0;const{depthOptions:R}=c;if(R.length===0)R.set([{label:{enabled:!0}}]);else for(let I=1;I<R.length;I++)R[I].label.enabled=!1}const b=M==null?void 0:M.step;b!=null&&(c.interval.step=b)}}applyModules(t){var n;const{type:i}=this.constructor;let s=!1;for(const r of ca.byType("root","legend")){const a=t[r.optionsKey]!=null&&r.chartTypes.includes(i);a!==this.modulesManager.isEnabled(r)&&(a?(this.modulesManager.addModule(r,l=>l.moduleFactory(this.getModuleContext())),r.type==="legend"&&((n=this.modulesManager.getModule(r))==null||n.attachLegend(this.ctx.scene)),this[r.optionsKey]=this.modulesManager.getModule(r)):(this.modulesManager.removeModule(r),delete this[r.optionsKey]),s=!0)}return s}initSeriesDeclarationOrder(t){for(let i=0;i<t.length;i++)t[i].setSeriesIndex(i)}applySeries(t,i,s){var p;if(!i)return"no-change";const n=x7(t.series,i,s);if(n.status==="no-overlap"){yo(`Chart.applySeries() - creating new series instances, status: ${n.status}`,n);const g=i.map(f=>this.createSeries(f));return this.initSeriesDeclarationOrder(g),t.series=g,"replaced"}yo("Chart.applySeries() - matchResult",n);const r=[];let o=!1,a=!1,l=!1;const c=n.changes.toSorted((g,f)=>g.targetIdx-f.targetIdx);for(const g of c)switch(a||(a=g.status==="series-grouping"),o||(o=((p=g.diff)==null?void 0:p.data)!=null),l||(l=g.status!=="no-op"),g.status){case"add":{const f=this.createSeries(g.opts);r.push(f),yo("Chart.applySeries() - created new series",f);break}case"remove":yo(`Chart.applySeries() - removing series at previous idx ${g.idx}`,g.series);break;case"no-op":r.push(g.series),yo(`Chart.applySeries() - no change to series at previous idx ${g.idx}`,g.series);break;case"series-grouping":case"update":default:{const{series:f,diff:y,idx:C}=g;yo(`Chart.applySeries() - applying series diff previous idx ${C}`,y,f),this.applySeriesValues(f,y),f.markNodeDataDirty(),r.push(f)}}return this.initSeriesDeclarationOrder(r),yo("Chart.applySeries() - final series instances",r),t.series=r,a?"series-grouping-change":o?"data-change":l?"updated":"no-op"}applyAxes(t,i,s,n,r=[]){if(!("axes"in i)||!i.axes)return!1;r=["axes[].type",...r];const{axes:o}=i;return!(n==="replaced")&&t.axes.length===o.length&&t.axes.every((c,p)=>c.type===o[p].type)&&zf(s)?(t.axes.forEach((c,p)=>{var C;const g=((C=s.axes)==null?void 0:C[p])??{},f=ga(g,o[p]);yo(`Chart.applyAxes() - applying axis diff idx ${p}`,f);const y=`axes[${p}]`;uf(c,f,{path:y,skip:r})}),!0):(yo(`Chart.applyAxes() - creating new axes instances; seriesStatus: ${n}`),t.axes=this.createAxis(o,r),!0)}createSeries(t){const i=lr.create(t.type,this.getModuleContext());return this.applySeriesOptionModules(i,t),this.applySeriesValues(i,t),i}applySeriesOptionModules(t,i){const s=t.createModuleContext(),n=t.getModuleMap();for(const r of ca.byType("series-option"))r.optionsKey in i&&r.seriesTypes.includes(t.type)&&n.addModule(r,o=>o.moduleFactory(s))}applySeriesValues(t,i){const s=t.getModuleMap(),{type:n,data:r,listeners:o,seriesGrouping:a,showInMiniChart:l,...c}=i;for(const p of Ep)if(p.type==="series-option"&&p.optionsKey in c){const g=s.getModule(p.optionsKey);if(g){const f=c[p.optionsKey];delete c[p.optionsKey],g.properties.set(f)}}t.properties.set(c),"data"in i&&t.setOptionsData(r),o&&this.registerListeners(t,o),"seriesGrouping"in i&&(a==null?t.seriesGrouping=void 0:t.seriesGrouping={...t.seriesGrouping,...a})}createAxis(t,i){const s=[],n=this.getModuleContext();for(let r=0;r<t.length;r++){const o=t[r],a=ml.create(o.type,n);this.applyAxisModules(a,o),uf(a,o,{path:`axes[${r}]`,skip:i}),s.push(a)}return S7(s),s}applyAxisModules(t,i){const s=t.createModuleContext(),n=t.getModuleMap();for(const r of ca.byType("axis-option")){const o=i[r.optionsKey]!=null;o!==n.isEnabled(r)&&(o?(n.addModule(r,a=>a.moduleFactory(s)),t[r.optionsKey]=n.getModule(r)):(n.removeModule(r),delete t[r.optionsKey]))}}registerListeners(t,i){t.clearEventListeners();for(const[s,n]of Object.entries(i))tu(n)&&t.addEventListener(s,n)}};ms.chartsInstances=new WeakMap;A([vr({newValue(e){this.destroyed||(this.ctx.domManager.setContainer(e),ms.chartsInstances.set(e,this))},oldValue(e){ms.chartsInstances.delete(e)}})],ms.prototype,"container",2);A([vr({newValue(e){this.resize("width option",{inWidth:e})}})],ms.prototype,"width",2);A([vr({newValue(e){this.resize("height option",{inHeight:e})}})],ms.prototype,"height",2);A([vr({newValue(e){this.resize("minWidth option",{inMinWidth:e})}})],ms.prototype,"minWidth",2);A([vr({newValue(e){this.resize("minHeight option",{inMinHeight:e})}})],ms.prototype,"minHeight",2);A([O(Ye)],ms.prototype,"padding",2);A([O(Ye)],ms.prototype,"seriesArea",2);A([O(Ye)],ms.prototype,"keyboard",2);A([O(pi(["standalone","integrated"],"a chart mode"))],ms.prototype,"mode",2);A([Ui("chartCaptions.title")],ms.prototype,"title",2);A([Ui("chartCaptions.subtitle")],ms.prototype,"subtitle",2);A([Ui("chartCaptions.footnote")],ms.prototype,"footnote",2);A([O(nt)],ms.prototype,"suppressFieldDotNotation",2);A([vr({changeValue(e,t){this.onAxisChange(e,t)}})],ms.prototype,"axes",2);A([vr({changeValue(e,t){this.onSeriesChange(e,t)}})],ms.prototype,"series",2);var ru=ms,aJ=class{constructor(e,t,i){this.root=new uJ(e,t,i)}clear(e){this.root.clear(e)}addValue(e,t){const i={hitTester:e,value:t,distanceSquared:(s,n)=>e.distanceSquared(s,n)};this.root.addElem(i)}find(e,t){const i={best:{nearest:void 0,distanceSquared:1/0}};return this.root.find(e,t,i),i.best}},lJ=class{constructor(e,t,i,s){this.nw=e,this.ne=t,this.sw=i,this.se=s}addElem(e){this.nw.addElem(e),this.ne.addElem(e),this.sw.addElem(e),this.se.addElem(e)}find(e,t,i){this.nw.find(e,t,i),this.ne.find(e,t,i),this.sw.find(e,t,i),this.se.find(e,t,i)}},cJ=class{constructor(e,t,i){this.capacity=e,this.maxdepth=t,this.boundary=i??Ue.NaN,this.elems=[],this.subdivisions=void 0}clear(e){this.elems.length=0,this.boundary=e,this.subdivisions=void 0}addElem(e){this.addCondition(e)&&(this.subdivisions===void 0?this.maxdepth===0||this.elems.length<this.capacity?this.elems.push(e):this.subdivide(e):this.subdivisions.addElem(e))}find(e,t,i){this.findCondition(e,t,i)&&(this.subdivisions===void 0?this.findAction(e,t,i):this.subdivisions.find(e,t,i))}subdivide(e){this.subdivisions=this.makeSubdivisions();for(const t of this.elems)this.subdivisions.addElem(t);this.subdivisions.addElem(e),this.elems.length=0}makeSubdivisions(){const{x:e,y:t,width:i,height:s}=this.boundary,{capacity:n}=this,r=this.maxdepth-1,o=i/2,a=s/2,l=new Ue(e,t,o,a),c=new Ue(e+o,t,o,a),p=new Ue(e,t+a,o,a),g=new Ue(e+o,t+a,o,a);return new lJ(this.child(n,r,l),this.child(n,r,c),this.child(n,r,p),this.child(n,r,g))}},uJ=class c1 extends cJ{addCondition(t){const{x:i,y:s}=t.hitTester.midPoint;return this.boundary.containsPoint(i,s)}findCondition(t,i,s){const{best:n}=s;return n.distanceSquared!==0&&this.boundary.distanceSquared(t,i)<n.distanceSquared}findAction(t,i,s){const n=zC(t,i,this.elems,s.best.distanceSquared);n.nearest!==void 0&&n.distanceSquared<s.best.distanceSquared&&(s.best=n)}child(t,i,s){return new c1(t,i,s)}},uD=class extends Lp{constructor(){super(...arguments),this.showFocusBox=!0,this.clipFocusBox=!0}getScaleInformation({xScale:e,yScale:t}){const i=hi.is(e),s=hi.is(t);return{isContinuousX:i,isContinuousY:s,xScaleType:e==null?void 0:e.type,yScaleType:t==null?void 0:t.type}}getModulePropertyDefinitions(){var i,s;const e=(i=this.axes.x)==null?void 0:i.scale,t=(s=this.axes.y)==null?void 0:s.scale;return this.moduleMap.mapModules(n=>n.getPropertyDefinitions(this.getScaleInformation({xScale:e,yScale:t}))).flat()}async requestDataModel(e,t,i){i.props.push(...this.getModulePropertyDefinitions());const{dataModel:s,processedData:n}=await e.request(this.id,t??[],i);return this.dataModel=s,this.processedData=n,this.dispatch("data-processed",{dataModel:s,processedData:n}),{dataModel:s,processedData:n}}isProcessedDataAnimatable(){var s,n;const e=(n=(s=this.processedData)==null?void 0:s.reduced)==null?void 0:n.animationValidation;if(!e)return!0;const{orderedKeys:t,uniqueKeys:i}=e;return t&&i}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}pickFocus(e){const t=this.getNodeData();if(t===void 0||t.length===0)return;const i=this.computeFocusDatumIndex(e,t);if(i===void 0)return;const{showFocusBox:s,clipFocusBox:n}=this,r=t[i],o={...e,datumIndex:i},a=this.computeFocusBounds(o);if(a!==void 0)return{bounds:a,showFocusBox:s,clipFocusBox:n,datum:r,datumIndex:i}}computeFocusDatumIndex(e,t){const i=a=>{const{missing:l=!1,enabled:c=!0,focusable:p=!0}=t[a];return!l&&c&&p},s=a=>{for(;a>=0&&!i(a);)a+=e.datumIndexDelta;return a===-1?void 0:a},n=a=>{for(;a<t.length&&!i(a);)a+=e.datumIndexDelta;return a===t.length?void 0:a};let r;const o=St(0,e.datumIndex,t.length-1);return e.datumIndexDelta<0?r=s(o):e.datumIndexDelta>0?r=n(o):r=n(o)??s(o),r===void 0?e.datumIndexDelta===0?void 0:e.datumIndex-e.datumIndexDelta:r}},kl=class extends yt{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};A([O(Zt,{optional:!0})],kl.prototype,"fill",2);A([O($t,{optional:!0})],kl.prototype,"fillOpacity",2);A([O(Zt,{optional:!0})],kl.prototype,"stroke",2);A([O(Ge,{optional:!0})],kl.prototype,"strokeWidth",2);A([O($t,{optional:!0})],kl.prototype,"strokeOpacity",2);A([O(El,{optional:!0})],kl.prototype,"lineDash",2);A([O(Ge,{optional:!0})],kl.prototype,"lineDashOffset",2);var yS=class extends yt{};A([O(Ge,{optional:!0})],yS.prototype,"strokeWidth",2);A([O($t,{optional:!0})],yS.prototype,"dimOpacity",2);A([O(nt,{optional:!0})],yS.prototype,"enabled",2);var u1=class extends yt{constructor(){super(...arguments),this.color="black"}};A([O(Zt,{optional:!0})],u1.prototype,"color",2);var hD=class extends yt{constructor(){super(...arguments),this.enabled=!0}};A([O(nt,{optional:!0})],hD.prototype,"enabled",2);var bm=class extends yt{constructor(){super(...arguments),this.item=new kl,this.series=new yS,this.text=new u1}};A([O(Ye)],bm.prototype,"item",2);A([O(Ye)],bm.prototype,"series",2);A([O(Ye)],bm.prototype,"text",2);var yr=class extends yt{constructor(){super(...arguments),this.visible=!0,this.focusPriority=1/0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlight=new hD,this.highlightStyle=new bm}};A([O(Fe,{optional:!0})],yr.prototype,"id",2);A([O(nt)],yr.prototype,"visible",2);A([O(XN,{optional:!0})],yr.prototype,"focusPriority",2);A([O(nt)],yr.prototype,"showInLegend",2);A([O(Fe)],yr.prototype,"cursor",2);A([O(JC)],yr.prototype,"nodeClickRange",2);A([O(Ye)],yr.prototype,"highlight",2);A([O(Ye)],yr.prototype,"highlightStyle",2);var Gh={x:["xKey"],y:["yKey"]},zh={x:["xName"],y:["yName"]},dD=class extends xm{constructor(e,t,i,s){super(e,t,i,s),this.xKey=s.properties.xKey,this.yKey=s.properties.yKey}},Nl=class extends yr{constructor(){super(...arguments),this.pickOutsideVisibleMinorAxis=!1}};A([O(Fe,{optional:!0})],Nl.prototype,"legendItemName",2);A([O(nt,{optional:!0})],Nl.prototype,"pickOutsideVisibleMinorAxis",2);var dC=100,ou=class extends uD{constructor({pathsPerSeries:e=["path"],hasMarkers:t=!1,hasHighlightedLabels:i=!1,pathsZIndexSubOrderOffset:s=[],datumSelectionGarbageCollection:n=!0,markerSelectionGarbageCollection:r=!0,animationAlwaysUpdateSelections:o=!1,animationResetFns:a,directionKeys:l,directionNames:c,...p}){if(super({directionKeys:l,directionNames:c,canHaveAxes:!0,...p}),this.NodeEvent=dD,this.dataNodeGroup=this.contentGroup.appendChild(new lt({name:`${this.id}-series-dataNodes`,zIndex:0})),this.markerGroup=this.contentGroup.appendChild(new lt({name:`${this.id}-series-markers`,zIndex:1})),this.labelGroup=this.contentGroup.appendChild(new yn({name:`${this.id}-series-labels`})),this.labelSelection=Ji.select(this.labelGroup,gs),this.highlightSelection=Ji.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=Ji.select(this.highlightLabel,gs),this.annotationSelections=new Set,this.minRectsCache={dirtyNodeData:!0},this.debug=ci.create(),!l||!c)throw new Error(`Unable to initialise series type ${this.type}`);this.opts={pathsPerSeries:e,hasMarkers:t,hasHighlightedLabels:i,pathsZIndexSubOrderOffset:s,directionKeys:l,directionNames:c,animationResetFns:a,animationAlwaysUpdateSelections:o,datumSelectionGarbageCollection:n,markerSelectionGarbageCollection:r},this.paths=e.map(g=>new Rn({name:`${this.id}-${g}`})),this.datumSelection=Ji.select(this.dataNodeGroup,()=>this.nodeFactory(),n),this.markerSelection=Ji.select(this.markerGroup,()=>this.markerFactory(),r),this.animationState=new Cm("empty",{empty:{update:{target:"ready",action:g=>this.animateEmptyUpdateReady(g)},reset:"empty",skip:"ready",disable:"disabled"},ready:{updateData:"waiting",clear:"clearing",highlight:g=>this.animateReadyHighlight(g),highlightMarkers:g=>this.animateReadyHighlightMarkers(g),resize:g=>this.animateReadyResize(g),reset:"empty",skip:"ready",disable:"disabled"},waiting:{update:{target:"ready",action:g=>{this.ctx.animationManager.isSkipped()?this.resetAllAnimation(g):this.animateWaitingUpdateReady(g)}},reset:"empty",skip:"ready",disable:"disabled"},disabled:{update:g=>this.resetAllAnimation(g),reset:"empty"},clearing:{update:{target:"empty",action:g=>this.animateClearingUpdateEmpty(g)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData}getNodeData(){var e;return(e=this.contextNodeData)==null?void 0:e.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),this.attachPaths(this.paths,t,i)}detachSeries(e,t,i){super.detachSeries(e,t,i),this.detachPaths(this.paths,t,i)}attachPaths(e,t,i){for(const s of e)this.contentGroup.appendChild(s)}detachPaths(e,t,i){for(const s of e)this.contentGroup.removeChild(s)}renderToOffscreenCanvas(){const e=this.getNodeData();return e!=null&&e.length>dC}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"?this.animationState.transition("skip"):e==="disabled"&&this.animationState.transition("disable")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",e=>this.onLegendItemClick(e)),this.ctx.chartEventManager.addListener("legend-item-double-click",e=>this.onLegendItemDoubleClick(e)))}destroy(){super.destroy(),this._contextNodeData=void 0}update({seriesRect:e}){var l,c;const{visible:t,_contextNodeData:i}=this,n=((c=(l=this.ctx.highlightManager)==null?void 0:l.getActiveHighlight())==null?void 0:c.series)===this,r=this.checkResize(e),o=this.updateHighlightSelection(n);this.updateSelections(t),this.updateNodes(o,n,t);const a=this.getAnimationData(e,i);a&&(r&&this.animationState.transition("resize",a),this.animationState.transition("update",a))}updateSelections(e){var t;const i=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if(!(!e&&i)&&!(!this.nodeDataRefresh&&!this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this.markQuadtreeDirty(),this._contextNodeData=this.createNodeData();const s=this.isProcessedDataAnimatable();this._contextNodeData&&((t=this._contextNodeData).animationValid??(t.animationValid=s)),this.minRectsCache.dirtyNodeData=!0;const{dataModel:n,processedData:r}=this;n!==void 0&&r!==void 0&&this.dispatch("data-update",{dataModel:n,processedData:r})}this.updateSeriesSelections()}}updateSeriesSelections(e){const{datumSelection:t,labelSelection:i,markerSelection:s,paths:n}=this,r=this._contextNodeData;if(!r)return;const{nodeData:o,labelData:a,itemId:l}=r;this.updatePaths({seriesHighlighted:e,itemId:l,contextData:r,paths:n}),this.datumSelection=this.updateDatumSelection({nodeData:o,datumSelection:t}),this.labelSelection=this.updateLabelSelection({labelData:a,labelSelection:i})??i,this.opts.hasMarkers&&(this.markerSelection=this.updateMarkerSelection({nodeData:o,markerSelection:s}))}markerFactory(){const e=Xr();return new e}updateNodes(e,t,i){const{highlightSelection:s,highlightLabelSelection:n,opts:{hasMarkers:r,hasHighlightedLabels:o}}=this,a=!this.ctx.animationManager.isSkipped(),l=this.visible&&this._contextNodeData!=null&&i;this.contentGroup.visible=a||l,this.highlightGroup.visible=(a||l)&&t;const c=this.getOpacity();r?(this.updateMarkerNodes({markerSelection:s,isHighlight:!0}),this.animationState.transition("highlightMarkers",s)):(this.updateDatumNodes({datumSelection:s,isHighlight:!0}),this.animationState.transition("highlight",s)),o&&this.updateLabelNodes({labelSelection:n});const{dataNodeGroup:p,markerGroup:g,datumSelection:f,labelSelection:y,markerSelection:C,paths:x,labelGroup:M}=this,{itemId:b}=this.contextNodeData??{};p.opacity=c,p.visible=a||l,M.visible=l,r&&(g.opacity=c,g.visible=l),M&&(M.opacity=c),this.updatePathNodes({seriesHighlighted:t,itemId:b,paths:x,opacity:c,visible:l,animationEnabled:a}),p.visible&&(this.updateDatumNodes({datumSelection:f,highlightedItems:e,isHighlight:!1}),this.usesPlacedLabels||this.updateLabelNodes({labelSelection:y}),r&&this.updateMarkerNodes({markerSelection:C,isHighlight:!1}))}getHighlightLabelData(e,t){const i=e.filter(s=>s.datum===t.datum&&s.itemId===t.itemId);return i.length===0?void 0:i}getHighlightData(e,t){return t?[t]:void 0}updateHighlightSelection(e){var l;const{highlightSelection:t,highlightLabelSelection:i,_contextNodeData:s}=this;if(!s)return;const n=(l=this.ctx.highlightManager)==null?void 0:l.getActiveHighlight(),r=e&&(n!=null&&n.datum)?n:void 0;let o,a;if(r!=null){const c=this.isLabelEnabled(),{labelData:p,nodeData:g}=s;a=this.getHighlightData(g,r),o=c?this.getHighlightLabelData(p,r):void 0}return this.highlightSelection=this.updateHighlightSelectionItem({items:a,highlightSelection:t}),this.highlightLabelSelection=this.updateHighlightSelectionLabel({items:o,highlightLabelSelection:i}),a}markQuadtreeDirty(){this.quadtree=void 0}*datumNodesIter(){for(const{node:e}of this.datumSelection)e.datum.missing!==!0&&(yield e)}getQuadTree(){if(this.quadtree===void 0){const{width:e,height:t}=this.ctx.scene.canvas,i=new Ue(0,0,e,t);this.quadtree=new aJ(100,10,i),this.initQuadTree(this.quadtree)}return this.quadtree}initQuadTree(e){}pickNodeExactShape(e){const t=super.pickNodeExactShape(e);if(t)return t;const{x:i,y:s}=e,{opts:{hasMarkers:n}}=this;let r;const{dataNodeGroup:o,markerGroup:a}=this;if(r=o.pickNode(i,s),!r&&n&&(r=a==null?void 0:a.pickNode(i,s)),r&&r.datum.missing!==!0)return{datum:r.datum,distance:0};for(const l of this.moduleMap.modules()){const{datum:c}=l.pickNodeExact(e)??{};if(c!=null&&(c==null?void 0:c.missing)!==!0)return{datum:c,distance:0}}}pickNodeClosestDatum(e){var p;const{x:t,y:i}=e,{axes:s,_contextNodeData:n}=this;if(!n)return;const r=s.x,o=s.y,a={x:t,y:i};let l=1/0,c;for(const g of n.nodeData){const{point:{x:f=NaN,y=NaN}={}}=g;if(isNaN(f)||isNaN(y)||!((r==null?void 0:r.inRange(f))&&(o==null?void 0:o.inRange(y))))continue;const x=Math.max((a.x-f)**2+(a.y-y)**2,0);x<l&&(l=x,c=g)}for(const g of this.moduleMap.modules()){const f=g.pickNodeNearest(e);if(f!==void 0&&f.distanceSquared<l){l=f.distanceSquared,c=f.datum;break}}if(c){const g=Math.max(Math.sqrt(l)-(((p=c.point)==null?void 0:p.size)??0),0);return{datum:c,distance:g}}}pickNodeMainAxisFirst(e,t){var C;const{x:i,y:s}=e,{axes:n,_contextNodeData:r}=this,{pickOutsideVisibleMinorAxis:o}=this.properties;if(!r)return;const a=n.x,l=n.y,c=[a,l].filter(Dp.is).map(x=>x.direction);if(t&&c.length===0)return;const[p="x"]=c,g=[i,s];p!=="x"&&g.reverse();const f=[1/0,1/0];let y;for(const x of r.nodeData){const{x:M=NaN,y:b=NaN}=x.point??x.midPoint??{};if(isNaN(M)||isNaN(b)||x.missing===!0)continue;const R=[a==null?void 0:a.inRange(M),l==null?void 0:l.inRange(b)];if(p!=="x"&&R.reverse(),!R[0]||!o&&!R[1])continue;const I=[M,b];p!=="x"&&I.reverse();let P=!0;for(let k=0;k<I.length;k++){const _=Math.abs(I[k]-g[k]);if(_>f[k]){P=!1;break}else _<f[k]&&(f[k]=_,f.fill(1/0,k+1,f.length))}P&&(y=x)}if(y){let x=Math.max(f[0]**2+f[1]**2-(((C=y.point)==null?void 0:C.size)??0),0);for(const M of this.moduleMap.modules()){const b=M.pickNodeMainAxisFirst(e);if(b!==void 0&&b.distanceSquared<x){y=b.datum,x=b.distanceSquared;break}}return{datum:y,distance:Math.sqrt(x)}}}isPathOrSelectionDirty(){return!1}shouldFlipXY(){return!1}getMinRects(e,t){const{dirtyNodeData:i,sizeCache:s,minRect:n,minVisibleRect:r}=this.minRectsCache,o=JSON.stringify({width:e,height:t});if(!(o!==s)&&!i&&n&&r)return{minRect:n,minVisibleRect:r};const l=this.computeMinRects(e,t);return this.minRectsCache={dirtyNodeData:!1,sizeCache:o,minRect:l==null?void 0:l.minRect,minVisibleRect:l==null?void 0:l.minVisibleRect},l}computeMinRects(e,t){const i=this._contextNodeData;if(!(i!=null&&i.nodeData.length))return;const{nodeData:s}=i,n=Array(s.length),r=Array(s.length);for(const[R,{midPoint:I}]of s.entries())n[R]=(I==null?void 0:I.x)??0,r[R]=(I==null?void 0:I.y)??0;n.sort((R,I)=>R-I),r.sort((R,I)=>R-I);let o,a,l,c,p=0,g=0;for(let R=1;R<s.length;R++)n[R]>=0&&(o??(o=R)),n[R]>e&&(a??(a=R)),r[R]>=0&&(l??(l=R)),r[R]>t&&(c??(c=R)),p=Math.max(p,n[R]-n[R-1]),g=Math.max(g,r[R]-r[R-1]);a??(a=s.length),c??(c=s.length);const f=o!=null&&a!=null?n.slice(o,a):[],y=l!=null&&c!=null?r.slice(l,c):[];let C=0,x=0;for(let R=1;R<Math.max(f.length,y.length);R++){const I=f[R],P=f[R-1],k=y[R],_=y[R-1];I!=null&&P!=null&&(C=Math.max(C,I-P)),k!=null&&_!=null&&(x=Math.max(x,k-_))}const M=new Ue(0,0,p,g),b=new Ue(0,0,C,x);return{minRect:M,minVisibleRect:b}}updateHighlightSelectionItem(e){const{opts:{hasMarkers:t}}=this,{items:i,highlightSelection:s}=e,n=i??[];if(t){const r=s;return this.updateMarkerSelection({nodeData:n,markerSelection:r})}else return this.updateDatumSelection({nodeData:n,datumSelection:s})}updateHighlightSelectionLabel(e){return this.updateLabelSelection({labelData:e.items??[],labelSelection:e.highlightLabelSelection})}updateDatumSelection(e){return e.datumSelection}updateDatumNodes(e){}updateMarkerSelection(e){return e.markerSelection}updateMarkerNodes(e){}updatePaths(e){e.paths.forEach(t=>t.visible=!1)}updatePathNodes(e){const{paths:t,opacity:i,visible:s}=e;for(const n of t)n.opacity=i,n.visible=s}resetPathAnimation(e){var i;const{path:t}=((i=this.opts)==null?void 0:i.animationResetFns)??{};t&&e.paths.forEach(s=>{ss([s],t)})}resetDatumAnimation(e){var i;const{datum:t}=((i=this.opts)==null?void 0:i.animationResetFns)??{};t&&ss([e.datumSelection],t)}resetLabelAnimation(e){var i;const{label:t}=((i=this.opts)==null?void 0:i.animationResetFns)??{};t&&ss([e.labelSelection],t)}resetMarkerAnimation(e){var i;const{marker:t}=((i=this.opts)==null?void 0:i.animationResetFns)??{};t&&this.opts.hasMarkers&&ss([e.markerSelection],t)}resetAllAnimation(e){var t;this.ctx.animationManager.stopByAnimationGroupId(this.id),this.resetPathAnimation(e),this.resetDatumAnimation(e),this.resetLabelAnimation(e),this.resetMarkerAnimation(e),((t=e.contextData)==null?void 0:t.animationValid)===!1&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){var i;const{datum:t}=((i=this.opts)==null?void 0:i.animationResetFns)??{};t&&ss([e],t)}animateReadyHighlightMarkers(e){var i;const{marker:t}=((i=this.opts)==null?void 0:i.animationResetFns)??{};t&&ss([e],t)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}getAnimationData(e,t){const{_contextNodeData:i}=this;return i?{datumSelection:this.datumSelection,markerSelection:this.markerSelection,labelSelection:this.labelSelection,annotationSelections:[...this.annotationSelections],contextData:i,previousContextData:t,paths:this.paths,seriesRect:e}:void 0}updateLabelSelection(e){return e.labelSelection}getScaling(e){if(e instanceof xR){const{range:t,domain:i}=e;return{type:"log",convert:s=>e.convert(s),domain:[i[0],i[1]],range:[t[0],t[1]]}}else if(e instanceof hi){const{range:t}=e,i=e.getDomain();return{type:"continuous",domain:[i[0],i[1]],range:[t[0],t[1]]}}else if(e instanceof iu){const{domain:t}=e;return{type:"category",domain:t,inset:e.inset,step:e.step}}}calculateScaling(){const e={};for(const t of Object.values(CR)){const i=this.axes[t];if(!i)continue;const s=this.getScaling(i.scale);s!=null&&(e[t]=s)}return e}},hJ=["top","right","bottom","left"],CS=class h1 extends ru{constructor(t,i){super(t,i),this.paired=!0,this.firstSeriesTranslation=!0,this.lastUpdateClipRect=void 0}onAxisChange(t,i){super.onAxisChange(t,i),this.ctx!=null&&this.ctx.zoomManager.updateAxes(t)}destroySeries(t){super.destroySeries(t),this.firstSeriesTranslation=!0}getChartType(){return"cartesian"}setRootClipRects(t){const{seriesRoot:i,annotationRoot:s}=this;i.setClipRect(t),s.setClipRect(t)}performLayout(t){const{firstSeriesTranslation:i,seriesRoot:s,annotationRoot:n}=this,{clipSeries:r,seriesRect:o,visible:a}=this.updateAxes(t.layoutBox);this.seriesRoot.visible=a,this.seriesRect=o,this.animationRect=t.layoutBox;const{x:l,y:c}=o;if(i){for(const y of[s,n])y.translationX=Math.floor(l),y.translationY=Math.floor(c);this.firstSeriesTranslation=!1}else{const{translationX:y,translationY:C}=s;wa(this.id,"seriesRect",this.ctx.animationManager,[s,n],{translationX:y,translationY:C},{translationX:Math.floor(l),translationY:Math.floor(c)},{phase:"update"})}const p=o.clone().grow(this.seriesArea.padding),g=this.seriesArea.clip||r?p:void 0,{lastUpdateClipRect:f}=this;this.lastUpdateClipRect=g,this.ctx.animationManager.isActive()&&f!=null?this.ctx.animationManager.animate({id:this.id,groupId:"clip-rect",phase:"update",from:f,to:p,onUpdate:y=>this.setRootClipRects(y),onComplete:()=>this.setRootClipRects(g)}):this.setRootClipRects(g),this.ctx.layoutManager.emitLayoutComplete(t,{axes:this.axes.map(y=>y.getLayoutState()),series:{visible:a,rect:o,paddedRect:p,shouldFlipXY:this.shouldFlipXY()},clipSeries:r})}updateAxes(t){const{clipSeries:i,seriesRect:s,overflows:n}=this.resolveAxesLayout(t);for(const r of this.axes)r.update(),r.setCrossLinesVisible(!n),this.clipAxis(r,s,t);return{clipSeries:i,seriesRect:s,visible:!n}}resolveAxesLayout(t){let i,s,n=0;const r=10;do if(s=i??this.getDefaultState(),i=this.updateAxesPass(new Map(s.axisAreaWidths),t.clone()),n++>r){_e.warn("Max iterations reached. Unable to stabilize axes layout.");break}while(!this.isLayoutStable(i,s));return this.lastAreaWidths=i.axisAreaWidths,i}updateAxesPass(t,i){const s=new Map,n={};let r=!1,o=!1;for(const b of hJ){const R=this.seriesArea.padding[b],I=this.axes.findLast(P=>P.position===b);I?I.seriesAreaPadding=R:i.shrink(R,b)}const a=(t.get("left")??0)+(t.get("right")??0),l=(t.get("top")??0)+(t.get("bottom")??0),c=this.buildCrossLinePadding(t);i.width<=a+c.hPadding||i.height<=l+c.vPadding?r=!0:i.shrink(c);const p=i.clone().shrink(Object.fromEntries(t));for(const b of this.axes){const{position:R="left",direction:I}=b;this.sizeAxis(b,p,R);const P=this.getSyncedDomain(b),k=I==="y",_=b.calculateLayout(P,b.nice?n[I]:void 0);n[I]??(n[I]=_.primaryTickCount),o||(o=b.dataDomain.clipped||b.visibleRange[0]>0||b.visibleRange[1]<1),s.set(b.id,Math.ceil(b.thickness??(k?_.bbox.width:_.bbox.height)))}const g=Object.entries(YC(this.axes,b=>b.position??"left")),{width:f,height:y,canvas:C}=this.ctx.scene,x=new Map,M=new Map;for(const[b,R]of g){let P=b==="left"||b==="right"?y%C.pixelRatio:f%C.pixelRatio,k=0;for(const _ of R){M.set(_.id,P);const B=s.get(_.id)??0;k=Math.max(k,P+B),_.layoutConstraints.stacked&&(P+=B+h1.AxesPadding)}x.set(b,Math.ceil(k))}for(const[b,R]of g)this.positionAxes({axes:R,position:b,axisWidths:s,axisOffsets:M,axisAreaWidths:x,axisBound:i,seriesRect:p});return{clipSeries:o,seriesRect:p,axisAreaWidths:x,overflows:r}}buildCrossLinePadding(t){const i={top:0,right:0,bottom:0,left:0,hPadding:0,vPadding:0};this.axes.forEach(s=>{var n;(n=s.crossLines)==null||n.forEach(r=>{var o;(o=r.calculatePadding)==null||o.call(r,i)})});for(const[s,n=0]of Object.entries(i))i[s]=Math.max(n-(t.get(s)??0),0);return i.hPadding=i.left+i.right,i.vPadding=i.top+i.bottom,i}clampToOutsideSeriesRect(t,i,s,n){const r=s==="x"?t.x:t.y,o=s==="x"?t.width:t.height;return n===1?Math.min(i,r+o):Math.max(i,r)}getSyncedDomain(t){const i=this.modulesManager.getModule("sync");if(!(i!=null&&i.enabled))return;const s=i.getSyncedDomain(t);if(s&&t.dataDomain.domain.length){let n;const{domain:r}=t.scale;if(hi.is(t.scale)){const[o,a]=Ks(s);n=o!==r[0]||a!==r[1]}else n=!zc(s,r);n&&!this.skipSync&&i.updateSiblings()}return s}sizeAxis(t,i,s){const n=t instanceof Dp,r=s==="left"||s==="right",{width:o,height:a}=i,l=r?a:o;let c=0,p=l,{min:g,max:f}=this.ctx.zoomManager.getAxisZoom(t.id);const{width:y,unit:C,align:x}=t.layoutConstraints;C==="px"?p=c+y:p=p*y/100,x==="end"&&(c=l-(p-c),p=l),r&&(n?[g,f]=[1-f,1-g]:[c,p]=[p,c]),t.range=[c,p],t.visibleRange=[g,f],t.gridLength=r?o:a}positionAxes(t){const{axes:i,axisBound:s,axisWidths:n,axisOffsets:r,axisAreaWidths:o,seriesRect:a,position:l}=t,c=o.get(l)??0;let p="x",g="y",f=1;(l==="top"||l==="bottom")&&(p="y",g="x");let y=s[p];(l==="right"||l==="bottom")&&(f=-1,y+=p==="x"?s.width:s.height);for(const C of i){const x=o.get(g==="x"?"left":"top")??0,M=n.get(C.id)??0,b=r.get(C.id)??0;C.gridPadding=c-b-M,C.translation[g]=s[g]+x,C.translation[p]=this.clampToOutsideSeriesRect(a,y+f*(b+M),p,f)}}shouldFlipXY(){return this.series.every(t=>t instanceof ou&&t.shouldFlipXY())}getDefaultState(){const t=new Map;if(this.lastAreaWidths)for(const{position:i="left"}of this.axes){const s=this.lastAreaWidths.get(i);s!=null&&t.set(i,s)}return{axisAreaWidths:t,clipSeries:!1,overflows:!1}}isLayoutStable(t,i){if(i.overflows!==t.overflows||i.clipSeries!==t.clipSeries)return!1;for(const s of t.axisAreaWidths.keys())if(!i.axisAreaWidths.has(s))return!1;for(const[s,n]of i.axisAreaWidths.entries()){const r=t.axisAreaWidths.get(s);if((n!=null||r!=null)&&n!==r)return!1}return!0}clipAxis(t,i,s){var l,c;const n=Math.ceil(((l=t.gridLine)==null?void 0:l.width)??0),r=Math.ceil(((c=t.line)==null?void 0:c.width)??0);let{width:o,height:a}=i;switch(o+=t.direction==="x"?n:r,a+=t.direction==="y"?n:r,t.clipGrid(i.x,i.y,o,a),t.position){case"left":case"right":t.clipTickLines(s.x,i.y-n,s.width+n,i.height+n*2);break;case"top":case"bottom":t.clipTickLines(i.x-n,s.y,i.width+n*2,s.height+n);break}}};CS.className="CartesianChart";CS.type="cartesian";CS.AxesPadding=15;var dJ=CS,pf=class d1{constructor(t,i,s){this.factoryApi=i,this.licenseManager=s,this.chart=t}static isInstance(t){var i;return t instanceof d1||((i=t.constructor)==null?void 0:i.name)==="AgChartInstanceProxy"&&t.chart!=null?!0:t.chart!=null&&this.validateImplementation(t)}static validateImplementation(t){const i=["getOptions","destroy"],s=Object.keys(Object.getPrototypeOf(t)??{});return i.every(n=>s.includes(n))}async update(t){this.factoryApi.update(t,this),await this.chart.waitForUpdate()}async updateDelta(t){this.factoryApi.updateUserDelta(this,t),await this.chart.waitForUpdate()}getOptions(){const t=Us(this.chart.getOptions());for(const i of Object.keys(t))i.startsWith("_")&&delete t[i];return t}waitForUpdate(){return this.chart.waitForUpdate()}async download(t){const i=await this.prepareResizedChart(this,t);try{i.chart.download(t==null?void 0:t.fileName,t==null?void 0:t.fileFormat)}finally{i.destroy()}}async __toSVG(t){const i=await this.prepareResizedChart(this,{width:600,height:300,...t});try{return i.chart.toSVG()}finally{i.destroy()}}async getImageDataURL(t){const i=await this.prepareResizedChart(this,t);try{return i.chart.getCanvasDataURL(t==null?void 0:t.fileFormat)}finally{i.destroy()}}getState(){return this.factoryApi.caretaker.save(...this.getEnabledOriginators())}async setState(t){const i=this.getEnabledOriginators();if(!i.includes(this.chart.ctx.legendManager)){await this.setStateOriginators(t,i);return}await this.setStateOriginators(t,i.filter(s=>s!==this.chart.ctx.zoomManager)),await this.setStateOriginators(t,[this.chart.ctx.zoomManager])}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.releaseChart?(this.releaseChart(),this.chart=null):(this.chart.publicApi=void 0,this.chart.destroy())}async prepareResizedChart(t,i={}){var C,x;const{chart:s}=t,n=i.width??s.width??s.ctx.scene.canvas.width,r=i.height??s.height??s.ctx.scene.canvas.height,o=t.getState(),a=ca.hasEnterpriseModules(),l={...s.chartOptions.processedOverrides,container:document.createElement("div"),width:n,height:r},c=s.getOptions();a&&(l.animation={enabled:!1},(C=this.licenseManager)!=null&&C.isDisplayWatermark()&&(l.foreground={text:this.licenseManager.getWatermarkMessage(),image:{url:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjU4IiBoZWlnaHQ9IjQwIiB2aWV3Qm94PSIwIDAgMjU4IDQwIiBmaWxsPSJub25lIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPgo8cGF0aCBkPSJNMjUuNzc5IDI4LjY1N0gxMy4zNTlMMTEuMTczIDM0LjAxMkg1LjY3Mjk3TDE3LjE4MiA3LjA1OTk5SDIxLjk1M0wzMy40NjIgMzQuMDEySDI3Ljk2MkwyNS43NzYgMjguNjU3SDI1Ljc3OVpNMjQuMDY4IDI0LjM5N0wxOS41ODggMTMuNDM0TDE1LjEwNyAyNC4zOTdIMjQuMDY4Wk02Mi4wOTIgMTguODIzSDQ5LjgxN1YyMy4wODZINTYuNzc1QzU2LjU1NSAyNS4yMjIgNTUuNzU1IDI2LjkyNyA1NC4zNzIgMjguMjAyQzUyLjk4OSAyOS40NzYgNTEuMTY2IDMwLjExNSA0OC45MDkgMzAuMTE1QzQ3LjYyMiAzMC4xMTUgNDYuNDUgMjkuODg1IDQ1LjM5MyAyOS40MjNDNDQuMzU4MyAyOC45NzgxIDQzLjQzMjYgMjguMzEzOCA0Mi42OCAyNy40NzZDNDEuOTI3IDI2LjYzOSA0MS4zNDQgMjUuNjMxIDQwLjkzMSAyNC40NTNDNDAuNTE5IDIzLjI3NSA0MC4zMTEgMjEuOTcgNDAuMzExIDIwLjUzN0M0MC4zMTEgMTkuMTA1IDQwLjUxNiAxNy44IDQwLjkzMSAxNi42MjFDNDEuMzQ0IDE1LjQ0MyA0MS45MjcgMTQuNDM2IDQyLjY4IDEzLjU5OEM0My40Mzc2IDEyLjc1NzcgNDQuMzY5NiAxMi4wOTMyIDQ1LjQxMSAxMS42NTFDNDYuNDc4IDExLjE4OSA0Ny42NTYgMTAuOTYgNDguOTQ2IDEwLjk2QzUxLjYxMiAxMC45NiA1My42MzcgMTEuNjAyIDU1LjAyIDEyLjg4NUw1OC4zIDkuNjA0OTlDNTUuODE3IDcuNjY5OTkgNTIuNjc2IDYuNjk5OTkgNDguODcyIDYuNjk5OTlDNDYuNzYgNi42OTk5OSA0NC44NTMgNy4wMzQ5OSA0My4xNTQgNy43MDA5OUM0MS40NTUgOC4zNjc5OSAzOS45OTggOS4zMDM5OSAzOC43ODMgMTAuNTA0QzM3LjU2NyAxMS43MDcgMzYuNjM0IDEzLjE1OCAzNS45NzcgMTQuODU3QzM1LjMxOSAxNi41NTYgMzQuOTk0IDE4LjQ1MSAzNC45OTQgMjAuNTRDMzQuOTk0IDIyLjYzIDM1LjMyOSAyNC40OTQgMzUuOTk1IDI2LjIwNUMzNi42NjIgMjcuOTE2IDM3LjYwNSAyOS4zNzQgMzguODE3IDMwLjU3N0M0MC4wMzIgMzEuNzggNDEuNDg2IDMyLjcxMyA0My4xODggMzMuMzgzQzQ0Ljg4OCAzNC4wNDkgNDYuNzgyIDM0LjM4NCA0OC44NzIgMzQuMzg0QzUwLjk2MSAzNC4zODQgNTIuNzUgMzQuMDQ5IDU0LjM5IDMzLjM4M0M1Ni4wMzEgMzIuNzE2IDU3LjQyNiAzMS43OCA1OC41NzkgMzAuNTc3QzU5LjczMyAyOS4zNzQgNjAuNjE5IDI3LjkxNiA2MS4yMzkgMjYuMjA1QzYxLjg2IDI0LjQ5NCA2Mi4xNyAyMi42MDUgNjIuMTcgMjAuNTRDNjIuMTY5NiAxOS45Njg4IDYyLjE0NDUgMTkuMzk4IDYyLjA5NSAxOC44MjlMNjIuMDkyIDE4LjgyM1pNMTUxLjgxIDE2Ljk4MUMxNTMuNDEgMTQuNjA5IDE1Ny40MTkgMTQuMzU4IDE1OS4wMjIgMTQuMzU4VjE4LjkxQzE1Ni45NTcgMTguOTEgMTU0Ljk4NSAxOC45OTYgMTUzLjc1NyAxOS44OTJDMTUyLjUyOSAyMC43OTIgMTUxLjkxOSAyMS45ODIgMTUxLjkxOSAyMy40NjRWMzMuOTlIMTQ2Ljk2NFYxNC4zNThIMTUxLjczNkwxNTEuODEgMTYuOTgxWk0xNDMuMDExIDE0LjM2MVYzNC4wMzFIMTM4LjI0TDEzOC4xMzEgMzEuMDQ1QzEzNy40NjYgMzIuMDc2IDEzNi41NTEgMzIuOTIxOSAxMzUuNDcxIDMzLjUwNEMxMzQuMzc2IDM0LjA5OSAxMzMuMDY4IDM0LjM5NiAxMzEuNTM2IDM0LjM5NkMxMzAuMiAzNC4zOTYgMTI4Ljk2MyAzNC4xNTIgMTI3LjgyMiAzMy42NjhDMTI2LjcgMzMuMTk2NCAxMjUuNjg5IDMyLjQ5NSAxMjQuODU1IDMxLjYwOUMxMjQuMDE4IDMwLjcyMiAxMjMuMzU0IDI5LjY2MiAxMjIuODcxIDI4LjQyMkMxMjIuMzg0IDI3LjE4NSAxMjIuMTQyIDI1LjgxMSAxMjIuMTQyIDI0LjMwNEMxMjIuMTQyIDIyLjc5OCAxMjIuMzg0IDIxLjM3OCAxMjIuODcxIDIwLjExNkMxMjMuMzU3IDE4Ljg1NCAxMjQuMDE4IDE3Ljc3MiAxMjQuODU1IDE2Ljg3M0MxMjUuNjg4IDE1Ljk3NjQgMTI2LjY5OCAxNS4yNjM2IDEyNy44MjIgMTQuNzhDMTI4Ljk2MyAxNC4yODEgMTMwLjIwMyAxNC4wMzMgMTMxLjUzNiAxNC4wMzNDMTMzLjA0MyAxNC4wMzMgMTM0LjMzIDE0LjMxOCAxMzUuMzk3IDE0Ljg4OEMxMzYuNDYyIDE1LjQ1ODkgMTM3LjM3NSAxNi4yNzggMTM4LjA1NyAxNy4yNzZWMTQuMzYxSDE0My4wMTFaTTEzMi42MzEgMzAuMTMzQzEzNC4yNTYgMzAuMTMzIDEzNS41NjcgMjkuNTk0IDEzNi41NjUgMjguNTEyQzEzNy41NjEgMjcuNDMgMTM4LjA2IDI1Ljk5MSAxMzguMDYgMjQuMTk2QzEzOC4wNiAyMi40MDEgMTM3LjU2MSAyMC45OSAxMzYuNTY1IDE5Ljg5OUMxMzUuNTcgMTguODA3IDEzNC4yNTkgMTguMjU4IDEzMi42MzEgMTguMjU4QzEzMS4wMDMgMTguMjU4IDEyOS43MjkgMTguODA0IDEyOC43MzQgMTkuODk5QzEyNy43MzggMjAuOTkzIDEyNy4yMzkgMjIuNDM4IDEyNy4yMzkgMjQuMjMzQzEyNy4yMzkgMjYuMDI4IDEyNy43MzUgMjcuNDMzIDEyOC43MzQgMjguNTE1QzEyOS43MjkgMjkuNTk0IDEzMS4wMjggMzAuMTM2IDEzMi42MzEgMzAuMTM2VjMwLjEzM1pNOTMuNjk4IDI3Ljg3NkM5My41Nzk1IDI4LjAwMjUgOTMuNDU2NCAyOC4xMjQ2IDkzLjMyOSAyOC4yNDJDOTEuOTQ3IDI5LjUxNiA5MC4xMjMgMzAuMTU1IDg3Ljg2NiAzMC4xNTVDODYuNTggMzAuMTU1IDg1LjQwOCAyOS45MjYgODQuMzUgMjkuNDY0QzgzLjMxNTUgMjkuMDE4OSA4Mi4zODk4IDI4LjM1NDYgODEuNjM3IDI3LjUxN0M4MC44ODQgMjYuNjc5IDgwLjMwMSAyNS42NzIgNzkuODg5IDI0LjQ5NEM3OS40NzYgMjMuMzE1IDc5LjI2OSAyMi4wMSA3OS4yNjkgMjAuNTc4Qzc5LjI2OSAxOS4xNDUgNzkuNDczIDE3Ljg0IDc5Ljg4OSAxNi42NjJDODAuMzAxIDE1LjQ4NCA4MC44ODQgMTQuNDc2IDgxLjYzNyAxMy42MzlDODIuMzk0OSAxMi43OTg3IDgzLjMyNzMgMTIuMTM0MiA4NC4zNjkgMTEuNjkyQzg1LjQzNiAxMS4yMyA4Ni42MTQgMTEgODcuOTAzIDExQzkwLjU3IDExIDkyLjU5NSAxMS42NDIgOTMuOTc3IDEyLjkyNkw5Ny4yNTggOS42NDQ5OUM5NC43NzQgNy43MTA5OSA5MS42MzMgNi43Mzk5OSA4Ny44MjkgNi43Mzk5OUM4NS43MTggNi43Mzk5OSA4My44MTEgNy4wNzQ5OSA4Mi4xMTIgNy43NDE5OUM4MC40MTMgOC40MDc5OSA3OC45NTYgOS4zNDQ5OSA3Ny43NCAxMC41NDVDNzYuNTI1IDExLjc0NyA3NS41OTIgMTMuMTk5IDc0LjkzNCAxNC44OThDNzQuMjc3IDE2LjU5NyA3My45NTEgMTguNDkxIDczLjk1MSAyMC41ODFDNzMuOTUxIDIyLjY3IDc0LjI4NiAyNC41MzQgNzQuOTUzIDI2LjI0NUM3NS42MTkgMjcuOTU3IDc2LjU2MiAyOS40MTQgNzcuNzc0IDMwLjYxN0M3OC45OSAzMS44MiA4MC40NDQgMzIuNzUzIDgyLjE0NiAzMy40MjNDODMuODQ1IDM0LjA5IDg1LjczOSAzNC40MjQgODcuODI5IDM0LjQyNEM4OS45MTkgMzQuNDI0IDkxLjcwOCAzNC4wOSA5My4zNDggMzMuNDIzQzk0LjcxOCAzMi44NjUgOTUuOTE4IDMyLjEyMSA5Ni45NDggMzEuMTkxQzk3LjE0OSAzMS4wMDggOTcuMzQ4IDMwLjgxNSA5Ny41MzcgMzAuNjJMOTMuNzAxIDI3Ljg4NUw5My42OTggMjcuODc2Wk0xMTAuODAyIDE0LjAxNUMxMDkuMTk5IDE0LjAxNSAxMDYuODM2IDE0LjQ3MSAxMDUuNjExIDE2LjE1OEwxMDUuNTM3IDYuMDE1OTlIMTAwLjc2NVYzMy45MzlIMTA1LjcyVjIyLjY0MUMxMDUuNzcxIDIxLjQ2MDcgMTA2LjI4OCAyMC4zNDg4IDEwNy4xNTcgMTkuNTQ4OUMxMDguMDI3IDE4Ljc0OTEgMTA5LjE3OCAxOC4zMjY2IDExMC4zNTggMTguMzc0QzExMy4zOTcgMTguMzc0IDExNC4yNjggMjEuMTU5IDExNC4yNjggMjIuNjQxVjMzLjkzOUgxMTkuMjIzVjIxLjA1OUMxMTkuMjIzIDIxLjA1OSAxMTkuMTQyIDE0LjAxNSAxMTAuODAyIDE0LjAxNVpNMTczLjc2MyAxNC4zNThIMTY5Ljk5OVY4LjcxNDk5SDE2NS4wNDhWMTQuMzU4SDE2MS4yODRWMTguOTE2SDE2NS4wNDhWMzQuMDAzSDE2OS45OTlWMTguOTE2SDE3My43NjNWMTQuMzU4Wk0xOTAuNzg3IDI1LjI2MkMxOTAuMTI5IDI0LjUwMTQgMTg5LjMwNyAyMy44OTk0IDE4OC4zODQgMjMuNTAxQzE4Ny40ODggMjMuMTE3IDE4Ni4zMzEgMjIuNzMyIDE4NC45NDggMjIuMzY0QzE4NC4xNjUgMjIuMTQzOSAxODMuMzkgMjEuODk3OCAxODIuNjIzIDIxLjYyNkMxODIuMTYzIDIxLjQ2MjEgMTgxLjc0MSAyMS4yMDY2IDE4MS4zODMgMjAuODc1QzE4MS4yMzUgMjAuNzQyMSAxODEuMTE4IDIwLjU3ODkgMTgxLjAzOSAyMC4zOTY0QzE4MC45NjEgMjAuMjE0IDE4MC45MjIgMjAuMDE2NiAxODAuOTI3IDE5LjgxOEMxODAuOTI3IDE5LjI3MiAxODEuMTU2IDE4Ljg0NCAxODEuNjI1IDE4LjUxQzE4Mi4xMjEgMTguMTU2IDE4Mi44NjIgMTcuOTc2IDE4My44MjYgMTcuOTc2QzE4NC43OSAxNy45NzYgMTg1LjU4NyAxOC4yMDkgMTg2LjE0OCAxOC42NjhDMTg2LjcwNiAxOS4xMjQgMTg3LjAwNyAxOS43MjUgMTg3LjA3MiAyMC41TDE4Ny4wOTQgMjAuNzgySDE5MS42MzNMMTkxLjYxNyAyMC40NkMxOTEuNTIxIDE4LjQ4NSAxOTAuNzcxIDE2LjkgMTg5LjM4NSAxNS43NUMxODguMDEyIDE0LjYxMiAxODYuMTg1IDE0LjAzMyAxODMuOTYyIDE0LjAzM0MxODIuNDc3IDE0LjAzMyAxODEuMTQxIDE0LjI4NyAxNzkuOTk0IDE0Ljc4NkMxNzguODMxIDE1LjI5MSAxNzcuOTI2IDE1Ljk5NSAxNzcuMjk2IDE2Ljg4MkMxNzYuNjczIDE3Ljc0NTUgMTc2LjMzOCAxOC43ODQgMTc2LjM0MSAxOS44NDlDMTc2LjM0MSAyMS4xNjcgMTc2LjY5OCAyMi4yNDkgMTc3LjM5OSAyMy4wNjRDMTc4LjA2IDIzLjg0MzIgMTc4Ljg5OCAyNC40NTM0IDE3OS44NDIgMjQuODQ0QzE4MC43NDQgMjUuMjE2IDE4MS45MjggMjUuNjA3IDE4My4zNjEgMjZDMTg0LjgwNiAyNi40MSAxODUuODcyIDI2Ljc4NSAxODYuNTMgMjcuMTIzQzE4Ny4xIDI3LjQxNCAxODcuMzc5IDI3Ljg0NSAxODcuMzc5IDI4LjQ0NEMxODcuMzc5IDI5LjA0MiAxODcuMTIyIDI5LjQ2NyAxODYuNTk1IDI5LjgzOUMxODYuMDQzIDMwLjIyNiAxODUuMjM3IDMwLjQyNSAxODQuMjAxIDMwLjQyNUMxODMuMTY2IDMwLjQyNSAxODIuMzk0IDMwLjE3NCAxODEuNzQ5IDI5LjY3NEMxODEuMTEzIDI5LjE4MSAxODAuNzcyIDI4LjU4OSAxODAuNzEgMjcuODY0TDE4MC42ODUgMjcuNTgySDE3Ni4wMTNMMTc2LjAyNSAyNy45MDFDMTc2LjA2NyAyOS4wOTU1IDE3Ni40NzIgMzAuMjQ4NyAxNzcuMTg4IDMxLjIwNkMxNzcuOTA3IDMyLjE4IDE3OC44OTMgMzIuOTU4IDE4MC4xMTggMzMuNTE5QzE4MS4zMzYgMzQuMDc3IDE4Mi43MzIgMzQuMzYyIDE4NC4yNjYgMzQuMzYyQzE4NS44MDEgMzQuMzYyIDE4Ny4xMDkgMzQuMTA4IDE4OC4yMzggMzMuNjA5QzE4OS4zNzYgMzMuMTA0IDE5MC4yNzIgMzIuMzk0IDE5MC45MDEgMzEuNDk0QzE5MS41MzQgMzAuNTkyIDE5MS44NTMgMjkuNTU0IDE5MS44NTMgMjguNDAzQzE5MS44MjggMjcuMTEgMTkxLjQ2NiAyNi4wNTMgMTkwLjc3NyAyNS4yNjJIMTkwLjc4N1oiIGZpbGw9IiM5QjlCOUIiLz4KPHBhdGggZD0iTTI0MS45ODIgMjUuNjU4MlYxNy43MTE3SDIyOC40NDFMMjIwLjQ5NCAyNS42NTgySDI0MS45ODJaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNTcuMjM5IDUuOTUwODFIMjQwLjI2NUwyMzIuMjU1IDEzLjg5NzNIMjU3LjIzOVY1Ljk1MDgxWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjEyLjYxMSAzMy42MDQ4TDIxNi42OCAyOS41MzYxSDIzMC40MTJWMzcuNDgyN0gyMTIuNjExVjMzLjYwNDhaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yMTUuNTk5IDIxLjc4MDNIMjI0LjM3MkwyMzIuMzgyIDEzLjgzMzdIMjE1LjU5OVYyMS43ODAzWiIgZmlsbD0iIzlCOUI5QiIvPgo8cGF0aCBkPSJNMjA2IDMzLjYwNDdIMjEyLjYxMUwyMjAuNDk0IDI1LjY1ODJIMjA2VjMzLjYwNDdaIiBmaWxsPSIjOUI5QjlCIi8+CjxwYXRoIGQ9Ik0yNDAuMjY1IDUuOTUwODFMMjM2LjE5NyAxMC4wMTk0SDIxMC4yNTlWMi4wNzI4OEgyNDAuMjY1VjUuOTUwODFaIiBmaWxsPSIjOUI5QjlCIi8+Cjwvc3ZnPgo=",width:170,height:25,right:25,bottom:50,opacity:.7}}));const p={...s.chartOptions.specialOverrides},g={...s.chartOptions.optionMetadata};i.width!=null&&i.height!=null&&(p.overrideDevicePixelRatio=1);const f=this.factoryApi.create(c,l,p,g);await f.setState(o),f.chart.ctx.zoomManager.updateZoom("chartProxy",s.ctx.zoomManager.getZoom()),f.chart.ctx.legendManager.clearData(),f.chart.ctx.legendManager.update(s.ctx.legendManager.getData()),s.series.forEach((M,b)=>{M.visible||(f.chart.series[b].visible=!1)});const y=[];for(const M of s.modulesManager.legends())y.push(((x=M.legend.pagination)==null?void 0:x.currentPage)??0);for(const M of f.chart.modulesManager.legends()){const b=y.shift()??0;M.legend.pagination&&M.legend.pagination.setPage(b)}return f.chart.update(0,{forceNodeDataRefresh:!0}),await f.waitForUpdate(),f}getEnabledOriginators(){var c,p,g;const{chartOptions:{processedOptions:t,optionMetadata:i},ctx:{annotationManager:s,chartTypeOriginator:n,zoomManager:r,legendManager:o}}=this.chart,a=[];return"annotations"in t&&((c=t.annotations)!=null&&c.enabled)&&a.push(s),i.presetType==="price-volume"&&a.push(n),((p=t.navigator)!=null&&p.enabled||(g=t.zoom)!=null&&g.enabled)&&a.push(r),"legend"in this.chart&&a.push(o),a}async setStateOriginators(t,i){this.factoryApi.caretaker.restore(t,...i),this.chart.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),await this.chart.waitForUpdate()}};pf.chartInstances=new WeakMap;A([vr({oldValue(e){e.destroyed||(e.publicApi=void 0),pf.chartInstances.delete(e)},newValue(e){e&&(e.publicApi=this,pf.chartInstances.set(e,this))}})],pf.prototype,"chart",2);var SA=pf,pD=class extends oS{constructor(e){super(),this.ctx=e,this.localeText=void 0}};A([Oh(e=>{e.ctx.localeManager.setLocaleText(e.localeText)}),O(ZN,{optional:!0})],pD.prototype,"localeText",2);A([Oh(e=>{e.ctx.localeManager.setLocaleTextFormatter(e.getLocaleText)}),O(Mn,{optional:!0})],pD.prototype,"getLocaleText",2);var pJ={type:"root",optionsKey:"locale",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new pD(e)};function gJ(e,t=1/0){switch(typeof e){case"undefined":return"undefined";case"number":if(isNaN(e))return"NaN";if(e===1/0)return"Infinity";if(e===-1/0)return"-Infinity";default:return e=JSON.stringify(e),e.length>t?`${e.slice(0,t)}... (+${e.length-t} characters)`:e}}function fJ(e){let t=1;for(let i=0;i<e.length;i++)e.charCodeAt(i)===10&&t++;return t}var Hg=new WeakMap;function pC(e,t){var s,n,r;const i=JSON.stringify(e,null,0);return Hg.has(t)||Hg.set(t,new Map),(s=Hg.get(t))!=null&&s.has(i)||(n=Hg.get(t))==null||n.set(i,t(e)),(r=Hg.get(t))==null?void 0:r.get(i)}function pn(e){const t=new Map,i=(...r)=>r.map(o=>typeof o=="object"||typeof o=="symbol"?o:(t.has(o)||t.set(o,{v:o}),t.get(o))),s={},n=new WeakMap;return(...r)=>{const o=r.length===0?[s]:i(...r);let a=n;for(const p of o.slice(0,-1))a.has(p)||a.set(p,new WeakMap),a=a.get(p);const l=o.at(-1);let c=a.get(l);return c||(c=e(...r),a.set(l,c)),c}}function SS(e,t=[0,0]){for(const i of e)typeof i=="number"&&(i<0&&(t[0]+=i),i>0&&(t[1]+=i));return t}function mJ(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:s=>SS(s)}}function p1(e,t){return{id:e,type:"aggregate",matchGroupIds:t?[t]:void 0,aggregateFunction:i=>SS(i),groupAggregateFunction:(i,s=[0,0])=>(s[0]+=(i==null?void 0:i[0])??0,s[1]+=(i==null?void 0:i[1])??0,s)}}function vJ(e,t){return{id:e,matchGroupIds:[t],type:"aggregate",aggregateFunction:s=>Ic.extendDomain(s)}}function FM(e){return{id:e,type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(t,i=[0,0])=>(i[0]+=(t==null?void 0:t[0])??0,i[1]+=(t==null?void 0:t[1])??0,i)}}function g1(e,t){return{id:e,matchGroupIds:t?[t]:void 0,type:"aggregate",aggregateFunction:s=>SS(s),groupAggregateFunction:(s,n=[0,0,-1])=>(n[0]+=(s==null?void 0:s[0])??0,n[1]+=(s==null?void 0:s[1])??0,n[2]++,n),finalFunction:(s=[0,0,0])=>{const n=s[0]+s[1];return n>=0?[0,n/s[2]]:[n/s[2],0]}}}function kM(e,t,i){const s={id:e,matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(n,r=[])=>{const o=r[1]-r[0];return t.aggregateFunction(n).map(a=>a/o)}};return t.groupAggregateFunction&&(s.groupAggregateFunction=t.groupAggregateFunction),s}function f1(e){return()=>{let t=0;return i=>Kt(i)?(t+=e?Math.max(0,i):i,t):i}}function m1(){return()=>{let e=0;return t=>{if(!Kt(t))return t;const i=e;return e+=t,i}}}function v1(e){return e!=null&&sS(e)}function yJ(e){return e!=null}function y1(e){switch(e){case"number":case"log":case"ordinal-time":case"time":case"color":return v1;default:return yJ}}function C1(e){switch(e){case"number":case"log":case"time":case"color":return"range";default:return"category"}}function Ao(e,t,i={}){return{property:e,type:"key",valueType:C1(t),validation:y1(t),...i}}function It(e,t,i={}){return{property:e,type:"value",valueType:C1(t),validation:y1(t),...i}}function gD(e,t={}){const{min:i=-1/0,max:s=1/0,...n}=t;return{type:"value",property:e,valueType:"range",validation:v1,processor:()=>r=>Kt(r)?St(i,r,s):r,...n}}function Vf(e,t,i={}){const{onlyPositive:s,...n}=i;return{...It(e,t,n),processor:f1(s)}}function CJ(e,t,i={}){return{...It(e,t,i),processor:m1()}}function jc(e,t,i,s,n){return[It(e,n,s),M1(s.groupId,t,i,s.separateNegative),...s.rangeId!=null?[vJ(s.rangeId,s.groupId)]:[]]}function S1(e,t,i){return[It(e,t,i),R1(i.groupId)]}var w1={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let e=NaN;return(t=1/0,i)=>{const s=i.keys[0],n=Math.abs(s-e);return e=s,!isNaN(n)&&n>0&&n<t?n:t}}},x1={type:"reducer",property:"largestKeyInterval",initialValue:-1/0,reducer:()=>{let e=NaN;return(t=-1/0,i)=>{const s=i.keys[0],n=Math.abs(s-e);return e=s,!isNaN(n)&&n>0&&n>t?n:t}}},b1={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:e}})=>e==null?void 0:e.slice().sort((t,i)=>{for(let s=0;s<t.length;s++){const n=t[s]-i[s];if(n!==0)return n}return 0})};function SJ({normaliseTo:e,mode:t}){const i=(s,n)=>{if(n===0)return null;const r=(s??0)*e/n;return r>=0?Math.min(e,r):Math.max(-e,r)};return()=>()=>(s,n,r)=>{const o=wJ(t,s,n,r);for(const a of n){const l=s[a],c=l[r];if(c==null){l[r]=void 0;continue}l[r]=typeof c=="number"?i(c,o):c.map(p=>i(p,o))}}}function wJ(e,t,i,s){const n=[0,0];for(const r of i){const a=t[r][s];if(a==null)continue;const l=typeof a=="number"?a:Math.max(...a.map(p=>p??0)),c=l<0?0:1;e==="sum"?n[c]+=l:c===0?n[c]=Math.min(n[c],l):n[c]=Math.max(n[c],l)}return Math.max(Math.abs(n[0]),n[1])}function wS(e,t,i="sum"){return{type:"group-value-processor",matchGroupIds:e,adjust:pC({normaliseTo:t,mode:i},SJ)}}function xJ({normaliseTo:e,zeroDomain:t,rangeMin:i,rangeMax:s}){const n=e[1]-e[0],r=(o,a,l)=>{const c=e[0]+(o-a)/l*n;return l===0?t:c>=e[1]?e[1]:c<e[0]?e[0]:c};return()=>(o,a)=>{let[l,c]=o.domain.values[a];i!=null&&(l=i),s!=null&&(c=s);const p=c-l;o.domain.values[a]=[e[0],e[1]];const{rawData:g}=o,f=o.columns[a];for(let y=0;y<g.length;y+=1)f[y]=r(f[y],l,p)}}function fh(e,t,i,s,n){return{type:"property-value-processor",property:e,adjust:pC({normaliseTo:t,rangeMin:s,rangeMax:n,zeroDomain:i},xJ)}}var gf=1,gC=2,wA=(e,t,i,s)=>{var o,a;let n=gf|gC;if(t.valueType==="category")return i.length!==e&&(n&=~gf),n;let r=(o=s[0])==null?void 0:o.valueOf();for(let l=1;n!==0&&l<s.length;l++){const c=(a=s[l])==null?void 0:a.valueOf();(!Number.isFinite(c)||r>c)&&(n&=~gC),Number.isFinite(c)&&r===c&&(n&=~gf),r=c}return n};function Ap(e){return{type:"processor",property:"animationValidation",calculate(t){const{keys:i,values:s}=t.defs,{input:{count:n},domain:{keys:r,values:o},rawData:a,keys:l,columns:c}=t;let p=gf|gC;if(a.length!==0){for(let g=0;p!==0&&g<i.length;g++)p&=wA(n,i[g],r[g],l[g]);for(let g=0;p!==0&&g<s.length;g++){const f=s[g];e!=null&&e.includes(f.id)&&(p&=wA(n,f,o[g],c[g]))}}return{uniqueKeys:(p&gf)!==0,orderedKeys:(p&gC)!==0}}}}function bJ({mode:e,separateNegative:t}){return()=>()=>(i,s,n)=>{const r=[0,0];for(const o of s){const a=i[o],l=a[n],c=HC(l)&&t?0:1;Kt(l)&&(e==="normal"&&(r[c]+=l),a[n]=r[c],e==="trailing"&&(r[c]+=l))}}}function MJ({mode:e,sum:t}){return()=>{const i=[];let s=!0;return()=>(n,r,o)=>{let a=0;for(const l of r){const c=n[l],p=c[o],g=s&&t==="current"?0:i[l];i[l]=p;const f=t==="current"?p:g;if(!Kt(p)||!Kt(g)){c[o]=a;continue}e==="normal"&&(a+=f),c[o]=a,e==="trailing"&&(a+=f)}s=!1}}}function M1(e,t,i,s=!1){let n;if(t.startsWith("window")){const r=t.endsWith("-trailing")?"trailing":"normal";n=pC({mode:r,sum:i},MJ)}else n=pC({mode:t,separateNegative:s},bJ);return{type:"group-value-processor",matchGroupIds:[e],adjust:n}}function RJ(){return()=>(e,t,i)=>{const s=new Float64Array(32);let n=0;for(const r of t){const o=e[r],a=o[i];s[n]=Number.isFinite(a)?a:NaN,n+=1,o[i]=s.subarray(0,n)}}}function R1(e){return{type:"group-value-processor",matchGroupIds:[e],adjust:RJ}}function xA(e){return e.id??e.property}function DJ(e,t,i){var a,l;const s=new Map,n=t.defs.values;for(let c=0;c<n.length;c+=1){const p=n[c];if(((a=p.scopes)==null?void 0:a.includes(e))===!1)continue;const g=xA(p);if(s.has(g))return;s.set(g,c)}const r=[],o=i.defs.values;for(let c=0;c<o.length;c+=1){const p=o[c];if(((l=p.scopes)==null?void 0:l.includes(e))===!1)continue;const g=xA(p),f=s.get(g);if(f==null)return;s.delete(g),r.push({previousIndex:f,nextIndex:c})}if(s.size===0)return r}function vb(e,t,i,s,n){for(const{previousIndex:r,nextIndex:o}of i){const a=e[r],l=t[o],c=a[s],p=l[n];if(c!==p)return!1}return!0}function Pp(e,t,i=!0){return{type:"processor",property:"diff",calculate(s,n){const r=new Map,o=new Map,a=new Map,l=new Map,c=t.keys,p=s.keys,g=t.columns,f=s.columns,y=DJ(e,t,s);if(y==null)return n;const C=Math.max(t.rawData.length,s.rawData.length);for(let b=0;b<C;b++){const R=b<t.rawData.length,I=b<s.rawData.length,P=R?Gf(c,b):void 0,k=P!=null?As(P):"",_=I?Gf(p,b):void 0,B=_!=null?As(_):"";if(I&&R&&k===B){vb(g,f,y,b,b)||a.set(B,b);continue}const H=l.get(B);H!=null?((i||!vb(g,f,y,H,b))&&(a.set(B,b),r.set(B,b)),l.delete(B)):I&&o.set(B,b);const V=o.get(k);V!=null?((i||!vb(g,f,y,V,b))&&(a.set(k,b),r.set(k,b)),o.delete(k)):R&&(a.delete(k),l.set(k,b))}const M={changed:o.size>0||a.size>0||l.size>0,added:new Set(o.keys()),updated:new Set(a.keys()),removed:new Set(l.keys()),moved:new Set(r.keys())};return{...n,[e]:M}}}}function As(e,...t){let i;return bi(e)?i=e.map(n=>bM(n)).join("___"):i=bM(e),(typeof i=="string"||typeof i=="number"||typeof i=="boolean"||i instanceof Date)&&t.length>0&&(i+=`___${t.join("___")}`),i}var EJ=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(e,t){e>this.right&&(this.right=e),e<this.left&&(this.left=e),t>this.bottom&&(this.bottom=t),t<this.top&&(this.top=t)}},IJ=class D1{constructor(t="",i,s){this.label=t,this.parent=i,this.refId=s,this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.index=0,this.screenX=0,this.screenY=0,this.depth=i?i.depth+1:0}insertTick(t,i){let s=this;for(let n=0;n<t.length;n++){const r=t[n],o=n!==t.length-1,{children:a}=s,l=a.find(c=>c.label===r);if(l&&o)s=l;else{const c=new D1(r,s,i);c.index=a.length,a.push(c),o&&(s=c)}}}getLeftSibling(){var t;return this.index>0?(t=this.parent)==null?void 0:t.children[this.index-1]:void 0}getLeftmostSibling(){var t;return this.index>0?(t=this.parent)==null?void 0:t.children[0]:void 0}nextLeft(){return this.children[0]}nextRight(){return this.children.at(-1)}getSiblings(){var t;return((t=this.parent)==null?void 0:t.children.filter((i,s)=>s!==this.index))??[]}};function LJ(e){const t=e.reduce((s,n)=>s<n.length?n.length:s,0),i=new IJ;for(let s=0;s<e.length;s++){const n=e[s];for(;n.length<t;)n.push("");i.insertTick(n,s)}return i}function TJ(e,t,i){const s=t.index-e.index,n=i/s;t.change-=n,t.shift+=i,e.change+=n,t.prelim+=i,t.mod+=i}function AJ(e,t,i){return t.getSiblings().indexOf(e.ancestor)>=0?e.ancestor:i}function PJ({children:e}){let t=0,i=0;for(let s=e.length-1;s>=0;s--){const n=e[s];n.prelim+=t,n.mod+=t,i+=n.change,t+=n.shift+i}}function FJ(e,t){const i=e.getLeftSibling();if(i){let s=e,n=e,r=i,o=n.getLeftmostSibling(),a=n.mod,l=s.mod,c=r.mod,p=o.mod;for(;r.nextRight()&&n.nextLeft();){r=r.nextRight(),n=n.nextLeft(),o=o.nextLeft(),s=s.nextRight(),s.ancestor=e;const g=r.prelim+c-(n.prelim+a)+1;g>0&&(TJ(AJ(r,e,t),e,g),a+=g,l+=g),c+=r.mod,a+=n.mod,p+=o.mod,l+=s.mod}r.nextRight()&&!s.nextRight()?s.mod+=c-l:(n.nextLeft()&&!o.nextLeft()&&(o.mod+=a-p),t=e)}return t}function E1(e){const{children:t}=e;if(t.length){let[i]=t;for(const r of t)E1(r),i=FJ(r,i);PJ(e);const s=(t[0].prelim+t.at(-1).prelim)/2,n=e.getLeftSibling();n?(e.prelim=n.prelim+1,e.mod=e.prelim-s):e.prelim=s}else{const i=e.getLeftSibling();e.prelim=i?i.prelim+1:0}}function I1(e,t,i){e.x=e.prelim+t,e.y=e.depth,i.insertNode(e);for(const s of e.children)I1(s,t+e.mod,i)}function L1(e){const{children:t}=e;let i=0;for(const s of t)L1(s),s.children.length?i+=s.leafCount:i++;e.leafCount=i,t.length?(e.subtreeLeft=t[0].subtreeLeft,e.subtreeRight=t[t.length-1].subtreeRight,e.x=(e.subtreeLeft+e.subtreeRight)/2):(e.subtreeLeft=e.x,e.subtreeRight=e.x)}function kJ(e){const t=new NJ,i=LJ(e);return E1(i),I1(i,-i.prelim,t),L1(i),t}var NJ=class{constructor(){this.dimensions=new EJ,this.nodes=[],this.depth=0}insertNode(e){this.depth<e.depth&&(this.depth=e.depth),this.dimensions.update(e.x,e.y),this.nodes.push(e)}scalingX(e,t){let i=1;if(e>0){const{left:s,right:n}=this.dimensions;i=e/(n-s)}return t&&(i*=-1),i}scalingY(e,t){let i=1;if(e>0){const{top:s,bottom:n}=this.dimensions;i=e/(n-s)}return t&&(i*=-1),i}},Ol=class extends yt{constructor(){super(...arguments),this.enabled=!0}};A([O(nt)],Ol.prototype,"enabled",2);A([O(nt,{optional:!0})],Ol.prototype,"avoidCollisions",2);A([O(Zt,{optional:!0})],Ol.prototype,"color",2);A([O(Ge,{optional:!0})],Ol.prototype,"spacing",2);A([O(Il,{optional:!0})],Ol.prototype,"fontStyle",2);A([O(Ll,{optional:!0})],Ol.prototype,"fontWeight",2);A([O(_t.restrict({min:1}),{optional:!0})],Ol.prototype,"fontSize",2);A([O(Fe,{optional:!0})],Ol.prototype,"fontFamily",2);var xS=class extends yt{constructor(){super(...arguments),this.enabled=!0}};A([O(nt)],xS.prototype,"enabled",2);A([O(Ge,{optional:!0})],xS.prototype,"width",2);A([O(Zt,{optional:!0})],xS.prototype,"stroke",2);var fD=class extends yt{constructor(){super(...arguments),this.label=new Ol,this.tick=new xS}};A([O(Ye)],fD.prototype,"label",2);A([O(Ye)],fD.prototype,"tick",2);var bh=class extends Dp{constructor(e){super(e),this.tickScale=new iu,this.depthOptions=new dm(fD),this.includeInvisibleDomains=!0,this.tickScale.paddingInner=1,this.tickScale.paddingOuter=0}resizeTickTree(){if(!this.tickTreeLayout)return;const{nodes:e}=this.tickTreeLayout,{range:t,step:i,inset:s,bandwidth:n}=this.scale,r=Math.abs(t[1]-t[0])-i,o=this.tickTreeLayout.scalingX(r,t[0]>t[1]),a=s+n/2;let l=0;for(const c of e){const p=c.x*o;l>p&&(l=p),c.screenX=p+a}for(const c of e)c.screenX-=l}getDepthOptionsMap(e){var n,r,o,a;const t=[],{depthOptions:i,label:s}=this;for(let l=0;l<e;l++)t.push(((n=i[l])==null?void 0:n.label.enabled)??s.enabled?{enabled:!0,spacing:((r=i[l])==null?void 0:r.label.spacing)??s.spacing,lineHeight:Ei.getLineHeight(((o=i[l])==null?void 0:o.label.fontSize)??s.fontSize??10),avoidCollisions:((a=i[l])==null?void 0:a.label.avoidCollisions)??s.avoidCollisions}:{enabled:!1,spacing:0,lineHeight:0,avoidCollisions:!1});return t}updateCategoryLabels(){this.computedLayout&&this.tickLabelGroupSelection.update(this.computedLayout.tickLabelLayout).each((e,t)=>e.setProperties(t))}updateAxisLine(){this.computedLayout&&(this.lineNode.visible=this.line.enabled,this.lineNode.stroke=this.line.stroke,this.lineNode.strokeWidth=this.line.width)}computeLayout(){var Re;if(this.updateDirection(),this.updateScale(),this.updateRange(),this.resizeTickTree(),!((Re=this.tickTreeLayout)!=null&&Re.depth))return{bbox:Ue.zero,separatorLayout:[],tickLabelLayout:[]};const{step:e}=this.scale,{title:t,label:i,range:s,depthOptions:n}=this,{depth:r,nodes:o}=this.tickTreeLayout,a=Math.ceil(i.fontSize/e),l=Ys(this.rotation),c=this.position==="top"||this.position==="bottom",p=i.getSideFlag(),g=[],f=new Map,y=new pp,{defaultRotation:C,configuredRotation:x}=rC({rotation:i.rotation,parallel:i.parallel,regularFlipRotation:Qt(l-Math.PI/2),parallelFlipRotation:Qt(l)}),M=C+x,b=this.getDepthOptionsMap(r),R=(oe,Se)=>{var W,Q;const K=r-oe.depth;if(!((W=b[K])!=null&&W.enabled)||Se%a!==0||!xN(oe.screenX,s))return!1;const pe=this.formatTick(oe.label,Se-1),q=this.getLabelStyles({value:pe,depth:K},(Q=n[K])==null?void 0:Q.label);return y.setProperties({...q,text:pe,textAlign:"center",textBaseline:i.parallel?"hanging":"bottom",rotation:0,translationX:0,translationY:oe.screenX}),!0};let I=0;const P={};o.forEach((oe,Se)=>{const K=r-oe.depth,pe=fJ(oe.label);if(P[K]??(P[K]=1),P[K]<pe&&(P[K]=pe),!(!R(oe,Se)||!y.getBBox())&&(f.set(Se,y.getBBox()),!oe.leafCount)){y.rotation=M;const{width:W}=y.getBBox();I<W&&(I=W)}});const k=PR(),_=p*b[0].spacing,B=new Map,H=oe=>{let Se=I;for(let K=1;K<=oe;K++)Se+=b[K].spacing,(i.mirrored||K!==oe)&&(Se+=P[K]*b[K].lineHeight);return Se};o.forEach((oe,Se)=>{var Q;if(Se===0)return;const K=R(oe,Se),pe=!oe.children.length,q=r-oe.depth;if(oe.parent){const ve=pe?oe.x:oe.x-(oe.leafCount-1)/2;if(!B.has(ve)){const se=(Q=this.depthOptions[q])==null?void 0:Q.tick;let ye=I;for(let ue=0;ue<=q;ue++)ye+=b[ue].spacing,ue!==0&&(ye+=P[ue]*b[ue].lineHeight);B.set(ve,{tickSize:ye,tickStroke:se==null?void 0:se.stroke,tickWidth:(se==null?void 0:se.enabled)!==!1?se==null?void 0:se.width:0})}}if(!K)return;if(y.x=_,y.y=0,pe){const{width:ve}=f.get(Se),se=AO(M);y.rotation=M,y.textAlign="end",y.textBaseline="middle",y.rotationCenterX=_-ve/2,y.translationX=(b[q].spacing-ve)/2*se*p,i.mirrored&&(y.translationX+=ve)}else y.rotation=c?C:-Math.PI/2,y.rotationCenterX=_,y.translationX=p*H(q);if(b[q].avoidCollisions){const ve=pe?e:oe.leafCount*e;if(y.getBBox().height>ve){f.delete(Se);return}}const{text:W=""}=y;g.push({text:W,visible:!0,range:this.scale.range,tickId:k(W),fill:y.fill,fontFamily:y.fontFamily,fontSize:y.fontSize,fontStyle:y.fontStyle,fontWeight:y.fontWeight,rotation:y.rotation,rotationCenterX:y.rotationCenterX,textAlign:y.textAlign,textBaseline:y.textBaseline,translationX:y.translationX,translationY:y.translationY,x:y.x,y:y.y}),f.set(Se,ji.toCanvas(y))});const{enabled:V,stroke:U,width:$}=this.line;this.lineNode.datum={x:0,y1:s[0],y2:s[1]},this.lineNode.setProperties({stroke:U,strokeWidth:V?$:0});const te=[...B.values()];te.push(te[0]);const Ce=[this.lineNode.getBBox(),new Ue(0,0,te[0].tickSize*p,0)];t.enabled&&(this.updateTitle(!1,te[0].tickSize),Ce.push(t.caption.node.getBBox()));const be=Ue.merge(ah(f.values(),Ce));return{bbox:this.getTransformBox(be),separatorLayout:te,tickLabelLayout:g}}update(){if(!this.computedLayout)return;const{tickScale:e,gridLine:t,gridLength:i}=this,{separatorLayout:s}=this.computedLayout,n=e.ticks().map((r,o)=>({...s[o],tick:r,tickId:As(r,o),tickLabel:r.filter(Boolean).join(" - "),translationY:Math.round(e.convert(r))}));this.gridLineGroupSelection.update(t.enabled&&i?n:[]),this.tickLineGroupSelection.update(this.tick.enabled?n:[]),this.updatePosition(),this.updateCategoryLabels(),this.updateAxisLine(),this.updateGridLines(),this.updateTickLines(),this.updateTitle(),this.resetSelectionNodes()}calculateLayout(){const{separatorLayout:e,tickLabelLayout:t,bbox:i}=this.computeLayout();return this.computedLayout={separatorLayout:e,tickLabelLayout:t},{bbox:i,primaryTickCount:void 0}}onGridVisibilityChange(){this.gridLineGroupSelection.clear(),this.tickLabelGroupSelection.clear()}updateRange(){super.updateRange(),this.tickScale.range=this.scale.range}calculateDomain(){const{direction:e}=this,t=this.boundSeries.filter(n=>n.visible).flatMap(n=>n.getDomain(e));this.setDomain(Rl(t)??uR(t));const i=this.dataDomain.domain.map(Af);this.tickTreeLayout=kJ(i);const s=[];for(const n of this.tickTreeLayout.nodes)n.leafCount||n.refId==null||s.push(this.dataDomain.domain[n.refId]);this.scale.domain=zN(this.dataDomain.domain,s),this.tickScale.domain=i.concat([[""]])}updateGridLines(){if(!this.gridLength)return;const{width:e,style:t}=this.gridLine,i=this.gridLength*-this.label.getSideFlag();this.gridLineGroupSelection.each((s,n,r)=>{const{stroke:o,lineDash:a}=t[r%t.length],l=n.translationY;s.visible=this.inRange(l),s.x1=0,s.x2=i,s.y=l,s.stroke=o,s.strokeWidth=e,s.lineDash=a})}updateScale(e){super.updateScale(e),this.scale.paddingOuter=this.scale.paddingInner/2}};bh.className="GroupedCategoryAxis";bh.type="grouped-category";A([O(mR)],bh.prototype,"depthOptions",2);function mD(e,t,i){let[s,n]=Ks(e);s=OJ(Math.floor(s),n,t);const r=BJ(s,n,t),o=t-1;n=s+o*r;const a=i?[n,s]:[s,n],l=_J(s,r,t);return{domain:a,ticks:l}}function OJ(e,t,i){const s=Math.abs(t-e)/(i-1),n=Math.floor(Math.log10(s)),r=Math.pow(10,n);return Math.floor(e/r)*r}function _J(e,t,i){const s=Math.floor(Math.log10(t)),n=t>0&&t<1?Math.abs(s):0,r=Math.pow(10,n),o=[];for(let a=0;a<i;a++){const l=e+t*a;o[a]=Math.round(l*r)/r}return o}function BJ(e,t,i){const s=i-1,n=(t-e)/s;return GJ(n)}function GJ(e){const t=Math.floor(Math.log10(e)),i=Math.pow(10,t),s=e/i*10;return s>0&&s<=1?i/10:s>1&&s<=2?2*i/10:s>1&&s<=5?5*i/10:s>5&&s<=10?10*i/10:s>10&&s<=20?20*i/10:s>20&&s<=40?40*i/10:s>40&&s<=50?50*i/10:s>50&&s<=100?100*i/10:s}var $r=class extends hi{constructor(){super([0,1],[0,1]),this.type="number"}toDomain(e){return e}ticks(){const e=this.tickCount??hi.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||!this.domain.every(isFinite))return[];this.refresh();const[t,i]=this.getDomain();if(this.interval){const s=Math.abs(this.interval);if(!Ff((i-t)/s,this.getPixelRange()))return eS(t,i,s)}return wR(t,i,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(e,t){return this.interval??Pf(e,t,this.tickCount,this.minTickCount,this.maxTickCount)}updateNiceDomain(){const e=this.tickCount;let[t,i]=this.domain;if(e===1)[t,i]=gX(t,i);else if(e>1){const s=t>i?Math.ceil:Math.floor,n=t>i?Math.floor:Math.ceil,r=4;for(let o=0;o<r;o++){const a=t,l=i,c=this.getTickStep(t,i),[p,g]=this.domain;if(t=s(p/c)*c,i=n(g/c)*c,t===a&&i===l)break}}this.niceDomain=[t,i]}tickFormat({ticks:e,specifier:t}){return pX(e??this.ticks(),t)}},Qc=class extends wh{constructor(e,t=new $r){super(e,t),this.min=NaN,this.max=NaN}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:n}=cR(e,t,i);return{domain:s,clipped:n}}updateSecondaryAxisTicks(e){var s;if(!((s=this.dataDomain)!=null&&s.domain.length))return[];const{domain:t,ticks:i}=mD(this.dataDomain.domain,e??0,this.reverse);return this.scale.nice=!1,this.scale.domain=t,this.scale.update(),i}};Qc.className="NumberAxis";Qc.type="number";A([O(ba(bp,gm("max"))),su(NaN)],Qc.prototype,"min",2);A([O(ba(bp,fm("min"))),su(NaN)],Qc.prototype,"max",2);var T1=Jt(e=>Eo(e)&&e!==0,"a non-zero number"),Hh=class extends Qc{constructor(e){super(e,new xR),this.min=NaN,this.max=NaN}normaliseDataDomain(e){const{min:t,max:i}=this,{extent:s,clipped:n}=cR(e,t,i);return s[0]<0&&s[1]>0?(_e.warn("The log axis domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:n}):s[0]===0||s[1]===0?(_e.warn("The log axis domain contains a value of 0, the chart data cannot be rendered. See log axis documentation for more information."),{domain:[],clipped:n}):{domain:s,clipped:n}}set base(e){this.scale.base=e}get base(){return this.scale.base}updateSecondaryAxisTicks(e){var s;if(!((s=this.dataDomain)!=null&&s.domain.length))return[];const{domain:t,ticks:i}=mD(this.dataDomain.domain,e??0,this.reverse);return this.scale.nice=!1,this.scale.domain=t,this.scale.update(),i}};Hh.className="LogAxis";Hh.type="log";A([O(ba(bp,T1,gm("max"))),su(NaN)],Hh.prototype,"min",2);A([O(ba(bp,T1,fm("min"))),su(NaN)],Hh.prototype,"max",2);var Fp=class extends wh{constructor(e){super(e,new MR),this.min=void 0,this.max=void 0}normaliseDataDomain(e){var n;let{min:t,max:i}=this,s=!1;return typeof t=="number"&&(t=new Date(t)),typeof i=="number"&&(i=new Date(i)),e.length>2&&(e=((n=Rl(e))==null?void 0:n.map(r=>new Date(r)))??[]),t instanceof Date&&(s||(s=t>e[0]),e=[t,e[1]]),i instanceof Date&&(s||(s=i<e[1]),e=[e[0],i]),e[0]>e[1]&&(e=[]),{domain:e,clipped:s}}onFormatChange(e,t,i,s){s?super.onFormatChange(e,t,i,s):(this.labelFormatter=this.scale.tickFormat({ticks:e,domain:i}),this.datumFormatter=this.scale.tickFormat({ticks:e,domain:i,formatOffset:1}))}updateSecondaryAxisTicks(e){var s;if(!((s=this.dataDomain)!=null&&s.domain.length))return[];const{domain:t,ticks:i}=mD(this.dataDomain.domain.map(Number),e??0,this.reverse);return this.scale.nice=!1,this.scale.domain=t.map(n=>new Date(n)),this.scale.update(),i}};Fp.className="TimeAxis";Fp.type="time";A([O(ba(fR,gm("max")),{optional:!0})],Fp.prototype,"min",2);A([O(ba(fR,fm("min")),{optional:!0})],Fp.prototype,"max",2);var Xg=(e,{x0:t,y0:i,x1:s,y1:n,cx:r,cy:o},a,l)=>{if(l&&e.moveTo(t,i),t!==s||i!==n){const c=Math.atan2(i-o,t-r),p=Math.atan2(n-o,s-r);e.arc(r,o,a,c,p)}else e.lineTo(t,i)},bA=1e-6,ty=(e,t,i,s,n)=>{let r=!1,o=!1,a=s-Math.sqrt(Math.max(n**2-i**2,0)),l=0,c=0,p=i-Math.sqrt(Math.max(n**2-s**2,0));return a>e?(r=!0,a=e,l=i-Math.sqrt(Math.max(n**2-(s-e)**2))):a<bA&&(a=0),p>t?(o=!0,c=s-Math.sqrt(Math.max(n**2-(i-t)**2)),p=t):p<bA&&(p=0),{leading0:a,leading1:l,trailing0:c,trailing1:p,leadingClipped:r,trailingClipped:o}},Dy=(e,t,i,s,n,r,o)=>{let{topLeft:a,topRight:l,bottomRight:c,bottomLeft:p}=r;const g=Math.max(a+p,l+c),f=Math.max(a+l,p+c);if(g<=0&&f<=0){o==null?e.rect(t,i,s,n):e.rect(o.x,o.y,o.width,o.height);return}else if(o==null&&a===l&&a===c&&a===p){e.roundRect(t,i,s,n,a);return}if(s<0&&(t+=s,s=Math.abs(s)),n<0&&(i+=n,n=Math.abs(n)),s<=0||n<=0)return;if(o==null)o=new Ue(t,i,s,n);else{const B=Math.max(t,o.x),H=Math.min(t+s,o.x+o.width),V=Math.max(i,o.y),U=Math.min(i+n,o.y+o.height);o=new Ue(B,V,H-B,U-V)}const y=Math.max(g/n,f/s,1);y>1&&(a/=y,l/=y,c/=y,p/=y);let C=!0,x=!0,M=!0,b=!0,R,I,P,k;if(C){const B=ty(o.height,o.width,Math.max(t+a-o.x,0),Math.max(i+a-o.y,0),a);B.leadingClipped&&(b=!1),B.trailingClipped&&(x=!1);const H=Math.max(o.x+B.leading1,o.x),V=Math.max(o.y+B.leading0,o.y),U=Math.max(o.x+B.trailing1,o.x),$=Math.max(o.y+B.trailing0,o.y),te=t+a,Ce=i+a;R={x0:H,y0:V,x1:U,y1:$,cx:te,cy:Ce}}if(x){const B=ty(o.width,o.height,Math.max(i+l-o.y,0),Math.max(o.x+o.width-(t+s-l),0),l);B.leadingClipped&&(C=!1),B.trailingClipped&&(M=!1);const H=Math.min(o.x+o.width-B.leading0,o.x+o.width),V=Math.max(o.y+B.leading1,o.y),U=Math.min(o.x+o.width-B.trailing0,o.x+o.width),$=Math.max(o.y+B.trailing1,o.y),te=t+s-l,Ce=i+l;I={x0:H,y0:V,x1:U,y1:$,cx:te,cy:Ce}}if(M){const B=ty(o.height,o.width,Math.max(o.x+o.width-(t+s-c),0),Math.max(o.y+o.height-(i+n-c),0),c);B.leadingClipped&&(x=!1),B.trailingClipped&&(b=!1);const H=Math.min(o.x+o.width-B.leading1,o.x+o.width),V=Math.min(o.y+o.height-B.leading0,o.y+o.height),U=Math.min(o.x+o.width-B.trailing1,o.x+o.width),$=Math.min(o.y+o.height-B.trailing0,o.y+o.height),te=t+s-c,Ce=i+n-c;P={x0:H,y0:V,x1:U,y1:$,cx:te,cy:Ce}}if(b){const B=ty(o.width,o.height,Math.max(o.y+o.height-(i+n-p),0),Math.max(t+p-o.x,0),p);B.leadingClipped&&(M=!1),B.trailingClipped&&(C=!1);const H=Math.max(o.x+B.leading0,o.x),V=Math.min(o.y+o.height-B.leading1,o.y+o.height),U=Math.max(o.x+B.trailing0,o.x),$=Math.min(o.y+o.height-B.trailing1,o.y+o.height),te=t+p,Ce=i+n-p;k={x0:H,y0:V,x1:U,y1:$,cx:te,cy:Ce}}let _=!1;C&&R!=null&&(Xg(e,R,a,!_),_||(_=!0)),x&&I!=null&&(Xg(e,I,l,!_),_||(_=!0)),M&&P!=null&&(Xg(e,P,c,!_),_||(_=!0)),b&&k!=null&&Xg(e,k,p,!_),e.closePath()},Zs=class extends Rn{constructor(){super(...arguments),this.borderPath=new Hf,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.clipBBox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Zr.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Zr.defaultStyles.strokeWidth,this.hittester=super.isPointInPath.bind(this),this.distanceCalculator=super.distanceSquaredTransformedPoint.bind(this),this.microPixelEffectOpacity=1}set cornerRadius(e){this.topLeftCornerRadius=e,this.topRightCornerRadius=e,this.bottomRightCornerRadius=e,this.bottomLeftCornerRadius=e}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!!(this.path.isDirty()||this.borderPath.isDirty())}updatePath(){var M;const{path:e,borderPath:t,crisp:i,topLeftCornerRadius:s,topRightCornerRadius:n,bottomRightCornerRadius:r,bottomLeftCornerRadius:o}=this;let{x:a,y:l,width:c,height:p,strokeWidth:g,clipBBox:f}=this;const C=1/(((M=this.layerManager)==null?void 0:M.canvas.pixelRatio)??1);let x=1;if(e.clear(!0),t.clear(!0),i&&(c<=C&&(x*=c/C),p<=C&&(x*=p/C),c=this.align(a,c),p=this.align(l,p),a=this.align(a),l=this.align(l),f=f!=null?new Ue(this.align(f.x),this.align(f.y),this.align(f.x,f.width),this.align(f.y,f.height)):void 0),g)if(c<C){const b=a+C/2;t.moveTo(b,l),t.lineTo(b,l+p),g=C,this.borderClipPath=void 0}else if(p<C){const b=l+C/2;t.moveTo(a,b),t.lineTo(a+c,b),g=C,this.borderClipPath=void 0}else if(g<c&&g<p){const b=g/2;a+=b,l+=b,c-=g,p-=g;const R=f==null?void 0:f.clone().shrink(b),I={topLeft:s>0?s-g:0,topRight:n>0?n-g:0,bottomRight:r>0?r-g:0,bottomLeft:o>0?o-g:0};this.borderClipPath=void 0,c>0&&p>0&&(R==null||(R==null?void 0:R.width)>0&&(R==null?void 0:R.height)>0)&&(Dy(e,a,l,c,p,I,R),Dy(t,a,l,c,p,I,R))}else this.borderClipPath=this.borderClipPath??new Hf,this.borderClipPath.clear(!0),this.borderClipPath.rect(a,l,c,p),t.rect(a,l,c,p);else{const b={topLeft:s,topRight:n,bottomRight:r,bottomLeft:o};this.borderClipPath=void 0,Dy(e,a,l,c,p,b,f)}if([s,n,r,o].every(b=>b===0)){const b=this.getBBox();this.hittester=b.containsPoint.bind(b),this.distanceSquared=(R,I)=>this.getBBox().distanceSquared(R,I)}else this.hittester=super.isPointInPath,this.distanceCalculator=super.distanceSquaredTransformedPoint;this.effectiveStrokeWidth=g,this.lastUpdatePathStrokeWidth=g,this.microPixelEffectOpacity=x}computeBBox(){const{x:e,y:t,width:i,height:s,clipBBox:n}=this;return(n==null?void 0:n.clone())??new Ue(e,t,i,s)}isPointInPath(e,t){return this.hittester(e,t)}get midPoint(){return{x:this.x+this.width/2,y:this.y+this.height/2}}distanceSquared(e,t){return this.distanceCalculator(e,t)}applyFillAlpha(e){const{fillOpacity:t,microPixelEffectOpacity:i,opacity:s}=this;e.globalAlpha*=s*t*i}renderStroke(e){const{stroke:t,effectiveStrokeWidth:i}=this;if(t&&i){const{globalAlpha:s}=e,{strokeOpacity:n,lineDash:r,lineDashOffset:o,lineCap:a,lineJoin:l,borderPath:c,borderClipPath:p,opacity:g,microPixelEffectOpacity:f}=this;p&&e.clip(p.getPath2D()),this.applyStroke(e),e.globalAlpha*=g*n*f,e.lineWidth=i,r&&e.setLineDash(r),o&&(e.lineDashOffset=o),a&&(e.lineCap=a),l&&(e.lineJoin=l),e.stroke(c.getPath2D()),e.globalAlpha=s}}};Zs.className="Rect";A([gt()],Zs.prototype,"x",2);A([gt()],Zs.prototype,"y",2);A([gt()],Zs.prototype,"width",2);A([gt()],Zs.prototype,"height",2);A([gt()],Zs.prototype,"topLeftCornerRadius",2);A([gt()],Zs.prototype,"topRightCornerRadius",2);A([gt()],Zs.prototype,"bottomRightCornerRadius",2);A([gt()],Zs.prototype,"bottomLeftCornerRadius",2);A([gt()],Zs.prototype,"clipBBox",2);A([gt()],Zs.prototype,"crisp",2);var kp=class extends oS{constructor(e){super(),this.ctx=e,this.rectNode=new Zs,this.textNode=new gs,this.fill="white",this.node=this.createNode(),this.node.append([this.rectNode,this.textNode]),this.visible=!0,this.destroyFns.push(e.scene.attachNode(this.node),e.layoutManager.addListener("layout:complete",t=>this.onLayoutComplete(t)))}createNode(){return new lt({name:"background",zIndex:0})}onLayoutComplete(e){const{width:t,height:i}=e.chart;this.rectNode.width=t,this.rectNode.height=i}};A([O(nt),Ms("node","visible")],kp.prototype,"visible",2);A([O(Zt,{optional:!0}),Ms("rectNode","fill")],kp.prototype,"fill",2);A([O(Ye,{optional:!0})],kp.prototype,"image",2);A([O(Fe,{optional:!0}),Ms("textNode")],kp.prototype,"text",2);var A1={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new kp(e)};function zJ({orientation:e,bboxes:t,maxHeight:i,maxWidth:s,itemPaddingY:n=0,itemPaddingX:r=0,forceResult:o=!1}){const a=e==="horizontal",l={max:a?s:i,fn:a?f=>f.width:f=>f.height,padding:a?r:n},c={max:a?i:s,fn:a?f=>f.height:f=>f.width,padding:a?n:r};let p=0;const g=[];for(;p<t.length;){const f=t.slice(p),y=HJ(f,p,l,c,o);if(!y)return;p+=y.processedBBoxCount,g.push(y.pageIndices)}return WJ(g,e,t,n,r)}function HJ(e,t,i,s,n){let o=UJ(e,i);if(o<1){if(!n)return;o=1}let a=o;for(;a>=1;){const l=VJ(e,t,a,i,s,n);if(l==null&&a<=1)return;if(l==null){a--;continue}if(typeof l=="number"){if(l<=1)return;a=l<a&&l>1?l:a,a--;continue}return{processedBBoxCount:l.length*l[0].length,pageIndices:l}}}function VJ(e,t,i,s,n,r){const o=[];let a=0,l=0,c=[];const p=[];for(let g=0;g<e.length;g++){const f=(g+i)%i;f===0&&(a+=l,l=0,c.length>0&&o.push(c),c=[]);const y=s.fn(e[g])+s.padding;p[f]=Math.max(p[f]??0,y),l=Math.max(l,n.fn(e[g])+n.padding);const C=a+l,x=!r||o.length>0;if(C>n.max&&x){c=[];break}if(p.reduce((b,R)=>b+R,0)>s.max&&!r)return p.length<i?p.length:void 0;c.push(g+t)}return c.length>0&&o.push(c),o.length>0?o:void 0}function WJ(e,t,i,s,n){let r=0,o=0;return{pages:e.map(l=>{t==="horizontal"&&(l=jJ(l));let c=0;const p=l.map(y=>{const C=y.map(b=>(c=Math.max(b,c),i[b]));let x=0,M=0;return C.forEach(b=>{x+=b.height+s,M=Math.max(M,b.width+n)}),{indices:y,bboxes:C,columnHeight:Math.ceil(x),columnWidth:Math.ceil(M)}});let g=0,f=0;return p.forEach(y=>{g+=y.columnWidth,f=Math.max(f,y.columnHeight)}),r=Math.max(g,r),o=Math.max(f,o),{columns:p,startIndex:l[0][0],endIndex:c,pageWidth:g,pageHeight:f}}),maxPageWidth:r,maxPageHeight:o}}function jJ(e){const t=[];for(const i of e[0])t.push([]);return e.forEach((i,s)=>{i.forEach((n,r)=>{t[r][s]=n})}),t}function UJ(e,t){const i=e.length;let s=0;for(let n=0;n<i;n++)if(s+=t.fn(e[n])+t.padding,s>t.max)return i/n<2?Math.ceil(i/2):n;return i}var Np=class extends yt{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};A([O(Zt)],Np.prototype,"color",2);A([O(Il,{optional:!0})],Np.prototype,"fontStyle",2);A([O(Ll,{optional:!0})],Np.prototype,"fontWeight",2);A([O(Ge)],Np.prototype,"fontSize",2);A([O(Fe)],Np.prototype,"fontFamily",2);var vl=class extends yt{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};A([O(Ge)],vl.prototype,"size",2);A([O(Zt,{optional:!0})],vl.prototype,"fill",2);A([O($t,{optional:!0})],vl.prototype,"fillOpacity",2);A([O(Zt,{optional:!0})],vl.prototype,"stroke",2);A([O(Ge)],vl.prototype,"strokeWidth",2);A([O($t)],vl.prototype,"strokeOpacity",2);var bS=class extends yt{constructor(e){super(),this.parent=e,this.shape="triangle",this.size=15,this.padding=8}};A([vr({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],bS.prototype,"shape",2);A([O(Ge)],bS.prototype,"size",2);A([O(Ge)],bS.prototype,"padding",2);var Vh=class extends yt{constructor(e,t){super(),this.chartUpdateCallback=e,this.pageUpdateCallback=t,this.id=Qr(this),this.marker=new bS(this),this.activeStyle=new vl,this.inactiveStyle=new vl,this.highlightStyle=new vl,this.label=new Np,this.group=new yn({name:"pagination"}),this.labelNode=new gs,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new df,this._previousButton=new df,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:1}),this.group.append([this.nextButton,this.previousButton,this.labelNode]),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach(e=>e())}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(e){this._enabled=e,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(e){switch(this._orientation=e,e){case"horizontal":{this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2;break}case"vertical":default:this.previousButton.rotation=0,this.nextButton.rotation=Math.PI}}get orientation(){return this._orientation}set nextButton(e){this._nextButton!==e&&(this.group.removeChild(this._nextButton),this._nextButton=e,this.group.appendChild(e))}get nextButton(){return this._nextButton}set previousButton(e){this._previousButton!==e&&(this.group.removeChild(this._previousButton),this._previousButton=e,this.group.appendChild(e))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:e,padding:t}=this.marker;this.nextButton.size=e,this.previousButton.size=e,this.labelNode.x=e/2+t}updateNextButtonPosition(){const e=this.labelNode.getBBox();this.nextButton.translationX=e.width+(this.marker.size/2+this.marker.padding)*2}updateLabel(){const{currentPage:e,totalPages:t,labelNode:i,label:{color:s,fontStyle:n,fontWeight:r,fontSize:o,fontFamily:a}}=this;i.text=`${e+1} / ${t}`,i.fill=s,i.fontStyle=n,i.fontWeight=r,i.fontSize=o,i.fontFamily=a}updateMarkers(){const{nextButton:e,previousButton:t,nextButtonDisabled:i,previousButtonDisabled:s,activeStyle:n,inactiveStyle:r,highlightStyle:o,highlightActive:a}=this,l=(c,p)=>p?r:c===a?o:n;this.updateMarker(e,l("next",i)),this.updateMarker(t,l("previous",s))}updateMarker(e,t){const{size:i}=this.marker;e.size=i,e.fill=t.fill,e.fillOpacity=t.fillOpacity??1,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.strokeOpacity=t.strokeOpacity}enableOrDisableButtons(){const{currentPage:e,totalPages:t}=this,i=t===0,s=e===t-1,n=e===0;this.nextButtonDisabled=s||i,this.previousButtonDisabled=n||i}setPage(e){e=St(0,e,Math.max(0,this.totalPages-1)),this.currentPage!==e&&(this.currentPage=e,this.onPaginationChanged())}getCursor(e){return{previous:this.previousButtonDisabled,next:this.nextButtonDisabled}[e]?void 0:"pointer"}onClick(e,t){e.preventDefault(),t==="next"&&!this.nextButtonDisabled?(this.incrementPage(),this.onPaginationChanged()):t==="previous"&&!this.previousButtonDisabled&&(this.decrementPage(),this.onPaginationChanged())}onMouseHover(e){this.highlightActive=e,this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const e=Fh(Xr(this.marker.shape||df));this.previousButton=new e,this.nextButton=new e,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(e){e.append(this.group)}getBBox(){return this.group.getBBox()}computeCSSBounds(){const e=ji.toCanvas(this.previousButton),t=ji.toCanvas(this.nextButton);return{prev:e,next:t}}};Vh.className="Pagination";A([O(Ye)],Vh.prototype,"marker",2);A([O(Ye)],Vh.prototype,"activeStyle",2);A([O(Ye)],Vh.prototype,"inactiveStyle",2);A([O(Ye)],Vh.prototype,"highlightStyle",2);A([O(Ye)],Vh.prototype,"label",2);var KJ=class{constructor(e,t){this.idPrefix=t,this.dirty=!0,this.destroyFns=new r_,this.itemList=e.proxyInteractionService.createProxyContainer({type:"list",domManagerId:`${t}-toolbar`,classList:["ag-charts-proxy-legend-toolbar"],ariaLabel:{id:"ariaLabelLegend"}}),this.paginationGroup=e.proxyInteractionService.createProxyContainer({type:"group",domManagerId:`${t}-pagination`,classList:["ag-charts-proxy-legend-pagination"],ariaLabel:{id:"ariaLabelLegendPagination"},ariaOrientation:"horizontal"}),this.itemDescription=Xt("p"),this.itemDescription.style.display="none",this.itemDescription.id=`${t}-ariaDescription`,this.itemDescription.textContent=this.getItemAriaDescription(e.localeManager),this.itemList.getElement().append(this.itemDescription)}destroy(){this.destroyFns.destroy()}initLegendList(e){if(!this.dirty)return;const{ctx:t,itemSelection:i,datumReader:s,itemListener:n}=e,r=t.localeManager,o=i.length;i.each((a,l,c)=>{var g;(g=a.proxyButton)==null||g.destroy(),a.proxyButton=t.proxyInteractionService.createProxyElement({type:"listswitch",textContent:this.getItemAriaText(r,s.getItemLabel(l),c,o),ariaChecked:!!a.datum.enabled,ariaDescribedBy:this.itemDescription.id,parent:this.itemList});const p=a.proxyButton;p.addListener("click",f=>n.onClick(f.sourceEvent,a.datum,p)),p.addListener("dblclick",f=>n.onDoubleClick(f.sourceEvent,a.datum)),p.addListener("mouseenter",f=>n.onHover(f.sourceEvent,a)),p.addListener("mouseleave",()=>n.onLeave()),p.addListener("contextmenu",f=>n.onContextClick(f.sourceEvent,a)),p.addListener("blur",()=>n.onLeave()),p.addListener("focus",f=>n.onHover(f.sourceEvent,a))}),this.dirty=!1}update(e){this.updateVisibility(e.visible),e.visible&&(this.initLegendList(e),this.updateItemProxyButtons(e),this.updatePaginationProxyButtons(e))}updateVisibility(e){this.itemList.setHidden(!e),this.paginationGroup.setHidden(!e)}updateItemProxyButtons({itemSelection:e,group:t,pagination:i,interactive:s}){const n=ji.toCanvas(t);this.itemList.setBounds(n);const r=Math.max(...e.nodes().map(o=>o.getBBox().height));e.each((o,a)=>{if(o.proxyButton){const l=o.pageIndex===i.currentPage,{x:c,y:p,height:g,width:f}=ji.toCanvas(o),y=(r-g)/2,C={x:c-n.x,y:p-y-n.y,height:r,width:f};o.proxyButton.setCursor("pointer"),o.proxyButton.setEnabled(s&&l),o.proxyButton.setBounds(C)}})}updatePaginationProxyButtons(e){var c,p,g,f;const{ctx:t,pagination:i,oldPages:s,newPages:n}=e;this.paginationGroup.setHidden(!i.visible);const r=((s==null?void 0:s.length)??n.length)>1,o=n.length>1;r!==o&&(o?(this.prevButton=t.proxyInteractionService.createProxyElement({type:"button",id:`${this.idPrefix}-prev-page`,textContent:{id:"ariaLabelLegendPagePrevious"},tabIndex:0,parent:this.paginationGroup}),this.prevButton.addListener("click",y=>i.onClick(y.sourceEvent,"previous")),this.prevButton.addListener("mouseenter",()=>i.onMouseHover("previous")),this.prevButton.addListener("mouseleave",()=>i.onMouseHover(void 0)),this.nextButton??(this.nextButton=t.proxyInteractionService.createProxyElement({type:"button",id:`${this.idPrefix}-next-page`,textContent:{id:"ariaLabelLegendPageNext"},tabIndex:0,parent:this.paginationGroup})),this.nextButton.addListener("click",y=>i.onClick(y.sourceEvent,"next")),this.nextButton.addListener("mouseenter",()=>i.onMouseHover("next")),this.nextButton.addListener("mouseleave",()=>i.onMouseHover(void 0))):((c=this.nextButton)==null||c.destroy(),(p=this.prevButton)==null||p.destroy(),this.nextButton=void 0,this.prevButton=void 0));const{prev:a,next:l}=i.computeCSSBounds();(g=this.prevButton)==null||g.setBounds(a),(f=this.nextButton)==null||f.setBounds(l),this.updatePaginationCursors(e)}updatePaginationCursors({pagination:e}){var t,i;(t=this.nextButton)==null||t.setCursor(e.getCursor("next")),(i=this.prevButton)==null||i.setCursor(e.getCursor("previous"))}onDataUpdate(e,t){this.dirty=e.length!==t.length||e.some((i,s,n)=>{const[r,o]=[t[s],e[s]];return r.id!==o.id})}onLocaleChanged(e,t,i){const s=t.length;t.each(({proxyButton:n},r,o)=>{const a=n==null?void 0:n.getElement();if(a!=null){const l=i.getItemLabel(r);a.textContent=this.getItemAriaText(e,l,o,s)}}),this.itemDescription.textContent=this.getItemAriaDescription(e)}onPageChange(e){this.updateItemProxyButtons(e),this.updatePaginationCursors(e)}getItemAriaText(e,t,i,s){return i>=0&&t?(i++,e.t("ariaLabelLegendItem",{label:t,index:i,count:s})):e.t("ariaLabelLegendItemUnknown")}getItemAriaDescription(e){return e.t("ariaDescriptionLegendItem")}};function MA(e,t,i,s){const n={defaultPrevented:!1,apiEvent:{type:e,itemId:t,seriesId:i,event:s,preventDefault:()=>n.defaultPrevented=!0}};return n}var Wh=class extends Xc{constructor(e){super(),this.sourceImage=e,this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1}updateBitmap(e,t,i,s){this.sourceImage=e,this.width=e.width/t,this.height=e.height/t,this.x=i/t,this.y=s/t,this.markDirty()}render(e){const{ctx:t}=e,i=this.sourceImage;i&&(t.globalAlpha=this.opacity,t.drawImage(i,0,0,i.width,i.height,this.x,this.y,this.width,this.height)),super.render(e)}};A([Ze()],Wh.prototype,"x",2);A([Ze()],Wh.prototype,"y",2);A([Ze()],Wh.prototype,"width",2);A([Ze()],Wh.prototype,"height",2);A([Ze()],Wh.prototype,"opacity",2);var _l=class extends kh(lt){constructor(){super({name:"markerLabelGroup"}),this.label=new gs,this.symbolsGroup=new lt({name:"legend-markerLabel-symbols"}),this.bitmap=new Wh,this.bitmapDirty=!0,this.enabled=!0,this.pageIndex=NaN,this._marker=void 0,this._line=void 0;const{marker:e,label:t,line:i}=this;t.textBaseline="middle",t.fontSize=12,t.fontFamily="Verdana, sans-serif",t.fill="black",t.y=1,this.updateSymbols(e,i),this.append([this.symbolsGroup,t])}destroy(){var e;super.destroy(),(e=this.proxyButton)==null||e.destroy()}get marker(){return this._marker}get line(){return this._line}updateSymbols(e,t){this._marker===e&&this._line===t||(this.bitmapDirty=!0,this._marker=e,this._line=t,this.symbolsGroup.clear(),this.symbolsGroup.append([this.bitmap,t,e].filter(Gc)))}setEnabled(e){this.enabled=e,this.refreshVisibilities()}refreshVisibilities(){const e=this.enabled?1:.5;this.label.opacity=e,this.opacity=e,this.bitmap.opacity=e,this.setBitmapVisibility(!this.enabled)}setBitmapVisibility(e){const{line:t,marker:i}=this;i!=null&&(i.visible=!e),t!=null&&(t.visible=!e),this.bitmap.visible=e}update(e,{spriteAAPadding:t,spritePixelRatio:i},s){const{marker:n,line:r}=this,{length:o,spacing:a,isCustomMarker:l}=s;let c=1/0,p=1/0,g=1/0,f=1/0,y=1/0,C=0,x=0;if(n){const{size:P}=n,k=n.constructor.center,_=(P+n.strokeWidth)/2;C=(k.x-.5)*P,x=(k.y-.5)*P,l?(n.x=0,n.y=0,n.translationX=C*P+o/2,n.translationY=x*P,f=n.translationY-_,y=n.translationX-_):(n.x=C+o/2,n.y=x,f=n.y-_,y=n.x-_)}r&&(r.x1=0,r.x2=o,r.y1=0,r.y2=0,r.markDirty(),c=-r.strokeWidth/2,p=r.x1,g=r.x2);const M=Math.min(p,g,y),b=Math.min(c,f),R=(r==null?void 0:r.x2)??-1/0,I=((n==null?void 0:n.x)??0)+((n==null?void 0:n.size)??0)/2;if(this.label.x=Math.max(R,I)+a,this.bitmapDirty){this.setBitmapVisibility(!1);const P=C+(t+M)*i,k=x+(t-b)*i,_=e.renderSprite(this.symbolsGroup,{scale:i,translateX:Math.floor(P),translateY:Math.floor(k)});this.bitmap.updateBitmap(_,i,Math.ceil(-P),Math.ceil(-k)),this.bitmapDirty=!1,this.refreshVisibilities()}}computeBBox(){const{label:e,line:t,marker:i}=this;return this.toParent(lt.computeChildrenBBox([e,t,i].filter(Gc),!1))}};_l.className="MarkerLabel";A([Ms("label")],_l.prototype,"text",2);A([Ms("label")],_l.prototype,"fontStyle",2);A([Ms("label")],_l.prototype,"fontWeight",2);A([Ms("label")],_l.prototype,"fontSize",2);A([Ms("label")],_l.prototype,"fontFamily",2);A([Ms("label","fill")],_l.prototype,"color",2);var au=class extends yt{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};A([O(Ge,{optional:!0})],au.prototype,"maxLength",2);A([O(Zt)],au.prototype,"color",2);A([O(Il,{optional:!0})],au.prototype,"fontStyle",2);A([O(Ll,{optional:!0})],au.prototype,"fontWeight",2);A([O(Ge)],au.prototype,"fontSize",2);A([O(Fe)],au.prototype,"fontFamily",2);A([O(Mn,{optional:!0})],au.prototype,"formatter",2);var Op=class extends yt{constructor(){super(...arguments),this.size=15,this.padding=8}};A([Oh(e=>{var t;return(t=e.parent)==null?void 0:t.onMarkerShapeChange()})],Op.prototype,"shape",2);A([O(Ge)],Op.prototype,"size",2);A([O(Ge)],Op.prototype,"padding",2);A([O(Ge,{optional:!0})],Op.prototype,"strokeWidth",2);A([O(nt)],Op.prototype,"enabled",2);var vD=class extends yt{};A([O(Ge,{optional:!0})],vD.prototype,"strokeWidth",2);A([O(Ge,{optional:!0})],vD.prototype,"length",2);var lu=class extends yt{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.showSeriesStroke=!1,this.marker=new Op,this.label=new au,this.line=new vD}};A([O(Ge,{optional:!0})],lu.prototype,"maxWidth",2);A([O(Ge)],lu.prototype,"paddingX",2);A([O(Ge)],lu.prototype,"paddingY",2);A([O(nt)],lu.prototype,"showSeriesStroke",2);A([O(Ye)],lu.prototype,"marker",2);A([O(Ye)],lu.prototype,"label",2);A([O(Ye)],lu.prototype,"line",2);var yD=class extends yt{};A([O(Mn,{optional:!0})],yD.prototype,"legendItemClick",2);A([O(Mn,{optional:!0})],yD.prototype,"legendItemDoubleClick",2);var Vg="legend-visibility",yb="legend-other-series",Yn=class extends yt{constructor(e){super(),this.ctx=e,this.id=Qr(this),this.group=new yn({name:"legend",zIndex:13}),this.itemSelection=Ji.select(this.group,_l),this.spriteRenderer=void 0,this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this._symbolsDirty=!0,this.toggleSeries=!0,this.item=new lu,this.listeners=new yD,this.enabled=!0,this.position="bottom",this.spacing=20,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new Vh(t=>e.updateService.update(t),t=>this.updatePageNumber(t)),this.pagination.attachPagination(this.group),this.destroyFns.push(e.contextMenuRegistry.registerDefaultAction({id:Vg,type:"legend",label:"contextMenuToggleSeriesVisibility",action:t=>this.contextToggleVisibility(t)}),e.contextMenuRegistry.registerDefaultAction({id:yb,type:"legend",label:"contextMenuToggleOtherSeries",action:t=>this.contextToggleOtherSeries(t)}),e.legendManager.addListener("legend-change",this.onLegendDataChange.bind(this))),this.destroyFns.push(e.layoutManager.registerElement(1,t=>this.positionLegend(t)),e.localeManager.addListener("locale-changed",()=>this.onLocaleChanged()),()=>this.group.remove()),this.domProxy=new KJ(this.ctx,this.id),this.ctx.historyManager.addMementoOriginator(e.legendManager)}set data(e){this.domProxy.onDataUpdate(this._data,e),this._data=e,this._symbolsDirty=!0,this.updateGroupVisibility()}get data(){return this._data}onLegendDataChange({legendData:e=[]}){if(!this.enabled)return;const t=e.filter(s=>!s.hideInLegend),{data:i}=this;Sh(e,i)||(this.data=t)}destroy(){this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-toolbar`),this.ctx.domManager.removeChild("canvas-overlay",`${this.id}-pagination`),this.destroyFns.forEach(e=>e()),this.pagination.destroy(),this.itemSelection.clear(),this.domProxy.destroy()}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty()}getOrientation(){if(this.orientation!==void 0)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}set visible(e){this._visible=e,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(e){e.appendChild(this.group)}getItemLabel(e){const{ctx:{callbackCache:t}}=this,{formatter:i}=this.item.label;if(i){const s=e.datum;return t.call(i,{itemId:e.itemId,value:e.label.text,seriesId:e.seriesId,...s&&{datum:s}})}return e.label.text}calcLayout(e,t){const{paddingX:i,paddingY:s,label:n,maxWidth:r,label:{maxLength:o=1/0,fontStyle:a,fontWeight:l,fontSize:c,fontFamily:p}}=this.item,g=[...this.data];this.reverseOrder&&g.reverse(),this.itemSelection.update(g);const f=[],y=Ei.toFontString(n),x=r??e*.8,M=this.calculateSpriteDimensions();if(this.spriteRenderer??(this.spriteRenderer=new y_),this.spriteRenderer.resize(M),this.itemSelection.each((V,U)=>{V.fontStyle=a,V.fontWeight=l,V.fontSize=c,V.fontFamily=p;const $=this.updateMarkerLabel(this.spriteRenderer,V,U,M),te=U.itemId??U.id,be=(this.getItemLabel(U)??"<unknown>").replace(/\r?\n/g," ");V.text=this.truncate(be,o,x,$,y,te),f.push(V.getBBox())}),this._symbolsDirty=!1,e=Math.max(1,e),t=Math.max(1,t),!isFinite(e))return{};const b=this.size,R=this.oldSize;b[0]=e,b[1]=t,(b[0]!==R[0]||b[1]!==R[1])&&(R[0]=b[0],R[1]=b[1]);const{pages:I,maxPageHeight:P,maxPageWidth:k}=this.updatePagination(f,e,t),_=this.pages;this.pages=I,this.maxPageSize=[k-i,P-s];const B=this.pagination.currentPage,H=this.pages[B];return this.pages.length<1||!H?(this.visible=!1,{oldPages:_}):(this.visible=!0,this.updatePositions(B),this.update(),{oldPages:_})}isCustomMarker(e,t){return e&&t!==void 0&&typeof t!="string"}calcSymbolsEnabled(e){const{showSeriesStroke:t,marker:i}=this.item,s=!!i.enabled||!t||(e.marker.enabled??!0),n=!!(e.line&&t),r=this.isCustomMarker(s,e.marker.shape);return{markerEnabled:s,lineEnabled:n,isCustomMarker:r}}calcSymbolsLengths(e){const{marker:t,line:i}=this.item,{markerEnabled:s,lineEnabled:n}=this.calcSymbolsEnabled(e),{strokeWidth:r}=this.getMarkerStyles(e),{strokeWidth:o}=n?this.getLineStyles(e):{strokeWidth:0};let a;const{shape:l}=e.marker;if(this.isCustomMarker(s,l)){const g=Xr(l),f=new g;f.updatePath();const y=f.getBBox();a=Math.max(y.width,y.height)}const c=s?t.size:0,p=n?i.length??25:0;return{markerLength:c,markerStrokeWidth:r,lineLength:p,lineStrokeWidth:o,customMarkerSize:a}}calculateSpriteDimensions(){let e=0,t=0,i=0,s=0;return this.itemSelection.each((r,o)=>{const{symbol:a}=o,{markerLength:l,markerStrokeWidth:c,lineLength:p,lineStrokeWidth:g,customMarkerSize:f=-1/0}=this.calcSymbolsLengths(a),y=l+c;s=Math.max(s,p,f,l),t=Math.max(t,p,f,y),i=Math.max(i,g,y),e=Math.max(e,c+.5)}),t+=e*2,i+=e*2,{spritePixelRatio:Mi().devicePixelRatio,spriteAAPadding:e,spriteWidth:t,spriteHeight:i,markerWidth:s}}updateMarkerLabel(e,t,i,s){const{marker:n,paddingX:r}=this.item,{markerWidth:o}=s,{symbol:a}=i;let l=r;const{markerEnabled:c,lineEnabled:p,isCustomMarker:g}=this.calcSymbolsEnabled(a);if(this._symbolsDirty){const{shape:M=a.marker.shape}=n,b=Xr(M);t.updateSymbols(new b({zIndex:1}),new fr({zIndex:0}))}const f=n.padding,{marker:y,line:C}=t;y!=null&&(y.size=c||!p?n.size:0);const x={length:o,spacing:f,isCustomMarker:g};if((c||p)&&(l+=f+o),y){const{strokeWidth:M,fill:b,stroke:R,fillOpacity:I,strokeOpacity:P}=this.getMarkerStyles(a);y.fill=b,y.stroke=R,y.strokeWidth=M,y.fillOpacity=I,y.strokeOpacity=P}if(!p&&C!=null)C.strokeWidth=0;else if(C){const M=this.getLineStyles(a);C.stroke=M.stroke,C.strokeOpacity=M.strokeOpacity,C.strokeWidth=M.strokeWidth,C.lineDash=M.lineDash}return t.update(e,s,x),l}truncate(e,t,i,s,n,r){let o=!1;e.length>t&&(e=e.substring(0,t),o=!0);const a=Tl.getMeasurer({font:n}),l=FR.truncateLine(e,a,i-s,o);return l.endsWith(Ei.EllipsisChar)?this.truncatedItems.add(r):this.truncatedItems.delete(r),l}updatePagination(e,t,i){const s=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,e.length);this.pagination.orientation=s,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:r,maxPageHeight:o,maxPageWidth:a,paginationBBox:l,paginationVertical:c}=this.calculatePagination(e,t,i),p=r.findIndex(I=>I.endIndex>=n);this.pagination.currentPage=St(0,p,r.length-1);const{paddingX:g,paddingY:f}=this.item,y=8,C=a-g,x=o-f;let M=0,b=-l.y-this.item.marker.size/2;c?b+=x+y:(M+=-l.x+C+y,b+=(x-l.height)/2),this.pagination.translationX=M,this.pagination.translationY=b,this.pagination.update(),this.pagination.updateMarkers();let R=0;return this.itemSelection.each((I,P,k)=>{var _;k>(((_=r[R])==null?void 0:_.endIndex)??1/0)&&R++,I.pageIndex=R}),{maxPageHeight:o,maxPageWidth:a,pages:r}}calculatePagination(e,t,i){const{paddingX:s,paddingY:n}=this.item,r=this.getOrientation(),o=["left","right"].includes(this.position);let a=this.pagination.getBBox(),l=new Ue(0,0,0,0),c=[],p=0,g=0,f=0;const y=x=>x.width===a.width&&x.height===a.height,C=this.maxWidth!==void 0&&this.maxHeight!==void 0;do{if(f++>10){_e.warn("unable to find stable legend layout.");break}a=l;const x=t-(o?0:a.width),M=i-(o?a.height:0),b=zJ({orientation:r,bboxes:e,maxHeight:M,maxWidth:x,itemPaddingY:n,itemPaddingX:s,forceResult:C});c=(b==null?void 0:b.pages)??[],p=(b==null?void 0:b.maxPageWidth)??0,g=(b==null?void 0:b.maxPageHeight)??0;const R=c.length;if(this.pagination.visible=R>1,this.pagination.totalPages=R,this.pagination.update(),this.pagination.updateMarkers(),l=this.pagination.getBBox(),!this.pagination.visible)break}while(!y(l));return{maxPageWidth:p,maxPageHeight:g,pages:c,paginationBBox:l,paginationVertical:o}}updatePositions(e=0){const{item:{paddingY:t},itemSelection:i,pages:s}=this;if(s.length<1||!s[e])return;const{columns:n,startIndex:r,endIndex:o}=s[e];let a=0,l=0;const c=n.length,p=n[0].indices.length,g=this.getOrientation()==="horizontal",f=n[0].bboxes[0].height+t,y=[];i.each((C,x,M)=>{if(M<r||M>o){C.visible=!1;return}const b=M-r;let R,I;g?(R=b%c,I=Math.floor(b/c)):(R=Math.floor(b/p),I=b%p),C.visible=!0;const P=n[R];P&&(l=Math.floor(f*I),a=Math.floor(y[I]??0),y[I]=(y[I]??0)+P.columnWidth,C.translationX=a,C.translationY=l)})}updatePageNumber(e){const{itemSelection:t,group:i,pagination:s,pages:n,toggleSeries:r}=this,{startIndex:o,endIndex:a}=n[e];o===0?this.paginationTrackingIndex=0:e===n.length-1?this.paginationTrackingIndex=a:this.paginationTrackingIndex=Math.floor((o+a)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(e),this.domProxy.onPageChange({itemSelection:t,group:i,pagination:s,interactive:r}),this.ctx.updateService.update(6)}update(){const{label:{color:e}}=this.item;this.itemSelection.each((t,i)=>{t.setEnabled(i.enabled),t.color=e}),this.updateContextMenu()}updateContextMenu(){const{toggleSeries:e,ctx:{contextMenuRegistry:t}}=this;e?(t.hideAction(Vg),t.hideAction(yb)):(t.showAction(Vg),t.showAction(yb))}getLineStyles(e){const{stroke:t,strokeOpacity:i=1,strokeWidth:s,lineDash:n}=e.line??{},r=Math.min(2,s??1);return{stroke:t,strokeOpacity:i,strokeWidth:this.item.line.strokeWidth??r,lineDash:n}}getMarkerStyles(e){const{fill:t,stroke:i,strokeOpacity:s=1,fillOpacity:n=1,strokeWidth:r}=e.marker,o=Math.min(2,r??1);return{fill:t,stroke:i,strokeOpacity:s,fillOpacity:n,strokeWidth:this.item.marker.strokeWidth??o}}computePagedBBox(){const e=lt.computeChildrenBBox(this.group.children());if(this.pages.length>1){const[t,i]=this.maxPageSize;e.height=Math.max(i,e.height),e.width=Math.max(t,e.width)}return e}findNode(e){const{datum:t,proxyButton:i}=this.itemSelection.select(s=>{var n;return((n=s.datum)==null?void 0:n.itemId)===e.itemId})[0]??{};if(t===void 0||i===void 0)throw new Error(`AG Charts - Missing required properties { datum: ${t}, proxyButton: ${JSON.stringify(i)} }`);return{datum:t,proxyButton:i}}contextToggleVisibility(e){const{datum:t,proxyButton:i}=this.findNode(e);this.doClick(e.event,t,i)}contextToggleOtherSeries(e){this.doDoubleClick(e.event,this.findNode(e).datum)}onContextClick(e,t){var a;const i=t.datum;this.preventHidingAll&&((a=this.contextMenuDatum)!=null&&a.enabled)&&this.getVisibleItemCount()<=1?this.ctx.contextMenuRegistry.disableAction(Vg):this.ctx.contextMenuRegistry.enableAction(Vg);const{offsetX:s,offsetY:n}=e,{x:r,y:o}=ji.toCanvasPoint(t,s,n);this.ctx.contextMenuRegistry.dispatchContext("legend",{sourceEvent:e,canvasX:r,canvasY:o},{legendItem:i})}onClick(e,t,i){this.doClick(e,t,i)&&e.preventDefault()}getVisibleItemCount(){return this.ctx.chartService.series.flatMap(e=>e.getLegendData("category")).filter(e=>e.enabled).length}doClick(e,t,i){const{listeners:{legendItemClick:s},ctx:{chartService:n,highlightManager:r},preventHidingAll:o,toggleSeries:a}=this;if(!t)return!1;const{legendType:l,seriesId:c,itemId:p,enabled:g}=t,f=n.series.find(x=>x.id===c);if(!f)return!1;let y=g;const C=MA("click",p,f.id,e);return s==null||s(C.apiEvent),C.defaultPrevented||(a&&(y=!g,o&&!y&&this.getVisibleItemCount()<2&&(y=!0),i.setChecked(y),this.ctx.chartEventManager.legendItemClick(l,f,p,y,t.legendItemName)),y?r.updateHighlight(this.id,{series:f,itemId:p,datum:void 0}):r.updateHighlight(this.id),this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0,skipAnimations:t.skipAnimations??!1})),!0}onDoubleClick(e,t){this.doDoubleClick(e,t)&&e.preventDefault()}doDoubleClick(e,t){const{listeners:{legendItemDoubleClick:i},ctx:{chartService:s},toggleSeries:n}=this;if(s.mode==="integrated"||!t)return!1;const{legendType:r,id:o,itemId:a,seriesId:l}=t,c=s.series.find(g=>g.id===o);if(!c)return!1;const p=MA("dblclick",a,c.id,e);if(i==null||i(p.apiEvent),p.defaultPrevented)return!0;if(n){const g=s.series.flatMap(C=>C.getLegendData("category")),f=g.filter(C=>C.enabled).length,y=g.find(C=>C.itemId===a&&C.seriesId===l);this.ctx.chartEventManager.legendItemDoubleClick(r,c,a,(y==null?void 0:y.enabled)??!1,f,y==null?void 0:y.legendItemName)}return this.ctx.legendManager.update(),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),!0}toTooltipMeta(e,t){let i;if(e instanceof FocusEvent){const{x:r,y:o}=ji.toCanvas(t).computeCenter();i={type:"keyboard",canvasX:r,canvasY:o}}else{e.preventDefault();const{x:r,y:o}=ji.toCanvasPoint(t,e.offsetX,e.offsetY);i={type:"hover",canvasX:r,canvasY:o}}const{canvasX:s,canvasY:n}=i;return{canvasX:s,canvasY:n,lastPointerEvent:i,showArrow:!1}}onHover(e,t){if(!this.enabled)throw new Error("AG Charts - onHover handler called on disabled legend");this.pagination.setPage(t.pageIndex);const i=t.datum,s=i?this.ctx.chartService.series.find(n=>n.id===(i==null?void 0:i.id)):void 0;if(i&&this.truncatedItems.has(i.itemId??i.id)){const n=this.toTooltipMeta(e,t);this.ctx.tooltipManager.updateTooltip(this.id,n,{title:this.getItemLabel(i)})}else this.ctx.tooltipManager.removeTooltip(this.id);i!=null&&i.enabled&&s?this.updateHighlight({series:s,itemId:i==null?void 0:i.itemId,datum:void 0}):this.updateHighlight()}onLeave(){this.ctx.tooltipManager.removeTooltip(this.id),this.updateHighlight()}updateHighlight(e){const t=this.ctx.interactionManager.getState();t===32?this.ctx.highlightManager.updateHighlight(this.id,e):t===2&&(this.pendingHighlightDatum=e,this.ctx.animationManager.onBatchStop(()=>{this.ctx.highlightManager.updateHighlight(this.id,this.pendingHighlightDatum)}))}onLocaleChanged(){this.domProxy.onLocaleChanged(this.ctx.localeManager,this.itemSelection,this)}positionLegend(e){const t=this.positionLegendScene(e);this.positionLegendDOM(t)}positionLegendScene(e){if(!this.enabled||!this.data.length)return;const{layoutBox:t}=e,{x:i,y:s,width:n,height:r}=t,[o,a]=this.calculateLegendDimensions(t),{oldPages:l}=this.calcLayout(o,a),c=this.computePagedBBox(),p=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return r-c.height;case"right":default:return n-c.width}};if(this.visible){const g=this.spacing;let f,y;switch(this.position){case"top":case"bottom":f=(n-c.width)/2,y=p(),t.shrink(c.height+g,this.position);break;case"left":case"right":default:f=p(),y=(r-c.height)/2,t.shrink(c.width+g,this.position)}this.group.translationX=Math.floor(i+f-c.x),this.group.translationY=Math.floor(s+y-c.y)}return l}positionLegendDOM(e){const{ctx:t,itemSelection:i,pagination:s,pages:n,toggleSeries:r,group:o}=this,a=this.visible&&this.enabled;this.domProxy.update({visible:a,interactive:r,ctx:t,itemSelection:i,group:o,pagination:s,oldPages:e,newPages:n,datumReader:this,itemListener:this})}calculateLegendDimensions(e){const{width:t,height:i}=e,s=t/i,n=.5,r=.2,o=.25;let a,l;switch(this.position){case"top":case"bottom":{const c=s<1?Math.min(n,r*(1/s)):r;a=this.maxWidth?Math.min(this.maxWidth,t):t,l=this.maxHeight?Math.min(this.maxHeight,i):Math.round(i*c);break}case"left":case"right":default:{const c=s>1?Math.min(n,o*s):o;a=this.maxWidth?Math.min(this.maxWidth,t):Math.round(t*c),l=this.maxHeight?Math.min(this.maxHeight,i):i}}return[a,l]}};Yn.className="Legend";A([O(nt)],Yn.prototype,"toggleSeries",2);A([O(Ye)],Yn.prototype,"pagination",2);A([O(Ye)],Yn.prototype,"item",2);A([O(Ye)],Yn.prototype,"listeners",2);A([Oh((e,t,i)=>{if(e.updateGroupVisibility(),t===i)return;const{ctx:{legendManager:s,stateManager:n}}=e;i===!1&&t===!0&&n.restoreState(s)}),O(nt)],Yn.prototype,"enabled",2);A([O(vR)],Yn.prototype,"position",2);A([O(Ge,{optional:!0})],Yn.prototype,"maxWidth",2);A([O(Ge,{optional:!0})],Yn.prototype,"maxHeight",2);A([O(nt,{optional:!0})],Yn.prototype,"reverseOrder",2);A([O(pi(["horizontal","vertical"],"an orientation"),{optional:!0})],Yn.prototype,"orientation",2);A([O(nt,{optional:!0})],Yn.prototype,"preventHidingAll",2);A([O(Ge)],Yn.prototype,"spacing",2);var YJ={type:"legend",optionsKey:"legend",identifier:"category",chartTypes:["cartesian","polar","hierarchy","topology","flow-proportion","standalone","gauge"],moduleFactory:e=>new Yn(e),packageType:"community",removable:"standalone-only"},P1={};ko(P1,{CARTESIAN_AXIS_TYPE:()=>N1,CARTESIAN_POSITION:()=>k1,FONT_SIZE:()=>F1,POLAR_AXIS_SHAPE:()=>_1,POLAR_AXIS_TYPE:()=>O1});var F1=(e=>(e[e.SMALL=12]="SMALL",e[e.MEDIUM=13]="MEDIUM",e[e.LARGE=17]="LARGE",e))(F1||{}),k1=(e=>(e.TOP="top",e.RIGHT="right",e.BOTTOM="bottom",e.LEFT="left",e))(k1||{}),N1=(e=>(e.CATEGORY="category",e.GROUPED_CATEGORY="grouped-category",e.ORDINAL_TIME="ordinal-time",e.NUMBER="number",e.TIME="time",e.LOG="log",e))(N1||{}),O1=(e=>(e.ANGLE_CATEGORY="angle-category",e.ANGLE_NUMBER="angle-number",e.RADIUS_CATEGORY="radius-category",e.RADIUS_NUMBER="radius-number",e))(O1||{}),_1=(e=>(e.CIRCLE="circle",e.POLYGON="polygon",e))(_1||{}),CD={};ko(CD,{DEFAULT_ANNOTATION_BACKGROUND_FILL:()=>Xn,DEFAULT_ANNOTATION_COLOR:()=>Zn,DEFAULT_ANNOTATION_HANDLE_FILL:()=>_S,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>zS,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>HS,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>LD,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>TD,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>BS,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>GS,DEFAULT_AXIS_GRID_COLOUR:()=>qc,DEFAULT_AXIS_LINE_COLOUR:()=>ff,DEFAULT_BACKGROUND_COLOUR:()=>Wf,DEFAULT_CAPTION_ALIGNMENT:()=>Nc,DEFAULT_CAPTION_LAYOUT_STYLE:()=>kc,DEFAULT_COLOURS:()=>B1,DEFAULT_CROSS_LINES_COLOUR:()=>np,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:()=>$n,DEFAULT_FIBONACCI_STROKES:()=>ID,DEFAULT_FONT_FAMILY:()=>ki,DEFAULT_FUNNEL_SERIES_COLOR_RANGE:()=>Ea,DEFAULT_GAUGE_SERIES_COLOR_RANGE:()=>eo,DEFAULT_GRIDLINE_ENABLED:()=>oa,DEFAULT_HIERARCHY_FILLS:()=>kS,DEFAULT_HIERARCHY_STROKES:()=>NS,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>cu,DEFAULT_INVERTED_BACKGROUND_COLOUR:()=>MS,DEFAULT_INVERTED_LABEL_COLOUR:()=>xD,DEFAULT_LABEL_COLOUR:()=>ds,DEFAULT_MUTED_LABEL_COLOUR:()=>Uc,DEFAULT_NAVIGATOR_STROKE:()=>RS,DEFAULT_PADDING:()=>al,DEFAULT_POLAR_SERIES_STROKE:()=>PS,DEFAULT_SEPARATION_LINES_COLOUR:()=>Mm,DEFAULT_SHADOW_COLOUR:()=>uu,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>FS,DEFAULT_TEXTBOX_COLOR:()=>jS,DEFAULT_TEXTBOX_FILL:()=>VS,DEFAULT_TEXTBOX_STROKE:()=>WS,DEFAULT_TEXT_ANNOTATION_COLOR:()=>OS,DEFAULT_TOOLBAR_POSITION:()=>Rm,IS_COMMUNITY:()=>SD,IS_DARK_THEME:()=>sp,IS_ENTERPRISE:()=>wD,PALETTE_ALT_DOWN_FILL:()=>DD,PALETTE_ALT_DOWN_STROKE:()=>MD,PALETTE_ALT_NEUTRAL_FILL:()=>ED,PALETTE_ALT_NEUTRAL_STROKE:()=>AS,PALETTE_ALT_UP_FILL:()=>RD,PALETTE_ALT_UP_STROKE:()=>bD,PALETTE_DOWN_FILL:()=>LS,PALETTE_DOWN_STROKE:()=>ES,PALETTE_NEUTRAL_FILL:()=>TS,PALETTE_NEUTRAL_STROKE:()=>_p,PALETTE_UP_FILL:()=>IS,PALETTE_UP_STROKE:()=>DS});var sp=Symbol("is-dark-theme"),SD=Symbol("is-community"),wD=Symbol("is-enterprise"),ki=Symbol("default-font"),ds=Symbol("default-label-colour"),xD=Symbol("default-inverted-label-colour"),cu=Symbol("default-inside-series-label-colour"),Uc=Symbol("default-muted-label-colour"),qc=Symbol("default-axis-grid-colour"),ff=Symbol("default-axis-line-colour"),np=Symbol("default-cross-lines-colour"),Mm=Symbol("default-separation-lines-colour"),Wf=Symbol("default-background-colour"),MS=Symbol("default-inverted-background-colour"),uu=Symbol("default-shadow-colour"),B1=Symbol("default-colours"),al=Symbol("default-padding"),kc=Symbol("default-caption-layout-style"),Nc=Symbol("default-caption-alignment"),RS=Symbol("default-navigator-stroke"),DS=Symbol("palette-up-stroke"),ES=Symbol("palette-down-stroke"),IS=Symbol("palette-up-fill"),LS=Symbol("palette-down-fill"),_p=Symbol("palette-neutral-stroke"),TS=Symbol("palette-neutral-fill"),bD=Symbol("palette-alt-up-stroke"),MD=Symbol("palette-alt-down-stroke"),RD=Symbol("palette-alt-up-fill"),DD=Symbol("palette-alt-down-fill"),ED=Symbol("palette-gray-fill"),AS=Symbol("palette-gray-stroke"),PS=Symbol("default-polar-series-stroke"),$n=Symbol("default-diverging-series-colour-range"),FS=Symbol("default-sparkline-crosshair-stroke"),eo=Symbol("default-gauge-series-colour-range"),Ea=Symbol("default-funnel-series-colour-range"),kS=Symbol("default-hierarchy-fills"),NS=Symbol("default-hierarchy-strokes"),Zn=Symbol("default-annotation-stroke"),ID=Symbol("default-hierarchy-strokes"),OS=Symbol("default-text-annotation-color"),Xn=Symbol("default-annotation-background-fill"),_S=Symbol("default-annotation-handle-fill"),BS=Symbol("default-annotation-statistics-fill"),GS=Symbol("default-annotation-statistics-stroke"),zS=Symbol("default-annotation-statistics-color"),HS=Symbol("default-annotation-statistics-divider-stroke"),LD=Symbol("default-annotation-statistics-fill"),TD=Symbol("default-annotation-statistics-stroke"),VS=Symbol("default-textbox-fill"),WS=Symbol("default-textbox-stroke"),jS=Symbol("default-textbox-color"),Rm=Symbol("default-toolbar-position"),oa=Symbol("default-gridline-enabled");function G1(e,t){return i=>t(i)?[{...e[0],position:e[1].position},{...e[1],position:e[0].position}]:e}function Dm({takeColors:e}){const{fills:[t],strokes:[i]}=e(1);return{fill:t,stroke:i}}function AD(e){return{marker:Dm(e)}}function fC(e,t,i,s,n){const{addPhaseFn:r,updatePhaseFn:o,removePhaseFn:a}=n,l=(c,p,g)=>{i.animate({id:`${e}_${t}_${p.id}_${c}`,groupId:e,from:0,to:1,ease:Lf,collapsable:!1,onUpdate(f,y){y&&c!=="removed"||(p.path.clear(!0),g(f,p),p.checkPathDirty())},onStop(){c==="added"&&(p.path.clear(!0),g(1,p),p.checkPathDirty())},phase:wn[c]})};for(const c of s)i.isSkipped()||(l("removed",c,a),l("updated",c,o)),l("added",c,r)}function zt({id:e},t,i,...s){wa(e,t,i,s,{opacity:0},{opacity:1},{phase:"trailing"})}function Oc({id:e},t,i,...s){wa(e,t,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function Bl(e){return{opacity:1}}var PD=class extends yt{constructor(){super(...arguments),this._dirty=!0}markDirty(){this._dirty=!0}markClean(e){this._dirty=!1}isDirty(){return this._dirty}},_o=class extends PD{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};A([O(nt),Ze()],_o.prototype,"enabled",2);A([O(Zt),Ze()],_o.prototype,"color",2);A([O(_t),Ze()],_o.prototype,"xOffset",2);A([O(_t),Ze()],_o.prototype,"yOffset",2);A([O(Ge),Ze()],_o.prototype,"blur",2);var z1=Jt(e=>n1(e)||typeof e=="function","a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),Qn=class extends PD{constructor(){super(...arguments),this.enabled=!0,this.shape="circle",this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:e,shape:t,fill:i,fillOpacity:s,stroke:n,strokeWidth:r,strokeOpacity:o}=this;return{size:e,shape:t,fill:i,fillOpacity:s,stroke:n,strokeWidth:r,strokeOpacity:o}}getDiameter(){return this.size+this.strokeWidth}};A([O(nt),Ze()],Qn.prototype,"enabled",2);A([O(z1),Ze()],Qn.prototype,"shape",2);A([O(Ge),Ze()],Qn.prototype,"size",2);A([O(Zt,{optional:!0}),Ze()],Qn.prototype,"fill",2);A([O($t),Ze()],Qn.prototype,"fillOpacity",2);A([O(Zt,{optional:!0}),Ze()],Qn.prototype,"stroke",2);A([O(Ge),Ze()],Qn.prototype,"strokeWidth",2);A([O($t),Ze()],Qn.prototype,"strokeOpacity",2);A([O(Mn,{optional:!0}),Ze()],Qn.prototype,"itemStyler",2);var H1=class extends yt{constructor(){super(...arguments),this.enabled=!1}};A([O(nt)],H1.prototype,"enabled",2);var Xs=class extends yt{constructor(){super(...arguments),this.enabled=!0,this.interaction=new H1,this.position=new Tp,this.range=void 0,this.class=void 0}formatTooltip(e,t){var s;const i=(s=this.renderer)==null?void 0:s.call(this,t);return typeof i=="string"?i:i!=null?{...e,...i}:e}};A([O(nt)],Xs.prototype,"enabled",2);A([O(nt,{optional:!0})],Xs.prototype,"showArrow",2);A([O(Mn,{optional:!0})],Xs.prototype,"renderer",2);A([O(Ye)],Xs.prototype,"interaction",2);A([O(Ye)],Xs.prototype,"position",2);A([O(JC,{optional:!0})],Xs.prototype,"range",2);A([O(Fe,{optional:!0})],Xs.prototype,"class",2);var V1=pi(["linear","smooth","step"],"a line style"),W1=pi(["start","middle","end"]),Bp=class extends yt{constructor(){super(...arguments),this.type="linear",this.tension=1,this.position="end"}};A([O(V1)],Bp.prototype,"type",2);A([O($t)],Bp.prototype,"tension",2);A([O(W1)],Bp.prototype,"position",2);var ns=class extends Nl{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Bp,this.shadow=new _o,this.marker=new Qn,this.label=new vs,this.tooltip=new Xs,this.connectMissingData=!1}};A([O(Fe)],ns.prototype,"xKey",2);A([O(Fe,{optional:!0})],ns.prototype,"xName",2);A([O(Fe)],ns.prototype,"yKey",2);A([O(Fe,{optional:!0})],ns.prototype,"yName",2);A([O(Fe,{optional:!0})],ns.prototype,"yFilterKey",2);A([O(Ge,{optional:!0})],ns.prototype,"normalizedTo",2);A([O(Zt)],ns.prototype,"fill",2);A([O($t)],ns.prototype,"fillOpacity",2);A([O(Zt)],ns.prototype,"stroke",2);A([O(Ge)],ns.prototype,"strokeWidth",2);A([O($t)],ns.prototype,"strokeOpacity",2);A([O(El)],ns.prototype,"lineDash",2);A([O(Ge)],ns.prototype,"lineDashOffset",2);A([O(Ye)],ns.prototype,"interpolation",2);A([O(Ye)],ns.prototype,"shadow",2);A([O(Ye)],ns.prototype,"marker",2);A([O(Ye)],ns.prototype,"label",2);A([O(Ye)],ns.prototype,"tooltip",2);A([O(nt)],ns.prototype,"connectMissingData",2);function fa(e){switch(e.type){case"linear":case"step":return[{x:e.x0,y:e.y0},{x:e.x1,y:e.y1}];case"cubic":return[{x:e.cp0x,y:e.cp0y},{x:e.cp3x,y:e.cp3y}]}}function $J(e){const t=fa(e);return t[0].x>t[1].x&&t.reverse(),t}function ZJ(e,t){const{x:i,y:s}=t;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:i,y0:s,x1:i,y1:s};case"step":return{type:"step",moveTo:e.moveTo,x0:i,y0:s,x1:i,y1:s,stepX:i};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:i,cp0y:s,cp1x:i,cp1y:s,cp2x:i,cp2y:s,cp3x:i,cp3y:s}}}function jf(e,t,i){const[s,n]=fa(e),r=n.x!==s.x?(i.x-t.x)/(n.x-s.x):0,o=n.y!==s.y?(i.y-t.y)/(n.y-s.y):0;switch(e.type){case"linear":return{type:"linear",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y};case"cubic":return{type:"cubic",moveTo:e.moveTo,cp0x:t.x,cp0y:t.y,cp1x:i.x-(e.cp2x-s.x)*r,cp1y:i.y-(e.cp2y-s.y)*o,cp2x:i.x-(e.cp1x-s.x)*r,cp2y:i.y-(e.cp1y-s.y)*o,cp3x:i.x,cp3y:i.y};case"step":return{type:"step",moveTo:e.moveTo,x0:t.x,y0:t.y,x1:i.x,y1:i.y,stepX:i.x-(e.stepX-s.x)*r}}}function j1(e,t,i){const{moveTo:s}=e,[n,r]=$J(e),{x:o,y:a}=n,{x:l,y:c}=r;if(i<o)return jf(e,n,n);if(t>l)return jf(e,r,r);switch(e.type){case"linear":{const p=a===c?void 0:(c-a)/(l-o),g=p==null?a:p*(t-o)+a,f=p==null?a:p*(i-o)+a;return{type:"linear",moveTo:s,x0:t,y0:g,x1:i,y1:f}}case"step":if(i<=e.stepX){const p=e.y0;return{type:"step",moveTo:s,x0:t,y0:p,x1:i,y1:p,stepX:i}}else if(t>=e.stepX){const p=e.y1;return{type:"step",moveTo:s,x0:t,y0:p,x1:i,y1:p,stepX:t}}else{const{y0:p,y1:g,stepX:f}=e;return{type:"step",moveTo:s,x0:t,y0:p,x1:i,y1:g,stepX:f}}case"cubic":{const p=uC(e.cp0x,e.cp1x,e.cp2x,e.cp3x,t);let[g,f]=hC(e.cp0x,e.cp0y,e.cp1x,e.cp1y,e.cp2x,e.cp2y,e.cp3x,e.cp3y,p);const y=uC(f[0].x,f[1].x,f[2].x,f[3].x,i);return[f,g]=hC(f[0].x,f[0].y,f[1].x,f[1].y,f[2].x,f[2].y,f[3].x,f[3].y,y),{type:"cubic",moveTo:s,cp0x:f[0].x,cp0y:f[0].y,cp1x:f[1].x,cp1y:f[1].y,cp2x:f[2].x,cp2y:f[2].y,cp3x:f[3].x,cp3y:f[3].y}}}}function XJ(e){const t=[];let i=0,s=NaN,n=NaN;for(const{x:r,y:o}of e){if(i>0){const a=i===1;t.push({type:"linear",moveTo:a,x0:s,y0:n,x1:r,y1:o})}i+=1,s=r,n=o}return t}var QJ={start:0,middle:.5,end:1};function qJ(e,t){const i=[];let s=0,n=NaN,r=NaN;const o=typeof t=="number"?t:QJ[t];for(const{x:a,y:l}of e){if(s>0){const c=s===1,p=n+(a-n)*o;i.push({type:"step",moveTo:c,x0:n,y0:r,x1:a,y1:l,stepX:p})}s+=1,n=a,r=l}return i}var iy=.05;function JJ(e,t){const i=Array.isArray(e)?e:Array.from(e);if(i.length<=1)return[];const s=i.map((r,o)=>{const a=o===0?r:i[o-1],l=o===i.length-1?r:i[o+1],c=o===0||o===i.length-1;if(Math.sign(a.y-r.y)===Math.sign(l.y-r.y))return 0;if(!c){const p=Math.abs(a.y-l.y),g=Math.abs(r.y-a.y)/p,f=Math.abs(r.y-l.y)/p;if(g<=iy||1-g<=iy||f<=iy||1-f<=iy)return 0}return(l.y-a.y)/(l.x-a.x)});s[1]===0&&(s[0]*=2),s[s.length-2]===0&&(s[s.length-1]*=2);const n=[];for(let r=1;r<i.length;r+=1){const o=i[r-1],a=s[r-1],l=i[r],c=s[r],p=l.x-o.x,g=l.y-o.y;let f=p*t/3,y=p*a*t/3,C=p*t/3,x=p*c*t/3;c===0&&Math.abs(y)>Math.abs(g)&&(f*=Math.abs(g/y),y=Math.sign(y)*Math.abs(g)),a===0&&Math.abs(x)>Math.abs(g)&&(C*=Math.abs(g/x),x=Math.sign(x)*Math.abs(g)),n.push({type:"cubic",moveTo:r===1,cp0x:o.x,cp0y:o.y,cp1x:o.x+f,cp1y:o.y+y,cp2x:l.x-C,cp2y:l.y-x,cp3x:l.x,cp3y:l.y})}return n}function is(e,t,i){return(t-e)*i+e}function eee(e,t){const{x0:i,y0:s,x1:n,y1:r}=e,a=(r-s)/(n-i)*(t-i)+s;return{leftCp1x:i,leftCp1y:s,leftCp2x:t,leftCp2y:a,stepX:t,stepY0:a,stepY1:a,rightCp1x:t,rightCp1y:a,rightCp2x:n,rightCp2y:r}}function tee(e,t){const{cp0x:i,cp0y:s,cp1x:n,cp1y:r,cp2x:o,cp2y:a,cp3x:l,cp3y:c}=e,p=uC(i,n,o,l,t),[g,f]=hC(i,s,n,r,o,a,l,c,p),y=g[3].y;return{leftCp1x:g[1].x,leftCp1y:g[1].y,leftCp2x:g[2].x,leftCp2y:g[2].y,stepX:t,stepY0:y,stepY1:y,rightCp1x:f[1].x,rightCp1y:f[1].y,rightCp2x:f[2].x,rightCp2y:f[2].y}}function iee(e){const{x0:t,y0:i,x1:s,y1:n,stepX:r}=e;return{leftCp1x:(t+r)/2,leftCp1y:i,leftCp2x:(t+r)/2,leftCp2y:i,stepX:r,stepY0:i,stepY1:n,rightCp1x:(r+s)/2,rightCp1y:n,rightCp2x:(r+s)/2,rightCp2y:n}}function RA(e,t){return e.type==="linear"?eee(e,t):e.type==="cubic"?tee(e,t):iee(e)}function U1(e,t,i,s,n,r,o){switch(t){case 0:o?e.moveTo(n,r):e.moveTo(i,s);break;case 1:o?e.lineTo(n,r):e.lineTo(i,s);break}}function K1(e,t,i,s,n,r){r?e.lineTo(t,i):e.lineTo(s,n)}function Y1(e,t,i,s,n,r,o,a,l,c){c?e.cubicCurveTo(r,o,s,n,t,i):e.cubicCurveTo(s,n,r,o,a,l)}function $1(e,t,i,s,n,r,o){o?(e.lineTo(r,n),e.lineTo(r,i),e.lineTo(t,i)):(e.lineTo(r,i),e.lineTo(r,n),e.lineTo(s,n))}function NM(e,t,i,s){const[n,r]=fa(t);switch(U1(e,i,n.x,n.y,r.x,r.y,s),t.type){case"linear":K1(e,t.x0,t.y0,t.x1,t.y1,s);break;case"cubic":Y1(e,t.cp0x,t.cp0y,t.cp1x,t.cp1y,t.cp2x,t.cp2y,t.cp3x,t.cp3y,s);break;case"step":$1(e,t.x0,t.y0,t.x1,t.y1,t.stepX,s);break}}function Z1(e,t,i){const[s,n]=fa(e),[r,o]=fa(t),a=is(s.x,r.x,i),l=is(s.y,r.y,i),c=is(n.x,o.x,i),p=is(n.y,o.y,i);return[{x:a,y:l},{x:c,y:p}]}function OM(e,t,i,s,n,r){const[{x:o,y:a},{x:l,y:c}]=Z1(t,i,s);if(U1(e,n,o,a,l,c,r),t.type==="cubic"&&i.type==="cubic"){const p=is(t.cp1x,i.cp1x,s),g=is(t.cp1y,i.cp1y,s),f=is(t.cp2x,i.cp2x,s),y=is(t.cp2y,i.cp2y,s);Y1(e,o,a,p,g,f,y,l,c,r)}else if(t.type==="step"&&i.type==="step"){const p=is(t.stepX,i.stepX,s);$1(e,o,a,l,c,p,r)}else if(t.type==="linear"&&i.type==="linear")K1(e,o,a,l,c,r);else{let p;t.type==="step"?p=t.stepX:i.type==="step"?p=i.stepX:p=(o+l)/2;const g=RA(t,p),f=RA(i,p),y=is(g.leftCp1x,f.leftCp1x,s),C=is(g.leftCp1y,f.leftCp1y,s),x=is(g.leftCp2x,f.leftCp2x,s),M=is(g.leftCp2y,f.leftCp2y,s),b=is(g.stepX,f.stepX,s),R=is(g.stepY0,f.stepY0,s),I=is(g.stepY1,f.stepY1,s),P=is(g.rightCp1x,f.rightCp1x,s),k=is(g.rightCp1y,f.rightCp1y,s),_=is(g.rightCp2x,f.rightCp2x,s),B=is(g.rightCp2y,f.rightCp2y,s);r?(e.cubicCurveTo(_,B,P,k,b,I),e.lineTo(b,R),e.cubicCurveTo(x,M,y,C,o,a)):(e.cubicCurveTo(y,C,x,M,b,R),e.lineTo(b,I),e.cubicCurveTo(P,k,_,B,l,c))}}var X1=(e=>(e[e.Zero=0]="Zero",e[e.Split=1]="Split",e))(X1||{});function see(e,t){return e==null||t==null||typeof e!="object"||typeof t!="object"?!1:"id"in e&&"id"in t?e.id===t.id:e.toString()===t.toString()}function Vs(e,t){if(!t)return NaN;if(e instanceof Date&&(e=e.getTime()),t.type==="continuous"&&typeof e=="number")return(e-t.domain[0])/(t.domain[1]-t.domain[0])*(t.range[1]-t.range[0])+t.range[0];if(t.type==="log"&&typeof e=="number")return t.convert(e);if(t.type!=="category")return NaN;const i=t.domain.findIndex(n=>n===e);return i>=0||t.domain.findIndex(n=>see(e,n))>=0?t.inset+t.step*i:NaN}function Wr(e){return bM(e).valueOf()}function DA({data:e},t){return e.map((i,s)=>({xValue0Index:t.indexOf(Wr(i.xValue0)),xValue1Index:t.indexOf(Wr(i.xValue1)),datumIndex:s}))}function nee(e,t){const i=t.scales.x,s=e.scales.x;if((i==null?void 0:i.type)!=="category"||(s==null?void 0:s.type)!=="category")return!0;let n=-1/0;for(const r of i.domain){const o=Vs(r,s);if(Number.isFinite(o)){if(o<n)return!1;n=o}else continue}return!0}function ree(e,t){let i=-1/0;for(const s of e){const n=Vs(s.value,t.scales.x);if(Number.isFinite(n)){if(n<i)return!1;i=n}else continue}return!0}function oee(e,t){const i=new Map;for(const{xValue0:p,xValue1:g}of e.data){const f=Wr(p),y=Wr(g);i.set(f,p).set(y,g)}const s=Array.from(i,([p,g])=>({axisValue:p,value:g}));s.sort((p,g)=>Vs(p.value,e.scales.x)-Vs(g.value,e.scales.x));const n=[];for(const{xValue0:p,xValue1:g}of t.data){const f=Wr(p),y=Wr(g);i.has(f)||(i.set(f,p),n.push({axisValue:f,value:p})),i.has(y)||(i.set(y,g),n.push({axisValue:y,value:g}))}n.sort((p,g)=>Vs(p.value,t.scales.x)-Vs(g.value,t.scales.x));const r=s;let o=0;for(const p of n){for(let g=r.length-1;g>o;g-=1){const f=Vs(p.value,t.scales.x),y=Vs(r[g].value,t.scales.x);if(f>y){o=g+1;break}}r.splice(o,0,p),o+=1}if(!ree(r,t))return;const a=r.map(p=>p.axisValue),l=DA(t,a),c=DA(e,a);return{axisValues:a,oldDataAxisIndices:l,newDataAxisIndices:c}}function EA(e,t,i){if(i.xValue1Index===i.xValue0Index+1)return e;const s=fa(e),n=(s[1].x-s[0].x)/(i.xValue1Index-i.xValue0Index),r=s[0].x+(t-i.xValue0Index)*n,o=r+n;return j1(e,r,o)}function Q1(e,t){const[i,s]=fa(e),n=Vs(0,t.scales.y);return jf(e,{x:i.x,y:n},{x:s.x,y:n})}function q1(e){const[t,i]=fa(e);return ZJ(e,{x:(t.x+i.x)/2,y:(t.y+i.y)/2})}function J1(e,t,i,s,n,r){var g,f;let o,a;if(n.xValue0Index>=r.xValue1Index){const y=(g=s.findLast(x=>x.xValue1Index<=r.xValue1Index))==null?void 0:g.datumIndex,C=y!=null?i.data[y]:void 0;o=C==null?void 0:C.xValue1,a=C==null?void 0:C.yValue1}else if(n.xValue0Index<=r.xValue0Index){const y=(f=s.find(x=>x.xValue0Index>=r.xValue0Index))==null?void 0:f.datumIndex,C=y!=null?i.data[y]:void 0;o=C==null?void 0:C.xValue0,a=C==null?void 0:C.yValue0}if(o==null||a==null)switch(t){case 0:return Q1(e,i);case 1:return q1(e)}const l=Vs(o,i.scales.x),c=Vs(a,i.scales.y),p={x:l,y:c};return jf(e,p,p)}function FD(e,t){var n;if(t==null)return;const i=Wr(e.xValue0),s=Wr(e.xValue1);return(n=t.find(r=>Wr(r.xValue0)===i&&Wr(r.xValue1)===s))==null?void 0:n.span}function IA(e,t,i,s,n,r,o){const a=e.data[s.datumIndex],l=a.span,c=FD(a,n);if(c!=null)o.removed.push({from:c,to:c}),o.moved.push({from:c,to:l}),o.added.push({from:l,to:l});else{const p=J1(l,t,e,i,s,r);o.added.push({from:p,to:l})}}function LA(e,t,i,s,n,r,o){const a=e.data[s.datumIndex],l=a.span,c=FD(a,n);if(c!=null)o.removed.push({from:l,to:l}),o.moved.push({from:l,to:c}),o.added.push({from:c,to:c});else{const p=J1(l,t,e,i,s,r);o.removed.push({from:l,to:p})}}function TA(e,t,i,s,n){const r=t[n.xValue0Index],o=i.data.find(M=>Wr(M.xValue0)===r),a=t[n.xValue1Index],l=i.data.find(M=>Wr(M.xValue1)===a);if(o==null||l==null)return;const[{x:c},{x:p}]=fa(e),g=Vs(o.xValue0,i.scales.x),f=Vs(o.yValue0,i.scales.y),y=Vs(l.xValue1,i.scales.x),C=Vs(l.yValue1,i.scales.y);let x=s.data[n.datumIndex].span;return x=jf(x,{x:g,y:f},{x:y,y:C}),x=j1(x,c,p),x}function aee(e,t,i,s,n,r,o,a,l){const c=n+1,p=o.find(I=>I.xValue0Index<=n&&I.xValue1Index>=c),g=r.find(I=>I.xValue0Index<=n&&I.xValue1Index>=c),f=t.zeroData,y=e.zeroData;if(p==null&&g!=null){IA(e,i,r,g,f,a,l);return}else if(p!=null&&g==null){LA(t,i,o,p,y,a,l);return}else if(p==null||g==null)return;let C;p.xValue0Index===g.xValue0Index&&p.xValue1Index===g.xValue1Index?C=0:p.xValue0Index<=g.xValue0Index&&p.xValue1Index>=g.xValue1Index?C=-1:p.xValue0Index>=g.xValue0Index&&p.xValue1Index<=g.xValue1Index?C=1:C=0;const x=t.data[p.datumIndex],M=EA(x.span,n,p),b=e.data[g.datumIndex],R=EA(b.span,n,g);if(C===1){const I=TA(M,s,t,e,g);I!=null?(l.removed.push({from:M,to:I}),l.moved.push({from:I,to:R}),l.added.push({from:R,to:R})):LA(t,i,o,p,y,a,l)}else if(C===-1){const I=TA(R,s,e,t,p);I!=null?(l.removed.push({from:M,to:M}),l.moved.push({from:M,to:I}),l.added.push({from:I,to:R})):IA(e,i,r,g,f,a,l)}else l.removed.push({from:M,to:M}),l.moved.push({from:M,to:R}),l.added.push({from:R,to:R})}function lee(e,t,i,s){var c,p,g,f;const n={removed:[],moved:[],added:[]},{axisValues:r,oldDataAxisIndices:o,newDataAxisIndices:a}=e,l={xValue0Index:Math.max(((c=o.at(0))==null?void 0:c.xValue0Index)??-1/0,((p=a.at(0))==null?void 0:p.xValue0Index)??-1/0),xValue1Index:Math.min(((g=o.at(-1))==null?void 0:g.xValue1Index)??1/0,((f=a.at(-1))==null?void 0:f.xValue1Index)??1/0)};for(let y=0;y<r.length-1;y+=1)aee(t,i,s,r,y,a,o,l,n);return n}function AA(e,t,i){const{span:s}=t;switch(i){case 0:return FD(t,e.zeroData)??Q1(s,e);case 1:return q1(s)}}function cee(e,t,i){const s=[],n=[];for(const r of t.data){const o=r.span,a=AA(t,r,i);n.push({from:o,to:a})}for(const r of e.data){const o=r.span,a=AA(e,r,i);s.push({from:a,to:o})}return{removed:n,moved:[],added:s}}function mf(e,t,i){if(!nee(e,t))return;const s=oee(e,t);return s==null?cee(e,t,i):lee(s,e,t,i)}function PA(e){return e.type==="continuous"||e.type==="log"}function FA(e){return e.type==="category"}function rp(e,t){return e===void 0||t===void 0?e!==void 0||t!==void 0:PA(e)&&PA(t)?e.type===t.type&&zc(e.domain,t.domain)&&zc(e.range,t.range):FA(e)&&FA(t)?e.inset===t.inset&&e.step===t.step&&zc(e.domain,t.domain):!1}function Uf(e){return e==null?!1:e.type==="category"?e.domain.every(t=>t!=null):e.domain.every(t=>Number.isFinite(t)||t instanceof Date)&&e.range.every(t=>Number.isFinite(t))}function mC(e,t){let i;const s=e.map(n=>n.point);switch(t.type){case"linear":i=XJ(s);break;case"smooth":i=JJ(s,t.tension);break;case"step":i=qJ(s,t.position);break}return i.map((n,r)=>({span:n,xValue0:e[r].xDatum,yValue0:e[r].yDatum,xValue1:e[r+1].xDatum,yValue1:e[r+1].yDatum}))}function eB(e,t,i=.001){return Math.abs(e.x-t.x)<i&&Math.abs(e.y-t.y)<i}function kD({path:e},t){let i;for(const{span:s}of t){const[n,r]=fa(s),o=i!=null&&eB(i,n)?1:0;NM(e,s,o,!1),i=r}}function Ey(e,t,i){let s;for(const n of i){const[r,o]=Z1(n.from,n.to,e),a=s!=null&&eB(s,r)?1:0;OM(t.path,n.from,n.to,e,a,!1),s=o}}function ND(e,t,i){const s=(a,l)=>Ey(a,l,t.removed),n=(a,l)=>Ey(a,l,t.moved),r=(a,l)=>Ey(a,l,t.added),o=OD(e,i);return{status:e,path:{addPhaseFn:r,updatePhaseFn:n,removePhaseFn:s},pathProperties:o}}function OD(e,t){const i=t==="none"?"updated":e,s={fromFn:n=>{let r;return e==="removed"?r={finish:{visible:!1}}:e==="added"?r={start:{visible:!0}}:r={},{phase:wn[i],...r}},toFn:n=>({phase:wn[i]})};return t==="fade"?{fromFn:n=>({opacity:e==="added"?0:n.opacity,...s.fromFn(n)}),toFn:n=>({opacity:e==="removed"?0:1,...s.toFn(n)})}:s}function tB(e,t,i){var c,p;const s=((c=e.scales.x)==null?void 0:c.type)==="category",n=((p=t.scales.x)==null?void 0:p.type)==="category";if(s!==n||!Uf(e.scales.x)||!Uf(t.scales.x)||e.strokeData==null||t.strokeData==null)return;let r="updated";t.visible&&!e.visible?r="removed":!t.visible&&e.visible&&(r="added");const o=mf({scales:e.scales,data:e.strokeData.spans},{scales:t.scales,data:t.strokeData.spans},1);if(o==null)return;const a=ND(r,o,"fade"),l=((i==null?void 0:i.changed)??!0)||!rp(e.scales.x,t.scales.x)||!rp(e.scales.y,t.scales.y)||r!=="updated";return{status:r,stroke:a,hasMotion:l}}function iB({path:e},{spans:t,phantomSpans:i}){for(let s=0;s<t.length;s+=1){const{span:n}=t[s],r=i[s].span;NM(e,n,0,!1),NM(e,r,1,!0),e.closePath()}}function Iy(e,{path:t},i,s){for(let n=0;n<i.length;n+=1){const r=i[n],o=s[n];OM(t,r.from,r.to,e,0,!1),OM(t,o.from,o.to,e,1,!0),t.closePath()}}function sB(e,t,i,s){const n=(l,c)=>Iy(l,c,t.removed,i.removed),r=(l,c)=>Iy(l,c,t.moved,i.moved),o=(l,c)=>Iy(l,c,t.added,i.added),a=OD(e,s);return{status:e,path:{addPhaseFn:o,updatePhaseFn:r,removePhaseFn:n},pathProperties:a}}function nB(e,t){var g,f;const i=((g=e.scales.x)==null?void 0:g.type)==="category",s=((f=t.scales.x)==null?void 0:f.type)==="category";if(i!==s||!Uf(e.scales.x)||!Uf(t.scales.x))return;let n="updated";t.visible&&!e.visible?n="removed":!t.visible&&e.visible&&(n="added");const r=mf({scales:e.scales,data:e.fillData.spans},{scales:t.scales,data:t.fillData.spans},0);if(r==null)return;const o=mf({scales:e.scales,data:e.fillData.phantomSpans},{scales:t.scales,data:t.fillData.phantomSpans},0);if(o==null)return;const a=mf({scales:e.scales,data:e.strokeData.spans,zeroData:e.fillData.phantomSpans},{scales:t.scales,data:t.strokeData.spans,zeroData:t.fillData.phantomSpans},0);if(a==null)return;const l="none",c=sB(n,r,o,l),p=ND(n,a,l);return{status:n,fill:c,stroke:p}}function Kf({id:e},t,i,...s){const n={phase:i?wn[i]:"trailing"};wa(e,"markers",t,s,{opacity:0},{opacity:1},n),s.forEach(r=>r.cleanup())}function _D({id:e},t,...i){wa(e,"markers",t,i,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),i.forEach(s=>s.cleanup())}function BD({id:e,nodeDataDependencies:t},i,...s){const n=t.seriesRectWidth;Oi(e,"markers",i,s,{fromFn:(a,l)=>{var g;const c=((g=l.midPoint)==null?void 0:g.x)??n;let p=St(0,_N(c/n),1);return isNaN(p)&&(p=0),{scalingX:0,scalingY:0,delay:p,duration:tC,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function Em(e){return{opacity:1,scalingX:1,scalingY:1}}function Yf(e,t){var i,s;return{translationX:((i=t.point)==null?void 0:i.x)??NaN,translationY:((s=t.point)==null?void 0:s.y)??NaN}}function uee(e,t){const i=(o,a)=>{const l=e[a][o];return Array.isArray(l)?l[0]:l},s=o=>{const{xValue:a}=o;return e.moved[a]?{point:i(a,"moved"),status:"updated"}:e.removed[a]?{point:i(a,"removed"),status:"removed"}:e.added[a]?{point:i(a,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(o,a)=>{var g,f,y,C;const{status:l,point:c}=s(a);if(l==="unknown")return{opacity:0};const p={translationX:((g=c==null?void 0:c.from)==null?void 0:g.x)??o.translationX,translationY:((f=c==null?void 0:c.from)==null?void 0:f.y)??o.translationY,opacity:o.opacity,phase:wn[l]};return t==="added"?{...p,opacity:0,translationX:(y=c==null?void 0:c.to)==null?void 0:y.x,translationY:(C=c==null?void 0:c.to)==null?void 0:C.y,phase:wn.added}:(l==="added"&&(p.opacity=0),p)},toFn:(o,a)=>{var g,f;const{status:l,point:c}=s(a);if(l==="unknown")return{opacity:0};const p={translationX:a.point.x,translationY:a.point.y,opacity:1,phase:wn[l]};return l==="removed"||t==="removed"?{...p,translationX:(g=c==null?void 0:c.to)==null?void 0:g.x,translationY:(f=c==null?void 0:c.to)==null?void 0:f.y,opacity:0,phase:wn.removed}:p}}}function Im(e,{datumIndex:t}){const i=e.getNodeData();if(i===void 0)return;const s=i[t],{point:n}=s;if(s==null||n==null)return;const r=n.focusSize??e.getFormattedMarkerStyle(s).size,o=r/2,a=s.point.x-o,l=s.point.y-o;return new Ue(a,l,r,r)}function hee(e,t,i){let s=i;for(const{x:n,y:r}of t)s?e.lineTo(n,r):(e.moveTo(n,r),s=!0)}var sy=.05;function dee(e,t,i,s){const n=Array.isArray(t)?t:Array.from(t);if(n.length===0||(s?e.lineTo(n[0].x,n[0].y):e.moveTo(n[0].x,n[0].y),n.length<=1))return;const r=n.map((o,a)=>{const l=a===0?o:n[a-1],c=a===n.length-1?o:n[a+1],p=a===0||a===n.length-1;if(Math.sign(l.y-o.y)===Math.sign(c.y-o.y))return 0;if(!p){const g=Math.abs(l.y-c.y),f=Math.abs(o.y-l.y)/g,y=Math.abs(o.y-c.y)/g;if(f<=sy||1-f<=sy||y<=sy||1-y<=sy)return 0}return(c.y-l.y)/(c.x-l.x)});r[1]===0&&(r[0]*=2),r[r.length-2]===0&&(r[r.length-1]*=2);for(let o=1;o<n.length;o+=1){const a=n[o-1],l=r[o-1],c=n[o],p=r[o],g=c.x-a.x,f=c.y-a.y;let y=g*i/3,C=g*l*i/3,x=g*i/3,M=g*p*i/3;p===0&&Math.abs(C)>Math.abs(f)&&(y*=Math.abs(f/C),C=Math.sign(C)*Math.abs(f)),l===0&&Math.abs(M)>Math.abs(f)&&(x*=Math.abs(f/M),M=Math.sign(M)*Math.abs(f)),e.cubicCurveTo(a.x+y,a.y+C,c.x-x,c.y-M,c.x,c.y)}}function pee(e,t,i,s){let n;for(const r of t){if(n!=null){const o=n.x<r.x?i:1-i,a=(r.x-n.x)*o+n.x;e.lineTo(a,(n==null?void 0:n.y)??r.y),e.lineTo(a,r.y),e.lineTo(r.x,r.y)}else s?e.lineTo(r.x,r.y):e.moveTo(r.x,r.y);n=r}}function gee(e){return e.reduce(({min:t,max:i},s)=>((t==null||t.point.x>s.point.x)&&(t=s),(i==null||i.point.x<s.point.x)&&(i=s),{min:t,max:i}),{})}function kA(e,t,i){const s=(t.y-e.y)/(t.x-e.x),n=(i-e.x)*s+e.y;return{x:i,y:n}}function NA(e,t,i,s){let n=-1,r=0;const o=[];for(;r<e.length;){if(e[r].change===t){o.push(e[r]),r++;continue}if(e[r].change===i){r++;continue}o.length>0&&(s(o,n,r),o.length=0),n=r,r++}o.length>0&&s(o,n,r)}function fee(e,t){NA(e,"out","in",(i,s,n)=>{var r,o;s===-1&&e[n]?i.forEach(a=>a.to=e[n].from):n===e.length&&e[s]?i.forEach(a=>a.to=e[s].from):t==="intersect"&&((r=e[s])!=null&&r.from)&&((o=e[n])!=null&&o.from)?i.forEach(a=>a.to=kA(e[s].from,e[n].from,a.from.x)):i.forEach(a=>a.to=a.from)}),NA(e,"in","out",(i,s,n)=>{var r,o;s===-1&&e[n]?i.forEach(a=>a.from=e[n].to):n===e.length&&e[s]?i.forEach(a=>a.from=e[s].to):t==="intersect"&&((r=e[s])!=null&&r.to)&&((o=e[n])!=null&&o.to)?i.forEach(a=>a.from=kA(e[s].to,e[n].to,a.to.x)):i.forEach(a=>a.from=a.to)})}function OA(e,t,i){const s=isNaN(e.x)?t.x:e.x,n=isNaN(e.y)?t.y:e.y,r=t.x-e.x,o=t.y-e.y,a=isNaN(r)?0:r*i,l=isNaN(o)?0:o*i;return{x:s+a,y:n+l}}var mee={start:0,middle:.5,end:1};function rB(e,t,i,s=!1){const{path:n}=t;(i==null?void 0:i.type)==="smooth"?dee(n,e,i.tension??1,s):(i==null?void 0:i.type)==="step"?pee(n,e,mee[i.position??"end"],s):hee(n,e,s)}function oB(e,t){let i,s;const n=[],r=()=>{s!=null&&(n.push(s),s=void 0)};for(const o of e){const{from:a,to:l}=o,c=t[o.change];if(c==null||a==null||l==null)continue;const p=OA(a,l,c);if(o.moveTo===!1)s??(s=[]),s.push(p);else if(o.moveTo===!0||!i)r(),s=[p];else if(i){const g=o.moveTo==="in"?c:1-c,{x:f,y}=OA(i,p,g);s??(s=[]),s.push({x:f,y}),r(),s=[p]}i=p}return r(),n}function vee(e,t,i,s){oB(e,t).forEach(n=>{rB(n,i,s)})}function GD({id:e,visible:t,nodeDataDependencies:i},s,...n){const{seriesRectWidth:r,seriesRectHeight:o}=i;wa(e,"path_properties",s,n,{clipX:0},{clipX:r},{phase:"initial",start:{clip:!0,clipY:o,visible:t},finish:{clip:!1,visible:t}})}function vC({id:e},t,i,s="add",...n){wa(e,t,i,n,{opacity:0},{opacity:1},{phase:s})}function yee({id:e},t,i,...s){wa(e,t,i,s,{opacity:1},{opacity:0},{phase:"remove"})}function zD(e){return t=>({visible:e.getVisible(),opacity:e.getOpacity(),clipScalingX:1,clip:!1})}function yC({nodeDataDependencies:e},t){const i=s=>isFinite(s)?s:0;t.clipX=i(e.seriesRectWidth),t.clipY=i(e.seriesRectHeight)}var Cee=.125,See=.25,HD=class extends ou{constructor(e){super({moduleCtx:e,directionKeys:Gh,directionNames:zh,pathsPerSeries:["fill","stroke"],pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[2,0],animationResetFns:{path:zD({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:Bl,marker:(t,i)=>({...Em(),...Yf(t,i)})}}),this.properties=new ns,this.connectsToYAxis=!0,this.backgroundGroup=new lt({name:`${this.id}-background`,zIndex:0}),this._isStacked=void 0}get pickModeAxis(){return"main"}renderToOffscreenCanvas(){return super.renderToOffscreenCanvas()||this.contextNodeData!=null&&(this.contextNodeData.fillData.spans.length>dC||this.contextNodeData.strokeData.spans.length>dC)}attachSeries(e,t,i){super.attachSeries(e,t,i),e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),e==null||e.removeChild(this.backgroundGroup)}attachPaths([e,t]){this.backgroundGroup.appendChild(e),this.contentGroup.appendChild(t),t.zIndex=-1}isStacked(){var t;return(((t=this.seriesGrouping)==null?void 0:t.stackCount)??1)>1}setSeriesIndex(e){const t=this.isStacked();return!super.setSeriesIndex(e)&&this._isStacked===t?!1:(this._isStacked=t,t?(this.backgroundGroup.zIndex=[0,e],this.contentGroup.zIndex=[1,e,0]):(this.backgroundGroup.zIndex=[1,e,0,0],this.contentGroup.zIndex=[1,e,0,1]),!0)}async processData(e){var R,I;if(this.data==null||!this.properties.isValid())return;const{data:t,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:n=1}={}}=this,{xKey:r,yKey:o,yFilterKey:a,connectMissingData:l,normalizedTo:c}=this.properties,p=!this.ctx.animationManager.isSkipped(),g=(R=this.axes.x)==null?void 0:R.scale,f=(I=this.axes.y)==null?void 0:I.scale,{xScaleType:y,yScaleType:C}=this.getScaleInformation({xScale:g,yScale:f}),x={value:`area-stack-${s}-yValue`,values:`area-stack-${s}-yValues`,stack:`area-stack-${s}-yValue-stack`,marker:`area-stack-${s}-yValues-marker`},M=[];Gc(c)&&M.push(wS(Object.values(x),c,"range")),p&&M.push(Ap());const b={invalidValue:null};(Gc(c)||l)&&n>1&&(b.invalidValue=0),i||(b.forceValue=0),await this.requestDataModel(e,t,{props:[Ao(r,y,{id:"xValue"}),It(o,C,{id:"yValueRaw",...b}),...a!=null?[It(a,C,{id:"yFilterRaw"})]:[],...S1(o,C,{id:"yValueStack",...b,groupId:x.stack}),It(o,C,{id:"yValue",...b,groupId:x.value}),...jc(o,"window","current",{id:"yValueEnd",...b,groupId:x.values},C),...jc(o,"normal","current",{id:"yValueCumulative",...b,groupId:x.marker},C),...M],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")}getSeriesDomain(e){var l;const{processedData:t,dataModel:i,axes:s}=this;if(!t||!i||!((l=t.rawData)!=null&&l.length))return[];const n=s.y,r=i.resolveProcessedDataDefById(this,"xValue"),o=i.getDomain(this,"xValue","key",t),a=i.getDomain(this,"yValueEnd","value",t);if(e==="x")return(r==null?void 0:r.def.type)==="key"&&r.def.valueType==="category"?o:Wn(Rl(o));if(n instanceof Hh||n instanceof Fp)return Wn(a);{const c=[a[0]>0?0:a[0],a[1]<0?0:a[1]];return Wn(c)}}getSeriesRange(e,t){const{dataModel:i,processedData:s}=this;if(!i||!s)return[NaN,NaN];const n=this.axes.x.scale,r=i.resolveKeysById(this,"xValue",s),[o,a]=vS(r.length,t,p=>{const g=n.convert(r[p]);return[g,g]}),[l,c]=i.getDomainBetweenRange(this,["yValueEnd"],[o,a],s);return[Math.min(l,0),Math.max(c,0)]}createNodeData(){var ue;const{axes:e,data:t,processedData:i,dataModel:s}=this,n=e.x,r=e.y;if(!n||!r||!t||!s||!(i!=null&&i.rawData.length)||i.type!=="grouped"||!this.properties.isValid())return;const{yKey:o,xKey:a,yFilterKey:l,marker:c,label:p,fill:g,stroke:f,connectMissingData:y,interpolation:C}=this.properties,{scale:x}=n,{scale:M}=r,{isContinuousY:b}=this.getScaleInformation({xScale:x,yScale:M}),R=(x.bandwidth??0)/2,I=s.resolveKeysById(this,"xValue",i),P=s.resolveColumnById(this,"yValueEnd",i),k=s.resolveColumnById(this,"yValueRaw",i),_=s.resolveColumnById(this,"yValueCumulative",i),B=l!=null?s.resolveColumnById(this,"yFilterRaw",i):void 0,H=s.resolveColumnById(this,"yValueStack",i),V=(Me,me,ne)=>{let Ee;return(Gc(this.properties.normalizedTo)?b&&sS(ne):!isNaN(ne))&&(Ee=me),{x:x.convert(Me)+R,y:M.convert(Ee),size:c.size}},U=[],$=[],{visibleSameStackCount:te}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);let Ce=!1;const{rawData:be}=i;i.groups.forEach(({datumIndices:Me})=>{Me.forEach(me=>{const ne=I[me];if(ne==null)return;const Ee=be[me],ze=k[me],Be=_[me],$e=P[me],tt=Number.isFinite(ze),Ne=V(ne,+Be,ze),qe=B!=null?B[me]===ze:void 0;if(qe===!1&&(Ce=!0),tt&&c&&$.push({index:me,series:this,itemId:o,datum:Ee,datumIndex:me,midPoint:{x:Ne.x,y:Ne.y},cumulativeValue:$e,yValue:ze,xValue:ne,yKey:o,xKey:a,point:Ne,fill:c.fill??g,stroke:c.stroke??f,strokeWidth:c.strokeWidth??this.getStrokeWidth(this.properties.strokeWidth),selected:qe}),tt&&p){const ft=this.getLabelText(p,{value:ze,datum:Ee,xKey:a,yKey:o,xName:this.properties.xName,yName:this.properties.yName});U.push({index:me,series:this,itemId:o,datum:Ee,x:Ne.x,y:Ne.y,labelText:ft})}})});const Re=Me=>Me.flatMap(me=>Array.isArray(me)?mC(me,C):new Array(me.skip).fill(null)),oe=i.groups.flatMap(Me=>Me.datumIndices),Se=(Me,me)=>({point:{x:x.convert(Me)+R,y:M.convert(me)},xDatum:Me,yDatum:me}),K=Me=>{const me=[];for(let ne=0;ne<oe.length;ne+=1){const Ee=oe[ne],ze=I[Ee],Be=H[Ee],$e=Be[Me],tt=Number.isFinite($e);if(y&&!tt)continue;const Ne=ne>0?H[oe[ne-1]]:void 0,qe=ne<oe.length-1?H[oe[ne+1]]:void 0;let ft=0,Rt=0;for(let xt=0;xt<=Me;xt+=1){const Mt=Be[xt];if(Number.isFinite(Mt)){const Ri=Ne==null||Number.isFinite(Ne[xt]),Ki=qe==null||Number.isFinite(qe[xt]);Ri&&(ft+=Mt),Ki&&(Rt+=Mt)}}const Dt=me[me.length-1];if(!y&&(ft!==Rt||!tt))if(!tt&&Array.isArray(Dt)&&Dt.length===1)me[me.length-1]={skip:1};else{const xt=Se(ze,ft),Mt=Se(ze,Rt);Array.isArray(Dt)?Dt.push(xt):Dt!=null&&(Dt.skip+=1),me.push(tt?[Mt]:{skip:0})}else{const xt=Math.max(ft,Rt),Mt=Se(ze,xt);Array.isArray(Dt)?Dt.push(Mt):Dt!=null?(Dt.skip+=1,me.push([Mt])):me.push([Mt])}}return Re(me)},pe=((ue=this.seriesGrouping)==null?void 0:ue.stackIndex)??0,q=()=>{const Me=oe.map(me=>{const ne=I[me],ze=H[me][pe];if(!(y&&!Number.isFinite(ze)))return Se(ne,0)}).filter(me=>me!=null);return mC(Me,C)},W=K(pe),Q=W.map(()=>null);for(let Me=pe-1;Me>=-1;Me-=1){let me;for(let ne=0;ne<Q.length;ne+=1)Q[ne]==null&&(me??(me=Me!==-1?K(Me):q()),Q[ne]=me[ne])}const ve=W.map((Me,me)=>Me??Q[me]),se=W.filter(Me=>Me!=null);return{itemId:o,fillData:{itemId:o,spans:ve,phantomSpans:Q},strokeData:{itemId:o,spans:se},labelData:U,nodeData:$,scales:this.calculateScaling(),visible:this.visible,stackVisible:te>0,crossFiltering:Ce}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:e}=this.properties.marker,t=Xr(e);return new t}updatePathNodes(e){var l;const{opacity:t,visible:i,animationEnabled:s}=e,[n,r]=e.paths,o=((l=this.contextNodeData)==null?void 0:l.crossFiltering)===!0,a=this.getStrokeWidth(this.properties.strokeWidth);r.setProperties({fill:void 0,lineCap:"round",lineJoin:"round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:a,strokeOpacity:this.properties.strokeOpacity*(o?See:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:t,visible:i||s}),n.setProperties({stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity*(o?Cee:1),fillShadow:this.properties.shadow,opacity:t,visible:i||s}),yC(this,r),yC(this,n)}updatePaths(e){this.updateAreaPaths(e.paths,e.contextData)}updateAreaPaths(e,t){for(const i of e)i.visible=t.visible;if(t.visible)this.updateFillPath(e,t),this.updateStrokePath(e,t);else for(const i of e)i.path.clear(),i.markDirty()}updateFillPath(e,t){const[i]=e;i.path.clear(),iB(i,t.fillData),i.markDirty()}updateStrokePath(e,t){const{spans:i}=t.strokeData,[,s]=e;s.path.clear(),kD(s,i),s.markDirty()}updateMarkerSelection(e){var n;const{nodeData:t,markerSelection:i}=e,s=this.properties.marker.enabled||((n=this.contextNodeData)==null?void 0:n.crossFiltering)===!0;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(s?t:[])}getMarkerItemBaseStyle(e){const{marker:t}=this.properties,i=e?this.properties.highlightStyle.item:void 0;return{fill:(i==null?void 0:i.fill)??t.fill,fillOpacity:(i==null?void 0:i.fillOpacity)??t.fillOpacity,stroke:(i==null?void 0:i.stroke)??t.stroke,strokeWidth:(i==null?void 0:i.strokeWidth)??t.strokeWidth,strokeOpacity:(i==null?void 0:i.strokeOpacity)??t.strokeOpacity}}getMarkerItemStyleOverrides(e,t,i,s,n,r){const{marker:o}=this.properties,{itemStyler:a}=o;if(a==null)return;const{id:l,properties:c}=this,{xKey:p,yKey:g}=c,{xDomain:f,yDomain:y}=this.cachedDatumCallback("domain",()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")}));return this.cachedDatumCallback(As(e,r?"highlight":"node"),()=>a({seriesId:l,...Wc(t,p,g,f,y),xValue:i,yValue:s,highlighted:r,...n}))}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,marker:r,fill:o,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:p,highlightStyle:g}=this.properties,f=this.getSeriesDomain("x"),y=this.getSeriesDomain("y"),C=Et(i&&g.item,r.getStyle(),{fill:o,stroke:a,strokeWidth:l,fillOpacity:c,strokeOpacity:p});t.each((x,M)=>{this.updateMarkerStyle(x,r,{...Wc(M,s,n,f,y),highlighted:i},C,{selected:M.selected})}),i||this.properties.marker.markClean()}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t)}updateLabelNodes(e){const{labelSelection:t}=e,{enabled:i,fontStyle:s,fontWeight:n,fontSize:r,fontFamily:o,color:a}=this.properties.label;t.each((l,c)=>{const{x:p,y:g,labelText:f}=c;f&&i&&this.visible?(l.fontStyle=s,l.fontWeight=n,l.fontSize=r,l.fontFamily=o,l.textAlign="center",l.textBaseline="bottom",l.text=f,l.x=p,l.y=g-10,l.fill=a,l.visible=!0):l.visible=!1})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:n,properties:r}=this,{xKey:o,xName:a,yKey:l,yName:c,tooltip:p}=r,g=n.x,f=n.y;if(!i||!s||s.rawData.length===0||!g||!f)return;const{datumIndex:y}=e,C=s.rawData[y],x=i.resolveKeysById(this,"xValue",s)[y],M=i.resolveColumnById(this,"yValueRaw",s)[y];if(x==null)return;const b=this.getMarkerItemBaseStyle(!1);return Object.assign(b,this.getMarkerItemStyleOverrides(String(y),C,x,M,b,!1)),p.formatTooltip({heading:g.formatDatum(x),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:f.formatDatum(M)}]},{seriesId:t,datum:C,title:c,xKey:o,xName:a,yKey:l,yName:c,...b,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:e,stroke:t,fillOpacity:i,strokeOpacity:s,strokeWidth:n,lineDash:r,marker:o}=this.properties,a=!o.enabled||o.fill===void 0;return{marker:{shape:o.shape,fill:a?e:o.fill,fillOpacity:a?i:o.fillOpacity,stroke:o.stroke??t,strokeOpacity:o.strokeOpacity??s,strokeWidth:o.strokeWidth??0,enabled:o.enabled||n<=0},line:{stroke:t,strokeOpacity:s,strokeWidth:n,lineDash:r}}}getLegendData(e){if(!this.properties.isValid()||e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:s}=this,{yKey:n,yName:r,legendItemName:o,showInLegend:a}=this.properties;return[{legendType:e,id:t,itemId:n,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:n}),label:{text:o??r??n},symbol:this.legendItemSymbol(),legendItemName:o,hideInLegend:!a}]}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,contextData:s,paths:n}=e,{animationManager:r}=this.ctx;this.updateAreaPaths(n,s),GD(this,r,...n),ss([t],Yf),BD(this,r,t),zt(this,"labels",r,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){const{animationManager:t}=this.ctx,{markerSelection:i,labelSelection:s,contextData:n,paths:r,previousContextData:o}=e,[a,l]=r;if(a==null&&l==null)return;this.resetMarkerAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateAreaPaths(r,n)},p=()=>{t.skipCurrentBatch(),c()};if(n==null||o==null){c(),Kf(this,t,"added",i),vC(this,"fill_path_properties",t,"add",a),vC(this,"stroke_path_properties",t,"add",l),zt(this,"labels",t,s);return}if(n.crossFiltering!==o.crossFiltering){p();return}const g=nB(n,o);if(g===void 0){p();return}else if(g.status==="no-op")return;Kf(this,t,void 0,i),Oi(this.id,"fill_path_properties",t,[a],g.fill.pathProperties),fC(this.id,"fill_path_update",t,[a],g.fill.path),Oi(this.id,"stroke_path_properties",t,[l],g.stroke.pathProperties),fC(this.id,"stroke_path_update",t,[l],g.stroke.path),zt(this,"labels",t,s),this.ctx.animationManager.animate({id:this.id,groupId:"reset_after_animation",phase:"trailing",from:{},to:{},onComplete:()=>this.updateAreaPaths(r,n)})}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new lt}getFormattedMarkerStyle(e){const{xKey:t,yKey:i}=e,s=this.getSeriesDomain("x"),n=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,{...Wc(e,t,i,s,n),highlighted:!0})}computeFocusBounds(e){return Im(this,e)}};HD.className="AreaSeries";HD.type="area";var wee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",moduleFactory:e=>new HD(e),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:uu,xOffset:3,yOffset:3,blur:5},interpolation:{type:"linear",tension:1,position:"end"},marker:{enabled:!1,shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:ki,color:ds}}},paletteFactory:e=>{const{marker:t}=AD(e);return{fill:t.fill,stroke:t.stroke,marker:t}}};function VD(e,t){for(const i of t){const s=i.datum;s===void 0?_e.error("undefined datum"):e.addValue(i,s)}}function WD(e,t){const{x:i,y:s}=t,{nearest:n,distanceSquared:r}=e.getQuadTree().find(i,s);if(n!==void 0)return{datum:n.value,distance:Math.sqrt(r)}}var jD=class extends Nl{constructor(){super(...arguments),this.direction="vertical"}};A([O(eO)],jD.prototype,"direction",2);var aB=class extends ou{constructor(){super(...arguments),this.groupScale=new iu,this.smallestDataInterval=void 0,this.largestDataInterval=void 0}padBandExtent(e,t){const i=typeof t=="boolean"?1:.5,s=Kt(this.smallestDataInterval)?this.smallestDataInterval*i:0,n=Rl(e)??[NaN,NaN];return typeof t=="boolean"?n[t?0:1]-=(t?1:-1)*s:(n[0]-=s,n[1]+=s),Wn(n)}getBandScalePadding(){return{inner:.3,outer:.15}}shouldFlipXY(){return!this.isVertical()}isVertical(){return this.properties.direction==="vertical"}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const e=this.getBarDirection();return this.axes[e]}getCategoryAxis(){const e=this.getCategoryDirection();return this.axes[e]}getBandwidth(e){return hi.is(e.scale)?e.scale.calcBandwidth(this.smallestDataInterval):e.scale.bandwidth}updateGroupScale(e){const t=[],{groupScale:i}=this,s=this.getBandwidth(e),{index:n,visibleGroupCount:r}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this);for(let a=0;a<r;a++)t.push(String(a));return i.domain=t,i.range=[0,s??0],e instanceof bh?i.paddingInner=e.groupPaddingInner:e instanceof Dp?(i.paddingInner=e.groupPaddingInner,i.round=i.padding!==0):i.padding=0,{barWidth:i.bandwidth>=1?i.bandwidth:i.rawBandwidth,groupIndex:n}}resolveKeyDirection(e){return this.getBarDirection()==="x"?e==="x"?"y":"x":e}initQuadTree(e){VD(e,this.datumNodesIter())}pickNodeClosestDatum(e){return WD(this,e)}},UD=class extends vs{constructor(){super(...arguments),this.placement="inside-center",this.padding=0}};A([O(pi(["inside-center","inside-start","inside-end","outside-start","outside-end"],"a placement"))],UD.prototype,"placement",2);A([O(_t)],UD.prototype,"padding",2);var Bi=class extends jD{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.crisp=void 0,this.shadow=new _o,this.label=new UD,this.tooltip=new Xs,this.sparklineMode=!1,this.fastDataProcessing=!1}};A([O(Fe)],Bi.prototype,"xKey",2);A([O(Fe,{optional:!0})],Bi.prototype,"xName",2);A([O(Fe)],Bi.prototype,"yKey",2);A([O(Fe,{optional:!0})],Bi.prototype,"yName",2);A([O(Fe,{optional:!0})],Bi.prototype,"yFilterKey",2);A([O(Fe,{optional:!0})],Bi.prototype,"stackGroup",2);A([O(_t,{optional:!0})],Bi.prototype,"normalizedTo",2);A([O(Zt)],Bi.prototype,"fill",2);A([O($t)],Bi.prototype,"fillOpacity",2);A([O(Zt)],Bi.prototype,"stroke",2);A([O(Ge)],Bi.prototype,"strokeWidth",2);A([O($t)],Bi.prototype,"strokeOpacity",2);A([O(El)],Bi.prototype,"lineDash",2);A([O(Ge)],Bi.prototype,"lineDashOffset",2);A([O(Ge)],Bi.prototype,"cornerRadius",2);A([O(nt,{optional:!0})],Bi.prototype,"crisp",2);A([O(Mn,{optional:!0})],Bi.prototype,"itemStyler",2);A([O(Ye,{optional:!0})],Bi.prototype,"shadow",2);A([O(Ye)],Bi.prototype,"label",2);A([O(Ye)],Bi.prototype,"tooltip",2);A([O(nt)],Bi.prototype,"sparklineMode",2);A([O(nt)],Bi.prototype,"fastDataProcessing",2);function lB(e,t){e.crisp=t.crisp??!0,e.fill=t.fill,e.stroke=t.stroke,e.strokeWidth=t.strokeWidth,e.fillOpacity=t.fillOpacity,e.strokeOpacity=t.strokeOpacity,e.lineDash=t.lineDash,e.lineDashOffset=t.lineDashOffset,e.fillShadow=t.fillShadow,e.topLeftCornerRadius=t.topLeftCornerRadius!==!1?t.cornerRadius??0:0,e.topRightCornerRadius=t.topRightCornerRadius!==!1?t.cornerRadius??0:0,e.bottomRightCornerRadius=t.bottomRightCornerRadius!==!1?t.cornerRadius??0:0,e.bottomLeftCornerRadius=t.bottomLeftCornerRadius!==!1?t.cornerRadius??0:0,e.visible=t.visible??!0}function cB(e,t,{datum:i,isHighlighted:s,style:n,highlightStyle:r,itemStyler:o,seriesId:a,...l}){const{fill:c,fillOpacity:p,stroke:g,strokeWidth:f,strokeOpacity:y,lineDash:C,lineDashOffset:x,cornerRadius:M=0}=Et(s&&r,n);let b;return o&&(b=e.cachedDatumCallback(As(t,s?"highlight":"node"),()=>o({datum:i.datum,xKey:i.xKey,fill:c,fillOpacity:p,stroke:g,strokeWidth:f,strokeOpacity:y,lineDash:C,lineDashOffset:x,cornerRadius:M,highlighted:s,seriesId:a,...l}))),{fill:(b==null?void 0:b.fill)??c,fillOpacity:(b==null?void 0:b.fillOpacity)??p,stroke:(b==null?void 0:b.stroke)??g,strokeWidth:(b==null?void 0:b.strokeWidth)??f,strokeOpacity:(b==null?void 0:b.strokeOpacity)??y,lineDash:(b==null?void 0:b.lineDash)??C,lineDashOffset:(b==null?void 0:b.lineDashOffset)??x,cornerRadius:(b==null?void 0:b.cornerRadius)??M,topLeftCornerRadius:n.topLeftCornerRadius,topRightCornerRadius:n.topRightCornerRadius,bottomRightCornerRadius:n.bottomRightCornerRadius,bottomLeftCornerRadius:n.bottomLeftCornerRadius,fillShadow:n.fillShadow}}function uB(e,t,i,s){if(t!=null){const[n,r]=t;if(n!==0||r!==1)return!1}if(hi.is(e)){const n=e.calcBandwidth(s)-e.calcBandwidth(i);if(n>0&&n<1)return!1}return!0}var Cb=e=>HC(e.yValue??0);function $f(e,t,i){const{startingX:s,startingY:n}=bee(e,t);return{isVertical:e,calculate:(o,a)=>{let l=e?o.x:s,c=e?n:o.y,p=e?o.width:0,g=e?0:o.height;const{opacity:f}=o;a&&(isNaN(l)||isNaN(c))&&({x:l,y:c}=a,p=e?a.width:0,g=e?0:a.height,e&&!Cb(a)?c+=a.height:!e&&Cb(a)&&(l+=a.width));let y;return o.clipBBox==null?y=void 0:Cb(o)?y=e?new Ue(l,c-g,p,g):new Ue(l-p,c,p,g):y=new Ue(l,c,p,g),{x:l,y:c,width:p,height:g,clipBBox:y,opacity:f}},mode:i}}function xee(e,t){return{isVertical:e,calculate:i=>({x:e?i.x:i.x+i.width/2,y:e?i.y+i.height/2:i.y,width:e?i.width:0,height:e?0:i.height,clipBBox:i.clipBBox,opacity:i.opacity}),mode:t}}function Zf(e){const t=n=>n==null||isNaN(n.x)||isNaN(n.y);return{toFn:(n,r,o)=>o==="removed"&&n.datum==null&&e.mode==="fade"?{...Xf(n,r),opacity:0}:o==="removed"||t(r)?e.calculate(r,n.previousDatum):{x:r.x,y:r.y,width:r.width,height:r.height,clipBBox:r.clipBBox,opacity:r.opacity},fromFn:(n,r,o)=>{o==="updated"&&t(r)?o="removed":o==="updated"&&t(n.previousDatum)&&(o="added");let a;o==="added"&&n.previousDatum==null&&e.mode==="fade"?a={...Xf(n,r),opacity:0}:o==="unknown"||o==="added"?a=e.calculate(r,n.previousDatum):a={x:n.x,y:n.y,width:n.width,height:n.height,clipBBox:n.clipBBox,opacity:n.opacity};const l=wn[o];return{...a,phase:l}}}}function bee(e,t){const i=t[e?"y":"x"];let s=1/0,n=0;return i?(e?n=i.scale.convert(hi.is(i.scale)?0:Math.max(...i.range)):s=i.scale.convert(hi.is(i.scale)?0:Math.min(...i.range)),{startingX:s,startingY:n}):{startingX:s,startingY:n}}function Xf(e,{x:t,y:i,width:s,height:n,clipBBox:r,opacity:o}){return{x:t,y:i,width:s,height:n,clipBBox:r,opacity:o}}function KD(e){if(e===void 0)return;const{x:t,y:i,width:s,height:n}=e;return new Ue(t,i,s,n)}function hB(e,t,i){if(t.enabled&&i){const{x:s,y:n,text:r,textAlign:o,textBaseline:a}=i,{color:l,fontStyle:c,fontWeight:p,fontSize:g,fontFamily:f}=t;e.setProperties({visible:!0,x:s,y:n,text:r,fill:l,fontStyle:c,fontWeight:p,fontSize:g,fontFamily:f,textAlign:o,textBaseline:a})}else e.visible=!1}var Mee={"inside-start":{inside:!0,direction:-1,textAlignment:1},"inside-end":{inside:!0,direction:1,textAlignment:-1},"outside-start":{inside:!1,direction:-1,textAlignment:-1},"outside-end":{inside:!1,direction:1,textAlignment:1}};function dB({isUpward:e,isVertical:t,placement:i,padding:s=0,rect:n}){let r=n.x+n.width/2,o=n.y+n.height/2,a="center",l="middle";if(i!=="inside-center"){const c=(e?1:-1)*(t?-1:1),{direction:p,textAlignment:g}=Mee[i],f=(p+1)*.5;if(t){const y=e?n.y+n.height:n.y,C=n.height*c;o=y+C*f+s*g*c,l=g===c?"top":"bottom"}else{const y=e?n.x:n.x+n.width,C=n.width*c;r=y+C*f+s*g*c,a=g===c?"left":"right"}}return{x:r,y:o,textAlign:a,textBaseline:l}}var _A=0,BA=1,Ree=2,Dee=3,GA=4,US=class extends aB{constructor(e){super({moduleCtx:e,directionKeys:Gh,directionNames:zh,pickModes:[2,1,0],pathsPerSeries:[],hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:Xf,label:Bl}}),this.properties=new Bi,this.connectsToYAxis=!0,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":void 0}crossFilteringEnabled(){return this.properties.yFilterKey!=null&&(this.seriesGrouping==null||this.seriesGrouping.stackIndex===0)}async processData(e){var B,H,V,U,$,te;if(!this.properties.isValid()||!this.data)return;const{xKey:t,yKey:i,yFilterKey:s,normalizedTo:n,fastDataProcessing:r}=this.properties,{seriesGrouping:{groupIndex:o=this.id}={},data:a}=this,l=((B=this.seriesGrouping)==null?void 0:B.groupCount)??0,c=((H=this.seriesGrouping)==null?void 0:H.stackCount)??0,p=!r||n!=null||l>1||c>1,g=!this.ctx.animationManager.isSkipped(),f=(V=this.getCategoryAxis())==null?void 0:V.scale,y=(U=this.getValueAxis())==null?void 0:U.scale,{isContinuousX:C,xScaleType:x,yScaleType:M}=this.getScaleInformation({xScale:f,yScale:y}),b=`bar-stack-${o}-yValues`,R=`${b}-trailing`,I=this.visible?{}:{forceValue:0},P=[Ao(t,x,{id:"xValue"}),It(i,M,{id:"yValue-raw",invalidValue:null,...I})];this.crossFilteringEnabled()&&P.push(It(s,M,{id:"yFilterValue",invalidValue:null,...I})),p&&P.push(...jc(i,"normal","current",{id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:b,separateNegative:!0,...I},M),...jc(i,"trailing","current",{id:"yValue-start",invalidValue:null,missingValue:0,groupId:R,separateNegative:!0,...I},M)),C&&P.push(w1,x1),Kt(n)&&P.push(wS([b,R],Math.abs(n),"range")),g&&this.processedData&&P.push(Pp(this.id,this.processedData)),(g||!p)&&P.push(Ap());const{dataModel:k,processedData:_}=await this.requestDataModel(e,a,{props:P,groupByKeys:p,groupByData:!p});this.dataAggregationFilters=this.aggregateData(k,_),this.smallestDataInterval=($=_.reduced)==null?void 0:$.smallestKeyInterval,this.largestDataInterval=(te=_.reduced)==null?void 0:te.largestKeyInterval,this.animationState.transition("updateData")}getSeriesDomain(e){var l;const{processedData:t,dataModel:i}=this;if(i==null||t==null)return[];const s=((l=t.rawDataSources)==null?void 0:l.get(this.id))??t.rawData;if(s==null||s.length===0)return[];const n=i.resolveProcessedDataDefById(this,"xValue"),r=i.getDomain(this,"xValue","key",t);let o=t.type==="grouped"?i.getDomain(this,"yValue-end","value",t):i.getDomain(this,"yValue-raw","value",t);const a=this.crossFilteringEnabled()?i.getDomain(this,"yFilterValue","value",t):void 0;if(a!=null&&(o=[Math.min(o[0],a[0]),Math.max(o[1],a[1])]),e===this.getCategoryDirection())return(n==null?void 0:n.def.type)==="key"&&n.def.valueType==="category"?r:this.padBandExtent(r);if(this.getValueAxis()instanceof Hh)return Wn(o);{const c=[Math.min(0,o[0]),Math.max(0,o[1])];return Wn(c)}}getSeriesRange(e,t){const{dataModel:i,processedData:s}=this;if(!i||!s||this.getBarDirection()==="x")return[NaN,NaN];const n=this.axes.x.scale,r=i.resolveKeysById(this,"xValue",s),o=n.bandwidth??0,[a,l]=vS(r.length,t,g=>{const f=n.convert(r[g]);return[f,f+o]}),[c,p]=i.getDomainBetweenRange(this,s.type==="ungrouped"?["yValue-raw"]:["yValue-end"],[a,l],s);return[Math.min(c,0),Math.max(p,0)]}aggregateData(e,t){}visibleRange(e,t,i,s){return[0,e]}createNodeData(){var ye;const{dataModel:e,processedData:t,groupScale:i,dataAggregationFilters:s}=this,n=this.getCategoryAxis(),r=this.getValueAxis();if(!e||!t||!n||!r||!this.properties.isValid())return;const o=((ye=t.rawDataSources)==null?void 0:ye.get(this.id))??t.rawData;if(o==null||o.length===0)return;const a=n.scale,l=r.scale,{xKey:c,yKey:p,xName:g,yName:f,fill:y,stroke:C,strokeWidth:x,cornerRadius:M,legendItemName:b,label:R}=this.properties,I=r.isReversed(),{barWidth:P,groupIndex:k}=this.updateGroupScale(n),_=i.convert(String(k)),B=hi.is(a)?P*-.5:0,H=e.resolveKeysById(this,"xValue",t),V=e.resolveColumnById(this,"yValue-raw",t),U=this.crossFilteringEnabled()?e.resolveColumnById(this,"yFilterValue",t):void 0,$=!this.ctx.animationManager.isSkipped(),te=ue=>a.convert(H[ue])+_+B,Ce=l.convert(0),be=({datum:ue,datumIndex:Me,valueIndex:me,xValue:ne,yValue:Ee,cumulativeValue:ze,phantom:Be,currY:$e,prevY:tt,x:Ne,width:qe,isPositive:ft,yRange:Rt,labelText:Dt,opacity:xt,crossScale:Mt=1})=>{const Ri=ft!==I,Ki=l.convert($e),Qs=l.convert(tt),Yi=l.convert(Rt),ut=this.getBarDirection()==="x",ni=qe*.5*(1-Mt),vi={x:ut?Math.min(Ki,Qs):Ne+ni,y:ut?Ne+ni:Math.min(Ki,Qs),width:ut?Math.abs(Qs-Ki):qe*Mt,height:ut?qe*Mt:Math.abs(Qs-Ki)},zl=new Ue(vi.x,vi.y,vi.width,vi.height),Gi={x:ut?Math.min(Ce,Yi):Ne+ni,y:ut?Ne+ni:Math.min(Ce,Yi),width:ut?Math.abs(Ce-Yi):qe*Mt,height:ut?qe*Mt:Math.abs(Ce-Yi)},Dn=this.shouldFlipXY()?vi.height:vi.width;return{series:this,itemId:Be?As(p,Be):p,datum:ue,datumIndex:Me,valueIndex:me,cumulativeValue:ze,phantom:Be,xValue:ne,yValue:Ee,yKey:p,xKey:c,capDefaults:{lengthRatioMultiplier:Dn,lengthMax:Dn},x:Gi.x,y:Gi.y,width:Gi.width,height:Gi.height,midPoint:{x:vi.x+vi.width/2,y:vi.y+vi.height/2},fill:y,stroke:C,opacity:xt,strokeWidth:x,cornerRadius:M,topLeftCornerRadius:ut!==Ri,topRightCornerRadius:Ri,bottomRightCornerRadius:ut===Ri,bottomLeftCornerRadius:!Ri,clipBBox:zl,label:Dt!=null?{text:Dt,...dB({isUpward:Ri,isVertical:!ut,placement:R.placement,padding:R.padding,rect:vi})}:void 0,missing:Ee==null,focusable:!Be}},Re=[],oe=[],Se=[],K=(ue,Me,me,ne,Ee,ze,Be,$e)=>{const tt=H[ue];if(tt==null)return;const Ne=V[ue],qe=U!=null?Number(U[ue]):void 0,ft=Ne>=0&&!Object.is(Ne,-0);if(!Number.isFinite(ze)||qe!=null&&!Number.isFinite(qe))return;const Rt=Ne!=null?this.getLabelText(this.properties.label,{datum:o[ue],value:qe??Ne,xKey:c,yKey:p,xName:g,yName:f,legendItemName:b}):void 0,Dt=qe!=null&&qe>Ne,xt=be({datum:o[ue],datumIndex:ue,valueIndex:Me,xValue:tt,yValue:qe??Ne,cumulativeValue:qe??ze,phantom:!1,currY:qe!=null?Ee+qe:ze,prevY:Ee,x:me,width:ne,isPositive:ft,yRange:Math.max(Ee+(qe??-1/0),Be),labelText:Rt,opacity:$e,crossScale:Dt?.6:void 0});if(oe.push(xt),Se.push(xt),qe!=null){const Mt=be({datum:o[ue],datumIndex:ue,valueIndex:Me,xValue:tt,yValue:qe,cumulativeValue:qe,phantom:!0,currY:ze,prevY:Ee,x:me,width:ne,isPositive:ft,yRange:Be,labelText:void 0,opacity:$e,crossScale:void 0});Re.push(Mt)}},[pe,q]=Ks(n.range),[W,Q]=a.range,ve=Q-W,se=s==null?void 0:s.find(ue=>ue.maxRange>ve);if(t.type==="grouped"){const ue=P,Me=e.resolveColumnById(this,"yValue-start",t),me=e.resolveColumnById(this,"yValue-end",t),ne=e.resolveProcessedDataIndexById(this,"yValue-range");t.groups.forEach(({datumIndices:Ee,aggregation:ze})=>{const Be=ze[ne];Ee.forEach(($e,tt)=>{const Ne=te($e),qe=V[$e],ft=qe>=0&&!Object.is(qe,-0),Rt=Number(Me[$e]),Dt=Number(me[$e]),xt=Be[ft?1:0];K($e,tt,Ne,ue,Rt,Dt,xt,1)})})}else if(se==null){const ue=P;let[Me,me]=this.visibleRange(o.length,pe,q,te);t.rawData.length<1e3&&(Me=0,me=t.rawData.length);for(let ne=Me;ne<me;ne+=1){const Ee=te(ne),ze=Number(V[ne]);K(ne,0,Ee,ue,0,ze,ze,1)}}else{const{maxRange:ue,indexData:Me}=se,[me,ne]=this.visibleRange(ue,pe,q,Ee=>{const ze=Ee*GA,Be=Me[ze+_A],$e=Me[ze+BA],tt=(Be+$e)/2|0;return Be!==-1?te(tt):NaN});for(let Ee=me;Ee<ne;Ee+=1){const ze=Ee*GA,Be=Me[ze+_A],$e=Me[ze+BA],tt=Me[ze+Ree],Ne=Me[ze+Dee];if(Be===-1)continue;const qe=te((Be+$e)/2|0),ft=Math.abs(te($e)-te(Be))+P,Rt=H[Ne]!=null?Number(V[Ne]):NaN,Dt=H[tt]!=null?Number(V[tt]):NaN;if(Rt>0){const xt=Dt>=0?Dt/Rt:1;K(Ne,0,qe,ft,0,Rt,Rt,xt)}if(Dt<0){const xt=Rt<=0?Rt/Dt:1;K(tt,1,qe,ft,0,Dt,Dt,xt)}}}return{itemId:p,nodeData:Re.length>0?[...Re,...oe]:oe,labelData:Se,scales:this.calculateScaling(),visible:this.visible||$,groupScale:this.getScaling(this.groupScale)}}nodeFactory(){return new Zs}getHighlightData(e,t){const i=e.find(s=>s.datum===t.datum&&!s.phantom);return i!=null?[i]:void 0}updateDatumSelection(e){return e.datumSelection.update(e.nodeData,void 0,t=>this.getDatumId(t))}getItemBaseStyle(e){const{properties:t}=this,{cornerRadius:i}=t,s=e?t.highlightStyle.item:void 0;return{fill:(s==null?void 0:s.fill)??t.fill,fillOpacity:(s==null?void 0:s.fillOpacity)??t.fillOpacity,stroke:(s==null?void 0:s.stroke)??t.stroke,strokeWidth:(s==null?void 0:s.strokeWidth)??t.strokeWidth,strokeOpacity:(s==null?void 0:s.strokeOpacity)??t.strokeOpacity,lineDash:(s==null?void 0:s.lineDash)??t.lineDash??[],lineDashOffset:(s==null?void 0:s.lineDashOffset)??t.lineDashOffset,cornerRadius:i}}getItemStyleOverrides(e,t,i,s,n,r){const{id:o,properties:a}=this,{xKey:l,yKey:c,itemStyler:p}=a;if(p==null)return;const{xDomain:g,yDomain:f}=this.cachedDatumCallback("domain",()=>({xDomain:this.getSeriesDomain("x"),yDomain:this.getSeriesDomain("y")}));return this.cachedDatumCallback(As(e,r?"highlight":"node"),()=>p({seriesId:o,...Wc(t,l,c,g,f),xValue:i,yValue:s,highlighted:r,...n}))}updateDatumNodes(e){if(!this.properties.isValid())return;const{xKey:t,yKey:i,stackGroup:s,fill:n,fillOpacity:r,stroke:o,strokeWidth:a,strokeOpacity:l,lineDash:c,lineDashOffset:p,itemStyler:g,shadow:f,highlightStyle:{item:y}}=this.properties,C=this.axes.x,x=this.properties.crisp??uB(C==null?void 0:C.scale,C==null?void 0:C.visibleRange,this.smallestDataInterval,this.largestDataInterval),M=this.getCategoryDirection()==="x",b={fill:n,stroke:o,lineDash:c,lineDashOffset:p,fillShadow:f,strokeWidth:this.getStrokeWidth(a),fillOpacity:0,strokeOpacity:0},R=this.getSeriesDomain("x"),I=this.getSeriesDomain("y");e.datumSelection.each((P,k)=>{var V,U;const _={seriesId:this.id,isHighlighted:e.isHighlight,highlightStyle:y,style:b,itemStyler:g,stackGroup:s,...Wc(k,t,i,R,I)};b.fillOpacity=r*(k.phantom?.2:1),b.strokeOpacity=l*(k.phantom?.2:1),b.cornerRadius=k.cornerRadius,b.topLeftCornerRadius=k.topLeftCornerRadius,b.topRightCornerRadius=k.topRightCornerRadius,b.bottomRightCornerRadius=k.bottomRightCornerRadius,b.bottomLeftCornerRadius=k.bottomLeftCornerRadius;const B=M?(((V=k.clipBBox)==null?void 0:V.width)??k.width)>0:(((U=k.clipBBox)==null?void 0:U.height)??k.height)>0,H=cB(this,this.getDatumId(k),_);H.crisp=x,H.visible=B,lB(P,H)})}updateLabelSelection(e){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t,i=>{i.pointerEvents=1})}updateLabelNodes(e){e.labelSelection.each((t,i)=>{hB(t,this.properties.label,i.label)})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:n}=this,{xKey:r,xName:o,yKey:a,yName:l,legendItemName:c,stackGroup:p,tooltip:g}=n,f=this.getCategoryAxis(),y=this.getValueAxis();if(!i||!s||s.rawData.length===0||!f||!y)return;const{datumIndex:C}=e,x=s.rawData[C],M=i.resolveKeysById(this,"xValue",s)[C],b=i.resolveColumnById(this,"yValue-raw",s)[C];if(M==null)return;const R=this.getItemBaseStyle(!1);return Object.assign(R,this.getItemStyleOverrides(String(C),x,M,b,R,!1)),g.formatTooltip({heading:f.formatDatum(M),symbol:this.legendItemSymbol(),data:[{label:l,fallbackLabel:a,value:y.formatDatum(b)}]},{seriesId:t,datum:x,title:l,xKey:r,xName:o,yKey:a,yName:l,legendItemName:c,stackGroup:p,...R,...this.getModuleTooltipParams()})}legendItemSymbol(){const{fill:e,stroke:t,strokeWidth:i,fillOpacity:s,strokeOpacity:n}=this.properties;return{marker:{fill:e,fillOpacity:s,stroke:t,strokeWidth:i,strokeOpacity:n}}}getLegendData(e){const{showInLegend:t}=this.properties;if(e!=="category"||!this.properties.isValid())return[];const{id:i,ctx:{legendManager:s},visible:n}=this,{yKey:r,yName:o,legendItemName:a}=this.properties;return[{legendType:"category",id:i,itemId:r,seriesId:i,enabled:n&&s.getItemEnabled({seriesId:i,itemId:r}),label:{text:a??o??r},symbol:this.legendItemSymbol(),legendItemName:a,hideInLegend:!t}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t,annotationSelections:i}){const s=Zf($f(this.isVertical(),this.axes,"normal"));Oi(this.id,"nodes",this.ctx.animationManager,[e],s),zt(this,"labels",this.ctx.animationManager,t),zt(this,"annotations",this.ctx.animationManager,...i)}animateWaitingUpdateReady(e){var p,g,f,y,C;const{datumSelection:t,labelSelection:i,annotationSelections:s,previousContextData:n}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);let r=(f=(g=(p=this.processedData)==null?void 0:p.reduced)==null?void 0:g.diff)==null?void 0:f[this.id];r==null&&((C=(y=this.processedData)==null?void 0:y.reduced)==null?void 0:C.diff)!=null&&(r={changed:!0,added:new Set(Array.from(t,({datum:x})=>this.getDatumId(x))),updated:new Set,removed:new Set,moved:new Set});const o=n==null?"fade":"normal",a=Zf($f(this.isVertical(),this.axes,o));Oi(this.id,"nodes",this.ctx.animationManager,[t],a,(x,M)=>this.getDatumId(M),r);const l=n!=null&&(!rp(e.contextData.scales.x,n.scales.x)||!rp(e.contextData.scales.y,n.scales.y)||!rp(e.contextData.groupScale,e.previousContextData.groupScale));(((r==null?void 0:r.changed)??!1)||l)&&(zt(this,"labels",this.ctx.animationManager,i),zt(this,"annotations",this.ctx.animationManager,...s))}getDatumId(e){return As(e.xValue,e.valueIndex,e.phantom)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){var i;const t=(i=this.contextNodeData)==null?void 0:i.nodeData[e].clipBBox;return KD(t)}};US.className="BarSeries";US.type="bar";var pB={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",moduleFactory:e=>new US(e),stackable:!0,groupable:!0,tooltipDefaults:{range:"exact"},defaultAxes:G1([{type:"number",position:"left"},{type:"category",position:"bottom"}],e=>(e==null?void 0:e.direction)==="horizontal"),themeTemplate:{series:{direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontWeight:"normal",fontSize:12,fontFamily:ki,color:cu,placement:"inside-center"},shadow:{enabled:!1,color:uu,xOffset:3,yOffset:3,blur:5},errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:Dm},YD=class extends Qn{constructor(){super(...arguments),this.maxSize=30}};A([O(Ge),Ze()],YD.prototype,"maxSize",2);A([O(QC,{optional:!0}),Ze()],YD.prototype,"domain",2);var gB=class extends vs{constructor(){super(...arguments),this.placement="top"}};A([O(yR)],gB.prototype,"placement",2);var si=class extends Nl{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new gB,this.tooltip=new Xs,this.marker=new YD}};A([O(Fe)],si.prototype,"xKey",2);A([O(Fe)],si.prototype,"yKey",2);A([O(Fe)],si.prototype,"sizeKey",2);A([O(Fe,{optional:!0})],si.prototype,"labelKey",2);A([O(Fe,{optional:!0})],si.prototype,"colorKey",2);A([O(Fe,{optional:!0})],si.prototype,"xFilterKey",2);A([O(Fe,{optional:!0})],si.prototype,"yFilterKey",2);A([O(Fe,{optional:!0})],si.prototype,"sizeFilterKey",2);A([O(Fe,{optional:!0})],si.prototype,"xName",2);A([O(Fe,{optional:!0})],si.prototype,"yName",2);A([O(Fe,{optional:!0})],si.prototype,"sizeName",2);A([O(Fe,{optional:!0})],si.prototype,"labelName",2);A([O(Fe,{optional:!0})],si.prototype,"colorName",2);A([O(QC,{optional:!0})],si.prototype,"colorDomain",2);A([O(qr)],si.prototype,"colorRange",2);A([O(Fe,{optional:!0})],si.prototype,"title",2);A([Ui("marker.shape")],si.prototype,"shape",2);A([Ui("marker.size")],si.prototype,"size",2);A([Ui("marker.maxSize")],si.prototype,"maxSize",2);A([Ui("marker.domain",{optional:!0})],si.prototype,"domain",2);A([Ui("marker.fill",{optional:!0})],si.prototype,"fill",2);A([Ui("marker.fillOpacity")],si.prototype,"fillOpacity",2);A([Ui("marker.stroke",{optional:!0})],si.prototype,"stroke",2);A([Ui("marker.strokeWidth")],si.prototype,"strokeWidth",2);A([Ui("marker.strokeOpacity")],si.prototype,"strokeOpacity",2);A([Ui("marker.itemStyler",{optional:!0})],si.prototype,"itemStyler",2);A([O(Ye)],si.prototype,"label",2);A([O(Ye)],si.prototype,"tooltip",2);var Eee=class extends dD{constructor(e,t,i,s){super(e,t,i,s),this.sizeKey=s.properties.sizeKey}},$D=class extends ou{constructor(e){super({moduleCtx:e,directionKeys:Gh,directionNames:zh,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:Bl,marker:Em},usesPlacedLabels:!0}),this.NodeEvent=Eee,this.clipFocusBox=!1,this.properties=new si,this.sizeScale=new $r,this.colorScale=new Nh}get pickModeAxis(){return"main-category"}async processData(e){var _,B;if(!this.properties.isValid()||this.data==null||!this.visible)return;const t=(_=this.axes.x)==null?void 0:_.scale,i=(B=this.axes.y)==null?void 0:B.scale,{xScaleType:s,yScaleType:n}=this.getScaleInformation({xScale:t,yScale:i}),r=this.colorScale.type,o=this.sizeScale.type,{xKey:a,yKey:l,sizeKey:c,xFilterKey:p,yFilterKey:g,sizeFilterKey:f,labelKey:y,colorDomain:C,colorRange:x,colorKey:M,marker:b}=this.properties,{dataModel:R,processedData:I}=await this.requestDataModel(e,this.data,{props:[It(a,s,{id:"xValue"}),It(l,n,{id:"yValue"}),...p!=null?[It(p,s,{id:"xFilterValue"})]:[],...g!=null?[It(g,n,{id:"yFilterValue"})]:[],...f!=null?[It(f,o,{id:"sizeFilterValue"})]:[],It(c,o,{id:"sizeValue"}),...M?[It(M,r,{id:"colorValue"})]:[],...y?[It(y,"band",{id:"labelValue"})]:[]]}),P=R.resolveProcessedDataIndexById(this,"sizeValue"),k=I.domain.values[P]??[];if(this.sizeScale.domain=b.domain?b.domain:k,M){const H=R.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=C??I.domain.values[H]??[],this.colorScale.range=x,this.colorScale.update()}this.animationState.transition("updateData")}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const s=e==="x"?"xValue":"yValue",n=t.resolveProcessedDataDefById(this,s),r=t.getDomain(this,s,"value",i);return(n==null?void 0:n.def.type)==="value"&&(n==null?void 0:n.def.valueType)==="category"?r:Wn(Rl(r))}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{axes:e,dataModel:t,processedData:i,colorScale:s,sizeScale:n,visible:r}=this,{xKey:o,yKey:a,sizeKey:l,xFilterKey:c,yFilterKey:p,sizeFilterKey:g,labelKey:f,xName:y,yName:C,sizeName:x,labelName:M,label:b,colorKey:R,marker:I}=this.properties,P=Xr(I.shape),{placement:k}=b,_=e.x,B=e.y;if(!(t&&(i!=null&&i.rawData.length)&&r&&_&&B))return;const H=t.resolveColumnById(this,"xValue",i),V=t.resolveColumnById(this,"yValue",i),U=l!=null?t.resolveColumnById(this,"sizeValue",i):void 0,$=R!=null?t.resolveColumnById(this,"colorValue",i):void 0,te=f!=null?t.resolveColumnById(this,"labelValue",i):void 0,Ce=c!=null?t.resolveColumnById(this,"xFilterValue",i):void 0,be=p!=null?t.resolveColumnById(this,"yFilterValue",i):void 0,Re=g!=null?t.resolveColumnById(this,"sizeFilterValue",i):void 0,oe=_.scale,Se=B.scale,K=(oe.bandwidth??0)/2,pe=(Se.bandwidth??0)/2,q=[];n.range=[I.size,I.maxSize];const W=b.getFont(),Q=Tl.getMeasurer({font:W});return i.rawData.forEach((ve,se)=>{const ye=H[se],ue=V[se],Me=U==null?void 0:U[se],me=oe.convert(ye)+K,ne=Se.convert(ue)+pe;let Ee;Ce!=null&&be!=null&&(Ee=Ce[se]===ye&&be[se]===ue,Re!=null&&Ee&&(Ee=Re[se]===Me));const ze=this.getLabelText(b,{value:te!=null?te[se]:ue,datum:ve,xKey:o,yKey:a,sizeKey:l,labelKey:f,xName:y,yName:C,sizeName:x,labelName:M}),Be=Q.measureText(String(ze)),$e=Me!=null?n.convert(Me):I.size,tt=$!=null?s.convert($[se]):void 0;q.push({series:this,itemId:a,yKey:a,xKey:o,datum:ve,datumIndex:se,xValue:ye,yValue:ue,sizeValue:Me,point:{x:me,y:ne,size:$e},midPoint:{x:me,y:ne},fill:tt,label:{text:ze,...Be},marker:P,placement:k,selected:Ee})}),{itemId:a,nodeData:q,labelData:q,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var e;return this.isLabelEnabled()?((e=this.contextNodeData)==null?void 0:e.labelData)??[]:[]}markerFactory(){const{shape:e}=this.properties.marker,t=Xr(e);return new t}updateMarkerSelection(e){const{nodeData:t,markerSelection:i}=e;this.properties.marker.isDirty()&&(i.clear(),i.cleanup());const s=this.properties.marker.enabled?t:[];return i.update(s,void 0,n=>As([n.xValue,n.yValue,n.label.text]))}getMarkerItemBaseStyle(e){const{properties:t}=this,{marker:i}=t,s=e?t.highlightStyle.item:void 0;return{fill:(s==null?void 0:s.fill)??i.fill,fillOpacity:(s==null?void 0:s.fillOpacity)??i.fillOpacity,stroke:(s==null?void 0:s.stroke)??i.stroke,strokeWidth:(s==null?void 0:s.strokeWidth)??i.strokeWidth,strokeOpacity:(s==null?void 0:s.strokeOpacity)??i.strokeOpacity}}getMarkerItemStyleOverrides(e,t,i,s){const{id:n,properties:r}=this,{xKey:o,yKey:a,sizeKey:l,labelKey:c,marker:p}=r,{itemStyler:g}=p;if(g!=null)return this.cachedDatumCallback(As(e,s?"highlight":"node"),()=>g({seriesId:n,datum:t,xKey:o,yKey:a,sizeKey:l,labelKey:c,highlighted:s,...i}))}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,sizeKey:r,labelKey:o,marker:a}=this.properties,{size:l,shape:c,fill:p,fillOpacity:g,stroke:f,strokeWidth:y,strokeOpacity:C}=Et(i&&this.properties.highlightStyle.item,a.getStyle()),x={size:l,shape:c,fill:p,fillOpacity:g,stroke:f,strokeWidth:y,strokeOpacity:C};this.sizeScale.range=[a.size,a.maxSize],t.each((M,b)=>{this.updateMarkerStyle(M,a,{datum:b,highlighted:i,xKey:s,yKey:n,sizeKey:r,labelKey:o},x,{selected:b.selected})}),i||this.properties.marker.markClean()}updatePlacedLabelData(e){this.labelSelection.update(e.map(t=>({...t.datum,point:{x:t.x,y:t.y,size:t.datum.point.size}})),t=>{t.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{label:t}=this.properties;e.labelSelection.each((i,s)=>{var n,r;i.text=s.label.text,i.fill=t.color,i.x=((n=s.point)==null?void 0:n.x)??0,i.y=((r=s.point)==null?void 0:r.y)??0,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.fontSize=t.fontSize,i.fontFamily=t.fontFamily,i.textAlign="left",i.textBaseline="top"})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:n,properties:r}=this,{xKey:o,xName:a,yKey:l,yName:c,sizeKey:p,sizeName:g,labelKey:f,labelName:y,title:C,tooltip:x}=r,M=n.x,b=n.y;if(!i||!s||s.rawData.length===0||!M||!b)return;const{datumIndex:R}=e,I=s.rawData[R],P=i.resolveColumnById(this,"xValue",s)[R],k=i.resolveColumnById(this,"yValue",s)[R];if(P==null)return;const _=[{label:a,fallbackLabel:o,value:M.formatDatum(P)},{label:c,fallbackLabel:l,value:b.formatDatum(k)}];if(p!=null){const H=i.resolveColumnById(this,"sizeValue",s)[R];_.push({label:g,fallbackLabel:p,value:String(H)})}const B=this.getMarkerItemBaseStyle(!1);return Object.assign(B,this.getMarkerItemStyleOverrides(String(R),I,B,!1)),x.formatTooltip({title:C,symbol:this.legendItemSymbol(),data:_},{seriesId:t,datum:I,title:l,xKey:o,xName:a,yKey:l,yName:c,sizeKey:p,sizeName:g,labelKey:f,labelName:y,...B,...this.getModuleTooltipParams()})}legendItemSymbol(){const{marker:e}=this.properties,{shape:t,fill:i,stroke:s,fillOpacity:n,strokeOpacity:r,strokeWidth:o}=e;return{marker:{shape:t,fill:i??"rgba(0, 0, 0, 0)",stroke:s??"rgba(0, 0, 0, 0)",fillOpacity:n??1,strokeOpacity:r??1,strokeWidth:o??0}}}getLegendData(){if(!this.properties.isValid())return[];const{id:e,ctx:{legendManager:t},visible:i}=this,{yKey:s,yName:n,title:r}=this.properties;return[{legendType:"category",id:e,itemId:s,seriesId:e,enabled:i&&t.getItemEnabled({seriesId:e,itemId:s}),label:{text:r??n??s},symbol:this.legendItemSymbol()}]}animateEmptyUpdateReady({markerSelection:e,labelSelection:t}){_D(this,this.ctx.animationManager,e),zt(this,"labels",this.ctx.animationManager,t)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new lt}getFormattedMarkerStyle(e){const{xKey:t,yKey:i,sizeKey:s,labelKey:n}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yKey:i,sizeKey:s,labelKey:n,highlighted:!1})}computeFocusBounds(e){return Im(this,e)}};$D.className="BubbleSeries";$D.type="bubble";var Iee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",moduleFactory:e=>new $D(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,maxSize:30,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:ki,color:ds}}},paletteFactory:Dm},rs=class extends Nl{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new _o,this.label=new vs,this.tooltip=new Xs}};A([O(Fe)],rs.prototype,"xKey",2);A([O(Fe,{optional:!0})],rs.prototype,"yKey",2);A([O(Fe,{optional:!0})],rs.prototype,"xName",2);A([O(Fe,{optional:!0})],rs.prototype,"yName",2);A([O(Zt,{optional:!0})],rs.prototype,"fill",2);A([O($t)],rs.prototype,"fillOpacity",2);A([O(Zt,{optional:!0})],rs.prototype,"stroke",2);A([O(Ge)],rs.prototype,"strokeWidth",2);A([O($t)],rs.prototype,"strokeOpacity",2);A([O(El)],rs.prototype,"lineDash",2);A([O(Ge)],rs.prototype,"lineDashOffset",2);A([O(Ge)],rs.prototype,"cornerRadius",2);A([O(nt)],rs.prototype,"areaPlot",2);A([O(pm,{optional:!0})],rs.prototype,"bins",2);A([O(pi(["count","sum","mean"],"a histogram aggregation"))],rs.prototype,"aggregation",2);A([O(Ge,{optional:!0})],rs.prototype,"binCount",2);A([O(Ye)],rs.prototype,"shadow",2);A([O(Ye)],rs.prototype,"label",2);A([O(Ye)],rs.prototype,"tooltip",2);var zA=10,ZD=class extends ou{constructor(e){super({moduleCtx:e,directionKeys:Gh,directionNames:zh,pickModes:[1,0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:Xf,label:Bl}}),this.properties=new rs,this.calculatedBins=[]}deriveBins(e){const t=wR(e[0],e[1],zA),i=Pf(e[0],e[1],zA),[s]=t,n=r=>[r,r+i];return[[s-i,s],...t.map(n)]}calculateNiceBins(e,t){const i=Math.floor(e[0]),s=e[1],n=t||1,{start:r,binSize:o}=this.calculateNiceStart(i,s,n);return this.getBins(r,s,o,n)}getBins(e,t,i,s){const n=[],r=this.calculatePrecision(i);for(let o=0;o<s;o++){const a=Math.round((e+o*i)*r)/r;let l=Math.round((e+(o+1)*i)*r)/r;o===s-1&&(l=Math.max(l,t)),n[o]=[a,l]}return n}calculatePrecision(e){let t=10;if(isFinite(e)&&e>0)for(;e<1;)t*=10,e*=10;return t}calculateNiceStart(e,t,i){const s=Math.abs(t-e)/i,n=Math.floor(Math.log10(s)),r=Math.pow(10,n);return{start:Math.floor(e/r)*r,binSize:s}}async processData(e){var g,f;this.visible||(this.processedData=void 0,this.animationState.transition("updateData"));const{xKey:t,yKey:i,areaPlot:s,aggregation:n}=this.properties,r=(g=this.axes.x)==null?void 0:g.scale,o=(f=this.axes.y)==null?void 0:f.scale,{xScaleType:a,yScaleType:l}=this.getScaleInformation({yScale:o,xScale:r}),c=[Ao(t,a),b1];if(i){let y=FM("groupAgg");n==="count"||(n==="sum"?y=p1("groupAgg"):n==="mean"&&(y=g1("groupAgg"))),s&&(y=kM("groupAgg",y)),c.push(It(i,l,{invalidValue:void 0}),y)}else{let y=FM("groupAgg");s&&(y=kM("groupAgg",y)),c.push(y)}const p=y=>{const C=Wn(y.domain.keys[0]);if(C.length===0)return y.domain.groups=[],()=>[];const x=Eo(this.properties.binCount)?this.calculateNiceBins(C,this.properties.binCount):this.properties.bins??this.deriveBins(C),M=x.length;return this.calculatedBins=[...x],b=>{const R=b.keys[0];for(let I=0;I<M;I++){const P=x[I];if(R>=P[0]&&R<P[1]||I===M-1&&R<=P[1])return P}return[]}};!this.ctx.animationManager.isSkipped()&&this.processedData&&c.push(Pp(this.id,this.processedData,!1)),await this.requestDataModel(e,this.data,{props:c,groupByFn:p}),this.animationState.transition("updateData")}getSeriesDomain(e){var o,a,l;const{processedData:t,dataModel:i}=this;if(!t||!i||!this.calculatedBins.length)return[];const s=i.getDomain(this,"groupAgg","aggregate",t),n=(o=this.calculatedBins)==null?void 0:o[0][0],r=(l=this.calculatedBins)==null?void 0:l[(((a=this.calculatedBins)==null?void 0:a.length)??0)-1][1];return Wn(e==="x"?[n,r]:s)}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{id:e,axes:t,processedData:i}=this,s=t.x,n=t.y;if(!s||!n)return;const{scale:r}=s,{scale:o}=n,{xKey:a,yKey:l,xName:c,yName:p,fill:g,stroke:f,strokeWidth:y,cornerRadius:C}=this.properties,x=this.properties.label.formatter??(I=>String(I.value)),M=[],b={itemId:this.properties.yKey??this.id,nodeData:M,labelData:M,scales:this.calculateScaling(),animationValid:!0,visible:this.visible};if(!this.visible||i==null||i.rawData.length===0||i.type!=="grouped")return b;const{rawData:R}=i;return i.groups.forEach(({keys:I,datumIndices:P,aggregation:k},_)=>{const[[B,H]=[0,0]]=k,V=P.length,U=I,[$,te]=U,Ce=P.map(ue=>R[ue]),be=r.convert($),Re=r.convert(te),oe=B+H,Se=o.convert(0),K=o.convert(oe),pe=Math.abs(Re-be),q=Math.abs(K-Se),W=Math.min(be,Re),Q=Math.min(Se,K);let ve;oe!==0&&(ve={x:W+pe/2,y:Q+q/2,text:this.cachedDatumCallback(As(_,"label"),()=>x({value:oe,datum:Ce,seriesId:e,xKey:a,yKey:l,xName:c,yName:p}))??String(oe)});const se={x:W+pe/2,y:Q+q/2},ye=n.isReversed();M.push({series:this,datumIndex:_,datum:Ce,aggregatedValue:oe,frequency:V,domain:U,yKey:l,xKey:a,x:W,y:Q,xValue:be,yValue:K,width:pe,height:q,midPoint:se,fill:g,stroke:f,cornerRadius:C,topLeftCornerRadius:!ye,topRightCornerRadius:!ye,bottomRightCornerRadius:ye,bottomLeftCornerRadius:ye,opacity:1,strokeWidth:y,label:ve})}),M.sort((I,P)=>I.x-P.x),b}nodeFactory(){return new Zs}updateDatumSelection(e){const{nodeData:t,datumSelection:i}=e;return i.update(t,s=>{s.crisp=!0},s=>s.domain.join("_"))}getItemBaseStyle(e){const{properties:t}=this,i=e?t.highlightStyle.item:void 0;return{fill:(i==null?void 0:i.fill)??t.fill,fillOpacity:(i==null?void 0:i.fillOpacity)??t.fillOpacity,stroke:(i==null?void 0:i.stroke)??t.stroke,strokeWidth:(i==null?void 0:i.strokeWidth)??t.strokeWidth,strokeOpacity:(i==null?void 0:i.strokeOpacity)??t.strokeOpacity}}updateDatumNodes(e){const{isHighlight:t}=e,{fillOpacity:i,strokeOpacity:s,lineDash:n,lineDashOffset:r,shadow:o,highlightStyle:{item:{fill:a,fillOpacity:l=i,stroke:c,strokeWidth:p}}}=this.properties;e.datumSelection.each((g,f,y)=>{const{cornerRadius:C,topLeftCornerRadius:x,topRightCornerRadius:M,bottomRightCornerRadius:b,bottomLeftCornerRadius:R}=f,I=t&&p!==void 0?p:f.strokeWidth,P=t?l:i;g.fill=(t?a:void 0)??f.fill,g.stroke=(t?c:void 0)??f.stroke,g.fillOpacity=P,g.strokeOpacity=s,g.strokeWidth=I,g.lineDash=n,g.lineDashOffset=r,g.topLeftCornerRadius=x?C:0,g.topRightCornerRadius=M?C:0,g.bottomRightCornerRadius=b?C:0,g.bottomLeftCornerRadius=R?C:0,g.fillShadow=o,g.zIndex=t?Lp.highlightedZIndex:y,g.visible=f.height>0})}updateLabelSelection(e){const{labelData:t,labelSelection:i}=e;return i.update(t,s=>{s.pointerEvents=1,s.textAlign="center",s.textBaseline="middle"})}updateLabelNodes(e){const{fontStyle:t,fontWeight:i,fontFamily:s,fontSize:n,color:r}=this.properties.label,o=this.isLabelEnabled();e.labelSelection.each((a,l)=>{o&&(l!=null&&l.label)?(a.text=l.label.text,a.x=l.label.x,a.y=l.label.y,a.fontStyle=t,a.fontWeight=i,a.fontFamily=s,a.fontSize=n,a.fill=r,a.visible=!0):a.visible=!1})}initQuadTree(e){const{value:t}=this.contentGroup.children().next();t&&VD(e,t.children())}pickNodeClosestDatum(e){return WD(this,e)}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:n,properties:r,ctx:{localeManager:o}}=this,{xKey:a,xName:l,yKey:c,yName:p,tooltip:g}=r,f=n.x,y=n.y;if(!i||(s==null?void 0:s.type)!=="grouped"||s.rawData.length===0||!f||!y)return;const C=e.datumIndex,{aggregation:x,datumIndices:M,keys:b}=s.groups[C],[[R,I]=[0,0]]=x,P=M.length,k=b,[_,B]=k,H=R+I,V={data:M.map($=>s.rawData[$]),aggregatedValue:H,frequency:P,domain:k},U=[{label:l,fallbackLabel:a,value:`${f.formatDatum(_)} - ${f.formatDatum(B)}`},{label:o.t("seriesHistogramTooltipFrequency"),value:y.formatDatum(P)}];if(c!=null){let $;switch(r.aggregation){case"sum":$=o.t("seriesHistogramTooltipSum",{yName:p});break;case"mean":$=o.t("seriesHistogramTooltipMean",{yName:p});break;case"count":$=o.t("seriesHistogramTooltipCount",{yName:p});break}U.push({label:$,value:y.formatDatum(H)})}return g.formatTooltip({symbol:this.legendItemSymbol(),data:U},{seriesId:t,datum:V,title:p,xKey:a,xName:l,yKey:c,yName:p,xRange:[_,B],frequency:P,...this.getItemBaseStyle(!1)})}legendItemSymbol(){const{fill:e,fillOpacity:t,stroke:i,strokeWidth:s,strokeOpacity:n}=this.properties;return{marker:{fill:e??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:t,strokeOpacity:n,strokeWidth:s}}}getLegendData(e){if(e!=="category")return[];const{id:t,ctx:{legendManager:i},visible:s}=this,{xKey:n,yName:r,showInLegend:o}=this.properties;return[{legendType:"category",id:t,itemId:n,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:n}),label:{text:r??n??"Frequency"},symbol:this.legendItemSymbol(),hideInLegend:!o}]}animateEmptyUpdateReady({datumSelection:e,labelSelection:t}){const i=Zf($f(!0,this.axes,"normal"));Oi(this.id,"datums",this.ctx.animationManager,[e],i),zt(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){var s,n,r;const t=(r=(n=(s=this.processedData)==null?void 0:s.reduced)==null?void 0:n.diff)==null?void 0:r[this.id],i=Zf($f(!0,this.axes,"normal"));Oi(this.id,"datums",this.ctx.animationManager,[e.datumSelection],i,(o,a)=>As(a.domain),t),zt(this,"labels",this.ctx.animationManager,e.labelSelection)}isLabelEnabled(){return this.properties.label.enabled}computeFocusBounds({datumIndex:e}){var t;return KD((t=this.contextNodeData)==null?void 0:t.nodeData[e])}};ZD.className="HistogramSeries";ZD.type="histogram";var Lee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",moduleFactory:e=>new ZD(e),tooltipDefaults:{range:"exact"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontSize:12,fontFamily:ki,color:cu},shadow:{enabled:!1,color:uu,xOffset:3,yOffset:3,blur:5}}},paletteFactory:({takeColors:e})=>{const{fills:[t],strokes:[i]}=e(1);return{fill:t,stroke:i}}},os=class extends Nl{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.interpolation=new Bp,this.marker=new Qn,this.label=new vs,this.tooltip=new Xs,this.connectMissingData=!1,this.sparklineMode=!1}};A([O(Fe)],os.prototype,"xKey",2);A([O(Fe)],os.prototype,"yKey",2);A([O(Fe,{optional:!0})],os.prototype,"xName",2);A([O(Fe,{optional:!0})],os.prototype,"yName",2);A([O(Fe,{optional:!0})],os.prototype,"yFilterKey",2);A([O(Fe,{optional:!0})],os.prototype,"stackGroup",2);A([O(Ge,{optional:!0})],os.prototype,"normalizedTo",2);A([O(Fe,{optional:!0})],os.prototype,"title",2);A([O(Zt)],os.prototype,"stroke",2);A([O(Ge)],os.prototype,"strokeWidth",2);A([O($t)],os.prototype,"strokeOpacity",2);A([O(El)],os.prototype,"lineDash",2);A([O(Ge)],os.prototype,"lineDashOffset",2);A([O(Ye)],os.prototype,"interpolation",2);A([O(Ye)],os.prototype,"marker",2);A([O(Ye)],os.prototype,"label",2);A([O(Ye)],os.prototype,"tooltip",2);A([O(nt)],os.prototype,"connectMissingData",2);A([O(nt)],os.prototype,"sparklineMode",2);var Tee=.25,KS=class extends ou{constructor(e){super({moduleCtx:e,directionKeys:Gh,directionNames:zh,hasMarkers:!0,pickModes:[2,1,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:zD({getVisible:()=>this.visible,getOpacity:()=>this.getOpacity()}),label:Bl,marker:(t,i)=>({...Em(),...Yf(t,i)})}}),this.clipFocusBox=!1,this.properties=new os,this.dataAggregationFilters=void 0}get pickModeAxis(){return this.properties.sparklineMode?"main":"main-category"}async processData(e){var P,k;if(this.data==null||!this.properties.isValid())return;const{data:t,visible:i,seriesGrouping:{groupIndex:s=this.id,stackCount:n=1}={}}=this,{xKey:r,yKey:o,yFilterKey:a,connectMissingData:l,normalizedTo:c}=this.properties,p=!this.ctx.animationManager.isSkipped(),g=(P=this.axes.x)==null?void 0:P.scale,f=(k=this.axes.y)==null?void 0:k.scale,{isContinuousX:y,xScaleType:C,yScaleType:x}=this.getScaleInformation({xScale:g,yScale:f}),M={invalidValue:null};l&&n>1&&(M.invalidValue=0,i||(M.forceValue=0));const b=[];if(y||b.push(Ao(r,C,{id:"xKey"})),b.push(It(r,C,{id:"xValue"}),It(o,x,{id:"yValueRaw",...M,invalidValue:void 0})),a!=null&&b.push(It(a,x,{id:"yFilterRaw"})),n>1){const _=[`line-stack-${s}-yValues`,`line-stack-${s}-yValues-trailing`,`line-stack-${s}-yValues-marker`];b.push(...jc(o,"window","current",{id:"yValueEnd",...M,groupId:_[0]},x),...jc(o,"window-trailing","current",{id:"yValueStart",...M,groupId:_[1]},x),...jc(o,"normal","current",{id:"yValueCumulative",...M,groupId:_[2]},x)),Gc(c)&&b.push(wS([_[0],_[1],_[2]],c,"range"))}p&&(b.push(Ap(y?["xValue"]:void 0)),this.processedData&&b.push(Pp(this.id,this.processedData)));const{dataModel:R,processedData:I}=await this.requestDataModel(e,t,{props:b});this.dataAggregationFilters=this.aggregateData(R,I),this.animationState.transition("updateData")}getSeriesDomain(e){var n;const{dataModel:t,processedData:i}=this;if(!t||!(i!=null&&i.rawData.length))return[];const s=t.resolveProcessedDataDefById(this,"xValue");if(e==="x"){const r=t.getDomain(this,"xValue","value",i);return(s==null?void 0:s.def.type)==="value"&&s.def.valueType==="category"?r:Wn(Rl(r))}else{const o=(((n=this.seriesGrouping)==null?void 0:n.stackCount)??1)>1?t.getDomain(this,"yValueEnd","value",i):t.getDomain(this,"yValueRaw","value",i);return Wn(o)}}visibleRangeIndices(e,t){const{dataModel:i,processedData:s}=this;if(!i||!s)return[0,0];const n=this.axes.x.scale,r=i.resolveColumnById(this,"xValue",s);return vS((t==null?void 0:t.length)??r.length,e,o=>{const a=n.convert(r[(t==null?void 0:t[o])??o]);return[a,a]})}getSeriesRange(e,t){const{dataModel:i,processedData:s}=this;if(!i||!s)return[NaN,NaN];const[n,r]=this.visibleRangeIndices(t);return i.getDomainBetweenRange(this,["yValueRaw"],[n,r],s)}aggregateData(e,t){}createNodeData(){var me;const{dataModel:e,processedData:t,axes:i,dataAggregationFilters:s}=this,n=i.x,r=i.y;if(!e||!t||t.rawData.length===0||!n||!r)return;const{xKey:o,yKey:a,yFilterKey:l,xName:c,yName:p,marker:g,label:f,connectMissingData:y,interpolation:C,legendItemName:x}=this.properties,M=(((me=this.seriesGrouping)==null?void 0:me.stackCount)??1)>1,b=n.scale,R=r.scale,I=(b.bandwidth??0)/2,P=(R.bandwidth??0)/2,k=g.enabled?g.size:0,{rawData:_}=t,B=e.resolveColumnById(this,"xValue",t),H=e.resolveColumnById(this,"yValueRaw",t),V=M?e.resolveColumnById(this,"yValueEnd",t):void 0,U=M?e.resolveColumnById(this,"yValueCumulative",t):H,$=l!=null?e.resolveColumnById(this,"yFilterRaw",t):void 0,te=ne=>b.convert(B[ne])+I,Ce=ne=>R.convert(U[ne])+P,be={lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},Re=[];let oe;const Se=ne=>{const Ee=_[ne],ze=B[ne],Be=H[ne],$e=V==null?void 0:V[ne],tt=$==null?void 0:$[ne],Ne=te(ne),qe=Ce(ne);if(!Number.isFinite(Ne))return;if(Be!=null){const Rt=f.enabled?this.getLabelText(f,{value:Be,datum:Ee,xKey:o,yKey:a,xName:c,yName:p,legendItemName:x}):void 0;Re.push({series:this,datum:Ee,datumIndex:ne,yKey:a,xKey:o,point:{x:Ne,y:qe,size:k},midPoint:{x:Ne,y:qe},cumulativeValue:$e,yValue:Be,xValue:ze,capDefaults:be,labelText:Rt,selected:tt})}if(oe==null)return;const ft=oe[oe.length-1];if(Be!=null){const Rt={point:{x:Ne,y:qe},xDatum:ze,yDatum:Be};Array.isArray(ft)?ft.push(Rt):ft!=null?(ft.skip+=1,oe.push([Rt])):oe.push([Rt])}else y||(Array.isArray(ft)||ft==null?oe.push({skip:0}):ft.skip+=1)},[K,pe]=b.range,q=pe-K,W=s==null?void 0:s.find(ne=>ne.maxRange>q),Q=W==null?void 0:W.indices;let[ve,se]=this.visibleRangeIndices(n.range,Q);ve=Math.max(ve-1,0),se=Math.min(se+1,(Q==null?void 0:Q.length)??B.length),t.rawData.length<1e3&&(ve=0,se=t.rawData.length),Q==null&&(oe=[]);for(let ne=ve;ne<se;ne+=1)Se((Q==null?void 0:Q[ne])??ne);const ye=oe==null?void 0:oe.flatMap(ne=>Array.isArray(ne)?mC(ne,C):[]),ue=ye!=null?{itemId:a,spans:ye}:void 0,Me=($==null?void 0:$.some((ne,Ee)=>ne===H[Ee]))??!1;return{itemId:a,nodeData:Re,labelData:Re,strokeData:ue,scales:this.calculateScaling(),visible:this.visible,crossFiltering:Me}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:e}=this.properties.marker,t=Xr(e);return new t}updatePathNodes(e){var o;const{paths:[t],opacity:i,visible:s,animationEnabled:n}=e,r=((o=this.contextNodeData)==null?void 0:o.crossFiltering)===!0;t.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity*(r?Tee:1),lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),n||(t.visible=s),yC(this,t)}updateMarkerSelection(e){var n;let{nodeData:t}=e;const{markerSelection:i}=e;return t=this.properties.marker.enabled||((n=this.contextNodeData)==null?void 0:n.crossFiltering)===!0?t:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(t,void 0,r=>As(r.xValue))}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,stroke:r,strokeWidth:o,strokeOpacity:a,marker:l,highlightStyle:c}=this.properties,p=this.getSeriesDomain("x"),g=this.getSeriesDomain("y"),f=Et(i&&c.item,l.getStyle(),{stroke:r,strokeWidth:o,strokeOpacity:a}),y=this.ctx.animationManager.isSkipped();t.each((C,x)=>{this.updateMarkerStyle(C,l,{...Wc(x,s,n,p,g),highlighted:i},f,{applyTranslation:y,selected:x.selected})}),i||l.markClean()}updateLabelSelection(e){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])}updateLabelNodes(e){const{enabled:t,fontStyle:i,fontWeight:s,fontSize:n,fontFamily:r,color:o}=this.properties.label;e.labelSelection.each((a,l)=>{t&&(l!=null&&l.labelText)?(a.fontStyle=i,a.fontWeight=s,a.fontSize=n,a.fontFamily=r,a.textAlign="center",a.textBaseline="bottom",a.text=l.labelText,a.x=l.point.x,a.y=l.point.y-10,a.fill=o,a.visible=!0):a.visible=!1})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:n,properties:r}=this,{xKey:o,xName:a,yKey:l,yName:c,tooltip:p}=r,g=n.x,f=n.y;if(!i||!s||s.rawData.length===0||!g||!f)return;const{datumIndex:y}=e,C=s.rawData[y],x=i.resolveColumnById(this,"xValue",s)[y],M=i.resolveColumnById(this,"yValueRaw",s)[y];if(x!=null)return p.formatTooltip({heading:g.formatDatum(x),symbol:this.legendItemSymbol(),data:[{label:c,fallbackLabel:l,value:f.formatDatum(M)}]},{seriesId:t,datum:C,title:c,xKey:o,xName:a,yKey:l,yName:c,...this.getModuleTooltipParams()})}legendItemSymbol(){const e="rgba(0, 0, 0, 0)",{stroke:t,strokeOpacity:i,strokeWidth:s,lineDash:n,marker:r}=this.properties;return{marker:{shape:r.shape,fill:r.fill??e,stroke:r.stroke??t??e,fillOpacity:r.fillOpacity??1,strokeOpacity:r.strokeOpacity??i??1,strokeWidth:r.strokeWidth??0,enabled:r.enabled},line:{stroke:t??e,strokeOpacity:i,strokeWidth:s,lineDash:n}}}getLegendData(e){if(!(this.properties.isValid()&&e==="category"))return[];const{id:t,ctx:{legendManager:i},visible:s}=this,{yKey:n,yName:r,title:o,legendItemName:a,showInLegend:l}=this.properties;return[{legendType:"category",id:t,itemId:n,legendItemName:a,seriesId:t,enabled:s&&i.getItemEnabled({seriesId:t,itemId:n}),label:{text:a??o??r??n},symbol:this.legendItemSymbol(),hideInLegend:!l}]}updatePaths(e){this.updateLinePaths(e.paths,e.contextData)}plotNodeDataPoints(e,t){if(t.length===0)return;const i=t[0].point;e.moveTo(i.x,i.y);for(let s=1;s<t.length;s+=1){const{x:n,y:r}=t[s].point;e.lineTo(n,r)}}updateLinePaths(e,t){var n;const i=(n=t.strokeData)==null?void 0:n.spans,[s]=e;s.path.clear(),i!=null?kD(s,i):this.plotNodeDataPoints(s.path,t.nodeData),s.markDirty()}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,annotationSelections:s,contextData:n,paths:r}=e,{animationManager:o}=this.ctx;this.updateLinePaths(r,n),GD(this,o,...r),ss([t],Yf),BD(this,o,t),zt(this,"labels",o,i),zt(this,"annotations",o,...s)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateLinePaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var f,y,C;const{animationManager:t}=this.ctx,{markerSelection:i,labelSelection:s,annotationSelections:n,contextData:r,paths:o,previousContextData:a}=e,[l]=o;this.resetMarkerAnimation(e),this.resetLabelAnimation(e);const c=()=>{this.resetPathAnimation(e),this.updateLinePaths(o,r)},p=()=>{t.skipCurrentBatch(),c()};if(r==null||a==null){c(),Kf(this,t,"added",i),vC(this,"path_properties",t,"add",l),zt(this,"labels",t,s),zt(this,"annotations",t,...n);return}if(r.crossFiltering!==a.crossFiltering){p();return}const g=tB(r,a,(C=(y=(f=this.processedData)==null?void 0:f.reduced)==null?void 0:y.diff)==null?void 0:C[this.id]);if(g===void 0){p();return}else if(g.status==="no-op")return;Oi(this.id,"path_properties",t,[l],g.stroke.pathProperties),g.status==="added"?this.updateLinePaths(o,r):g.status==="removed"?this.updateLinePaths(o,a):fC(this.id,"path_update",t,[l],g.stroke.path),g.hasMotion&&(Kf(this,t,void 0,i),zt(this,"labels",t,s),zt(this,"annotations",t,...n))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new lt}getFormattedMarkerStyle(e){const{xKey:t,yKey:i}=this.properties,s=this.getSeriesDomain("x"),n=this.getSeriesDomain("y");return this.getMarkerStyle(this.properties.marker,{...Wc(e,t,i,s,n),highlighted:!0})}computeFocusBounds(e){return Im(this,e)}};KS.className="LineSeries";KS.type="line";var fB={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",moduleFactory:e=>new KS(e),stackable:!0,tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"left"},{type:"category",position:"bottom"}],themeTemplate:{series:{tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,interpolation:{type:"linear",tension:1,position:"end"},marker:{shape:"circle",size:7,strokeWidth:0},label:{enabled:!1,fontSize:12,fontFamily:ki,color:ds},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:e=>{const{marker:t}=AD(e);return{stroke:t.fill,marker:t}}},mB=class extends vs{constructor(){super(...arguments),this.placement="top"}};A([O(yR)],mB.prototype,"placement",2);var Ii=class extends Nl{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.label=new mB,this.tooltip=new Xs,this.marker=new Qn}};A([O(Fe)],Ii.prototype,"xKey",2);A([O(Fe)],Ii.prototype,"yKey",2);A([O(Fe,{optional:!0})],Ii.prototype,"labelKey",2);A([O(Fe,{optional:!0})],Ii.prototype,"colorKey",2);A([O(Fe,{optional:!0})],Ii.prototype,"xFilterKey",2);A([O(Fe,{optional:!0})],Ii.prototype,"yFilterKey",2);A([O(Fe,{optional:!0})],Ii.prototype,"xName",2);A([O(Fe,{optional:!0})],Ii.prototype,"yName",2);A([O(Fe,{optional:!0})],Ii.prototype,"labelName",2);A([O(Fe,{optional:!0})],Ii.prototype,"colorName",2);A([O(QC,{optional:!0})],Ii.prototype,"colorDomain",2);A([O(qr)],Ii.prototype,"colorRange",2);A([O(Fe,{optional:!0})],Ii.prototype,"title",2);A([Ui("marker.shape")],Ii.prototype,"shape",2);A([Ui("marker.size")],Ii.prototype,"size",2);A([Ui("marker.fill")],Ii.prototype,"fill",2);A([Ui("marker.fillOpacity")],Ii.prototype,"fillOpacity",2);A([Ui("marker.stroke")],Ii.prototype,"stroke",2);A([Ui("marker.strokeWidth")],Ii.prototype,"strokeWidth",2);A([Ui("marker.strokeOpacity")],Ii.prototype,"strokeOpacity",2);A([Ui("marker.itemStyler",{optional:!0})],Ii.prototype,"itemStyler",2);A([O(Ye)],Ii.prototype,"label",2);A([O(Ye)],Ii.prototype,"tooltip",2);var XD=class extends ou{constructor(e){super({moduleCtx:e,directionKeys:Gh,directionNames:zh,pickModes:[2,1,0],pathsPerSeries:[],hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:Em,label:Bl},usesPlacedLabels:!0}),this.clipFocusBox=!1,this.properties=new Ii,this.colorScale=new Nh}get pickModeAxis(){return"main-category"}async processData(e){var M,b;if(!this.properties.isValid()||this.data==null||!this.visible)return;const t=(M=this.axes.x)==null?void 0:M.scale,i=(b=this.axes.y)==null?void 0:b.scale,{xScaleType:s,yScaleType:n}=this.getScaleInformation({xScale:t,yScale:i}),r=this.colorScale.type,{xKey:o,yKey:a,xFilterKey:l,yFilterKey:c,labelKey:p,colorKey:g,colorDomain:f,colorRange:y}=this.properties,{dataModel:C,processedData:x}=await this.requestDataModel(e,this.data,{props:[It(o,s,{id:"xValue"}),It(a,n,{id:"yValue"}),...l!=null?[It(l,s,{id:"xFilterValue"})]:[],...c!=null?[It(c,n,{id:"yFilterValue"})]:[],...g?[It(g,r,{id:"colorValue"})]:[],...p?[It(p,"band",{id:"labelValue"})]:[]]});if(g){const R=C.resolveProcessedDataIndexById(this,"colorValue");this.colorScale.domain=f??x.domain.values[R]??[],this.colorScale.range=y,this.colorScale.update()}this.animationState.transition("updateData")}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const s=e==="x"?"xValue":"yValue",n=t.resolveProcessedDataDefById(this,s),r=t.getDomain(this,s,"value",i);return(n==null?void 0:n.def.type)==="value"&&(n==null?void 0:n.def.valueType)==="category"?r:Wn(Rl(r))}getSeriesRange(e,t){return[NaN,NaN]}createNodeData(){const{axes:e,dataModel:t,processedData:i,colorScale:s,visible:n}=this,{xKey:r,yKey:o,xFilterKey:a,yFilterKey:l,labelKey:c,colorKey:p,xName:g,yName:f,labelName:y,marker:C,label:x}=this.properties,{placement:M}=x,b=Xr(C.shape),R=e.x,I=e.y;if(!(t&&(i!=null&&i.rawData.length)&&n&&R&&I))return;const P=t.resolveColumnById(this,"xValue",i),k=t.resolveColumnById(this,"yValue",i),_=p!=null?t.resolveColumnById(this,"colorValue",i):void 0,B=c!=null?t.resolveColumnById(this,"labelValue",i):void 0,H=a!=null?t.resolveColumnById(this,"xFilterValue",i):void 0,V=l!=null?t.resolveColumnById(this,"yFilterValue",i):void 0,U=R.scale,$=I.scale,te=(U.bandwidth??0)/2,Ce=($.bandwidth??0)/2,be=[],Re=x.getFont(),oe=Tl.getMeasurer({font:Re});return i.rawData.forEach((Se,K)=>{const pe=P[K],q=k[K],W=U.convert(pe)+te,Q=$.convert(q)+Ce,ve=H!=null&&V!=null?H[K]===pe&&V[K]===q:void 0,se=this.getLabelText(x,{value:B!=null?B==null?void 0:B[K]:q,datum:Se,xKey:r,yKey:o,labelKey:c,xName:g,yName:f,labelName:y}),ye=oe.measureText(se),ue=_!=null?s.convert(_[K]):void 0;be.push({series:this,itemId:o,yKey:o,xKey:r,datum:Se,datumIndex:K,xValue:pe,yValue:q,capDefaults:{lengthRatioMultiplier:C.getDiameter(),lengthMax:1/0},point:{x:W,y:Q,size:C.size},midPoint:{x:W,y:Q},fill:ue,label:{text:se,...ye},marker:b,placement:M,selected:ve})}),{itemId:o,nodeData:be,labelData:be,scales:this.calculateScaling(),visible:this.visible}}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var e;return this.isLabelEnabled()?((e=this.contextNodeData)==null?void 0:e.labelData)??[]:[]}markerFactory(){const{shape:e}=this.properties.marker,t=Xr(e);return new t}updateMarkerSelection(e){const{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])}getMarkerItemBaseStyle(e){const{properties:t}=this,{marker:i}=t,s=e?t.highlightStyle.item:void 0;return{fill:(s==null?void 0:s.fill)??i.fill,fillOpacity:(s==null?void 0:s.fillOpacity)??i.fillOpacity,stroke:(s==null?void 0:s.stroke)??i.stroke,strokeWidth:(s==null?void 0:s.strokeWidth)??i.strokeWidth,strokeOpacity:(s==null?void 0:s.strokeOpacity)??i.strokeOpacity}}getMarkerItemStyleOverrides(e,t,i,s){const{id:n,properties:r}=this,{xKey:o,yKey:a,labelKey:l,marker:c}=r,{itemStyler:p}=c;if(p!=null)return this.cachedDatumCallback(As(e,s?"highlight":"node"),()=>p({seriesId:n,datum:t,xKey:o,yKey:a,labelKey:l,highlighted:s,...i}))}updateMarkerNodes(e){const{markerSelection:t,isHighlight:i}=e,{xKey:s,yKey:n,labelKey:r,marker:o,highlightStyle:a}=this.properties,l=Et(i&&a.item,o.getStyle());t.each((c,p)=>{this.updateMarkerStyle(c,o,{datum:p,highlighted:i,xKey:s,yKey:n,labelKey:r},l,{selected:p.selected})}),i||o.markClean()}updatePlacedLabelData(e){this.labelSelection.update(e.map(t=>({...t.datum,point:{x:t.x,y:t.y,size:t.datum.point.size}})),t=>{t.pointerEvents=1}),this.updateLabelNodes({labelSelection:this.labelSelection})}updateLabelNodes(e){const{label:t}=this.properties;e.labelSelection.each((i,s)=>{var n,r;i.text=s.label.text,i.fill=t.color,i.x=((n=s.point)==null?void 0:n.x)??0,i.y=((r=s.point)==null?void 0:r.y)??0,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.fontSize=t.fontSize,i.fontFamily=t.fontFamily,i.textAlign="left",i.textBaseline="top"})}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,axes:n,properties:r}=this,{xKey:o,xName:a,yKey:l,yName:c,labelKey:p,labelName:g,title:f,tooltip:y}=r,C=n.x,x=n.y;if(!i||!s||s.rawData.length===0||!C||!x)return;const{datumIndex:M}=e,b=s.rawData[M],R=i.resolveColumnById(this,"xValue",s)[M],I=i.resolveColumnById(this,"yValue",s)[M];if(R==null)return;const P=this.getMarkerItemBaseStyle(!1);return Object.assign(P,this.getMarkerItemStyleOverrides(String(M),b,P,!1)),y.formatTooltip({symbol:this.legendItemSymbol(),title:f,data:[{label:a,fallbackLabel:o,value:C.formatDatum(R)},{label:c,fallbackLabel:l,value:x.formatDatum(I)}]},{seriesId:t,datum:b,title:c,xKey:o,xName:a,yKey:l,yName:c,labelKey:p,labelName:g,...P,...this.getModuleTooltipParams()})}legendItemSymbol(){const{shape:e,fill:t,stroke:i,fillOpacity:s,strokeOpacity:n,strokeWidth:r}=this.properties.marker;return{marker:{shape:e,fill:t??"rgba(0, 0, 0, 0)",stroke:i??"rgba(0, 0, 0, 0)",fillOpacity:s??1,strokeOpacity:n??1,strokeWidth:r??0}}}getLegendData(e){if(!this.properties.isValid()||e!=="category")return[];const{yKey:t,yName:i,title:s,showInLegend:n}=this.properties,{id:r,ctx:{legendManager:o},visible:a}=this;return[{legendType:"category",id:r,itemId:t,seriesId:r,enabled:a&&o.getItemEnabled({seriesId:r,itemId:t}),label:{text:s??i??t},symbol:this.legendItemSymbol(),hideInLegend:!n}]}animateEmptyUpdateReady(e){const{markerSelection:t,labelSelection:i,annotationSelections:s}=e;_D(this,this.ctx.animationManager,t),zt(this,"labels",this.ctx.animationManager,i),zt(this,"annotations",this.ctx.animationManager,...s)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new lt}getFormattedMarkerStyle(e){const{xKey:t,yKey:i,labelKey:s}=this.properties;return this.getMarkerStyle(this.properties.marker,{datum:e,xKey:t,yKey:i,labelKey:s,highlighted:!0})}computeFocusBounds(e){return Im(this,e)}};XD.className="ScatterSeries";XD.type="scatter";var Aee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",moduleFactory:e=>new XD(e),tooltipDefaults:{range:"nearest"},defaultAxes:[{type:"number",position:"bottom"},{type:"number",position:"left"}],themeTemplate:{series:{shape:"circle",size:7,fillOpacity:.8,tooltip:{position:{type:"node"}},label:{enabled:!1,fontSize:12,fontFamily:ki,color:ds},errorBar:{cap:{lengthRatio:1}}}},paletteFactory:Dm},vB=class _M{constructor(t,i,s,n){this.startAngle=t,this.endAngle=i,this.innerRadius=s,this.outerRadius=n}clone(){const{startAngle:t,endAngle:i,innerRadius:s,outerRadius:n}=this;return new _M(t,i,s,n)}equals(t){return this.startAngle===t.startAngle&&this.endAngle===t.endAngle&&this.innerRadius===t.innerRadius&&this.outerRadius===t.outerRadius}[GC](t,i){return new _M(this.startAngle*(1-i)+t.startAngle*i,this.endAngle*(1-i)+t.endAngle*i,this.innerRadius*(1-i)+t.innerRadius*i,this.outerRadius*(1-i)+t.outerRadius*i)}};function QD({startAngle:e,endAngle:t,innerRadius:i,outerRadius:s}){let n=1/0,r=1/0,o=-1/0,a=-1/0;const l=(c,p)=>{n=Math.min(c,n),r=Math.min(p,r),o=Math.max(c,o),a=Math.max(p,a)};return l(i*Math.cos(e),i*Math.sin(e)),l(i*Math.cos(t),i*Math.sin(t)),l(s*Math.cos(e),s*Math.sin(e)),l(s*Math.cos(t),s*Math.sin(t)),Vr(0,e,t)&&l(s,0),Vr(Math.PI*.5,e,t)&&l(0,s),Vr(Math.PI,e,t)&&l(-s,0),Vr(Math.PI*1.5,e,t)&&l(0,-s),new Ue(n,r,o-n,a-r)}function CC(e,t,i){const s=Math.sqrt(Math.pow(e,2)+Math.pow(t,2)),{innerRadius:n,outerRadius:r}=i;if(i.startAngle===i.endAngle||s<Math.min(n,r)||s>Math.max(n,r))return!1;const o=Nf(i.startAngle),a=Nf(i.endAngle),l=Math.atan2(t,e);return o<a?l<=a&&l>=o:l<=a&&l>=-Math.PI||l>=o&&l<=Math.PI}function HA(e,t){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:r}=t,o={x:r*Math.cos(i),y:r*Math.sin(i)},a={x:r*Math.cos(s),y:r*Math.sin(s)},l=n===0?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)},c=n===0?{x:0,y:0}:{x:n*Math.cos(s),y:n*Math.sin(s)};return Xd(e.start.x,e.start.y,e.end.x,e.end.y,o.x,o.y,l.x,l.y)||Xd(e.start.x,e.start.y,e.end.x,e.end.y,a.x,a.y,c.x,c.y)||Y_(0,0,r,i,s,!0,e.start.x,e.start.y,e.end.x,e.end.y)}function yB(e,t){const i={x:e.x,y:e.y},s={x:e.x+e.width,y:e.y},n={x:e.x,y:e.y+e.height},r={x:e.x+e.width,y:e.y+e.height};return HA({start:i,end:s},t)||HA({start:n,end:r},t)}function VA(e,t,i,s){if(i===0&&s===0)return 0;if(Math.asin(Math.abs(1*i)/(e+1*i))+Math.asin(Math.abs(1*s)/(e+1*s))-t<0)return 1;let r=0,o=1;for(let a=0;a<8;a+=1){const l=(r+o)/2;Math.asin(Math.abs(l*i)/(e+l*i))+Math.asin(Math.abs(l*s)/(e+l*s))-t<0?r=l:o=l}return r}var Pee=1e-6;function Kc(e,t){return ym(e,t)<Pee?t:Qt(e-t)+t}function ny(e,t,i=0){const n=Math.abs(t-e)>=2*Math.PI?2*Math.PI:Qt(t-e);return e=Kc(e,i),t=e+n,{startAngle:e,endAngle:t}}function ry(e,t,i,s,n,r){const o=Math.sin(r),a=Math.cos(r),l=e**2+t**2-i**2;let c,p,g,f;if(a>.5){const I=o/a,P=1+I**2,k=-2*(e+t*I),_=k**2-4*P*l;if(_<0)return;const B=(-k+Math.sqrt(_))/(2*P),H=(-k-Math.sqrt(_))/(2*P);c=B,p=B*I,g=H,f=H*I}else{const I=a/o,P=1+I**2,k=-2*(t+e*I),_=k**2-4*P*l;if(_<0)return;const B=(-k+Math.sqrt(_))/(2*P),H=(-k-Math.sqrt(_))/(2*P);c=B*I,p=B,g=H*I,f=H}const y=a,C=o,x=c*y+p*C,M=g*y+f*C,b=x>0?Kc(Math.atan2(p-t,c-e),s):NaN,R=M>0?Kc(Math.atan2(f-t,g-e),s):NaN;if(b>=s&&b<=n)return b;if(R>=s&&R<=n)return R}function oy(e,t,i,s,n,r){const o=Math.hypot(e,t),a=(o**2-i**2+r**2)/(2*o),l=o-a,c=Math.atan2(t,e),p=Math.acos(-l/i),g=Kc(c+p,s),f=Kc(c-p,s);if(g>=s&&g<=n)return g;if(f>=s&&f<=n)return f}var Sb=class{constructor(e,t,i,s,n){this.cx=e,this.cy=t,this.r=i,this.a0=s,this.a1=n,this.a0>=this.a1&&(this.a0=NaN,this.a1=NaN)}isValid(){return Number.isFinite(this.a0)&&Number.isFinite(this.a1)}pointAt(e){return{x:this.cx+this.r*Math.cos(e),y:this.cy+this.r*Math.sin(e)}}clipStart(e){e==null||!this.isValid()||e<this.a0||(this.a0=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}clipEnd(e){e==null||!this.isValid()||e>this.a1||(this.a1=e,(Number.isNaN(e)||this.a0>=this.a1)&&(this.a0=NaN,this.a1=NaN))}},Rs=class extends Rn{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=Math.PI*2,this.clipSector=void 0,this.concentricEdgeInset=0,this.radialEdgeInset=0,this.startOuterCornerRadius=0,this.endOuterCornerRadius=0,this.startInnerCornerRadius=0,this.endInnerCornerRadius=0}set inset(e){this.concentricEdgeInset=e,this.radialEdgeInset=e}set cornerRadius(e){this.startOuterCornerRadius=e,this.endOuterCornerRadius=e,this.startInnerCornerRadius=e,this.endInnerCornerRadius=e}computeBBox(){return QD(this).translate(this.centerX,this.centerY)}normalizedRadii(){const{concentricEdgeInset:e}=this;let{innerRadius:t,outerRadius:i}=this;return t=t>0?t+e:0,i=Math.max(i-e,0),{innerRadius:t,outerRadius:i}}normalizedClipSector(){const{clipSector:e}=this;if(e==null)return;const{startAngle:t,endAngle:i}=ny(this.startAngle,this.endAngle),{innerRadius:s,outerRadius:n}=this.normalizedRadii(),r=ny(e.startAngle,e.endAngle,t);return new vB(Math.max(t,r.startAngle),Math.min(i,r.endAngle),Math.max(s,e.innerRadius),Math.min(n,e.outerRadius))}getAngleOffset(e){return e>0?this.radialEdgeInset/e:0}arc(e,t,i,s,n,r,o,a){if(e<=0)return;const{startAngle:l,endAngle:c}=ny(this.startAngle,this.endAngle),{innerRadius:p,outerRadius:g}=this.normalizedRadii(),f=this.normalizedClipSector();if(a&&p<=0)return;const y=a?this.getAngleOffset(p+e):this.getAngleOffset(g-e),C=o?l+y+t:c-y-t,x=a?p+e:g-e,M=x*Math.cos(C),b=x*Math.sin(C);if(f!=null&&(!o&&!(C>=l-1e-6&&C<=f.endAngle-1e-6)||o&&!(C>=f.startAngle+1e-6&&C<=c-1e-6)||a&&x<f.innerRadius-1e-6||!a&&x>f.outerRadius+1e-6))return;const R=new Sb(M,b,e,i,s);if(f!=null){a?(R.clipStart(ry(M,b,e,i,s,f.endAngle)),R.clipEnd(ry(M,b,e,i,s,f.startAngle))):(R.clipStart(ry(M,b,e,i,s,f.startAngle)),R.clipEnd(ry(M,b,e,i,s,f.endAngle)));let B,H;if(o?(B=oy(M,b,e,i,s,f.innerRadius),H=oy(M,b,e,i,s,f.outerRadius)):(B=oy(M,b,e,i,s,f.outerRadius),H=oy(M,b,e,i,s,f.innerRadius)),R.clipStart(B),R.clipEnd(H),B!=null){const{x:V,y:U}=R.pointAt(B),$=Kc(Math.atan2(U,V),l);o?r==null||r.clipStart($):n.clipEnd($)}if(H!=null){const{x:V,y:U}=R.pointAt(H),$=Kc(Math.atan2(U,V),l);o?n.clipStart($):r==null||r.clipEnd($)}}if(f!=null){const{x:B,y:H}=R.pointAt((R.a0+R.a1)/2);if(!CC(B,H,f))return}const{x:I,y:P}=R.pointAt(o===a?R.a0:R.a1),k=Kc(Math.atan2(P,I),l),_=a?r:n;return o?_==null||_.clipStart(k):_==null||_.clipEnd(k),R}updatePath(){const{path:t,centerX:i,centerY:s,concentricEdgeInset:n,radialEdgeInset:r}=this;let{startOuterCornerRadius:o,endOuterCornerRadius:a,startInnerCornerRadius:l,endInnerCornerRadius:c}=this;const{startAngle:p,endAngle:g}=ny(this.startAngle,this.endAngle),{innerRadius:f,outerRadius:y}=this.normalizedRadii(),C=this.normalizedClipSector(),x=g-p,M=x>=2*Math.PI-1e-6;if(t.clear(),f===0&&y===0||f>y)return;if(((C==null?void 0:C.startAngle)??p)===((C==null?void 0:C.endAngle)??g))return;if(M&&this.clipSector==null&&o===0&&a===0&&l===0&&c===0){t.moveTo(i+y*Math.cos(p),s+y*Math.sin(p)),t.arc(i,s,y,p,g),f>n&&(t.moveTo(i+f*Math.cos(g),s+f*Math.sin(g)),t.arc(i,s,f,g,p,!0)),t.closePath();return}else if(this.clipSector==null&&Math.abs(f-y)<1e-6){t.arc(i,s,y,p,g,!1),t.arc(i,s,y,g,p,!0),t.closePath();return}const b=this.getAngleOffset(f),R=this.getAngleOffset(y);if(x<2*R)return;const P=((C==null?void 0:C.innerRadius)??f)>n,k=f<n||x<2*b,_=y-f,B=Math.max(o,l,a,c),H=B>0?Math.min(_/B,1):1;o*=H,a*=H,l*=H,c*=H;const V=VA(y,x-2*R,-o,-a);if(o*=V,a*=V,!k&&P){const me=VA(f,x-2*b,l,c);l*=me,c*=me}else l=0,c=0;const U=Math.max(o+l,a+c),$=U>0?Math.min(_/U,1):1;o*=$,a*=$,l*=$,c*=$;let te=0,Ce=0;const be=o/(y-o),Re=a/(y-a);if(be>=0&&be<1-1e-6)te=Math.asin(be);else{te=x/2;const me=y/(1/Math.sin(te)+1);o=Math.min(me,o)}if(Re>=0&&Re<1-1e-6)Ce=Math.asin(Re);else{Ce=x/2;const me=y/(1/Math.sin(Ce)+1);a=Math.min(me,a)}const oe=Math.asin(l/(f+l)),Se=Math.asin(c/(f+c)),K=(C==null?void 0:C.outerRadius)??y,pe=this.getAngleOffset(K),q=new Sb(0,0,K,p+pe,g-pe),W=(C==null?void 0:C.innerRadius)??f,Q=this.getAngleOffset(W),ve=P?new Sb(0,0,W,p+Q,g-Q):void 0;C!=null&&(q.clipStart(C.startAngle),q.clipEnd(C.endAngle),ve==null||ve.clipStart(C.startAngle),ve==null||ve.clipEnd(C.endAngle));const se=this.arc(o,te,p-Math.PI*.5,p+te,q,ve,!0,!1),ye=this.arc(a,Ce,g-Ce,g+Math.PI*.5,q,ve,!1,!1),ue=this.arc(c,Se,g+Math.PI*.5,g+Math.PI-Se,q,ve,!1,!0),Me=this.arc(l,oe,p+Math.PI+oe,p+Math.PI*1.5,q,ve,!0,!0);if(k){const me=x<Math.PI*.5?r*(1+Math.cos(x))/Math.sin(x):NaN;let ne;me>0&&me<y?ne=Math.max(Math.hypot(r,me),f):ne=r,ne=Math.max(ne,f);const Ee=p+x*.5;t.moveTo(i+ne*Math.cos(Ee),s+ne*Math.sin(Ee))}else if(!((Me==null?void 0:Me.isValid())===!0||(ve==null?void 0:ve.isValid())===!0)){const me=p+x/2,ne=f*Math.cos(me),Ee=f*Math.sin(me);t.moveTo(i+ne,s+Ee)}if((se==null?void 0:se.isValid())===!0){const{cx:me,cy:ne,r:Ee,a0:ze,a1:Be}=se;t.arc(i+me,s+ne,Ee,ze,Be)}if(q.isValid()){const{r:me,a0:ne,a1:Ee}=q;t.arc(i,s,me,ne,Ee)}if((ye==null?void 0:ye.isValid())===!0){const{cx:me,cy:ne,r:Ee,a0:ze,a1:Be}=ye;t.arc(i+me,s+ne,Ee,ze,Be)}if(!k){if((ue==null?void 0:ue.isValid())===!0){const{cx:me,cy:ne,r:Ee,a0:ze,a1:Be}=ue;t.arc(i+me,s+ne,Ee,ze,Be)}if((ve==null?void 0:ve.isValid())===!0){const{r:me,a0:ne,a1:Ee}=ve;t.arc(i,s,me,Ee,ne,!0)}if((Me==null?void 0:Me.isValid())===!0){const{cx:me,cy:ne,r:Ee,a0:ze,a1:Be}=Me;t.arc(i+me,s+ne,Ee,ze,Be)}}t.closePath()}isPointInPath(e,t){const{startAngle:i,endAngle:s,innerRadius:n,outerRadius:r}=this.clipSector??this;return CC(e-this.centerX,t-this.centerY,{startAngle:i,endAngle:s,innerRadius:Math.min(n,r),outerRadius:Math.max(n,r)})}};Rs.className="Sector";A([gt()],Rs.prototype,"centerX",2);A([gt()],Rs.prototype,"centerY",2);A([gt()],Rs.prototype,"innerRadius",2);A([gt()],Rs.prototype,"outerRadius",2);A([gt()],Rs.prototype,"startAngle",2);A([gt()],Rs.prototype,"endAngle",2);A([gt()],Rs.prototype,"clipSector",2);A([gt()],Rs.prototype,"concentricEdgeInset",2);A([gt()],Rs.prototype,"radialEdgeInset",2);A([gt()],Rs.prototype,"startOuterCornerRadius",2);A([gt()],Rs.prototype,"endOuterCornerRadius",2);A([gt()],Rs.prototype,"startInnerCornerRadius",2);A([gt()],Rs.prototype,"endInnerCornerRadius",2);var hs={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},sa={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},CB=class extends li{constructor(){super(...arguments),this.showInLegend=!1}};A([O(nt)],CB.prototype,"showInLegend",2);var qD=class extends vs{constructor(){super(...arguments),this.spacing=2}set(e,t){return super.set(e)}};A([O(Fe)],qD.prototype,"text",2);A([O(_t)],qD.prototype,"spacing",2);var JD=class extends yt{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};A([O(Zt)],JD.prototype,"fill",2);A([O($t)],JD.prototype,"fillOpacity",2);var Gp=class extends vs{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};A([O(Ge)],Gp.prototype,"offset",2);A([O(_t.restrict({min:0,max:360}))],Gp.prototype,"minAngle",2);A([O(Ge)],Gp.prototype,"minSpacing",2);A([O(Ge)],Gp.prototype,"maxCollisionOffset",2);A([O(nt)],Gp.prototype,"avoidCollisions",2);var eE=class extends vs{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};A([O(_t)],eE.prototype,"positionOffset",2);A([O($t)],eE.prototype,"positionRatio",2);var YS=class extends yt{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};A([O(qr,{optional:!0})],YS.prototype,"colors",2);A([O(Ge)],YS.prototype,"length",2);A([O(Ge)],YS.prototype,"strokeWidth",2);var Ft=class extends yr{constructor(){super(...arguments),this.fills=Object.values(hs),this.strokes=Object.values(sa),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.innerLabels=new dm(qD),this.title=new CB,this.innerCircle=new JD,this.shadow=new _o,this.calloutLabel=new Gp,this.sectorLabel=new eE,this.calloutLine=new YS,this.tooltip=new Xs}isValid(){const e=super.isValid();return this.innerRadiusRatio==null&&this.innerRadiusOffset==null?(_e.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):e}};A([O(Fe)],Ft.prototype,"angleKey",2);A([O(Fe,{optional:!0})],Ft.prototype,"angleName",2);A([O(Fe,{optional:!0})],Ft.prototype,"angleFilterKey",2);A([O(Fe,{optional:!0})],Ft.prototype,"radiusKey",2);A([O(Fe,{optional:!0})],Ft.prototype,"radiusName",2);A([O(Ge,{optional:!0})],Ft.prototype,"radiusMin",2);A([O(Ge,{optional:!0})],Ft.prototype,"radiusMax",2);A([O(Fe,{optional:!0})],Ft.prototype,"calloutLabelKey",2);A([O(Fe,{optional:!0})],Ft.prototype,"calloutLabelName",2);A([O(Fe,{optional:!0})],Ft.prototype,"sectorLabelKey",2);A([O(Fe,{optional:!0})],Ft.prototype,"sectorLabelName",2);A([O(Fe,{optional:!0})],Ft.prototype,"legendItemKey",2);A([O(qr)],Ft.prototype,"fills",2);A([O(qr)],Ft.prototype,"strokes",2);A([O($t)],Ft.prototype,"fillOpacity",2);A([O($t)],Ft.prototype,"strokeOpacity",2);A([O(El)],Ft.prototype,"lineDash",2);A([O(Ge)],Ft.prototype,"lineDashOffset",2);A([O(Ge)],Ft.prototype,"cornerRadius",2);A([O(Mn,{optional:!0})],Ft.prototype,"itemStyler",2);A([O(_t)],Ft.prototype,"rotation",2);A([O(_t)],Ft.prototype,"outerRadiusOffset",2);A([O($t)],Ft.prototype,"outerRadiusRatio",2);A([O(_t,{optional:!0})],Ft.prototype,"innerRadiusOffset",2);A([O($t,{optional:!0})],Ft.prototype,"innerRadiusRatio",2);A([O(Ge)],Ft.prototype,"strokeWidth",2);A([O(_t)],Ft.prototype,"sectorSpacing",2);A([O(nt)],Ft.prototype,"hideZeroValueSectorsInLegend",2);A([O(mR)],Ft.prototype,"innerLabels",2);A([O(Ye)],Ft.prototype,"title",2);A([O(Ye)],Ft.prototype,"innerCircle",2);A([O(Ye)],Ft.prototype,"shadow",2);A([O(Ye)],Ft.prototype,"calloutLabel",2);A([O(Ye)],Ft.prototype,"sectorLabel",2);A([O(Ye)],Ft.prototype,"calloutLine",2);A([O(Ye)],Ft.prototype,"tooltip",2);function mh(e,t,i,s){const n=[i.convert(0),i.convert(1)],r=[s.convert(0),s.convert(1)],o=Math.PI/-2+Ys(t),a=e?"initial":"update",l=({radius:C})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*C}),c=({radius:C})=>({innerRadius:r[0],outerRadius:r[0]+(r[1]-r[0])*C});return{nodes:{toFn:(C,x,M,{prevLive:b})=>{var H,V;let{startAngle:R,endAngle:I,innerRadius:P,outerRadius:k}=x;const{stroke:_,fill:B}=x.sectorFormat;if(M==="removed"&&b?(R=(H=b.datum)==null?void 0:H.endAngle,I=(V=b.datum)==null?void 0:V.endAngle):M==="removed"&&!b&&(R=o,I=o),M==="removed"){const U=l(x);P=U.innerRadius,k=U.outerRadius}return{startAngle:R,endAngle:I,outerRadius:k,innerRadius:P,stroke:_,fill:B}},fromFn:(C,x,M,{prevFromProps:b})=>{let{startAngle:R,endAngle:I,innerRadius:P,outerRadius:k}=C,{fill:_,stroke:B}=x.sectorFormat;if(M==="unknown"||M==="added"&&!b?(R=o,I=o,P=x.innerRadius,k=x.outerRadius):M==="added"&&b&&(R=b.endAngle??o,I=b.endAngle??o,P=b.innerRadius??x.innerRadius,k=b.outerRadius??x.outerRadius),M==="added"&&!e){const H=c(x);P=H.innerRadius,k=H.outerRadius}return M==="updated"&&(_=C.fill??_,B=(typeof C.stroke=="string"?C.stroke:void 0)??B),{startAngle:R,endAngle:I,innerRadius:P,outerRadius:k,fill:_,stroke:B,phase:a}}},innerCircle:{fromFn:(C,x)=>{var M;return{size:((M=C.previousDatum)==null?void 0:M.radius)??C.size??0,phase:a}},toFn:(C,x)=>({size:x.radius??0})}}}function tE(e,t){return{startAngle:t.startAngle,endAngle:t.endAngle,innerRadius:t.innerRadius,outerRadius:t.outerRadius,fill:t.sectorFormat.fill,stroke:t.sectorFormat.stroke}}function iE(e,t){const i=t.y-e.centerY,s=t.x-e.centerX,n=Math.atan2(i,s),r=e.getItemNodes();for(const o of r)if(o.datum.missing!==!0&&Vr(n,o.startAngle,o.endAngle)){const a=Math.sqrt(s*s+i*i);let l=0;return a<o.innerRadius?l=o.innerRadius-a:a>o.outerRadius&&(l=a-o.outerRadius),{datum:o.datum,distance:l}}}var SB=(e=>(e[e.BACKGROUND=0]="BACKGROUND",e[e.FOREGROUND=1]="FOREGROUND",e[e.HIGHLIGHT=2]="HIGHLIGHT",e[e.LABEL=3]="LABEL",e))(SB||{}),$S=class extends uD{constructor({useLabelLayer:e=!1,pickModes:t=[1,0],canHaveAxes:i=!1,animationResetFns:s,...n}){super({...n,useLabelLayer:e,pickModes:t,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:i}),this.itemGroup=this.contentGroup.appendChild(new lt),this.nodeData=[],this.itemSelection=Ji.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=Ji.select(this.labelGroup,()=>this.labelFactory(),!1),this.highlightSelection=Ji.select(this.highlightGroup,()=>this.nodeFactory()),this.highlightLabelSelection=Ji.select(this.highlightLabel,()=>this.labelFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.animationResetFns=s,this.animationState=new Cm("empty",{empty:{update:{target:"ready",action:r=>this.animateEmptyUpdateReady(r)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:r=>this.animateReadyHighlight(r),highlightMarkers:r=>this.animateReadyHighlightMarkers(r),resize:r=>this.animateReadyResize(r),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:r=>this.animateWaitingUpdateReady(r)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:r=>this.animateClearingUpdateEmpty(r)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}getItemNodes(){return[...this.itemGroup.children()]}getNodeData(){return this.nodeData}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.contentGroup.zIndex=[e,1],this.highlightGroup.zIndex=[e,2],this.labelGroup.zIndex=[e,3],!0):!1}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}labelFactory(){const e=new gs;return e.pointerEvents=1,e}addChartEventListeners(){var e;this.destroyFns.push((e=this.ctx.chartEventManager)==null?void 0:e.addListener("legend-item-click",t=>this.onLegendItemClick(t)))}getInnerRadius(){return 0}computeLabelsBBox(e,t){return null}resetAllAnimation(){const{item:e,label:t}=this.animationResetFns??{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&ss([this.itemSelection,this.highlightSelection],e),t&&ss([this.labelSelection,this.highlightLabelSelection],t),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup(),this.highlightLabelSelection.cleanup()}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(e){const{item:t,label:i}=this.animationResetFns??{};t&&ss([this.highlightSelection],t),i&&ss([this.highlightLabelSelection],i)}animateReadyHighlightMarkers(e){}animateReadyResize(e){this.resetAllAnimation()}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}computeFocusBounds(e){var i;const t=(i=this.getNodeData())==null?void 0:i[e.datumIndex];if(t!==void 0)return this.itemSelection.select(s=>s instanceof Rn&&s.datum===t)[0]}getSeriesRange(e,t){return[NaN,NaN]}},Fee=class extends xm{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},sE=class extends $S{constructor(e){super({moduleCtx:e,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:tE,label:Bl}}),this.properties=new Ft,this.phantomNodeData=void 0,this.backgroundGroup=new yn({name:`${this.id}-background`,zIndex:0}),this.noVisibleData=!1,this.previousRadiusScale=new $r,this.radiusScale=new $r,this.phantomGroup=this.backgroundGroup.appendChild(new lt({name:"phantom"})),this.phantomSelection=Ji.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new lt({name:"pieCalloutLabels"})),this.calloutLabelSelection=new Ji(this.calloutLabelGroup,lt),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new lt({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Vc),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Vc),this.innerLabelsGroup=this.contentGroup.appendChild(new lt({name:"innerLabels"})),this.innerCircleGroup=this.backgroundGroup.appendChild(new lt({name:`${this.id}-innerCircle`})),this.innerLabelsSelection=Ji.select(this.innerLabelsGroup,gs),this.innerCircleSelection=Ji.select(this.innerCircleGroup,Vc),this.surroundingRadius=void 0,this.NodeEvent=Fee,this.angleScale=new $r,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),e==null||e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),e==null||e.removeChild(this.backgroundGroup)}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.backgroundGroup.zIndex=[0,e],!0):!1}nodeFactory(){return new Rs}getSeriesDomain(e){return e==="x"?this.angleScale.domain:this.radiusScale.domain}async processData(e){var x,M;if(this.data==null||!this.properties.isValid())return;const{visible:t,id:i}=this,{angleKey:s,angleFilterKey:n,radiusKey:r,calloutLabelKey:o,sectorLabelKey:a,legendItemKey:l}=this.properties,c=(b,R,I)=>t&&this.ctx.legendManager.getItemEnabled({seriesId:i,itemId:I}),p=!this.ctx.animationManager.isSkipped(),g=[],f=[];l?g.push(Ao(l,"band",{id:"legendItemKey"})):o?g.push(Ao(o,"band",{id:"calloutLabelKey"})):a&&g.push(Ao(a,"band",{id:"sectorLabelKey"}));const y=this.radiusScale.type,C=this.angleScale.type;r&&f.push(gD(r,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),It(r,y,{id:"radiusRaw"}),fh("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),o&&f.push(It(o,"band",{id:"calloutLabelValue"})),a&&f.push(It(a,"band",{id:"sectorLabelValue"})),l&&f.push(It(l,"band",{id:"legendItemValue"})),n&&f.push(Vf(n,C,{id:"angleFilterValue",onlyPositive:!0,validation:c,invalidValue:0}),It(n,C,{id:"angleFilterRaw"}),fh("angleFilterValue",[0,1],0,0)),p&&this.processedData&&g.length>0&&f.push(Pp(this.id,this.processedData)),f.push(Ap()),await this.requestDataModel(e,this.data,{props:[...g,Vf(s,C,{id:"angleValue",onlyPositive:!0,validation:c,invalidValue:0}),It(s,C,{id:"angleRaw"}),fh("angleValue",[0,1],0,0),...f]});for(const b of((M=(x=this.processedData)==null?void 0:x.defs)==null?void 0:M.values)??[]){const{id:R,missing:I,property:P}=b,k=XR(this,I);R!=="angleRaw"&&k>0&&_e.warnOnce(`no value was found for the key '${String(P)}' on ${k} data element${k>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:e=[],phantomNodeData:t}=this.createNodeData()??{};this.nodeData=e,this.phantomNodeData=t,this.nodeDataRefresh=!1}getProcessedDataValues(e,t){const i=e.resolveColumnById(this,"angleValue",t),s=e.resolveColumnById(this,"angleRaw",t),n=this.properties.angleFilterKey!=null?e.resolveColumnById(this,"angleFilterValue",t):void 0,r=this.properties.angleFilterKey!=null?e.resolveColumnById(this,"angleFilterRaw",t):void 0,o=this.properties.radiusKey?e.resolveColumnById(this,"radiusValue",t):void 0,a=this.properties.radiusKey?e.resolveColumnById(this,"radiusRaw",t):void 0,l=this.properties.calloutLabelKey?e.resolveColumnById(this,"calloutLabelValue",t):void 0,c=this.properties.sectorLabelKey?e.resolveColumnById(this,"sectorLabelValue",t):void 0,p=this.properties.legendItemKey?e.resolveColumnById(this,"legendItemValue",t):void 0;return{angleValues:i,angleRawValues:s,angleFilterValues:n,angleFilterRawValues:r,radiusValues:o,radiusRawValues:a,calloutLabelValues:l,sectorLabelValues:c,legendItemValues:p}}createNodeData(){const{id:e,processedData:t,dataModel:i,angleScale:s,ctx:{legendManager:n},visible:r}=this,{rotation:o,innerRadiusRatio:a}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,{itemId:e,nodeData:[],labelData:[]};if(!(t!=null&&t.rawData.length)||!i||t.type!=="ungrouped")return;const{angleValues:l,angleRawValues:c,angleFilterValues:p,angleFilterRawValues:g,radiusValues:f,radiusRawValues:y,calloutLabelValues:C,sectorLabelValues:x,legendItemValues:M}=this.getProcessedDataValues(i,t),b=(g==null?void 0:g.some((_,B)=>_>c[B]))??!1;let R=0,I=0;const P=[],k=g!=null?[]:void 0;return t.rawData.forEach((_,B)=>{const H=b?p[B]:l[B],V=g!=null&&!b?Math.sqrt(g[B]/c[B]):1,U=s.convert(R)+Ys(o);R=H,I+=H;const $=s.convert(R)+Ys(o),te=Math.abs($-U),Ce=U+te/2,be=c[B],oe=((f==null?void 0:f[B])??1)*V,Se=y==null?void 0:y[B],K=M==null?void 0:M[B],pe=this.getLabels(_,Ce,te,!0,C==null?void 0:C[B],x==null?void 0:x[B],K),q=this.getSectorFormat(_,B,!1),W={itemId:B,series:this,datum:_,datumIndex:B,angleValue:be,midAngle:Ce,midCos:Math.cos(Ce),midSin:Math.sin(Ce),startAngle:U,endAngle:$,radius:oe,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(oe),0),sectorFormat:q,radiusValue:Se,legendItemValue:K,enabled:r&&n.getItemEnabled({seriesId:e,itemId:B}),focusable:!0,...pe};P.push(W),k!=null&&k.push({...W,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0),focusable:!1})}),this.zerosumOuterRing.visible=I===0,this.zerosumInnerRing.visible=I===0&&a!=null&&a!==1&&a>0,{itemId:e,nodeData:P,labelData:P,phantomNodeData:k}}getLabels(e,t,i,s,n,r,o){const{calloutLabel:a,sectorLabel:l,legendItemKey:c}=this.properties,p=!s||a.enabled?this.properties.calloutLabelKey:void 0,g=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!p&&!g&&!c)return{};const f={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},y={};return p&&i>Ys(a.minAngle)&&(y.calloutLabel={...this.getTextAlignment(t),text:this.getLabelText(a,{...f,value:n}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),g&&(y.sectorLabel={text:this.getLabelText(l,{...f,value:r})}),c!=null&&o!=null&&(y.legendItem={key:c,text:o}),y}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Nf(e),s=-.75*Math.PI,n=i-s,r=Math.floor(n/(Math.PI/2)),o=sR(r,t.length);return t[o]}getSectorFormat(e,t,i){const{angleKey:s,radiusKey:n,calloutLabelKey:r,sectorLabelKey:o,legendItemKey:a,fills:l,strokes:c,itemStyler:p}=this.properties,g=c[t%c.length],{fill:f,fillOpacity:y,stroke:C,strokeWidth:x,strokeOpacity:M,lineDash:b,lineDashOffset:R,cornerRadius:I}=Et(i&&this.properties.highlightStyle.item,{fill:l.length>0?l[t%l.length]:void 0,stroke:g,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);let P;return p&&(P=this.cachedDatumCallback(As(this.getDatumIdFromData(e),i?"highlight":"hide"),()=>p({datum:e,angleKey:s,radiusKey:n,calloutLabelKey:r,sectorLabelKey:o,legendItemKey:a,fill:f,fillOpacity:y,stroke:C,strokeWidth:x,strokeOpacity:M,lineDash:b,lineDashOffset:R,cornerRadius:I,highlighted:i,seriesId:this.id}))),{fill:(P==null?void 0:P.fill)??f,fillOpacity:(P==null?void 0:P.fillOpacity)??y,stroke:(P==null?void 0:P.stroke)??C,strokeWidth:(P==null?void 0:P.strokeWidth)??x,strokeOpacity:(P==null?void 0:P.strokeOpacity)??M,lineDash:(P==null?void 0:P.lineDash)??b,lineDashOffset:(P==null?void 0:P.lineDashOffset)??R,cornerRadius:(P==null?void 0:P.cornerRadius)??I}}getInnerRadius(){const{radius:e}=this,{innerRadiusRatio:t=1,innerRadiusOffset:i=0}=this.properties,s=e*t+i;return s===e||s<0?0:s}getOuterRadius(){const{outerRadiusRatio:e,outerRadiusOffset:t}=this.properties;return Math.max(this.radius*e+t,0)}updateRadiusScale(e){var s;const t=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t);const i=n=>({...n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=(s=this.phantomNodeData)==null?void 0:s.map(i)}getTitleTranslationY(){var n;const e=Math.max(0,this.radiusScale.range[1]);if(e===0)return NaN;const i=2+(((n=this.properties.title)==null?void 0:n.spacing)??0),s=Math.max(0,-e);return-e-i-s}update({seriesRect:e}){const{title:t}=this.properties,i={seriesRectWidth:e==null?void 0:e.width,seriesRectHeight:e==null?void 0:e.height},s=ga(this.nodeDataDependencies,i)!=null;if(s&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){const n=this.getTitleTranslationY();t.node.y=isFinite(n)?n:0;const r=t.node.getBBox();t.node.visible=t.enabled&&isFinite(n)&&!this.bboxIntersectsSurroundingSeries(r)}for(const n of[this.zerosumInnerRing,this.zerosumOuterRing])n.fillOpacity=0,n.stroke=this.properties.calloutLabel.color,n.strokeWidth=1,n.strokeOpacity=1;this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(e)}updateTitleNodes(){var i,s;const{oldTitle:e}=this,{title:t}=this.properties;e!==t&&(e&&((i=this.labelGroup)==null||i.removeChild(e.node)),t&&(t.node.textBaseline="bottom",(s=this.labelGroup)==null||s.appendChild(t.node)),this.oldTitle=t)}updateNodeMidPoint(){var t;const e=i=>{const s=i.innerRadius+(i.outerRadius-i.innerRadius)/2;i.midPoint={x:i.midCos*Math.max(0,s),y:i.midSin*Math.max(0,s)}};this.nodeData.forEach(e),(t=this.phantomNodeData)==null||t.forEach(e)}updateSelections(){this.updateGroupSelection(),this.updateInnerCircleSelection()}updateGroupSelection(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:n,labelSelection:r,innerLabelsSelection:o}=this,a=this.nodeData.map(c=>({...c,sectorFormat:{...c.sectorFormat}})),l=(c,p)=>{c.update(p,void 0,g=>this.getDatumId(g)),this.ctx.animationManager.isSkipped()&&c.cleanup()};l(e,this.nodeData),l(t,a),l(i,this.phantomNodeData??[]),n.update(this.calloutNodeData,c=>{const p=new fr;p.tag=0,p.pointerEvents=1,c.appendChild(p);const g=new gs;g.tag=1,g.pointerEvents=1,c.appendChild(g)}),r.update(this.nodeData),s.update(a),o.update(this.properties.innerLabels,c=>{c.pointerEvents=1})}updateInnerCircleSelection(){const{innerCircle:e}=this.properties;let t=0;const i=this.getInnerRadius();if(i>0){const n=Math.min(i,this.getOuterRadius());t=Math.ceil(n*2+1)}const s=e?[{radius:t}]:[];this.innerCircleSelection.update(s)}updateNodes(e){const t=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(t==null?void 0:t.series)===this,this.highlightLabel.visible=i&&(t==null?void 0:t.series)===this,this.labelGroup.visible=i,this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((r,{radius:o})=>{var a,l;r.setProperties({fill:(a=this.properties.innerCircle)==null?void 0:a.fill,opacity:(l=this.properties.innerCircle)==null?void 0:l.fillOpacity,size:o})});const s=this.ctx.animationManager.isSkipped(),n=(r,o,a,l)=>{const c=this.getSectorFormat(o.datum,o.itemId,l);o.sectorFormat.fill=c.fill,o.sectorFormat.stroke=c.stroke,s&&(r.startAngle=o.startAngle,r.endAngle=o.endAngle,r.innerRadius=o.innerRadius,r.outerRadius=o.outerRadius),(l||s)&&(r.fill=c.fill,r.stroke=c.stroke),r.strokeWidth=c.strokeWidth,r.fillOpacity=c.fillOpacity,r.strokeOpacity=c.strokeOpacity,r.lineDash=c.lineDash,r.lineDashOffset=c.lineDashOffset,r.cornerRadius=c.cornerRadius,r.fillShadow=this.properties.shadow;const p=Math.max((this.properties.sectorSpacing+(c.stroke!=null?c.strokeWidth:0))/2,0);r.inset=p,r.lineJoin=this.properties.sectorSpacing>=0||p>0?"miter":"round"};this.itemSelection.each((r,o,a)=>n(r,o,a,!1)),this.highlightSelection.each((r,o,a)=>{n(r,o,a,!0),r.visible=o.itemId===(t==null?void 0:t.itemId)}),this.phantomSelection.each((r,o,a)=>n(r,o,a,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{calloutLine:e}=this.properties,t=e.length,i=e.strokeWidth,s=e.colors??this.properties.strokes,{offset:n}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((r,o)=>{const a=r.datum,{calloutLabel:l,outerRadius:c}=a;if(l!=null&&l.text&&!l.hidden&&c!==0){r.visible=!0,r.strokeWidth=i,r.stroke=s[o%s.length],r.fill=void 0;const p=a.midCos*c,g=a.midSin*c;let f=a.midCos*(c+t),y=a.midSin*(c+t);if((l.collisionTextAlign??l.collisionOffsetY!==0)&&l.box!=null){const x=l.box;let M=f,b=y;f<x.x?M=x.x:f>x.x+x.width&&(M=x.x+x.width),y<x.y?b=x.y:y>x.y+x.height&&(b=x.y+x.height);const R=M-f,I=b-y,P=Math.sqrt(Math.pow(R,2)+Math.pow(I,2)),k=P-n;k>0&&(f=f+R*k/P,y=y+I*k/P)}r.x1=p,r.y1=g,r.x2=f,r.y2=y}else r.visible=!1})}getLabelOverflow(e,t,i){const s=-this.centerX,n=s+i.width,r=-this.centerY,o=r+i.height,a=1;let l=1;t.x+a<s?l=(t.x+t.width-s)/t.width:t.x+t.width-a>n&&(l=(n-t.x)/t.width);const c=t.y+a<r||t.y+t.height-a>o,p=l===1?e.length:Math.floor(e.length*l)-1,g=this.bboxIntersectsSurroundingSeries(t);return{textLength:p,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:g}}bboxIntersectsSurroundingSeries(e){const{surroundingRadius:t}=this;if(t==null)return!1;const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s=t**2;return i.some(n=>n.x**2+n.y**2>s)}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=t,r=e.convert(0),o=b=>!b.calloutLabel||b.outerRadius===0,a=this.calloutNodeData,l=a.filter(b=>!o(b));if(l.forEach(b=>{const R=b.calloutLabel;R!=null&&(R.hidden=!1,R.collisionTextAlign=void 0,R.collisionOffsetY=0)}),l.length<=1)return;const c=l.filter(b=>b.midCos<0).sort((b,R)=>b.midSin-R.midSin),p=l.filter(b=>b.midCos>=0).sort((b,R)=>b.midSin-R.midSin),g=l.filter(b=>{var R;return b.midSin<0&&((R=b.calloutLabel)==null?void 0:R.textAlign)==="center"}).sort((b,R)=>b.midCos-R.midCos),f=l.filter(b=>{var R;return b.midSin>=0&&((R=b.calloutLabel)==null?void 0:R.textAlign)==="center"}).sort((b,R)=>b.midCos-R.midCos),y=b=>{const R=b.calloutLabel;if(R==null)return Ue.zero.clone();const I=b.outerRadius+i.length+s,P=b.midCos*I,k=b.midSin*I+R.collisionOffsetY,_=R.collisionTextAlign??R.textAlign,B=R.textBaseline;return gs.computeBBox(R.text,P,k,{font:this.properties.calloutLabel,textAlign:_,textBaseline:B})},C=(b,R,I)=>{const P=y(b).grow(n/2),k=y(R).grow(n/2);if(P.x<k.x+k.width&&P.x+P.width>k.x&&(I==="to-top"?P.y<k.y+k.height:P.y+P.height>k.y)){const B=I==="to-top"?P.y-k.y-k.height:P.y+P.height-k.y;R.calloutLabel.collisionOffsetY=B}},x=b=>{const R=b.slice().sort((P,k)=>Math.abs(P.midSin)-Math.abs(k.midSin))[0],I=b.indexOf(R);for(let P=I-1;P>=0;P--){const k=b[P+1],_=b[P];C(k,_,"to-top")}for(let P=I+1;P<b.length;P++){const k=b[P-1],_=b[P];C(k,_,"to-bottom")}},M=b=>{const R=l.some(H=>H.calloutLabel.collisionOffsetY!==0),I=b.map(H=>y(H)),P=I.map(H=>H.clone().grow(n/2));let k=!1;for(let H=0;H<P.length&&!k;H++){const V=P[H];for(let U=H+1;U<b.length;U++){const $=P[U];if(V.collidesBBox($)){k=!0;break}}}const _=a.map(H=>{const{startAngle:V,endAngle:U,outerRadius:$}=H;return{startAngle:V,endAngle:U,innerRadius:r,outerRadius:$}}),B=I.some(H=>_.some(V=>yB(H,V)));!k&&!R&&!B||b.filter(H=>H.calloutLabel.textAlign==="center").forEach(H=>{const V=H.calloutLabel;H.midCos<0?V.collisionTextAlign="right":H.midCos>0?V.collisionTextAlign="left":V.collisionTextAlign="center"})};x(c),x(p),M(g),M(f)}updateCalloutLabelNodes(e){const{radiusScale:t}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:r,color:o}=i,a=new gs;this.calloutLabelSelection.selectByTag(1).forEach(l=>{const{datum:c}=l,p=c.calloutLabel,g=t.convert(c.radius),f=Math.max(0,g);if(!(p!=null&&p.text)||f===0||p.hidden){l.visible=!1;return}const y=f+n+r,C=c.midCos*y,x=c.midSin*y+p.collisionOffsetY,M={textAlign:p.collisionTextAlign??p.textAlign,textBaseline:p.textBaseline};a.text=p.text,a.x=C,a.y=x,a.setFont(this.properties.calloutLabel),a.setAlign(M);const b=a.getBBox();let R=p.text,I=!0;if(i.avoidCollisions){const{textLength:P,hasVerticalOverflow:k}=this.getLabelOverflow(p.text,b,e);R=p.text.length===P?p.text:`${p.text.substring(0,P)}…`,I=!k}l.text=R,l.x=C,l.y=x,l.setFont(this.properties.calloutLabel),l.setAlign(M),l.fill=o,l.visible=I})}computeLabelsBBox(e,t){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:r,maxCollisionOffset:o,minSpacing:a}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new gs;let p;const{title:g}=this.properties;if(g!=null&&g.text&&g.enabled){const f=this.getTitleTranslationY();isFinite(f)&&(c.text=g.text,c.x=0,c.y=f,c.setFont(g),c.setAlign({textBaseline:"bottom",textAlign:"center"}),p=c.getBBox(),l.push(p))}return this.calloutNodeData.forEach(f=>{const y=f.calloutLabel;if(!y||f.outerRadius===0)return null;const C=f.outerRadius+n+r,x=f.midCos*C,M=f.midSin*C+y.collisionOffsetY;c.text=y.text,c.x=x,c.y=M,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:y.collisionTextAlign??y.textAlign,textBaseline:y.textBaseline});const b=c.getBBox();if(y.box=b,Math.abs(y.collisionOffsetY)>o){y.hidden=!0;return}if(p){const R=-this.centerY,I=new Ue(p.x-a,R,p.width+2*a,p.y+p.height+a-R);if(b.collidesBBox(I)){y.hidden=!0;return}}if(e.hideWhenNecessary){const{textLength:R,hasVerticalOverflow:I,hasSurroundingSeriesOverflow:P}=this.getLabelOverflow(y.text,b,t),k=y.text.length>2&&R<2;if(I||k||P){y.hidden=!0;return}}y.hidden=!1,l.push(b)}),l.length===0?null:Ue.merge(l)}updateSectorLabelNodes(){const{radiusScale:e}=this,t=e.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:r,positionOffset:o,positionRatio:a,color:l}=this.properties.sectorLabel,c=(p,g)=>{const{sectorLabel:f,outerRadius:y}=g;let C=!1;if(f&&y!==0){const x=t*(1-a)+y*a+o;p.fill=l,p.fontStyle=s,p.fontWeight=n,p.fontSize=i,p.fontFamily=r,p.text=f.text,p.x=g.midCos*x,p.y=g.midSin*x,p.textAlign="center",p.textBaseline="middle";const M=p.getBBox(),b=[[M.x,M.y],[M.x+M.width,M.y],[M.x+M.width,M.y+M.height],[M.x,M.y+M.height]],{startAngle:R,endAngle:I}=g,P={startAngle:R,endAngle:I,innerRadius:t,outerRadius:y};b.every(([k,_])=>CC(k,_,P))&&(C=!0)}p.visible=C};this.labelSelection.each(c),this.highlightLabelSelection.each(c)}updateInnerLabelNodes(){const e=[],t=[];this.innerLabelsSelection.each((p,g)=>{const{fontStyle:f,fontWeight:y,fontSize:C,fontFamily:x,color:M}=g;p.fontStyle=f,p.fontWeight=y,p.fontSize=C,p.fontFamily=x,p.text=g.text,p.x=0,p.y=0,p.fill=M,p.textAlign="center",p.textBaseline="alphabetic",e.push(p.getBBox()),t.push(g.spacing)});const i=p=>p===0?0:t[p],s=p=>p===t.length-1?0:t[p],n=e.reduce((p,g,f)=>p+g.height+i(f)+s(f),0),r=Math.max(...e.map(p=>p.width)),o=this.getInnerRadius(),l=Math.sqrt(Math.pow(r/2,2)+Math.pow(n/2,2))<=(o>0?o:this.getOuterRadius()),c=[];for(let p=0,g=-n/2;p<e.length;p++){const y=e[p].height+g+i(p);c.push(y),g=y+s(p)}this.innerLabelsSelection.each((p,g,f)=>{p.y=c[f],p.visible=l})}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2,this.zerosumInnerRing.size=this.getInnerRadius()*2}pickNodeClosestDatum(e){return iE(this,e)}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:n}=this,{legendItemKey:r,calloutLabelKey:o,calloutLabelName:a,sectorLabelKey:l,sectorLabelName:c,angleKey:p,angleName:g,radiusKey:f,radiusName:y,tooltip:C}=n,x=this.properties.title.text;if(!i||!s||s.rawData.length===0)return;const{datumIndex:M}=e,b=s.rawData[M],{angleRawValues:R,legendItemValues:I,calloutLabelValues:P,sectorLabelValues:k}=this.getProcessedDataValues(i,s),_=R[M],B=(I==null?void 0:I[M])??(o===p||P==null?void 0:P[M])??(l===p||k==null?void 0:k[M])??g;return C.formatTooltip({title:x,symbol:this.legendItemSymbol(M),data:[{label:B,fallbackLabel:p,value:String(_)}]},{seriesId:t,datum:b,title:g,legendItemKey:r,calloutLabelKey:o,calloutLabelName:a,sectorLabelKey:l,sectorLabelName:c,angleKey:p,angleName:g,radiusKey:f,radiusName:y,...this.getSectorFormat(b,M,!1)})}legendItemSymbol(e){var s;const t=(s=this.processedData)==null?void 0:s.rawData[e],i=this.getSectorFormat(t,e,!1);return{marker:{fill:i.fill,stroke:i.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}}getLegendData(e){var R,I,P,k,_;const{visible:t,processedData:i,dataModel:s,id:n,ctx:{legendManager:r}}=this;if(!s||!i||!this.properties.isValid()||e!=="category")return[];const{angleKey:o,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c,showInLegend:p}=this.properties;if(!c&&(!a||a===o)&&(!l||l===o))return[];const{angleRawValues:g,calloutLabelValues:f,sectorLabelValues:y,legendItemValues:C}=this.getProcessedDataValues(s,i),x=((R=this.properties.title)==null?void 0:R.showInLegend)&&this.properties.title.text,M=[],b=this.properties.hideZeroValueSectorsInLegend;for(let B=0;B<i.rawData.length;B++){const H=i.rawData[B],V=g[B];if(b&&V===0)continue;const U=[];x&&U.push(x);const $=this.getLabels(H,2*Math.PI,2*Math.PI,!1,f==null?void 0:f[B],y==null?void 0:y[B],C==null?void 0:C[B]);c&&$.legendItem!==void 0?U.push($.legendItem.text):a&&a!==o&&((I=$.calloutLabel)==null?void 0:I.text)!==void 0?U.push((P=$.calloutLabel)==null?void 0:P.text):l&&l!==o&&((k=$.sectorLabel)==null?void 0:k.text)!==void 0&&U.push((_=$.sectorLabel)==null?void 0:_.text),U.length!==0&&M.push({legendType:"category",id:n,datum:H,itemId:B,seriesId:n,enabled:t&&r.getItemEnabled({seriesId:n,itemId:B}),label:{text:U.join(" - ")},symbol:this.legendItemSymbol(B),legendItemName:c!=null?H[c]:void 0,hideInLegend:!p})}return M}setLegendState(e){const{id:t,ctx:{legendManager:i,updateService:s}}=this;e.forEach((n,r)=>i.toggleItem({enabled:n,seriesId:t,itemId:r})),i.update(),s.update(4)}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=mh(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Oi(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(s,n)=>this.getDatumId(n)),Oi(this.id,"innerCircle",t,[this.innerCircleSelection],i.innerCircle),zt(this,"callout",t,this.calloutLabelSelection),zt(this,"sector",t,this.labelSelection),zt(this,"highlight",t,this.highlightLabelSelection),zt(this,"inner",t,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var y,C,x,M;const{itemSelection:e,highlightSelection:t,phantomSelection:i,processedData:s,radiusScale:n,previousRadiusScale:r}=this,{animationManager:o}=this.ctx,a=(C=(y=s==null?void 0:s.reduced)==null?void 0:y.diff)==null?void 0:C[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=((a==null?void 0:a.moved.size)??0)===0,c=((s==null?void 0:s.defs.keys.length)??0)>0,p=((M=(x=s==null?void 0:s.reduced)==null?void 0:x.animationValidation)==null?void 0:M.uniqueKeys)??!0;(!l||!c||!p)&&this.ctx.animationManager.skipCurrentBatch();const g=!this.nodeData.some(b=>b.enabled),f=mh(!1,this.properties.rotation,n,r);Oi(this.id,"nodes",o,[e,t,i],f.nodes,(b,R)=>this.getDatumId(R),a),Oi(this.id,"innerCircle",o,[this.innerCircleSelection],f.innerCircle),zt(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),zt(this,"sector",this.ctx.animationManager,this.labelSelection),zt(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.noVisibleData!==g&&(this.noVisibleData=g,zt(this,"inner",this.ctx.animationManager,this.innerLabelsSelection)),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,radiusScale:s,previousRadiusScale:n}=this,{animationManager:r}=this.ctx,o=mh(!1,this.properties.rotation,s,n);Oi(this.id,"nodes",r,[e,t,i],o.nodes,(a,l)=>this.getDatumId(l)),Oi(this.id,"innerCircle",r,[this.innerCircleSelection],o.innerCircle),Oc(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Oc(this,"sector",this.ctx.animationManager,this.labelSelection),Oc(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),Oc(this,"inner",this.ctx.animationManager,this.innerLabelsSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(e){var n,r,o;const{calloutLabelKey:t,sectorLabelKey:i,legendItemKey:s}=this.properties;if((o=(r=(n=this.processedData)==null?void 0:n.reduced)==null?void 0:r.animationValidation)!=null&&o.uniqueKeys){if(s)return e[s];if(t)return e[t];if(i)return e[i]}}getDatumId(e){const{datumIndex:t}=e,i=this.getDatumIdFromData(e.datum);return String(i??t)}};sE.className="DonutSeries";sE.type="donut";var kee={series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:ki,color:Uc,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:ki,color:ds,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:ki,color:cu,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:uu,xOffset:3,yOffset:3,blur:5},innerLabels:{fontSize:12,fontFamily:ki,color:ds,spacing:2}}},Nee={series:{title:{enabled:!0,fontWeight:"normal",fontSize:14,fontFamily:ki,color:Uc,spacing:5},calloutLabel:{enabled:!0,fontSize:12,fontFamily:ki,color:ds,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontWeight:"normal",fontSize:12,fontFamily:ki,color:cu,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,rotation:0,sectorSpacing:1,shadow:{enabled:!1,color:uu,xOffset:3,yOffset:3,blur:5}}},wB=({takeColors:e,colorsCount:t})=>{const{fills:i,strokes:s}=e(t);return{fills:i,strokes:s,calloutLine:{colors:s}}},Oee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",moduleFactory:e=>new sE(e),tooltipDefaults:{range:"exact"},themeTemplate:kee,paletteFactory:wB},xB=class extends li{constructor(){super(...arguments),this.showInLegend=!1}};A([O(nt)],xB.prototype,"showInLegend",2);var zp=class extends vs{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};A([O(Ge)],zp.prototype,"offset",2);A([O(_t.restrict({min:0,max:360}))],zp.prototype,"minAngle",2);A([O(Ge)],zp.prototype,"minSpacing",2);A([O(Ge)],zp.prototype,"maxCollisionOffset",2);A([O(nt)],zp.prototype,"avoidCollisions",2);var nE=class extends vs{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};A([O(_t)],nE.prototype,"positionOffset",2);A([O($t)],nE.prototype,"positionRatio",2);var ZS=class extends yt{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};A([O(qr,{optional:!0})],ZS.prototype,"colors",2);A([O(Ge)],ZS.prototype,"length",2);A([O(Ge)],ZS.prototype,"strokeWidth",2);var Ht=class extends yr{constructor(){super(...arguments),this.fills=Object.values(hs),this.strokes=Object.values(sa),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=0,this.hideZeroValueSectorsInLegend=!1,this.title=new xB,this.shadow=new _o,this.calloutLabel=new zp,this.sectorLabel=new nE,this.calloutLine=new ZS,this.tooltip=new Xs}};A([O(Fe)],Ht.prototype,"angleKey",2);A([O(Fe,{optional:!0})],Ht.prototype,"angleName",2);A([O(Fe,{optional:!0})],Ht.prototype,"angleFilterKey",2);A([O(Fe,{optional:!0})],Ht.prototype,"radiusKey",2);A([O(Fe,{optional:!0})],Ht.prototype,"radiusName",2);A([O(Ge,{optional:!0})],Ht.prototype,"radiusMin",2);A([O(Ge,{optional:!0})],Ht.prototype,"radiusMax",2);A([O(Fe,{optional:!0})],Ht.prototype,"calloutLabelKey",2);A([O(Fe,{optional:!0})],Ht.prototype,"calloutLabelName",2);A([O(Fe,{optional:!0})],Ht.prototype,"sectorLabelKey",2);A([O(Fe,{optional:!0})],Ht.prototype,"sectorLabelName",2);A([O(Fe,{optional:!0})],Ht.prototype,"legendItemKey",2);A([O(qr)],Ht.prototype,"fills",2);A([O(qr)],Ht.prototype,"strokes",2);A([O($t)],Ht.prototype,"fillOpacity",2);A([O($t)],Ht.prototype,"strokeOpacity",2);A([O(El)],Ht.prototype,"lineDash",2);A([O(Ge)],Ht.prototype,"lineDashOffset",2);A([O(Ge)],Ht.prototype,"cornerRadius",2);A([O(Mn,{optional:!0})],Ht.prototype,"itemStyler",2);A([O(_t)],Ht.prototype,"rotation",2);A([O(_t)],Ht.prototype,"outerRadiusOffset",2);A([O($t)],Ht.prototype,"outerRadiusRatio",2);A([O(Ge)],Ht.prototype,"strokeWidth",2);A([O(_t)],Ht.prototype,"sectorSpacing",2);A([O(nt)],Ht.prototype,"hideZeroValueSectorsInLegend",2);A([O(Ye)],Ht.prototype,"title",2);A([O(Ye)],Ht.prototype,"shadow",2);A([O(Ye)],Ht.prototype,"calloutLabel",2);A([O(Ye)],Ht.prototype,"sectorLabel",2);A([O(Ye)],Ht.prototype,"calloutLine",2);A([O(Ye)],Ht.prototype,"tooltip",2);var _ee=class extends xm{constructor(e,t,i,s){super(e,t,i,s),this.angleKey=s.properties.angleKey,this.radiusKey=s.properties.radiusKey,this.calloutLabelKey=s.properties.calloutLabelKey,this.sectorLabelKey=s.properties.sectorLabelKey}},rE=class extends $S{constructor(e){super({moduleCtx:e,pickModes:[1,0],useLabelLayer:!0,animationResetFns:{item:tE,label:Bl}}),this.properties=new Ht,this.phantomNodeData=void 0,this.backgroundGroup=new yn({name:`${this.id}-background`,zIndex:0}),this.previousRadiusScale=new $r,this.radiusScale=new $r,this.phantomGroup=this.backgroundGroup.appendChild(new lt({name:"phantom"})),this.phantomSelection=Ji.select(this.phantomGroup,()=>this.nodeFactory(),!1),this.calloutLabelGroup=this.contentGroup.appendChild(new lt({name:"pieCalloutLabels"})),this.calloutLabelSelection=new Ji(this.calloutLabelGroup,lt),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new lt({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Vc),this.surroundingRadius=void 0,this.NodeEvent=_ee,this.angleScale=new $r,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(t=>t+Math.PI/2),this.phantomGroup.opacity=.2}get calloutNodeData(){return this.phantomNodeData??this.nodeData}attachSeries(e,t,i){super.attachSeries(e,t,i),e.appendChild(this.backgroundGroup)}detachSeries(e,t,i){super.detachSeries(e,t,i),e==null||e.removeChild(this.backgroundGroup)}setSeriesIndex(e){return super.setSeriesIndex(e)?(this.backgroundGroup.zIndex=[0,e],!0):!1}nodeFactory(){const e=new Rs;return e.miterLimit=1e9,e}getSeriesDomain(e){return e==="x"?this.angleScale.domain:this.radiusScale.domain}async processData(e){var M,b,R,I,P;if(this.data==null||!this.properties.isValid())return;const{visible:t,id:i,ctx:{legendManager:s}}=this,{angleKey:n,angleFilterKey:r,radiusKey:o,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c}=this.properties,p=(k,_,B)=>t&&s.getItemEnabled({seriesId:i,itemId:B}),g=!this.ctx.animationManager.isSkipped(),f=[],y=[];c?f.push(Ao(c,"band",{id:"legendItemKey"})):a?f.push(Ao(a,"band",{id:"calloutLabelKey"})):l&&f.push(Ao(l,"band",{id:"sectorLabelKey"}));const C=this.radiusScale.type,x=this.angleScale.type;o&&y.push(gD(o,{id:"radiusValue",min:this.properties.radiusMin??0,max:this.properties.radiusMax}),It(o,C,{id:"radiusRaw"}),fh("radiusValue",[0,1],1,this.properties.radiusMin??0,this.properties.radiusMax)),a&&y.push(It(a,"band",{id:"calloutLabelValue"})),l&&y.push(It(l,"band",{id:"sectorLabelValue"})),c&&y.push(It(c,"band",{id:"legendItemValue"})),r&&y.push(Vf(r,x,{id:"angleFilterValue",onlyPositive:!0,validation:p,invalidValue:0}),It(r,x,{id:"angleFilterRaw"}),fh("angleFilterValue",[0,1],0,0)),g&&((R=(b=(M=this.processedData)==null?void 0:M.reduced)==null?void 0:b.animationValidation)!=null&&R.uniqueKeys)&&f.length>0&&y.push(Pp(this.id,this.processedData)),y.push(Ap()),await this.requestDataModel(e,this.data,{props:[...f,Vf(n,x,{id:"angleValue",onlyPositive:!0,validation:p,invalidValue:0}),It(n,x,{id:"angleRaw"}),fh("angleValue",[0,1],0,0),...y]});for(const k of((P=(I=this.processedData)==null?void 0:I.defs)==null?void 0:P.values)??[]){const{id:_,missing:B,property:H}=k,V=XR(this,B);_!=="angleRaw"&&V>0&&_e.warnOnce(`no value was found for the key '${String(H)}' on ${V} data element${V>1?"s":""}`)}this.animationState.transition("updateData")}maybeRefreshNodeData(){if(!this.nodeDataRefresh)return;const{nodeData:e=[],phantomNodeData:t}=this.createNodeData()??{};this.nodeData=e,this.phantomNodeData=t,this.nodeDataRefresh=!1}getProcessedDataValues(e,t){const i=e.resolveColumnById(this,"angleValue",t),s=e.resolveColumnById(this,"angleRaw",t),n=this.properties.angleFilterKey!=null?e.resolveColumnById(this,"angleFilterValue",t):void 0,r=this.properties.angleFilterKey!=null?e.resolveColumnById(this,"angleFilterRaw",t):void 0,o=this.properties.radiusKey?e.resolveColumnById(this,"radiusValue",t):void 0,a=this.properties.radiusKey?e.resolveColumnById(this,"radiusRaw",t):void 0,l=this.properties.calloutLabelKey?e.resolveColumnById(this,"calloutLabelValue",t):void 0,c=this.properties.sectorLabelKey?e.resolveColumnById(this,"sectorLabelValue",t):void 0,p=this.properties.legendItemKey?e.resolveColumnById(this,"legendItemValue",t):void 0;return{angleValues:i,angleRawValues:s,angleFilterValues:n,angleFilterRawValues:r,radiusValues:o,radiusRawValues:a,calloutLabelValues:l,sectorLabelValues:c,legendItemValues:p}}createNodeData(){const{id:e,processedData:t,dataModel:i,angleScale:s,ctx:{legendManager:n},visible:r}=this,{rotation:o}=this.properties;if(!(t!=null&&t.rawData.length)||!i||t.type!=="ungrouped")return;const{angleValues:a,angleRawValues:l,angleFilterValues:c,angleFilterRawValues:p,radiusValues:g,radiusRawValues:f,calloutLabelValues:y,sectorLabelValues:C,legendItemValues:x}=this.getProcessedDataValues(i,t),M=(p==null?void 0:p.some((k,_)=>k>l[_]))??!1;let b=0,R=0;const I=[],P=p!=null?[]:void 0;return t.rawData.forEach((k,_)=>{const B=M?c[_]:a[_],H=p!=null&&!M?Math.sqrt(p[_]/l[_]):1,V=s.convert(b)+Ys(o);b=B,R+=B;const U=s.convert(b)+Ys(o),$=Math.abs(U-V),te=V+$/2,Ce=l[_],Re=((g==null?void 0:g[_])??1)*H,oe=f==null?void 0:f[_],Se=x==null?void 0:x[_],K=this.getLabels(k,te,$,!0,y==null?void 0:y[_],C==null?void 0:C[_],Se),pe=this.getSectorFormat(k,_,!1),q={itemId:_,series:this,datum:k,datumIndex:_,angleValue:Ce,midAngle:te,midCos:Math.cos(te),midSin:Math.sin(te),startAngle:V,endAngle:U,radius:Re,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(Re),0),sectorFormat:pe,radiusValue:oe,legendItemValue:Se,enabled:r&&n.getItemEnabled({seriesId:e,itemId:_}),...K};I.push(q),P!=null&&P.push({...q,radius:1,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(1),0)})}),this.zerosumOuterRing.visible=R===0,{itemId:e,nodeData:I,labelData:I,phantomNodeData:P}}getLabels(e,t,i,s,n,r,o){const{calloutLabel:a,sectorLabel:l,legendItemKey:c}=this.properties,p=!s||a.enabled?this.properties.calloutLabelKey:void 0,g=!s||l.enabled?this.properties.sectorLabelKey:void 0;if(!p&&!g&&!c)return{};const f={datum:e,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},y={};return p&&i>Ys(a.minAngle)&&(y.calloutLabel={...this.getTextAlignment(t),text:this.getLabelText(a,{...f,value:n}),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0}),g&&(y.sectorLabel={text:this.getLabelText(l,{...f,value:r})}),c!=null&&o!=null&&(y.legendItem={key:c,text:o}),y}getTextAlignment(e){const t=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],i=Nf(e),s=-.75*Math.PI,n=i-s,r=Math.floor(n/(Math.PI/2)),o=sR(r,t.length);return t[o]}getSectorFormat(e,t,i){const{angleKey:s,radiusKey:n,calloutLabelKey:r,sectorLabelKey:o,legendItemKey:a,fills:l,strokes:c,itemStyler:p}=this.properties,g=c[t%c.length],{fill:f,fillOpacity:y,stroke:C,strokeWidth:x,strokeOpacity:M,lineDash:b,lineDashOffset:R,cornerRadius:I}=Et(i&&this.properties.highlightStyle.item,{fill:l.length>0?l[t%l.length]:void 0,stroke:g,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()},this.properties);let P;return p&&(P=this.cachedDatumCallback(As(this.getDatumIdFromData(e),i?"highlight":"hide"),()=>p({datum:e,angleKey:s,radiusKey:n,calloutLabelKey:r,sectorLabelKey:o,legendItemKey:a,fill:f,strokeOpacity:M,stroke:C,strokeWidth:x,fillOpacity:y,lineDash:b,lineDashOffset:R,cornerRadius:I,highlighted:i,seriesId:this.id}))),{fill:(P==null?void 0:P.fill)??f,fillOpacity:(P==null?void 0:P.fillOpacity)??y,stroke:(P==null?void 0:P.stroke)??C,strokeWidth:(P==null?void 0:P.strokeWidth)??x,strokeOpacity:(P==null?void 0:P.strokeOpacity)??M,lineDash:(P==null?void 0:P.lineDash)??b,lineDashOffset:(P==null?void 0:P.lineDashOffset)??R,cornerRadius:(P==null?void 0:P.cornerRadius)??I}}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(e){var s;const t=[0,this.getOuterRadius()];this.radiusScale.range=t,e&&(this.previousRadiusScale.range=t);const i=n=>({...n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n.radius),0)});this.nodeData=this.nodeData.map(i),this.phantomNodeData=(s=this.phantomNodeData)==null?void 0:s.map(i)}getTitleTranslationY(){var n;const e=Math.max(0,this.radiusScale.range[1]);if(e===0)return NaN;const i=2+(((n=this.properties.title)==null?void 0:n.spacing)??0),s=Math.max(0,-e);return-e-i-s}update({seriesRect:e}){const{title:t}=this.properties,i={seriesRectWidth:e==null?void 0:e.width,seriesRectHeight:e==null?void 0:e.height},s=ga(this.nodeDataDependencies,i)!=null;if(s&&(this._nodeDataDependencies=i),this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(s),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){const n=this.getTitleTranslationY();t.node.y=isFinite(n)?n:0;const r=t.node.getBBox();t.node.visible=t.enabled&&isFinite(n)&&!this.bboxIntersectsSurroundingSeries(r)}this.zerosumOuterRing.fillOpacity=0,this.zerosumOuterRing.stroke=this.properties.calloutLabel.color,this.zerosumOuterRing.strokeWidth=1,this.zerosumOuterRing.strokeOpacity=1,this.updateNodeMidPoint(),this.updateSelections(),this.updateNodes(e)}updateTitleNodes(){var i,s;const{oldTitle:e}=this,{title:t}=this.properties;e!==t&&(e&&((i=this.labelGroup)==null||i.removeChild(e.node)),t&&(t.node.textBaseline="bottom",(s=this.labelGroup)==null||s.appendChild(t.node)),this.oldTitle=t)}updateNodeMidPoint(){var t;const e=i=>{const s=i.innerRadius+(i.outerRadius-i.innerRadius)/2;i.midPoint={x:i.midCos*Math.max(0,s),y:i.midSin*Math.max(0,s)}};this.nodeData.forEach(e),(t=this.phantomNodeData)==null||t.forEach(e)}updateSelections(){this.updateGroupSelection()}updateGroupSelection(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,highlightLabelSelection:s,calloutLabelSelection:n,labelSelection:r}=this,o=this.nodeData.map(l=>({...l,sectorFormat:{...l.sectorFormat}})),a=(l,c)=>{l.update(c,void 0,p=>this.getDatumId(p)),this.ctx.animationManager.isSkipped()&&l.cleanup()};a(e,this.nodeData),a(t,o),a(i,this.phantomNodeData??[]),n.update(this.calloutNodeData,l=>{const c=new fr;c.tag=0,c.pointerEvents=1,l.appendChild(c);const p=new gs;p.tag=1,p.pointerEvents=1,l.appendChild(p)}),r.update(this.nodeData),s.update(o)}updateNodes(e){const t=this.ctx.highlightManager.getActiveHighlight(),{visible:i}=this;this.backgroundGroup.visible=i,this.contentGroup.visible=i,this.highlightGroup.visible=i&&(t==null?void 0:t.series)===this,this.highlightLabel.visible=i&&(t==null?void 0:t.series)===this,this.labelGroup&&(this.labelGroup.visible=i),this.contentGroup.opacity=this.getOpacity();const s=this.ctx.animationManager.isSkipped(),n=(r,o,a,l)=>{const c=this.getSectorFormat(o.datum,o.itemId,l);o.sectorFormat.fill=c.fill,o.sectorFormat.stroke=c.stroke,s&&(r.startAngle=o.startAngle,r.endAngle=o.endAngle,r.innerRadius=o.innerRadius,r.outerRadius=o.outerRadius),(l||s)&&(r.fill=c.fill,r.stroke=c.stroke),r.strokeWidth=c.strokeWidth,r.fillOpacity=c.fillOpacity,r.strokeOpacity=c.strokeOpacity,r.lineDash=c.lineDash,r.lineDashOffset=c.lineDashOffset,r.cornerRadius=c.cornerRadius,r.fillShadow=this.properties.shadow;const p=Math.max((this.properties.sectorSpacing+(c.stroke!=null?c.strokeWidth:0))/2,0);r.inset=p,r.lineJoin=this.properties.sectorSpacing>=0||p>0?"miter":"round"};this.itemSelection.each((r,o,a)=>n(r,o,a,!1)),this.highlightSelection.each((r,o,a)=>{n(r,o,a,!0),r.visible=o.itemId===(t==null?void 0:t.itemId)}),this.phantomSelection.each((r,o,a)=>n(r,o,a,!1)),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(e),this.updateSectorLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")}updateCalloutLineNodes(){const{calloutLine:e}=this.properties,t=e.length,i=e.strokeWidth,s=e.colors??this.properties.strokes,{offset:n}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(0).forEach((r,o)=>{const a=r.datum,{calloutLabel:l,outerRadius:c}=a;if(l!=null&&l.text&&!l.hidden&&c!==0){r.visible=!0,r.strokeWidth=i,r.stroke=s[o%s.length],r.fill=void 0;const p=a.midCos*c,g=a.midSin*c;let f=a.midCos*(c+t),y=a.midSin*(c+t);if((l.collisionTextAlign??l.collisionOffsetY!==0)&&l.box!=null){const x=l.box;let M=f,b=y;f<x.x?M=x.x:f>x.x+x.width&&(M=x.x+x.width),y<x.y?b=x.y:y>x.y+x.height&&(b=x.y+x.height);const R=M-f,I=b-y,P=Math.sqrt(Math.pow(R,2)+Math.pow(I,2)),k=P-n;k>0&&(f=f+R*k/P,y=y+I*k/P)}r.x1=p,r.y1=g,r.x2=f,r.y2=y}else r.visible=!1})}getLabelOverflow(e,t,i){const s=-this.centerX,n=s+i.width,r=-this.centerY,o=r+i.height,a=1;let l=1;t.x+a<s?l=(t.x+t.width-s)/t.width:t.x+t.width-a>n&&(l=(n-t.x)/t.width);const c=t.y+a<r||t.y+t.height-a>o,p=l===1?e.length:Math.floor(e.length*l)-1,g=this.bboxIntersectsSurroundingSeries(t);return{textLength:p,hasVerticalOverflow:c,hasSurroundingSeriesOverflow:g}}bboxIntersectsSurroundingSeries(e){const{surroundingRadius:t}=this;if(t==null)return!1;const i=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s=t**2;return i.some(n=>n.x**2+n.y**2>s)}computeCalloutLabelCollisionOffsets(){const{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,{offset:s,minSpacing:n}=t,r=e.convert(0),o=b=>!b.calloutLabel||b.outerRadius===0,a=this.calloutNodeData,l=a.filter(b=>!o(b));if(l.forEach(b=>{const R=b.calloutLabel;R!=null&&(R.hidden=!1,R.collisionTextAlign=void 0,R.collisionOffsetY=0)}),l.length<=1)return;const c=l.filter(b=>b.midCos<0).sort((b,R)=>b.midSin-R.midSin),p=l.filter(b=>b.midCos>=0).sort((b,R)=>b.midSin-R.midSin),g=l.filter(b=>{var R;return b.midSin<0&&((R=b.calloutLabel)==null?void 0:R.textAlign)==="center"}).sort((b,R)=>b.midCos-R.midCos),f=l.filter(b=>{var R;return b.midSin>=0&&((R=b.calloutLabel)==null?void 0:R.textAlign)==="center"}).sort((b,R)=>b.midCos-R.midCos),y=b=>{const R=b.calloutLabel;if(R==null)return Ue.zero.clone();const I=b.outerRadius+i.length+s,P=b.midCos*I,k=b.midSin*I+R.collisionOffsetY,_=R.collisionTextAlign??R.textAlign,B=R.textBaseline;return gs.computeBBox(R.text,P,k,{font:this.properties.calloutLabel,textAlign:_,textBaseline:B})},C=(b,R,I)=>{const P=y(b).grow(n/2),k=y(R).grow(n/2);if(P.x<k.x+k.width&&P.x+P.width>k.x&&(I==="to-top"?P.y<k.y+k.height:P.y+P.height>k.y)){const B=I==="to-top"?P.y-k.y-k.height:P.y+P.height-k.y;R.calloutLabel.collisionOffsetY=B}},x=b=>{const R=b.slice().sort((P,k)=>Math.abs(P.midSin)-Math.abs(k.midSin))[0],I=b.indexOf(R);for(let P=I-1;P>=0;P--){const k=b[P+1],_=b[P];C(k,_,"to-top")}for(let P=I+1;P<b.length;P++){const k=b[P-1],_=b[P];C(k,_,"to-bottom")}},M=b=>{const R=l.some(H=>H.calloutLabel.collisionOffsetY!==0),I=b.map(H=>y(H)),P=I.map(H=>H.clone().grow(n/2));let k=!1;for(let H=0;H<P.length&&!k;H++){const V=P[H];for(let U=H+1;U<b.length;U++){const $=P[U];if(V.collidesBBox($)){k=!0;break}}}const _=a.map(H=>{const{startAngle:V,endAngle:U,outerRadius:$}=H;return{startAngle:V,endAngle:U,innerRadius:r,outerRadius:$}}),B=I.some(H=>_.some(V=>yB(H,V)));!k&&!R&&!B||b.filter(H=>H.calloutLabel.textAlign==="center").forEach(H=>{const V=H.calloutLabel;H.midCos<0?V.collisionTextAlign="right":H.midCos>0?V.collisionTextAlign="left":V.collisionTextAlign="center"})};x(c),x(p),M(g),M(f)}updateCalloutLabelNodes(e){const{radiusScale:t}=this,{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:r,color:o}=i,a=new gs;this.calloutLabelSelection.selectByTag(1).forEach(l=>{const{datum:c}=l,p=c.calloutLabel,g=t.convert(c.radius),f=Math.max(0,g);if(!(p!=null&&p.text)||f===0||p.hidden){l.visible=!1;return}const y=f+n+r,C=c.midCos*y,x=c.midSin*y+p.collisionOffsetY,M={textAlign:p.collisionTextAlign??p.textAlign,textBaseline:p.textBaseline};a.text=p.text,a.x=C,a.y=x,a.setFont(this.properties.calloutLabel),a.setAlign(M);const b=a.getBBox();let R=p.text,I=!0;if(i.avoidCollisions){const{textLength:P,hasVerticalOverflow:k}=this.getLabelOverflow(p.text,b,e);R=p.text.length===P?p.text:`${p.text.substring(0,P)}…`,I=!k}l.text=R,l.x=C,l.y=x,l.setFont(this.properties.calloutLabel),l.setAlign(M),l.fill=o,l.visible=I})}computeLabelsBBox(e,t){const{calloutLabel:i,calloutLine:s}=this.properties,n=s.length,{offset:r,maxCollisionOffset:o,minSpacing:a}=i;if(!i.avoidCollisions)return null;this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const l=[],c=new gs;let p;const{title:g}=this.properties;if(g!=null&&g.text&&g.enabled){const f=this.getTitleTranslationY();isFinite(f)&&(c.text=g.text,c.x=0,c.y=f,c.setFont(g),c.setAlign({textBaseline:"bottom",textAlign:"center"}),p=c.getBBox(),l.push(p))}return this.calloutNodeData.forEach(f=>{const y=f.calloutLabel;if(!y||f.outerRadius===0)return null;const C=f.outerRadius+n+r,x=f.midCos*C,M=f.midSin*C+y.collisionOffsetY;c.text=y.text,c.x=x,c.y=M,c.setFont(this.properties.calloutLabel),c.setAlign({textAlign:y.collisionTextAlign??y.textAlign,textBaseline:y.textBaseline});const b=c.getBBox();if(y.box=b,Math.abs(y.collisionOffsetY)>o){y.hidden=!0;return}if(p){const R=-this.centerY,I=new Ue(p.x-a,R,p.width+2*a,p.y+p.height+a-R);if(b.collidesBBox(I)){y.hidden=!0;return}}if(e.hideWhenNecessary){const{textLength:R,hasVerticalOverflow:I,hasSurroundingSeriesOverflow:P}=this.getLabelOverflow(y.text,b,t),k=y.text.length>2&&R<2;if(I||k||P){y.hidden=!0;return}}y.hidden=!1,l.push(b)}),l.length===0?null:Ue.merge(l)}updateSectorLabelNodes(){var f;const{radiusScale:e}=this,t=e.convert(0),{fontSize:i,fontStyle:s,fontWeight:n,fontFamily:r,positionOffset:o,positionRatio:a,color:l}=this.properties.sectorLabel,c=t>0,p=((f=this.ctx.legendManager.getData(this.id))==null?void 0:f.filter(y=>y.enabled).length)===1,g=(y,C)=>{const{sectorLabel:x,outerRadius:M,startAngle:b,endAngle:R}=C;let I=!1;if(x&&M!==0){const P=t*(1-a)+M*a+o;y.fill=l,y.fontStyle=s,y.fontWeight=n,y.fontSize=i,y.fontFamily=r,y.text=x.text,!c&&p?(y.x=0,y.y=0):(y.x=C.midCos*P,y.y=C.midSin*P),y.textAlign="center",y.textBaseline="middle";const _=y.getBBox(),B=[[_.x,_.y],[_.x+_.width,_.y],[_.x+_.width,_.y+_.height],[_.x,_.y+_.height]],H={startAngle:b,endAngle:R,innerRadius:t,outerRadius:M};B.every(([V,U])=>CC(V,U,H))&&(I=!0)}y.visible=I};this.labelSelection.each(g),this.highlightLabelSelection.each(g)}updateZerosumRings(){this.zerosumOuterRing.size=this.getOuterRadius()*2}pickNodeClosestDatum(e){return iE(this,e)}getTooltipContent(e){const{id:t,dataModel:i,processedData:s,properties:n}=this,{legendItemKey:r,calloutLabelKey:o,calloutLabelName:a,sectorLabelKey:l,sectorLabelName:c,angleKey:p,angleName:g,radiusKey:f,radiusName:y,tooltip:C}=n,x=this.properties.title.text;if(!i||!s||s.rawData.length===0)return;const{datumIndex:M}=e,b=s.rawData[M],{angleRawValues:R,legendItemValues:I,calloutLabelValues:P,sectorLabelValues:k}=this.getProcessedDataValues(i,s),_=R[M],B=(I==null?void 0:I[M])??(o===p||P==null?void 0:P[M])??(l===p||k==null?void 0:k[M])??g;return C.formatTooltip({title:x,symbol:this.legendItemSymbol(M),data:[{label:B,fallbackLabel:p,value:String(_)}]},{seriesId:t,datum:b,title:g,legendItemKey:r,calloutLabelKey:o,calloutLabelName:a,sectorLabelKey:l,sectorLabelName:c,angleKey:p,angleName:g,radiusKey:f,radiusName:y,...this.getSectorFormat(b,M,!1)})}legendItemSymbol(e){var s;const t=(s=this.processedData)==null?void 0:s.rawData[e],i=this.getSectorFormat(t,e,!1);return{marker:{fill:i.fill,stroke:i.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth}}}getLegendData(e){var R,I,P,k,_;const{id:t,visible:i,processedData:s,dataModel:n,ctx:{legendManager:r}}=this;if(!n||!s||e!=="category")return[];const{angleKey:o,calloutLabelKey:a,sectorLabelKey:l,legendItemKey:c,showInLegend:p}=this.properties;if(!c&&(!a||a===o)&&(!l||l===o))return[];const{calloutLabelValues:g,sectorLabelValues:f,legendItemValues:y,angleRawValues:C}=this.getProcessedDataValues(n,s),x=((R=this.properties.title)==null?void 0:R.showInLegend)&&this.properties.title.text,M=[],b=this.properties.hideZeroValueSectorsInLegend;for(let B=0;B<s.rawData.length;B++){const H=s.rawData[B],V=C[B];if(b&&V===0)continue;const U=[];x&&U.push(x);const $=this.getLabels(H,2*Math.PI,2*Math.PI,!1,g==null?void 0:g[B],f==null?void 0:f[B],y==null?void 0:y[B]);c&&$.legendItem!==void 0?U.push($.legendItem.text):a&&a!==o&&((I=$.calloutLabel)==null?void 0:I.text)!==void 0?U.push((P=$.calloutLabel)==null?void 0:P.text):l&&l!==o&&((k=$.sectorLabel)==null?void 0:k.text)!==void 0&&U.push((_=$.sectorLabel)==null?void 0:_.text),U.length!==0&&M.push({legendType:"category",id:t,datum:H,itemId:B,seriesId:t,enabled:i&&r.getItemEnabled({seriesId:t,itemId:B}),label:{text:U.join(" - ")},symbol:this.legendItemSymbol(B),legendItemName:c!=null?H[c]:void 0,hideInLegend:!p})}return M}setLegendState(e){const{id:t,ctx:{legendManager:i,updateService:s}}=this;e.forEach((n,r)=>i.toggleItem({enabled:n,seriesId:t,itemId:r})),i.update(),s.update(4)}animateEmptyUpdateReady(e){const{animationManager:t}=this.ctx,i=mh(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);Oi(this.id,"nodes",t,[this.itemSelection,this.highlightSelection,this.phantomSelection],i.nodes,(s,n)=>this.getDatumId(n)),zt(this,"callout",t,this.calloutLabelSelection),zt(this,"sector",t,this.labelSelection),zt(this,"highlight",t,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var f,y,C,x;const{itemSelection:e,highlightSelection:t,phantomSelection:i,processedData:s,radiusScale:n,previousRadiusScale:r}=this,{animationManager:o}=this.ctx,a=(y=(f=s==null?void 0:s.reduced)==null?void 0:f.diff)==null?void 0:y[this.id];this.ctx.animationManager.stopByAnimationGroupId(this.id);const l=((a==null?void 0:a.moved.size)??0)===0,c=((s==null?void 0:s.defs.keys.length)??0)>0,p=((x=(C=s==null?void 0:s.reduced)==null?void 0:C.animationValidation)==null?void 0:x.uniqueKeys)??!0;(!l||!c||!p)&&this.ctx.animationManager.skipCurrentBatch();const g=mh(!1,this.properties.rotation,n,r);Oi(this.id,"nodes",o,[e,t,i],g.nodes,(M,b)=>this.getDatumId(b),a),zt(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),zt(this,"sector",this.ctx.animationManager,this.labelSelection),zt(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:e,highlightSelection:t,phantomSelection:i,radiusScale:s,previousRadiusScale:n}=this,{animationManager:r}=this.ctx,o=mh(!1,this.properties.rotation,s,n);Oi(this.id,"nodes",r,[e,t,i],o.nodes,(a,l)=>this.getDatumId(l)),Oc(this,"callout",this.ctx.animationManager,this.calloutLabelSelection),Oc(this,"sector",this.ctx.animationManager,this.labelSelection),Oc(this,"highlight",this.ctx.animationManager,this.highlightLabelSelection),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(e){var n,r,o;const{calloutLabelKey:t,sectorLabelKey:i,legendItemKey:s}=this.properties;if((o=(r=(n=this.processedData)==null?void 0:n.reduced)==null?void 0:r.animationValidation)!=null&&o.uniqueKeys){if(s)return e[s];if(t)return e[t];if(i)return e[i]}}getDatumId(e){const{datumIndex:t}=e,i=this.getDatumIdFromData(e.datum);return i!=null?String(i):`${t}`}};rE.className="PieSeries";rE.type="pie";var Bee={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",moduleFactory:e=>new rE(e),tooltipDefaults:{range:"exact"},themeTemplate:Nee,paletteFactory:wB};function bB(){ca.register(A1,YJ,pJ,wee,pB,Iee,fB,Aee,Oee,Bee,Lee);for(const e of[Qc,Dp,Fp,bh,Hh])ml.register(e.type,{moduleFactory:t=>new e(t),hidden:e===bh})}function Gee(){for(const e of ca.modules){if(e.packageType==="enterprise"&&!p7(e)&&_e.errorOnce("Unexpected enterprise module registered: "+e.identifier),e.type==="root"&&e.themeTemplate)for(const t of e.chartTypes)LM.set(t,e.themeTemplate);if(e.type==="series"){if(e.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${e.identifier}`);lr.register(e.identifier,e)}if(e.type==="series-option"&&e.themeTemplate)for(const t of e.seriesTypes)lr.setThemeTemplate(t,e.themeTemplate);if(e.type==="axis-option"&&e.themeTemplate)for(const t of e.axisTypes){const i=ml.getThemeTemplate(t),s=Et(e.themeTemplate,i);ml.setThemeTemplate(t,s)}e.type==="axis"&&ml.register(e.identifier,e),e.type==="legend"&&QR.register(e.identifier,e)}if(ca.hasEnterpriseModules()){const e=g7();e.length>0&&_e.errorOnce("Enterprise modules expected but not registered: ",e)}}function zee(e){return e.type==="sankey"||e.type==="chord"}var oE=class extends ru{getChartType(){return"flow-proportion"}async updateData(){await super.updateData();const{nodes:e}=this.getOptions();this.series.forEach(t=>{zee(t)&&t.setChartNodes(e)})}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e;s.shrink(this.seriesArea.padding.toJson());const n=s.clone();this.seriesRect=n,this.animationRect=n,t.visible=this.series.some(r=>r.visible);for(const r of[t,i])r.translationX=Math.floor(n.x),r.translationY=Math.floor(n.y);this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:t.visible,rect:n,paddedRect:n}})}};oE.className="FlowProportionChart";oE.type="flow-proportion";var Mh=class extends NR{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(e,t){return null}computeRange(){}getAxisLinePoints(){}};A([O(pi(["polygon","circle"],"a polar axis shape"))],Mh.prototype,"shape",2);A([O($t)],Mh.prototype,"innerRadiusRatio",2);function Hee(e){return e.type==="radial-gauge"}function Vee(e){return e.type==="linear-gauge"}var aE=class extends ru{getChartType(){return"gauge"}updateRadialGauge(e,t){const i=this.axes.find(V=>V.direction==="x");if(!(i instanceof Mh))return;i.computeRange();const s=e.x,n=s+e.width,r=e.y,o=r+e.height,[a,l]=i.range,p=LO(l-a)>Math.PI,g=p||Vr(1.5*Math.PI,a,l),f=p||Vr(0*Math.PI,a,l),y=p||Vr(.5*Math.PI,a,l),C=p||Vr(1*Math.PI,a,l);let x;C&&!f?x="right":!C&&f?x="left":x="center";let M;g&&!y?M="bottom":!g&&y?M="top":M="middle";const b=QD({startAngle:a,endAngle:l,innerRadius:0,outerRadius:.5}),R=-(b.x+b.width/2)*2,I=-(b.y+b.height/2)*2,{minimumRadius:P=0,maximumRadius:k}=t,_=Math.max(.5*Math.min(e.width/b.width,e.height/b.height),0);let B=Math.min(k??1/0,Math.max(_,P??0));const H=8;for(let V=0;V<H;V+=1){const U=B<=P||V===H-1,$=e.x+e.width/2+R*B,te=e.y+e.height/2+I*B;i.translation.x=$,i.translation.y=te,i.gridLength=B,i.calculateLayout();const Ce=i.computeLabelsBBox({hideWhenNecessary:U},e);if(U)break;let be=0;if(Ce!=null){const Re=Ce.x+$,oe=Re+Ce.width,Se=Ce.y+te,K=Se+Ce.height;be=Math.max(r-Se,s-Re,K-o,oe-n,0)}if(be>0)B=Math.max(B-be,P);else break}i.translation.x=e.x+e.width/2+R*B,i.translation.y=e.y+e.height/2+I*B,t.centerX=e.width/2+R*B,t.centerY=e.height/2+I*B,t.radius=B,t.textAlign=x,t.verticalAlign=M,(B===0||B>_)&&_e.warnOnce("There was insufficient space to display the Radial Gauge.")}updateLinearGauge(e,t){const i=this.axes.find(M=>M.direction==="x"),s=this.axes.find(M=>M.direction==="y");if(!(i instanceof wh)||!(s instanceof wh))return e;const{horizontal:n,thickness:r}=t;let o=0,a=0;const l=new $r;l.domain=[0,100],l.range=n?i.range:s.range;const c=l.ticks();n?o=t.computeInset("x",c):a=t.computeInset("y",c);const p=e.width-Math.abs(o),g=e.height-Math.abs(a),f=Math.max(n?p:r,0),y=Math.max(n?r:g,0),C=e.x+(p-f)/2+Math.max(o,0),x=e.y+(g-y)/2-Math.min(a,0);i.range=[0,f],i.gridLength=f,i.calculateLayout(),i.translation.x=C,i.translation.y=x+(i.position==="bottom"?r:0),s.range=[0,y],s.gridLength=y,s.calculateLayout(),s.translation.x=C+(s.position==="right"?r:0),s.translation.y=x,t.originX=C-e.x,t.originY=x-e.y,(f===0||y===0)&&_e.warnOnce("There was insufficient space to display the Linear Gauge.")}performLayout(e){const{seriesRoot:t,annotationRoot:i,series:s,seriesArea:n}=this,{layoutBox:r}=e,o=r.clone();r.shrink(n.padding.toJson());const a=this.series[0];Hee(a)?this.updateRadialGauge(r,a):Vee(a)&&this.updateLinearGauge(r,a),this.axes.forEach(l=>l.update()),this.seriesRect=o.clone().translate(o.x-r.x,o.y-r.y),this.animationRect=r,t.visible=s.some(l=>l.visible);for(const l of[t,i])l.translationX=Math.floor(r.x),l.translationY=Math.floor(r.y);this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:t.visible,rect:o,paddedRect:r}})}getAriaLabel(){const e=[],t=this.getCaptionText();t.length!==0&&e.push(t);for(const s of this.series)e.push(s.getCaptionText());const i=e.join(". ");return this.ctx.localeManager.t("ariaAnnounceGaugeChart",{caption:i})}};aE.className="GaugeChart";aE.type="gauge";var lE=class extends ru{constructor(e,t){super(e,t)}getChartType(){return"hierarchy"}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e;s.shrink(this.seriesArea.padding.toJson());const n=s.clone();this.seriesRect=n,this.animationRect=n;for(const r of[t,i])r.translationX=Math.floor(n.x),r.translationY=Math.floor(n.y);t.visible=this.series[0].visible,t.setClipRect(n.clone()),this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:n,paddedRect:n}})}getAriaLabel(){const e=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:e})}};lE.className="HierarchyChart";lE.type="hierarchy";var cE=class extends ru{constructor(e,t){super(e,t),this.padding=new nu(40),this.ctx.axisManager.axisGroup.zIndex=5}getChartType(){return"polar"}async performLayout(e){const{layoutBox:t}=e;t.shrink(this.seriesArea.padding.toJson());const i=t.clone();this.seriesRect=i,this.animationRect=i,this.seriesRoot.translationX=i.x,this.seriesRoot.translationY=i.y,await this.computeCircle(i),this.axes.forEach(s=>s.update()),this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:i,paddedRect:i}})}updateAxes(e,t,i,s){var l;const n=this.axes.find(c=>c.direction==="x"),r=this.axes.find(c=>c.direction==="y");if(!(n instanceof Mh)||!(r instanceof Mh))return;const o=n.scale,a=r.innerRadiusRatio;n.innerRadiusRatio=a,n.computeRange(),n.gridLength=s,r.gridAngles=(l=o.ticks)==null?void 0:l.call(o).map(c=>o.convert(c)),r.gridRange=n.range,r.range=[s,s*a],[n,r].forEach(c=>{c.translation.x=e.x+t,c.translation.y=e.y+i,c.calculateLayout()})}async computeCircle(e){const t=this.series.filter(Wee),i=this.axes.filter(jee),s=(c,p,g)=>{this.updateAxes(e,c,p,g),t.forEach(y=>{y.centerX=c,y.centerY=p,y.radius=g});const f=t.filter(y=>y.type==="donut"||y.type==="pie");if(f.length>1){const y=f.map(C=>{const x=C.getInnerRadius();return{series:C,innerRadius:x}}).sort((C,x)=>C.innerRadius-x.innerRadius);y.at(-1).series.surroundingRadius=void 0;for(let C=0;C<y.length-1;C++)y[C].series.surroundingRadius=y[C+1].innerRadius}},n=e.width/2,r=e.height/2,o=Math.max(0,Math.min(e.width,e.height)/2);let a=o;s(n,r,a);const l=async({hideWhenNecessary:c=!1}={})=>{const p=[];for(const y of ah(i,t)){const C=await y.computeLabelsBBox({hideWhenNecessary:c},e);C&&p.push(C)}if(p.length===0){s(n,r,o);return}const g=Ue.merge(p),f=this.refineCircle(g,a,e);s(f.centerX,f.centerY,f.radius),a=f.radius};await l(),await l(),await l(),await l({hideWhenNecessary:!0}),await l({hideWhenNecessary:!0});for(const c of ah(i,t))await c.computeLabelsBBox({hideWhenNecessary:!0},e);return{radius:a,centerX:n,centerY:r}}refineCircle(e,t,i){const n=-t,r=-t,o=t,a=t;let l=Math.max(0,n-e.x),c=Math.max(0,r-e.y),p=Math.max(0,e.x+e.width-o),g=Math.max(0,e.y+e.height-a);l=p=Math.max(l,p),c=g=Math.max(c,g);const f=i.width-l-p,y=i.height-c-g;let C=Math.min(f,y)/2;const x=.5*i.width/2,M=.5*i.height/2,b=Math.min(x,M);if(C<b){C=b;const P=l+p,k=c+g;if(2*C+k>i.height){const _=i.height-2*C;Math.min(c,g)*2>_?(c=_/2,g=_/2):c>g?c=_-g:g=_-c}if(2*C+P>i.width){const _=i.width-2*C;Math.min(l,p)*2>_?(l=_/2,p=_/2):l>p?l=_-p:p=_-l}}const R=l+2*C+p,I=c+2*C+g;return{centerX:(i.width-R)/2+l+C,centerY:(i.height-I)/2+c+C,radius:C}}};cE.className="PolarChart";cE.type="polar";function Wee(e){return e instanceof $S}function jee(e){return e instanceof Mh}var uE=class extends ru{constructor(e,t){super(e,t)}getChartType(){return"standalone"}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e,n=s.clone();s.shrink(this.seriesArea.padding.toJson()),this.seriesRect=s,this.animationRect=s;for(const r of[t,i])r.translationX=Math.floor(s.x),r.translationY=Math.floor(s.y);t.visible=this.series[0].visible,this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:!0,rect:n,paddedRect:s}})}getAriaLabel(){const e=this.getCaptionText();return this.ctx.localeManager.t("ariaAnnounceHierarchyChart",{caption:e})}};uE.className="StandaloneChart";uE.type="standalone";var XS=Math.PI/180,wb=e=>e*XS,xb=e=>-Math.log(Math.tan(Math.PI*.25+e*XS*.5)),bb=e=>e/XS,Mb=e=>(Math.atan(Math.exp(-e))-Math.PI*.25)/(XS*.5),BM=class GM{constructor(t,i){this.domain=t,this.range=i,this.type="mercator",this.bounds=GM.bounds(t)}static bounds(t){const[[i,s],[n,r]]=t,o=wb(i),a=xb(s),l=wb(n),c=xb(r);return new Ue(Math.min(o,l),Math.min(a,c),Math.abs(l-o),Math.abs(c-a))}static fixedScale(){return new GM([[bb(0),Mb(0)],[bb(1),Mb(1)]],[[0,0],[1,1]])}convert([t,i]){const[[s,n],[r,o]]=this.range,a=(r-s)/this.bounds.width,l=(o-n)/this.bounds.height;return[(wb(t)-this.bounds.x)*a+s,(xb(i)-this.bounds.y)*l+n]}invert([t,i]){const[[s,n],[r,o]]=this.range,a=(r-s)/this.bounds.width,l=(o-n)/this.bounds.height;return[bb((t-s)/a+this.bounds.x),Mb((i-n)/l+this.bounds.y)]}};function WA(e){return e.type==="map-shape"||e.type==="map-line"||e.type==="map-marker"||e.type==="map-shape-background"||e.type==="map-line-background"}var hE=class extends ru{constructor(e,t){super(e,t),this.xAxis=new Qc(this.getModuleContext()),this.xAxis.position="bottom",this.yAxis=new Qc(this.getModuleContext()),this.yAxis.position="left",this.ctx.zoomManager.updateAxes([this.xAxis,this.yAxis])}getChartType(){return"topology"}async updateData(){await super.updateData();const{topology:e}=this.getOptions();this.series.forEach(t=>{WA(t)&&t.setChartTopology(e)})}performLayout(e){const{seriesRoot:t,annotationRoot:i}=this,{layoutBox:s}=e;s.shrink(this.seriesArea.padding.toJson());const n=s.clone();this.seriesRect=n,this.animationRect=n;const r=this.series.filter(WA),o=r.reduce((c,p)=>{if(!p.visible)return c;const g=p.topologyBounds;return g==null?c:c==null?g:(c.merge(g),c)},void 0);let a;if(o!=null){const{lon0:c,lat0:p,lon1:g,lat1:f}=o,y=[[c,p],[g,f]],C=BM.bounds(y),{width:x,height:M}=n,b=Math.min(x/C.width,M/C.height),R=C.width*b,I=C.height*b,P=(x-R)/2,k=(M-I)/2,_=P,B=k,H=P+R,V=k+I,U=this.ctx.zoomManager.getAxisZoom(this.xAxis.id),$=this.ctx.zoomManager.getAxisZoom(this.yAxis.id),te=(H-_)/(U.max-U.min),Ce=_-te*U.min,be=(V-B)/(1-$.min-(1-$.max)),Re=B-be*(1-$.max);a=new BM(y,[[Ce,Re],[Ce+te,Re+be]])}r.forEach(c=>{c.scale=a});const l=this.series.some(c=>c.visible);t.visible=l;for(const c of[t,i])c.translationX=Math.floor(n.x),c.translationY=Math.floor(n.y),c.setClipRect(n.clone());this.ctx.layoutManager.emitLayoutComplete(e,{series:{visible:l,rect:n,paddedRect:n}})}};hE.className="TopologyChart";hE.type="topology";var gn={isEnterprise:!1},Gr=Symbol("IGNORED_PROP");function dr(e,t){const i={};for(const[s,n]of Object.entries(t))n!==Gr&&Object.hasOwn(e,s)&&(i[s]=n);return i}function Uee(e){return e.type==="radial-gauge"}function Kee(e){return e.type==="linear-gauge"}function Yee(e){const{animation:t,background:i,container:s,contextMenu:n,footnote:r,height:o,listeners:a,locale:l,minHeight:c,minWidth:p,padding:g,subtitle:f,theme:y,title:C,width:x,type:M,cursor:b,nodeClickRange:R,tooltip:I,value:P,scale:k={},startAngle:_,endAngle:B,highlightStyle:H,segmentation:V,bar:U,needle:$,targets:te,outerRadius:Ce,innerRadius:be,outerRadiusRatio:Re,innerRadiusRatio:oe,cornerRadius:Se,cornerMode:K,label:pe,secondaryLabel:q,spacing:W,...Q}=e,{fills:ve,fillMode:se,fill:ye,fillOpacity:ue,stroke:Me,strokeWidth:me,strokeOpacity:ne,lineDash:Ee,lineDashOffset:ze,min:Be=0,max:$e=1,interval:tt={},label:Ne={}}=k,qe=dr(e,{animation:t,background:i,container:s,contextMenu:n,footnote:r,height:o,listeners:a,locale:l,minHeight:c,minWidth:p,padding:g,subtitle:f,theme:y,title:C,width:x}),ft=dr(k,{fills:ve,fillMode:se,fill:ye,fillOpacity:ue,stroke:Me,strokeWidth:me,strokeOpacity:ne,lineDash:Ee,lineDashOffset:ze}),Rt=dr(e,{startAngle:Gr,endAngle:Gr,needle:$!=null?{enabled:!0,...$}:Gr,scale:ft,type:M,cursor:b,nodeClickRange:R,listeners:a,tooltip:I,value:P,highlightStyle:H,segmentation:V,bar:U,targets:te,outerRadius:Ce,innerRadius:be,outerRadiusRatio:Re,innerRadiusRatio:oe,cornerRadius:Se,cornerMode:K,label:pe,secondaryLabel:q,spacing:W,...Q});return{...qe,series:[Rt],axes:[{type:"angle-number",min:Be,max:$e,startAngle:_,endAngle:B,interval:tt??{},label:Ne??{}},{type:"radius-number"}]}}function $ee(e){const{animation:t,background:i,container:s,contextMenu:n,footnote:r,height:o,listeners:a,locale:l,minHeight:c,minWidth:p,padding:g,subtitle:f,theme:y,title:C,width:x,type:M,cursor:b,nodeClickRange:R,tooltip:I,value:P,scale:k={},direction:_="vertical",thickness:B,highlightStyle:H,segmentation:V,bar:U,targets:$,cornerRadius:te,cornerMode:Ce,label:be,...Re}=e,{fills:oe,fillMode:Se,fill:K,fillOpacity:pe,stroke:q,strokeWidth:W,strokeOpacity:Q,lineDash:ve,lineDashOffset:se,min:ye=0,max:ue=1,interval:Me={},label:me={}}=k,ne=dr(e,{animation:t,background:i,container:s,contextMenu:n,footnote:r,height:o,listeners:a,locale:l,minHeight:c,minWidth:p,padding:g,subtitle:f,theme:y,title:C,width:x}),Ee=dr(k,{fills:oe,fillMode:Se,fill:K,fillOpacity:pe,stroke:q,strokeWidth:W,strokeOpacity:Q,lineDash:ve,lineDashOffset:se}),ze=dr(e,{scale:Ee,type:M,cursor:b,nodeClickRange:R,listeners:a,tooltip:I,value:P,direction:_,thickness:B,highlightStyle:H,segmentation:V,bar:U,targets:$,cornerRadius:te,cornerMode:Ce,label:be,...Re}),{placement:Be,...$e}=me;let tt,Ne;const qe=_==="horizontal";qe?(tt=Be==="before"?"top":"bottom",Ne="left"):(tt=Be==="after"?"right":"left",Ne="bottom");const ft={type:"number",position:tt,min:ye,max:ue,reverse:!qe,interval:Me,label:$e,nice:!1},Rt={type:"number",position:Ne,min:0,max:1,label:{enabled:!1}};return{...ne,series:[ze],axes:qe?[ft,Rt]:[Rt,ft]}}function jA(e,t){if(t==null)return e;const{targets:i,...s}=t;return e=Et(e,s),e.targets!=null&&i!=null&&(e.targets=eC(e.targets,i)),e}function Zee(e,t){if(Uee(e)){const b=jA(e,t);return Yee(b)}else if(Kee(e)){const b=jA(e,t);return $ee(b)}const{animation:i,background:s,container:n,contextMenu:r,footnote:o,height:a,listeners:l,locale:c,minHeight:p,minWidth:g,padding:f,subtitle:y,theme:C,title:x,width:M}=e;return dr(e,{animation:i,background:s,container:n,contextMenu:r,footnote:o,height:a,listeners:l,locale:c,minHeight:p,minWidth:g,padding:f,subtitle:y,theme:C,title:x,width:M})}function ps(e,t){if(xn(e))return t(e)}var Xee=["ohlc","line","step-line","hlc","high-low","candlestick","hollow-candlestick"];function Qee(e,t,i){const{dateKey:s="date",highKey:n="high",openKey:r="open",lowKey:o="low",closeKey:a="close",volumeKey:l="volume",chartType:c="candlestick",navigator:p=!1,volume:g=!0,rangeButtons:f=!0,statusBar:y=!0,toolbar:C=!0,zoom:x=!0,theme:M,data:b,...R}=e,I=Jee(M,c,s,n,o,r,a),P=qee(M,i,r,a,g,l),_={navigator:{enabled:p,...g?{miniChart:{enabled:p,series:[{type:"line",xKey:s,yKey:l,marker:{enabled:!1}}]},height:40,minHandle:{height:46},maxHandle:{height:46}}:null}},B={annotations:{enabled:C,toolbar:{enabled:C},optionsToolbar:{enabled:C},data:b,xKey:s,volumeKey:g?l:void 0}},H=y?{statusBar:{enabled:!0,data:b,highKey:n,openKey:r,lowKey:o,closeKey:a,volumeKey:g?l:void 0}}:null,V={zoom:{enabled:x,enableIndependentAxes:!0}},U={ranges:{enabled:f}},$=g?[{type:"number",position:"left",keys:[l],label:{enabled:!1},crosshair:{enabled:!1},gridLine:{enabled:!1},nice:!1,layoutConstraints:{stacked:!1,width:20,unit:"percentage",align:"end"}}]:[];return{theme:{baseTheme:typeof M=="string"?M:"ag-financial",...Et(typeof M=="object"?M:null,{overrides:{common:{title:{padding:4},padding:{top:6,right:8,bottom:5},chartToolbar:{enabled:C}}}})},animation:{enabled:!1},legend:{enabled:!1},series:[...P,...I],seriesArea:{clip:!0},axes:[{type:"number",position:"right",keys:[r,a,n,o],interval:{maxSpacing:ps(M,te=>{var Ce,be,Re,oe,Se;return(Se=(oe=(Re=(be=(Ce=te.overrides)==null?void 0:Ce.common)==null?void 0:be.axes)==null?void 0:Re.number)==null?void 0:oe.interval)==null?void 0:Se.maxSpacing})??45},label:{format:ps(M,te=>{var Ce,be,Re,oe,Se;return(Se=(oe=(Re=(be=(Ce=te.overrides)==null?void 0:Ce.common)==null?void 0:be.axes)==null?void 0:Re.number)==null?void 0:oe.label)==null?void 0:Se.format})??".2f"},crosshair:{enabled:!0,snap:!1},layoutConstraints:{stacked:!1,width:100,unit:"percentage",align:"start"}},...$,{type:"ordinal-time",position:"bottom",line:{enabled:!1},label:{enabled:!0},crosshair:{enabled:!0}}],tooltip:{enabled:!1},data:b,...B,..._,...H,...V,...U,...R}}function qee(e,t,i,s,n,r){if(!n)return[];const o=ps(e,l=>{var c,p,g;return(g=(p=(c=l.overrides)==null?void 0:c.bar)==null?void 0:p.series)==null?void 0:g.fill}),a=o?{fill:o}:{itemStyler({datum:l}){const{up:c,down:p}=t().palette;return{fill:l[i]<l[s]?c==null?void 0:c.fill:p==null?void 0:p.fill}}};return[{type:"bar",xKey:"date",yKey:r,tooltip:{enabled:!1},highlight:{enabled:!1},fillOpacity:ps(e,l=>{var c,p,g;return(g=(p=(c=l.overrides)==null?void 0:c.bar)==null?void 0:p.series)==null?void 0:g.fillOpacity})??.5,...a,focusPriority:1,fastDataProcessing:!0}]}var Rb="range-area";function Jee(e,t,i,s,n,r,o){const a={xKey:i,openKey:r,closeKey:o,highKey:s,lowKey:n},l={xKey:i,yKey:o},c={pickOutsideVisibleMinorAxis:!0};switch(t??"candlestick"){case"ohlc":return ete(c,a);case"line":return tte(c,e,l);case"step-line":return ite(c,e,l);case"hlc":return ste(c,e,l,a);case"high-low":return nte(c,e,a);case"candlestick":return UA(c,a);case"hollow-candlestick":return rte(c,e,a);default:return _e.warnOnce(`unknown chart type: ${t}; expected one of: ${Xee.join(", ")}`),UA(c,a)}}function ete(e,t){return[{type:"ohlc",focusPriority:0,...e,...t}]}function tte(e,t,i){return[{type:"line",focusPriority:0,...e,...i,stroke:ps(t,s=>{var n,r,o;return(o=(r=(n=s.overrides)==null?void 0:n.line)==null?void 0:r.series)==null?void 0:o.stroke})??_p,marker:ps(t,s=>{var n,r,o;return(o=(r=(n=s.overrides)==null?void 0:n.line)==null?void 0:r.series)==null?void 0:o.marker})??{enabled:!1}}]}function ite(e,t,i){return[{type:"line",focusPriority:0,...e,...i,stroke:ps(t,s=>{var n,r,o;return(o=(r=(n=s.overrides)==null?void 0:n.line)==null?void 0:r.series)==null?void 0:o.stroke})??_p,interpolation:ps(t,s=>{var n,r,o;return(o=(r=(n=s.overrides)==null?void 0:n.line)==null?void 0:r.series)==null?void 0:o.interpolation})??{type:"step"},marker:ps(t,s=>{var n,r,o;return(o=(r=(n=s.overrides)==null?void 0:n.line)==null?void 0:r.series)==null?void 0:o.marker})??{enabled:!1}}]}function ste(e,t,i,{xKey:s,highKey:n,closeKey:r,lowKey:o}){const a=MB(Rb,t);return[{type:Rb,focusPriority:0,...e,xKey:s,yHighKey:n,yLowKey:r,fill:a.fill??IS,stroke:a.stroke??DS,fillOpacity:ps(t,l=>{var c,p,g;return(g=(p=(c=l.overrides)==null?void 0:c["range-area"])==null?void 0:p.series)==null?void 0:g.fillOpacity})??.3,strokeWidth:ps(t,l=>{var c,p,g;return(g=(p=(c=l.overrides)==null?void 0:c["range-area"])==null?void 0:p.series)==null?void 0:g.strokeWidth})??2},{type:Rb,focusPriority:0,...e,xKey:s,yHighKey:r,yLowKey:o,fill:a.fill??LS,stroke:a.stroke??ES,fillOpacity:ps(t,l=>{var c,p,g;return(g=(p=(c=l.overrides)==null?void 0:c["range-area"])==null?void 0:p.series)==null?void 0:g.fillOpacity})??.3,strokeWidth:ps(t,l=>{var c,p,g;return(g=(p=(c=l.overrides)==null?void 0:c["range-area"])==null?void 0:p.series)==null?void 0:g.strokeWidth})??2},{type:"line",...e,...i,stroke:ps(t,l=>{var c,p,g;return(g=(p=(c=l.overrides)==null?void 0:c.line)==null?void 0:p.series)==null?void 0:g.stroke})??AS,strokeWidth:ps(t,l=>{var c,p,g;return(g=(p=(c=l.overrides)==null?void 0:c.line)==null?void 0:p.series)==null?void 0:g.strokeWidth})??2,marker:ps(t,l=>{var c,p,g;return(g=(p=(c=l.overrides)==null?void 0:c.line)==null?void 0:p.series)==null?void 0:g.marker})??{enabled:!1}}]}function nte(e,t,{xKey:i,highKey:s,lowKey:n}){const r=MB("range-bar",t);return[{type:"range-bar",...e,xKey:i,yHighKey:s,yLowKey:n,fill:r.fill??TS,stroke:r.stroke??_p,tooltip:{range:"nearest"},focusPriority:0,fastDataProcessing:!0}]}function UA(e,t){return[{type:"candlestick",focusPriority:0,...e,...t}]}function rte(e,t,i){var n;const s=ps(t,r=>{var o,a,l;return(l=(a=(o=r.overrides)==null?void 0:o.candlestick)==null?void 0:a.series)==null?void 0:l.item});return[{type:"candlestick",focusPriority:0,...e,...i,item:{up:{fill:((n=s==null?void 0:s.up)==null?void 0:n.fill)??"transparent"}}}]}function MB(e,t){const i=ps(t,n=>{var r,o,a;return(a=(o=(r=n.overrides)==null?void 0:r[e])==null?void 0:o.series)==null?void 0:a.fill}),s=ps(t,n=>{var r,o,a;return(a=(o=(r=n.overrides)==null?void 0:r[e])==null?void 0:o.series)==null?void 0:a.stroke});return{fill:i,stroke:s}}var RB={title:{enabled:!1},label:{enabled:!1},line:{enabled:!1},gridLine:{enabled:!1},crosshair:{enabled:!1,stroke:FS,lineDash:[0],label:{enabled:!1}}},Db={...RB,nice:!1},Eb={position:{type:"sparkline"}},Ib={style:[{stroke:qc}],width:2},ote={number:{gridLine:Ib},time:{gridLine:Ib},category:{gridLine:Ib}},ate={overrides:{common:{animation:{enabled:!1},contextMenu:{enabled:!1},keyboard:{enabled:!1},background:{visible:!1},padding:{top:0,right:0,bottom:0,left:0},axes:{number:{...Db,interval:{values:[0]}},log:{...Db},time:{...Db},category:{...RB}}},bar:{series:{crisp:!1,label:{placement:"inside-end",padding:4},sparklineMode:!0},tooltip:{...Eb,range:"nearest"},axes:ote},line:{seriesArea:{padding:{top:2,right:2,bottom:2,left:2}},series:{sparklineMode:!0,strokeWidth:1,marker:{enabled:!1,size:3},tooltip:Eb}},area:{seriesArea:{padding:{top:1,right:0,bottom:1,left:0}},series:{strokeWidth:1,fillOpacity:.4,tooltip:Eb}}}},DB=pn(lte);function lte(e,t){return typeof e=="string"?{...t,baseTheme:e}:e!=null?{...e,baseTheme:DB(e.baseTheme,t)}:t}function EB(e){if(Array.isArray(e)&&e.length!==0){const t=e[0];if(typeof t=="number")return{data:e.map((s,n)=>({x:n,y:s})),series:[{xKey:"x",yKey:"y"}],datumKey:"y"};if(Array.isArray(t))return{data:e.map(s=>({x:s[0],y:s[1],datum:s})),series:[{xKey:"x",yKey:"y"}],datumKey:"datum"}}return{data:e}}function cte(e,t){switch(e==null?void 0:e.type){case"number":{const{type:i,visible:s,stroke:n,strokeWidth:r,min:o,max:a,reverse:l}=e;return dr(e,{type:i,reverse:l,min:o,max:a})}case"time":{const{type:i,visible:s,stroke:n,strokeWidth:r,min:o,max:a,reverse:l}=e;return dr(e,{type:i,reverse:l,min:o,max:a})}case"category":{const{type:i,visible:s,stroke:n,strokeWidth:r,paddingInner:o,paddingOuter:a,reverse:l}=e;return dr(e,{type:i,reverse:l,paddingInner:o,paddingOuter:a})}}return{type:t}}function ute(e,t,i){const s={};return(e==null?void 0:e.stroke)!=null&&(s.style=[{stroke:e==null?void 0:e.stroke}],s.enabled??(s.enabled=!0)),(e==null?void 0:e.strokeWidth)!=null&&(s.width=e==null?void 0:e.strokeWidth,s.enabled??(s.enabled=!0)),i.type==="bar"&&i.direction!=="horizontal"&&(s.enabled??(s.enabled=!0)),(e==null?void 0:e.visible)!=null&&(s.enabled=e.visible),s.enabled??(s.enabled=t),s}var hte=pn((e,t,i)=>s=>{var p;const n=s.datum[s.xKey],r=s.datum[s.yKey],o=i!=null?s.datum[i]:s.datum,a=(p=t==null?void 0:t.renderer)==null?void 0:p.call(t,{context:e,datum:o,xValue:n,yValue:r});if(typeof a=="string")return a;const l=a==null?void 0:a.title,c=a==null?void 0:a.content;return l!=null&&c!=null?{heading:l,title:void 0,data:[{label:void 0,value:c}]}:{heading:l??c??r.toFixed(2),title:void 0,data:[]}});function dte(e){const{background:t,container:i,height:s,listeners:n,locale:r,minHeight:o,minWidth:a,padding:l,width:c,theme:p,data:g,crosshair:f,axis:y,min:C,max:x,tooltip:M,context:b,...R}=e,I=dr(e,{background:t,container:i,height:s,listeners:n,locale:r,minHeight:o,minWidth:a,padding:l,width:c,tooltip:Gr,context:Gr,data:Gr,crosshair:Gr,axis:Gr,min:Gr,max:Gr,theme:Gr}),{data:P,series:[k]=[],datumKey:_}=EB(g),B=R;k!=null&&Object.assign(B,k),B.tooltip={...M,renderer:hte(b,M,_)},I.theme=DB(p,ate),I.data=P,I.series=[B];const H=B.type!=="bar"||B.direction!=="horizontal",[V,U]=H?["bottom","left"]:["left","bottom"],$={...cte(y,"category"),position:V,...dr(e,{crosshair:f})},te={type:"number",gridLine:ute(y,!1,e),position:U,...dr(e,{min:C,max:x})};return I.axes=H?[te,$]:[$,te],I}var pte={"price-volume":Qee,gauge:Zee,sparkline:dte},gte={sparkline:EB};function KA(e,t){var o,a,l,c;let i=[];const s=gS(e),n=Fl(e),r=n?wi.get(n):"unknown";for(const p of Ep)if(!(r!=="unknown"&&!p.chartTypes.includes(r))){if(p.type==="root"||p.type==="legend"){const g=e[p.optionsKey];if(g==null)continue;p.optionsInnerKey?g[p.optionsInnerKey]&&(i.push(`${p.optionsKey}.${p.optionsInnerKey}`),delete g[p.optionsInnerKey]):(i.push(p.optionsKey),delete e[p.optionsKey])}else if(p.type==="axis"){if(!("axes"in e)||!((o=e.axes)!=null&&o.some(g=>g.type===p.identifier)))continue;i.push(`axis[type=${p.identifier}]`),e.axes=e.axes.filter(g=>g.type!==p.identifier)}else if(p.type==="axis-option"){if(!("axes"in e)||!((a=e.axes)!=null&&a.some(g=>g[p.optionsKey])))continue;i.push(`axis.${p.optionsKey}`),e.axes.forEach(g=>{g[p.optionsKey]&&delete g[p.optionsKey]})}else if(p.type==="series"){if(p.community||!((l=e.series)!=null&&l.some(g=>g.type===p.identifier)))continue;i.push(`series[type=${p.identifier}]`),e.series=e.series.filter(g=>g.type!==p.identifier)}else if(p.type==="series-option"){if(!((c=e.series)!=null&&c.some(g=>g[p.optionsKey])))continue;i.push(`series.${p.optionsKey}`),e.series.forEach(g=>{g[p.optionsKey]&&delete g[p.optionsKey]})}}if(i.length&&!t){s&&(i=["AgCharts.createGauge"]);let p="ag-charts-enterprise",g="https://ag-grid.com/charts/javascript/installation/";e.mode==="integrated"&&(p="ag-grid-charts-enterprise' or 'ag-grid-enterprise/charts-enterprise",g="https://www.ag-grid.com/javascript-data-grid/integrated-charts-installation/"),_e.warnOnce([`unable to use these enterprise features as '${p}' has not been loaded:`,"",...i,"",`See: ${g}`].join(`
`))}}function fte(e){const t="mode"in e&&e.mode==="integrated";for(const i of ca.byType("root","legend")){const s=e[i.optionsKey],n=s!=null&&s.enabled===!1,r=!("removable"in i)||i.removable===!0||i.removable==="standalone-only"&&!t;n&&r&&delete e[i.optionsKey]}}var QS=Symbol("description"),mte=Symbol("required");function vte(e,t,i){const{errors:s}=IB(e,t,i);for(const{message:n}of s)_e.warn(n);return s.length===0}function YA(e,t,i){const s=Vn(i)?i:i[QS],n=s?`; expecting ${s}`:"";return`${e?`Option \`${e}\``:"Value"} cannot be set to \`${gJ(t)}\`${n}, ignoring.`}function IB(e,t,i=""){if(!xn(e))return{valid:null,errors:[{path:i,value:e,message:YA(i,e,"an object")}]};const s=new Set(Object.keys(e)),n=[],r={};function o(a){return bi(t)?`${i}[${a}]`:i?`${i}.${a}`:a}for(const[a,l]of Object.entries(t)){s.delete(a);const c=e[a];if(!(!l[mte]&&typeof c>"u"))if(tu(l))l(c)?r[a]=c:n.push({key:a,path:i,value:c,message:YA(o(a),c,l)});else{const p=IB(c,l,o(a));r[a]=p.valid,n.push(...p.errors)}}for(const a of s)n.push({key:a,path:i,unknown:!0,message:`Unknown option \`${o(a)}\`, ignoring.`});return{valid:r,errors:n}}function Ia(e,t){return Object.assign(i=>e(i),{[QS]:t})}var yte=(...e)=>Ia(t=>e.some(i=>i(t)),e.map(t=>t[QS]).filter(Boolean).join(" or "));Ia(bi,"an array");Ia(nR,"a boolean");Ia(tu,"a function");Ia(Kt,"a number");var $A=Ia(xn,"an object"),tl=Ia(Vn,"a string"),Cte=(e,t=!0)=>Ia(i=>Kt(i)&&(i>e||t&&i===e),`a number greater than ${t?"or equal to ":""}${e}`),Ste=(e,t)=>Ia(i=>Kt(i)&&i>=e&&i<=t,`a number between ${e} and ${t} inclusive`);Cte(0);Ste(0,1);var ZA=(e,t)=>Ia(i=>bi(i)&&i.every(e),`${e[QS]} array`);function zM(e){return e!=null&&e.up||e!=null&&e.down||e!=null&&e.neutral?"user-full":e!=null&&e.fills||e!=null&&e.strokes?"user-indexed":"inbuilt"}var ay="white",HM={get cartesian(){return{seriesTypes:wi.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:wi.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:wi.hierarchyTypes,commonOptions:[]}},get topology(){return{seriesTypes:wi.topologyTypes,commonOptions:[]}},get"flow-proportion"(){return{seriesTypes:wi.flowProportionTypes,commonOptions:[]}},get standalone(){return{seriesTypes:wi.standaloneTypes,commonOptions:[]}},get gauge(){return{seriesTypes:wi.gaugeTypes,commonOptions:[]}}},wte={"radial-gauge":!0,"linear-gauge":!0};function XA(e){return wte[e]===!0}var xte=Object.values(HM).reduce((e,{commonOptions:t})=>e.concat(t),[]),Or=class VM{static getAxisDefaults(t){return Et(t,{title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:ki,color:ds},label:{fontSize:12,fontFamily:ki,spacing:11,color:ds,avoidCollisions:!0},line:{enabled:!0,width:1,stroke:ff},tick:{enabled:!1,width:1,stroke:ff},gridLine:{enabled:!0,style:[{stroke:qc,lineDash:[]}]},crossLines:{enabled:!1,fill:np,stroke:np,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:ki,padding:5,color:ds}},crosshair:{enabled:!0}})}getChartDefaults(){return{minHeight:300,minWidth:300,background:{visible:!0,fill:Wf},padding:{top:al,right:al,bottom:al,left:al},keyboard:{enabled:!0},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:ki,color:ds,wrapping:"hyphenate",layoutStyle:kc,textAlign:Nc},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:ki,color:Uc,wrapping:"hyphenate",layoutStyle:kc,textAlign:Nc},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:ki,color:"rgb(140, 140, 140)",wrapping:"hyphenate",layoutStyle:kc,textAlign:Nc},legend:{position:"bottom",spacing:30,listeners:{},toggleSeries:!0,item:{paddingX:16,paddingY:8,marker:{size:15,padding:8},showSeriesStroke:!0,label:{color:ds,fontSize:12,fontFamily:ki}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:ds},inactiveStyle:{fill:Uc},highlightStyle:{fill:ds},label:{color:ds}}},tooltip:{enabled:!0,darkTheme:sp,delay:0},overlays:{darkTheme:sp},listeners:{}}}constructor(t={}){const{overrides:i,palette:s}=Us(t),n=this.createChartConfigPerChartType(this.getDefaults()),r={};i&&this.mergeOverrides(n,r,i);const{fills:o,strokes:a,...l}=this.getDefaultColors();this.palette=rf(Et(s,{fills:Object.values(o),strokes:Object.values(a),...l})),this.paletteType=zM(s),this.config=rf(this.templateTheme(n)),this.presets=rf(r)}mergeOverrides(t,i,s){for(const{seriesTypes:n,commonOptions:r}of Object.values(HM)){const o={...s.common};for(const a of xte)r.includes(a)||delete o[a];if(o)for(const a of n){const l=a;XA(l)||(t[l]=Et(o,t[l]))}}wi.seriesTypes.forEach(n=>{const r=n,o=s[r];XA(r)?i[r]=o:t[r]=Et(o,t[r])})}createChartConfigPerChartType(t){for(const[i,{seriesTypes:s}]of Object.entries(HM)){const n=LM.get(i);for(const r of s)t[r]??(t[r]=Us(n))}return t}getDefaults(){const t=(i,s)=>{const n={},r={axes:{},...QR.getThemeTemplates(),...this.getChartDefaults(),...LM.get(i)};for(const o of s){n[o]=Et(lr.getThemeTemplate(o),n[o]??Us(r));const{axes:a}=n[o];for(const l of ml.keys())a[l]=Et(a[l],ml.getThemeTemplate(l),VM.cartesianAxisDefault[l])}return n};return Et(t("cartesian",wi.cartesianTypes),t("polar",wi.polarTypes),t("hierarchy",wi.hierarchyTypes),t("topology",wi.topologyTypes),t("flow-proportion",wi.flowProportionTypes),t("standalone",wi.standaloneTypes),t("gauge",wi.gaugeTypes))}static applyTemplateTheme(t,i,s){if(bi(t))for(let n=0;n<t.length;n++){const r=t[n];typeof r=="symbol"&&(s!=null&&s.has(r))&&(t[n]=s.get(r))}else for(const[n,r]of Object.entries(t))typeof r=="symbol"&&(s!=null&&s.has(r))&&(t[n]=s.get(r))}templateTheme(t,i=!0){const s=i?Us(t):t,n=this.getTemplateParameters();return cl(s,VM.applyTemplateTheme,void 0,void 0,n),s}getDefaultColors(){return{fills:hs,strokes:sa,up:{fill:hs.GREEN,stroke:sa.GREEN},down:{fill:hs.RED,stroke:sa.RED},neutral:{fill:hs.GRAY,stroke:sa.GRAY},altUp:{fill:hs.BLUE,stroke:sa.BLUE},altDown:{fill:hs.ORANGE,stroke:sa.ORANGE},altNeutral:{fill:hs.GRAY,stroke:sa.GRAY}}}getTemplateParameters(){var n,r,o,a,l,c,p,g,f,y,C,x;const{isEnterprise:t}=gn,i=new Map;i.set(sp,!1),i.set(wD,t),i.set(SD,!t),i.set(ki,"Verdana, sans-serif"),i.set(ds,"#464646"),i.set(xD,"#fff"),i.set(Uc,"#8c8c8c"),i.set(qc,"#e0eaf1"),i.set(ff,"#c3c3c3"),i.set(np,"#464646"),i.set(Mm,"#d9d9d9"),i.set(RS,"#ddd"),i.set(cu,ay),i.set(Wf,ay),i.set(MS,"black"),i.set(uu,"#00000080"),i.set($n,[hs.ORANGE,hs.YELLOW,hs.GREEN]),i.set(FS,"#aaa"),i.set(eo,[hs.GREEN,hs.YELLOW,hs.RED]),i.set(Ea,["#5090dc","#629be0","#73a6e3","#85b1e7","#96bcea","#a8c8ee","#b9d3f1","#cbdef5"]),i.set(al,20),i.set(kc,"block"),i.set(Nc,"center"),i.set(kS,["#fff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),i.set(NS,["#fff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),i.set(ID,["#797b86","#e24c4a","#f49d2d","#65ab58","#409682","#4db9d2","#5090dc","#3068f9","#e24c4a","#913aac","#d93e64"]),i.set(PS,ay),i.set(Zn,hs.BLUE),i.set(OS,hs.BLUE),i.set(Xn,hs.BLUE),i.set(_S,ay),i.set(BS,"#fafafa"),i.set(GS,"#ddd"),i.set(zS,"#000"),i.set(HS,"#181d1f"),i.set(LD,"#e35c5c"),i.set(TD,"#e35c5c"),i.set(VS,"#fafafa"),i.set(WS,"#ddd"),i.set(jS,"#000"),i.set(Rm,"top"),i.set(oa,!1);const s=this.getDefaultColors();return i.set(DS,((n=this.palette.up)==null?void 0:n.stroke)??s.up.stroke),i.set(IS,((r=this.palette.up)==null?void 0:r.fill)??s.up.fill),i.set(ES,((o=this.palette.down)==null?void 0:o.stroke)??s.down.stroke),i.set(LS,((a=this.palette.down)==null?void 0:a.fill)??s.down.fill),i.set(_p,((l=this.palette.neutral)==null?void 0:l.stroke)??s.neutral.stroke),i.set(TS,((c=this.palette.neutral)==null?void 0:c.fill)??s.neutral.fill),i.set(bD,((p=this.palette.altUp)==null?void 0:p.stroke)??s.up.stroke),i.set(RD,((g=this.palette.altUp)==null?void 0:g.fill)??s.up.fill),i.set(MD,((f=this.palette.altDown)==null?void 0:f.stroke)??s.down.stroke),i.set(DD,((y=this.palette.altDown)==null?void 0:y.fill)??s.down.fill),i.set(ED,((C=this.palette.altNeutral)==null?void 0:C.fill)??s.altNeutral.fill),i.set(AS,((x=this.palette.altNeutral)==null?void 0:x.stroke)??s.altNeutral.stroke),i}};Or.cartesianAxisDefault={number:Or.getAxisDefaults({line:{enabled:!1}}),log:Or.getAxisDefaults({base:10,line:{enabled:!1},interval:{minSpacing:NaN}}),category:Or.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:oa},crosshair:{enabled:!1}}),"grouped-category":Or.getAxisDefaults({tick:{enabled:!0,stroke:Mm},label:{spacing:10,rotation:270},paddingInner:.4,groupPaddingInner:.2,crosshair:{enabled:!1}}),time:Or.getAxisDefaults({gridLine:{enabled:oa}}),"ordinal-time":Or.getAxisDefaults({groupPaddingInner:0,label:{autoRotate:!1},gridLine:{enabled:oa}}),"angle-category":Or.getAxisDefaults({label:{spacing:5},gridLine:{enabled:oa}}),"angle-number":Or.getAxisDefaults({label:{spacing:5},gridLine:{enabled:oa}}),"radius-category":Or.getAxisDefaults({line:{enabled:!1}}),"radius-number":Or.getAxisDefaults({line:{enabled:!1}})};var Gl=Or,ly="#192232",an={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},Bu={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},Hp=class extends Gl{getDefaultColors(){return{fills:an,strokes:Bu,up:{fill:an.GREEN,stroke:Bu.GREEN},down:{fill:an.RED,stroke:Bu.RED},neutral:{fill:an.GRAY,stroke:Bu.GRAY},altUp:{fill:an.BLUE,stroke:Bu.BLUE},altDown:{fill:an.ORANGE,stroke:Bu.ORANGE},altNeutral:{fill:an.GRAY,stroke:Bu.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set(sp,!0),e.set(PS,ly),e.set(RS,"#4b525d"),e.set(ds,"#fff"),e.set(Uc,"#7d91a0"),e.set(qc,"#545a6e"),e.set(np,"#fff"),e.set(Mm,"#7f8389"),e.set($n,[an.ORANGE,an.YELLOW,an.GREEN]),e.set(eo,[an.GREEN,an.YELLOW,an.RED]),e.set(Ea,["#5090dc","#4882c6","#4073b0","#38659a","#305684","#28486e","#203a58","#182b42"]),e.set(kS,["#192834","#253746","#324859","#3f596c","#4d6a80"]),e.set(NS,["#192834","#3b5164","#496275","#577287","#668399"]),e.set(Wf,ly),e.set(MS,"white"),e.set(cu,ly),e.set(Zn,an.BLUE),e.set(OS,"#fff"),e.set(Xn,an.BLUE),e.set(_S,ly),e.set(BS,"#28313e"),e.set(GS,"#4b525d"),e.set(zS,"#fff"),e.set(HS,"#fff"),e.set(VS,"#28313e"),e.set(WS,"#4b525d"),e.set(jS,"#fff"),e}constructor(e){super(e)}},Fr={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},Gu={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},bte=class extends Hp{getDefaultColors(){return{fills:{...Fr},strokes:{...Gu},up:{fill:Fr.GREEN,stroke:Gu.GREEN},down:{fill:Fr.RED,stroke:Gu.RED},neutral:{fill:Fr.BLUE,stroke:Gu.BLUE},altUp:{fill:Fr.GREEN,stroke:Gu.GREEN},altDown:{fill:Fr.RED,stroke:Gu.RED},altNeutral:{fill:Fr.GRAY,stroke:Gu.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set($n,[Fr.GREEN,Fr.BLUE,Fr.RED]),e.set(Zn,Fr.BLUE),e.set(Xn,Fr.BLUE),e.set(qc,"#343A4E"),e.set(al,0),e.set(kc,"overlay"),e.set(Nc,"left"),e.set(Rm,"bottom"),e.set(oa,!0),e}},kr={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#A9A9A9"},zu={GREEN:"#089981",RED:"#F23645",BLUE:"#5090dc",GRAY:"#909090"},Mte=class extends Gl{getDefaultColors(){return{fills:{...kr},strokes:{...zu},up:{fill:kr.GREEN,stroke:zu.GREEN},down:{fill:kr.RED,stroke:zu.RED},neutral:{fill:kr.BLUE,stroke:zu.BLUE},altUp:{fill:kr.GREEN,stroke:zu.GREEN},altDown:{fill:kr.RED,stroke:zu.RED},altNeutral:{fill:kr.GRAY,stroke:zu.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set($n,[kr.GREEN,kr.BLUE,kr.RED]),e.set(Zn,kr.BLUE),e.set(Xn,kr.BLUE),e.set(qc,"#F2F3F3"),e.set(al,0),e.set(kc,"overlay"),e.set(Nc,"left"),e.set(Rm,"bottom"),e.set(oa,!0),e}},ln={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Hu={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},Rte=class extends Hp{getDefaultColors(){return{fills:ln,strokes:Hu,up:{fill:ln.GREEN,stroke:Hu.GREEN},down:{fill:ln.RED,stroke:Hu.RED},neutral:{fill:ln.GRAY,stroke:Hu.GRAY},altUp:{fill:ln.BLUE,stroke:Hu.BLUE},altDown:{fill:ln.RED,stroke:Hu.RED},altNeutral:{fill:ln.GRAY,stroke:Hu.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set($n,[ln.ORANGE,ln.YELLOW,ln.GREEN]),e.set(Ea,["#2196f3","#208FEC","#1E88E5","#1C7FDC","#1976d2","#176EC9","#1565c0"]),e.set(eo,[ln.GREEN,ln.YELLOW,ln.RED]),e.set(Zn,ln.BLUE),e.set(Xn,ln.BLUE),e}},cn={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},Vu={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},Dte=class extends Gl{getDefaultColors(){return{fills:cn,strokes:Vu,up:{fill:cn.GREEN,stroke:Vu.GREEN},down:{fill:cn.RED,stroke:Vu.RED},neutral:{fill:cn.GRAY,stroke:Vu.GRAY},altUp:{fill:cn.BLUE,stroke:Vu.BLUE},altDown:{fill:cn.RED,stroke:Vu.RED},altNeutral:{fill:cn.GRAY,stroke:Vu.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set($n,[cn.ORANGE,cn.YELLOW,cn.GREEN]),e.set(Ea,["#2196f3","#329EF4","#42a5f5","#53ADF6","#64b5f6","#7AC0F8","#90caf9"]),e.set(eo,[cn.GREEN,cn.YELLOW,cn.RED]),e.set(Zn,cn.BLUE),e.set(Xn,cn.BLUE),e}},Xi={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},Wu={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff",GRAY:"#eeeeee"},Ete=class extends Hp{getDefaultColors(){return{fills:Xi,strokes:Wu,up:{fill:Xi.GREEN,stroke:Wu.GREEN},down:{fill:Xi.RED,stroke:Wu.RED},neutral:{fill:Xi.GRAY,stroke:Wu.GRAY},altUp:{fill:Xi.BLUE,stroke:Wu.BLUE},altDown:{fill:Xi.RED,stroke:Wu.RED},altNeutral:{fill:Xi.GRAY,stroke:Wu.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set($n,[Xi.BLUE,Xi.RED]),e.set(Ea,[Xi.BLUE,Xi.PURPLE,Xi.MAGENTA,Xi.PINK,Xi.RED,Xi.ORANGE,Xi.YELLOW,Xi.GREEN]),e.set(eo,[Xi.BLUE,Xi.RED]),e.set(Zn,Xi.BLUE),e.set(Xn,Xi.BLUE),e}},Qi={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4",GRAY:"#bbbbbb"},ju={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb",GRAY:"#888888"},Ite=class extends Gl{getDefaultColors(){return{fills:Qi,strokes:ju,up:{fill:Qi.GREEN,stroke:ju.GREEN},down:{fill:Qi.RED,stroke:ju.RED},neutral:{fill:Qi.GRAY,stroke:ju.GRAY},altUp:{fill:Qi.BLUE,stroke:ju.BLUE},altDown:{fill:Qi.RED,stroke:ju.RED},altNeutral:{fill:Qi.GRAY,stroke:ju.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set($n,[Qi.BLUE,Qi.RED]),e.set(Ea,[Qi.BLUE,Qi.PURPLE,Qi.MAGENTA,Qi.PINK,Qi.RED,Qi.ORANGE,Qi.YELLOW,Qi.GREEN]),e.set(eo,[Qi.BLUE,Qi.RED]),e.set(Zn,Qi.BLUE),e.set(Xn,Qi.BLUE),e}},zs={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},Rc={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},Lte=class extends Hp{getDefaultColors(){return{fills:{...zs,RED:zs.ORANGE},strokes:{...Rc,RED:Rc.ORANGE},up:{fill:zs.GREEN,stroke:Rc.GREEN},down:{fill:zs.ORANGE,stroke:Rc.ORANGE},neutral:{fill:zs.GRAY,stroke:Rc.GRAY},altUp:{fill:zs.BLUE,stroke:Rc.BLUE},altDown:{fill:zs.ORANGE,stroke:Rc.ORANGE},altNeutral:{fill:zs.GRAY,stroke:Rc.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set($n,[zs.ORANGE,zs.YELLOW,zs.GREEN]),e.set(eo,[zs.GREEN,zs.YELLOW,zs.ORANGE]),e.set(Zn,zs.BLUE),e.set(Xn,zs.BLUE),e}},un={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},il={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},Tte=class extends Gl{getDefaultColors(){return{fills:{...un,RED:un.ORANGE},strokes:{...il,RED:il.ORANGE},up:{fill:un.GREEN,stroke:il.GREEN},down:{fill:un.ORANGE,stroke:il.ORANGE},neutral:{fill:il.GRAY,stroke:il.GRAY},altUp:{fill:un.BLUE,stroke:il.BLUE},altDown:{fill:un.ORANGE,stroke:il.ORANGE},altNeutral:{fill:un.GRAY,stroke:il.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set($n,[un.ORANGE,un.YELLOW,un.GREEN]),e.set(eo,[un.GREEN,un.YELLOW,un.ORANGE]),e.set(Zn,un.BLUE),e.set(Xn,un.BLUE),e}},hn={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Uu={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#fff653",YELLOW:"#c18aff",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},Ate=class extends Hp{getDefaultColors(){return{fills:hn,strokes:Uu,up:{fill:hn.GREEN,stroke:Uu.GREEN},down:{fill:hn.RED,stroke:Uu.RED},neutral:{fill:hn.GRAY,stroke:Uu.GRAY},altUp:{fill:hn.BLUE,stroke:Uu.BLUE},altDown:{fill:hn.ORANGE,stroke:Uu.ORANGE},altNeutral:{fill:hn.GRAY,stroke:Uu.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set($n,[hn.ORANGE,hn.YELLOW,hn.GREEN]),e.set(Ea,["#0083ff","#0076e6","#0069cc","#005cb3","#004f99","#004280","#003466","#00274c"]),e.set(eo,[hn.GREEN,hn.YELLOW,hn.RED]),e.set(Zn,hn.BLUE),e.set(Xn,hn.BLUE),e}},dn={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},Ku={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},Pte=class extends Gl{getDefaultColors(){return{fills:dn,strokes:Ku,up:{fill:dn.GREEN,stroke:Ku.GREEN},down:{fill:dn.RED,stroke:Ku.RED},neutral:{fill:dn.GRAY,stroke:Ku.GRAY},altUp:{fill:dn.BLUE,stroke:Ku.BLUE},altDown:{fill:dn.ORANGE,stroke:Ku.ORANGE},altNeutral:{fill:dn.GRAY,stroke:Ku.GRAY}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.set($n,[dn.ORANGE,dn.YELLOW,dn.GREEN]),e.set(Ea,["#0083ff","#1a8fff","#339cff","#4da8ff","#66b5ff","#80c1ff","#99cdff","#b3daff"]),e.set(eo,[dn.GREEN,dn.YELLOW,dn.RED]),e.set(Zn,dn.BLUE),e.set(Xn,dn.BLUE),e}},op=pn(()=>new Gl),Fte=pn(()=>new Hp),dE={"ag-default-dark":Fte,"ag-sheets-dark":pn(()=>new Lte),"ag-polychroma-dark":pn(()=>new Ete),"ag-vivid-dark":pn(()=>new Ate),"ag-material-dark":pn(()=>new Rte),"ag-financial-dark":pn(()=>new bte),null:op,undefined:op,"ag-default":op,"ag-sheets":pn(()=>new Tte),"ag-polychroma":pn(()=>new Ite),"ag-vivid":pn(()=>new Pte),"ag-material":pn(()=>new Dte),"ag-financial":pn(()=>new Mte)},SC=pn(kte);function kte(e){if(e instanceof Gl)return e;if(e==null||typeof e=="string"){const t=dE[e];return t?t():(_e.warnOnce(`the theme [${e}] is invalid, using [ag-default] instead.`),op())}if(vte(e,Ote,"theme")){const t=Nte(e),i=t.baseTheme?SC(t.baseTheme):op();return new i.constructor(t)}return op()}function Nte(e){let t=e,i;const s=[];for(;typeof t=="object";)i??(i=t.palette),t.overrides&&s.push(t.overrides),t=t.baseTheme;return{baseTheme:t,overrides:Et(...s),palette:i}}var Ote={baseTheme:yte(tl,$A),overrides:$A,palette:{fills:ZA(tl),strokes:ZA(tl),up:{fill:tl,stroke:tl},down:{fill:tl,stroke:tl},neutral:{fill:tl,stroke:tl}}},_te=new Set(["map-shape-background","map-line-background"]),pE=class ia{constructor(t,i,s,n,r,o=!1){this.debug=ci.create(!0,"opts"),this.optionMetadata=n??{},this.processedOverrides=i??{};let a=null;if(t instanceof ia){if(a=t,this.specialOverrides=a.specialOverrides,!r)throw new Error("AG Charts - internal error: deltaOptions must be supplied.");this.userOptions=Et(r,Us(a.userOptions,ia.OPTIONS_CLONE_OPTS))}else this.userOptions=t,this.specialOverrides=this.specialOverridesDefaults({...s});o&&this.removeLeftoverSymbols(this.userOptions);let l,c,p,g;!o&&r!=null&&ia.isFastPathDelta(r)&&a!=null?{activeTheme:l,processedOptions:c,defaultAxes:p,fastDelta:g}=this.fastSetup(r,a):{activeTheme:l,processedOptions:c,defaultAxes:p}=this.slowSetup(i,r,o),this.activeTheme=l,this.processedOptions=c,this.defaultAxes=p,this.fastDelta=g}static isFastPathDelta(t){for(const i of Object.keys(t))if(!this.FAST_PATH_OPTIONS.has(i))return!1;return!0}fastSetup(t,i){const{activeTheme:s,defaultAxes:n,processedOptions:r}=i,{presetType:o}=this.optionMetadata,a=o?gte[o]:void 0;o!=null&&t.data!=null&&a!=null&&(t=Et(a(t.data),t)),this.fastSeriesSetup(t,r);const l=Et(t,r);return{activeTheme:s,defaultAxes:n,processedOptions:l,fastDelta:t}}fastSeriesSetup(t,i){var s;t.series&&((s=t.series)!=null&&s.every((n,r)=>{var o;return BO(n,((o=i.series)==null?void 0:o[r])??{})})?delete t.series:t.series=t.series.map((n,r)=>{var o;return Et(n,((o=i.series)==null?void 0:o[r])??{})}))}slowSetup(t,i,s=!1){var M;let n=Us(this.userOptions,ia.OPTIONS_CLONE_OPTS);i&&(n=Et(i,n),s&&this.removeLeftoverSymbols(n));const{presetType:r}=this.optionMetadata;if(r!=null){const b=pte[r],R=this.userOptions,I=this.userOptions.type,P=I!=null?SC(this.userOptions.theme).presets[I]:void 0;this.debug(">>> AgCharts.createOrUpdate() - applying preset",R),n=(b==null?void 0:b(R,P,()=>this.activeTheme))??n}gn.isEnterprise||KA(n);const o=SC(n.theme);this.sanityCheck(n),this.removeDisabledOptions(n);const a=this.getDefaultAxes(n),l=this.optionsType(n),{axes:c={},annotations:p={},series:g,...f}=this.getSeriesThemeConfig(l,o),[y,C]=this.splitAnnotationsOptions(p);let x=Et(t,n,y,f,a);return this.processAxesOptions(x,c),this.processSeriesOptions(x,o),this.processMiniChartSeriesOptions(x,o),this.annotationThemes=C,x=Us(x,ia.OPTIONS_CLONE_OPTS),(zf(x)||lC(x)||b7(x))&&((M=x.legend)==null?void 0:M.enabled)==null&&(x.legend??(x.legend={}),x.legend.enabled=x.series.length>1),this.enableConfiguredOptions(x,this.userOptions),o.templateTheme(x,!1),this.removeDisabledOptions(n),fte(x),gn.isEnterprise||KA(x,!0),this.debug("AgCharts.createOrUpdate() - processed options",x),{activeTheme:o,processedOptions:x,defaultAxes:a}}diffOptions(t){return this===t?{}:t==null?this.processedOptions:this.fastDelta??ga(t.processedOptions,this.processedOptions)}getSeriesThemeConfig(t,i){return(i==null?void 0:i.config[t])??{}}getDefaultAxes(t){var n;const i=this.optionsType(t),s=((n=t.series)==null?void 0:n.find(r=>(r.type??"line")===i))??{};return lr.cloneDefaultAxes(i,s)}optionsType(t){var i,s;return((s=(i=t.series)==null?void 0:i[0])==null?void 0:s.type)??"line"}sanityCheck(t){this.axesTypeIntegrity(t),this.seriesTypeIntegrity(t),this.soloSeriesIntegrity(t)}splitAnnotationsOptions(t){const{axesButtons:i=null,enabled:s=null,optionsToolbar:n=null,toolbar:r=null,...o}=t;return i==null&&s==null&&n==null&&r==null?[{},o]:[{annotations:{axesButtons:i,enabled:s,optionsToolbar:n,toolbar:r}},o]}processAxesOptions(t,i){var s;"axes"in t&&(t.axes=(s=t.axes)==null?void 0:s.map(n=>{var y,C,x;const{crossLines:r,...o}=Et((y=i[n.type])==null?void 0:y[n.position],i[n.type]);n.crossLines&&(n.crossLines=eC(n.crossLines,r));const a=(C=o.gridLine)==null?void 0:C.style;(x=n.gridLine)!=null&&x.style&&(a!=null&&a.length)&&(n.gridLine.style=n.gridLine.style.map((M,b)=>M.stroke!=null||M.lineDash!=null?Et(M,a.at(b%a.length)):M));const{top:l,right:c,bottom:p,left:g,...f}=Et(n,o);return f}))}processSeriesOptions(t,i){var a,l;const s=this.getTooltipPositionDefaults(t),n=xn(t.theme)?zM((a=t.theme)==null?void 0:a.palette):"inbuilt",r={colourIndex:0,userPalette:n},o=(l=t.series)==null?void 0:l.map(c=>{c.type??(c.type=this.getDefaultSeriesType(t));const{innerLabels:p,...g}=this.getSeriesThemeConfig(c.type,i).series??{},f=_te.has(c.type)?{colourIndex:0,userPalette:n}:r,y=this.getSeriesPalette(c.type,f,i),C=this.getTooltipRangeDefaults(t,c.type),x=Et(this.getSeriesGroupingOptions(c),c,s,C,g,y,{visible:!0});return x.innerLabels&&(x.innerLabels=eC(x.innerLabels,p)),x});t.series=this.setSeriesGroupingOptions(o??[])}processMiniChartSeriesOptions(t,i){var r,o;let s=(o=(r=t.navigator)==null?void 0:r.miniChart)==null?void 0:o.series;if(s==null)return;const n={colourIndex:0,userPalette:xn(t.theme)?zM(t.theme.palette):"inbuilt"};s=s.map(a=>{a.type??(a.type="line");const{innerLabels:l,...c}=this.getSeriesThemeConfig(a.type,i).series??{};return Et(this.getSeriesGroupingOptions(a),a,c,this.getSeriesPalette(a.type,n,i))}),t.navigator.miniChart.series=this.setSeriesGroupingOptions(s)}getSeriesPalette(t,i,s){const n=lr.getPaletteFactory(t),{colourIndex:r,userPalette:o}=i,{fills:a=[],strokes:l=[]}=s.palette;return n==null?void 0:n({userPalette:o,colorsCount:Math.max(a.length,l.length),themeTemplateParameters:s.getTemplateParameters(),palette:s.palette,takeColors(c){return i.colourIndex+=c,{fills:vM(a,c,r),strokes:vM(l,c,r)}}})}getSeriesGroupingOptions(t){const i=lr.isGroupable(t.type),s=lr.isStackable(t.type),n=lr.isStackedByDefault(t.type);t.grouped&&!i&&_e.warnOnce(`unsupported grouping of series type "${t.type}".`),(t.stacked||t.stackGroup)&&!s&&_e.warnOnce(`unsupported stacking of series type "${t.type}".`);let{grouped:r,stacked:o}=t;return o??(o=(n||t.stackGroup!=null)&&!(i&&r)),r??(r=!0),{stacked:s&&o,grouped:i&&r&&!(s&&o)}}setSeriesGroupingOptions(t){const i=this.getSeriesGrouping(t);this.debug("setSeriesGroupingOptions() - series grouping: ",i);const s={},n=i.reduce((r,o)=>{var a;return o.groupType==="default"||(r[a=o.seriesType]??(r[a]=0),r[o.seriesType]+=o.groupType==="stack"?1:o.series.length),r},{});return i.flatMap(r=>{var o;switch(s[o=r.seriesType]??(s[o]=0),r.groupType){case"stack":{const a=s[r.seriesType]++;return r.series.map((l,c)=>Object.assign(l,{seriesGrouping:{groupId:r.groupId,groupIndex:a,groupCount:n[r.seriesType],stackIndex:c,stackCount:r.series.length}}))}case"group":return r.series.map(a=>Object.assign(a,{seriesGrouping:{groupId:r.groupId,groupIndex:s[r.seriesType]++,groupCount:n[r.seriesType],stackIndex:0,stackCount:0}}))}return r.series}).map(({stacked:r,grouped:o,...a})=>a)}getSeriesGroupId(t){return[t.type,t.xKey,t.stacked?t.stackGroup??"stacked":"grouped"].filter(Boolean).join("-")}getSeriesGrouping(t){const i=new Map;return t.reduce((s,n)=>{const r=n.type;if(!n.stacked&&!n.grouped)s.push({groupType:"default",seriesType:r,series:[n],groupId:"__default__"});else{const o=this.getSeriesGroupId(n);if(!i.has(o)){const l={groupType:n.stacked?"stack":"group",seriesType:r,series:[],groupId:o};i.set(o,l),s.push(l)}i.get(o).series.push(n)}return s},[])}getDefaultSeriesType(t){if(zf(t))return"line";if(pS(t))return"pie";if(eD(t))return"treemap";if(tD(t))return"map-shape";if(iD(t))return"sankey";if(lC(t))return"pyramid";if(gS(t))return"radial-gauge";throw new Error("Invalid chart options type detected.")}getTooltipPositionDefaults(t){var a;const i=(a=t.tooltip)==null?void 0:a.position;if(!bn(i))return;const{type:s,xOffset:n,yOffset:r}=i,o={};return Vn(s)&&FN(CN,s)&&(o.type=s),Kt(n)&&(o.xOffset=n),Kt(r)&&(o.yOffset=r),{tooltip:{position:o}}}getTooltipRangeDefaults(t,i){var s,n;return{tooltip:{range:((s=t.tooltip)==null?void 0:s.range)??((n=lr.getTooltipDefauls(i))==null?void 0:n.range)}}}axesTypeIntegrity(t){if("axes"in t&&t.axes){const i=t.axes;for(const{type:s}of i)if(!R7(s)){delete t.axes;const n=ml.publicKeys().join(", ");_e.warnOnce(`unknown axis type: ${s}; expected one of: ${n}`)}}}seriesTypeIntegrity(t){var i;t.series=(i=t.series)==null?void 0:i.filter(({type:s})=>{if(s==null||M7(s)||n7(s))return!0;_e.warnOnce(`unknown series type: ${JSON.stringify(s)}; expected one of: ${V_.seriesTypes.join(", ")}`)})}soloSeriesIntegrity(t){const i=t.series;if(i&&i.length>1&&i.some(s=>lr.isSolo(s.type))){const s=this.optionsType(t);if(lr.isSolo(s))_e.warn(`series[0] of type '${s}' is incompatible with other series types. Only processing series[0]`),t.series=i.slice(0,1);else{const{solo:n,nonSolo:r}=YC(i,a=>lr.isSolo(a.type)?"solo":"nonSolo"),o=uR(n.map(a=>a.type)).join(", ");_e.warn(`Unable to mix these series types with the lead series type: ${o}`),t.series=r}}}static enableConfiguredJsonOptions(t,i){i&&"enabled"in i&&!i._enabledFromTheme&&t.enabled==null&&(i.enabled=!0)}static cleanupEnabledFromThemeJsonOptions(t){t._enabledFromTheme!=null&&delete t._enabledFromTheme}enableConfiguredOptions(t,i){cl(i,ia.enableConfiguredJsonOptions,new Set(["data","theme"]),t),cl(t,ia.cleanupEnabledFromThemeJsonOptions,new Set(["data","theme"]))}static removeDisabledOptionJson(t){"enabled"in t&&t.enabled===!1&&Object.keys(t).forEach(i=>{i!=="enabled"&&delete t[i]})}removeDisabledOptions(t){cl(t,ia.removeDisabledOptionJson,new Set(["data","theme"]))}static removeLeftoverSymbolsJson(t){if(!(!t||!xn(t)))for(const[i,s]of Object.entries(t))kN(s)&&delete t[i]}removeLeftoverSymbols(t){cl(t,ia.removeLeftoverSymbolsJson,new Set(["data"]))}specialOverridesDefaults(t){if(t.window!=null?DO(t.window):typeof window<"u"?t.window=window:typeof global<"u"&&(t.window=global.window),t.document!=null?RO(t.document):typeof document<"u"?t.document=document:typeof global<"u"&&(t.document=global.document),t.window==null)throw new Error("AG Charts - unable to resolve global window");if(t.document==null)throw new Error("AG Charts - unable to resolve global document");return t}};pE.OPTIONS_CLONE_OPTS=new Set(["data","container"]);pE.FAST_PATH_OPTIONS=new Set(["data","width","height"]);var LB=pE,Bte=100,gE=class qu{constructor(t,i,s,n,r,o=Bte){this.name=t,this.buildItem=i,this.releaseItem=s,this.destroyItem=n,this.maxPoolSize=r,this.cleanupTimeMs=o,this.freePool=[],this.busyPool=new Set}static getPool(t,i,s,n,r){return this.pools.has(t)||this.pools.set(t,new qu(t,i,s,n,r)),this.pools.get(t)}isFull(){return this.freePool.length+this.busyPool.size>=this.maxPoolSize}obtain(t){if(this.freePool.length===0&&this.isFull())throw new Error("AG Charts - pool exhausted");let i=this.freePool.pop();return i==null?(i=this.buildItem(t),qu.debug(`Pool[name=${this.name}]: Created instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i)):qu.debug(`Pool[name=${this.name}]: Re-used instance (${this.freePool.length} / ${this.busyPool.size+1} / ${this.maxPoolSize})`,i),this.busyPool.add(i),{item:i,release:()=>this.release(i)}}release(t){if(!this.busyPool.has(t))throw new Error("AG Charts - cannot free item from pool which is not tracked as busy.");qu.debug(`Pool[name=${this.name}]: Releasing instance (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t),this.releaseItem(t),this.busyPool.delete(t),this.freePool.push(t),qu.debug(`Pool[name=${this.name}]: Returned instance to free pool (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`,t),this.cleanPoolTimer&&clearTimeout(this.cleanPoolTimer),this.cleanPoolTimer=setTimeout(()=>{this.cleanPool()},this.cleanupTimeMs)}cleanPool(){const t=this.freePool.splice(0);for(const i of t)this.destroyItem(i);qu.debug(`Pool[name=${this.name}]: Cleaned pool of ${t.length} items (${this.freePool.length} / ${this.busyPool.size} / ${this.maxPoolSize})`)}destroy(){this.cleanPool();for(const t of this.busyPool.values())this.destroyItem(t);this.busyPool.clear()}};gE.pools=new Map;gE.debug=ci.create(!0,"pool");var Gte=gE,cy=ci.create(!0,"opts");function QA(e){if(zf(e))return"cartesian";if(pS(e))return"polar";if(eD(e))return"hierarchy";if(tD(e))return"topology";if(iD(e))return"flow-proportion";if(lC(e))return"standalone";if(gS(e))return"gauge";throw new Error(`AG Chart - unknown type of chart for options with type: ${e.type}`)}var _c=class{static licenseCheck(t){var i,s;this.licenseChecked||(this.licenseManager=(i=gn.licenseManager)==null?void 0:i.call(gn,t),(s=this.licenseManager)==null||s.validateLicense(),this.licenseChecked=!0)}static getLicenseDetails(t){var i;return(i=gn.licenseManager)==null?void 0:i.call(gn,{}).getLicenseDetails(t)}static getInstance(t){return qA.getInstance(t)}static create(t,i){var n,r;this.licenseCheck(t);const s=qA.createOrUpdate({userOptions:t,licenseManager:this.licenseManager,optionsMetadata:i});return(n=this.licenseManager)!=null&&n.isDisplayWatermark()&&this.licenseManager&&((r=gn.injectWatermark)==null||r.call(gn,s.chart.ctx.domManager,this.licenseManager.getWatermarkMessage())),s}static createFinancialChart(t){return this.create(t,{presetType:"price-volume"})}static createGauge(t){return this.create(t,{presetType:"gauge"})}static __createSparkline(t){const{pool:i,...s}=t;return this.create(s,{presetType:"sparkline",pool:i??!0})}};_c.licenseChecked=!1;var Ro=class _r{static getInstance(t){const i=ru.getInstance(t);return i?SA.chartInstances.get(i):void 0}static initialiseModules(){_r.initialised||(bB(),Gee(),_r.initialised=!0)}static createOrUpdate(t){var B,H;let{proxy:i}=t;const{userOptions:s,licenseManager:n,processedOverrides:r=(i==null?void 0:i.chart.chartOptions.processedOverrides)??{},specialOverrides:o=(i==null?void 0:i.chart.chartOptions.specialOverrides)??{},optionsMetadata:a=(i==null?void 0:i.chart.chartOptions.optionMetadata)??{},deltaOptions:l,stripSymbols:c=!1}=t,p=gn.styles!=null?[["ag-charts-enterprise",gn.styles]]:[],{presetType:g}=a;_r.initialiseModules(),cy(">>> AgCharts.createOrUpdate() user options",s);let f=s;_c.optionsMutationFn&&f&&(f=_c.optionsMutationFn(Us(f),g),cy(">>> AgCharts.createOrUpdate() MUTATED user options",f));const{overrideDevicePixelRatio:y,document:C,window:x,styleContainer:M,...b}=f??{},R=(l?i==null?void 0:i.chart.getChartOptions():b)??b,I=new LB(R,r,{...o,document:C,window:x,overrideDevicePixelRatio:y,styleContainer:M},a,l,c);let P=!1,k=i==null?void 0:i.chart,_;return(k==null||QA(I.processedOptions)!==QA(k==null?void 0:k.chartOptions.processedOptions))&&(_=(B=this.getPool(I))==null?void 0:B.obtain(I),_?k=_.item:(P=!0,k=_r.createChartInstance(I,k)),p==null||p.forEach(([V,U])=>{k==null||k.ctx.domManager.addStyles(V,U)})),i==null?(i=new SA(k,_r.callbackApi,n),i.releaseChart=_==null?void 0:_.release):(_||P)&&((H=i.releaseChart)==null||H.call(i),i.chart=k,i.releaseChart=_==null?void 0:_.release),cy.check()&&typeof window<"u"&&(window.agChartInstances??(window.agChartInstances={}),window.agChartInstances[k.id]=k),k.queuedUserOptions.push(I.userOptions),k.queuedChartOptions.push(I),k.requestFactoryUpdate(V=>{V.applyOptions(I);const U=V.queuedUserOptions.indexOf(I.userOptions)+1;V.queuedUserOptions.splice(0,U),V.queuedChartOptions.splice(0,U)}),i}static markRemovedProperties(t){if(typeof t=="object")for(const[i,s]of Object.entries(t))typeof s>"u"&&(_r.markedRemovedProperties=!0,Object.assign(t,{[i]:Symbol("UNSET")}))}static updateUserDelta(t,i){i=Us(i,new Set(["data"])),_r.markedRemovedProperties=!1,cl(i,_r.markRemovedProperties,new Set(["data"])),cy(">>> AgCharts.updateUserDelta() user delta",i),_r.createOrUpdate({proxy:t,deltaOptions:i,stripSymbols:_r.markedRemovedProperties})}static createChartInstance(t,i){const s=i==null?void 0:i.destroy({keepTransferableResources:!0}),n=_r.getChartByOptions(t.processedOptions);return new n(t,s)}static getChartByOptions(t){if(zf(t))return dJ;if(eD(t))return lE;if(pS(t))return cE;if(tD(t))return hE;if(iD(t))return oE;if(lC(t))return uE;if(gS(t))return aE;throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}static getPool(t){if(t.optionMetadata.pool===!0)return Gte.getPool(t.optionMetadata.presetType??"default",this.createChartInstance,this.detachAndClear,this.destroy,1/0)}};Ro.caretaker=new o_(_f);Ro.initialised=!1;Ro.callbackApi={caretaker:Ro.caretaker,create(e,t,i,s){return Ro.createOrUpdate({userOptions:e,processedOverrides:t,specialOverrides:i,optionsMetadata:s})},update(e,t){return Ro.createOrUpdate({userOptions:e,proxy:t})},updateUserDelta(e,t){return Ro.updateUserDelta(e,t)}};Ro.markedRemovedProperties=!1;Ro.detachAndClear=e=>e.detachAndClear();Ro.destroy=e=>e.destroy();var qA=Ro,TB={};ko(TB,{Arc:()=>Bo,BBox:()=>Ue,BandScale:()=>iu,Caption:()=>li,Circle:()=>Vc,Group:()=>lt,Line:()=>fr,LinearScale:()=>$r,Path:()=>Rn,RadialColumnShape:()=>to,Rect:()=>Zs,Scene:()=>hS,Sector:()=>Rs,Shape:()=>Zr,TranslatableGroup:()=>yn,getRadialColumnWidth:()=>AB,toRadians:()=>Ys});var Bo=class extends Rn{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=Math.PI*2,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return nf(Qt(this.startAngle),Qt(this.endAngle))}updatePath(){const e=this.path;e.clear(),e.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),this.type===1?e.closePath():this.type===2&&!this.fullPie&&(e.lineTo(this.centerX,this.centerY),e.closePath())}computeBBox(){return new Ue(this.centerX-this.radius,this.centerY-this.radius,this.radius*2,this.radius*2)}isPointInPath(e,t){const i=this.getBBox();return this.type!==0&&i.containsPoint(e,t)&&this.path.isPointInPath(e,t)}};Bo.className="Arc";Bo.defaultStyles={...Zr.defaultStyles,lineWidth:1,fillStyle:null};A([gt()],Bo.prototype,"centerX",2);A([gt()],Bo.prototype,"centerY",2);A([gt()],Bo.prototype,"radius",2);A([gt()],Bo.prototype,"startAngle",2);A([gt()],Bo.prototype,"endAngle",2);A([gt()],Bo.prototype,"counterClockwise",2);A([gt()],Bo.prototype,"type",2);function Lb(e,t,i){const s=Math.sqrt(e**2+t**2),r=Math.atan2(t,e)+i;return{x:Math.cos(r)*s,y:Math.sin(r)*s}}var to=class extends Rn{constructor(){super(...arguments),this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}set cornerRadius(e){}computeBBox(){const{innerRadius:e,outerRadius:t,columnWidth:i}=this,s=this.getRotation(),n=-i/2,r=i/2,o=-t,a=-e;let l=1/0,c=1/0,p=-1/0,g=-1/0;for(let f=0;f<4;f+=1){const{x:y,y:C}=Lb(f%2===0?n:r,f<2?o:a,s);l=Math.min(y,l),c=Math.min(C,c),p=Math.max(y,p),g=Math.max(C,g)}return new Ue(l,c,p-l,g-c)}getRotation(){const{startAngle:e,endAngle:t}=this,i=ym(e,t);return Qt(e+i/2+Math.PI/2)}updatePath(){const{isBeveled:e}=this;e?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:e,innerRadius:t,outerRadius:i,path:s}=this,n=-e/2,r=e/2,o=-i,a=-t,l=this.getRotation(),c=[[n,a],[n,o],[r,o],[r,a]].map(([p,g])=>Lb(p,g,l));s.clear(!0),s.moveTo(c[0].x,c[0].y),s.lineTo(c[1].x,c[1].y),s.lineTo(c[2].x,c[2].y),s.lineTo(c[3].x,c[3].y),s.closePath()}updateBeveledPath(){const{columnWidth:e,path:t,outerRadius:i,innerRadius:s,axisInnerRadius:n,axisOuterRadius:r,isRadiusAxisReversed:o}=this,a=nf(s,n),l=Math.asin(e/2/s),c=this.getRotation(),p=(H,V)=>Lb(H,V,c),g=(H,V)=>Math.sqrt(H**2+V**2),f=(H,V)=>V>H?0:Math.sqrt(H**2-V**2),y=(H,V,U)=>U?H<V:H>V,C=a&&!isNaN(l)&&l<Math.PI/6;let x=-e/2,M=e/2;const b=-i,R=-s*(C?Math.cos(l):1),I=y(r,g(s,e/2),!o);if(I){const H=f(r,s);x=-H,M=H}t.clear(!0);const P=p(x,R);t.moveTo(P.x,P.y);const k=nf(s,i),_=y(r,g(i,e/2),!o);if(k&&C)t.arc(0,0,s,Qt(-l-Math.PI/2)+c,Qt(l-Math.PI/2)+c,!1);else if(_){const H=-f(r,e/2),V=f(r,i);if(!I){const U=p(x,H);t.lineTo(U.x,U.y)}if(t.arc(0,0,r,Math.atan2(H,x)+c,Math.atan2(b,-V)+c,!1),!nf(V,0)){const U=p(V,b);t.lineTo(U.x,U.y)}t.arc(0,0,r,Math.atan2(b,V)+c,Math.atan2(H,M)+c,!1)}else{const H=p(x,b),V=p(M,b);t.lineTo(H.x,H.y),t.lineTo(V.x,V.y)}const B=p(M,R);if(t.lineTo(B.x,B.y),C)t.arc(0,0,s,Qt(l-Math.PI/2)+c,Qt(-l-Math.PI/2)+c,!0);else{const H=p(x,R);t.lineTo(H.x,H.y)}t.closePath()}};to.className="RadialColumnShape";A([gt()],to.prototype,"isBeveled",2);A([gt()],to.prototype,"columnWidth",2);A([gt()],to.prototype,"startAngle",2);A([gt()],to.prototype,"endAngle",2);A([gt()],to.prototype,"outerRadius",2);A([gt()],to.prototype,"innerRadius",2);A([gt()],to.prototype,"axisInnerRadius",2);A([gt()],to.prototype,"axisOuterRadius",2);A([gt()],to.prototype,"isRadiusAxisReversed",2);function AB(e,t,i,s,n){const r=ym(e,t),o=r*(1-s)/2;if(e+=o,t-=o,r<.001)return 2*i*n;if(r>=2*Math.PI){const y=e+r/2;e=y-Math.PI,t=y+Math.PI}const a=i*Math.cos(e),l=i*Math.sin(e),c=i*Math.cos(t),p=i*Math.sin(t),g=Math.floor(Math.sqrt((a-c)**2+(l-p)**2)),f=2*i*n;return Math.max(1,Math.min(f,g))}var PB={};ko(PB,{ChartTheme:()=>Gl,DEFAULT_ANNOTATION_BACKGROUND_FILL:()=>Xn,DEFAULT_ANNOTATION_COLOR:()=>Zn,DEFAULT_ANNOTATION_HANDLE_FILL:()=>_S,DEFAULT_ANNOTATION_STATISTICS_COLOR:()=>zS,DEFAULT_ANNOTATION_STATISTICS_DIVIDER_STROKE:()=>HS,DEFAULT_ANNOTATION_STATISTICS_DOWN_FILL:()=>LD,DEFAULT_ANNOTATION_STATISTICS_DOWN_STROKE:()=>TD,DEFAULT_ANNOTATION_STATISTICS_FILL:()=>BS,DEFAULT_ANNOTATION_STATISTICS_STROKE:()=>GS,DEFAULT_AXIS_GRID_COLOUR:()=>qc,DEFAULT_AXIS_LINE_COLOUR:()=>ff,DEFAULT_BACKGROUND_COLOUR:()=>Wf,DEFAULT_CAPTION_ALIGNMENT:()=>Nc,DEFAULT_CAPTION_LAYOUT_STYLE:()=>kc,DEFAULT_COLOURS:()=>B1,DEFAULT_CROSS_LINES_COLOUR:()=>np,DEFAULT_DIVERGING_SERIES_COLOR_RANGE:()=>$n,DEFAULT_FIBONACCI_STROKES:()=>ID,DEFAULT_FONT_FAMILY:()=>ki,DEFAULT_FUNNEL_SERIES_COLOR_RANGE:()=>Ea,DEFAULT_GAUGE_SERIES_COLOR_RANGE:()=>eo,DEFAULT_GRIDLINE_ENABLED:()=>oa,DEFAULT_HIERARCHY_FILLS:()=>kS,DEFAULT_HIERARCHY_STROKES:()=>NS,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>cu,DEFAULT_INVERTED_BACKGROUND_COLOUR:()=>MS,DEFAULT_INVERTED_LABEL_COLOUR:()=>xD,DEFAULT_LABEL_COLOUR:()=>ds,DEFAULT_MUTED_LABEL_COLOUR:()=>Uc,DEFAULT_NAVIGATOR_STROKE:()=>RS,DEFAULT_PADDING:()=>al,DEFAULT_POLAR_SERIES_STROKE:()=>PS,DEFAULT_SEPARATION_LINES_COLOUR:()=>Mm,DEFAULT_SHADOW_COLOUR:()=>uu,DEFAULT_SPARKLINE_CROSSHAIR_STROKE:()=>FS,DEFAULT_TEXTBOX_COLOR:()=>jS,DEFAULT_TEXTBOX_FILL:()=>VS,DEFAULT_TEXTBOX_STROKE:()=>WS,DEFAULT_TEXT_ANNOTATION_COLOR:()=>OS,DEFAULT_TOOLBAR_POSITION:()=>Rm,IS_COMMUNITY:()=>SD,IS_DARK_THEME:()=>sp,IS_ENTERPRISE:()=>wD,PALETTE_ALT_DOWN_FILL:()=>DD,PALETTE_ALT_DOWN_STROKE:()=>MD,PALETTE_ALT_NEUTRAL_FILL:()=>ED,PALETTE_ALT_NEUTRAL_STROKE:()=>AS,PALETTE_ALT_UP_FILL:()=>RD,PALETTE_ALT_UP_STROKE:()=>bD,PALETTE_DOWN_FILL:()=>LS,PALETTE_DOWN_STROKE:()=>ES,PALETTE_NEUTRAL_FILL:()=>TS,PALETTE_NEUTRAL_STROKE:()=>_p,PALETTE_UP_FILL:()=>IS,PALETTE_UP_STROKE:()=>DS,getChartTheme:()=>SC,themeNames:()=>zte,themeSymbols:()=>CD,themes:()=>dE});var zte=Object.keys(dE),FB={};ko(FB,{Color:()=>Mo,interpolateColor:()=>EN});_c.create.bind(_c),_c.__createSparkline.bind(_c);var Hte={};ko(Hte,{AND:()=>ba,ARRAY:()=>pm,ARRAY_OF:()=>Dl,AbstractBarSeries:()=>aB,AbstractBarSeriesProperties:()=>jD,ActionOnSet:()=>vr,AnchoredPopover:()=>GB,Animation:()=>GN,AnimationManager:()=>b_,Arc:()=>Bo,ArrowDown:()=>BB,ArrowUp:()=>_B,Axis:()=>NR,AxisInterval:()=>_h,AxisLabel:()=>ys,AxisTick:()=>Mp,AxisTicks:()=>cie,BBox:()=>Ue,BBoxValues:()=>BC,BOOLEAN:()=>nt,BOOLEAN_ARRAY:()=>j8,Background:()=>kp,BackgroundModule:()=>A1,BandScale:()=>iu,BarSeries:()=>US,BarSeriesModule:()=>pB,BaseModuleInstance:()=>oS,BaseProperties:()=>yt,BaseToolbar:()=>bE,ButtonWidget:()=>Sm,COLOR_STRING:()=>Zt,COLOR_STRING_ARRAY:()=>qr,CachedTextMeasurer:()=>FO,CachedTextMeasurerPool:()=>Tl,Caption:()=>li,CartesianAxis:()=>wh,CartesianSeries:()=>ou,CartesianSeriesNodeEvent:()=>dD,CartesianSeriesProperties:()=>Nl,CategoryAxis:()=>Dp,ChangeDetectableProperties:()=>PD,ChartAxisDirection:()=>CR,ChartEventManager:()=>M_,ChartOptions:()=>LB,ChartUpdateType:()=>hf,Circle:()=>Vc,CollapseMode:()=>X1,Color:()=>Mo,ColorScale:()=>Nh,ConicGradient:()=>fie,ContextMenuRegistry:()=>R_,ContinuousScale:()=>hi,Cursor:()=>D_,CursorManager:()=>E_,DATE:()=>gR,DATE_ARRAY:()=>U8,DATE_OR_DATETIME_MS:()=>fR,DEFAULT_CARTESIAN_DIRECTION_KEYS:()=>Gh,DEFAULT_CARTESIAN_DIRECTION_NAMES:()=>zh,DEFAULT_TOOLTIP_CLASS:()=>Ws,DEFAULT_TOOLTIP_DARK_CLASS:()=>o1,DIRECTION:()=>eO,DOMManager:()=>h_,DataController:()=>z_,DataModel:()=>B_,DataModelSeries:()=>uD,DataService:()=>dS,Debug:()=>ci,Default:()=>su,Deprecated:()=>Vte,DeprecatedAndRenamedTo:()=>Wte,Diamond:()=>Q_,DraggablePopover:()=>zB,DropShadow:()=>_o,ExtendedPath2D:()=>Hf,FONT_STYLE:()=>Il,FONT_WEIGHT:()=>Ll,FUNCTION:()=>Mn,FloatingToolbar:()=>Sie,GREATER_THAN:()=>fm,GestureDetector:()=>I_,Gradient:()=>iS,Group:()=>lt,GroupedCategoryAxis:()=>bh,HdpiCanvas:()=>YR,HierarchyNode:()=>Qg,HierarchySeries:()=>aie,HierarchySeriesProperties:()=>hu,HighlightManager:()=>L_,HighlightProperties:()=>hD,HighlightStyle:()=>bm,INTERACTION_RANGE:()=>JC,INTERPOLATION_STEP_POSITION:()=>W1,INTERPOLATION_TYPE:()=>V1,Image:()=>Wh,InteractionManager:()=>$R,InteractionState:()=>GR,InterpolationProperties:()=>Bp,Invalidating:()=>bs,KeyNavManager:()=>T_,LABEL_PLACEMENT:()=>yR,LARGEST_KEY_INTERVAL:()=>x1,LESS_THAN:()=>gm,LINE_CAP:()=>K8,LINE_DASH:()=>El,LINE_JOIN:()=>Y8,LINE_STYLE:()=>$8,Label:()=>vs,LayoutElement:()=>BR,LayoutManager:()=>s_,LegendMarkerLabel:()=>_l,Line:()=>fr,LineSeries:()=>KS,LineSeriesModule:()=>fB,LinearGradient:()=>PO,LinearScale:()=>$r,Listeners:()=>Ma,Logger:()=>_e,LonLatBBox:()=>lie,MARKER_SHAPE:()=>z1,MATCHING_CROSSLINE_TYPE:()=>kR,MAX_SPACING:()=>iO,MIN_SPACING:()=>tO,Marker:()=>Kn,Menu:()=>vie,MercatorScale:()=>BM,ModuleRegistry:()=>JO,Motion:()=>hM,NAN:()=>XC,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>wn,NUMBER:()=>_t,NUMBER_ARRAY:()=>QC,NUMBER_OR_NAN:()=>bp,NativeWidget:()=>Hc,Node:()=>Xc,OBJECT:()=>Ye,OBJECT_ARRAY:()=>mR,OR:()=>Ph,OVERFLOW_STRATEGY:()=>X8,ObserveChanges:()=>Oh,OrdinalTimeScale:()=>xo,PHASE_METADATA:()=>Tf,PHASE_ORDER:()=>Hd,PLACEMENT:()=>Q8,PLAIN_OBJECT:()=>ZN,POINTER_INTERACTION_TYPES:()=>w_,POSITION:()=>vR,POSITION_TOP_COORDINATES:()=>oC,POSITIVE_NUMBER:()=>Ge,PREV_NEXT_KEYS:()=>tp,Padding:()=>nu,ParallelStateMachine:()=>KX,Path:()=>Rn,PointerEvents:()=>MN,PolarAxis:()=>Mh,PolarSeries:()=>$S,PolarZIndexMap:()=>SB,Popover:()=>xE,PropertiesArray:()=>dm,ProxyInteractionService:()=>p_,ProxyOnWrite:()=>jX,ProxyProperty:()=>Ui,ProxyPropertyOnWrite:()=>Ms,QUICK_TRANSITION:()=>tC,RATIO:()=>$t,REAL_NUMBER:()=>XN,RENDER_TO_OFFSCREEN_CANVAS_THRESHOLD:()=>dC,RadialColumnShape:()=>to,Range:()=>No,Rect:()=>Zs,RegionManager:()=>A_,RepeatType:()=>BN,Rotatable:()=>Fh,RotatableGroup:()=>CX,RotatableText:()=>kO,SKIP_JS_BUILTINS:()=>aR,SMALLEST_KEY_INTERVAL:()=>w1,SORT_DOMAIN_GROUPS:()=>b1,STRING:()=>Fe,STRING_ARRAY:()=>qN,Scalable:()=>DR,ScalableGroup:()=>yX,Scene:()=>hS,SceneChangeDetection:()=>Ze,ScenePathChangeDetection:()=>gt,Sector:()=>Rs,SectorBox:()=>vB,Selection:()=>Ji,Series:()=>Lp,SeriesContentZIndexMap:()=>U_,SeriesGroupingChangedEvent:()=>sD,SeriesItemHighlightStyle:()=>kl,SeriesMarker:()=>Qn,SeriesNodeEvent:()=>xm,SeriesNodePickMode:()=>K_,SeriesProperties:()=>yr,SeriesTooltip:()=>Xs,SeriesZIndexMap:()=>j_,Shape:()=>Zr,SimpleTextMeasurer:()=>LR,SliderWidget:()=>KR,Square:()=>mS,StateMachine:()=>Cm,StateMachineProperty:()=>UX,SvgPath:()=>SE,TEXT_ALIGN:()=>JN,TEXT_WRAP:()=>qC,TICK_INTERVAL:()=>jO,Text:()=>gs,TextUtils:()=>Ei,TextWrapper:()=>FR,ThemeConstants:()=>P1,ThemeSymbols:()=>CD,TimeScale:()=>MR,Toolbar:()=>yie,ToolbarButtonProperties:()=>Lm,ToolbarButtonWidget:()=>HB,ToolbarWidget:()=>uS,Tooltip:()=>Da,TooltipManager:()=>aC,TooltipPosition:()=>Tp,Transformable:()=>ji,TransformableText:()=>pp,Translatable:()=>kh,TranslatableGroup:()=>yn,Triangle:()=>df,UNION:()=>pi,UpdateService:()=>F_,VERTICAL_ALIGN:()=>Z8,Validate:()=>O,Vec2:()=>jd,Vec4:()=>IM,WIDGET_HTML_EVENTS:()=>jR,Widget:()=>Pl,WidgetEventUtil:()=>Bf,ZIndexMap:()=>WO,ZoomManager:()=>P_,__FORCE_MODULE_DETECTION:()=>uie,accumulateGroup:()=>M1,accumulateStack:()=>R1,accumulatedValue:()=>f1,accumulativeValueProperty:()=>Vf,addHitTestersToQuadtree:()=>VD,adjustLabelPlacement:()=>dB,angleBetween:()=>ym,angleDiff:()=>DX,animationValidation:()=>Ap,areScalingEqual:()=>rp,area:()=>kM,arraysEqual:()=>zc,backfillPathPointData:()=>fee,buildFormatter:()=>hm,buildResetPathFn:()=>zD,calculateDefaultTimeTickFormat:()=>KN,calculateDerivativeExtrema:()=>AM,calculateDerivativeExtremaXY:()=>$_,calculateLabelChartPadding:()=>HO,calculateLabelTranslation:()=>MM,calculatePlacement:()=>PM,checkCrisp:()=>uB,circularSliceArray:()=>vM,clamp:()=>St,clampArray:()=>cM,clippedRoundRect:()=>Dy,clockwiseAngle:()=>TO,clockwiseAngles:()=>LX,collapsedStartingBarPosition:()=>$f,compareDates:()=>vO,computeBarFocusBounds:()=>KD,computeMarkerFocusBounds:()=>Im,countFractionDigits:()=>VC,createButton:()=>hie,createCheckbox:()=>die,createDatumId:()=>As,createDeprecationWarning:()=>fE,createElement:()=>Xt,createElementId:()=>xX,createElementNS:()=>SM,createIcon:()=>NB,createId:()=>Qr,createSelect:()=>pie,createTextArea:()=>gie,dateToNumber:()=>zn,datesSortOrder:()=>bR,datumKeys:()=>Gf,datumStylerProperties:()=>Wc,debounce:()=>v8,deconstructSelectionsOrNodes:()=>KC,deepClone:()=>Us,deepFreeze:()=>rf,deepMerge:()=>l8,defaultTimeTickFormat:()=>pR,diff:()=>Pp,displacePointFromVector:()=>EX,doOnce:()=>iC,downloadUrl:()=>MO,drawCorner:()=>Xg,easing:()=>hM,enterpriseModule:()=>gn,evaluateBezier:()=>cC,excludesType:()=>NN,extent:()=>Rl,extractDecoratedProperties:()=>TN,findMaxIndex:()=>gO,findMaxValue:()=>fX,findMinIndex:()=>fO,findMinMax:()=>Ks,findMinValue:()=>mO,findQuadtreeMatch:()=>WD,findRangeExtent:()=>Ef,fixNumericExtent:()=>Wn,focusCursorAtEnd:()=>SX,formatNumber:()=>_O,formatPercent:()=>OO,formatValue:()=>Of,fromToMotion:()=>Oi,generateUUID:()=>U6,getAngleRatioRadians:()=>AO,getDatumRefPoint:()=>ZR,getDocument:()=>fs,getElementBBox:()=>EO,getIconClassNames:()=>tS,getLastFocus:()=>WR,getMarker:()=>Xr,getMissCount:()=>XR,getPath:()=>oR,getPathComponents:()=>__,getRadialColumnWidth:()=>AB,getRectConfig:()=>cB,getWindow:()=>Mi,groupAccumulativeValueProperty:()=>jc,groupAverage:()=>g1,groupBy:()=>YC,groupCount:()=>FM,groupStackValueProperty:()=>S1,groupSum:()=>p1,hasNoModifiers:()=>cS,identity:()=>gM,inRange:()=>xN,includes:()=>hR,initMenuKeyNav:()=>l_,initRovingTabIndex:()=>HR,initToolbarKeyNav:()=>GQ,interpolatePoints:()=>mC,isArray:()=>bi,isBetweenAngles:()=>Vr,isBoolean:()=>nR,isButtonClickEvent:()=>VR,isContinuous:()=>sS,isDate:()=>um,isDecoratedObject:()=>jC,isDefined:()=>Gc,isDenseInterval:()=>Ff,isEnumKey:()=>a8,isEnumValue:()=>FN,isFiniteNumber:()=>Kt,isFunction:()=>tu,isHtmlElement:()=>PN,isInputPending:()=>IO,isInteger:()=>bN,isNegative:()=>HC,isNumber:()=>Eo,isNumberEqual:()=>nf,isObject:()=>xn,isObjectLike:()=>o8,isPlainObject:()=>bn,isProperties:()=>da,isRegExp:()=>AN,isScaleValid:()=>Uf,isString:()=>Vn,isSymbol:()=>kN,isValidDate:()=>UC,jsonApply:()=>uf,jsonDiff:()=>ga,jsonPropertyCompare:()=>BO,jsonWalk:()=>cl,keyProperty:()=>Ao,labelDirectionHandling:()=>VO,legendSymbolSvg:()=>r1,lineDistanceSquared:()=>cf,listDecoratedProperties:()=>gh,makeAccessibleClickListener:()=>HQ,mapValues:()=>c8,markerFadeInAnimation:()=>Kf,markerPaletteFactory:()=>AD,markerScaleInAnimation:()=>_D,markerSwipeScaleInAnimation:()=>BD,mergeArrayDefaults:()=>eC,mergeDefaults:()=>Et,midpointStartingBarPosition:()=>xee,minMax:()=>gee,mod:()=>sR,moduleRegistry:()=>ca,motion:()=>xie,nearestSquared:()=>zC,nearestSquaredInContainer:()=>X6,normaliseGroupTo:()=>wS,normalisePropertyTo:()=>fh,normalisedExtentWithMetadata:()=>cR,normalizeAngle180:()=>Nf,normalizeAngle360:()=>Qt,normalizeAngle360Inclusive:()=>LO,objectsEqual:()=>Sh,objectsEqualWith:()=>rR,pairUpSpans:()=>mf,partialAssign:()=>Pc,pathFadeInAnimation:()=>vC,pathFadeOutAnimation:()=>yee,pathMotion:()=>fC,pathSwipeInAnimation:()=>GD,pickByMatchingAngle:()=>iE,pickNode:()=>Wd,plotAreaPathFill:()=>iB,plotInterpolatedAreaSeriesFillSpans:()=>Iy,plotInterpolatedLinePathStroke:()=>Ey,plotLinePathStroke:()=>kD,plotPath:()=>rB,predicateWithMessage:()=>Jt,prepareAreaFillAnimationFns:()=>sB,prepareAreaPathAnimation:()=>nB,prepareAxisAnimationContext:()=>RM,prepareAxisAnimationFunctions:()=>UO,prepareBarAnimationFunctions:()=>Zf,prepareLinePathAnimation:()=>tB,prepareLinePathPropertyAnimation:()=>OD,prepareLinePathStrokeAnimationFns:()=>ND,prepareMarkerAnimation:()=>uee,preparePieSeriesAnimationFunctions:()=>mh,range:()=>eS,rangedValueProperty:()=>gD,renderPartialPath:()=>vee,resetAxisGroupFn:()=>KO,resetAxisLabelSelectionFn:()=>$O,resetAxisLineSelectionFn:()=>ZO,resetAxisSelectionFn:()=>YO,resetBarSelectionsFn:()=>Xf,resetIds:()=>j6,resetLabelFn:()=>Bl,resetMarkerFn:()=>Em,resetMarkerPositionFn:()=>Yf,resetMotion:()=>ss,resetPieSelectionsFn:()=>tE,round:()=>iR,sanitizeHtml:()=>ip,scale:()=>Vs,sectorBox:()=>QD,seriesLabelFadeInAnimation:()=>zt,seriesLabelFadeOutAnimation:()=>Oc,setAttribute:()=>ii,setAttributes:()=>xh,setDocument:()=>RO,setElementBBox:()=>kf,setElementStyle:()=>Lo,setPath:()=>lR,setWindow:()=>DO,shallowClone:()=>TR,singleSeriesPaletteFactory:()=>Dm,solveBezier:()=>uC,sortAndUniqueDates:()=>yO,sortBasedOnArray:()=>zN,splitBezier:()=>hC,splitPairData:()=>oB,staticFromToMotion:()=>wa,stopPageScrolling:()=>c_,stringify:()=>af,sum:()=>mJ,sumValues:()=>SS,swapAxisCondition:()=>G1,throttle:()=>fM,toArray:()=>Af,toDegrees:()=>RX,toRadians:()=>Ys,tooltipContentAriaLabel:()=>a1,trailingAccumulatedValue:()=>m1,trailingAccumulatedValueProperty:()=>CJ,unique:()=>uR,updateClipPath:()=>yC,updateLabelNode:()=>hB,updateRect:()=>lB,validateCrossLineValues:()=>zO,valueProperty:()=>It,visibleRangeIndices:()=>vS,without:()=>uM});function fE(){return(e,t)=>{const i=[`Property [${e}] is deprecated.`,t].filter(Boolean).join(" ");_e.warnOnce(i)}}function Vte(e,t){const i=fE(),s=t==null?void 0:t.default;return wl((n,r,o)=>(o!==s&&i(r.toString(),e),o))}function Wte(e,t){const i=fE();return wl((s,n,r)=>(r!==s[e]&&(i(n.toString(),`Use [${e}] instead.`),lR(s,e,t?t(r):r)),Jy),(s,n)=>(i(n.toString(),`Use [${e}] instead.`),oR(s,e)))}var jd={add:jte,angle:Xte,apply:rie,equal:sie,distance:Yte,distanceSquared:$te,from:nie,gradient:qte,intercept:Jte,intersectAtX:tie,intersectAtY:eie,length:vE,lengthSquared:Kte,multiply:Ute,normalized:Zte,origin:yE,required:oie,rotate:Qte,round:iie,sub:mE};function jte(e,t){return typeof t=="number"?{x:e.x+t,y:e.y+t}:{x:e.x+t.x,y:e.y+t.y}}function mE(e,t){return typeof t=="number"?{x:e.x-t,y:e.y-t}:{x:e.x-t.x,y:e.y-t.y}}function Ute(e,t){return typeof t=="number"?{x:e.x*t,y:e.y*t}:{x:e.x*t.x,y:e.y*t.y}}function vE(e){return Math.sqrt(e.x*e.x+e.y*e.y)}function Kte(e){return e.x*e.x+e.y*e.y}function Yte(e,t){const i=mE(e,t);return Math.sqrt(i.x*i.x+i.y*i.y)}function $te(e,t){const i=mE(e,t);return i.x*i.x+i.y*i.y}function Zte(e){const t=vE(e);return{x:e.x/t,y:e.y/t}}function Xte(e,t=yE()){return Math.atan2(e.y,e.x)-Math.atan2(t.y,t.x)}function Qte(e,t,i=yE()){const s=vE(e);return{x:i.x+s*Math.cos(t),y:i.y+s*Math.sin(t)}}function qte(e,t,i){const s=t.x-e.x;return(i==null?t.y-e.y:i-t.y-(i-e.y))/s}function Jte(e,t,i){return(i==null?e.y:i-e.y)-t*e.x}function eie(e,t,i=0,s){return{x:e===1/0?1/0:(i-t)/e,y:s==null?i:s-i}}function tie(e,t,i=0,s){const n=e===1/0?1/0:e*i+t;return{x:i,y:s==null?n:s-n}}function iie(e){return{x:Math.round(e.x),y:Math.round(e.y)}}function sie(e,t){return e.x===t.x&&e.y===t.y}function nie(e,t){if(typeof e=="number")return{x:e,y:t};if("regionX"in e)return{x:e.regionX,y:e.regionY};if("offsetWidth"in e)return{x:e.offsetWidth,y:e.offsetHeight};if("width"in e)return[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y+e.height}];if("x1"in e)return[{x:e.x1,y:e.y1},{x:e.x2,y:e.y2}];throw new Error(`Values can not be converted into a vector: [${JSON.stringify(e)}] [${t}]`)}function rie(e,t){return e.x=t.x,e.y=t.y,e}function oie(e){return{x:(e==null?void 0:e.x)??0,y:(e==null?void 0:e.y)??0}}function yE(){return{x:0,y:0}}var kB=class Ly{constructor(t,i,s,n,r,o,a,l,c,p){this.series=t,this.index=i,this.rootIndex=s,this.datum=n,this.sizeValue=r,this.colorValue=o,this.sumSize=a,this.depth=l,this.parent=c,this.children=p,this.midPoint={x:0,y:0}}contains(t){let i=t;for(;i!=null&&i.index>=this.index;){if(i===this)return!0;i=i.parent}return!1}walk(t,i=Ly.Walk.PreOrder){i===Ly.Walk.PreOrder&&t(this),this.children.forEach(s=>{s.walk(t,i)}),i===Ly.Walk.PostOrder&&t(this)}*[Symbol.iterator](){yield this;for(const t of this.children)yield*t}};kB.Walk={PreOrder:0,PostOrder:1};var Qg=kB,aie=class extends Lp{constructor(e){super({moduleCtx:e,pickModes:[1,0]}),this.rootNode=new Qg(this,0,0,void 0,0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.colorScale=new Nh,this.focusPath=[],this.animationState=new Cm("empty",{empty:{update:{target:"ready",action:t=>this.animateEmptyUpdateReady(t)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:t=>this.animateReadyHighlight(t),resize:t=>this.animateReadyResize(t),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:t=>this.animateWaitingUpdateReady(t)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:t=>this.animateClearingUpdateEmpty(t)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(e){e==="initial"?this.animationState.transition("reset"):e==="ready"&&this.animationState.transition("skip")}processData(){const{childrenKey:e,sizeKey:t,colorKey:i,colorRange:s}=this.properties;let n=0;const r=()=>(n+=1,n);let o=0,a=1/0,l=-1/0;const c=(y,C,x)=>{const M=r(),b=x.depth!=null?x.depth+1:0,R=e!=null?y[e]:void 0,I=R==null||R.length===0;let P=t!=null?y[t]:void 0;Number.isFinite(P)?P=Math.max(P,0):P=I?1:0;const k=P;o=Math.max(o,b);const _=i!=null?y[i]:void 0;return typeof _=="number"&&(a=Math.min(a,_),l=Math.max(l,_)),p(new Qg(this,M,C??0,y,P,_,k,b,x,[]),C,R)},p=(y,C,x)=>(x==null||x.forEach((M,b)=>{const R=c(M,C??b,y);y.children.push(R),y.sumSize+=R.sumSize}),y),g=p(new Qg(this,0,0,void 0,0,void 0,0,void 0,void 0,[]),void 0,this.data),f=[a,l];this.colorScale.domain=a<l?[a,l]:[0,1],this.colorScale.range=s??["black"],this.colorScale.update(),this.rootNode=g,this.maxDepth=o,this.colorDomain=f,this.focusPath=[{nodeDatum:this.rootNode,childIndex:0}]}update({seriesRect:e}){this.updateSelections(),this.updateNodes();const t=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",t),this.animationState.transition("update",t)}resetAllAnimation(e){var i;const t=(i=this.animationResetFns)==null?void 0:i.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),t!=null&&ss(e.datumSelections,t)}animateEmptyUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateWaitingUpdateReady(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}animateReadyHighlight(e){var i;const t=(i=this.animationResetFns)==null?void 0:i.datum;t!=null&&ss([e],t)}animateReadyResize(e){this.resetAllAnimation(e)}animateClearingUpdateEmpty(e){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(e)}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getSeriesDomain(){return[NaN,NaN]}getSeriesRange(e,t){return[NaN,NaN]}getLegendData(e){const{colorKey:t,colorName:i,colorRange:s}=this.properties,{id:n,ctx:{legendManager:r},visible:o}=this;return e==="gradient"&&t!=null&&s!=null?[{legendType:"gradient",enabled:o&&r.getItemEnabled({seriesId:n}),seriesId:n,colorName:i,colorRange:s,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(e){return`${e.index}`}getDatumId(e){return this.getDatumIdFromData(e)}pickFocus(e){var r;if(this.rootNode.children.length===0)return;this.focusPath.length===0&&_e.error("this.focusPath should not be empty");const{datumIndexDelta:t,otherIndexDelta:i}=e,{focusPath:s}=this,n=s.length-2;if(i!==0||s.length===1){const o=Math.max(0,n+i);if(s[o+1]==null){let a=s[s.length-1];for(;a.nodeDatum.children.length>0&&(a.nodeDatum.depth??-1)<o;){const l={nodeDatum:a.nodeDatum.children[0],childIndex:0};s.push(l),a=l}return this.computeFocusOutputs(a)}else return s.length=o+2,this.computeFocusOutputs(s[o+1])}else{if(t===0)return this.computeFocusOutputs(s[s.length-1]);{const o=s[n+1].childIndex+t,a=s[n].nodeDatum,l=(r=a==null?void 0:a.children)==null?void 0:r.length;if(l!=null){const c=St(0,o,l-1),p={nodeDatum:a.children[c],childIndex:c};return s[n+1]=p,s.length=n+2,this.computeFocusOutputs(p)}}}}getDatumAriaText(e,t){if(!(e instanceof Qg)){_e.error(`datum is not HierarchyNode: ${JSON.stringify(e)}`);return}return this.ctx.localeManager.t("ariaAnnounceHierarchyDatum",{level:(e.depth??-1)+1,count:e.children.length,description:t})}computeFocusOutputs({nodeDatum:e,childIndex:t}){const i=this.computeFocusBounds(e);if(i)return{datum:e,datumIndex:t,otherIndex:e.depth,bounds:i,showFocusBox:!0,clipFocusBox:!0}}},hu=class extends yr{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(hs),this.strokes=Object.values(sa)}};A([O(Fe)],hu.prototype,"childrenKey",2);A([O(Fe,{optional:!0})],hu.prototype,"sizeKey",2);A([O(Fe,{optional:!0})],hu.prototype,"colorKey",2);A([O(Fe,{optional:!0})],hu.prototype,"colorName",2);A([O(qr)],hu.prototype,"fills",2);A([O(qr)],hu.prototype,"strokes",2);A([O(qr,{optional:!0})],hu.prototype,"colorRange",2);var lie=class{constructor(e,t,i,s){this.lon0=e,this.lat0=t,this.lon1=i,this.lat1=s}merge(e){this.lon0=Math.min(this.lon0,e.lon0),this.lat0=Math.min(this.lat0,e.lat0),this.lon1=Math.max(this.lon1,e.lon1),this.lat1=Math.max(this.lat1,e.lat1)}},CE=class WM{constructor(){this.id=Qr(this),this.axisGroup=new yn({name:`${this.id}-AxisTicks`,zIndex:2}),this.labelSelection=Ji.select(this.axisGroup,gs),this.interval=new _h,this.label=new ys,this.scale=new $r,this.position="bottom",this.translationX=0,this.translationY=0,this.padding=0}attachAxis(t){t.appendChild(this.axisGroup)}calculateLayout(){this.scale.interval=this.interval.step;const t=[],i=this.generateTicks(),{translationX:s,translationY:n}=this;return this.labelSelection.update(i.ticks.map(r=>this.createLabelDatum(r)),void 0,r=>r.tickId),this.labelSelection.each((r,o)=>{r.setProperties(o),o.visible&&t.push(r.getBBox())}),this.axisGroup.setProperties({translationX:s,translationY:n}),Ue.merge(t)}getLabelParams(t){const{padding:i}=this,{translate:s}=t;switch(this.position){case"top":case"bottom":return{x:s,y:i,textAlign:"center",textBaseline:"top"};case"left":case"right":return{x:i,y:s,textAlign:"start",textBaseline:"middle"}}}inRange(t,i=.001){const[s,n]=Ks(this.scale.range);return t>=s-i&&t<=n+i}createLabelDatum(t){const{x:i,y:s,textBaseline:n,textAlign:r}=this.getLabelParams(t);return{visible:!!t.tickLabel,tickId:t.tickId,fill:this.label.color,fontFamily:this.label.fontFamily,fontSize:this.label.fontSize,fontStyle:this.label.fontStyle,fontWeight:this.label.fontWeight,rotation:0,rotationCenterX:0,text:t.tickLabel,textAlign:r,textBaseline:n,x:i,y:s}}generateTicks(){const{minSpacing:t,maxSpacing:i}=this.interval,s=iR(Ef(this.scale.range),2),{maxTickCount:n,minTickCount:r,tickCount:o}=dO(s,t,i,WM.DefaultTickCount,WM.DefaultMinSpacing);o&&(this.scale.tickCount=o,this.scale.minTickCount=r,this.scale.maxTickCount=n);const a=this.getTicksData();if(this.position==="bottom"||this.position==="top"){const l=Tl.getMeasurer({font:this.label}),c=this.scale.getDomain(),g=c[0]>c[1]?-1:1;let f=-1/0*g;a.ticks=a.ticks.filter(y=>Math.sign(y.translate-f)!==g?!1:(f=y.translate+l.textWidth(y.tickLabel,!0)*g,!0))}return a}getTicksData(){var o,a;const t=[],i=this.scale.ticks(),s=i.reduce((l,c)=>Math.max(l,VC(c)),0),n=PR(),r=this.label.format?this.scale.tickFormat({ticks:i,specifier:this.label.format}):l=>Of(l,s);for(let l=0;l<i.length;l++){const c=i[l],p=this.scale.convert(c);if(!this.inRange(p))continue;const g=((a=(o=this.label).formatter)==null?void 0:a.call(o,{value:c,index:l,fractionDigits:s}))??r(c),f=n(g);t.push({tick:c,tickId:f,tickLabel:g,translate:p})}return{rawTicks:i,fractionDigits:s,ticks:t}}};CE.DefaultTickCount=5;CE.DefaultMinSpacing=50;var cie=CE,uie=0;function hie(e,t){const i=Xt("button",qS("ag-charts-input ag-charts-button",t));return e.label!==void 0?i.append(e.label):(i.append(NB(e.icon)),i.ariaLabel=e.altText),i.addEventListener("click",e.onPress),xh(i,t),i}function die(e,t){const i=Xt("input",qS("ag-charts-input ag-charts-checkbox",t));return i.type="checkbox",i.checked=e.checked,i.addEventListener("change",s=>e.onChange(i.checked,s)),i.addEventListener("keydown",s=>{VR(s)&&(s.preventDefault(),i.click())}),xh(i,t),i}function pie(e,t){const i=Xt("select",qS("ag-charts-input ag-charts-select",t));return i.append(...e.options.map(s=>{const n=Xt("option");return n.value=s.value,n.textContent=s.label,n})),ii(i,"data-preventdefault",!1),i.value=e.value,i.addEventListener("change",s=>e.onChange(i.value,s)),xh(i,t),i}function gie(e,t){const i=Xt("textarea",qS("ag-charts-input ag-charts-textarea",t));return i.value=e.value,i.addEventListener("input",s=>e.onChange(i.value,s)),xh(i,t),ii(i,"data-preventdefault",!1),i}function NB(e){const t=Xt("span",`ag-charts-icon ag-charts-icon-${e}`);return ii(t,"aria-hidden",!0),t}function qS(e,t){return t==null?e:`${e} ${t.class}`}var fie=class extends iS{constructor(e,t,i=0,s){super(e,t,s),this.angle=i}createCanvasGradient(e,t){const{angle:s}=this,n=Qt(Ys(s+90)),r=t.x+t.width*.5,o=t.y+t.height*.5;return e.createConicGradient(n,r,o)}},SE=class extends Rn{constructor(e=""){super(),this.x=0,this.y=0,this.commands=[],this._d="",this.d=e}get d(){return this._d}set d(e){if(e!==this._d){this._d=e,this.commands.length=0;for(const[t,i,s]of e.matchAll(/([A-Z])([0-9. ]*)/g)){const n=s.split(/\s+/g).map(Number);this.commands.push([i,n])}this.checkPathDirty()}}updatePath(){const{path:e,x:t,y:i}=this;e.clear();let s=t,n=i;for(const[r,o]of this.commands)switch(r){case"M":e.moveTo(t+o[0],i+o[1]),s=t+o[0];break;case"C":e.cubicCurveTo(t+o[0],i+o[1],t+o[2],i+o[3],t+o[4],i+o[5]),s=t+o[4],n=i+o[5];break;case"H":e.lineTo(t+o[0],n),s=i+o[0];break;case"L":e.lineTo(t+o[0],i+o[1]),s=t+o[0],n=i+o[1];break;case"V":e.lineTo(s,i+o[0]),n=i+o[0];break;case"Z":e.closePath();break;default:throw new Error(`Could not translate command '${r}' with '${o.join(" ")}'`)}e.closePath()}};A([gt()],SE.prototype,"x",2);A([gt()],SE.prototype,"y",2);var wE=class OB extends Kn{updatePath(){const t=this.size/2;super.applyPath(t,OB.moves)}};wE.className="ArrowUp";wE.moves=[{x:0,y:0,t:"move"},{x:1,y:1.2},{x:-.5,y:0},{x:0,y:.8},{x:-1,y:0},{x:0,y:-.8},{x:-.5,y:0}];var _B=wE,BB=class extends Kn{updatePath(){const e=this.size/2;super.applyPath(e,_B.moves.map(t=>({x:t.x*-1,y:t.y*-1})))}};BB.className="ArrowDown";var mie={};ko(mie,{ButtonWidget:()=>Sm,NativeWidget:()=>Hc,SliderWidget:()=>KR,ToolbarWidget:()=>uS,WIDGET_HTML_EVENTS:()=>jR,Widget:()=>Pl,WidgetEventUtil:()=>Bf});var JA="canvas-overlay",xE=class extends oS{constructor(e,t,i){super(),this.ctx=e,this.hideFns=[],this.moduleId=`popover-${t}`,i!=null&&i.detached?this.element=Xt("div"):this.element=e.domManager.addChild(JA,this.moduleId),this.element.setAttribute("role","presentation"),this.destroyFns.push(()=>e.domManager.removeChild(JA,this.moduleId))}attachTo(e){this.element.parentElement||e.element.append(this.element)}hide(e){const{lastFocus:t=this.lastFocus}=e??{};this.element.children.length!==0&&(this.hideFns.forEach(i=>i()),t==null||t.focus(),this.lastFocus=void 0)}removeChildren(){this.element.replaceChildren()}showWithChildren(e,t){if(!this.element.parentElement)throw new Error("Can not show popover that has not been attached to a parent.");const i=Xt("div","ag-charts-popover");if(t.ariaLabel!=null&&i.setAttribute("aria-label",t.ariaLabel),t.class!=null&&i.classList.add(t.class),i.replaceChildren(...e),this.element.replaceChildren(i),this.hideFns.push(()=>this.removeChildren()),t.onHide&&this.hideFns.push(t.onHide),t.initialFocus&&t.sourceEvent){const s=WR(t.sourceEvent);s!==void 0&&(this.lastFocus=s,this.initialFocus=t.initialFocus)}return i}getPopoverElement(){return this.element.firstElementChild}updatePosition(e){var i;const t=this.getPopoverElement();t&&(t.style.setProperty("right","unset"),t.style.setProperty("bottom","unset"),e.x!=null&&t.style.setProperty("left",`${Math.floor(e.x)}px`),e.y!=null&&t.style.setProperty("top",`${Math.floor(e.y)}px`),(i=this.initialFocus)==null||i.focus(),this.initialFocus=void 0)}},GB=class extends xE{setAnchor(e,t){this.anchor=e,this.fallbackAnchor=t,this.updatePosition(e),this.repositionWithinBounds()}showWithChildren(e,t){const i=t.anchor??this.anchor,s=t.fallbackAnchor??this.fallbackAnchor,n=super.showWithChildren(e,t);return i&&this.setAnchor(i,s),Mi().requestAnimationFrame(()=>{this.repositionWithinBounds()}),n}repositionWithinBounds(){const{anchor:e,ctx:t,fallbackAnchor:i}=this,s=this.getPopoverElement();if(!e||!s)return;const n=t.domManager.getBoundingClientRect(),{offsetWidth:r,offsetHeight:o}=s;let a=St(0,e.x,n.width-r),l=St(0,e.y,n.height-o);a!==e.x&&(i==null?void 0:i.x)!=null&&(a=St(0,i.x-r,n.width-r)),l!==e.y&&(i==null?void 0:i.y)!=null&&(l=St(0,i.y-o,n.height-o)),this.updatePosition({x:a,y:l})}},vie=class extends GB{show(e){const t=e.items.map(s=>this.createRow(e,s)),i=this.showWithChildren(t,e);i.classList.add("ag-charts-menu"),i.setAttribute("role","menu"),this.menuCloser=l_({orientation:"vertical",menu:i,buttons:t,sourceEvent:e.sourceEvent,closeCallback:()=>this.hide()}),this.hideFns.push(()=>{var s;(s=this.menuCloser)==null||s.finishClosing(),this.menuCloser=void 0})}createRow(e,t){const{menuItemRole:i="menuitem"}=e,s=t.value===e.value,n=Xt("div","ag-charts-menu__row");if(n.setAttribute("role",i),i==="menuitemradio"&&n.setAttribute("aria-checked",(e.value===t.value).toString()),typeof t.value=="string"&&(n.dataset.popoverId=t.value),n.classList.toggle("ag-charts-menu__row--active",s),t.icon!=null){const l=Xt("span",`ag-charts-menu__icon ${tS(t.icon)}`);n.appendChild(l)}const r=t.strokeWidth!=null;if(r&&(n.classList.toggle("ag-charts-menu__row--stroke-width-visible",r),n.style.setProperty("--strokeWidth",r?`${t.strokeWidth}px`:null)),t.label!=null){const l=Xt("span","ag-charts-menu__label");l.textContent=this.ctx.localeManager.t(t.label),n.appendChild(l)}"altText"in t&&(n.ariaLabel=this.ctx.localeManager.t(t.altText));const o=()=>{var l;(l=e.onPress)==null||l.call(e,t)},a=l=>{VR(l)&&(o(),l.preventDefault(),l.stopPropagation())};return n.addEventListener("keydown",a),n.addEventListener("click",a),n.addEventListener("mousemove",()=>{n.focus({preventScroll:!0})}),n}},zB=class extends xE{constructor(){super(...arguments),this.dragged=!1}setDragHandle(e){e.addListener("drag-start",t=>{e.addClass(this.dragHandleDraggingClass),this.onDragStart(t)}),e.addListener("drag-move",this.onDragMove.bind(this)),e.addListener("drag-end",()=>{e.removeClass(this.dragHandleDraggingClass),this.onDragEnd.bind(this)})}onDragStart(e){const t=this.getPopoverElement();t&&(e.sourceEvent.preventDefault(),this.dragged=!0,this.dragStartState={client:jd.from(e.clientX,e.clientY),position:jd.from(Number(t.style.getPropertyValue("left").replace("px","")),Number(t.style.getPropertyValue("top").replace("px","")))})}onDragMove(e){const{dragStartState:t}=this,i=this.getPopoverElement();if(!t||!i)return;const s=jd.sub(jd.from(e.clientX,e.clientY),t.client),n=jd.add(t.position,s),r=this.ctx.domManager.getBoundingClientRect(),o={};n.x>=r.x&&n.x+i.offsetWidth<=r.width&&(o.x=n.x),n.y>=r.y&&n.y+i.offsetHeight<=r.height&&(o.y=n.y),this.updatePosition(o)}onDragEnd(){this.dragStartState=void 0}},Lm=class extends yt{};A([O(Fe,{optional:!0})],Lm.prototype,"icon",2);A([O(Fe,{optional:!0})],Lm.prototype,"label",2);A([O(Fe,{optional:!0})],Lm.prototype,"ariaLabel",2);A([O(Fe,{optional:!0})],Lm.prototype,"tooltip",2);var HB=class extends Sm{constructor(e){super(),this.localeManager=e}update(e){const{localeManager:t}=this;e.tooltip&&(this.elem.title=t.t(e.tooltip));let i="";if(e.icon!=null&&(i=`<span class="${tS(e.icon)} ag-charts-toolbar__icon"></span>`),e.label!=null){const s=t.t(e.label);i=`${i}<span class="ag-charts-toolbar__label">${s}</span>`}this.elem.innerHTML=i}setChecked(e){ii(this.elem,"aria-checked",e)}},eP="ag-charts-toolbar__button--active",bE=class extends uS{constructor(e,t="horizontal"){super(t),this.localeManager=e,this.horizontalSpacing=10,this.verticalSpacing=10,this.events=new Ma,this.hasPrefix=!1,this.buttonWidgets=[],this.addClass("ag-charts-toolbar"),this.toggleClass("ag-charts-toolbar--horizontal",t==="horizontal"),this.toggleClass("ag-charts-toolbar--vertical",t==="vertical")}addToolbarListener(e,t){return this.events.addListener(e,t)}clearButtons(){for(const e of this.buttonWidgets)e.destroy();this.buttonWidgets.splice(0)}updateButtons(e){const{buttonWidgets:t}=this;for(const[i,s]of e.entries())(this.buttonWidgets.at(i)??this.createButton(i,s)).update(s);for(let i=e.length;i<t.length;i++){const s=this.buttonWidgets.at(i);s==null||s.destroy()}this.buttonWidgets.splice(e.length),this.refreshButtonClasses()}updateButtonByIndex(e,t){var i;(i=this.buttonWidgets.at(e))==null||i.update(t)}clearActiveButton(){for(const e of this.buttonWidgets)e.toggleClass(eP,!1)}toggleActiveButtonByIndex(e){if(e!==-1)for(const[t,i]of this.buttonWidgets.entries())i.toggleClass(eP,e!=null&&e===t)}toggleButtonEnabledByIndex(e,t){var i;e!==-1&&((i=this.buttonWidgets.at(e))==null||i.setEnabled(t))}toggleSwitchCheckedByIndex(e,t){var i;e!==-1&&((i=this.buttonWidgets.at(e))==null||i.setChecked(t))}getButtonBounds(){return this.buttonWidgets.map(e=>this.getButtonWidgetBounds(e))}setButtonHiddenByIndex(e,t){var i;(i=this.buttonWidgets.at(e))==null||i.setHidden(t)}getButtonWidgetBounds(e){const t=this.getBounds(),i=e.getBounds();return new Ue(i.x+t.x,i.y+t.y,i.width,i.height)}refreshButtonClasses(){var r;const{buttonWidgets:e,hasPrefix:t}=this;let i,s,n;for(const[o,a]of e.entries())i=!t&&o===0||n!=a.section,s=o===e.length-1||a.section!=((r=e.at(o+1))==null?void 0:r.section),a.toggleClass("ag-charts-toolbar__button--first",i),a.toggleClass("ag-charts-toolbar__button--last",s),a.toggleClass("ag-charts-toolbar__button--gap",o>0&&i),n=a.section}createButton(e,t){const i=this.createButtonWidget();return i.addClass("ag-charts-toolbar__button"),i.addListener("click",s=>{const n={index:e,...t instanceof yt?t.toJson():t},r=this.getButtonWidgetBounds(i);this.events.dispatch("button-pressed",{event:s,button:n,buttonBounds:r})}),i.addListener("focus",()=>{this.events.dispatch("button-focused",{button:{index:e}})}),t.section&&(i.section=t.section),this.buttonWidgets.push(i),this.addChild(i),i}},yie=class extends bE{createButtonWidget(){return new HB(this.localeManager)}},Cie=class extends zB{constructor(e,t,i){super(e,t),this.onPopoverMoved=i,this.dragHandleDraggingClass="ag-charts-floating-toolbar__drag-handle--dragging"}show(e,t){this.showWithChildren(e,{...t,class:"ag-charts-floating-toolbar"})}hide(){this.dragged=!1,super.hide()}getBounds(){const e=this.getPopoverElement();return new Ue((e==null?void 0:e.offsetLeft)??0,(e==null?void 0:e.offsetTop)??0,(e==null?void 0:e.offsetWidth)??0,(e==null?void 0:e.offsetHeight)??0)}hasBeenDragged(){return this.dragged}setAnchor(e,t,i){const s=this.getPopoverElement();if(!s)return;const n=e.position??"above",{offsetWidth:r,offsetHeight:o}=s;let a=e.y-o-i,l=e.x-r/2;n==="below"?a=e.y+i:n==="right"?(a=e.y-o/2,l=e.x+t):n==="above-left"&&(l=e.x),this.updatePosition({x:l,y:a})}ignorePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="none")}capturePointerEvents(){const e=this.getPopoverElement();e&&(e.style.pointerEvents="unset")}updatePosition(e){const t=this.getBounds(),i=this.ctx.domManager.getBoundingClientRect();e.x=Math.floor(St(0,e.x,i.width-t.width)),e.y=Math.floor(St(0,e.y,i.height-t.height)),super.updatePosition(e),this.onPopoverMoved()}},Sie=class extends bE{constructor(e,t){super(e.localeManager),this.hasPrefix=!0,this.popover=new Cie(e,t,this.onPopoverMoved.bind(this)),this.dragHandle=new wie(e.localeManager.t("toolbarAnnotationsDragHandle")),this.popover.setDragHandle(this.dragHandle)}show(e){this.popover.show([this.dragHandle.getElement(),this.getElement()],e)}hide(){this.popover.hide()}setAnchor(e){this.popover.setAnchor(e,this.horizontalSpacing,this.verticalSpacing)}hasBeenDragged(){return this.popover.hasBeenDragged()}ignorePointerEvents(){this.popover.ignorePointerEvents()}capturePointerEvents(){this.popover.capturePointerEvents()}onPopoverMoved(){var i;const e=this.popover.getBounds();if((i=this.popoverBounds)!=null&&i.equals(e))return;this.popoverBounds=e.clone();const t=this.getButtonBounds();this.events.dispatch("toolbar-moved",{popoverBounds:e,buttonBounds:t})}getButtonWidgetBounds(e){const t=this.popover.getBounds(),i=super.getButtonWidgetBounds(e),s=this.dragHandle.getBounds();return new Ue(i.x+t.x-s.width,i.y+t.y,i.width,i.height)}},wie=class extends Hc{constructor(e){super(Xt("div","ag-charts-floating-toolbar__drag-handle"));const t=new Hc(Xt("span",`${tS("drag-handle")} ag-charts-toolbar__icon`));t.setAriaHidden(!0),this.addChild(t),this.elem.title=e}},xie={...SN,...nO};function tP(e,t){return{...e,container:t.current}}function bie(e,t){const i=T.forwardRef(function(n,r){const{options:o,style:a,className:l}=n,c=T.useRef(null),p=T.useRef();T.useLayoutEffect(()=>{const f=e(tP(o,c));return p.current=f,()=>{f.destroy()}},[]);const g=p.current===void 0;return T.useEffect(()=>{var f;g||(f=p.current)==null||f.update(tP(o,c)).catch(y=>console.error(y))},[o]),T.useImperativeHandle(r,()=>p.current,[]),T.useMemo(()=>T.createElement("div",{ref:c,style:a,className:l}),[a,l])});return i.displayName=t,i}var Mie=bie(e=>_c.create(e),"AgCharts");function iP(){var c;const[e,t]=T.useState([]),[i,s]=T.useState(""),[n,r]=T.useState([]),[o,a]=T.useState([]);T.useEffect(()=>{async function p(){try{const f=await(await fetch("https://hub.dataverse.org/api/installation/metrics/monthly")).json();a(f);const y=f.map(C=>({dvHubId:C.dvHubId,name:C.name}));t(y)}catch(g){console.error("Error fetching metrics data:",g)}}p()},[]),T.useEffect(()=>{async function p(){if(i)try{const g=o.find(y=>y.dvHubId===i),f=g?g.metrics.map(y=>({date:new Date(y.recordDate).getFullYear().toString(),fileCount:y.files})):[];r(f)}catch(g){console.error("Error fetching chart data:",g)}}p()},[i]);const l={data:n,series:[{type:"bar",xKey:"date",yKey:"fileCount",title:"File Count",tooltip:{renderer:({datum:p})=>({title:`${p.fileCount.toLocaleString()}`})}}],axes:[{type:"category",position:"bottom",title:{text:"Date"}},{type:"number",position:"left",title:{text:"File Count"}}]};return fe.jsxs("div",{children:[fe.jsx("h1",{children:"Installation Metrics"}),fe.jsxs(Px.Group,{controlId:"installationSelect",children:[fe.jsx(Px.Label,{children:"Select Installation"}),fe.jsx(Px.Control,{as:"select",onChange:p=>s(p.target.value),children:e.map(p=>fe.jsx("option",{value:p.dvHubId,children:p.name},p.dvHubId))})]}),i&&fe.jsxs("div",{children:[fe.jsxs("h2",{children:["Files Over Time for ",(c=e.find(p=>p.dvHubId===i))==null?void 0:c.name]}),fe.jsx(Mie,{options:l})]})]})}const Rie=({error:e,resetErrorBoundary:t})=>fe.jsx("div",{className:"bg-slate-500 fixed bottom-0 left-0 right-0 top-16 ",children:fe.jsxs("div",{role:"alert",children:[fe.jsx("p",{children:"Something went wrong:"}),fe.jsx("pre",{children:e.message}),fe.jsx("button",{onClick:t,children:"Try again"})]})});function Die({error:e,resetErrorBoundary:t}){return fe.jsx(Rie,{error:e,resetErrorBoundary:t})}const Eie=()=>fe.jsx(fe.Fragment,{children:fe.jsxs(TV,{FallbackComponent:Die,children:[fe.jsxs(_x,{bg:"dark",variant:"dark",children:[fe.jsx(_x.Brand,{className:"text-orange-500 p-1",href:"/",children:"Dataverse Hub"}),fe.jsx(_x.Toggle,{"aria-controls":"basic-navbar-nav"}),fe.jsx(PP,{children:fe.jsxs(Pg,{className:"me-auto",children:[fe.jsx(Pg.Link,{disabled:!0,children:"|"}),fe.jsx(Pg.Link,{as:Fy,to:"/map",children:"Map"}),fe.jsx(Pg.Link,{disabled:!0,children:"|"}),fe.jsx(Pg.Link,{as:Fy,to:"/metrics",children:"Metrics"})]})})]}),fe.jsx(Xz,{})]})}),Iie=wH([{path:"/",element:fe.jsx(Eie,{}),children:[{index:!0,element:fe.jsx(iP,{})},{path:"/map",element:fe.jsx(H6,{})},{path:"/metrics",element:fe.jsx(iP,{})}]}]);TG.createRoot(document.getElementById("root")).render(fe.jsx(T.StrictMode,{children:fe.jsx(FH,{router:Iie})}));
